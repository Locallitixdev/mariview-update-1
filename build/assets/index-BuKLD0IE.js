function GW(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const h=Object.getOwnPropertyDescriptor(r,s);h&&Object.defineProperty(e,s,h.get?h:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const h of s)if(h.type==="childList")for(const d of h.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function n(s){const h={};return s.integrity&&(h.integrity=s.integrity),s.referrerPolicy&&(h.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?h.credentials="include":s.crossOrigin==="anonymous"?h.credentials="omit":h.credentials="same-origin",h}function r(s){if(s.ep)return;s.ep=!0;const h=n(s);fetch(s.href,h)}})();var w_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Kr(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var V2={exports:{}},Lv={},U2={exports:{}},br={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var KN;function WW(){if(KN)return br;KN=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),d=Symbol.for("react.context"),o=Symbol.for("react.forward_ref"),_=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),A=Symbol.for("react.lazy"),P=Symbol.iterator;function N(Re){return Re===null||typeof Re!="object"?null:(Re=P&&Re[P]||Re["@@iterator"],typeof Re=="function"?Re:null)}var z={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},q=Object.assign,$={};function O(Re,nt,pt){this.props=Re,this.context=nt,this.refs=$,this.updater=pt||z}O.prototype.isReactComponent={},O.prototype.setState=function(Re,nt){if(typeof Re!="object"&&typeof Re!="function"&&Re!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Re,nt,"setState")},O.prototype.forceUpdate=function(Re){this.updater.enqueueForceUpdate(this,Re,"forceUpdate")};function X(){}X.prototype=O.prototype;function K(Re,nt,pt){this.props=Re,this.context=nt,this.refs=$,this.updater=pt||z}var te=K.prototype=new X;te.constructor=K,q(te,O.prototype),te.isPureReactComponent=!0;var ne=Array.isArray,H=Object.prototype.hasOwnProperty,ae={current:null},de={key:!0,ref:!0,__self:!0,__source:!0};function ye(Re,nt,pt){var Ct,Mt={},Nt=null,Tt=null;if(nt!=null)for(Ct in nt.ref!==void 0&&(Tt=nt.ref),nt.key!==void 0&&(Nt=""+nt.key),nt)H.call(nt,Ct)&&!de.hasOwnProperty(Ct)&&(Mt[Ct]=nt[Ct]);var Ot=arguments.length-2;if(Ot===1)Mt.children=pt;else if(1<Ot){for(var rt=Array(Ot),zt=0;zt<Ot;zt++)rt[zt]=arguments[zt+2];Mt.children=rt}if(Re&&Re.defaultProps)for(Ct in Ot=Re.defaultProps,Ot)Mt[Ct]===void 0&&(Mt[Ct]=Ot[Ct]);return{$$typeof:e,type:Re,key:Nt,ref:Tt,props:Mt,_owner:ae.current}}function Ae(Re,nt){return{$$typeof:e,type:Re.type,key:nt,ref:Re.ref,props:Re.props,_owner:Re._owner}}function _e(Re){return typeof Re=="object"&&Re!==null&&Re.$$typeof===e}function fe(Re){var nt={"=":"=0",":":"=2"};return"$"+Re.replace(/[=:]/g,function(pt){return nt[pt]})}var Ee=/\/+/g;function Be(Re,nt){return typeof Re=="object"&&Re!==null&&Re.key!=null?fe(""+Re.key):nt.toString(36)}function De(Re,nt,pt,Ct,Mt){var Nt=typeof Re;(Nt==="undefined"||Nt==="boolean")&&(Re=null);var Tt=!1;if(Re===null)Tt=!0;else switch(Nt){case"string":case"number":Tt=!0;break;case"object":switch(Re.$$typeof){case e:case t:Tt=!0}}if(Tt)return Tt=Re,Mt=Mt(Tt),Re=Ct===""?"."+Be(Tt,0):Ct,ne(Mt)?(pt="",Re!=null&&(pt=Re.replace(Ee,"$&/")+"/"),De(Mt,nt,pt,"",function(zt){return zt})):Mt!=null&&(_e(Mt)&&(Mt=Ae(Mt,pt+(!Mt.key||Tt&&Tt.key===Mt.key?"":(""+Mt.key).replace(Ee,"$&/")+"/")+Re)),nt.push(Mt)),1;if(Tt=0,Ct=Ct===""?".":Ct+":",ne(Re))for(var Ot=0;Ot<Re.length;Ot++){Nt=Re[Ot];var rt=Ct+Be(Nt,Ot);Tt+=De(Nt,nt,pt,rt,Mt)}else if(rt=N(Re),typeof rt=="function")for(Re=rt.call(Re),Ot=0;!(Nt=Re.next()).done;)Nt=Nt.value,rt=Ct+Be(Nt,Ot++),Tt+=De(Nt,nt,pt,rt,Mt);else if(Nt==="object")throw nt=String(Re),Error("Objects are not valid as a React child (found: "+(nt==="[object Object]"?"object with keys {"+Object.keys(Re).join(", ")+"}":nt)+"). If you meant to render a collection of children, use an array instead.");return Tt}function Je(Re,nt,pt){if(Re==null)return Re;var Ct=[],Mt=0;return De(Re,Ct,"","",function(Nt){return nt.call(pt,Nt,Mt++)}),Ct}function Ve(Re){if(Re._status===-1){var nt=Re._result;nt=nt(),nt.then(function(pt){(Re._status===0||Re._status===-1)&&(Re._status=1,Re._result=pt)},function(pt){(Re._status===0||Re._status===-1)&&(Re._status=2,Re._result=pt)}),Re._status===-1&&(Re._status=0,Re._result=nt)}if(Re._status===1)return Re._result.default;throw Re._result}var et={current:null},Ce={transition:null},We={ReactCurrentDispatcher:et,ReactCurrentBatchConfig:Ce,ReactCurrentOwner:ae};function Qe(){throw Error("act(...) is not supported in production builds of React.")}return br.Children={map:Je,forEach:function(Re,nt,pt){Je(Re,function(){nt.apply(this,arguments)},pt)},count:function(Re){var nt=0;return Je(Re,function(){nt++}),nt},toArray:function(Re){return Je(Re,function(nt){return nt})||[]},only:function(Re){if(!_e(Re))throw Error("React.Children.only expected to receive a single React element child.");return Re}},br.Component=O,br.Fragment=n,br.Profiler=s,br.PureComponent=K,br.StrictMode=r,br.Suspense=_,br.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=We,br.act=Qe,br.cloneElement=function(Re,nt,pt){if(Re==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+Re+".");var Ct=q({},Re.props),Mt=Re.key,Nt=Re.ref,Tt=Re._owner;if(nt!=null){if(nt.ref!==void 0&&(Nt=nt.ref,Tt=ae.current),nt.key!==void 0&&(Mt=""+nt.key),Re.type&&Re.type.defaultProps)var Ot=Re.type.defaultProps;for(rt in nt)H.call(nt,rt)&&!de.hasOwnProperty(rt)&&(Ct[rt]=nt[rt]===void 0&&Ot!==void 0?Ot[rt]:nt[rt])}var rt=arguments.length-2;if(rt===1)Ct.children=pt;else if(1<rt){Ot=Array(rt);for(var zt=0;zt<rt;zt++)Ot[zt]=arguments[zt+2];Ct.children=Ot}return{$$typeof:e,type:Re.type,key:Mt,ref:Nt,props:Ct,_owner:Tt}},br.createContext=function(Re){return Re={$$typeof:d,_currentValue:Re,_currentValue2:Re,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},Re.Provider={$$typeof:h,_context:Re},Re.Consumer=Re},br.createElement=ye,br.createFactory=function(Re){var nt=ye.bind(null,Re);return nt.type=Re,nt},br.createRef=function(){return{current:null}},br.forwardRef=function(Re){return{$$typeof:o,render:Re}},br.isValidElement=_e,br.lazy=function(Re){return{$$typeof:A,_payload:{_status:-1,_result:Re},_init:Ve}},br.memo=function(Re,nt){return{$$typeof:w,type:Re,compare:nt===void 0?null:nt}},br.startTransition=function(Re){var nt=Ce.transition;Ce.transition={};try{Re()}finally{Ce.transition=nt}},br.unstable_act=Qe,br.useCallback=function(Re,nt){return et.current.useCallback(Re,nt)},br.useContext=function(Re){return et.current.useContext(Re)},br.useDebugValue=function(){},br.useDeferredValue=function(Re){return et.current.useDeferredValue(Re)},br.useEffect=function(Re,nt){return et.current.useEffect(Re,nt)},br.useId=function(){return et.current.useId()},br.useImperativeHandle=function(Re,nt,pt){return et.current.useImperativeHandle(Re,nt,pt)},br.useInsertionEffect=function(Re,nt){return et.current.useInsertionEffect(Re,nt)},br.useLayoutEffect=function(Re,nt){return et.current.useLayoutEffect(Re,nt)},br.useMemo=function(Re,nt){return et.current.useMemo(Re,nt)},br.useReducer=function(Re,nt,pt){return et.current.useReducer(Re,nt,pt)},br.useRef=function(Re){return et.current.useRef(Re)},br.useState=function(Re){return et.current.useState(Re)},br.useSyncExternalStore=function(Re,nt,pt){return et.current.useSyncExternalStore(Re,nt,pt)},br.useTransition=function(){return et.current.useTransition()},br.version="18.3.1",br}var XN;function rM(){return XN||(XN=1,U2.exports=WW()),U2.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var YN;function HW(){if(YN)return Lv;YN=1;var e=rM(),t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,h={key:!0,ref:!0,__self:!0,__source:!0};function d(o,_,w){var A,P={},N=null,z=null;w!==void 0&&(N=""+w),_.key!==void 0&&(N=""+_.key),_.ref!==void 0&&(z=_.ref);for(A in _)r.call(_,A)&&!h.hasOwnProperty(A)&&(P[A]=_[A]);if(o&&o.defaultProps)for(A in _=o.defaultProps,_)P[A]===void 0&&(P[A]=_[A]);return{$$typeof:t,type:o,key:N,ref:z,props:P,_owner:s.current}}return Lv.Fragment=n,Lv.jsx=d,Lv.jsxs=d,Lv}var JN;function ZW(){return JN||(JN=1,V2.exports=HW()),V2.exports}var f=ZW(),S_={},q2={exports:{}},Vl={},G2={exports:{}},W2={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var QN;function KW(){return QN||(QN=1,(function(e){function t(Ce,We){var Qe=Ce.length;Ce.push(We);e:for(;0<Qe;){var Re=Qe-1>>>1,nt=Ce[Re];if(0<s(nt,We))Ce[Re]=We,Ce[Qe]=nt,Qe=Re;else break e}}function n(Ce){return Ce.length===0?null:Ce[0]}function r(Ce){if(Ce.length===0)return null;var We=Ce[0],Qe=Ce.pop();if(Qe!==We){Ce[0]=Qe;e:for(var Re=0,nt=Ce.length,pt=nt>>>1;Re<pt;){var Ct=2*(Re+1)-1,Mt=Ce[Ct],Nt=Ct+1,Tt=Ce[Nt];if(0>s(Mt,Qe))Nt<nt&&0>s(Tt,Mt)?(Ce[Re]=Tt,Ce[Nt]=Qe,Re=Nt):(Ce[Re]=Mt,Ce[Ct]=Qe,Re=Ct);else if(Nt<nt&&0>s(Tt,Qe))Ce[Re]=Tt,Ce[Nt]=Qe,Re=Nt;else break e}}return We}function s(Ce,We){var Qe=Ce.sortIndex-We.sortIndex;return Qe!==0?Qe:Ce.id-We.id}if(typeof performance=="object"&&typeof performance.now=="function"){var h=performance;e.unstable_now=function(){return h.now()}}else{var d=Date,o=d.now();e.unstable_now=function(){return d.now()-o}}var _=[],w=[],A=1,P=null,N=3,z=!1,q=!1,$=!1,O=typeof setTimeout=="function"?setTimeout:null,X=typeof clearTimeout=="function"?clearTimeout:null,K=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function te(Ce){for(var We=n(w);We!==null;){if(We.callback===null)r(w);else if(We.startTime<=Ce)r(w),We.sortIndex=We.expirationTime,t(_,We);else break;We=n(w)}}function ne(Ce){if($=!1,te(Ce),!q)if(n(_)!==null)q=!0,Ve(H);else{var We=n(w);We!==null&&et(ne,We.startTime-Ce)}}function H(Ce,We){q=!1,$&&($=!1,X(ye),ye=-1),z=!0;var Qe=N;try{for(te(We),P=n(_);P!==null&&(!(P.expirationTime>We)||Ce&&!fe());){var Re=P.callback;if(typeof Re=="function"){P.callback=null,N=P.priorityLevel;var nt=Re(P.expirationTime<=We);We=e.unstable_now(),typeof nt=="function"?P.callback=nt:P===n(_)&&r(_),te(We)}else r(_);P=n(_)}if(P!==null)var pt=!0;else{var Ct=n(w);Ct!==null&&et(ne,Ct.startTime-We),pt=!1}return pt}finally{P=null,N=Qe,z=!1}}var ae=!1,de=null,ye=-1,Ae=5,_e=-1;function fe(){return!(e.unstable_now()-_e<Ae)}function Ee(){if(de!==null){var Ce=e.unstable_now();_e=Ce;var We=!0;try{We=de(!0,Ce)}finally{We?Be():(ae=!1,de=null)}}else ae=!1}var Be;if(typeof K=="function")Be=function(){K(Ee)};else if(typeof MessageChannel<"u"){var De=new MessageChannel,Je=De.port2;De.port1.onmessage=Ee,Be=function(){Je.postMessage(null)}}else Be=function(){O(Ee,0)};function Ve(Ce){de=Ce,ae||(ae=!0,Be())}function et(Ce,We){ye=O(function(){Ce(e.unstable_now())},We)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ce){Ce.callback=null},e.unstable_continueExecution=function(){q||z||(q=!0,Ve(H))},e.unstable_forceFrameRate=function(Ce){0>Ce||125<Ce?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Ae=0<Ce?Math.floor(1e3/Ce):5},e.unstable_getCurrentPriorityLevel=function(){return N},e.unstable_getFirstCallbackNode=function(){return n(_)},e.unstable_next=function(Ce){switch(N){case 1:case 2:case 3:var We=3;break;default:We=N}var Qe=N;N=We;try{return Ce()}finally{N=Qe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ce,We){switch(Ce){case 1:case 2:case 3:case 4:case 5:break;default:Ce=3}var Qe=N;N=Ce;try{return We()}finally{N=Qe}},e.unstable_scheduleCallback=function(Ce,We,Qe){var Re=e.unstable_now();switch(typeof Qe=="object"&&Qe!==null?(Qe=Qe.delay,Qe=typeof Qe=="number"&&0<Qe?Re+Qe:Re):Qe=Re,Ce){case 1:var nt=-1;break;case 2:nt=250;break;case 5:nt=1073741823;break;case 4:nt=1e4;break;default:nt=5e3}return nt=Qe+nt,Ce={id:A++,callback:We,priorityLevel:Ce,startTime:Qe,expirationTime:nt,sortIndex:-1},Qe>Re?(Ce.sortIndex=Qe,t(w,Ce),n(_)===null&&Ce===n(w)&&($?(X(ye),ye=-1):$=!0,et(ne,Qe-Re))):(Ce.sortIndex=nt,t(_,Ce),q||z||(q=!0,Ve(H))),Ce},e.unstable_shouldYield=fe,e.unstable_wrapCallback=function(Ce){var We=N;return function(){var Qe=N;N=We;try{return Ce.apply(this,arguments)}finally{N=Qe}}}})(W2)),W2}var eD;function XW(){return eD||(eD=1,G2.exports=KW()),G2.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tD;function YW(){if(tD)return Vl;tD=1;var e=rM(),t=XW();function n(m){for(var x="https://reactjs.org/docs/error-decoder.html?invariant="+m,k=1;k<arguments.length;k++)x+="&args[]="+encodeURIComponent(arguments[k]);return"Minified React error #"+m+"; visit "+x+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function h(m,x){d(m,x),d(m+"Capture",x)}function d(m,x){for(s[m]=x,m=0;m<x.length;m++)r.add(x[m])}var o=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),_=Object.prototype.hasOwnProperty,w=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,A={},P={};function N(m){return _.call(P,m)?!0:_.call(A,m)?!1:w.test(m)?P[m]=!0:(A[m]=!0,!1)}function z(m,x,k,B){if(k!==null&&k.type===0)return!1;switch(typeof x){case"function":case"symbol":return!0;case"boolean":return B?!1:k!==null?!k.acceptsBooleans:(m=m.toLowerCase().slice(0,5),m!=="data-"&&m!=="aria-");default:return!1}}function q(m,x,k,B){if(x===null||typeof x>"u"||z(m,x,k,B))return!0;if(B)return!1;if(k!==null)switch(k.type){case 3:return!x;case 4:return x===!1;case 5:return isNaN(x);case 6:return isNaN(x)||1>x}return!1}function $(m,x,k,B,Q,oe,we){this.acceptsBooleans=x===2||x===3||x===4,this.attributeName=B,this.attributeNamespace=Q,this.mustUseProperty=k,this.propertyName=m,this.type=x,this.sanitizeURL=oe,this.removeEmptyString=we}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(m){O[m]=new $(m,0,!1,m,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(m){var x=m[0];O[x]=new $(x,1,!1,m[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(m){O[m]=new $(m,2,!1,m.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(m){O[m]=new $(m,2,!1,m,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(m){O[m]=new $(m,3,!1,m.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(m){O[m]=new $(m,3,!0,m,null,!1,!1)}),["capture","download"].forEach(function(m){O[m]=new $(m,4,!1,m,null,!1,!1)}),["cols","rows","size","span"].forEach(function(m){O[m]=new $(m,6,!1,m,null,!1,!1)}),["rowSpan","start"].forEach(function(m){O[m]=new $(m,5,!1,m.toLowerCase(),null,!1,!1)});var X=/[\-:]([a-z])/g;function K(m){return m[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(m){var x=m.replace(X,K);O[x]=new $(x,1,!1,m,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(m){var x=m.replace(X,K);O[x]=new $(x,1,!1,m,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(m){var x=m.replace(X,K);O[x]=new $(x,1,!1,m,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(m){O[m]=new $(m,1,!1,m.toLowerCase(),null,!1,!1)}),O.xlinkHref=new $("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(m){O[m]=new $(m,1,!1,m.toLowerCase(),null,!0,!0)});function te(m,x,k,B){var Q=O.hasOwnProperty(x)?O[x]:null;(Q!==null?Q.type!==0:B||!(2<x.length)||x[0]!=="o"&&x[0]!=="O"||x[1]!=="n"&&x[1]!=="N")&&(q(x,k,Q,B)&&(k=null),B||Q===null?N(x)&&(k===null?m.removeAttribute(x):m.setAttribute(x,""+k)):Q.mustUseProperty?m[Q.propertyName]=k===null?Q.type===3?!1:"":k:(x=Q.attributeName,B=Q.attributeNamespace,k===null?m.removeAttribute(x):(Q=Q.type,k=Q===3||Q===4&&k===!0?"":""+k,B?m.setAttributeNS(B,x,k):m.setAttribute(x,k))))}var ne=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,H=Symbol.for("react.element"),ae=Symbol.for("react.portal"),de=Symbol.for("react.fragment"),ye=Symbol.for("react.strict_mode"),Ae=Symbol.for("react.profiler"),_e=Symbol.for("react.provider"),fe=Symbol.for("react.context"),Ee=Symbol.for("react.forward_ref"),Be=Symbol.for("react.suspense"),De=Symbol.for("react.suspense_list"),Je=Symbol.for("react.memo"),Ve=Symbol.for("react.lazy"),et=Symbol.for("react.offscreen"),Ce=Symbol.iterator;function We(m){return m===null||typeof m!="object"?null:(m=Ce&&m[Ce]||m["@@iterator"],typeof m=="function"?m:null)}var Qe=Object.assign,Re;function nt(m){if(Re===void 0)try{throw Error()}catch(k){var x=k.stack.trim().match(/\n( *(at )?)/);Re=x&&x[1]||""}return`
`+Re+m}var pt=!1;function Ct(m,x){if(!m||pt)return"";pt=!0;var k=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(x)if(x=function(){throw Error()},Object.defineProperty(x.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(x,[])}catch(Et){var B=Et}Reflect.construct(m,[],x)}else{try{x.call()}catch(Et){B=Et}m.call(x.prototype)}else{try{throw Error()}catch(Et){B=Et}m()}}catch(Et){if(Et&&B&&typeof Et.stack=="string"){for(var Q=Et.stack.split(`
`),oe=B.stack.split(`
`),we=Q.length-1,Ze=oe.length-1;1<=we&&0<=Ze&&Q[we]!==oe[Ze];)Ze--;for(;1<=we&&0<=Ze;we--,Ze--)if(Q[we]!==oe[Ze]){if(we!==1||Ze!==1)do if(we--,Ze--,0>Ze||Q[we]!==oe[Ze]){var ot=`
`+Q[we].replace(" at new "," at ");return m.displayName&&ot.includes("<anonymous>")&&(ot=ot.replace("<anonymous>",m.displayName)),ot}while(1<=we&&0<=Ze);break}}}finally{pt=!1,Error.prepareStackTrace=k}return(m=m?m.displayName||m.name:"")?nt(m):""}function Mt(m){switch(m.tag){case 5:return nt(m.type);case 16:return nt("Lazy");case 13:return nt("Suspense");case 19:return nt("SuspenseList");case 0:case 2:case 15:return m=Ct(m.type,!1),m;case 11:return m=Ct(m.type.render,!1),m;case 1:return m=Ct(m.type,!0),m;default:return""}}function Nt(m){if(m==null)return null;if(typeof m=="function")return m.displayName||m.name||null;if(typeof m=="string")return m;switch(m){case de:return"Fragment";case ae:return"Portal";case Ae:return"Profiler";case ye:return"StrictMode";case Be:return"Suspense";case De:return"SuspenseList"}if(typeof m=="object")switch(m.$$typeof){case fe:return(m.displayName||"Context")+".Consumer";case _e:return(m._context.displayName||"Context")+".Provider";case Ee:var x=m.render;return m=m.displayName,m||(m=x.displayName||x.name||"",m=m!==""?"ForwardRef("+m+")":"ForwardRef"),m;case Je:return x=m.displayName||null,x!==null?x:Nt(m.type)||"Memo";case Ve:x=m._payload,m=m._init;try{return Nt(m(x))}catch{}}return null}function Tt(m){var x=m.type;switch(m.tag){case 24:return"Cache";case 9:return(x.displayName||"Context")+".Consumer";case 10:return(x._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return m=x.render,m=m.displayName||m.name||"",x.displayName||(m!==""?"ForwardRef("+m+")":"ForwardRef");case 7:return"Fragment";case 5:return x;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Nt(x);case 8:return x===ye?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof x=="function")return x.displayName||x.name||null;if(typeof x=="string")return x}return null}function Ot(m){switch(typeof m){case"boolean":case"number":case"string":case"undefined":return m;case"object":return m;default:return""}}function rt(m){var x=m.type;return(m=m.nodeName)&&m.toLowerCase()==="input"&&(x==="checkbox"||x==="radio")}function zt(m){var x=rt(m)?"checked":"value",k=Object.getOwnPropertyDescriptor(m.constructor.prototype,x),B=""+m[x];if(!m.hasOwnProperty(x)&&typeof k<"u"&&typeof k.get=="function"&&typeof k.set=="function"){var Q=k.get,oe=k.set;return Object.defineProperty(m,x,{configurable:!0,get:function(){return Q.call(this)},set:function(we){B=""+we,oe.call(this,we)}}),Object.defineProperty(m,x,{enumerable:k.enumerable}),{getValue:function(){return B},setValue:function(we){B=""+we},stopTracking:function(){m._valueTracker=null,delete m[x]}}}}function Ut(m){m._valueTracker||(m._valueTracker=zt(m))}function dt(m){if(!m)return!1;var x=m._valueTracker;if(!x)return!0;var k=x.getValue(),B="";return m&&(B=rt(m)?m.checked?"true":"false":m.value),m=B,m!==k?(x.setValue(m),!0):!1}function Rn(m){if(m=m||(typeof document<"u"?document:void 0),typeof m>"u")return null;try{return m.activeElement||m.body}catch{return m.body}}function cn(m,x){var k=x.checked;return Qe({},x,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:k??m._wrapperState.initialChecked})}function Hn(m,x){var k=x.defaultValue==null?"":x.defaultValue,B=x.checked!=null?x.checked:x.defaultChecked;k=Ot(x.value!=null?x.value:k),m._wrapperState={initialChecked:B,initialValue:k,controlled:x.type==="checkbox"||x.type==="radio"?x.checked!=null:x.value!=null}}function Gn(m,x){x=x.checked,x!=null&&te(m,"checked",x,!1)}function Mn(m,x){Gn(m,x);var k=Ot(x.value),B=x.type;if(k!=null)B==="number"?(k===0&&m.value===""||m.value!=k)&&(m.value=""+k):m.value!==""+k&&(m.value=""+k);else if(B==="submit"||B==="reset"){m.removeAttribute("value");return}x.hasOwnProperty("value")?Fr(m,x.type,k):x.hasOwnProperty("defaultValue")&&Fr(m,x.type,Ot(x.defaultValue)),x.checked==null&&x.defaultChecked!=null&&(m.defaultChecked=!!x.defaultChecked)}function Nr(m,x,k){if(x.hasOwnProperty("value")||x.hasOwnProperty("defaultValue")){var B=x.type;if(!(B!=="submit"&&B!=="reset"||x.value!==void 0&&x.value!==null))return;x=""+m._wrapperState.initialValue,k||x===m.value||(m.value=x),m.defaultValue=x}k=m.name,k!==""&&(m.name=""),m.defaultChecked=!!m._wrapperState.initialChecked,k!==""&&(m.name=k)}function Fr(m,x,k){(x!=="number"||Rn(m.ownerDocument)!==m)&&(k==null?m.defaultValue=""+m._wrapperState.initialValue:m.defaultValue!==""+k&&(m.defaultValue=""+k))}var xi=Array.isArray;function Br(m,x,k,B){if(m=m.options,x){x={};for(var Q=0;Q<k.length;Q++)x["$"+k[Q]]=!0;for(k=0;k<m.length;k++)Q=x.hasOwnProperty("$"+m[k].value),m[k].selected!==Q&&(m[k].selected=Q),Q&&B&&(m[k].defaultSelected=!0)}else{for(k=""+Ot(k),x=null,Q=0;Q<m.length;Q++){if(m[Q].value===k){m[Q].selected=!0,B&&(m[Q].defaultSelected=!0);return}x!==null||m[Q].disabled||(x=m[Q])}x!==null&&(x.selected=!0)}}function hr(m,x){if(x.dangerouslySetInnerHTML!=null)throw Error(n(91));return Qe({},x,{value:void 0,defaultValue:void 0,children:""+m._wrapperState.initialValue})}function ri(m,x){var k=x.value;if(k==null){if(k=x.children,x=x.defaultValue,k!=null){if(x!=null)throw Error(n(92));if(xi(k)){if(1<k.length)throw Error(n(93));k=k[0]}x=k}x==null&&(x=""),k=x}m._wrapperState={initialValue:Ot(k)}}function wa(m,x){var k=Ot(x.value),B=Ot(x.defaultValue);k!=null&&(k=""+k,k!==m.value&&(m.value=k),x.defaultValue==null&&m.defaultValue!==k&&(m.defaultValue=k)),B!=null&&(m.defaultValue=""+B)}function _i(m){var x=m.textContent;x===m._wrapperState.initialValue&&x!==""&&x!==null&&(m.value=x)}function Sa(m){switch(m){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Ta(m,x){return m==null||m==="http://www.w3.org/1999/xhtml"?Sa(x):m==="http://www.w3.org/2000/svg"&&x==="foreignObject"?"http://www.w3.org/1999/xhtml":m}var Pa,Ya=(function(m){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(x,k,B,Q){MSApp.execUnsafeLocalFunction(function(){return m(x,k,B,Q)})}:m})(function(m,x){if(m.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in m)m.innerHTML=x;else{for(Pa=Pa||document.createElement("div"),Pa.innerHTML="<svg>"+x.valueOf().toString()+"</svg>",x=Pa.firstChild;m.firstChild;)m.removeChild(m.firstChild);for(;x.firstChild;)m.appendChild(x.firstChild)}});function gi(m,x){if(x){var k=m.firstChild;if(k&&k===m.lastChild&&k.nodeType===3){k.nodeValue=x;return}}m.textContent=x}var it={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},ee=["Webkit","ms","Moz","O"];Object.keys(it).forEach(function(m){ee.forEach(function(x){x=x+m.charAt(0).toUpperCase()+m.substring(1),it[x]=it[m]})});function ue(m,x,k){return x==null||typeof x=="boolean"||x===""?"":k||typeof x!="number"||x===0||it.hasOwnProperty(m)&&it[m]?(""+x).trim():x+"px"}function ve(m,x){m=m.style;for(var k in x)if(x.hasOwnProperty(k)){var B=k.indexOf("--")===0,Q=ue(k,x[k],B);k==="float"&&(k="cssFloat"),B?m.setProperty(k,Q):m[k]=Q}}var Oe=Qe({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function $e(m,x){if(x){if(Oe[m]&&(x.children!=null||x.dangerouslySetInnerHTML!=null))throw Error(n(137,m));if(x.dangerouslySetInnerHTML!=null){if(x.children!=null)throw Error(n(60));if(typeof x.dangerouslySetInnerHTML!="object"||!("__html"in x.dangerouslySetInnerHTML))throw Error(n(61))}if(x.style!=null&&typeof x.style!="object")throw Error(n(62))}}function ct(m,x){if(m.indexOf("-")===-1)return typeof x.is=="string";switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ut=null;function at(m){return m=m.target||m.srcElement||window,m.correspondingUseElement&&(m=m.correspondingUseElement),m.nodeType===3?m.parentNode:m}var ft=null,Dt=null,St=null;function Ke(m){if(m=ao(m)){if(typeof ft!="function")throw Error(n(280));var x=m.stateNode;x&&(x=$u(x),ft(m.stateNode,m.type,x))}}function Bt(m){Dt?St?St.push(m):St=[m]:Dt=m}function gn(){if(Dt){var m=Dt,x=St;if(St=Dt=null,Ke(m),x)for(m=0;m<x.length;m++)Ke(x[m])}}function on(m,x){return m(x)}function hn(){}var bn=!1;function pn(m,x,k){if(bn)return m(x,k);bn=!0;try{return on(m,x,k)}finally{bn=!1,(Dt!==null||St!==null)&&(hn(),gn())}}function er(m,x){var k=m.stateNode;if(k===null)return null;var B=$u(k);if(B===null)return null;k=B[x];e:switch(x){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(B=!B.disabled)||(m=m.type,B=!(m==="button"||m==="input"||m==="select"||m==="textarea")),m=!B;break e;default:m=!1}if(m)return null;if(k&&typeof k!="function")throw Error(n(231,x,typeof k));return k}var Cr=!1;if(o)try{var cr={};Object.defineProperty(cr,"passive",{get:function(){Cr=!0}}),window.addEventListener("test",cr,cr),window.removeEventListener("test",cr,cr)}catch{Cr=!1}function Dr(m,x,k,B,Q,oe,we,Ze,ot){var Et=Array.prototype.slice.call(arguments,3);try{x.apply(k,Et)}catch(Zt){this.onError(Zt)}}var ur=!1,ht=null,fr=!1,Er=null,ul={onError:function(m){ur=!0,ht=m}};function oa(m,x,k,B,Q,oe,we,Ze,ot){ur=!1,ht=null,Dr.apply(ul,arguments)}function Ht(m,x,k,B,Q,oe,we,Ze,ot){if(oa.apply(this,arguments),ur){if(ur){var Et=ht;ur=!1,ht=null}else throw Error(n(198));fr||(fr=!0,Er=Et)}}function Tn(m){var x=m,k=m;if(m.alternate)for(;x.return;)x=x.return;else{m=x;do x=m,(x.flags&4098)!==0&&(k=x.return),m=x.return;while(m)}return x.tag===3?k:null}function In(m){if(m.tag===13){var x=m.memoizedState;if(x===null&&(m=m.alternate,m!==null&&(x=m.memoizedState)),x!==null)return x.dehydrated}return null}function Aa(m){if(Tn(m)!==m)throw Error(n(188))}function Ed(m){var x=m.alternate;if(!x){if(x=Tn(m),x===null)throw Error(n(188));return x!==m?null:m}for(var k=m,B=x;;){var Q=k.return;if(Q===null)break;var oe=Q.alternate;if(oe===null){if(B=Q.return,B!==null){k=B;continue}break}if(Q.child===oe.child){for(oe=Q.child;oe;){if(oe===k)return Aa(Q),m;if(oe===B)return Aa(Q),x;oe=oe.sibling}throw Error(n(188))}if(k.return!==B.return)k=Q,B=oe;else{for(var we=!1,Ze=Q.child;Ze;){if(Ze===k){we=!0,k=Q,B=oe;break}if(Ze===B){we=!0,B=Q,k=oe;break}Ze=Ze.sibling}if(!we){for(Ze=oe.child;Ze;){if(Ze===k){we=!0,k=oe,B=Q;break}if(Ze===B){we=!0,B=oe,k=Q;break}Ze=Ze.sibling}if(!we)throw Error(n(189))}}if(k.alternate!==B)throw Error(n(190))}if(k.tag!==3)throw Error(n(188));return k.stateNode.current===k?m:x}function os(m){return m=Ed(m),m!==null?Wn(m):null}function Wn(m){if(m.tag===5||m.tag===6)return m;for(m=m.child;m!==null;){var x=Wn(m);if(x!==null)return x;m=m.sibling}return null}var $c=t.unstable_scheduleCallback,Zl=t.unstable_cancelCallback,jd=t.unstable_shouldYield,Ms=t.unstable_requestPaint,Xr=t.unstable_now,Vc=t.unstable_getCurrentPriorityLevel,Kl=t.unstable_ImmediatePriority,sa=t.unstable_UserBlockingPriority,xr=t.unstable_NormalPriority,Uc=t.unstable_LowPriority,Go=t.unstable_IdlePriority,ks=null,Xi=null;function Ca(m){if(Xi&&typeof Xi.onCommitFiberRoot=="function")try{Xi.onCommitFiberRoot(ks,m,void 0,(m.current.flags&128)===128)}catch{}}var Yn=Math.clz32?Math.clz32:Or,jr=Math.log,Xl=Math.LN2;function Or(m){return m>>>=0,m===0?32:31-(jr(m)/Xl|0)|0}var ss=64,Yl=4194304;function Fn(m){switch(m&-m){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return m&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return m&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return m}}function Yr(m,x){var k=m.pendingLanes;if(k===0)return 0;var B=0,Q=m.suspendedLanes,oe=m.pingedLanes,we=k&268435455;if(we!==0){var Ze=we&~Q;Ze!==0?B=Fn(Ze):(oe&=we,oe!==0&&(B=Fn(oe)))}else we=k&~Q,we!==0?B=Fn(we):oe!==0&&(B=Fn(oe));if(B===0)return 0;if(x!==0&&x!==B&&(x&Q)===0&&(Q=B&-B,oe=x&-x,Q>=oe||Q===16&&(oe&4194240)!==0))return x;if((B&4)!==0&&(B|=k&16),x=m.entangledLanes,x!==0)for(m=m.entanglements,x&=B;0<x;)k=31-Yn(x),Q=1<<k,B|=m[k],x&=~Q;return B}function Md(m,x){switch(m){case 1:case 2:case 4:return x+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return x+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ku(m,x){for(var k=m.suspendedLanes,B=m.pingedLanes,Q=m.expirationTimes,oe=m.pendingLanes;0<oe;){var we=31-Yn(oe),Ze=1<<we,ot=Q[we];ot===-1?((Ze&k)===0||(Ze&B)!==0)&&(Q[we]=Md(Ze,x)):ot<=x&&(m.expiredLanes|=Ze),oe&=~Ze}}function Yi(m){return m=m.pendingLanes&-1073741825,m!==0?m:m&1073741824?1073741824:0}function kd(){var m=ss;return ss<<=1,(ss&4194240)===0&&(ss=64),m}function dl(m){for(var x=[],k=0;31>k;k++)x.push(m);return x}function Ja(m,x,k){m.pendingLanes|=x,x!==536870912&&(m.suspendedLanes=0,m.pingedLanes=0),m=m.eventTimes,x=31-Yn(x),m[x]=k}function yi(m,x){var k=m.pendingLanes&~x;m.pendingLanes=x,m.suspendedLanes=0,m.pingedLanes=0,m.expiredLanes&=x,m.mutableReadLanes&=x,m.entangledLanes&=x,x=m.entanglements;var B=m.eventTimes;for(m=m.expirationTimes;0<k;){var Q=31-Yn(k),oe=1<<Q;x[Q]=0,B[Q]=-1,m[Q]=-1,k&=~oe}}function Is(m,x){var k=m.entangledLanes|=x;for(m=m.entanglements;k;){var B=31-Yn(k),Q=1<<B;Q&x|m[B]&x&&(m[B]|=x),k&=~Q}}var pr=0;function Ns(m){return m&=-m,1<m?4<m?(m&268435455)!==0?16:536870912:4:1}var Iu,bo,qc,hl,wo,ls=!1,Bn=[],Qa=null,Ds=null,So=null,$i=new Map,_n=new Map,sr=[],rn="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Pr(m,x){switch(m){case"focusin":case"focusout":Qa=null;break;case"dragenter":case"dragleave":Ds=null;break;case"mouseover":case"mouseout":So=null;break;case"pointerover":case"pointerout":$i.delete(x.pointerId);break;case"gotpointercapture":case"lostpointercapture":_n.delete(x.pointerId)}}function Da(m,x,k,B,Q,oe){return m===null||m.nativeEvent!==oe?(m={blockedOn:x,domEventName:k,eventSystemFlags:B,nativeEvent:oe,targetContainers:[Q]},x!==null&&(x=ao(x),x!==null&&bo(x)),m):(m.eventSystemFlags|=B,x=m.targetContainers,Q!==null&&x.indexOf(Q)===-1&&x.push(Q),m)}function Ji(m,x,k,B,Q){switch(x){case"focusin":return Qa=Da(Qa,m,x,k,B,Q),!0;case"dragenter":return Ds=Da(Ds,m,x,k,B,Q),!0;case"mouseover":return So=Da(So,m,x,k,B,Q),!0;case"pointerover":var oe=Q.pointerId;return $i.set(oe,Da($i.get(oe)||null,m,x,k,B,Q)),!0;case"gotpointercapture":return oe=Q.pointerId,_n.set(oe,Da(_n.get(oe)||null,m,x,k,B,Q)),!0}return!1}function la(m){var x=Yo(m.target);if(x!==null){var k=Tn(x);if(k!==null){if(x=k.tag,x===13){if(x=In(k),x!==null){m.blockedOn=x,wo(m.priority,function(){qc(k)});return}}else if(x===3&&k.stateNode.current.memoizedState.isDehydrated){m.blockedOn=k.tag===3?k.stateNode.containerInfo:null;return}}}m.blockedOn=null}function ii(m){if(m.blockedOn!==null)return!1;for(var x=m.targetContainers;0<x.length;){var k=Gc(m.domEventName,m.eventSystemFlags,x[0],m.nativeEvent);if(k===null){k=m.nativeEvent;var B=new k.constructor(k.type,k);ut=B,k.target.dispatchEvent(B),ut=null}else return x=ao(k),x!==null&&bo(x),m.blockedOn=k,!1;x.shift()}return!0}function Os(m,x,k){ii(m)&&k.delete(x)}function To(){ls=!1,Qa!==null&&ii(Qa)&&(Qa=null),Ds!==null&&ii(Ds)&&(Ds=null),So!==null&&ii(So)&&(So=null),$i.forEach(Os),_n.forEach(Os)}function tr(m,x){m.blockedOn===x&&(m.blockedOn=null,ls||(ls=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,To)))}function Qi(m){function x(Q){return tr(Q,m)}if(0<Bn.length){tr(Bn[0],m);for(var k=1;k<Bn.length;k++){var B=Bn[k];B.blockedOn===m&&(B.blockedOn=null)}}for(Qa!==null&&tr(Qa,m),Ds!==null&&tr(Ds,m),So!==null&&tr(So,m),$i.forEach(x),_n.forEach(x),k=0;k<sr.length;k++)B=sr[k],B.blockedOn===m&&(B.blockedOn=null);for(;0<sr.length&&(k=sr[0],k.blockedOn===null);)la(k),k.blockedOn===null&&sr.shift()}var ca=ne.ReactCurrentBatchConfig,fl=!0;function Oa(m,x,k,B){var Q=pr,oe=ca.transition;ca.transition=null;try{pr=1,eo(m,x,k,B)}finally{pr=Q,ca.transition=oe}}function pl(m,x,k,B){var Q=pr,oe=ca.transition;ca.transition=null;try{pr=4,eo(m,x,k,B)}finally{pr=Q,ca.transition=oe}}function eo(m,x,k,B){if(fl){var Q=Gc(m,x,k,B);if(Q===null)g(m,x,B,Nu,k),Pr(m,B);else if(Ji(Q,m,x,k,B))B.stopPropagation();else if(Pr(m,B),x&4&&-1<rn.indexOf(m)){for(;Q!==null;){var oe=ao(Q);if(oe!==null&&Iu(oe),oe=Gc(m,x,k,B),oe===null&&g(m,x,B,Nu,k),oe===Q)break;Q=oe}Q!==null&&B.stopPropagation()}else g(m,x,B,null,k)}}var Nu=null;function Gc(m,x,k,B){if(Nu=null,m=at(B),m=Yo(m),m!==null)if(x=Tn(m),x===null)m=null;else if(k=x.tag,k===13){if(m=In(x),m!==null)return m;m=null}else if(k===3){if(x.stateNode.current.memoizedState.isDehydrated)return x.tag===3?x.stateNode.containerInfo:null;m=null}else x!==m&&(m=null);return Nu=m,null}function nr(m){switch(m){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Vc()){case Kl:return 1;case sa:return 4;case xr:case Uc:return 16;case Go:return 536870912;default:return 16}default:return 16}}var yr=null,Vi=null,Zn=null;function Un(){if(Zn)return Zn;var m,x=Vi,k=x.length,B,Q="value"in yr?yr.value:yr.textContent,oe=Q.length;for(m=0;m<k&&x[m]===Q[m];m++);var we=k-m;for(B=1;B<=we&&x[k-B]===Q[oe-B];B++);return Zn=Q.slice(m,1<B?1-B:void 0)}function Rs(m){var x=m.keyCode;return"charCode"in m?(m=m.charCode,m===0&&x===13&&(m=13)):m=x,m===10&&(m=13),32<=m||m===13?m:0}function rr(){return!0}function Wc(){return!1}function Jr(m){function x(k,B,Q,oe,we){this._reactName=k,this._targetInst=Q,this.type=B,this.nativeEvent=oe,this.target=we,this.currentTarget=null;for(var Ze in m)m.hasOwnProperty(Ze)&&(k=m[Ze],this[Ze]=k?k(oe):oe[Ze]);return this.isDefaultPrevented=(oe.defaultPrevented!=null?oe.defaultPrevented:oe.returnValue===!1)?rr:Wc,this.isPropagationStopped=Wc,this}return Qe(x.prototype,{preventDefault:function(){this.defaultPrevented=!0;var k=this.nativeEvent;k&&(k.preventDefault?k.preventDefault():typeof k.returnValue!="unknown"&&(k.returnValue=!1),this.isDefaultPrevented=rr)},stopPropagation:function(){var k=this.nativeEvent;k&&(k.stopPropagation?k.stopPropagation():typeof k.cancelBubble!="unknown"&&(k.cancelBubble=!0),this.isPropagationStopped=rr)},persist:function(){},isPersistent:rr}),x}var Wo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(m){return m.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},cs=Jr(Wo),ml=Qe({},Wo,{view:0,detail:0}),Du=Jr(ml),Ra,Ph,Jl,Qr=Qe({},ml,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ao,button:0,buttons:0,relatedTarget:function(m){return m.relatedTarget===void 0?m.fromElement===m.srcElement?m.toElement:m.fromElement:m.relatedTarget},movementX:function(m){return"movementX"in m?m.movementX:(m!==Jl&&(Jl&&m.type==="mousemove"?(Ra=m.screenX-Jl.screenX,Ph=m.screenY-Jl.screenY):Ph=Ra=0,Jl=m),Ra)},movementY:function(m){return"movementY"in m?m.movementY:Ph}}),Po=Jr(Qr),qr=Qe({},Qr,{dataTransfer:0}),Ls=Jr(qr),Ah=Qe({},ml,{relatedTarget:0}),gl=Jr(Ah),ai=Qe({},Wo,{animationName:0,elapsedTime:0,pseudoElement:0}),Ef=Jr(ai),Ch=Qe({},Wo,{clipboardData:function(m){return"clipboardData"in m?m.clipboardData:window.clipboardData}}),Id=Jr(Ch),Vp=Qe({},Wo,{data:0}),yl=Jr(Vp),Ou={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},zs={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Fs={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ru(m){var x=this.nativeEvent;return x.getModifierState?x.getModifierState(m):(m=Fs[m])?!!x[m]:!1}function Ao(){return Ru}var ea=Qe({},ml,{key:function(m){if(m.key){var x=Ou[m.key]||m.key;if(x!=="Unidentified")return x}return m.type==="keypress"?(m=Rs(m),m===13?"Enter":String.fromCharCode(m)):m.type==="keydown"||m.type==="keyup"?zs[m.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ao,charCode:function(m){return m.type==="keypress"?Rs(m):0},keyCode:function(m){return m.type==="keydown"||m.type==="keyup"?m.keyCode:0},which:function(m){return m.type==="keypress"?Rs(m):m.type==="keydown"||m.type==="keyup"?m.keyCode:0}}),bi=Jr(ea),Eh=Qe({},Qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Ql=Jr(Eh),ec=Qe({},ml,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ao}),Bs=Jr(ec),Up=Qe({},Wo,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nd=Jr(Up),jf=Qe({},Qr,{deltaX:function(m){return"deltaX"in m?m.deltaX:"wheelDeltaX"in m?-m.wheelDeltaX:0},deltaY:function(m){return"deltaY"in m?m.deltaY:"wheelDeltaY"in m?-m.wheelDeltaY:"wheelDelta"in m?-m.wheelDelta:0},deltaZ:0,deltaMode:0}),Hc=Jr(jf),La=[9,13,27,32],$s=o&&"CompositionEvent"in window,Zc=null;o&&"documentMode"in document&&(Zc=document.documentMode);var Ho=o&&"TextEvent"in window&&!Zc,Dd=o&&(!$s||Zc&&8<Zc&&11>=Zc),Vs=" ",jh=!1;function tc(m,x){switch(m){case"keyup":return La.indexOf(x.keyCode)!==-1;case"keydown":return x.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Od(m){return m=m.detail,typeof m=="object"&&"data"in m?m.data:null}var Ea=!1;function Mf(m,x){switch(m){case"compositionend":return Od(x);case"keypress":return x.which!==32?null:(jh=!0,Vs);case"textInput":return m=x.data,m===Vs&&jh?null:m;default:return null}}function us(m,x){if(Ea)return m==="compositionend"||!$s&&tc(m,x)?(m=Un(),Zn=Vi=yr=null,Ea=!1,m):null;switch(m){case"paste":return null;case"keypress":if(!(x.ctrlKey||x.altKey||x.metaKey)||x.ctrlKey&&x.altKey){if(x.char&&1<x.char.length)return x.char;if(x.which)return String.fromCharCode(x.which)}return null;case"compositionend":return Dd&&x.locale!=="ko"?null:x.data;default:return null}}var Us={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Mh(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x==="input"?!!Us[m.type]:x==="textarea"}function nc(m,x,k,B){Bt(B),x=R(x,"onChange"),0<x.length&&(k=new cs("onChange","change",null,k,B),m.push({event:k,listeners:x}))}var Lu=null,to=null;function kf(m){Oh(m,0)}function no(m){var x=Eo(m);if(dt(x))return m}function If(m,x){if(m==="change")return x}var Co=!1;if(o){var rc;if(o){var ic="oninput"in document;if(!ic){var za=document.createElement("div");za.setAttribute("oninput","return;"),ic=typeof za.oninput=="function"}rc=ic}else rc=!1;Co=rc&&(!document.documentMode||9<document.documentMode)}function vl(){Lu&&(Lu.detachEvent("onpropertychange",Kc),to=Lu=null)}function Kc(m){if(m.propertyName==="value"&&no(to)){var x=[];nc(x,to,m,at(m)),pn(kf,x)}}function Xc(m,x,k){m==="focusin"?(vl(),Lu=x,to=k,Lu.attachEvent("onpropertychange",Kc)):m==="focusout"&&vl()}function xl(m){if(m==="selectionchange"||m==="keyup"||m==="keydown")return no(to)}function ac(m,x){if(m==="click")return no(x)}function qs(m,x){if(m==="input"||m==="change")return no(x)}function Rd(m,x){return m===x&&(m!==0||1/m===1/x)||m!==m&&x!==x}var Zo=typeof Object.is=="function"?Object.is:Rd;function Gs(m,x){if(Zo(m,x))return!0;if(typeof m!="object"||m===null||typeof x!="object"||x===null)return!1;var k=Object.keys(m),B=Object.keys(x);if(k.length!==B.length)return!1;for(B=0;B<k.length;B++){var Q=k[B];if(!_.call(x,Q)||!Zo(m[Q],x[Q]))return!1}return!0}function Nf(m){for(;m&&m.firstChild;)m=m.firstChild;return m}function kh(m,x){var k=Nf(m);m=0;for(var B;k;){if(k.nodeType===3){if(B=m+k.textContent.length,m<=x&&B>=x)return{node:k,offset:x-m};m=B}e:{for(;k;){if(k.nextSibling){k=k.nextSibling;break e}k=k.parentNode}k=void 0}k=Nf(k)}}function Ih(m,x){return m&&x?m===x?!0:m&&m.nodeType===3?!1:x&&x.nodeType===3?Ih(m,x.parentNode):"contains"in m?m.contains(x):m.compareDocumentPosition?!!(m.compareDocumentPosition(x)&16):!1:!1}function Nh(){for(var m=window,x=Rn();x instanceof m.HTMLIFrameElement;){try{var k=typeof x.contentWindow.location.href=="string"}catch{k=!1}if(k)m=x.contentWindow;else break;x=Rn(m.document)}return x}function vr(m){var x=m&&m.nodeName&&m.nodeName.toLowerCase();return x&&(x==="input"&&(m.type==="text"||m.type==="search"||m.type==="tel"||m.type==="url"||m.type==="password")||x==="textarea"||m.contentEditable==="true")}function ro(m){var x=Nh(),k=m.focusedElem,B=m.selectionRange;if(x!==k&&k&&k.ownerDocument&&Ih(k.ownerDocument.documentElement,k)){if(B!==null&&vr(k)){if(x=B.start,m=B.end,m===void 0&&(m=x),"selectionStart"in k)k.selectionStart=x,k.selectionEnd=Math.min(m,k.value.length);else if(m=(x=k.ownerDocument||document)&&x.defaultView||window,m.getSelection){m=m.getSelection();var Q=k.textContent.length,oe=Math.min(B.start,Q);B=B.end===void 0?oe:Math.min(B.end,Q),!m.extend&&oe>B&&(Q=B,B=oe,oe=Q),Q=kh(k,oe);var we=kh(k,B);Q&&we&&(m.rangeCount!==1||m.anchorNode!==Q.node||m.anchorOffset!==Q.offset||m.focusNode!==we.node||m.focusOffset!==we.offset)&&(x=x.createRange(),x.setStart(Q.node,Q.offset),m.removeAllRanges(),oe>B?(m.addRange(x),m.extend(we.node,we.offset)):(x.setEnd(we.node,we.offset),m.addRange(x)))}}for(x=[],m=k;m=m.parentNode;)m.nodeType===1&&x.push({element:m,left:m.scrollLeft,top:m.scrollTop});for(typeof k.focus=="function"&&k.focus(),k=0;k<x.length;k++)m=x[k],m.element.scrollLeft=m.left,m.element.scrollTop=m.top}}var oc=o&&"documentMode"in document&&11>=document.documentMode,Ws=null,_l=null,Ko=null,bl=!1;function sc(m,x,k){var B=k.window===k?k.document:k.nodeType===9?k:k.ownerDocument;bl||Ws==null||Ws!==Rn(B)||(B=Ws,"selectionStart"in B&&vr(B)?B={start:B.selectionStart,end:B.selectionEnd}:(B=(B.ownerDocument&&B.ownerDocument.defaultView||window).getSelection(),B={anchorNode:B.anchorNode,anchorOffset:B.anchorOffset,focusNode:B.focusNode,focusOffset:B.focusOffset}),Ko&&Gs(Ko,B)||(Ko=B,B=R(_l,"onSelect"),0<B.length&&(x=new cs("onSelect","select",null,x,k),m.push({event:x,listeners:B}),x.target=Ws)))}function Di(m,x){var k={};return k[m.toLowerCase()]=x.toLowerCase(),k["Webkit"+m]="webkit"+x,k["Moz"+m]="moz"+x,k}var lc={animationend:Di("Animation","AnimationEnd"),animationiteration:Di("Animation","AnimationIteration"),animationstart:Di("Animation","AnimationStart"),transitionend:Di("Transition","TransitionEnd")},Hs={},zu={};o&&(zu=document.createElement("div").style,"AnimationEvent"in window||(delete lc.animationend.animation,delete lc.animationiteration.animation,delete lc.animationstart.animation),"TransitionEvent"in window||delete lc.transitionend.transition);function Xo(m){if(Hs[m])return Hs[m];if(!lc[m])return m;var x=lc[m],k;for(k in x)if(x.hasOwnProperty(k)&&k in zu)return Hs[m]=x[k];return m}var Fu=Xo("animationend"),io=Xo("animationiteration"),cc=Xo("animationstart"),Yc=Xo("transitionend"),uc=new Map,dc="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ua(m,x){uc.set(m,x),h(x,[m])}for(var wl=0;wl<dc.length;wl++){var Jc=dc[wl],Jn=Jc.toLowerCase(),Ld=Jc[0].toUpperCase()+Jc.slice(1);ua(Jn,"on"+Ld)}ua(Fu,"onAnimationEnd"),ua(io,"onAnimationIteration"),ua(cc,"onAnimationStart"),ua("dblclick","onDoubleClick"),ua("focusin","onFocus"),ua("focusout","onBlur"),ua(Yc,"onTransitionEnd"),d("onMouseEnter",["mouseout","mouseover"]),d("onMouseLeave",["mouseout","mouseover"]),d("onPointerEnter",["pointerout","pointerover"]),d("onPointerLeave",["pointerout","pointerover"]),h("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),h("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),h("onBeforeInput",["compositionend","keypress","textInput","paste"]),h("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),h("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Dh=new Set("cancel close invalid load scroll toggle".split(" ").concat(Qc));function hc(m,x,k){var B=m.type||"unknown-event";m.currentTarget=k,Ht(B,x,void 0,m),m.currentTarget=null}function Oh(m,x){x=(x&4)!==0;for(var k=0;k<m.length;k++){var B=m[k],Q=B.event;B=B.listeners;e:{var oe=void 0;if(x)for(var we=B.length-1;0<=we;we--){var Ze=B[we],ot=Ze.instance,Et=Ze.currentTarget;if(Ze=Ze.listener,ot!==oe&&Q.isPropagationStopped())break e;hc(Q,Ze,Et),oe=ot}else for(we=0;we<B.length;we++){if(Ze=B[we],ot=Ze.instance,Et=Ze.currentTarget,Ze=Ze.listener,ot!==oe&&Q.isPropagationStopped())break e;hc(Q,Ze,Et),oe=ot}}}if(fr)throw m=Er,fr=!1,Er=null,m}function Gr(m,x){var k=x[hs];k===void 0&&(k=x[hs]=new Set);var B=m+"__bubble";k.has(B)||(fc(x,m,2,!1),k.add(B))}function zd(m,x,k){var B=0;x&&(B|=4),fc(k,m,B,x)}var Bu="_reactListening"+Math.random().toString(36).slice(2);function Sl(m){if(!m[Bu]){m[Bu]=!0,r.forEach(function(k){k!=="selectionchange"&&(Dh.has(k)||zd(k,!1,m),zd(k,!0,m))});var x=m.nodeType===9?m:m.ownerDocument;x===null||x[Bu]||(x[Bu]=!0,zd("selectionchange",!1,x))}}function fc(m,x,k,B){switch(nr(x)){case 1:var Q=Oa;break;case 4:Q=pl;break;default:Q=eo}k=Q.bind(null,x,k,m),Q=void 0,!Cr||x!=="touchstart"&&x!=="touchmove"&&x!=="wheel"||(Q=!0),B?Q!==void 0?m.addEventListener(x,k,{capture:!0,passive:Q}):m.addEventListener(x,k,!0):Q!==void 0?m.addEventListener(x,k,{passive:Q}):m.addEventListener(x,k,!1)}function g(m,x,k,B,Q){var oe=B;if((x&1)===0&&(x&2)===0&&B!==null)e:for(;;){if(B===null)return;var we=B.tag;if(we===3||we===4){var Ze=B.stateNode.containerInfo;if(Ze===Q||Ze.nodeType===8&&Ze.parentNode===Q)break;if(we===4)for(we=B.return;we!==null;){var ot=we.tag;if((ot===3||ot===4)&&(ot=we.stateNode.containerInfo,ot===Q||ot.nodeType===8&&ot.parentNode===Q))return;we=we.return}for(;Ze!==null;){if(we=Yo(Ze),we===null)return;if(ot=we.tag,ot===5||ot===6){B=oe=we;continue e}Ze=Ze.parentNode}}B=B.return}pn(function(){var Et=oe,Zt=at(k),Xt=[];e:{var Wt=uc.get(m);if(Wt!==void 0){var yn=cs,wn=m;switch(m){case"keypress":if(Rs(k)===0)break e;case"keydown":case"keyup":yn=bi;break;case"focusin":wn="focus",yn=gl;break;case"focusout":wn="blur",yn=gl;break;case"beforeblur":case"afterblur":yn=gl;break;case"click":if(k.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":yn=Po;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":yn=Ls;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":yn=Bs;break;case Fu:case io:case cc:yn=Ef;break;case Yc:yn=Nd;break;case"scroll":yn=Du;break;case"wheel":yn=Hc;break;case"copy":case"cut":case"paste":yn=Id;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":yn=Ql}var Pn=(x&4)!==0,Li=!Pn&&m==="scroll",_t=Pn?Wt!==null?Wt+"Capture":null:Wt;Pn=[];for(var lt=Et,wt;lt!==null;){wt=lt;var Jt=wt.stateNode;if(wt.tag===5&&Jt!==null&&(wt=Jt,_t!==null&&(Jt=er(lt,_t),Jt!=null&&Pn.push(E(lt,Jt,wt)))),Li)break;lt=lt.return}0<Pn.length&&(Wt=new yn(Wt,wn,null,k,Zt),Xt.push({event:Wt,listeners:Pn}))}}if((x&7)===0){e:{if(Wt=m==="mouseover"||m==="pointerover",yn=m==="mouseout"||m==="pointerout",Wt&&k!==ut&&(wn=k.relatedTarget||k.fromElement)&&(Yo(wn)||wn[wr]))break e;if((yn||Wt)&&(Wt=Zt.window===Zt?Zt:(Wt=Zt.ownerDocument)?Wt.defaultView||Wt.parentWindow:window,yn?(wn=k.relatedTarget||k.toElement,yn=Et,wn=wn?Yo(wn):null,wn!==null&&(Li=Tn(wn),wn!==Li||wn.tag!==5&&wn.tag!==6)&&(wn=null)):(yn=null,wn=Et),yn!==wn)){if(Pn=Po,Jt="onMouseLeave",_t="onMouseEnter",lt="mouse",(m==="pointerout"||m==="pointerover")&&(Pn=Ql,Jt="onPointerLeave",_t="onPointerEnter",lt="pointer"),Li=yn==null?Wt:Eo(yn),wt=wn==null?Wt:Eo(wn),Wt=new Pn(Jt,lt+"leave",yn,k,Zt),Wt.target=Li,Wt.relatedTarget=wt,Jt=null,Yo(Zt)===Et&&(Pn=new Pn(_t,lt+"enter",wn,k,Zt),Pn.target=wt,Pn.relatedTarget=Li,Jt=Pn),Li=Jt,yn&&wn)t:{for(Pn=yn,_t=wn,lt=0,wt=Pn;wt;wt=J(wt))lt++;for(wt=0,Jt=_t;Jt;Jt=J(Jt))wt++;for(;0<lt-wt;)Pn=J(Pn),lt--;for(;0<wt-lt;)_t=J(_t),wt--;for(;lt--;){if(Pn===_t||_t!==null&&Pn===_t.alternate)break t;Pn=J(Pn),_t=J(_t)}Pn=null}else Pn=null;yn!==null&&he(Xt,Wt,yn,Pn,!1),wn!==null&&Li!==null&&he(Xt,Li,wn,Pn,!0)}}e:{if(Wt=Et?Eo(Et):window,yn=Wt.nodeName&&Wt.nodeName.toLowerCase(),yn==="select"||yn==="input"&&Wt.type==="file")var kn=If;else if(Mh(Wt))if(Co)kn=qs;else{kn=xl;var Ln=Xc}else(yn=Wt.nodeName)&&yn.toLowerCase()==="input"&&(Wt.type==="checkbox"||Wt.type==="radio")&&(kn=ac);if(kn&&(kn=kn(m,Et))){nc(Xt,kn,k,Zt);break e}Ln&&Ln(m,Wt,Et),m==="focusout"&&(Ln=Wt._wrapperState)&&Ln.controlled&&Wt.type==="number"&&Fr(Wt,"number",Wt.value)}switch(Ln=Et?Eo(Et):window,m){case"focusin":(Mh(Ln)||Ln.contentEditable==="true")&&(Ws=Ln,_l=Et,Ko=null);break;case"focusout":Ko=_l=Ws=null;break;case"mousedown":bl=!0;break;case"contextmenu":case"mouseup":case"dragend":bl=!1,sc(Xt,k,Zt);break;case"selectionchange":if(oc)break;case"keydown":case"keyup":sc(Xt,k,Zt)}var Vn;if($s)e:{switch(m){case"compositionstart":var Qn="onCompositionStart";break e;case"compositionend":Qn="onCompositionEnd";break e;case"compositionupdate":Qn="onCompositionUpdate";break e}Qn=void 0}else Ea?tc(m,k)&&(Qn="onCompositionEnd"):m==="keydown"&&k.keyCode===229&&(Qn="onCompositionStart");Qn&&(Dd&&k.locale!=="ko"&&(Ea||Qn!=="onCompositionStart"?Qn==="onCompositionEnd"&&Ea&&(Vn=Un()):(yr=Zt,Vi="value"in yr?yr.value:yr.textContent,Ea=!0)),Ln=R(Et,Qn),0<Ln.length&&(Qn=new yl(Qn,m,null,k,Zt),Xt.push({event:Qn,listeners:Ln}),Vn?Qn.data=Vn:(Vn=Od(k),Vn!==null&&(Qn.data=Vn)))),(Vn=Ho?Mf(m,k):us(m,k))&&(Et=R(Et,"onBeforeInput"),0<Et.length&&(Zt=new yl("onBeforeInput","beforeinput",null,k,Zt),Xt.push({event:Zt,listeners:Et}),Zt.data=Vn))}Oh(Xt,x)})}function E(m,x,k){return{instance:m,listener:x,currentTarget:k}}function R(m,x){for(var k=x+"Capture",B=[];m!==null;){var Q=m,oe=Q.stateNode;Q.tag===5&&oe!==null&&(Q=oe,oe=er(m,k),oe!=null&&B.unshift(E(m,oe,Q)),oe=er(m,x),oe!=null&&B.push(E(m,oe,Q))),m=m.return}return B}function J(m){if(m===null)return null;do m=m.return;while(m&&m.tag!==5);return m||null}function he(m,x,k,B,Q){for(var oe=x._reactName,we=[];k!==null&&k!==B;){var Ze=k,ot=Ze.alternate,Et=Ze.stateNode;if(ot!==null&&ot===B)break;Ze.tag===5&&Et!==null&&(Ze=Et,Q?(ot=er(k,oe),ot!=null&&we.unshift(E(k,ot,Ze))):Q||(ot=er(k,oe),ot!=null&&we.push(E(k,ot,Ze)))),k=k.return}we.length!==0&&m.push({event:x,listeners:we})}var Te=/\r\n?/g,Xe=/\u0000|\uFFFD/g;function mt(m){return(typeof m=="string"?m:""+m).replace(Te,`
`).replace(Xe,"")}function Pt(m,x,k){if(x=mt(x),mt(m)!==x&&k)throw Error(n(425))}function Vt(){}var sn=null,On=null;function ir(m,x){return m==="textarea"||m==="noscript"||typeof x.children=="string"||typeof x.children=="number"||typeof x.dangerouslySetInnerHTML=="object"&&x.dangerouslySetInnerHTML!==null&&x.dangerouslySetInnerHTML.__html!=null}var wi=typeof setTimeout=="function"?setTimeout:void 0,Si=typeof clearTimeout=="function"?clearTimeout:void 0,Fa=typeof Promise=="function"?Promise:void 0,ja=typeof queueMicrotask=="function"?queueMicrotask:typeof Fa<"u"?function(m){return Fa.resolve(null).then(m).catch(ds)}:wi;function ds(m){setTimeout(function(){throw m})}function eu(m,x){var k=x,B=0;do{var Q=k.nextSibling;if(m.removeChild(k),Q&&Q.nodeType===8)if(k=Q.data,k==="/$"){if(B===0){m.removeChild(Q),Qi(x);return}B--}else k!=="$"&&k!=="$?"&&k!=="$!"||B++;k=Q}while(k);Qi(x)}function Zs(m){for(;m!=null;m=m.nextSibling){var x=m.nodeType;if(x===1||x===3)break;if(x===8){if(x=m.data,x==="$"||x==="$!"||x==="$?")break;if(x==="/$")return null}}return m}function Rh(m){m=m.previousSibling;for(var x=0;m;){if(m.nodeType===8){var k=m.data;if(k==="$"||k==="$!"||k==="$?"){if(x===0)return m;x--}else k==="/$"&&x++}m=m.previousSibling}return null}var Rr=Math.random().toString(36).slice(2),da="__reactFiber$"+Rr,Ui="__reactProps$"+Rr,wr="__reactContainer$"+Rr,hs="__reactEvents$"+Rr,Fd="__reactListeners$"+Rr,Tl="__reactHandles$"+Rr;function Yo(m){var x=m[da];if(x)return x;for(var k=m.parentNode;k;){if(x=k[wr]||k[da]){if(k=x.alternate,x.child!==null||k!==null&&k.child!==null)for(m=Rh(m);m!==null;){if(k=m[da])return k;m=Rh(m)}return x}m=k,k=m.parentNode}return null}function ao(m){return m=m[da]||m[wr],!m||m.tag!==5&&m.tag!==6&&m.tag!==13&&m.tag!==3?null:m}function Eo(m){if(m.tag===5||m.tag===6)return m.stateNode;throw Error(n(33))}function $u(m){return m[Ui]||null}var Df=[],Vu=-1;function pc(m){return{current:m}}function oi(m){0>Vu||(m.current=Df[Vu],Df[Vu]=null,Vu--)}function Sr(m,x){Vu++,Df[Vu]=m.current,m.current=x}var Pl={},ha=pc(Pl),fa=pc(!1),tu=Pl;function nu(m,x){var k=m.type.contextTypes;if(!k)return Pl;var B=m.stateNode;if(B&&B.__reactInternalMemoizedUnmaskedChildContext===x)return B.__reactInternalMemoizedMaskedChildContext;var Q={},oe;for(oe in k)Q[oe]=x[oe];return B&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=x,m.__reactInternalMemoizedMaskedChildContext=Q),Q}function Ba(m){return m=m.childContextTypes,m!=null}function Lh(){oi(fa),oi(ha)}function Of(m,x,k){if(ha.current!==Pl)throw Error(n(168));Sr(ha,x),Sr(fa,k)}function Rf(m,x,k){var B=m.stateNode;if(x=x.childContextTypes,typeof B.getChildContext!="function")return k;B=B.getChildContext();for(var Q in B)if(!(Q in x))throw Error(n(108,Tt(m)||"Unknown",Q));return Qe({},k,B)}function Ks(m){return m=(m=m.stateNode)&&m.__reactInternalMemoizedMergedChildContext||Pl,tu=ha.current,Sr(ha,m),Sr(fa,fa.current),!0}function qp(m,x,k){var B=m.stateNode;if(!B)throw Error(n(169));k?(m=Rf(m,x,tu),B.__reactInternalMemoizedMergedChildContext=m,oi(fa),oi(ha),Sr(ha,m)):oi(fa),Sr(fa,k)}var qi=null,jo=!1,Lf=!1;function fs(m){qi===null?qi=[m]:qi.push(m)}function cv(m){jo=!0,fs(m)}function ps(){if(!Lf&&qi!==null){Lf=!0;var m=0,x=pr;try{var k=qi;for(pr=1;m<k.length;m++){var B=k[m];do B=B(!0);while(B!==null)}qi=null,jo=!1}catch(Q){throw qi!==null&&(qi=qi.slice(m+1)),$c(Kl,ps),Q}finally{pr=x,Lf=!1}}return null}var Al=[],Ti=0,ru=null,zh=0,ms=[],gs=0,ys=null,Mo=1,ta="";function tn(m,x){Al[Ti++]=zh,Al[Ti++]=ru,ru=m,zh=x}function Fh(m,x,k){ms[gs++]=Mo,ms[gs++]=ta,ms[gs++]=ys,ys=m;var B=Mo;m=ta;var Q=32-Yn(B)-1;B&=~(1<<Q),k+=1;var oe=32-Yn(x)+Q;if(30<oe){var we=Q-Q%5;oe=(B&(1<<we)-1).toString(32),B>>=we,Q-=we,Mo=1<<32-Yn(x)+Q|k<<Q|B,ta=oe+m}else Mo=1<<oe|k<<Q|B,ta=m}function Bh(m){m.return!==null&&(tn(m,1),Fh(m,1,0))}function iu(m){for(;m===ru;)ru=Al[--Ti],Al[Ti]=null,zh=Al[--Ti],Al[Ti]=null;for(;m===ys;)ys=ms[--gs],ms[gs]=null,ta=ms[--gs],ms[gs]=null,Mo=ms[--gs],ms[gs]=null}var Ma=null,ka=null,si=!1,oo=null;function zf(m,x){var k=zl(5,null,null,0);k.elementType="DELETED",k.stateNode=x,k.return=m,x=m.deletions,x===null?(m.deletions=[k],m.flags|=16):x.push(k)}function Gp(m,x){switch(m.tag){case 5:var k=m.type;return x=x.nodeType!==1||k.toLowerCase()!==x.nodeName.toLowerCase()?null:x,x!==null?(m.stateNode=x,Ma=m,ka=Zs(x.firstChild),!0):!1;case 6:return x=m.pendingProps===""||x.nodeType!==3?null:x,x!==null?(m.stateNode=x,Ma=m,ka=null,!0):!1;case 13:return x=x.nodeType!==8?null:x,x!==null?(k=ys!==null?{id:Mo,overflow:ta}:null,m.memoizedState={dehydrated:x,treeContext:k,retryLane:1073741824},k=zl(18,null,null,0),k.stateNode=x,k.return=m,m.child=k,Ma=m,ka=null,!0):!1;default:return!1}}function au(m){return(m.mode&1)!==0&&(m.flags&128)===0}function Wp(m){if(si){var x=ka;if(x){var k=x;if(!Gp(m,x)){if(au(m))throw Error(n(418));x=Zs(k.nextSibling);var B=Ma;x&&Gp(m,x)?zf(B,k):(m.flags=m.flags&-4097|2,si=!1,Ma=m)}}else{if(au(m))throw Error(n(418));m.flags=m.flags&-4097|2,si=!1,Ma=m}}}function $h(m){for(m=m.return;m!==null&&m.tag!==5&&m.tag!==3&&m.tag!==13;)m=m.return;Ma=m}function Uu(m){if(m!==Ma)return!1;if(!si)return $h(m),si=!0,!1;var x;if((x=m.tag!==3)&&!(x=m.tag!==5)&&(x=m.type,x=x!=="head"&&x!=="body"&&!ir(m.type,m.memoizedProps)),x&&(x=ka)){if(au(m))throw Hp(),Error(n(418));for(;x;)zf(m,x),x=Zs(x.nextSibling)}if($h(m),m.tag===13){if(m=m.memoizedState,m=m!==null?m.dehydrated:null,!m)throw Error(n(317));e:{for(m=m.nextSibling,x=0;m;){if(m.nodeType===8){var k=m.data;if(k==="/$"){if(x===0){ka=Zs(m.nextSibling);break e}x--}else k!=="$"&&k!=="$!"&&k!=="$?"||x++}m=m.nextSibling}ka=null}}else ka=Ma?Zs(m.stateNode.nextSibling):null;return!0}function Hp(){for(var m=ka;m;)m=Zs(m.nextSibling)}function ou(){ka=Ma=null,si=!1}function Ff(m){oo===null?oo=[m]:oo.push(m)}var Zp=ne.ReactCurrentBatchConfig;function qu(m,x,k){if(m=k.ref,m!==null&&typeof m!="function"&&typeof m!="object"){if(k._owner){if(k=k._owner,k){if(k.tag!==1)throw Error(n(309));var B=k.stateNode}if(!B)throw Error(n(147,m));var Q=B,oe=""+m;return x!==null&&x.ref!==null&&typeof x.ref=="function"&&x.ref._stringRef===oe?x.ref:(x=function(we){var Ze=Q.refs;we===null?delete Ze[oe]:Ze[oe]=we},x._stringRef=oe,x)}if(typeof m!="string")throw Error(n(284));if(!k._owner)throw Error(n(290,m))}return m}function Vh(m,x){throw m=Object.prototype.toString.call(x),Error(n(31,m==="[object Object]"?"object with keys {"+Object.keys(x).join(", ")+"}":m))}function mc(m){var x=m._init;return x(m._payload)}function Lr(m){function x(_t,lt){if(m){var wt=_t.deletions;wt===null?(_t.deletions=[lt],_t.flags|=16):wt.push(lt)}}function k(_t,lt){if(!m)return null;for(;lt!==null;)x(_t,lt),lt=lt.sibling;return null}function B(_t,lt){for(_t=new Map;lt!==null;)lt.key!==null?_t.set(lt.key,lt):_t.set(lt.index,lt),lt=lt.sibling;return _t}function Q(_t,lt){return _t=id(_t,lt),_t.index=0,_t.sibling=null,_t}function oe(_t,lt,wt){return _t.index=wt,m?(wt=_t.alternate,wt!==null?(wt=wt.index,wt<lt?(_t.flags|=2,lt):wt):(_t.flags|=2,lt)):(_t.flags|=1048576,lt)}function we(_t){return m&&_t.alternate===null&&(_t.flags|=2),_t}function Ze(_t,lt,wt,Jt){return lt===null||lt.tag!==6?(lt=_g(wt,_t.mode,Jt),lt.return=_t,lt):(lt=Q(lt,wt),lt.return=_t,lt)}function ot(_t,lt,wt,Jt){var kn=wt.type;return kn===de?Zt(_t,lt,wt.props.children,Jt,wt.key):lt!==null&&(lt.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===Ve&&mc(kn)===lt.type)?(Jt=Q(lt,wt.props),Jt.ref=qu(_t,lt,wt),Jt.return=_t,Jt):(Jt=rp(wt.type,wt.key,wt.props,null,_t.mode,Jt),Jt.ref=qu(_t,lt,wt),Jt.return=_t,Jt)}function Et(_t,lt,wt,Jt){return lt===null||lt.tag!==4||lt.stateNode.containerInfo!==wt.containerInfo||lt.stateNode.implementation!==wt.implementation?(lt=Av(wt,_t.mode,Jt),lt.return=_t,lt):(lt=Q(lt,wt.children||[]),lt.return=_t,lt)}function Zt(_t,lt,wt,Jt,kn){return lt===null||lt.tag!==7?(lt=eh(wt,_t.mode,Jt,kn),lt.return=_t,lt):(lt=Q(lt,wt),lt.return=_t,lt)}function Xt(_t,lt,wt){if(typeof lt=="string"&&lt!==""||typeof lt=="number")return lt=_g(""+lt,_t.mode,wt),lt.return=_t,lt;if(typeof lt=="object"&&lt!==null){switch(lt.$$typeof){case H:return wt=rp(lt.type,lt.key,lt.props,null,_t.mode,wt),wt.ref=qu(_t,null,lt),wt.return=_t,wt;case ae:return lt=Av(lt,_t.mode,wt),lt.return=_t,lt;case Ve:var Jt=lt._init;return Xt(_t,Jt(lt._payload),wt)}if(xi(lt)||We(lt))return lt=eh(lt,_t.mode,wt,null),lt.return=_t,lt;Vh(_t,lt)}return null}function Wt(_t,lt,wt,Jt){var kn=lt!==null?lt.key:null;if(typeof wt=="string"&&wt!==""||typeof wt=="number")return kn!==null?null:Ze(_t,lt,""+wt,Jt);if(typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case H:return wt.key===kn?ot(_t,lt,wt,Jt):null;case ae:return wt.key===kn?Et(_t,lt,wt,Jt):null;case Ve:return kn=wt._init,Wt(_t,lt,kn(wt._payload),Jt)}if(xi(wt)||We(wt))return kn!==null?null:Zt(_t,lt,wt,Jt,null);Vh(_t,wt)}return null}function yn(_t,lt,wt,Jt,kn){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number")return _t=_t.get(wt)||null,Ze(lt,_t,""+Jt,kn);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case H:return _t=_t.get(Jt.key===null?wt:Jt.key)||null,ot(lt,_t,Jt,kn);case ae:return _t=_t.get(Jt.key===null?wt:Jt.key)||null,Et(lt,_t,Jt,kn);case Ve:var Ln=Jt._init;return yn(_t,lt,wt,Ln(Jt._payload),kn)}if(xi(Jt)||We(Jt))return _t=_t.get(wt)||null,Zt(lt,_t,Jt,kn,null);Vh(lt,Jt)}return null}function wn(_t,lt,wt,Jt){for(var kn=null,Ln=null,Vn=lt,Qn=lt=0,qa=null;Vn!==null&&Qn<wt.length;Qn++){Vn.index>Qn?(qa=Vn,Vn=null):qa=Vn.sibling;var zr=Wt(_t,Vn,wt[Qn],Jt);if(zr===null){Vn===null&&(Vn=qa);break}m&&Vn&&zr.alternate===null&&x(_t,Vn),lt=oe(zr,lt,Qn),Ln===null?kn=zr:Ln.sibling=zr,Ln=zr,Vn=qa}if(Qn===wt.length)return k(_t,Vn),si&&tn(_t,Qn),kn;if(Vn===null){for(;Qn<wt.length;Qn++)Vn=Xt(_t,wt[Qn],Jt),Vn!==null&&(lt=oe(Vn,lt,Qn),Ln===null?kn=Vn:Ln.sibling=Vn,Ln=Vn);return si&&tn(_t,Qn),kn}for(Vn=B(_t,Vn);Qn<wt.length;Qn++)qa=yn(Vn,_t,Qn,wt[Qn],Jt),qa!==null&&(m&&qa.alternate!==null&&Vn.delete(qa.key===null?Qn:qa.key),lt=oe(qa,lt,Qn),Ln===null?kn=qa:Ln.sibling=qa,Ln=qa);return m&&Vn.forEach(function(th){return x(_t,th)}),si&&tn(_t,Qn),kn}function Pn(_t,lt,wt,Jt){var kn=We(wt);if(typeof kn!="function")throw Error(n(150));if(wt=kn.call(wt),wt==null)throw Error(n(151));for(var Ln=kn=null,Vn=lt,Qn=lt=0,qa=null,zr=wt.next();Vn!==null&&!zr.done;Qn++,zr=wt.next()){Vn.index>Qn?(qa=Vn,Vn=null):qa=Vn.sibling;var th=Wt(_t,Vn,zr.value,Jt);if(th===null){Vn===null&&(Vn=qa);break}m&&Vn&&th.alternate===null&&x(_t,Vn),lt=oe(th,lt,Qn),Ln===null?kn=th:Ln.sibling=th,Ln=th,Vn=qa}if(zr.done)return k(_t,Vn),si&&tn(_t,Qn),kn;if(Vn===null){for(;!zr.done;Qn++,zr=wt.next())zr=Xt(_t,zr.value,Jt),zr!==null&&(lt=oe(zr,lt,Qn),Ln===null?kn=zr:Ln.sibling=zr,Ln=zr);return si&&tn(_t,Qn),kn}for(Vn=B(_t,Vn);!zr.done;Qn++,zr=wt.next())zr=yn(Vn,_t,Qn,zr.value,Jt),zr!==null&&(m&&zr.alternate!==null&&Vn.delete(zr.key===null?Qn:zr.key),lt=oe(zr,lt,Qn),Ln===null?kn=zr:Ln.sibling=zr,Ln=zr);return m&&Vn.forEach(function(a_){return x(_t,a_)}),si&&tn(_t,Qn),kn}function Li(_t,lt,wt,Jt){if(typeof wt=="object"&&wt!==null&&wt.type===de&&wt.key===null&&(wt=wt.props.children),typeof wt=="object"&&wt!==null){switch(wt.$$typeof){case H:e:{for(var kn=wt.key,Ln=lt;Ln!==null;){if(Ln.key===kn){if(kn=wt.type,kn===de){if(Ln.tag===7){k(_t,Ln.sibling),lt=Q(Ln,wt.props.children),lt.return=_t,_t=lt;break e}}else if(Ln.elementType===kn||typeof kn=="object"&&kn!==null&&kn.$$typeof===Ve&&mc(kn)===Ln.type){k(_t,Ln.sibling),lt=Q(Ln,wt.props),lt.ref=qu(_t,Ln,wt),lt.return=_t,_t=lt;break e}k(_t,Ln);break}else x(_t,Ln);Ln=Ln.sibling}wt.type===de?(lt=eh(wt.props.children,_t.mode,Jt,wt.key),lt.return=_t,_t=lt):(Jt=rp(wt.type,wt.key,wt.props,null,_t.mode,Jt),Jt.ref=qu(_t,lt,wt),Jt.return=_t,_t=Jt)}return we(_t);case ae:e:{for(Ln=wt.key;lt!==null;){if(lt.key===Ln)if(lt.tag===4&&lt.stateNode.containerInfo===wt.containerInfo&&lt.stateNode.implementation===wt.implementation){k(_t,lt.sibling),lt=Q(lt,wt.children||[]),lt.return=_t,_t=lt;break e}else{k(_t,lt);break}else x(_t,lt);lt=lt.sibling}lt=Av(wt,_t.mode,Jt),lt.return=_t,_t=lt}return we(_t);case Ve:return Ln=wt._init,Li(_t,lt,Ln(wt._payload),Jt)}if(xi(wt))return wn(_t,lt,wt,Jt);if(We(wt))return Pn(_t,lt,wt,Jt);Vh(_t,wt)}return typeof wt=="string"&&wt!==""||typeof wt=="number"?(wt=""+wt,lt!==null&&lt.tag===6?(k(_t,lt.sibling),lt=Q(lt,wt),lt.return=_t,_t=lt):(k(_t,lt),lt=_g(wt,_t.mode,Jt),lt.return=_t,_t=lt),we(_t)):k(_t,lt)}return Li}var Bd=Lr(!0),$d=Lr(!1),Gu=pc(null),Wu=null,su=null,Bf=null;function $f(){Bf=su=Wu=null}function Vf(m){var x=Gu.current;oi(Gu),m._currentValue=x}function Jo(m,x,k){for(;m!==null;){var B=m.alternate;if((m.childLanes&x)!==x?(m.childLanes|=x,B!==null&&(B.childLanes|=x)):B!==null&&(B.childLanes&x)!==x&&(B.childLanes|=x),m===k)break;m=m.return}}function Cl(m,x){Wu=m,Bf=su=null,m=m.dependencies,m!==null&&m.firstContext!==null&&((m.lanes&x)!==0&&(lo=!0),m.firstContext=null)}function an(m){var x=m._currentValue;if(Bf!==m)if(m={context:m,memoizedValue:x,next:null},su===null){if(Wu===null)throw Error(n(308));su=m,Wu.dependencies={lanes:0,firstContext:m}}else su=su.next=m;return x}var vn=null;function Hu(m){vn===null?vn=[m]:vn.push(m)}function Uh(m,x,k,B){var Q=x.interleaved;return Q===null?(k.next=k,Hu(x)):(k.next=Q.next,Q.next=k),x.interleaved=k,vs(m,B)}function vs(m,x){m.lanes|=x;var k=m.alternate;for(k!==null&&(k.lanes|=x),k=m,m=m.return;m!==null;)m.childLanes|=x,k=m.alternate,k!==null&&(k.childLanes|=x),k=m,m=m.return;return k.tag===3?k.stateNode:null}var Ei=!1;function ko(m){m.updateQueue={baseState:m.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Uf(m,x){m=m.updateQueue,x.updateQueue===m&&(x.updateQueue={baseState:m.baseState,firstBaseUpdate:m.firstBaseUpdate,lastBaseUpdate:m.lastBaseUpdate,shared:m.shared,effects:m.effects})}function El(m,x){return{eventTime:m,lane:x,tag:0,payload:null,callback:null,next:null}}function lu(m,x,k){var B=m.updateQueue;if(B===null)return null;if(B=B.shared,(kr&2)!==0){var Q=B.pending;return Q===null?x.next=x:(x.next=Q.next,Q.next=x),B.pending=x,vs(m,k)}return Q=B.interleaved,Q===null?(x.next=x,Hu(B)):(x.next=Q.next,Q.next=x),B.interleaved=x,vs(m,k)}function qf(m,x,k){if(x=x.updateQueue,x!==null&&(x=x.shared,(k&4194240)!==0)){var B=x.lanes;B&=m.pendingLanes,k|=B,x.lanes=k,Is(m,k)}}function Vd(m,x){var k=m.updateQueue,B=m.alternate;if(B!==null&&(B=B.updateQueue,k===B)){var Q=null,oe=null;if(k=k.firstBaseUpdate,k!==null){do{var we={eventTime:k.eventTime,lane:k.lane,tag:k.tag,payload:k.payload,callback:k.callback,next:null};oe===null?Q=oe=we:oe=oe.next=we,k=k.next}while(k!==null);oe===null?Q=oe=x:oe=oe.next=x}else Q=oe=x;k={baseState:B.baseState,firstBaseUpdate:Q,lastBaseUpdate:oe,shared:B.shared,effects:B.effects},m.updateQueue=k;return}m=k.lastBaseUpdate,m===null?k.firstBaseUpdate=x:m.next=x,k.lastBaseUpdate=x}function ei(m,x,k,B){var Q=m.updateQueue;Ei=!1;var oe=Q.firstBaseUpdate,we=Q.lastBaseUpdate,Ze=Q.shared.pending;if(Ze!==null){Q.shared.pending=null;var ot=Ze,Et=ot.next;ot.next=null,we===null?oe=Et:we.next=Et,we=ot;var Zt=m.alternate;Zt!==null&&(Zt=Zt.updateQueue,Ze=Zt.lastBaseUpdate,Ze!==we&&(Ze===null?Zt.firstBaseUpdate=Et:Ze.next=Et,Zt.lastBaseUpdate=ot))}if(oe!==null){var Xt=Q.baseState;we=0,Zt=Et=ot=null,Ze=oe;do{var Wt=Ze.lane,yn=Ze.eventTime;if((B&Wt)===Wt){Zt!==null&&(Zt=Zt.next={eventTime:yn,lane:0,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null});e:{var wn=m,Pn=Ze;switch(Wt=x,yn=k,Pn.tag){case 1:if(wn=Pn.payload,typeof wn=="function"){Xt=wn.call(yn,Xt,Wt);break e}Xt=wn;break e;case 3:wn.flags=wn.flags&-65537|128;case 0:if(wn=Pn.payload,Wt=typeof wn=="function"?wn.call(yn,Xt,Wt):wn,Wt==null)break e;Xt=Qe({},Xt,Wt);break e;case 2:Ei=!0}}Ze.callback!==null&&Ze.lane!==0&&(m.flags|=64,Wt=Q.effects,Wt===null?Q.effects=[Ze]:Wt.push(Ze))}else yn={eventTime:yn,lane:Wt,tag:Ze.tag,payload:Ze.payload,callback:Ze.callback,next:null},Zt===null?(Et=Zt=yn,ot=Xt):Zt=Zt.next=yn,we|=Wt;if(Ze=Ze.next,Ze===null){if(Ze=Q.shared.pending,Ze===null)break;Wt=Ze,Ze=Wt.next,Wt.next=null,Q.lastBaseUpdate=Wt,Q.shared.pending=null}}while(!0);if(Zt===null&&(ot=Xt),Q.baseState=ot,Q.firstBaseUpdate=Et,Q.lastBaseUpdate=Zt,x=Q.shared.interleaved,x!==null){Q=x;do we|=Q.lane,Q=Q.next;while(Q!==x)}else oe===null&&(Q.shared.lanes=0);Wd|=we,m.lanes=we,m.memoizedState=Xt}}function Pi(m,x,k){if(m=x.effects,x.effects=null,m!==null)for(x=0;x<m.length;x++){var B=m[x],Q=B.callback;if(Q!==null){if(B.callback=null,B=k,typeof Q!="function")throw Error(n(191,Q));Q.call(B)}}}var Xs={},Io=pc(Xs),cu=pc(Xs),Zu=pc(Xs);function jl(m){if(m===Xs)throw Error(n(174));return m}function qh(m,x){switch(Sr(Zu,x),Sr(cu,m),Sr(Io,Xs),m=x.nodeType,m){case 9:case 11:x=(x=x.documentElement)?x.namespaceURI:Ta(null,"");break;default:m=m===8?x.parentNode:x,x=m.namespaceURI||null,m=m.tagName,x=Ta(x,m)}oi(Io),Sr(Io,x)}function Ml(){oi(Io),oi(cu),oi(Zu)}function kl(m){jl(Zu.current);var x=jl(Io.current),k=Ta(x,m.type);x!==k&&(Sr(cu,m),Sr(Io,k))}function Ud(m){cu.current===m&&(oi(Io),oi(cu))}var ti=pc(0);function Ku(m){for(var x=m;x!==null;){if(x.tag===13){var k=x.memoizedState;if(k!==null&&(k=k.dehydrated,k===null||k.data==="$?"||k.data==="$!"))return x}else if(x.tag===19&&x.memoizedProps.revealOrder!==void 0){if((x.flags&128)!==0)return x}else if(x.child!==null){x.child.return=x,x=x.child;continue}if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return null;x=x.return}x.sibling.return=x.return,x=x.sibling}return null}var Xu=[];function Gh(){for(var m=0;m<Xu.length;m++)Xu[m]._workInProgressVersionPrimary=null;Xu.length=0}var gc=ne.ReactCurrentDispatcher,yc=ne.ReactCurrentBatchConfig,vc=0,ni=null,fi=null,Gi=null,Yu=!1,uu=!1,Ju=0,C=0;function a(){throw Error(n(321))}function u(m,x){if(x===null)return!1;for(var k=0;k<x.length&&k<m.length;k++)if(!Zo(m[k],x[k]))return!1;return!0}function y(m,x,k,B,Q,oe){if(vc=oe,ni=x,x.memoizedState=null,x.updateQueue=null,x.lanes=0,gc.current=m===null||m.memoizedState===null?pi:pa,m=k(B,Q),uu){oe=0;do{if(uu=!1,Ju=0,25<=oe)throw Error(n(301));oe+=1,Gi=fi=null,x.updateQueue=null,gc.current=Oi,m=k(B,Q)}while(uu)}if(gc.current=ui,x=fi!==null&&fi.next!==null,vc=0,Gi=fi=ni=null,Yu=!1,x)throw Error(n(300));return m}function b(){var m=Ju!==0;return Ju=0,m}function j(){var m={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Gi===null?ni.memoizedState=Gi=m:Gi=Gi.next=m,Gi}function I(){if(fi===null){var m=ni.alternate;m=m!==null?m.memoizedState:null}else m=fi.next;var x=Gi===null?ni.memoizedState:Gi.next;if(x!==null)Gi=x,fi=m;else{if(m===null)throw Error(n(310));fi=m,m={memoizedState:fi.memoizedState,baseState:fi.baseState,baseQueue:fi.baseQueue,queue:fi.queue,next:null},Gi===null?ni.memoizedState=Gi=m:Gi=Gi.next=m}return Gi}function F(m,x){return typeof x=="function"?x(m):x}function U(m){var x=I(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=m;var B=fi,Q=B.baseQueue,oe=k.pending;if(oe!==null){if(Q!==null){var we=Q.next;Q.next=oe.next,oe.next=we}B.baseQueue=Q=oe,k.pending=null}if(Q!==null){oe=Q.next,B=B.baseState;var Ze=we=null,ot=null,Et=oe;do{var Zt=Et.lane;if((vc&Zt)===Zt)ot!==null&&(ot=ot.next={lane:0,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null}),B=Et.hasEagerState?Et.eagerState:m(B,Et.action);else{var Xt={lane:Zt,action:Et.action,hasEagerState:Et.hasEagerState,eagerState:Et.eagerState,next:null};ot===null?(Ze=ot=Xt,we=B):ot=ot.next=Xt,ni.lanes|=Zt,Wd|=Zt}Et=Et.next}while(Et!==null&&Et!==oe);ot===null?we=B:ot.next=Ze,Zo(B,x.memoizedState)||(lo=!0),x.memoizedState=B,x.baseState=we,x.baseQueue=ot,k.lastRenderedState=B}if(m=k.interleaved,m!==null){Q=m;do oe=Q.lane,ni.lanes|=oe,Wd|=oe,Q=Q.next;while(Q!==m)}else Q===null&&(k.lanes=0);return[x.memoizedState,k.dispatch]}function Y(m){var x=I(),k=x.queue;if(k===null)throw Error(n(311));k.lastRenderedReducer=m;var B=k.dispatch,Q=k.pending,oe=x.memoizedState;if(Q!==null){k.pending=null;var we=Q=Q.next;do oe=m(oe,we.action),we=we.next;while(we!==Q);Zo(oe,x.memoizedState)||(lo=!0),x.memoizedState=oe,x.baseQueue===null&&(x.baseState=oe),k.lastRenderedState=oe}return[oe,B]}function re(){}function ce(m,x){var k=ni,B=I(),Q=x(),oe=!Zo(B.memoizedState,Q);if(oe&&(B.memoizedState=Q,lo=!0),B=B.queue,Ue(be.bind(null,k,B,m),[m]),B.getSnapshot!==x||oe||Gi!==null&&Gi.memoizedState.tag&1){if(k.flags|=2048,ze(9,ge.bind(null,k,B,Q,x),void 0,null),Ua===null)throw Error(n(349));(vc&30)!==0||le(k,x,Q)}return Q}function le(m,x,k){m.flags|=16384,m={getSnapshot:x,value:k},x=ni.updateQueue,x===null?(x={lastEffect:null,stores:null},ni.updateQueue=x,x.stores=[m]):(k=x.stores,k===null?x.stores=[m]:k.push(m))}function ge(m,x,k,B){x.value=k,x.getSnapshot=B,Me(x)&&Ne(m)}function be(m,x,k){return k(function(){Me(x)&&Ne(m)})}function Me(m){var x=m.getSnapshot;m=m.value;try{var k=x();return!Zo(m,k)}catch{return!0}}function Ne(m){var x=vs(m,1);x!==null&&Pc(x,m,1,-1)}function Ie(m){var x=j();return typeof m=="function"&&(m=m()),x.memoizedState=x.baseState=m,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:F,lastRenderedState:m},x.queue=m,m=m.dispatch=li.bind(null,ni,m),[x.memoizedState,m]}function ze(m,x,k,B){return m={tag:m,create:x,destroy:k,deps:B,next:null},x=ni.updateQueue,x===null?(x={lastEffect:null,stores:null},ni.updateQueue=x,x.lastEffect=m.next=m):(k=x.lastEffect,k===null?x.lastEffect=m.next=m:(B=k.next,k.next=m,m.next=B,x.lastEffect=m)),m}function He(){return I().memoizedState}function Fe(m,x,k,B){var Q=j();ni.flags|=m,Q.memoizedState=ze(1|x,k,void 0,B===void 0?null:B)}function Ge(m,x,k,B){var Q=I();B=B===void 0?null:B;var oe=void 0;if(fi!==null){var we=fi.memoizedState;if(oe=we.destroy,B!==null&&u(B,we.deps)){Q.memoizedState=ze(x,k,oe,B);return}}ni.flags|=m,Q.memoizedState=ze(1|x,k,oe,B)}function Ye(m,x){return Fe(8390656,8,m,x)}function Ue(m,x){return Ge(2048,8,m,x)}function st(m,x){return Ge(4,2,m,x)}function bt(m,x){return Ge(4,4,m,x)}function yt(m,x){if(typeof x=="function")return m=m(),x(m),function(){x(null)};if(x!=null)return m=m(),x.current=m,function(){x.current=null}}function vt(m,x,k){return k=k!=null?k.concat([m]):null,Ge(4,4,yt.bind(null,x,m),k)}function xt(){}function qt(m,x){var k=I();x=x===void 0?null:x;var B=k.memoizedState;return B!==null&&x!==null&&u(x,B[1])?B[0]:(k.memoizedState=[m,x],m)}function Gt(m,x){var k=I();x=x===void 0?null:x;var B=k.memoizedState;return B!==null&&x!==null&&u(x,B[1])?B[0]:(m=m(),k.memoizedState=[m,x],m)}function Rt(m,x,k){return(vc&21)===0?(m.baseState&&(m.baseState=!1,lo=!0),m.memoizedState=k):(Zo(k,x)||(k=kd(),ni.lanes|=k,Wd|=k,m.baseState=!0),x)}function Yt(m,x){var k=pr;pr=k!==0&&4>k?k:4,m(!0);var B=yc.transition;yc.transition={};try{m(!1),x()}finally{pr=k,yc.transition=B}}function $n(){return I().memoizedState}function Mr(m,x,k){var B=bs(m);if(k={lane:B,action:k,hasEagerState:!1,eagerState:null,next:null},$r(m))ci(x,k);else if(k=Uh(m,x,k,B),k!==null){var Q=Ro();Pc(k,m,B,Q),Vr(k,x,B)}}function li(m,x,k){var B=bs(m),Q={lane:B,action:k,hasEagerState:!1,eagerState:null,next:null};if($r(m))ci(x,Q);else{var oe=m.alternate;if(m.lanes===0&&(oe===null||oe.lanes===0)&&(oe=x.lastRenderedReducer,oe!==null))try{var we=x.lastRenderedState,Ze=oe(we,k);if(Q.hasEagerState=!0,Q.eagerState=Ze,Zo(Ze,we)){var ot=x.interleaved;ot===null?(Q.next=Q,Hu(x)):(Q.next=ot.next,ot.next=Q),x.interleaved=Q;return}}catch{}finally{}k=Uh(m,x,Q,B),k!==null&&(Q=Ro(),Pc(k,m,B,Q),Vr(k,x,B))}}function $r(m){var x=m.alternate;return m===ni||x!==null&&x===ni}function ci(m,x){uu=Yu=!0;var k=m.pending;k===null?x.next=x:(x.next=k.next,k.next=x),m.pending=x}function Vr(m,x,k){if((k&4194240)!==0){var B=x.lanes;B&=m.pendingLanes,k|=B,x.lanes=k,Is(m,k)}}var ui={readContext:an,useCallback:a,useContext:a,useEffect:a,useImperativeHandle:a,useInsertionEffect:a,useLayoutEffect:a,useMemo:a,useReducer:a,useRef:a,useState:a,useDebugValue:a,useDeferredValue:a,useTransition:a,useMutableSource:a,useSyncExternalStore:a,useId:a,unstable_isNewReconciler:!1},pi={readContext:an,useCallback:function(m,x){return j().memoizedState=[m,x===void 0?null:x],m},useContext:an,useEffect:Ye,useImperativeHandle:function(m,x,k){return k=k!=null?k.concat([m]):null,Fe(4194308,4,yt.bind(null,x,m),k)},useLayoutEffect:function(m,x){return Fe(4194308,4,m,x)},useInsertionEffect:function(m,x){return Fe(4,2,m,x)},useMemo:function(m,x){var k=j();return x=x===void 0?null:x,m=m(),k.memoizedState=[m,x],m},useReducer:function(m,x,k){var B=j();return x=k!==void 0?k(x):x,B.memoizedState=B.baseState=x,m={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:m,lastRenderedState:x},B.queue=m,m=m.dispatch=Mr.bind(null,ni,m),[B.memoizedState,m]},useRef:function(m){var x=j();return m={current:m},x.memoizedState=m},useState:Ie,useDebugValue:xt,useDeferredValue:function(m){return j().memoizedState=m},useTransition:function(){var m=Ie(!1),x=m[0];return m=Yt.bind(null,m[1]),j().memoizedState=m,[x,m]},useMutableSource:function(){},useSyncExternalStore:function(m,x,k){var B=ni,Q=j();if(si){if(k===void 0)throw Error(n(407));k=k()}else{if(k=x(),Ua===null)throw Error(n(349));(vc&30)!==0||le(B,x,k)}Q.memoizedState=k;var oe={value:k,getSnapshot:x};return Q.queue=oe,Ye(be.bind(null,B,oe,m),[m]),B.flags|=2048,ze(9,ge.bind(null,B,oe,k,x),void 0,null),k},useId:function(){var m=j(),x=Ua.identifierPrefix;if(si){var k=ta,B=Mo;k=(B&~(1<<32-Yn(B)-1)).toString(32)+k,x=":"+x+"R"+k,k=Ju++,0<k&&(x+="H"+k.toString(32)),x+=":"}else k=C++,x=":"+x+"r"+k.toString(32)+":";return m.memoizedState=x},unstable_isNewReconciler:!1},pa={readContext:an,useCallback:qt,useContext:an,useEffect:Ue,useImperativeHandle:vt,useInsertionEffect:st,useLayoutEffect:bt,useMemo:Gt,useReducer:U,useRef:He,useState:function(){return U(F)},useDebugValue:xt,useDeferredValue:function(m){var x=I();return Rt(x,fi.memoizedState,m)},useTransition:function(){var m=U(F)[0],x=I().memoizedState;return[m,x]},useMutableSource:re,useSyncExternalStore:ce,useId:$n,unstable_isNewReconciler:!1},Oi={readContext:an,useCallback:qt,useContext:an,useEffect:Ue,useImperativeHandle:vt,useInsertionEffect:st,useLayoutEffect:bt,useMemo:Gt,useReducer:Y,useRef:He,useState:function(){return Y(F)},useDebugValue:xt,useDeferredValue:function(m){var x=I();return fi===null?x.memoizedState=m:Rt(x,fi.memoizedState,m)},useTransition:function(){var m=Y(F)[0],x=I().memoizedState;return[m,x]},useMutableSource:re,useSyncExternalStore:ce,useId:$n,unstable_isNewReconciler:!1};function Ar(m,x){if(m&&m.defaultProps){x=Qe({},x),m=m.defaultProps;for(var k in m)x[k]===void 0&&(x[k]=m[k]);return x}return x}function na(m,x,k,B){x=m.memoizedState,k=k(B,x),k=k==null?x:Qe({},x,k),m.memoizedState=k,m.lanes===0&&(m.updateQueue.baseState=k)}var Ys={isMounted:function(m){return(m=m._reactInternals)?Tn(m)===m:!1},enqueueSetState:function(m,x,k){m=m._reactInternals;var B=Ro(),Q=bs(m),oe=El(B,Q);oe.payload=x,k!=null&&(oe.callback=k),x=lu(m,oe,Q),x!==null&&(Pc(x,m,Q,B),qf(x,m,Q))},enqueueReplaceState:function(m,x,k){m=m._reactInternals;var B=Ro(),Q=bs(m),oe=El(B,Q);oe.tag=1,oe.payload=x,k!=null&&(oe.callback=k),x=lu(m,oe,Q),x!==null&&(Pc(x,m,Q,B),qf(x,m,Q))},enqueueForceUpdate:function(m,x){m=m._reactInternals;var k=Ro(),B=bs(m),Q=El(k,B);Q.tag=2,x!=null&&(Q.callback=x),x=lu(m,Q,B),x!==null&&(Pc(x,m,B,k),qf(x,m,B))}};function Il(m,x,k,B,Q,oe,we){return m=m.stateNode,typeof m.shouldComponentUpdate=="function"?m.shouldComponentUpdate(B,oe,we):x.prototype&&x.prototype.isPureReactComponent?!Gs(k,B)||!Gs(Q,oe):!0}function Js(m,x,k){var B=!1,Q=Pl,oe=x.contextType;return typeof oe=="object"&&oe!==null?oe=an(oe):(Q=Ba(x)?tu:ha.current,B=x.contextTypes,oe=(B=B!=null)?nu(m,Q):Pl),x=new x(k,oe),m.memoizedState=x.state!==null&&x.state!==void 0?x.state:null,x.updater=Ys,m.stateNode=x,x._reactInternals=m,B&&(m=m.stateNode,m.__reactInternalMemoizedUnmaskedChildContext=Q,m.__reactInternalMemoizedMaskedChildContext=oe),x}function so(m,x,k,B){m=x.state,typeof x.componentWillReceiveProps=="function"&&x.componentWillReceiveProps(k,B),typeof x.UNSAFE_componentWillReceiveProps=="function"&&x.UNSAFE_componentWillReceiveProps(k,B),x.state!==m&&Ys.enqueueReplaceState(x,x.state,null)}function xc(m,x,k,B){var Q=m.stateNode;Q.props=k,Q.state=m.memoizedState,Q.refs={},ko(m);var oe=x.contextType;typeof oe=="object"&&oe!==null?Q.context=an(oe):(oe=Ba(x)?tu:ha.current,Q.context=nu(m,oe)),Q.state=m.memoizedState,oe=x.getDerivedStateFromProps,typeof oe=="function"&&(na(m,x,oe,k),Q.state=m.memoizedState),typeof x.getDerivedStateFromProps=="function"||typeof Q.getSnapshotBeforeUpdate=="function"||typeof Q.UNSAFE_componentWillMount!="function"&&typeof Q.componentWillMount!="function"||(x=Q.state,typeof Q.componentWillMount=="function"&&Q.componentWillMount(),typeof Q.UNSAFE_componentWillMount=="function"&&Q.UNSAFE_componentWillMount(),x!==Q.state&&Ys.enqueueReplaceState(Q,Q.state,null),ei(m,k,Q,B),Q.state=m.memoizedState),typeof Q.componentDidMount=="function"&&(m.flags|=4194308)}function Nl(m,x){try{var k="",B=x;do k+=Mt(B),B=B.return;while(B);var Q=k}catch(oe){Q=`
Error generating stack: `+oe.message+`
`+oe.stack}return{value:m,source:x,stack:Q,digest:null}}function _c(m,x,k){return{value:m,source:null,stack:k??null,digest:x??null}}function No(m,x){try{console.error(x.value)}catch(k){setTimeout(function(){throw k})}}var Dl=typeof WeakMap=="function"?WeakMap:Map;function xs(m,x,k){k=El(-1,k),k.tag=3,k.payload={element:null};var B=x.value;return k.callback=function(){Zd||(Zd=!0,mg=B),No(m,x)},k}function _s(m,x,k){k=El(-1,k),k.tag=3;var B=m.type.getDerivedStateFromError;if(typeof B=="function"){var Q=x.value;k.payload=function(){return B(Q)},k.callback=function(){No(m,x)}}var oe=m.stateNode;return oe!==null&&typeof oe.componentDidCatch=="function"&&(k.callback=function(){No(m,x),typeof B!="function"&&(nd===null?nd=new Set([this]):nd.add(this));var we=x.stack;this.componentDidCatch(x.value,{componentStack:we!==null?we:""})}),k}function Wr(m,x,k){var B=m.pingCache;if(B===null){B=m.pingCache=new Dl;var Q=new Set;B.set(x,Q)}else Q=B.get(x),Q===void 0&&(Q=new Set,B.set(x,Q));Q.has(k)||(Q.add(k),m=K0.bind(null,m,x,k),x.then(m,m))}function Ur(m){do{var x;if((x=m.tag===13)&&(x=m.memoizedState,x=x!==null?x.dehydrated!==null:!0),x)return m;m=m.return}while(m!==null);return null}function Wi(m,x,k,B,Q){return(m.mode&1)===0?(m===x?m.flags|=65536:(m.flags|=128,k.flags|=131072,k.flags&=-52805,k.tag===1&&(k.alternate===null?k.tag=17:(x=El(-1,1),x.tag=2,lu(k,x,1))),k.lanes|=1),m):(m.flags|=65536,m.lanes=Q,m)}var ra=ne.ReactCurrentOwner,lo=!1;function $a(m,x,k,B){x.child=m===null?$d(x,null,k,B):Bd(x,m.child,k,B)}function du(m,x,k,B,Q){k=k.render;var oe=x.ref;return Cl(x,Q),B=y(m,x,k,B,oe,Q),k=b(),m!==null&&!lo?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~Q,ed(m,x,Q)):(si&&k&&Bh(x),x.flags|=1,$a(m,x,B,Q),x.child)}function cg(m,x,k,B,Q){if(m===null){var oe=k.type;return typeof oe=="function"&&!Pv(oe)&&oe.defaultProps===void 0&&k.compare===null&&k.defaultProps===void 0?(x.tag=15,x.type=oe,Kp(m,x,oe,B,Q)):(m=rp(k.type,null,B,x,x.mode,Q),m.ref=x.ref,m.return=x,x.child=m)}if(oe=m.child,(m.lanes&Q)===0){var we=oe.memoizedProps;if(k=k.compare,k=k!==null?k:Gs,k(we,B)&&m.ref===x.ref)return ed(m,x,Q)}return x.flags|=1,m=id(oe,B),m.ref=x.ref,m.return=x,x.child=m}function Kp(m,x,k,B,Q){if(m!==null){var oe=m.memoizedProps;if(Gs(oe,B)&&m.ref===x.ref)if(lo=!1,x.pendingProps=B=oe,(m.lanes&Q)!==0)(m.flags&131072)!==0&&(lo=!0);else return x.lanes=m.lanes,ed(m,x,Q)}return Ol(m,x,k,B,Q)}function Gf(m,x,k){var B=x.pendingProps,Q=B.children,oe=m!==null?m.memoizedState:null;if(B.mode==="hidden")if((x.mode&1)===0)x.memoizedState={baseLanes:0,cachePool:null,transitions:null},Sr(ep,el),el|=k;else{if((k&1073741824)===0)return m=oe!==null?oe.baseLanes|k:k,x.lanes=x.childLanes=1073741824,x.memoizedState={baseLanes:m,cachePool:null,transitions:null},x.updateQueue=null,Sr(ep,el),el|=m,null;x.memoizedState={baseLanes:0,cachePool:null,transitions:null},B=oe!==null?oe.baseLanes:k,Sr(ep,el),el|=B}else oe!==null?(B=oe.baseLanes|k,x.memoizedState=null):B=k,Sr(ep,el),el|=B;return $a(m,x,Q,k),x.child}function bc(m,x){var k=x.ref;(m===null&&k!==null||m!==null&&m.ref!==k)&&(x.flags|=512,x.flags|=2097152)}function Ol(m,x,k,B,Q){var oe=Ba(k)?tu:ha.current;return oe=nu(x,oe),Cl(x,Q),k=y(m,x,k,B,oe,Q),B=b(),m!==null&&!lo?(x.updateQueue=m.updateQueue,x.flags&=-2053,m.lanes&=~Q,ed(m,x,Q)):(si&&B&&Bh(x),x.flags|=1,$a(m,x,k,Q),x.child)}function wc(m,x,k,B,Q){if(Ba(k)){var oe=!0;Ks(x)}else oe=!1;if(Cl(x,Q),x.stateNode===null)Qu(m,x),Js(x,k,B),xc(x,k,B,Q),B=!0;else if(m===null){var we=x.stateNode,Ze=x.memoizedProps;we.props=Ze;var ot=we.context,Et=k.contextType;typeof Et=="object"&&Et!==null?Et=an(Et):(Et=Ba(k)?tu:ha.current,Et=nu(x,Et));var Zt=k.getDerivedStateFromProps,Xt=typeof Zt=="function"||typeof we.getSnapshotBeforeUpdate=="function";Xt||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Ze!==B||ot!==Et)&&so(x,we,B,Et),Ei=!1;var Wt=x.memoizedState;we.state=Wt,ei(x,B,we,Q),ot=x.memoizedState,Ze!==B||Wt!==ot||fa.current||Ei?(typeof Zt=="function"&&(na(x,k,Zt,B),ot=x.memoizedState),(Ze=Ei||Il(x,k,Ze,B,Wt,ot,Et))?(Xt||typeof we.UNSAFE_componentWillMount!="function"&&typeof we.componentWillMount!="function"||(typeof we.componentWillMount=="function"&&we.componentWillMount(),typeof we.UNSAFE_componentWillMount=="function"&&we.UNSAFE_componentWillMount()),typeof we.componentDidMount=="function"&&(x.flags|=4194308)):(typeof we.componentDidMount=="function"&&(x.flags|=4194308),x.memoizedProps=B,x.memoizedState=ot),we.props=B,we.state=ot,we.context=Et,B=Ze):(typeof we.componentDidMount=="function"&&(x.flags|=4194308),B=!1)}else{we=x.stateNode,Uf(m,x),Ze=x.memoizedProps,Et=x.type===x.elementType?Ze:Ar(x.type,Ze),we.props=Et,Xt=x.pendingProps,Wt=we.context,ot=k.contextType,typeof ot=="object"&&ot!==null?ot=an(ot):(ot=Ba(k)?tu:ha.current,ot=nu(x,ot));var yn=k.getDerivedStateFromProps;(Zt=typeof yn=="function"||typeof we.getSnapshotBeforeUpdate=="function")||typeof we.UNSAFE_componentWillReceiveProps!="function"&&typeof we.componentWillReceiveProps!="function"||(Ze!==Xt||Wt!==ot)&&so(x,we,B,ot),Ei=!1,Wt=x.memoizedState,we.state=Wt,ei(x,B,we,Q);var wn=x.memoizedState;Ze!==Xt||Wt!==wn||fa.current||Ei?(typeof yn=="function"&&(na(x,k,yn,B),wn=x.memoizedState),(Et=Ei||Il(x,k,Et,B,Wt,wn,ot)||!1)?(Zt||typeof we.UNSAFE_componentWillUpdate!="function"&&typeof we.componentWillUpdate!="function"||(typeof we.componentWillUpdate=="function"&&we.componentWillUpdate(B,wn,ot),typeof we.UNSAFE_componentWillUpdate=="function"&&we.UNSAFE_componentWillUpdate(B,wn,ot)),typeof we.componentDidUpdate=="function"&&(x.flags|=4),typeof we.getSnapshotBeforeUpdate=="function"&&(x.flags|=1024)):(typeof we.componentDidUpdate!="function"||Ze===m.memoizedProps&&Wt===m.memoizedState||(x.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Ze===m.memoizedProps&&Wt===m.memoizedState||(x.flags|=1024),x.memoizedProps=B,x.memoizedState=wn),we.props=B,we.state=wn,we.context=ot,B=Et):(typeof we.componentDidUpdate!="function"||Ze===m.memoizedProps&&Wt===m.memoizedState||(x.flags|=4),typeof we.getSnapshotBeforeUpdate!="function"||Ze===m.memoizedProps&&Wt===m.memoizedState||(x.flags|=1024),B=!1)}return Wh(m,x,k,B,oe,Q)}function Wh(m,x,k,B,Q,oe){bc(m,x);var we=(x.flags&128)!==0;if(!B&&!we)return Q&&qp(x,k,!1),ed(m,x,oe);B=x.stateNode,ra.current=x;var Ze=we&&typeof k.getDerivedStateFromError!="function"?null:B.render();return x.flags|=1,m!==null&&we?(x.child=Bd(x,m.child,null,oe),x.child=Bd(x,null,Ze,oe)):$a(m,x,Ze,oe),x.memoizedState=B.state,Q&&qp(x,k,!0),x.child}function Wf(m){var x=m.stateNode;x.pendingContext?Of(m,x.pendingContext,x.pendingContext!==x.context):x.context&&Of(m,x.context,!1),qh(m,x.containerInfo)}function Hh(m,x,k,B,Q){return ou(),Ff(Q),x.flags|=256,$a(m,x,k,B),x.child}var qd={dehydrated:null,treeContext:null,retryLane:0};function Hf(m){return{baseLanes:m,cachePool:null,transitions:null}}function uv(m,x,k){var B=x.pendingProps,Q=ti.current,oe=!1,we=(x.flags&128)!==0,Ze;if((Ze=we)||(Ze=m!==null&&m.memoizedState===null?!1:(Q&2)!==0),Ze?(oe=!0,x.flags&=-129):(m===null||m.memoizedState!==null)&&(Q|=1),Sr(ti,Q&1),m===null)return Wp(x),m=x.memoizedState,m!==null&&(m=m.dehydrated,m!==null)?((x.mode&1)===0?x.lanes=1:m.data==="$!"?x.lanes=8:x.lanes=1073741824,null):(we=B.children,m=B.fallback,oe?(B=x.mode,oe=x.child,we={mode:"hidden",children:we},(B&1)===0&&oe!==null?(oe.childLanes=0,oe.pendingProps=we):oe=am(we,B,0,null),m=eh(m,B,k,null),oe.return=x,m.return=x,oe.sibling=m,x.child=oe,x.child.memoizedState=Hf(k),x.memoizedState=qd,m):dv(x,we));if(Q=m.memoizedState,Q!==null&&(Ze=Q.dehydrated,Ze!==null))return Qw(m,x,we,B,Ze,Q,k);if(oe){oe=B.fallback,we=x.mode,Q=m.child,Ze=Q.sibling;var ot={mode:"hidden",children:B.children};return(we&1)===0&&x.child!==Q?(B=x.child,B.childLanes=0,B.pendingProps=ot,x.deletions=null):(B=id(Q,ot),B.subtreeFlags=Q.subtreeFlags&14680064),Ze!==null?oe=id(Ze,oe):(oe=eh(oe,we,k,null),oe.flags|=2),oe.return=x,B.return=x,B.sibling=oe,x.child=B,B=oe,oe=x.child,we=m.child.memoizedState,we=we===null?Hf(k):{baseLanes:we.baseLanes|k,cachePool:null,transitions:we.transitions},oe.memoizedState=we,oe.childLanes=m.childLanes&~k,x.memoizedState=qd,B}return oe=m.child,m=oe.sibling,B=id(oe,{mode:"visible",children:B.children}),(x.mode&1)===0&&(B.lanes=k),B.return=x,B.sibling=null,m!==null&&(k=x.deletions,k===null?(x.deletions=[m],x.flags|=16):k.push(m)),x.child=B,x.memoizedState=null,B}function dv(m,x){return x=am({mode:"visible",children:x},m.mode,0,null),x.return=m,m.child=x}function Zf(m,x,k,B){return B!==null&&Ff(B),Bd(x,m.child,null,k),m=dv(x,x.pendingProps.children),m.flags|=2,x.memoizedState=null,m}function Qw(m,x,k,B,Q,oe,we){if(k)return x.flags&256?(x.flags&=-257,B=_c(Error(n(422))),Zf(m,x,we,B)):x.memoizedState!==null?(x.child=m.child,x.flags|=128,null):(oe=B.fallback,Q=x.mode,B=am({mode:"visible",children:B.children},Q,0,null),oe=eh(oe,Q,we,null),oe.flags|=2,B.return=x,oe.return=x,B.sibling=oe,x.child=B,(x.mode&1)!==0&&Bd(x,m.child,null,we),x.child.memoizedState=Hf(we),x.memoizedState=qd,oe);if((x.mode&1)===0)return Zf(m,x,we,null);if(Q.data==="$!"){if(B=Q.nextSibling&&Q.nextSibling.dataset,B)var Ze=B.dgst;return B=Ze,oe=Error(n(419)),B=_c(oe,B,void 0),Zf(m,x,we,B)}if(Ze=(we&m.childLanes)!==0,lo||Ze){if(B=Ua,B!==null){switch(we&-we){case 4:Q=2;break;case 16:Q=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:Q=32;break;case 536870912:Q=268435456;break;default:Q=0}Q=(Q&(B.suspendedLanes|we))!==0?0:Q,Q!==0&&Q!==oe.retryLane&&(oe.retryLane=Q,vs(m,Q),Pc(B,m,Q,-1))}return wv(),B=_c(Error(n(421))),Zf(m,x,we,B)}return Q.data==="$?"?(x.flags|=128,x.child=m.child,x=i2.bind(null,m),Q._reactRetry=x,null):(m=oe.treeContext,ka=Zs(Q.nextSibling),Ma=x,si=!0,oo=null,m!==null&&(ms[gs++]=Mo,ms[gs++]=ta,ms[gs++]=ys,Mo=m.id,ta=m.overflow,ys=x),x=dv(x,B.children),x.flags|=4096,x)}function ug(m,x,k){m.lanes|=x;var B=m.alternate;B!==null&&(B.lanes|=x),Jo(m.return,x,k)}function dg(m,x,k,B,Q){var oe=m.memoizedState;oe===null?m.memoizedState={isBackwards:x,rendering:null,renderingStartTime:0,last:B,tail:k,tailMode:Q}:(oe.isBackwards=x,oe.rendering=null,oe.renderingStartTime=0,oe.last=B,oe.tail=k,oe.tailMode=Q)}function hv(m,x,k){var B=x.pendingProps,Q=B.revealOrder,oe=B.tail;if($a(m,x,B.children,k),B=ti.current,(B&2)!==0)B=B&1|2,x.flags|=128;else{if(m!==null&&(m.flags&128)!==0)e:for(m=x.child;m!==null;){if(m.tag===13)m.memoizedState!==null&&ug(m,k,x);else if(m.tag===19)ug(m,k,x);else if(m.child!==null){m.child.return=m,m=m.child;continue}if(m===x)break e;for(;m.sibling===null;){if(m.return===null||m.return===x)break e;m=m.return}m.sibling.return=m.return,m=m.sibling}B&=1}if(Sr(ti,B),(x.mode&1)===0)x.memoizedState=null;else switch(Q){case"forwards":for(k=x.child,Q=null;k!==null;)m=k.alternate,m!==null&&Ku(m)===null&&(Q=k),k=k.sibling;k=Q,k===null?(Q=x.child,x.child=null):(Q=k.sibling,k.sibling=null),dg(x,!1,Q,k,oe);break;case"backwards":for(k=null,Q=x.child,x.child=null;Q!==null;){if(m=Q.alternate,m!==null&&Ku(m)===null){x.child=Q;break}m=Q.sibling,Q.sibling=k,k=Q,Q=m}dg(x,!0,k,null,oe);break;case"together":dg(x,!1,null,null,void 0);break;default:x.memoizedState=null}return x.child}function Qu(m,x){(x.mode&1)===0&&m!==null&&(m.alternate=null,x.alternate=null,x.flags|=2)}function ed(m,x,k){if(m!==null&&(x.dependencies=m.dependencies),Wd|=x.lanes,(k&x.childLanes)===0)return null;if(m!==null&&x.child!==m.child)throw Error(n(153));if(x.child!==null){for(m=x.child,k=id(m,m.pendingProps),x.child=k,k.return=x;m.sibling!==null;)m=m.sibling,k=k.sibling=id(m,m.pendingProps),k.return=x;k.sibling=null}return x.child}function Kf(m,x,k){switch(x.tag){case 3:Wf(x),ou();break;case 5:kl(x);break;case 1:Ba(x.type)&&Ks(x);break;case 4:qh(x,x.stateNode.containerInfo);break;case 10:var B=x.type._context,Q=x.memoizedProps.value;Sr(Gu,B._currentValue),B._currentValue=Q;break;case 13:if(B=x.memoizedState,B!==null)return B.dehydrated!==null?(Sr(ti,ti.current&1),x.flags|=128,null):(k&x.child.childLanes)!==0?uv(m,x,k):(Sr(ti,ti.current&1),m=ed(m,x,k),m!==null?m.sibling:null);Sr(ti,ti.current&1);break;case 19:if(B=(k&x.childLanes)!==0,(m.flags&128)!==0){if(B)return hv(m,x,k);x.flags|=128}if(Q=x.memoizedState,Q!==null&&(Q.rendering=null,Q.tail=null,Q.lastEffect=null),Sr(ti,ti.current),B)break;return null;case 22:case 23:return x.lanes=0,Gf(m,x,k)}return ed(m,x,k)}var Xp,Xf,O0,R0;Xp=function(m,x){for(var k=x.child;k!==null;){if(k.tag===5||k.tag===6)m.appendChild(k.stateNode);else if(k.tag!==4&&k.child!==null){k.child.return=k,k=k.child;continue}if(k===x)break;for(;k.sibling===null;){if(k.return===null||k.return===x)return;k=k.return}k.sibling.return=k.return,k=k.sibling}},Xf=function(){},O0=function(m,x,k,B){var Q=m.memoizedProps;if(Q!==B){m=x.stateNode,jl(Io.current);var oe=null;switch(k){case"input":Q=cn(m,Q),B=cn(m,B),oe=[];break;case"select":Q=Qe({},Q,{value:void 0}),B=Qe({},B,{value:void 0}),oe=[];break;case"textarea":Q=hr(m,Q),B=hr(m,B),oe=[];break;default:typeof Q.onClick!="function"&&typeof B.onClick=="function"&&(m.onclick=Vt)}$e(k,B);var we;k=null;for(Et in Q)if(!B.hasOwnProperty(Et)&&Q.hasOwnProperty(Et)&&Q[Et]!=null)if(Et==="style"){var Ze=Q[Et];for(we in Ze)Ze.hasOwnProperty(we)&&(k||(k={}),k[we]="")}else Et!=="dangerouslySetInnerHTML"&&Et!=="children"&&Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&Et!=="autoFocus"&&(s.hasOwnProperty(Et)?oe||(oe=[]):(oe=oe||[]).push(Et,null));for(Et in B){var ot=B[Et];if(Ze=Q?.[Et],B.hasOwnProperty(Et)&&ot!==Ze&&(ot!=null||Ze!=null))if(Et==="style")if(Ze){for(we in Ze)!Ze.hasOwnProperty(we)||ot&&ot.hasOwnProperty(we)||(k||(k={}),k[we]="");for(we in ot)ot.hasOwnProperty(we)&&Ze[we]!==ot[we]&&(k||(k={}),k[we]=ot[we])}else k||(oe||(oe=[]),oe.push(Et,k)),k=ot;else Et==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,Ze=Ze?Ze.__html:void 0,ot!=null&&Ze!==ot&&(oe=oe||[]).push(Et,ot)):Et==="children"?typeof ot!="string"&&typeof ot!="number"||(oe=oe||[]).push(Et,""+ot):Et!=="suppressContentEditableWarning"&&Et!=="suppressHydrationWarning"&&(s.hasOwnProperty(Et)?(ot!=null&&Et==="onScroll"&&Gr("scroll",m),oe||Ze===ot||(oe=[])):(oe=oe||[]).push(Et,ot))}k&&(oe=oe||[]).push("style",k);var Et=oe;(x.updateQueue=Et)&&(x.flags|=4)}},R0=function(m,x,k,B){k!==B&&(x.flags|=4)};function Yp(m,x){if(!si)switch(m.tailMode){case"hidden":x=m.tail;for(var k=null;x!==null;)x.alternate!==null&&(k=x),x=x.sibling;k===null?m.tail=null:k.sibling=null;break;case"collapsed":k=m.tail;for(var B=null;k!==null;)k.alternate!==null&&(B=k),k=k.sibling;B===null?x||m.tail===null?m.tail=null:m.tail.sibling=null:B.sibling=null}}function Do(m){var x=m.alternate!==null&&m.alternate.child===m.child,k=0,B=0;if(x)for(var Q=m.child;Q!==null;)k|=Q.lanes|Q.childLanes,B|=Q.subtreeFlags&14680064,B|=Q.flags&14680064,Q.return=m,Q=Q.sibling;else for(Q=m.child;Q!==null;)k|=Q.lanes|Q.childLanes,B|=Q.subtreeFlags,B|=Q.flags,Q.return=m,Q=Q.sibling;return m.subtreeFlags|=B,m.childLanes=k,x}function e2(m,x,k){var B=x.pendingProps;switch(iu(x),x.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Do(x),null;case 1:return Ba(x.type)&&Lh(),Do(x),null;case 3:return B=x.stateNode,Ml(),oi(fa),oi(ha),Gh(),B.pendingContext&&(B.context=B.pendingContext,B.pendingContext=null),(m===null||m.child===null)&&(Uu(x)?x.flags|=4:m===null||m.memoizedState.isDehydrated&&(x.flags&256)===0||(x.flags|=1024,oo!==null&&(yg(oo),oo=null))),Xf(m,x),Do(x),null;case 5:Ud(x);var Q=jl(Zu.current);if(k=x.type,m!==null&&x.stateNode!=null)O0(m,x,k,B,Q),m.ref!==x.ref&&(x.flags|=512,x.flags|=2097152);else{if(!B){if(x.stateNode===null)throw Error(n(166));return Do(x),null}if(m=jl(Io.current),Uu(x)){B=x.stateNode,k=x.type;var oe=x.memoizedProps;switch(B[da]=x,B[Ui]=oe,m=(x.mode&1)!==0,k){case"dialog":Gr("cancel",B),Gr("close",B);break;case"iframe":case"object":case"embed":Gr("load",B);break;case"video":case"audio":for(Q=0;Q<Qc.length;Q++)Gr(Qc[Q],B);break;case"source":Gr("error",B);break;case"img":case"image":case"link":Gr("error",B),Gr("load",B);break;case"details":Gr("toggle",B);break;case"input":Hn(B,oe),Gr("invalid",B);break;case"select":B._wrapperState={wasMultiple:!!oe.multiple},Gr("invalid",B);break;case"textarea":ri(B,oe),Gr("invalid",B)}$e(k,oe),Q=null;for(var we in oe)if(oe.hasOwnProperty(we)){var Ze=oe[we];we==="children"?typeof Ze=="string"?B.textContent!==Ze&&(oe.suppressHydrationWarning!==!0&&Pt(B.textContent,Ze,m),Q=["children",Ze]):typeof Ze=="number"&&B.textContent!==""+Ze&&(oe.suppressHydrationWarning!==!0&&Pt(B.textContent,Ze,m),Q=["children",""+Ze]):s.hasOwnProperty(we)&&Ze!=null&&we==="onScroll"&&Gr("scroll",B)}switch(k){case"input":Ut(B),Nr(B,oe,!0);break;case"textarea":Ut(B),_i(B);break;case"select":case"option":break;default:typeof oe.onClick=="function"&&(B.onclick=Vt)}B=Q,x.updateQueue=B,B!==null&&(x.flags|=4)}else{we=Q.nodeType===9?Q:Q.ownerDocument,m==="http://www.w3.org/1999/xhtml"&&(m=Sa(k)),m==="http://www.w3.org/1999/xhtml"?k==="script"?(m=we.createElement("div"),m.innerHTML="<script><\/script>",m=m.removeChild(m.firstChild)):typeof B.is=="string"?m=we.createElement(k,{is:B.is}):(m=we.createElement(k),k==="select"&&(we=m,B.multiple?we.multiple=!0:B.size&&(we.size=B.size))):m=we.createElementNS(m,k),m[da]=x,m[Ui]=B,Xp(m,x,!1,!1),x.stateNode=m;e:{switch(we=ct(k,B),k){case"dialog":Gr("cancel",m),Gr("close",m),Q=B;break;case"iframe":case"object":case"embed":Gr("load",m),Q=B;break;case"video":case"audio":for(Q=0;Q<Qc.length;Q++)Gr(Qc[Q],m);Q=B;break;case"source":Gr("error",m),Q=B;break;case"img":case"image":case"link":Gr("error",m),Gr("load",m),Q=B;break;case"details":Gr("toggle",m),Q=B;break;case"input":Hn(m,B),Q=cn(m,B),Gr("invalid",m);break;case"option":Q=B;break;case"select":m._wrapperState={wasMultiple:!!B.multiple},Q=Qe({},B,{value:void 0}),Gr("invalid",m);break;case"textarea":ri(m,B),Q=hr(m,B),Gr("invalid",m);break;default:Q=B}$e(k,Q),Ze=Q;for(oe in Ze)if(Ze.hasOwnProperty(oe)){var ot=Ze[oe];oe==="style"?ve(m,ot):oe==="dangerouslySetInnerHTML"?(ot=ot?ot.__html:void 0,ot!=null&&Ya(m,ot)):oe==="children"?typeof ot=="string"?(k!=="textarea"||ot!=="")&&gi(m,ot):typeof ot=="number"&&gi(m,""+ot):oe!=="suppressContentEditableWarning"&&oe!=="suppressHydrationWarning"&&oe!=="autoFocus"&&(s.hasOwnProperty(oe)?ot!=null&&oe==="onScroll"&&Gr("scroll",m):ot!=null&&te(m,oe,ot,we))}switch(k){case"input":Ut(m),Nr(m,B,!1);break;case"textarea":Ut(m),_i(m);break;case"option":B.value!=null&&m.setAttribute("value",""+Ot(B.value));break;case"select":m.multiple=!!B.multiple,oe=B.value,oe!=null?Br(m,!!B.multiple,oe,!1):B.defaultValue!=null&&Br(m,!!B.multiple,B.defaultValue,!0);break;default:typeof Q.onClick=="function"&&(m.onclick=Vt)}switch(k){case"button":case"input":case"select":case"textarea":B=!!B.autoFocus;break e;case"img":B=!0;break e;default:B=!1}}B&&(x.flags|=4)}x.ref!==null&&(x.flags|=512,x.flags|=2097152)}return Do(x),null;case 6:if(m&&x.stateNode!=null)R0(m,x,m.memoizedProps,B);else{if(typeof B!="string"&&x.stateNode===null)throw Error(n(166));if(k=jl(Zu.current),jl(Io.current),Uu(x)){if(B=x.stateNode,k=x.memoizedProps,B[da]=x,(oe=B.nodeValue!==k)&&(m=Ma,m!==null))switch(m.tag){case 3:Pt(B.nodeValue,k,(m.mode&1)!==0);break;case 5:m.memoizedProps.suppressHydrationWarning!==!0&&Pt(B.nodeValue,k,(m.mode&1)!==0)}oe&&(x.flags|=4)}else B=(k.nodeType===9?k:k.ownerDocument).createTextNode(B),B[da]=x,x.stateNode=B}return Do(x),null;case 13:if(oi(ti),B=x.memoizedState,m===null||m.memoizedState!==null&&m.memoizedState.dehydrated!==null){if(si&&ka!==null&&(x.mode&1)!==0&&(x.flags&128)===0)Hp(),ou(),x.flags|=98560,oe=!1;else if(oe=Uu(x),B!==null&&B.dehydrated!==null){if(m===null){if(!oe)throw Error(n(318));if(oe=x.memoizedState,oe=oe!==null?oe.dehydrated:null,!oe)throw Error(n(317));oe[da]=x}else ou(),(x.flags&128)===0&&(x.memoizedState=null),x.flags|=4;Do(x),oe=!1}else oo!==null&&(yg(oo),oo=null),oe=!0;if(!oe)return x.flags&65536?x:null}return(x.flags&128)!==0?(x.lanes=k,x):(B=B!==null,B!==(m!==null&&m.memoizedState!==null)&&B&&(x.child.flags|=8192,(x.mode&1)!==0&&(m===null||(ti.current&1)!==0?ia===0&&(ia=3):wv())),x.updateQueue!==null&&(x.flags|=4),Do(x),null);case 4:return Ml(),Xf(m,x),m===null&&Sl(x.stateNode.containerInfo),Do(x),null;case 10:return Vf(x.type._context),Do(x),null;case 17:return Ba(x.type)&&Lh(),Do(x),null;case 19:if(oi(ti),oe=x.memoizedState,oe===null)return Do(x),null;if(B=(x.flags&128)!==0,we=oe.rendering,we===null)if(B)Yp(oe,!1);else{if(ia!==0||m!==null&&(m.flags&128)!==0)for(m=x.child;m!==null;){if(we=Ku(m),we!==null){for(x.flags|=128,Yp(oe,!1),B=we.updateQueue,B!==null&&(x.updateQueue=B,x.flags|=4),x.subtreeFlags=0,B=k,k=x.child;k!==null;)oe=k,m=B,oe.flags&=14680066,we=oe.alternate,we===null?(oe.childLanes=0,oe.lanes=m,oe.child=null,oe.subtreeFlags=0,oe.memoizedProps=null,oe.memoizedState=null,oe.updateQueue=null,oe.dependencies=null,oe.stateNode=null):(oe.childLanes=we.childLanes,oe.lanes=we.lanes,oe.child=we.child,oe.subtreeFlags=0,oe.deletions=null,oe.memoizedProps=we.memoizedProps,oe.memoizedState=we.memoizedState,oe.updateQueue=we.updateQueue,oe.type=we.type,m=we.dependencies,oe.dependencies=m===null?null:{lanes:m.lanes,firstContext:m.firstContext}),k=k.sibling;return Sr(ti,ti.current&1|2),x.child}m=m.sibling}oe.tail!==null&&Xr()>td&&(x.flags|=128,B=!0,Yp(oe,!1),x.lanes=4194304)}else{if(!B)if(m=Ku(we),m!==null){if(x.flags|=128,B=!0,k=m.updateQueue,k!==null&&(x.updateQueue=k,x.flags|=4),Yp(oe,!0),oe.tail===null&&oe.tailMode==="hidden"&&!we.alternate&&!si)return Do(x),null}else 2*Xr()-oe.renderingStartTime>td&&k!==1073741824&&(x.flags|=128,B=!0,Yp(oe,!1),x.lanes=4194304);oe.isBackwards?(we.sibling=x.child,x.child=we):(k=oe.last,k!==null?k.sibling=we:x.child=we,oe.last=we)}return oe.tail!==null?(x=oe.tail,oe.rendering=x,oe.tail=x.sibling,oe.renderingStartTime=Xr(),x.sibling=null,k=ti.current,Sr(ti,B?k&1|2:k&1),x):(Do(x),null);case 22:case 23:return _v(),B=x.memoizedState!==null,m!==null&&m.memoizedState!==null!==B&&(x.flags|=8192),B&&(x.mode&1)!==0?(el&1073741824)!==0&&(Do(x),x.subtreeFlags&6&&(x.flags|=8192)):Do(x),null;case 24:return null;case 25:return null}throw Error(n(156,x.tag))}function L0(m,x){switch(iu(x),x.tag){case 1:return Ba(x.type)&&Lh(),m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 3:return Ml(),oi(fa),oi(ha),Gh(),m=x.flags,(m&65536)!==0&&(m&128)===0?(x.flags=m&-65537|128,x):null;case 5:return Ud(x),null;case 13:if(oi(ti),m=x.memoizedState,m!==null&&m.dehydrated!==null){if(x.alternate===null)throw Error(n(340));ou()}return m=x.flags,m&65536?(x.flags=m&-65537|128,x):null;case 19:return oi(ti),null;case 4:return Ml(),null;case 10:return Vf(x.type._context),null;case 22:case 23:return _v(),null;case 24:return null;default:return null}}var Yf=!1,co=!1,z0=typeof WeakSet=="function"?WeakSet:Set,xn=null;function Jf(m,x){var k=m.ref;if(k!==null)if(typeof k=="function")try{k(null)}catch(B){Ri(m,x,B)}else k.current=null}function hg(m,x,k){try{k()}catch(B){Ri(m,x,B)}}var fv=!1;function t2(m,x){if(sn=fl,m=Nh(),vr(m)){if("selectionStart"in m)var k={start:m.selectionStart,end:m.selectionEnd};else e:{k=(k=m.ownerDocument)&&k.defaultView||window;var B=k.getSelection&&k.getSelection();if(B&&B.rangeCount!==0){k=B.anchorNode;var Q=B.anchorOffset,oe=B.focusNode;B=B.focusOffset;try{k.nodeType,oe.nodeType}catch{k=null;break e}var we=0,Ze=-1,ot=-1,Et=0,Zt=0,Xt=m,Wt=null;t:for(;;){for(var yn;Xt!==k||Q!==0&&Xt.nodeType!==3||(Ze=we+Q),Xt!==oe||B!==0&&Xt.nodeType!==3||(ot=we+B),Xt.nodeType===3&&(we+=Xt.nodeValue.length),(yn=Xt.firstChild)!==null;)Wt=Xt,Xt=yn;for(;;){if(Xt===m)break t;if(Wt===k&&++Et===Q&&(Ze=we),Wt===oe&&++Zt===B&&(ot=we),(yn=Xt.nextSibling)!==null)break;Xt=Wt,Wt=Xt.parentNode}Xt=yn}k=Ze===-1||ot===-1?null:{start:Ze,end:ot}}else k=null}k=k||{start:0,end:0}}else k=null;for(On={focusedElem:m,selectionRange:k},fl=!1,xn=x;xn!==null;)if(x=xn,m=x.child,(x.subtreeFlags&1028)!==0&&m!==null)m.return=x,xn=m;else for(;xn!==null;){x=xn;try{var wn=x.alternate;if((x.flags&1024)!==0)switch(x.tag){case 0:case 11:case 15:break;case 1:if(wn!==null){var Pn=wn.memoizedProps,Li=wn.memoizedState,_t=x.stateNode,lt=_t.getSnapshotBeforeUpdate(x.elementType===x.type?Pn:Ar(x.type,Pn),Li);_t.__reactInternalSnapshotBeforeUpdate=lt}break;case 3:var wt=x.stateNode.containerInfo;wt.nodeType===1?wt.textContent="":wt.nodeType===9&&wt.documentElement&&wt.removeChild(wt.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(n(163))}}catch(Jt){Ri(x,x.return,Jt)}if(m=x.sibling,m!==null){m.return=x.return,xn=m;break}xn=x.return}return wn=fv,fv=!1,wn}function Zh(m,x,k){var B=x.updateQueue;if(B=B!==null?B.lastEffect:null,B!==null){var Q=B=B.next;do{if((Q.tag&m)===m){var oe=Q.destroy;Q.destroy=void 0,oe!==void 0&&hg(x,k,oe)}Q=Q.next}while(Q!==B)}}function Jp(m,x){if(x=x.updateQueue,x=x!==null?x.lastEffect:null,x!==null){var k=x=x.next;do{if((k.tag&m)===m){var B=k.create;k.destroy=B()}k=k.next}while(k!==x)}}function Qp(m){var x=m.ref;if(x!==null){var k=m.stateNode;switch(m.tag){case 5:m=k;break;default:m=k}typeof x=="function"?x(m):x.current=m}}function Qf(m){var x=m.alternate;x!==null&&(m.alternate=null,Qf(x)),m.child=null,m.deletions=null,m.sibling=null,m.tag===5&&(x=m.stateNode,x!==null&&(delete x[da],delete x[Ui],delete x[hs],delete x[Fd],delete x[Tl])),m.stateNode=null,m.return=null,m.dependencies=null,m.memoizedProps=null,m.memoizedState=null,m.pendingProps=null,m.stateNode=null,m.updateQueue=null}function Oo(m){return m.tag===5||m.tag===3||m.tag===4}function pv(m){e:for(;;){for(;m.sibling===null;){if(m.return===null||Oo(m.return))return null;m=m.return}for(m.sibling.return=m.return,m=m.sibling;m.tag!==5&&m.tag!==6&&m.tag!==18;){if(m.flags&2||m.child===null||m.tag===4)continue e;m.child.return=m,m=m.child}if(!(m.flags&2))return m.stateNode}}function em(m,x,k){var B=m.tag;if(B===5||B===6)m=m.stateNode,x?k.nodeType===8?k.parentNode.insertBefore(m,x):k.insertBefore(m,x):(k.nodeType===8?(x=k.parentNode,x.insertBefore(m,k)):(x=k,x.appendChild(m)),k=k._reactRootContainer,k!=null||x.onclick!==null||(x.onclick=Vt));else if(B!==4&&(m=m.child,m!==null))for(em(m,x,k),m=m.sibling;m!==null;)em(m,x,k),m=m.sibling}function mv(m,x,k){var B=m.tag;if(B===5||B===6)m=m.stateNode,x?k.insertBefore(m,x):k.appendChild(m);else if(B!==4&&(m=m.child,m!==null))for(mv(m,x,k),m=m.sibling;m!==null;)mv(m,x,k),m=m.sibling}var Va=null,Sc=!1;function Gd(m,x,k){for(k=k.child;k!==null;)gv(m,x,k),k=k.sibling}function gv(m,x,k){if(Xi&&typeof Xi.onCommitFiberUnmount=="function")try{Xi.onCommitFiberUnmount(ks,k)}catch{}switch(k.tag){case 5:co||Jf(k,x);case 6:var B=Va,Q=Sc;Va=null,Gd(m,x,k),Va=B,Sc=Q,Va!==null&&(Sc?(m=Va,k=k.stateNode,m.nodeType===8?m.parentNode.removeChild(k):m.removeChild(k)):Va.removeChild(k.stateNode));break;case 18:Va!==null&&(Sc?(m=Va,k=k.stateNode,m.nodeType===8?eu(m.parentNode,k):m.nodeType===1&&eu(m,k),Qi(m)):eu(Va,k.stateNode));break;case 4:B=Va,Q=Sc,Va=k.stateNode.containerInfo,Sc=!0,Gd(m,x,k),Va=B,Sc=Q;break;case 0:case 11:case 14:case 15:if(!co&&(B=k.updateQueue,B!==null&&(B=B.lastEffect,B!==null))){Q=B=B.next;do{var oe=Q,we=oe.destroy;oe=oe.tag,we!==void 0&&((oe&2)!==0||(oe&4)!==0)&&hg(k,x,we),Q=Q.next}while(Q!==B)}Gd(m,x,k);break;case 1:if(!co&&(Jf(k,x),B=k.stateNode,typeof B.componentWillUnmount=="function"))try{B.props=k.memoizedProps,B.state=k.memoizedState,B.componentWillUnmount()}catch(Ze){Ri(k,x,Ze)}Gd(m,x,k);break;case 21:Gd(m,x,k);break;case 22:k.mode&1?(co=(B=co)||k.memoizedState!==null,Gd(m,x,k),co=B):Gd(m,x,k);break;default:Gd(m,x,k)}}function F0(m){var x=m.updateQueue;if(x!==null){m.updateQueue=null;var k=m.stateNode;k===null&&(k=m.stateNode=new z0),x.forEach(function(B){var Q=im.bind(null,m,B);k.has(B)||(k.add(B),B.then(Q,Q))})}}function Qs(m,x){var k=x.deletions;if(k!==null)for(var B=0;B<k.length;B++){var Q=k[B];try{var oe=m,we=x,Ze=we;e:for(;Ze!==null;){switch(Ze.tag){case 5:Va=Ze.stateNode,Sc=!1;break e;case 3:Va=Ze.stateNode.containerInfo,Sc=!0;break e;case 4:Va=Ze.stateNode.containerInfo,Sc=!0;break e}Ze=Ze.return}if(Va===null)throw Error(n(160));gv(oe,we,Q),Va=null,Sc=!1;var ot=Q.alternate;ot!==null&&(ot.return=null),Q.return=null}catch(Et){Ri(Q,x,Et)}}if(x.subtreeFlags&12854)for(x=x.child;x!==null;)yv(x,m),x=x.sibling}function yv(m,x){var k=m.alternate,B=m.flags;switch(m.tag){case 0:case 11:case 14:case 15:if(Qs(x,m),Tc(m),B&4){try{Zh(3,m,m.return),Jp(3,m)}catch(Pn){Ri(m,m.return,Pn)}try{Zh(5,m,m.return)}catch(Pn){Ri(m,m.return,Pn)}}break;case 1:Qs(x,m),Tc(m),B&512&&k!==null&&Jf(k,k.return);break;case 5:if(Qs(x,m),Tc(m),B&512&&k!==null&&Jf(k,k.return),m.flags&32){var Q=m.stateNode;try{gi(Q,"")}catch(Pn){Ri(m,m.return,Pn)}}if(B&4&&(Q=m.stateNode,Q!=null)){var oe=m.memoizedProps,we=k!==null?k.memoizedProps:oe,Ze=m.type,ot=m.updateQueue;if(m.updateQueue=null,ot!==null)try{Ze==="input"&&oe.type==="radio"&&oe.name!=null&&Gn(Q,oe),ct(Ze,we);var Et=ct(Ze,oe);for(we=0;we<ot.length;we+=2){var Zt=ot[we],Xt=ot[we+1];Zt==="style"?ve(Q,Xt):Zt==="dangerouslySetInnerHTML"?Ya(Q,Xt):Zt==="children"?gi(Q,Xt):te(Q,Zt,Xt,Et)}switch(Ze){case"input":Mn(Q,oe);break;case"textarea":wa(Q,oe);break;case"select":var Wt=Q._wrapperState.wasMultiple;Q._wrapperState.wasMultiple=!!oe.multiple;var yn=oe.value;yn!=null?Br(Q,!!oe.multiple,yn,!1):Wt!==!!oe.multiple&&(oe.defaultValue!=null?Br(Q,!!oe.multiple,oe.defaultValue,!0):Br(Q,!!oe.multiple,oe.multiple?[]:"",!1))}Q[Ui]=oe}catch(Pn){Ri(m,m.return,Pn)}}break;case 6:if(Qs(x,m),Tc(m),B&4){if(m.stateNode===null)throw Error(n(162));Q=m.stateNode,oe=m.memoizedProps;try{Q.nodeValue=oe}catch(Pn){Ri(m,m.return,Pn)}}break;case 3:if(Qs(x,m),Tc(m),B&4&&k!==null&&k.memoizedState.isDehydrated)try{Qi(x.containerInfo)}catch(Pn){Ri(m,m.return,Pn)}break;case 4:Qs(x,m),Tc(m);break;case 13:Qs(x,m),Tc(m),Q=m.child,Q.flags&8192&&(oe=Q.memoizedState!==null,Q.stateNode.isHidden=oe,!oe||Q.alternate!==null&&Q.alternate.memoizedState!==null||(pg=Xr())),B&4&&F0(m);break;case 22:if(Zt=k!==null&&k.memoizedState!==null,m.mode&1?(co=(Et=co)||Zt,Qs(x,m),co=Et):Qs(x,m),Tc(m),B&8192){if(Et=m.memoizedState!==null,(m.stateNode.isHidden=Et)&&!Zt&&(m.mode&1)!==0)for(xn=m,Zt=m.child;Zt!==null;){for(Xt=xn=Zt;xn!==null;){switch(Wt=xn,yn=Wt.child,Wt.tag){case 0:case 11:case 14:case 15:Zh(4,Wt,Wt.return);break;case 1:Jf(Wt,Wt.return);var wn=Wt.stateNode;if(typeof wn.componentWillUnmount=="function"){B=Wt,k=Wt.return;try{x=B,wn.props=x.memoizedProps,wn.state=x.memoizedState,wn.componentWillUnmount()}catch(Pn){Ri(B,k,Pn)}}break;case 5:Jf(Wt,Wt.return);break;case 22:if(Wt.memoizedState!==null){tm(Xt);continue}}yn!==null?(yn.return=Wt,xn=yn):tm(Xt)}Zt=Zt.sibling}e:for(Zt=null,Xt=m;;){if(Xt.tag===5){if(Zt===null){Zt=Xt;try{Q=Xt.stateNode,Et?(oe=Q.style,typeof oe.setProperty=="function"?oe.setProperty("display","none","important"):oe.display="none"):(Ze=Xt.stateNode,ot=Xt.memoizedProps.style,we=ot!=null&&ot.hasOwnProperty("display")?ot.display:null,Ze.style.display=ue("display",we))}catch(Pn){Ri(m,m.return,Pn)}}}else if(Xt.tag===6){if(Zt===null)try{Xt.stateNode.nodeValue=Et?"":Xt.memoizedProps}catch(Pn){Ri(m,m.return,Pn)}}else if((Xt.tag!==22&&Xt.tag!==23||Xt.memoizedState===null||Xt===m)&&Xt.child!==null){Xt.child.return=Xt,Xt=Xt.child;continue}if(Xt===m)break e;for(;Xt.sibling===null;){if(Xt.return===null||Xt.return===m)break e;Zt===Xt&&(Zt=null),Xt=Xt.return}Zt===Xt&&(Zt=null),Xt.sibling.return=Xt.return,Xt=Xt.sibling}}break;case 19:Qs(x,m),Tc(m),B&4&&F0(m);break;case 21:break;default:Qs(x,m),Tc(m)}}function Tc(m){var x=m.flags;if(x&2){try{e:{for(var k=m.return;k!==null;){if(Oo(k)){var B=k;break e}k=k.return}throw Error(n(160))}switch(B.tag){case 5:var Q=B.stateNode;B.flags&32&&(gi(Q,""),B.flags&=-33);var oe=pv(m);mv(m,oe,Q);break;case 3:case 4:var we=B.stateNode.containerInfo,Ze=pv(m);em(m,Ze,we);break;default:throw Error(n(161))}}catch(ot){Ri(m,m.return,ot)}m.flags&=-3}x&4096&&(m.flags&=-4097)}function n2(m,x,k){xn=m,B0(m)}function B0(m,x,k){for(var B=(m.mode&1)!==0;xn!==null;){var Q=xn,oe=Q.child;if(Q.tag===22&&B){var we=Q.memoizedState!==null||Yf;if(!we){var Ze=Q.alternate,ot=Ze!==null&&Ze.memoizedState!==null||co;Ze=Yf;var Et=co;if(Yf=we,(co=ot)&&!Et)for(xn=Q;xn!==null;)we=xn,ot=we.child,we.tag===22&&we.memoizedState!==null?fg(Q):ot!==null?(ot.return=we,xn=ot):fg(Q);for(;oe!==null;)xn=oe,B0(oe),oe=oe.sibling;xn=Q,Yf=Ze,co=Et}$0(m)}else(Q.subtreeFlags&8772)!==0&&oe!==null?(oe.return=Q,xn=oe):$0(m)}}function $0(m){for(;xn!==null;){var x=xn;if((x.flags&8772)!==0){var k=x.alternate;try{if((x.flags&8772)!==0)switch(x.tag){case 0:case 11:case 15:co||Jp(5,x);break;case 1:var B=x.stateNode;if(x.flags&4&&!co)if(k===null)B.componentDidMount();else{var Q=x.elementType===x.type?k.memoizedProps:Ar(x.type,k.memoizedProps);B.componentDidUpdate(Q,k.memoizedState,B.__reactInternalSnapshotBeforeUpdate)}var oe=x.updateQueue;oe!==null&&Pi(x,oe,B);break;case 3:var we=x.updateQueue;if(we!==null){if(k=null,x.child!==null)switch(x.child.tag){case 5:k=x.child.stateNode;break;case 1:k=x.child.stateNode}Pi(x,we,k)}break;case 5:var Ze=x.stateNode;if(k===null&&x.flags&4){k=Ze;var ot=x.memoizedProps;switch(x.type){case"button":case"input":case"select":case"textarea":ot.autoFocus&&k.focus();break;case"img":ot.src&&(k.src=ot.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(x.memoizedState===null){var Et=x.alternate;if(Et!==null){var Zt=Et.memoizedState;if(Zt!==null){var Xt=Zt.dehydrated;Xt!==null&&Qi(Xt)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(n(163))}co||x.flags&512&&Qp(x)}catch(Wt){Ri(x,x.return,Wt)}}if(x===m){xn=null;break}if(k=x.sibling,k!==null){k.return=x.return,xn=k;break}xn=x.return}}function tm(m){for(;xn!==null;){var x=xn;if(x===m){xn=null;break}var k=x.sibling;if(k!==null){k.return=x.return,xn=k;break}xn=x.return}}function fg(m){for(;xn!==null;){var x=xn;try{switch(x.tag){case 0:case 11:case 15:var k=x.return;try{Jp(4,x)}catch(ot){Ri(x,k,ot)}break;case 1:var B=x.stateNode;if(typeof B.componentDidMount=="function"){var Q=x.return;try{B.componentDidMount()}catch(ot){Ri(x,Q,ot)}}var oe=x.return;try{Qp(x)}catch(ot){Ri(x,oe,ot)}break;case 5:var we=x.return;try{Qp(x)}catch(ot){Ri(x,we,ot)}}}catch(ot){Ri(x,x.return,ot)}if(x===m){xn=null;break}var Ze=x.sibling;if(Ze!==null){Ze.return=x.return,xn=Ze;break}xn=x.return}}var V0=Math.ceil,hu=ne.ReactCurrentDispatcher,Kh=ne.ReactCurrentOwner,Rl=ne.ReactCurrentBatchConfig,kr=0,Ua=null,ma=null,uo=0,el=0,ep=pc(0),ia=0,nm=null,Wd=0,Hd=0,vv=0,mi=null,Ia=null,pg=0,td=1/0,Ll=null,Zd=!1,mg=null,nd=null,Kd=!1,fu=null,rd=0,Xd=0,Yd=null,Jd=-1,gg=0;function Ro(){return(kr&6)!==0?Xr():Jd!==-1?Jd:Jd=Xr()}function bs(m){return(m.mode&1)===0?1:(kr&2)!==0&&uo!==0?uo&-uo:Zp.transition!==null?(gg===0&&(gg=kd()),gg):(m=pr,m!==0||(m=window.event,m=m===void 0?16:nr(m.type)),m)}function Pc(m,x,k,B){if(50<Xd)throw Xd=0,Yd=null,Error(n(185));Ja(m,k,B),((kr&2)===0||m!==Ua)&&(m===Ua&&((kr&2)===0&&(Hd|=k),ia===4&&Qd(m,uo)),Qo(m,B),k===1&&kr===0&&(x.mode&1)===0&&(td=Xr()+500,jo&&ps()))}function Qo(m,x){var k=m.callbackNode;ku(m,x);var B=Yr(m,m===Ua?uo:0);if(B===0)k!==null&&Zl(k),m.callbackNode=null,m.callbackPriority=0;else if(x=B&-B,m.callbackPriority!==x){if(k!=null&&Zl(k),x===1)m.tag===0?cv(q0.bind(null,m)):fs(q0.bind(null,m)),ja(function(){(kr&6)===0&&ps()}),k=null;else{switch(Ns(B)){case 1:k=Kl;break;case 4:k=sa;break;case 16:k=xr;break;case 536870912:k=Go;break;default:k=xr}k=Y0(k,tp.bind(null,m))}m.callbackPriority=x,m.callbackNode=k}}function tp(m,x){if(Jd=-1,gg=0,(kr&6)!==0)throw Error(n(327));var k=m.callbackNode;if(np()&&m.callbackNode!==k)return null;var B=Yr(m,m===Ua?uo:0);if(B===0)return null;if((B&30)!==0||(B&m.expiredLanes)!==0||x)x=vg(m,B);else{x=B;var Q=kr;kr|=2;var oe=bv();(Ua!==m||uo!==x)&&(Ll=null,td=Xr()+500,Ac(m,x));do try{W0();break}catch(Ze){G0(m,Ze)}while(!0);$f(),hu.current=oe,kr=Q,ma!==null?x=0:(Ua=null,uo=0,x=ia)}if(x!==0){if(x===2&&(Q=Yi(m),Q!==0&&(B=Q,x=rm(m,Q))),x===1)throw k=nm,Ac(m,0),Qd(m,B),Qo(m,Xr()),k;if(x===6)Qd(m,B);else{if(Q=m.current.alternate,(B&30)===0&&!U0(Q)&&(x=vg(m,B),x===2&&(oe=Yi(m),oe!==0&&(B=oe,x=rm(m,oe))),x===1))throw k=nm,Ac(m,0),Qd(m,B),Qo(m,Xr()),k;switch(m.finishedWork=Q,m.finishedLanes=B,x){case 0:case 1:throw Error(n(345));case 2:Cc(m,Ia,Ll);break;case 3:if(Qd(m,B),(B&130023424)===B&&(x=pg+500-Xr(),10<x)){if(Yr(m,0)!==0)break;if(Q=m.suspendedLanes,(Q&B)!==B){Ro(),m.pingedLanes|=m.suspendedLanes&Q;break}m.timeoutHandle=wi(Cc.bind(null,m,Ia,Ll),x);break}Cc(m,Ia,Ll);break;case 4:if(Qd(m,B),(B&4194240)===B)break;for(x=m.eventTimes,Q=-1;0<B;){var we=31-Yn(B);oe=1<<we,we=x[we],we>Q&&(Q=we),B&=~oe}if(B=Q,B=Xr()-B,B=(120>B?120:480>B?480:1080>B?1080:1920>B?1920:3e3>B?3e3:4320>B?4320:1960*V0(B/1960))-B,10<B){m.timeoutHandle=wi(Cc.bind(null,m,Ia,Ll),B);break}Cc(m,Ia,Ll);break;case 5:Cc(m,Ia,Ll);break;default:throw Error(n(329))}}}return Qo(m,Xr()),m.callbackNode===k?tp.bind(null,m):null}function rm(m,x){var k=mi;return m.current.memoizedState.isDehydrated&&(Ac(m,x).flags|=256),m=vg(m,x),m!==2&&(x=Ia,Ia=k,x!==null&&yg(x)),m}function yg(m){Ia===null?Ia=m:Ia.push.apply(Ia,m)}function U0(m){for(var x=m;;){if(x.flags&16384){var k=x.updateQueue;if(k!==null&&(k=k.stores,k!==null))for(var B=0;B<k.length;B++){var Q=k[B],oe=Q.getSnapshot;Q=Q.value;try{if(!Zo(oe(),Q))return!1}catch{return!1}}}if(k=x.child,x.subtreeFlags&16384&&k!==null)k.return=x,x=k;else{if(x===m)break;for(;x.sibling===null;){if(x.return===null||x.return===m)return!0;x=x.return}x.sibling.return=x.return,x=x.sibling}}return!0}function Qd(m,x){for(x&=~vv,x&=~Hd,m.suspendedLanes|=x,m.pingedLanes&=~x,m=m.expirationTimes;0<x;){var k=31-Yn(x),B=1<<k;m[k]=-1,x&=~B}}function q0(m){if((kr&6)!==0)throw Error(n(327));np();var x=Yr(m,0);if((x&1)===0)return Qo(m,Xr()),null;var k=vg(m,x);if(m.tag!==0&&k===2){var B=Yi(m);B!==0&&(x=B,k=rm(m,B))}if(k===1)throw k=nm,Ac(m,0),Qd(m,x),Qo(m,Xr()),k;if(k===6)throw Error(n(345));return m.finishedWork=m.current.alternate,m.finishedLanes=x,Cc(m,Ia,Ll),Qo(m,Xr()),null}function xv(m,x){var k=kr;kr|=1;try{return m(x)}finally{kr=k,kr===0&&(td=Xr()+500,jo&&ps())}}function Xh(m){fu!==null&&fu.tag===0&&(kr&6)===0&&np();var x=kr;kr|=1;var k=Rl.transition,B=pr;try{if(Rl.transition=null,pr=1,m)return m()}finally{pr=B,Rl.transition=k,kr=x,(kr&6)===0&&ps()}}function _v(){el=ep.current,oi(ep)}function Ac(m,x){m.finishedWork=null,m.finishedLanes=0;var k=m.timeoutHandle;if(k!==-1&&(m.timeoutHandle=-1,Si(k)),ma!==null)for(k=ma.return;k!==null;){var B=k;switch(iu(B),B.tag){case 1:B=B.type.childContextTypes,B!=null&&Lh();break;case 3:Ml(),oi(fa),oi(ha),Gh();break;case 5:Ud(B);break;case 4:Ml();break;case 13:oi(ti);break;case 19:oi(ti);break;case 10:Vf(B.type._context);break;case 22:case 23:_v()}k=k.return}if(Ua=m,ma=m=id(m.current,null),uo=el=x,ia=0,nm=null,vv=Hd=Wd=0,Ia=mi=null,vn!==null){for(x=0;x<vn.length;x++)if(k=vn[x],B=k.interleaved,B!==null){k.interleaved=null;var Q=B.next,oe=k.pending;if(oe!==null){var we=oe.next;oe.next=Q,B.next=we}k.pending=B}vn=null}return m}function G0(m,x){do{var k=ma;try{if($f(),gc.current=ui,Yu){for(var B=ni.memoizedState;B!==null;){var Q=B.queue;Q!==null&&(Q.pending=null),B=B.next}Yu=!1}if(vc=0,Gi=fi=ni=null,uu=!1,Ju=0,Kh.current=null,k===null||k.return===null){ia=1,nm=x,ma=null;break}e:{var oe=m,we=k.return,Ze=k,ot=x;if(x=uo,Ze.flags|=32768,ot!==null&&typeof ot=="object"&&typeof ot.then=="function"){var Et=ot,Zt=Ze,Xt=Zt.tag;if((Zt.mode&1)===0&&(Xt===0||Xt===11||Xt===15)){var Wt=Zt.alternate;Wt?(Zt.updateQueue=Wt.updateQueue,Zt.memoizedState=Wt.memoizedState,Zt.lanes=Wt.lanes):(Zt.updateQueue=null,Zt.memoizedState=null)}var yn=Ur(we);if(yn!==null){yn.flags&=-257,Wi(yn,we,Ze,oe,x),yn.mode&1&&Wr(oe,Et,x),x=yn,ot=Et;var wn=x.updateQueue;if(wn===null){var Pn=new Set;Pn.add(ot),x.updateQueue=Pn}else wn.add(ot);break e}else{if((x&1)===0){Wr(oe,Et,x),wv();break e}ot=Error(n(426))}}else if(si&&Ze.mode&1){var Li=Ur(we);if(Li!==null){(Li.flags&65536)===0&&(Li.flags|=256),Wi(Li,we,Ze,oe,x),Ff(Nl(ot,Ze));break e}}oe=ot=Nl(ot,Ze),ia!==4&&(ia=2),mi===null?mi=[oe]:mi.push(oe),oe=we;do{switch(oe.tag){case 3:oe.flags|=65536,x&=-x,oe.lanes|=x;var _t=xs(oe,ot,x);Vd(oe,_t);break e;case 1:Ze=ot;var lt=oe.type,wt=oe.stateNode;if((oe.flags&128)===0&&(typeof lt.getDerivedStateFromError=="function"||wt!==null&&typeof wt.componentDidCatch=="function"&&(nd===null||!nd.has(wt)))){oe.flags|=65536,x&=-x,oe.lanes|=x;var Jt=_s(oe,Ze,x);Vd(oe,Jt);break e}}oe=oe.return}while(oe!==null)}xg(k)}catch(kn){x=kn,ma===k&&k!==null&&(ma=k=k.return);continue}break}while(!0)}function bv(){var m=hu.current;return hu.current=ui,m===null?ui:m}function wv(){(ia===0||ia===3||ia===2)&&(ia=4),Ua===null||(Wd&268435455)===0&&(Hd&268435455)===0||Qd(Ua,uo)}function vg(m,x){var k=kr;kr|=2;var B=bv();(Ua!==m||uo!==x)&&(Ll=null,Ac(m,x));do try{r2();break}catch(Q){G0(m,Q)}while(!0);if($f(),kr=k,hu.current=B,ma!==null)throw Error(n(261));return Ua=null,uo=0,ia}function r2(){for(;ma!==null;)H0(ma)}function W0(){for(;ma!==null&&!jd();)H0(ma)}function H0(m){var x=Tv(m.alternate,m,el);m.memoizedProps=m.pendingProps,x===null?xg(m):ma=x,Kh.current=null}function xg(m){var x=m;do{var k=x.alternate;if(m=x.return,(x.flags&32768)===0){if(k=e2(k,x,el),k!==null){ma=k;return}}else{if(k=L0(k,x),k!==null){k.flags&=32767,ma=k;return}if(m!==null)m.flags|=32768,m.subtreeFlags=0,m.deletions=null;else{ia=6,ma=null;return}}if(x=x.sibling,x!==null){ma=x;return}ma=x=m}while(x!==null);ia===0&&(ia=5)}function Cc(m,x,k){var B=pr,Q=Rl.transition;try{Rl.transition=null,pr=1,Sv(m,x,k,B)}finally{Rl.transition=Q,pr=B}return null}function Sv(m,x,k,B){do np();while(fu!==null);if((kr&6)!==0)throw Error(n(327));k=m.finishedWork;var Q=m.finishedLanes;if(k===null)return null;if(m.finishedWork=null,m.finishedLanes=0,k===m.current)throw Error(n(177));m.callbackNode=null,m.callbackPriority=0;var oe=k.lanes|k.childLanes;if(yi(m,oe),m===Ua&&(ma=Ua=null,uo=0),(k.subtreeFlags&2064)===0&&(k.flags&2064)===0||Kd||(Kd=!0,Y0(xr,function(){return np(),null})),oe=(k.flags&15990)!==0,(k.subtreeFlags&15990)!==0||oe){oe=Rl.transition,Rl.transition=null;var we=pr;pr=1;var Ze=kr;kr|=4,Kh.current=null,t2(m,k),yv(k,m),ro(On),fl=!!sn,On=sn=null,m.current=k,n2(k),Ms(),kr=Ze,pr=we,Rl.transition=oe}else m.current=k;if(Kd&&(Kd=!1,fu=m,rd=Q),oe=m.pendingLanes,oe===0&&(nd=null),Ca(k.stateNode),Qo(m,Xr()),x!==null)for(B=m.onRecoverableError,k=0;k<x.length;k++)Q=x[k],B(Q.value,{componentStack:Q.stack,digest:Q.digest});if(Zd)throw Zd=!1,m=mg,mg=null,m;return(rd&1)!==0&&m.tag!==0&&np(),oe=m.pendingLanes,(oe&1)!==0?m===Yd?Xd++:(Xd=0,Yd=m):Xd=0,ps(),null}function np(){if(fu!==null){var m=Ns(rd),x=Rl.transition,k=pr;try{if(Rl.transition=null,pr=16>m?16:m,fu===null)var B=!1;else{if(m=fu,fu=null,rd=0,(kr&6)!==0)throw Error(n(331));var Q=kr;for(kr|=4,xn=m.current;xn!==null;){var oe=xn,we=oe.child;if((xn.flags&16)!==0){var Ze=oe.deletions;if(Ze!==null){for(var ot=0;ot<Ze.length;ot++){var Et=Ze[ot];for(xn=Et;xn!==null;){var Zt=xn;switch(Zt.tag){case 0:case 11:case 15:Zh(8,Zt,oe)}var Xt=Zt.child;if(Xt!==null)Xt.return=Zt,xn=Xt;else for(;xn!==null;){Zt=xn;var Wt=Zt.sibling,yn=Zt.return;if(Qf(Zt),Zt===Et){xn=null;break}if(Wt!==null){Wt.return=yn,xn=Wt;break}xn=yn}}}var wn=oe.alternate;if(wn!==null){var Pn=wn.child;if(Pn!==null){wn.child=null;do{var Li=Pn.sibling;Pn.sibling=null,Pn=Li}while(Pn!==null)}}xn=oe}}if((oe.subtreeFlags&2064)!==0&&we!==null)we.return=oe,xn=we;else e:for(;xn!==null;){if(oe=xn,(oe.flags&2048)!==0)switch(oe.tag){case 0:case 11:case 15:Zh(9,oe,oe.return)}var _t=oe.sibling;if(_t!==null){_t.return=oe.return,xn=_t;break e}xn=oe.return}}var lt=m.current;for(xn=lt;xn!==null;){we=xn;var wt=we.child;if((we.subtreeFlags&2064)!==0&&wt!==null)wt.return=we,xn=wt;else e:for(we=lt;xn!==null;){if(Ze=xn,(Ze.flags&2048)!==0)try{switch(Ze.tag){case 0:case 11:case 15:Jp(9,Ze)}}catch(kn){Ri(Ze,Ze.return,kn)}if(Ze===we){xn=null;break e}var Jt=Ze.sibling;if(Jt!==null){Jt.return=Ze.return,xn=Jt;break e}xn=Ze.return}}if(kr=Q,ps(),Xi&&typeof Xi.onPostCommitFiberRoot=="function")try{Xi.onPostCommitFiberRoot(ks,m)}catch{}B=!0}return B}finally{pr=k,Rl.transition=x}}return!1}function Z0(m,x,k){x=Nl(k,x),x=xs(m,x,1),m=lu(m,x,1),x=Ro(),m!==null&&(Ja(m,1,x),Qo(m,x))}function Ri(m,x,k){if(m.tag===3)Z0(m,m,k);else for(;x!==null;){if(x.tag===3){Z0(x,m,k);break}else if(x.tag===1){var B=x.stateNode;if(typeof x.type.getDerivedStateFromError=="function"||typeof B.componentDidCatch=="function"&&(nd===null||!nd.has(B))){m=Nl(k,m),m=_s(x,m,1),x=lu(x,m,1),m=Ro(),x!==null&&(Ja(x,1,m),Qo(x,m));break}}x=x.return}}function K0(m,x,k){var B=m.pingCache;B!==null&&B.delete(x),x=Ro(),m.pingedLanes|=m.suspendedLanes&k,Ua===m&&(uo&k)===k&&(ia===4||ia===3&&(uo&130023424)===uo&&500>Xr()-pg?Ac(m,0):vv|=k),Qo(m,x)}function X0(m,x){x===0&&((m.mode&1)===0?x=1:(x=Yl,Yl<<=1,(Yl&130023424)===0&&(Yl=4194304)));var k=Ro();m=vs(m,x),m!==null&&(Ja(m,x,k),Qo(m,k))}function i2(m){var x=m.memoizedState,k=0;x!==null&&(k=x.retryLane),X0(m,k)}function im(m,x){var k=0;switch(m.tag){case 13:var B=m.stateNode,Q=m.memoizedState;Q!==null&&(k=Q.retryLane);break;case 19:B=m.stateNode;break;default:throw Error(n(314))}B!==null&&B.delete(x),X0(m,k)}var Tv;Tv=function(m,x,k){if(m!==null)if(m.memoizedProps!==x.pendingProps||fa.current)lo=!0;else{if((m.lanes&k)===0&&(x.flags&128)===0)return lo=!1,Kf(m,x,k);lo=(m.flags&131072)!==0}else lo=!1,si&&(x.flags&1048576)!==0&&Fh(x,zh,x.index);switch(x.lanes=0,x.tag){case 2:var B=x.type;Qu(m,x),m=x.pendingProps;var Q=nu(x,ha.current);Cl(x,k),Q=y(null,x,B,m,Q,k);var oe=b();return x.flags|=1,typeof Q=="object"&&Q!==null&&typeof Q.render=="function"&&Q.$$typeof===void 0?(x.tag=1,x.memoizedState=null,x.updateQueue=null,Ba(B)?(oe=!0,Ks(x)):oe=!1,x.memoizedState=Q.state!==null&&Q.state!==void 0?Q.state:null,ko(x),Q.updater=Ys,x.stateNode=Q,Q._reactInternals=x,xc(x,B,m,k),x=Wh(null,x,B,!0,oe,k)):(x.tag=0,si&&oe&&Bh(x),$a(null,x,Q,k),x=x.child),x;case 16:B=x.elementType;e:{switch(Qu(m,x),m=x.pendingProps,Q=B._init,B=Q(B._payload),x.type=B,Q=x.tag=o2(B),m=Ar(B,m),Q){case 0:x=Ol(null,x,B,m,k);break e;case 1:x=wc(null,x,B,m,k);break e;case 11:x=du(null,x,B,m,k);break e;case 14:x=cg(null,x,B,Ar(B.type,m),k);break e}throw Error(n(306,B,""))}return x;case 0:return B=x.type,Q=x.pendingProps,Q=x.elementType===B?Q:Ar(B,Q),Ol(m,x,B,Q,k);case 1:return B=x.type,Q=x.pendingProps,Q=x.elementType===B?Q:Ar(B,Q),wc(m,x,B,Q,k);case 3:e:{if(Wf(x),m===null)throw Error(n(387));B=x.pendingProps,oe=x.memoizedState,Q=oe.element,Uf(m,x),ei(x,B,null,k);var we=x.memoizedState;if(B=we.element,oe.isDehydrated)if(oe={element:B,isDehydrated:!1,cache:we.cache,pendingSuspenseBoundaries:we.pendingSuspenseBoundaries,transitions:we.transitions},x.updateQueue.baseState=oe,x.memoizedState=oe,x.flags&256){Q=Nl(Error(n(423)),x),x=Hh(m,x,B,k,Q);break e}else if(B!==Q){Q=Nl(Error(n(424)),x),x=Hh(m,x,B,k,Q);break e}else for(ka=Zs(x.stateNode.containerInfo.firstChild),Ma=x,si=!0,oo=null,k=$d(x,null,B,k),x.child=k;k;)k.flags=k.flags&-3|4096,k=k.sibling;else{if(ou(),B===Q){x=ed(m,x,k);break e}$a(m,x,B,k)}x=x.child}return x;case 5:return kl(x),m===null&&Wp(x),B=x.type,Q=x.pendingProps,oe=m!==null?m.memoizedProps:null,we=Q.children,ir(B,Q)?we=null:oe!==null&&ir(B,oe)&&(x.flags|=32),bc(m,x),$a(m,x,we,k),x.child;case 6:return m===null&&Wp(x),null;case 13:return uv(m,x,k);case 4:return qh(x,x.stateNode.containerInfo),B=x.pendingProps,m===null?x.child=Bd(x,null,B,k):$a(m,x,B,k),x.child;case 11:return B=x.type,Q=x.pendingProps,Q=x.elementType===B?Q:Ar(B,Q),du(m,x,B,Q,k);case 7:return $a(m,x,x.pendingProps,k),x.child;case 8:return $a(m,x,x.pendingProps.children,k),x.child;case 12:return $a(m,x,x.pendingProps.children,k),x.child;case 10:e:{if(B=x.type._context,Q=x.pendingProps,oe=x.memoizedProps,we=Q.value,Sr(Gu,B._currentValue),B._currentValue=we,oe!==null)if(Zo(oe.value,we)){if(oe.children===Q.children&&!fa.current){x=ed(m,x,k);break e}}else for(oe=x.child,oe!==null&&(oe.return=x);oe!==null;){var Ze=oe.dependencies;if(Ze!==null){we=oe.child;for(var ot=Ze.firstContext;ot!==null;){if(ot.context===B){if(oe.tag===1){ot=El(-1,k&-k),ot.tag=2;var Et=oe.updateQueue;if(Et!==null){Et=Et.shared;var Zt=Et.pending;Zt===null?ot.next=ot:(ot.next=Zt.next,Zt.next=ot),Et.pending=ot}}oe.lanes|=k,ot=oe.alternate,ot!==null&&(ot.lanes|=k),Jo(oe.return,k,x),Ze.lanes|=k;break}ot=ot.next}}else if(oe.tag===10)we=oe.type===x.type?null:oe.child;else if(oe.tag===18){if(we=oe.return,we===null)throw Error(n(341));we.lanes|=k,Ze=we.alternate,Ze!==null&&(Ze.lanes|=k),Jo(we,k,x),we=oe.sibling}else we=oe.child;if(we!==null)we.return=oe;else for(we=oe;we!==null;){if(we===x){we=null;break}if(oe=we.sibling,oe!==null){oe.return=we.return,we=oe;break}we=we.return}oe=we}$a(m,x,Q.children,k),x=x.child}return x;case 9:return Q=x.type,B=x.pendingProps.children,Cl(x,k),Q=an(Q),B=B(Q),x.flags|=1,$a(m,x,B,k),x.child;case 14:return B=x.type,Q=Ar(B,x.pendingProps),Q=Ar(B.type,Q),cg(m,x,B,Q,k);case 15:return Kp(m,x,x.type,x.pendingProps,k);case 17:return B=x.type,Q=x.pendingProps,Q=x.elementType===B?Q:Ar(B,Q),Qu(m,x),x.tag=1,Ba(B)?(m=!0,Ks(x)):m=!1,Cl(x,k),Js(x,B,Q),xc(x,B,Q,k),Wh(null,x,B,!0,m,k);case 19:return hv(m,x,k);case 22:return Gf(m,x,k)}throw Error(n(156,x.tag))};function Y0(m,x){return $c(m,x)}function a2(m,x,k,B){this.tag=m,this.key=k,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=x,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=B,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function zl(m,x,k,B){return new a2(m,x,k,B)}function Pv(m){return m=m.prototype,!(!m||!m.isReactComponent)}function o2(m){if(typeof m=="function")return Pv(m)?1:0;if(m!=null){if(m=m.$$typeof,m===Ee)return 11;if(m===Je)return 14}return 2}function id(m,x){var k=m.alternate;return k===null?(k=zl(m.tag,x,m.key,m.mode),k.elementType=m.elementType,k.type=m.type,k.stateNode=m.stateNode,k.alternate=m,m.alternate=k):(k.pendingProps=x,k.type=m.type,k.flags=0,k.subtreeFlags=0,k.deletions=null),k.flags=m.flags&14680064,k.childLanes=m.childLanes,k.lanes=m.lanes,k.child=m.child,k.memoizedProps=m.memoizedProps,k.memoizedState=m.memoizedState,k.updateQueue=m.updateQueue,x=m.dependencies,k.dependencies=x===null?null:{lanes:x.lanes,firstContext:x.firstContext},k.sibling=m.sibling,k.index=m.index,k.ref=m.ref,k}function rp(m,x,k,B,Q,oe){var we=2;if(B=m,typeof m=="function")Pv(m)&&(we=1);else if(typeof m=="string")we=5;else e:switch(m){case de:return eh(k.children,Q,oe,x);case ye:we=8,Q|=8;break;case Ae:return m=zl(12,k,x,Q|2),m.elementType=Ae,m.lanes=oe,m;case Be:return m=zl(13,k,x,Q),m.elementType=Be,m.lanes=oe,m;case De:return m=zl(19,k,x,Q),m.elementType=De,m.lanes=oe,m;case et:return am(k,Q,oe,x);default:if(typeof m=="object"&&m!==null)switch(m.$$typeof){case _e:we=10;break e;case fe:we=9;break e;case Ee:we=11;break e;case Je:we=14;break e;case Ve:we=16,B=null;break e}throw Error(n(130,m==null?m:typeof m,""))}return x=zl(we,k,x,Q),x.elementType=m,x.type=B,x.lanes=oe,x}function eh(m,x,k,B){return m=zl(7,m,B,x),m.lanes=k,m}function am(m,x,k,B){return m=zl(22,m,B,x),m.elementType=et,m.lanes=k,m.stateNode={isHidden:!1},m}function _g(m,x,k){return m=zl(6,m,null,x),m.lanes=k,m}function Av(m,x,k){return x=zl(4,m.children!==null?m.children:[],m.key,x),x.lanes=k,x.stateNode={containerInfo:m.containerInfo,pendingChildren:null,implementation:m.implementation},x}function bg(m,x,k,B,Q){this.tag=x,this.containerInfo=m,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=dl(0),this.expirationTimes=dl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=dl(0),this.identifierPrefix=B,this.onRecoverableError=Q,this.mutableSourceEagerHydrationData=null}function Cv(m,x,k,B,Q,oe,we,Ze,ot){return m=new bg(m,x,k,Ze,ot),x===1?(x=1,oe===!0&&(x|=8)):x=0,oe=zl(3,null,null,x),m.current=oe,oe.stateNode=m,oe.memoizedState={element:B,isDehydrated:k,cache:null,transitions:null,pendingSuspenseBoundaries:null},ko(oe),m}function J0(m,x,k){var B=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ae,key:B==null?null:""+B,children:m,containerInfo:x,implementation:k}}function Q0(m){if(!m)return Pl;m=m._reactInternals;e:{if(Tn(m)!==m||m.tag!==1)throw Error(n(170));var x=m;do{switch(x.tag){case 3:x=x.stateNode.context;break e;case 1:if(Ba(x.type)){x=x.stateNode.__reactInternalMemoizedMergedChildContext;break e}}x=x.return}while(x!==null);throw Error(n(171))}if(m.tag===1){var k=m.type;if(Ba(k))return Rf(m,k,x)}return x}function e_(m,x,k,B,Q,oe,we,Ze,ot){return m=Cv(k,B,!0,m,Q,oe,we,Ze,ot),m.context=Q0(null),k=m.current,B=Ro(),Q=bs(k),oe=El(B,Q),oe.callback=x??null,lu(k,oe,Q),m.current.lanes=Q,Ja(m,Q,B),Qo(m,B),m}function wg(m,x,k,B){var Q=x.current,oe=Ro(),we=bs(Q);return k=Q0(k),x.context===null?x.context=k:x.pendingContext=k,x=El(oe,we),x.payload={element:m},B=B===void 0?null:B,B!==null&&(x.callback=B),m=lu(Q,x,we),m!==null&&(Pc(m,Q,we,oe),qf(m,Q,we)),we}function om(m){if(m=m.current,!m.child)return null;switch(m.child.tag){case 5:return m.child.stateNode;default:return m.child.stateNode}}function t_(m,x){if(m=m.memoizedState,m!==null&&m.dehydrated!==null){var k=m.retryLane;m.retryLane=k!==0&&k<x?k:x}}function Ev(m,x){t_(m,x),(m=m.alternate)&&t_(m,x)}function ga(){return null}var ip=typeof reportError=="function"?reportError:function(m){console.error(m)};function jv(m){this._internalRoot=m}Sg.prototype.render=jv.prototype.render=function(m){var x=this._internalRoot;if(x===null)throw Error(n(409));wg(m,x,null,null)},Sg.prototype.unmount=jv.prototype.unmount=function(){var m=this._internalRoot;if(m!==null){this._internalRoot=null;var x=m.containerInfo;Xh(function(){wg(null,m,null,null)}),x[wr]=null}};function Sg(m){this._internalRoot=m}Sg.prototype.unstable_scheduleHydration=function(m){if(m){var x=hl();m={blockedOn:null,target:m,priority:x};for(var k=0;k<sr.length&&x!==0&&x<sr[k].priority;k++);sr.splice(k,0,m),k===0&&la(m)}};function Tg(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11)}function sm(m){return!(!m||m.nodeType!==1&&m.nodeType!==9&&m.nodeType!==11&&(m.nodeType!==8||m.nodeValue!==" react-mount-point-unstable "))}function n_(){}function r_(m,x,k,B,Q){if(Q){if(typeof B=="function"){var oe=B;B=function(){var Et=om(we);oe.call(Et)}}var we=e_(x,B,m,0,null,!1,!1,"",n_);return m._reactRootContainer=we,m[wr]=we.current,Sl(m.nodeType===8?m.parentNode:m),Xh(),we}for(;Q=m.lastChild;)m.removeChild(Q);if(typeof B=="function"){var Ze=B;B=function(){var Et=om(ot);Ze.call(Et)}}var ot=Cv(m,0,!1,null,null,!1,!1,"",n_);return m._reactRootContainer=ot,m[wr]=ot.current,Sl(m.nodeType===8?m.parentNode:m),Xh(function(){wg(x,ot,k,B)}),ot}function lm(m,x,k,B,Q){var oe=k._reactRootContainer;if(oe){var we=oe;if(typeof Q=="function"){var Ze=Q;Q=function(){var ot=om(we);Ze.call(ot)}}wg(x,we,m,Q)}else we=r_(k,x,m,Q,B);return om(we)}Iu=function(m){switch(m.tag){case 3:var x=m.stateNode;if(x.current.memoizedState.isDehydrated){var k=Fn(x.pendingLanes);k!==0&&(Is(x,k|1),Qo(x,Xr()),(kr&6)===0&&(td=Xr()+500,ps()))}break;case 13:Xh(function(){var B=vs(m,1);if(B!==null){var Q=Ro();Pc(B,m,1,Q)}}),Ev(m,1)}},bo=function(m){if(m.tag===13){var x=vs(m,134217728);if(x!==null){var k=Ro();Pc(x,m,134217728,k)}Ev(m,134217728)}},qc=function(m){if(m.tag===13){var x=bs(m),k=vs(m,x);if(k!==null){var B=Ro();Pc(k,m,x,B)}Ev(m,x)}},hl=function(){return pr},wo=function(m,x){var k=pr;try{return pr=m,x()}finally{pr=k}},ft=function(m,x,k){switch(x){case"input":if(Mn(m,k),x=k.name,k.type==="radio"&&x!=null){for(k=m;k.parentNode;)k=k.parentNode;for(k=k.querySelectorAll("input[name="+JSON.stringify(""+x)+'][type="radio"]'),x=0;x<k.length;x++){var B=k[x];if(B!==m&&B.form===m.form){var Q=$u(B);if(!Q)throw Error(n(90));dt(B),Mn(B,Q)}}}break;case"textarea":wa(m,k);break;case"select":x=k.value,x!=null&&Br(m,!!k.multiple,x,!1)}},on=xv,hn=Xh;var ap={usingClientEntryPoint:!1,Events:[ao,Eo,$u,Bt,gn,xv]},Yh={findFiberByHostInstance:Yo,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},i_={bundleType:Yh.bundleType,version:Yh.version,rendererPackageName:Yh.rendererPackageName,rendererConfig:Yh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ne.ReactCurrentDispatcher,findHostInstanceByFiber:function(m){return m=os(m),m===null?null:m.stateNode},findFiberByHostInstance:Yh.findFiberByHostInstance||ga,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var cm=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!cm.isDisabled&&cm.supportsFiber)try{ks=cm.inject(i_),Xi=cm}catch{}}return Vl.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ap,Vl.createPortal=function(m,x){var k=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Tg(x))throw Error(n(200));return J0(m,x,null,k)},Vl.createRoot=function(m,x){if(!Tg(m))throw Error(n(299));var k=!1,B="",Q=ip;return x!=null&&(x.unstable_strictMode===!0&&(k=!0),x.identifierPrefix!==void 0&&(B=x.identifierPrefix),x.onRecoverableError!==void 0&&(Q=x.onRecoverableError)),x=Cv(m,1,!1,null,null,k,!1,B,Q),m[wr]=x.current,Sl(m.nodeType===8?m.parentNode:m),new jv(x)},Vl.findDOMNode=function(m){if(m==null)return null;if(m.nodeType===1)return m;var x=m._reactInternals;if(x===void 0)throw typeof m.render=="function"?Error(n(188)):(m=Object.keys(m).join(","),Error(n(268,m)));return m=os(x),m=m===null?null:m.stateNode,m},Vl.flushSync=function(m){return Xh(m)},Vl.hydrate=function(m,x,k){if(!sm(x))throw Error(n(200));return lm(null,m,x,!0,k)},Vl.hydrateRoot=function(m,x,k){if(!Tg(m))throw Error(n(405));var B=k!=null&&k.hydratedSources||null,Q=!1,oe="",we=ip;if(k!=null&&(k.unstable_strictMode===!0&&(Q=!0),k.identifierPrefix!==void 0&&(oe=k.identifierPrefix),k.onRecoverableError!==void 0&&(we=k.onRecoverableError)),x=e_(x,null,m,1,k??null,Q,!1,oe,we),m[wr]=x.current,Sl(m),B)for(m=0;m<B.length;m++)k=B[m],Q=k._getVersion,Q=Q(k._source),x.mutableSourceEagerHydrationData==null?x.mutableSourceEagerHydrationData=[k,Q]:x.mutableSourceEagerHydrationData.push(k,Q);return new Sg(x)},Vl.render=function(m,x,k){if(!sm(x))throw Error(n(200));return lm(null,m,x,!1,k)},Vl.unmountComponentAtNode=function(m){if(!sm(m))throw Error(n(40));return m._reactRootContainer?(Xh(function(){lm(null,null,m,!1,function(){m._reactRootContainer=null,m[wr]=null})}),!0):!1},Vl.unstable_batchedUpdates=xv,Vl.unstable_renderSubtreeIntoContainer=function(m,x,k,B){if(!sm(k))throw Error(n(200));if(m==null||m._reactInternals===void 0)throw Error(n(38));return lm(m,x,k,!1,B)},Vl.version="18.3.1-next-f1338f8080-20240426",Vl}var nD;function wB(){if(nD)return q2.exports;nD=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),q2.exports=YW(),q2.exports}var rD;function JW(){if(rD)return S_;rD=1;var e=wB();return S_.createRoot=e.createRoot,S_.hydrateRoot=e.hydrateRoot,S_}var QW=JW(),W=rM();const je=Kr(W),iM=GW({__proto__:null,default:je},[W]),iD={primary:"#21A68D",secondary:"#0F4C75",warning:"#D4E268",success:"#22c55e",danger:"#ef4444"},SB=W.createContext(void 0);function eH({children:e}){const[t,n]=W.useState(()=>{const h=localStorage.getItem("theme-colors");return h?JSON.parse(h):iD});W.useEffect(()=>{localStorage.setItem("theme-colors",JSON.stringify(t))},[t]);const r=(h,d)=>{n(o=>({...o,[h]:d}))},s=()=>{n(iD),localStorage.removeItem("theme-colors")};return f.jsx(SB.Provider,{value:{colors:t,updateColor:r,resetColors:s},children:e})}function TB(){const e=W.useContext(SB);if(!e)throw new Error("useTheme must be used within ThemeProvider");return e}const aD="/assets/mariview_logo-Bq9mz8F1.png";function H2({className:e="",size:t="md",showIcon:n=!0,collapsed:r=!1}){const h={sm:"h-8",md:"h-10",lg:"h-14"}[t];return r?f.jsx("div",{className:`flex items-center justify-center overflow-hidden ${h} aspect-square ${e}`,children:f.jsx("img",{src:aD,alt:"M",className:"h-full max-w-none object-cover object-left",style:{width:"auto",aspectRatio:"3.5/1"}})}):f.jsx("div",{className:`flex items-center ${e}`,children:f.jsx("img",{src:aD,alt:"MARIVIEW",className:`${h} w-auto object-contain`})})}/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tH=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),nH=e=>e.replace(/^([A-Z])|[\s-_]+(\w)/g,(t,n,r)=>r?r.toUpperCase():n.toLowerCase()),oD=e=>{const t=nH(e);return t.charAt(0).toUpperCase()+t.slice(1)},PB=(...e)=>e.filter((t,n,r)=>!!t&&t.trim()!==""&&r.indexOf(t)===n).join(" ").trim();/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var rH={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iH=W.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:r,className:s="",children:h,iconNode:d,...o},_)=>W.createElement("svg",{ref:_,...rH,width:t,height:t,stroke:e,strokeWidth:r?Number(n)*24/Number(t):n,className:PB("lucide",s),...o},[...d.map(([w,A])=>W.createElement(w,A)),...Array.isArray(h)?h:[h]]));/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const un=(e,t)=>{const n=W.forwardRef(({className:r,...s},h)=>W.createElement(iH,{ref:h,iconNode:t,className:PB(`lucide-${tH(oD(e))}`,`lucide-${e}`,r),...s}));return n.displayName=oD(e),n};/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aH=[["path",{d:"M22 12h-2.48a2 2 0 0 0-1.93 1.46l-2.35 8.36a.25.25 0 0 1-.48 0L9.24 2.18a.25.25 0 0 0-.48 0l-2.35 8.36A2 2 0 0 1 4.49 12H2",key:"169zse"}]],_u=un("activity",aH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oH=[["path",{d:"M12 22V8",key:"qkxhtm"}],["path",{d:"M5 12H2a10 10 0 0 0 20 0h-3",key:"1hv3nh"}],["circle",{cx:"12",cy:"5",r:"3",key:"rqqgnr"}]],NC=un("anchor",oH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sH=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],tf=un("arrow-left",sH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lH=[["rect",{width:"16",height:"10",x:"2",y:"7",rx:"2",ry:"2",key:"1w10f2"}],["line",{x1:"22",x2:"22",y1:"11",y2:"13",key:"4dh1rd"}]],cH=un("battery",lH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uH=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],DC=un("brain",uH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dH=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hH=un("calendar",dH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fH=[["path",{d:"M19 17h2c.6 0 1-.4 1-1v-3c0-.9-.7-1.7-1.5-1.9C18.7 10.6 16 10 16 10s-1.3-1.4-2.2-2.3c-.5-.4-1.1-.7-1.8-.7H5c-.6 0-1.1.4-1.4.9l-1.4 2.9A3.7 3.7 0 0 0 2 12v4c0 .6.4 1 1 1h2",key:"5owen"}],["circle",{cx:"7",cy:"17",r:"2",key:"u2ysq9"}],["path",{d:"M9 17h6",key:"r8uit2"}],["circle",{cx:"17",cy:"17",r:"2",key:"axvx0g"}]],sD=un("car",fH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pH=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],lx=un("chart-column",pH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mH=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],d0=un("check",mH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gH=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],gb=un("chevron-down",gH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yH=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],AB=un("chevron-left",yH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vH=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],Wg=un("chevron-right",vH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xH=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],OC=un("chevron-up",xH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _H=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],of=un("circle-alert",_H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bH=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Ul=un("circle-check-big",bH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],nb=un("circle-check",wH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M8 12h8",key:"1wcyev"}],["path",{d:"M12 8v8",key:"napkw2"}]],TH=un("circle-plus",SH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],CB=un("circle-x",PH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],CH=un("circle",AH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EH=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],sf=un("clock",EH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jH=[["path",{d:"M6 16.326A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 .5 8.973",key:"1cez44"}],["path",{d:"m13 12-3 5h4l-3 5",key:"1t22er"}]],MH=un("cloud-lightning",jH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kH=[["path",{d:"M4 14.899A7 7 0 1 1 15.71 8h1.79a4.5 4.5 0 0 1 2.5 8.242",key:"1pljnt"}],["path",{d:"M16 14v6",key:"1j4efv"}],["path",{d:"M8 14v6",key:"17c4r9"}],["path",{d:"M12 16v6",key:"c8a4gj"}]],ex=un("cloud-rain",kH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IH=[["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}],["path",{d:"M15.947 12.65a4 4 0 0 0-5.925-4.128",key:"dpwdj0"}],["path",{d:"M13 22H7a5 5 0 1 1 4.9-6H13a3 3 0 0 1 0 6Z",key:"s09mg5"}]],NH=un("cloud-sun",IH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DH=[["path",{d:"M17.5 19H9a7 7 0 1 1 6.71-9h1.79a4.5 4.5 0 1 1 0 9Z",key:"p7xjir"}]],cx=un("cloud",DH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OH=[["path",{d:"m16.24 7.76-1.804 5.411a2 2 0 0 1-1.265 1.265L7.76 16.24l1.804-5.411a2 2 0 0 1 1.265-1.265z",key:"9ktpf1"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],EB=un("compass",OH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RH=[["rect",{width:"16",height:"16",x:"4",y:"4",rx:"2",key:"14l7u7"}],["rect",{width:"6",height:"6",x:"9",y:"9",rx:"1",key:"5aljv4"}],["path",{d:"M15 2v2",key:"13l42r"}],["path",{d:"M15 20v2",key:"15mkzm"}],["path",{d:"M2 15h2",key:"1gxd5l"}],["path",{d:"M2 9h2",key:"1bbxkp"}],["path",{d:"M20 15h2",key:"19e6y8"}],["path",{d:"M20 9h2",key:"19tzq7"}],["path",{d:"M9 2v2",key:"165o2o"}],["path",{d:"M9 20v2",key:"i2bqo8"}]],jB=un("cpu",RH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LH=[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]],lD=un("database",LH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zH=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],vp=un("download",zH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FH=[["path",{d:"M7 16.3c2.2 0 4-1.83 4-4.05 0-1.16-.57-2.26-1.71-3.19S7.29 6.75 7 5.3c-.29 1.45-1.14 2.84-2.29 3.76S3 11.1 3 12.25c0 2.22 1.8 4.05 4 4.05z",key:"1ptgy4"}],["path",{d:"M12.56 6.6A10.97 10.97 0 0 0 14 3.02c.5 2.5 2 4.9 4 6.5s3 3.5 3 5.5a6.98 6.98 0 0 1-11.91 4.97",key:"1sl1rz"}]],BH=un("droplets",FH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $H=[["path",{d:"m7 21-4.3-4.3c-1-1-1-2.5 0-3.4l9.6-9.6c1-1 2.5-1 3.4 0l5.6 5.6c1 1 1 2.5 0 3.4L13 21",key:"182aya"}],["path",{d:"M22 21H7",key:"t4ddhn"}],["path",{d:"m5 11 9 9",key:"1mo9qw"}]],VH=un("eraser",$H);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UH=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],qH=un("external-link",UH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GH=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],T_=un("eye-off",GH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WH=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],wu=un("eye",WH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 12a1 1 0 0 0-1 1v1a1 1 0 0 1-1 1 1 1 0 0 1 1 1v1a1 1 0 0 0 1 1",key:"1oajmo"}],["path",{d:"M14 18a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1 1 1 0 0 1-1-1v-1a1 1 0 0 0-1-1",key:"mpwhp6"}]],RC=un("file-json",HH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],LC=un("file-text",ZH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KH=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m10 11 5 3-5 3v-6Z",key:"7ntvm4"}]],MB=un("file-video",KH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XH=[["path",{d:"M10 20a1 1 0 0 0 .553.895l2 1A1 1 0 0 0 14 21v-7a2 2 0 0 1 .517-1.341L21.74 4.67A1 1 0 0 0 21 3H3a1 1 0 0 0-.742 1.67l7.225 7.989A2 2 0 0 1 10 14z",key:"sc7q7i"}]],YH=un("funnel",XH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JH=[["path",{d:"m12 14 4-4",key:"9kzdfg"}],["path",{d:"M3.34 19a10 10 0 1 1 17.32 0",key:"19p75a"}]],QH=un("gauge",JH);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],kB=un("globe",eZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tZ=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}],["path",{d:"M12 7v5l4 2",key:"1fdv2h"}]],IB=un("history",tZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nZ=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],aM=un("house",nZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],oM=un("info",rZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const iZ=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],zC=un("layers",iZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aZ=[["path",{d:"m3 17 2 2 4-4",key:"1jhpwq"}],["path",{d:"m3 7 2 2 4-4",key:"1obspn"}],["path",{d:"M13 6h8",key:"15sg57"}],["path",{d:"M13 12h8",key:"h98zly"}],["path",{d:"M13 18h8",key:"oe0vm4"}]],Z2=un("list-checks",aZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oZ=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],yb=un("map-pin",oZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sZ=[["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["polyline",{points:"9 21 3 21 3 15",key:"1avn1i"}],["line",{x1:"21",x2:"14",y1:"3",y2:"10",key:"ota7mn"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]],lZ=un("maximize-2",sZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cZ=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],uZ=un("menu",cZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dZ=[["polygon",{points:"3 11 22 2 13 21 11 13 3 11",key:"1ltx0t"}]],q1=un("navigation",dZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hZ=[["path",{d:"M11 21.73a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16V8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73z",key:"1a0edw"}],["path",{d:"M12 22V12",key:"d0xqtd"}],["polyline",{points:"3.29 7 12 12 20.71 7",key:"ousv84"}],["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}]],FC=un("package",hZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fZ=[["path",{d:"M10.83 2.38a2 2 0 0 1 2.34 0l8 5.74a2 2 0 0 1 .73 2.25l-3.04 9.26a2 2 0 0 1-1.9 1.37H7.04a2 2 0 0 1-1.9-1.37L2.1 10.37a2 2 0 0 1 .73-2.25z",key:"2hea0t"}]],NB=un("pentagon",fZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pZ=[["path",{d:"M17.8 19.2 16 11l3.5-3.5C21 6 21.5 4 21 3c-1-.5-3 0-4.5 1.5L13 8 4.8 6.2c-.5-.1-.9.1-1.1.5l-.3.5c-.2.5-.1 1 .3 1.3L9 12l-2 3H4l-1 1 3 2 2 3 1-1v-3l3-2 3.5 5.3c.3.4.8.5 1.3.3l.5-.2c.4-.3.6-.7.5-1.2z",key:"1v9wt8"}]],uy=un("plane",pZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mZ=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],K2=un("play",mZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gZ=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],yZ=un("plus",gZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vZ=[["path",{d:"M4.9 19.1C1 15.2 1 8.8 4.9 4.9",key:"1vaf9d"}],["path",{d:"M7.8 16.2c-2.3-2.3-2.3-6.1 0-8.5",key:"u1ii0m"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}],["path",{d:"M16.2 7.8c2.3 2.3 2.3 6.1 0 8.5",key:"1j5fej"}],["path",{d:"M19.1 4.9C23 8.8 23 15.1 19.1 19",key:"10b0cb"}]],yd=un("radio",vZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xZ=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],_Z=un("refresh-cw",xZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bZ=[["path",{d:"M13 7 9 3 5 7l4 4",key:"vyckw6"}],["path",{d:"m17 11 4 4-4 4-4-4",key:"rchckc"}],["path",{d:"m8 12 4 4 6-6-4-4Z",key:"1sshf7"}],["path",{d:"m16 8 3-3",key:"x428zp"}],["path",{d:"M9 21a6 6 0 0 0-6-6",key:"1iajcf"}]],DB=un("satellite",bZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wZ=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],cD=un("save",wZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SZ=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],BC=un("search",SZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TZ=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],sM=un("settings",TZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PZ=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],AZ=un("shield-alert",PZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CZ=[["path",{d:"M12 10.189V14",key:"1p8cqu"}],["path",{d:"M12 2v3",key:"qbqxhf"}],["path",{d:"M19 13V7a2 2 0 0 0-2-2H7a2 2 0 0 0-2 2v6",key:"qpkstq"}],["path",{d:"M19.38 20A11.6 11.6 0 0 0 21 14l-8.188-3.639a2 2 0 0 0-1.624 0L3 14a11.6 11.6 0 0 0 2.81 7.76",key:"7tigtc"}],["path",{d:"M2 21c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1s1.2 1 2.5 1c2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"1924j5"}]],Au=un("ship",CZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EZ=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],Cm=un("square-pen",EZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jZ=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}]],vb=un("square",jZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MZ=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],uD=un("target",MZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kZ=[["path",{d:"M14 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"17jzev"}]],IZ=un("thermometer",kZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_p=un("trash-2",NZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DZ=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],dD=un("trash",DZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OZ=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],xb=un("trending-up",OZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RZ=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],_b=un("triangle-alert",RZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LZ=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],dy=un("upload",LZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],FZ=un("user-plus",zZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BZ=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],$Z=un("user",BZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VZ=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],hD=un("users",VZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UZ=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],qZ=un("video",UZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GZ=[["path",{d:"M2 6c.6.5 1.2 1 2.5 1C7 7 7 5 9.5 5c2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"knzxuh"}],["path",{d:"M2 12c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"2jd2cc"}],["path",{d:"M2 18c.6.5 1.2 1 2.5 1 2.5 0 2.5-2 5-2 2.6 0 2.4 2 5 2 2.5 0 2.5-2 5-2 1.3 0 1.9.5 2.5 1",key:"rd2r6e"}]],$C=un("waves",GZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WZ=[["path",{d:"M12.8 19.6A2 2 0 1 0 14 16H2",key:"148xed"}],["path",{d:"M17.5 8a2.5 2.5 0 1 1 2 4H2",key:"1u4tom"}],["path",{d:"M9.8 4.4A2 2 0 1 1 11 8H2",key:"75valh"}]],lM=un("wind",WZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HZ=[["path",{d:"M14.7 6.3a1 1 0 0 0 0 1.4l1.6 1.6a1 1 0 0 0 1.4 0l3.77-3.77a6 6 0 0 1-7.94 7.94l-6.91 6.91a2.12 2.12 0 0 1-3-3l6.91-6.91a6 6 0 0 1 7.94-7.94l-3.76 3.76z",key:"cbrjhi"}]],ZZ=un("wrench",HZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KZ=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],G1=un("x",KZ);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XZ=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],YZ=un("zap",XZ);function JZ(){const[e,t]=W.useState(!1);return W.useEffect(()=>{const n=()=>{t(!0),setTimeout(()=>t(!1),2e3)};return window.addEventListener("mariview-storage-change",n),()=>window.removeEventListener("mariview-storage-change",n)},[]),f.jsx("div",{className:"fixed bottom-4 right-4 z-50",children:e&&f.jsxs("div",{className:"bg-[#21A68D] text-white px-4 py-2 rounded-lg shadow-lg flex items-center gap-2 animate-in fade-in slide-in-from-bottom-2",children:[f.jsx(d0,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm font-medium",children:"Data tersimpan"})]})})}function fD(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Sf(...e){return t=>{let n=!1;const r=e.map(s=>{const h=fD(s,t);return!n&&typeof h=="function"&&(n=!0),h});if(n)return()=>{for(let s=0;s<r.length;s++){const h=r[s];typeof h=="function"?h():fD(e[s],null)}}}}function gr(...e){return W.useCallback(Sf(...e),e)}var QZ=Symbol.for("react.lazy"),bb=iM[" use ".trim().toString()];function eK(e){return typeof e=="object"&&e!==null&&"then"in e}function OB(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===QZ&&"_payload"in e&&eK(e._payload)}function cM(e){const t=tK(e),n=W.forwardRef((r,s)=>{let{children:h,...d}=r;OB(h)&&typeof bb=="function"&&(h=bb(h._payload));const o=W.Children.toArray(h),_=o.find(rK);if(_){const w=_.props.children,A=o.map(P=>P===_?W.Children.count(w)>1?W.Children.only(null):W.isValidElement(w)?w.props.children:null:P);return f.jsx(t,{...d,ref:s,children:W.isValidElement(w)?W.cloneElement(w,void 0,A):null})}return f.jsx(t,{...d,ref:s,children:h})});return n.displayName=`${e}.Slot`,n}var RB=cM("Slot");function tK(e){const t=W.forwardRef((n,r)=>{let{children:s,...h}=n;if(OB(s)&&typeof bb=="function"&&(s=bb(s._payload)),W.isValidElement(s)){const d=aK(s),o=iK(h,s.props);return s.type!==W.Fragment&&(o.ref=r?Sf(r,d):d),W.cloneElement(s,o)}return W.Children.count(s)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var nK=Symbol("radix.slottable");function rK(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===nK}function iK(e,t){const n={...t};for(const r in t){const s=e[r],h=t[r];/^on[A-Z]/.test(r)?s&&h?n[r]=(...o)=>{const _=h(...o);return s(...o),_}:s&&(n[r]=s):r==="style"?n[r]={...s,...h}:r==="className"&&(n[r]=[s,h].filter(Boolean).join(" "))}return{...e,...n}}function aK(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function LB(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=LB(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function dr(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=LB(e))&&(r&&(r+=" "),r+=t);return r}const pD=e=>typeof e=="boolean"?`${e}`:e===0?"0":e,mD=dr,zB=(e,t)=>n=>{var r;if(t?.variants==null)return mD(e,n?.class,n?.className);const{variants:s,defaultVariants:h}=t,d=Object.keys(s).map(w=>{const A=n?.[w],P=h?.[w];if(A===null)return null;const N=pD(A)||pD(P);return s[w][N]}),o=n&&Object.entries(n).reduce((w,A)=>{let[P,N]=A;return N===void 0||(w[P]=N),w},{}),_=t==null||(r=t.compoundVariants)===null||r===void 0?void 0:r.reduce((w,A)=>{let{class:P,className:N,...z}=A;return Object.entries(z).every(q=>{let[$,O]=q;return Array.isArray(O)?O.includes({...h,...o}[$]):{...h,...o}[$]===O})?[...w,P,N]:w},[]);return mD(e,d,_,n?.class,n?.className)},oK=(e,t)=>{const n=new Array(e.length+t.length);for(let r=0;r<e.length;r++)n[r]=e[r];for(let r=0;r<t.length;r++)n[e.length+r]=t[r];return n},sK=(e,t)=>({classGroupId:e,validator:t}),FB=(e=new Map,t=null,n)=>({nextPart:e,validators:t,classGroupId:n}),wb="-",gD=[],lK="arbitrary..",cK=e=>{const t=dK(e),{conflictingClassGroups:n,conflictingClassGroupModifiers:r}=e;return{getClassGroupId:d=>{if(d.startsWith("[")&&d.endsWith("]"))return uK(d);const o=d.split(wb),_=o[0]===""&&o.length>1?1:0;return BB(o,_,t)},getConflictingClassGroupIds:(d,o)=>{if(o){const _=r[d],w=n[d];return _?w?oK(w,_):_:w||gD}return n[d]||gD}}},BB=(e,t,n)=>{if(e.length-t===0)return n.classGroupId;const s=e[t],h=n.nextPart.get(s);if(h){const w=BB(e,t+1,h);if(w)return w}const d=n.validators;if(d===null)return;const o=t===0?e.join(wb):e.slice(t).join(wb),_=d.length;for(let w=0;w<_;w++){const A=d[w];if(A.validator(o))return A.classGroupId}},uK=e=>e.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=e.slice(1,-1),n=t.indexOf(":"),r=t.slice(0,n);return r?lK+r:void 0})(),dK=e=>{const{theme:t,classGroups:n}=e;return hK(n,t)},hK=(e,t)=>{const n=FB();for(const r in e){const s=e[r];uM(s,n,r,t)}return n},uM=(e,t,n,r)=>{const s=e.length;for(let h=0;h<s;h++){const d=e[h];fK(d,t,n,r)}},fK=(e,t,n,r)=>{if(typeof e=="string"){pK(e,t,n);return}if(typeof e=="function"){mK(e,t,n,r);return}gK(e,t,n,r)},pK=(e,t,n)=>{const r=e===""?t:$B(t,e);r.classGroupId=n},mK=(e,t,n,r)=>{if(yK(e)){uM(e(r),t,n,r);return}t.validators===null&&(t.validators=[]),t.validators.push(sK(n,e))},gK=(e,t,n,r)=>{const s=Object.entries(e),h=s.length;for(let d=0;d<h;d++){const[o,_]=s[d];uM(_,$B(t,o),n,r)}},$B=(e,t)=>{let n=e;const r=t.split(wb),s=r.length;for(let h=0;h<s;h++){const d=r[h];let o=n.nextPart.get(d);o||(o=FB(),n.nextPart.set(d,o)),n=o}return n},yK=e=>"isThemeGetter"in e&&e.isThemeGetter===!0,vK=e=>{if(e<1)return{get:()=>{},set:()=>{}};let t=0,n=Object.create(null),r=Object.create(null);const s=(h,d)=>{n[h]=d,t++,t>e&&(t=0,r=n,n=Object.create(null))};return{get(h){let d=n[h];if(d!==void 0)return d;if((d=r[h])!==void 0)return s(h,d),d},set(h,d){h in n?n[h]=d:s(h,d)}}},VC="!",yD=":",xK=[],vD=(e,t,n,r,s)=>({modifiers:e,hasImportantModifier:t,baseClassName:n,maybePostfixModifierPosition:r,isExternal:s}),_K=e=>{const{prefix:t,experimentalParseClassName:n}=e;let r=s=>{const h=[];let d=0,o=0,_=0,w;const A=s.length;for(let $=0;$<A;$++){const O=s[$];if(d===0&&o===0){if(O===yD){h.push(s.slice(_,$)),_=$+1;continue}if(O==="/"){w=$;continue}}O==="["?d++:O==="]"?d--:O==="("?o++:O===")"&&o--}const P=h.length===0?s:s.slice(_);let N=P,z=!1;P.endsWith(VC)?(N=P.slice(0,-1),z=!0):P.startsWith(VC)&&(N=P.slice(1),z=!0);const q=w&&w>_?w-_:void 0;return vD(h,z,N,q)};if(t){const s=t+yD,h=r;r=d=>d.startsWith(s)?h(d.slice(s.length)):vD(xK,!1,d,void 0,!0)}if(n){const s=r;r=h=>n({className:h,parseClassName:s})}return r},bK=e=>{const t=new Map;return e.orderSensitiveModifiers.forEach((n,r)=>{t.set(n,1e6+r)}),n=>{const r=[];let s=[];for(let h=0;h<n.length;h++){const d=n[h],o=d[0]==="[",_=t.has(d);o||_?(s.length>0&&(s.sort(),r.push(...s),s=[]),r.push(d)):s.push(d)}return s.length>0&&(s.sort(),r.push(...s)),r}},wK=e=>({cache:vK(e.cacheSize),parseClassName:_K(e),sortModifiers:bK(e),...cK(e)}),SK=/\s+/,TK=(e,t)=>{const{parseClassName:n,getClassGroupId:r,getConflictingClassGroupIds:s,sortModifiers:h}=t,d=[],o=e.trim().split(SK);let _="";for(let w=o.length-1;w>=0;w-=1){const A=o[w],{isExternal:P,modifiers:N,hasImportantModifier:z,baseClassName:q,maybePostfixModifierPosition:$}=n(A);if(P){_=A+(_.length>0?" "+_:_);continue}let O=!!$,X=r(O?q.substring(0,$):q);if(!X){if(!O){_=A+(_.length>0?" "+_:_);continue}if(X=r(q),!X){_=A+(_.length>0?" "+_:_);continue}O=!1}const K=N.length===0?"":N.length===1?N[0]:h(N).join(":"),te=z?K+VC:K,ne=te+X;if(d.indexOf(ne)>-1)continue;d.push(ne);const H=s(X,O);for(let ae=0;ae<H.length;++ae){const de=H[ae];d.push(te+de)}_=A+(_.length>0?" "+_:_)}return _},PK=(...e)=>{let t=0,n,r,s="";for(;t<e.length;)(n=e[t++])&&(r=VB(n))&&(s&&(s+=" "),s+=r);return s},VB=e=>{if(typeof e=="string")return e;let t,n="";for(let r=0;r<e.length;r++)e[r]&&(t=VB(e[r]))&&(n&&(n+=" "),n+=t);return n},AK=(e,...t)=>{let n,r,s,h;const d=_=>{const w=t.reduce((A,P)=>P(A),e());return n=wK(w),r=n.cache.get,s=n.cache.set,h=o,o(_)},o=_=>{const w=r(_);if(w)return w;const A=TK(_,n);return s(_,A),A};return h=d,(..._)=>h(PK(..._))},CK=[],po=e=>{const t=n=>n[e]||CK;return t.isThemeGetter=!0,t},UB=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,qB=/^\((?:(\w[\w-]*):)?(.+)\)$/i,EK=/^\d+\/\d+$/,jK=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,MK=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,kK=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,IK=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,NK=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,Og=e=>EK.test(e),_r=e=>!!e&&!Number.isNaN(Number(e)),hp=e=>!!e&&Number.isInteger(Number(e)),X2=e=>e.endsWith("%")&&_r(e.slice(0,-1)),nf=e=>jK.test(e),DK=()=>!0,OK=e=>MK.test(e)&&!kK.test(e),GB=()=>!1,RK=e=>IK.test(e),LK=e=>NK.test(e),zK=e=>!Cn(e)&&!En(e),FK=e=>Uy(e,ZB,GB),Cn=e=>UB.test(e),mm=e=>Uy(e,KB,OK),Y2=e=>Uy(e,qK,_r),xD=e=>Uy(e,WB,GB),BK=e=>Uy(e,HB,LK),P_=e=>Uy(e,XB,RK),En=e=>qB.test(e),zv=e=>qy(e,KB),$K=e=>qy(e,GK),_D=e=>qy(e,WB),VK=e=>qy(e,ZB),UK=e=>qy(e,HB),A_=e=>qy(e,XB,!0),Uy=(e,t,n)=>{const r=UB.exec(e);return r?r[1]?t(r[1]):n(r[2]):!1},qy=(e,t,n=!1)=>{const r=qB.exec(e);return r?r[1]?t(r[1]):n:!1},WB=e=>e==="position"||e==="percentage",HB=e=>e==="image"||e==="url",ZB=e=>e==="length"||e==="size"||e==="bg-size",KB=e=>e==="length",qK=e=>e==="number",GK=e=>e==="family-name",XB=e=>e==="shadow",WK=()=>{const e=po("color"),t=po("font"),n=po("text"),r=po("font-weight"),s=po("tracking"),h=po("leading"),d=po("breakpoint"),o=po("container"),_=po("spacing"),w=po("radius"),A=po("shadow"),P=po("inset-shadow"),N=po("text-shadow"),z=po("drop-shadow"),q=po("blur"),$=po("perspective"),O=po("aspect"),X=po("ease"),K=po("animate"),te=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ne=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],H=()=>[...ne(),En,Cn],ae=()=>["auto","hidden","clip","visible","scroll"],de=()=>["auto","contain","none"],ye=()=>[En,Cn,_],Ae=()=>[Og,"full","auto",...ye()],_e=()=>[hp,"none","subgrid",En,Cn],fe=()=>["auto",{span:["full",hp,En,Cn]},hp,En,Cn],Ee=()=>[hp,"auto",En,Cn],Be=()=>["auto","min","max","fr",En,Cn],De=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Je=()=>["start","end","center","stretch","center-safe","end-safe"],Ve=()=>["auto",...ye()],et=()=>[Og,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...ye()],Ce=()=>[e,En,Cn],We=()=>[...ne(),_D,xD,{position:[En,Cn]}],Qe=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Re=()=>["auto","cover","contain",VK,FK,{size:[En,Cn]}],nt=()=>[X2,zv,mm],pt=()=>["","none","full",w,En,Cn],Ct=()=>["",_r,zv,mm],Mt=()=>["solid","dashed","dotted","double"],Nt=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Tt=()=>[_r,X2,_D,xD],Ot=()=>["","none",q,En,Cn],rt=()=>["none",_r,En,Cn],zt=()=>["none",_r,En,Cn],Ut=()=>[_r,En,Cn],dt=()=>[Og,"full",...ye()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[nf],breakpoint:[nf],color:[DK],container:[nf],"drop-shadow":[nf],ease:["in","out","in-out"],font:[zK],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[nf],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[nf],shadow:[nf],spacing:["px",_r],text:[nf],"text-shadow":[nf],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",Og,Cn,En,O]}],container:["container"],columns:[{columns:[_r,Cn,En,o]}],"break-after":[{"break-after":te()}],"break-before":[{"break-before":te()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:H()}],overflow:[{overflow:ae()}],"overflow-x":[{"overflow-x":ae()}],"overflow-y":[{"overflow-y":ae()}],overscroll:[{overscroll:de()}],"overscroll-x":[{"overscroll-x":de()}],"overscroll-y":[{"overscroll-y":de()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Ae()}],"inset-x":[{"inset-x":Ae()}],"inset-y":[{"inset-y":Ae()}],start:[{start:Ae()}],end:[{end:Ae()}],top:[{top:Ae()}],right:[{right:Ae()}],bottom:[{bottom:Ae()}],left:[{left:Ae()}],visibility:["visible","invisible","collapse"],z:[{z:[hp,"auto",En,Cn]}],basis:[{basis:[Og,"full","auto",o,...ye()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[_r,Og,"auto","initial","none",Cn]}],grow:[{grow:["",_r,En,Cn]}],shrink:[{shrink:["",_r,En,Cn]}],order:[{order:[hp,"first","last","none",En,Cn]}],"grid-cols":[{"grid-cols":_e()}],"col-start-end":[{col:fe()}],"col-start":[{"col-start":Ee()}],"col-end":[{"col-end":Ee()}],"grid-rows":[{"grid-rows":_e()}],"row-start-end":[{row:fe()}],"row-start":[{"row-start":Ee()}],"row-end":[{"row-end":Ee()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":Be()}],"auto-rows":[{"auto-rows":Be()}],gap:[{gap:ye()}],"gap-x":[{"gap-x":ye()}],"gap-y":[{"gap-y":ye()}],"justify-content":[{justify:[...De(),"normal"]}],"justify-items":[{"justify-items":[...Je(),"normal"]}],"justify-self":[{"justify-self":["auto",...Je()]}],"align-content":[{content:["normal",...De()]}],"align-items":[{items:[...Je(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Je(),{baseline:["","last"]}]}],"place-content":[{"place-content":De()}],"place-items":[{"place-items":[...Je(),"baseline"]}],"place-self":[{"place-self":["auto",...Je()]}],p:[{p:ye()}],px:[{px:ye()}],py:[{py:ye()}],ps:[{ps:ye()}],pe:[{pe:ye()}],pt:[{pt:ye()}],pr:[{pr:ye()}],pb:[{pb:ye()}],pl:[{pl:ye()}],m:[{m:Ve()}],mx:[{mx:Ve()}],my:[{my:Ve()}],ms:[{ms:Ve()}],me:[{me:Ve()}],mt:[{mt:Ve()}],mr:[{mr:Ve()}],mb:[{mb:Ve()}],ml:[{ml:Ve()}],"space-x":[{"space-x":ye()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":ye()}],"space-y-reverse":["space-y-reverse"],size:[{size:et()}],w:[{w:[o,"screen",...et()]}],"min-w":[{"min-w":[o,"screen","none",...et()]}],"max-w":[{"max-w":[o,"screen","none","prose",{screen:[d]},...et()]}],h:[{h:["screen","lh",...et()]}],"min-h":[{"min-h":["screen","lh","none",...et()]}],"max-h":[{"max-h":["screen","lh",...et()]}],"font-size":[{text:["base",n,zv,mm]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[r,En,Y2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",X2,Cn]}],"font-family":[{font:[$K,Cn,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[s,En,Cn]}],"line-clamp":[{"line-clamp":[_r,"none",En,Y2]}],leading:[{leading:[h,...ye()]}],"list-image":[{"list-image":["none",En,Cn]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",En,Cn]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:Ce()}],"text-color":[{text:Ce()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Mt(),"wavy"]}],"text-decoration-thickness":[{decoration:[_r,"from-font","auto",En,mm]}],"text-decoration-color":[{decoration:Ce()}],"underline-offset":[{"underline-offset":[_r,"auto",En,Cn]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:ye()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",En,Cn]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",En,Cn]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:We()}],"bg-repeat":[{bg:Qe()}],"bg-size":[{bg:Re()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},hp,En,Cn],radial:["",En,Cn],conic:[hp,En,Cn]},UK,BK]}],"bg-color":[{bg:Ce()}],"gradient-from-pos":[{from:nt()}],"gradient-via-pos":[{via:nt()}],"gradient-to-pos":[{to:nt()}],"gradient-from":[{from:Ce()}],"gradient-via":[{via:Ce()}],"gradient-to":[{to:Ce()}],rounded:[{rounded:pt()}],"rounded-s":[{"rounded-s":pt()}],"rounded-e":[{"rounded-e":pt()}],"rounded-t":[{"rounded-t":pt()}],"rounded-r":[{"rounded-r":pt()}],"rounded-b":[{"rounded-b":pt()}],"rounded-l":[{"rounded-l":pt()}],"rounded-ss":[{"rounded-ss":pt()}],"rounded-se":[{"rounded-se":pt()}],"rounded-ee":[{"rounded-ee":pt()}],"rounded-es":[{"rounded-es":pt()}],"rounded-tl":[{"rounded-tl":pt()}],"rounded-tr":[{"rounded-tr":pt()}],"rounded-br":[{"rounded-br":pt()}],"rounded-bl":[{"rounded-bl":pt()}],"border-w":[{border:Ct()}],"border-w-x":[{"border-x":Ct()}],"border-w-y":[{"border-y":Ct()}],"border-w-s":[{"border-s":Ct()}],"border-w-e":[{"border-e":Ct()}],"border-w-t":[{"border-t":Ct()}],"border-w-r":[{"border-r":Ct()}],"border-w-b":[{"border-b":Ct()}],"border-w-l":[{"border-l":Ct()}],"divide-x":[{"divide-x":Ct()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ct()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Mt(),"hidden","none"]}],"divide-style":[{divide:[...Mt(),"hidden","none"]}],"border-color":[{border:Ce()}],"border-color-x":[{"border-x":Ce()}],"border-color-y":[{"border-y":Ce()}],"border-color-s":[{"border-s":Ce()}],"border-color-e":[{"border-e":Ce()}],"border-color-t":[{"border-t":Ce()}],"border-color-r":[{"border-r":Ce()}],"border-color-b":[{"border-b":Ce()}],"border-color-l":[{"border-l":Ce()}],"divide-color":[{divide:Ce()}],"outline-style":[{outline:[...Mt(),"none","hidden"]}],"outline-offset":[{"outline-offset":[_r,En,Cn]}],"outline-w":[{outline:["",_r,zv,mm]}],"outline-color":[{outline:Ce()}],shadow:[{shadow:["","none",A,A_,P_]}],"shadow-color":[{shadow:Ce()}],"inset-shadow":[{"inset-shadow":["none",P,A_,P_]}],"inset-shadow-color":[{"inset-shadow":Ce()}],"ring-w":[{ring:Ct()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:Ce()}],"ring-offset-w":[{"ring-offset":[_r,mm]}],"ring-offset-color":[{"ring-offset":Ce()}],"inset-ring-w":[{"inset-ring":Ct()}],"inset-ring-color":[{"inset-ring":Ce()}],"text-shadow":[{"text-shadow":["none",N,A_,P_]}],"text-shadow-color":[{"text-shadow":Ce()}],opacity:[{opacity:[_r,En,Cn]}],"mix-blend":[{"mix-blend":[...Nt(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":Nt()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[_r]}],"mask-image-linear-from-pos":[{"mask-linear-from":Tt()}],"mask-image-linear-to-pos":[{"mask-linear-to":Tt()}],"mask-image-linear-from-color":[{"mask-linear-from":Ce()}],"mask-image-linear-to-color":[{"mask-linear-to":Ce()}],"mask-image-t-from-pos":[{"mask-t-from":Tt()}],"mask-image-t-to-pos":[{"mask-t-to":Tt()}],"mask-image-t-from-color":[{"mask-t-from":Ce()}],"mask-image-t-to-color":[{"mask-t-to":Ce()}],"mask-image-r-from-pos":[{"mask-r-from":Tt()}],"mask-image-r-to-pos":[{"mask-r-to":Tt()}],"mask-image-r-from-color":[{"mask-r-from":Ce()}],"mask-image-r-to-color":[{"mask-r-to":Ce()}],"mask-image-b-from-pos":[{"mask-b-from":Tt()}],"mask-image-b-to-pos":[{"mask-b-to":Tt()}],"mask-image-b-from-color":[{"mask-b-from":Ce()}],"mask-image-b-to-color":[{"mask-b-to":Ce()}],"mask-image-l-from-pos":[{"mask-l-from":Tt()}],"mask-image-l-to-pos":[{"mask-l-to":Tt()}],"mask-image-l-from-color":[{"mask-l-from":Ce()}],"mask-image-l-to-color":[{"mask-l-to":Ce()}],"mask-image-x-from-pos":[{"mask-x-from":Tt()}],"mask-image-x-to-pos":[{"mask-x-to":Tt()}],"mask-image-x-from-color":[{"mask-x-from":Ce()}],"mask-image-x-to-color":[{"mask-x-to":Ce()}],"mask-image-y-from-pos":[{"mask-y-from":Tt()}],"mask-image-y-to-pos":[{"mask-y-to":Tt()}],"mask-image-y-from-color":[{"mask-y-from":Ce()}],"mask-image-y-to-color":[{"mask-y-to":Ce()}],"mask-image-radial":[{"mask-radial":[En,Cn]}],"mask-image-radial-from-pos":[{"mask-radial-from":Tt()}],"mask-image-radial-to-pos":[{"mask-radial-to":Tt()}],"mask-image-radial-from-color":[{"mask-radial-from":Ce()}],"mask-image-radial-to-color":[{"mask-radial-to":Ce()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ne()}],"mask-image-conic-pos":[{"mask-conic":[_r]}],"mask-image-conic-from-pos":[{"mask-conic-from":Tt()}],"mask-image-conic-to-pos":[{"mask-conic-to":Tt()}],"mask-image-conic-from-color":[{"mask-conic-from":Ce()}],"mask-image-conic-to-color":[{"mask-conic-to":Ce()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:We()}],"mask-repeat":[{mask:Qe()}],"mask-size":[{mask:Re()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",En,Cn]}],filter:[{filter:["","none",En,Cn]}],blur:[{blur:Ot()}],brightness:[{brightness:[_r,En,Cn]}],contrast:[{contrast:[_r,En,Cn]}],"drop-shadow":[{"drop-shadow":["","none",z,A_,P_]}],"drop-shadow-color":[{"drop-shadow":Ce()}],grayscale:[{grayscale:["",_r,En,Cn]}],"hue-rotate":[{"hue-rotate":[_r,En,Cn]}],invert:[{invert:["",_r,En,Cn]}],saturate:[{saturate:[_r,En,Cn]}],sepia:[{sepia:["",_r,En,Cn]}],"backdrop-filter":[{"backdrop-filter":["","none",En,Cn]}],"backdrop-blur":[{"backdrop-blur":Ot()}],"backdrop-brightness":[{"backdrop-brightness":[_r,En,Cn]}],"backdrop-contrast":[{"backdrop-contrast":[_r,En,Cn]}],"backdrop-grayscale":[{"backdrop-grayscale":["",_r,En,Cn]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[_r,En,Cn]}],"backdrop-invert":[{"backdrop-invert":["",_r,En,Cn]}],"backdrop-opacity":[{"backdrop-opacity":[_r,En,Cn]}],"backdrop-saturate":[{"backdrop-saturate":[_r,En,Cn]}],"backdrop-sepia":[{"backdrop-sepia":["",_r,En,Cn]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":ye()}],"border-spacing-x":[{"border-spacing-x":ye()}],"border-spacing-y":[{"border-spacing-y":ye()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",En,Cn]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[_r,"initial",En,Cn]}],ease:[{ease:["linear","initial",X,En,Cn]}],delay:[{delay:[_r,En,Cn]}],animate:[{animate:["none",K,En,Cn]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[$,En,Cn]}],"perspective-origin":[{"perspective-origin":H()}],rotate:[{rotate:rt()}],"rotate-x":[{"rotate-x":rt()}],"rotate-y":[{"rotate-y":rt()}],"rotate-z":[{"rotate-z":rt()}],scale:[{scale:zt()}],"scale-x":[{"scale-x":zt()}],"scale-y":[{"scale-y":zt()}],"scale-z":[{"scale-z":zt()}],"scale-3d":["scale-3d"],skew:[{skew:Ut()}],"skew-x":[{"skew-x":Ut()}],"skew-y":[{"skew-y":Ut()}],transform:[{transform:[En,Cn,"","none","gpu","cpu"]}],"transform-origin":[{origin:H()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:dt()}],"translate-x":[{"translate-x":dt()}],"translate-y":[{"translate-y":dt()}],"translate-z":[{"translate-z":dt()}],"translate-none":["translate-none"],accent:[{accent:Ce()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:Ce()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",En,Cn]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":ye()}],"scroll-mx":[{"scroll-mx":ye()}],"scroll-my":[{"scroll-my":ye()}],"scroll-ms":[{"scroll-ms":ye()}],"scroll-me":[{"scroll-me":ye()}],"scroll-mt":[{"scroll-mt":ye()}],"scroll-mr":[{"scroll-mr":ye()}],"scroll-mb":[{"scroll-mb":ye()}],"scroll-ml":[{"scroll-ml":ye()}],"scroll-p":[{"scroll-p":ye()}],"scroll-px":[{"scroll-px":ye()}],"scroll-py":[{"scroll-py":ye()}],"scroll-ps":[{"scroll-ps":ye()}],"scroll-pe":[{"scroll-pe":ye()}],"scroll-pt":[{"scroll-pt":ye()}],"scroll-pr":[{"scroll-pr":ye()}],"scroll-pb":[{"scroll-pb":ye()}],"scroll-pl":[{"scroll-pl":ye()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",En,Cn]}],fill:[{fill:["none",...Ce()]}],"stroke-w":[{stroke:[_r,zv,mm,Y2]}],stroke:[{stroke:["none",...Ce()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},HK=AK(WK);function or(...e){return HK(dr(e))}const ZK=zB("inline-flex items-center justify-center rounded-md border px-2 py-0.5 text-xs font-medium w-fit whitespace-nowrap shrink-0 [&>svg]:size-3 gap-1 [&>svg]:pointer-events-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive transition-[color,box-shadow] overflow-hidden",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground [a&]:hover:bg-primary/90",secondary:"border-transparent bg-secondary text-secondary-foreground [a&]:hover:bg-secondary/90",destructive:"border-transparent bg-destructive text-white [a&]:hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"text-foreground [a&]:hover:bg-accent [a&]:hover:text-accent-foreground"}},defaultVariants:{variant:"default"}});function Nn({className:e,variant:t,asChild:n=!1,...r}){const s=n?RB:"span";return f.jsx(s,{"data-slot":"badge",className:or(ZK({variant:t}),e),...r})}const KK="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iODgiIGhlaWdodD0iODgiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgc3Ryb2tlPSIjMDAwIiBzdHJva2UtbGluZWpvaW49InJvdW5kIiBvcGFjaXR5PSIuMyIgZmlsbD0ibm9uZSIgc3Ryb2tlLXdpZHRoPSIzLjciPjxyZWN0IHg9IjE2IiB5PSIxNiIgd2lkdGg9IjU2IiBoZWlnaHQ9IjU2IiByeD0iNiIvPjxwYXRoIGQ9Im0xNiA1OCAxNi0xOCAzMiAzMiIvPjxjaXJjbGUgY3g9IjUzIiBjeT0iMzUiIHI9IjciLz48L3N2Zz4KCg==";function XK(e){const[t,n]=W.useState(!1),r=()=>{n(!0)},{src:s,alt:h,style:d,className:o,..._}=e;return t?f.jsx("div",{className:`inline-block bg-gray-100 text-center align-middle ${o??""}`,style:d,children:f.jsx("div",{className:"flex items-center justify-center w-full h-full",children:f.jsx("img",{src:KK,alt:"Error loading image",..._,"data-original-url":s})})}):f.jsx("img",{src:s,alt:h,className:o,style:d,..._,onError:r})}function dn(e,t,{checkForDefaultPrevented:n=!0}={}){return function(s){if(e?.(s),n===!1||!s.defaultPrevented)return t?.(s)}}function YK(e,t){const n=W.createContext(t),r=h=>{const{children:d,...o}=h,_=W.useMemo(()=>o,Object.values(o));return f.jsx(n.Provider,{value:_,children:d})};r.displayName=e+"Provider";function s(h){const d=W.useContext(n);if(d)return d;if(t!==void 0)return t;throw new Error(`\`${h}\` must be used within \`${e}\``)}return[r,s]}function Wl(e,t=[]){let n=[];function r(h,d){const o=W.createContext(d),_=n.length;n=[...n,d];const w=P=>{const{scope:N,children:z,...q}=P,$=N?.[e]?.[_]||o,O=W.useMemo(()=>q,Object.values(q));return f.jsx($.Provider,{value:O,children:z})};w.displayName=h+"Provider";function A(P,N){const z=N?.[e]?.[_]||o,q=W.useContext(z);if(q)return q;if(d!==void 0)return d;throw new Error(`\`${P}\` must be used within \`${h}\``)}return[w,A]}const s=()=>{const h=n.map(d=>W.createContext(d));return function(o){const _=o?.[e]||h;return W.useMemo(()=>({[`__scope${e}`]:{...o,[e]:_}}),[o,_])}};return s.scopeName=e,[r,JK(s,...t)]}function JK(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(h){const d=r.reduce((o,{useScope:_,scopeName:w})=>{const P=_(h)[`__scope${w}`];return{...o,...P}},{});return W.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}var js=globalThis?.document?W.useLayoutEffect:()=>{},QK=iM[" useId ".trim().toString()]||(()=>{}),eX=0;function vd(e){const[t,n]=W.useState(QK());return js(()=>{n(r=>r??String(eX++))},[e]),e||(t?`radix-${t}`:"")}var tX=iM[" useInsertionEffect ".trim().toString()]||js;function bd({prop:e,defaultProp:t,onChange:n=()=>{},caller:r}){const[s,h,d]=nX({defaultProp:t,onChange:n}),o=e!==void 0,_=o?e:s;{const A=W.useRef(e!==void 0);W.useEffect(()=>{const P=A.current;P!==o&&console.warn(`${r} is changing from ${P?"controlled":"uncontrolled"} to ${o?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),A.current=o},[o,r])}const w=W.useCallback(A=>{if(o){const P=rX(A)?A(e):A;P!==e&&d.current?.(P)}else h(A)},[o,e,h,d]);return[_,w]}function nX({defaultProp:e,onChange:t}){const[n,r]=W.useState(e),s=W.useRef(n),h=W.useRef(t);return tX(()=>{h.current=t},[t]),W.useEffect(()=>{s.current!==n&&(h.current?.(n),s.current=n)},[n,s]),[n,r,h]}function rX(e){return typeof e=="function"}var h0=wB();const YB=Kr(h0);function iX(e){const t=aX(e),n=W.forwardRef((r,s)=>{const{children:h,...d}=r,o=W.Children.toArray(h),_=o.find(sX);if(_){const w=_.props.children,A=o.map(P=>P===_?W.Children.count(w)>1?W.Children.only(null):W.isValidElement(w)?w.props.children:null:P);return f.jsx(t,{...d,ref:s,children:W.isValidElement(w)?W.cloneElement(w,void 0,A):null})}return f.jsx(t,{...d,ref:s,children:h})});return n.displayName=`${e}.Slot`,n}function aX(e){const t=W.forwardRef((n,r)=>{const{children:s,...h}=n;if(W.isValidElement(s)){const d=cX(s),o=lX(h,s.props);return s.type!==W.Fragment&&(o.ref=r?Sf(r,d):d),W.cloneElement(s,o)}return W.Children.count(s)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var oX=Symbol("radix.slottable");function sX(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===oX}function lX(e,t){const n={...t};for(const r in t){const s=e[r],h=t[r];/^on[A-Z]/.test(r)?s&&h?n[r]=(...o)=>{const _=h(...o);return s(...o),_}:s&&(n[r]=s):r==="style"?n[r]={...s,...h}:r==="className"&&(n[r]=[s,h].filter(Boolean).join(" "))}return{...e,...n}}function cX(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var uX=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],qn=uX.reduce((e,t)=>{const n=iX(`Primitive.${t}`),r=W.forwardRef((s,h)=>{const{asChild:d,...o}=s,_=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(_,{...o,ref:h})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{});function JB(e,t){e&&h0.flushSync(()=>e.dispatchEvent(t))}function vh(e){const t=W.useRef(e);return W.useEffect(()=>{t.current=e}),W.useMemo(()=>(...n)=>t.current?.(...n),[])}function dX(e,t=globalThis?.document){const n=vh(e);W.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var hX="DismissableLayer",UC="dismissableLayer.update",fX="dismissableLayer.pointerDownOutside",pX="dismissableLayer.focusOutside",bD,QB=W.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),f0=W.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:h,onInteractOutside:d,onDismiss:o,..._}=e,w=W.useContext(QB),[A,P]=W.useState(null),N=A?.ownerDocument??globalThis?.document,[,z]=W.useState({}),q=gr(t,de=>P(de)),$=Array.from(w.layers),[O]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),X=$.indexOf(O),K=A?$.indexOf(A):-1,te=w.layersWithOutsidePointerEventsDisabled.size>0,ne=K>=X,H=yX(de=>{const ye=de.target,Ae=[...w.branches].some(_e=>_e.contains(ye));!ne||Ae||(s?.(de),d?.(de),de.defaultPrevented||o?.())},N),ae=vX(de=>{const ye=de.target;[...w.branches].some(_e=>_e.contains(ye))||(h?.(de),d?.(de),de.defaultPrevented||o?.())},N);return dX(de=>{K===w.layers.size-1&&(r?.(de),!de.defaultPrevented&&o&&(de.preventDefault(),o()))},N),W.useEffect(()=>{if(A)return n&&(w.layersWithOutsidePointerEventsDisabled.size===0&&(bD=N.body.style.pointerEvents,N.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(A)),w.layers.add(A),wD(),()=>{n&&w.layersWithOutsidePointerEventsDisabled.size===1&&(N.body.style.pointerEvents=bD)}},[A,N,n,w]),W.useEffect(()=>()=>{A&&(w.layers.delete(A),w.layersWithOutsidePointerEventsDisabled.delete(A),wD())},[A,w]),W.useEffect(()=>{const de=()=>z({});return document.addEventListener(UC,de),()=>document.removeEventListener(UC,de)},[]),f.jsx(qn.div,{..._,ref:q,style:{pointerEvents:te?ne?"auto":"none":void 0,...e.style},onFocusCapture:dn(e.onFocusCapture,ae.onFocusCapture),onBlurCapture:dn(e.onBlurCapture,ae.onBlurCapture),onPointerDownCapture:dn(e.onPointerDownCapture,H.onPointerDownCapture)})});f0.displayName=hX;var mX="DismissableLayerBranch",gX=W.forwardRef((e,t)=>{const n=W.useContext(QB),r=W.useRef(null),s=gr(t,r);return W.useEffect(()=>{const h=r.current;if(h)return n.branches.add(h),()=>{n.branches.delete(h)}},[n.branches]),f.jsx(qn.div,{...e,ref:s})});gX.displayName=mX;function yX(e,t=globalThis?.document){const n=vh(e),r=W.useRef(!1),s=W.useRef(()=>{});return W.useEffect(()=>{const h=o=>{if(o.target&&!r.current){let _=function(){e6(fX,n,w,{discrete:!0})};const w={originalEvent:o};o.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=_,t.addEventListener("click",s.current,{once:!0})):_()}else t.removeEventListener("click",s.current);r.current=!1},d=window.setTimeout(()=>{t.addEventListener("pointerdown",h)},0);return()=>{window.clearTimeout(d),t.removeEventListener("pointerdown",h),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function vX(e,t=globalThis?.document){const n=vh(e),r=W.useRef(!1);return W.useEffect(()=>{const s=h=>{h.target&&!r.current&&e6(pX,n,{originalEvent:h},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function wD(){const e=new CustomEvent(UC);document.dispatchEvent(e)}function e6(e,t,n,{discrete:r}){const s=n.originalEvent.target,h=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?JB(s,h):s.dispatchEvent(h)}var J2="focusScope.autoFocusOnMount",Q2="focusScope.autoFocusOnUnmount",SD={bubbles:!1,cancelable:!0},xX="FocusScope",W1=W.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:h,...d}=e,[o,_]=W.useState(null),w=vh(s),A=vh(h),P=W.useRef(null),N=gr(t,$=>_($)),z=W.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;W.useEffect(()=>{if(r){let $=function(te){if(z.paused||!o)return;const ne=te.target;o.contains(ne)?P.current=ne:fp(P.current,{select:!0})},O=function(te){if(z.paused||!o)return;const ne=te.relatedTarget;ne!==null&&(o.contains(ne)||fp(P.current,{select:!0}))},X=function(te){if(document.activeElement===document.body)for(const H of te)H.removedNodes.length>0&&fp(o)};document.addEventListener("focusin",$),document.addEventListener("focusout",O);const K=new MutationObserver(X);return o&&K.observe(o,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",$),document.removeEventListener("focusout",O),K.disconnect()}}},[r,o,z.paused]),W.useEffect(()=>{if(o){PD.add(z);const $=document.activeElement;if(!o.contains($)){const X=new CustomEvent(J2,SD);o.addEventListener(J2,w),o.dispatchEvent(X),X.defaultPrevented||(_X(PX(t6(o)),{select:!0}),document.activeElement===$&&fp(o))}return()=>{o.removeEventListener(J2,w),setTimeout(()=>{const X=new CustomEvent(Q2,SD);o.addEventListener(Q2,A),o.dispatchEvent(X),X.defaultPrevented||fp($??document.body,{select:!0}),o.removeEventListener(Q2,A),PD.remove(z)},0)}}},[o,w,A,z]);const q=W.useCallback($=>{if(!n&&!r||z.paused)return;const O=$.key==="Tab"&&!$.altKey&&!$.ctrlKey&&!$.metaKey,X=document.activeElement;if(O&&X){const K=$.currentTarget,[te,ne]=bX(K);te&&ne?!$.shiftKey&&X===ne?($.preventDefault(),n&&fp(te,{select:!0})):$.shiftKey&&X===te&&($.preventDefault(),n&&fp(ne,{select:!0})):X===K&&$.preventDefault()}},[n,r,z.paused]);return f.jsx(qn.div,{tabIndex:-1,...d,ref:N,onKeyDown:q})});W1.displayName=xX;function _X(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(fp(r,{select:t}),document.activeElement!==n)return}function bX(e){const t=t6(e),n=TD(t,e),r=TD(t.reverse(),e);return[n,r]}function t6(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function TD(e,t){for(const n of e)if(!wX(n,{upTo:t}))return n}function wX(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function SX(e){return e instanceof HTMLInputElement&&"select"in e}function fp(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&SX(e)&&t&&e.select()}}var PD=TX();function TX(){let e=[];return{add(t){const n=e[0];t!==n&&n?.pause(),e=AD(e,t),e.unshift(t)},remove(t){e=AD(e,t),e[0]?.resume()}}}function AD(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function PX(e){return e.filter(t=>t.tagName!=="A")}var AX="Portal",p0=W.forwardRef((e,t)=>{const{container:n,...r}=e,[s,h]=W.useState(!1);js(()=>h(!0),[]);const d=n||s&&globalThis?.document?.body;return d?YB.createPortal(f.jsx(qn.div,{...r,ref:t}),d):null});p0.displayName=AX;function CX(e,t){return W.useReducer((n,r)=>t[n][r]??n,e)}var Bc=e=>{const{present:t,children:n}=e,r=EX(t),s=typeof n=="function"?n({present:r.isPresent}):W.Children.only(n),h=gr(r.ref,jX(s));return typeof n=="function"||r.isPresent?W.cloneElement(s,{ref:h}):null};Bc.displayName="Presence";function EX(e){const[t,n]=W.useState(),r=W.useRef(null),s=W.useRef(e),h=W.useRef("none"),d=e?"mounted":"unmounted",[o,_]=CX(d,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return W.useEffect(()=>{const w=C_(r.current);h.current=o==="mounted"?w:"none"},[o]),js(()=>{const w=r.current,A=s.current;if(A!==e){const N=h.current,z=C_(w);e?_("MOUNT"):z==="none"||w?.display==="none"?_("UNMOUNT"):_(A&&N!==z?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,_]),js(()=>{if(t){let w;const A=t.ownerDocument.defaultView??window,P=z=>{const $=C_(r.current).includes(CSS.escape(z.animationName));if(z.target===t&&$&&(_("ANIMATION_END"),!s.current)){const O=t.style.animationFillMode;t.style.animationFillMode="forwards",w=A.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=O)})}},N=z=>{z.target===t&&(h.current=C_(r.current))};return t.addEventListener("animationstart",N),t.addEventListener("animationcancel",P),t.addEventListener("animationend",P),()=>{A.clearTimeout(w),t.removeEventListener("animationstart",N),t.removeEventListener("animationcancel",P),t.removeEventListener("animationend",P)}}else _("ANIMATION_END")},[t,_]),{isPresent:["mounted","unmountSuspended"].includes(o),ref:W.useCallback(w=>{r.current=w?getComputedStyle(w):null,n(w)},[])}}function C_(e){return e?.animationName||"none"}function jX(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var eS=0;function dM(){W.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??CD()),document.body.insertAdjacentElement("beforeend",e[1]??CD()),eS++,()=>{eS===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),eS--}},[])}function CD(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var oh=function(){return oh=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var h in n)Object.prototype.hasOwnProperty.call(n,h)&&(t[h]=n[h])}return t},oh.apply(this,arguments)};function n6(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function MX(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,h;r<s;r++)(h||!(r in t))&&(h||(h=Array.prototype.slice.call(t,0,r)),h[r]=t[r]);return e.concat(h||Array.prototype.slice.call(t))}var rb="right-scroll-bar-position",ib="width-before-scroll-bar",kX="with-scroll-bars-hidden",IX="--removed-body-scroll-bar-size";function tS(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function NX(e,t){var n=W.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var DX=typeof window<"u"?W.useLayoutEffect:W.useEffect,ED=new WeakMap;function OX(e,t){var n=NX(null,function(r){return e.forEach(function(s){return tS(s,r)})});return DX(function(){var r=ED.get(n);if(r){var s=new Set(r),h=new Set(e),d=n.current;s.forEach(function(o){h.has(o)||tS(o,null)}),h.forEach(function(o){s.has(o)||tS(o,d)})}ED.set(n,e)},[e]),n}function RX(e){return e}function LX(e,t){t===void 0&&(t=RX);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(h){var d=t(h,r);return n.push(d),function(){n=n.filter(function(o){return o!==d})}},assignSyncMedium:function(h){for(r=!0;n.length;){var d=n;n=[],d.forEach(h)}n={push:function(o){return h(o)},filter:function(){return n}}},assignMedium:function(h){r=!0;var d=[];if(n.length){var o=n;n=[],o.forEach(h),d=n}var _=function(){var A=d;d=[],A.forEach(h)},w=function(){return Promise.resolve().then(_)};w(),n={push:function(A){d.push(A),w()},filter:function(A){return d=d.filter(A),n}}}};return s}function zX(e){e===void 0&&(e={});var t=LX(null);return t.options=oh({async:!0,ssr:!1},e),t}var r6=function(e){var t=e.sideCar,n=n6(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return W.createElement(r,oh({},n))};r6.isSideCarExport=!0;function FX(e,t){return e.useMedium(t),r6}var i6=zX(),nS=function(){},H1=W.forwardRef(function(e,t){var n=W.useRef(null),r=W.useState({onScrollCapture:nS,onWheelCapture:nS,onTouchMoveCapture:nS}),s=r[0],h=r[1],d=e.forwardProps,o=e.children,_=e.className,w=e.removeScrollBar,A=e.enabled,P=e.shards,N=e.sideCar,z=e.noRelative,q=e.noIsolation,$=e.inert,O=e.allowPinchZoom,X=e.as,K=X===void 0?"div":X,te=e.gapMode,ne=n6(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),H=N,ae=OX([n,t]),de=oh(oh({},ne),s);return W.createElement(W.Fragment,null,A&&W.createElement(H,{sideCar:i6,removeScrollBar:w,shards:P,noRelative:z,noIsolation:q,inert:$,setCallbacks:h,allowPinchZoom:!!O,lockRef:n,gapMode:te}),d?W.cloneElement(W.Children.only(o),oh(oh({},de),{ref:ae})):W.createElement(K,oh({},de,{className:_,ref:ae}),o))});H1.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};H1.classNames={fullWidth:ib,zeroRight:rb};var BX=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function $X(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=BX();return t&&e.setAttribute("nonce",t),e}function VX(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function UX(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var qX=function(){var e=0,t=null;return{add:function(n){e==0&&(t=$X())&&(VX(t,n),UX(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},GX=function(){var e=qX();return function(t,n){W.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},a6=function(){var e=GX(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},WX={left:0,top:0,right:0,gap:0},rS=function(e){return parseInt(e||"",10)||0},HX=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[rS(n),rS(r),rS(s)]},ZX=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return WX;var t=HX(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},KX=a6(),ry="data-scroll-locked",XX=function(e,t,n,r){var s=e.left,h=e.top,d=e.right,o=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(kX,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(o,"px ").concat(r,`;
  }
  body[`).concat(ry,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(h,`px;
    padding-right: `).concat(d,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(o,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(o,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(rb,` {
    right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(ib,` {
    margin-right: `).concat(o,"px ").concat(r,`;
  }
  
  .`).concat(rb," .").concat(rb,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(ib," .").concat(ib,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(ry,`] {
    `).concat(IX,": ").concat(o,`px;
  }
`)},jD=function(){var e=parseInt(document.body.getAttribute(ry)||"0",10);return isFinite(e)?e:0},YX=function(){W.useEffect(function(){return document.body.setAttribute(ry,(jD()+1).toString()),function(){var e=jD()-1;e<=0?document.body.removeAttribute(ry):document.body.setAttribute(ry,e.toString())}},[])},JX=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;YX();var h=W.useMemo(function(){return ZX(s)},[s]);return W.createElement(KX,{styles:XX(h,!t,s,n?"":"!important")})},qC=!1;if(typeof window<"u")try{var E_=Object.defineProperty({},"passive",{get:function(){return qC=!0,!0}});window.addEventListener("test",E_,E_),window.removeEventListener("test",E_,E_)}catch{qC=!1}var Rg=qC?{passive:!1}:!1,QX=function(e){return e.tagName==="TEXTAREA"},o6=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!QX(e)&&n[t]==="visible")},eY=function(e){return o6(e,"overflowY")},tY=function(e){return o6(e,"overflowX")},MD=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=s6(e,r);if(s){var h=l6(e,r),d=h[1],o=h[2];if(d>o)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},nY=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},rY=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},s6=function(e,t){return e==="v"?eY(t):tY(t)},l6=function(e,t){return e==="v"?nY(t):rY(t)},iY=function(e,t){return e==="h"&&t==="rtl"?-1:1},aY=function(e,t,n,r,s){var h=iY(e,window.getComputedStyle(t).direction),d=h*r,o=n.target,_=t.contains(o),w=!1,A=d>0,P=0,N=0;do{if(!o)break;var z=l6(e,o),q=z[0],$=z[1],O=z[2],X=$-O-h*q;(q||X)&&s6(e,o)&&(P+=X,N+=q);var K=o.parentNode;o=K&&K.nodeType===Node.DOCUMENT_FRAGMENT_NODE?K.host:K}while(!_&&o!==document.body||_&&(t.contains(o)||t===o));return(A&&Math.abs(P)<1||!A&&Math.abs(N)<1)&&(w=!0),w},j_=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},kD=function(e){return[e.deltaX,e.deltaY]},ID=function(e){return e&&"current"in e?e.current:e},oY=function(e,t){return e[0]===t[0]&&e[1]===t[1]},sY=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},lY=0,Lg=[];function cY(e){var t=W.useRef([]),n=W.useRef([0,0]),r=W.useRef(),s=W.useState(lY++)[0],h=W.useState(a6)[0],d=W.useRef(e);W.useEffect(function(){d.current=e},[e]),W.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var $=MX([e.lockRef.current],(e.shards||[]).map(ID),!0).filter(Boolean);return $.forEach(function(O){return O.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),$.forEach(function(O){return O.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var o=W.useCallback(function($,O){if("touches"in $&&$.touches.length===2||$.type==="wheel"&&$.ctrlKey)return!d.current.allowPinchZoom;var X=j_($),K=n.current,te="deltaX"in $?$.deltaX:K[0]-X[0],ne="deltaY"in $?$.deltaY:K[1]-X[1],H,ae=$.target,de=Math.abs(te)>Math.abs(ne)?"h":"v";if("touches"in $&&de==="h"&&ae.type==="range")return!1;var ye=window.getSelection(),Ae=ye&&ye.anchorNode,_e=Ae?Ae===ae||Ae.contains(ae):!1;if(_e)return!1;var fe=MD(de,ae);if(!fe)return!0;if(fe?H=de:(H=de==="v"?"h":"v",fe=MD(de,ae)),!fe)return!1;if(!r.current&&"changedTouches"in $&&(te||ne)&&(r.current=H),!H)return!0;var Ee=r.current||H;return aY(Ee,O,$,Ee==="h"?te:ne)},[]),_=W.useCallback(function($){var O=$;if(!(!Lg.length||Lg[Lg.length-1]!==h)){var X="deltaY"in O?kD(O):j_(O),K=t.current.filter(function(H){return H.name===O.type&&(H.target===O.target||O.target===H.shadowParent)&&oY(H.delta,X)})[0];if(K&&K.should){O.cancelable&&O.preventDefault();return}if(!K){var te=(d.current.shards||[]).map(ID).filter(Boolean).filter(function(H){return H.contains(O.target)}),ne=te.length>0?o(O,te[0]):!d.current.noIsolation;ne&&O.cancelable&&O.preventDefault()}}},[]),w=W.useCallback(function($,O,X,K){var te={name:$,delta:O,target:X,should:K,shadowParent:uY(X)};t.current.push(te),setTimeout(function(){t.current=t.current.filter(function(ne){return ne!==te})},1)},[]),A=W.useCallback(function($){n.current=j_($),r.current=void 0},[]),P=W.useCallback(function($){w($.type,kD($),$.target,o($,e.lockRef.current))},[]),N=W.useCallback(function($){w($.type,j_($),$.target,o($,e.lockRef.current))},[]);W.useEffect(function(){return Lg.push(h),e.setCallbacks({onScrollCapture:P,onWheelCapture:P,onTouchMoveCapture:N}),document.addEventListener("wheel",_,Rg),document.addEventListener("touchmove",_,Rg),document.addEventListener("touchstart",A,Rg),function(){Lg=Lg.filter(function($){return $!==h}),document.removeEventListener("wheel",_,Rg),document.removeEventListener("touchmove",_,Rg),document.removeEventListener("touchstart",A,Rg)}},[]);var z=e.removeScrollBar,q=e.inert;return W.createElement(W.Fragment,null,q?W.createElement(h,{styles:sY(s)}):null,z?W.createElement(JX,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function uY(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const dY=FX(i6,cY);var Z1=W.forwardRef(function(e,t){return W.createElement(H1,oh({},e,{ref:t,sideCar:dY}))});Z1.classNames=H1.classNames;var hY=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},zg=new WeakMap,M_=new WeakMap,k_={},iS=0,c6=function(e){return e&&(e.host||c6(e.parentNode))},fY=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=c6(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},pY=function(e,t,n,r){var s=fY(t,Array.isArray(e)?e:[e]);k_[n]||(k_[n]=new WeakMap);var h=k_[n],d=[],o=new Set,_=new Set(s),w=function(P){!P||o.has(P)||(o.add(P),w(P.parentNode))};s.forEach(w);var A=function(P){!P||_.has(P)||Array.prototype.forEach.call(P.children,function(N){if(o.has(N))A(N);else try{var z=N.getAttribute(r),q=z!==null&&z!=="false",$=(zg.get(N)||0)+1,O=(h.get(N)||0)+1;zg.set(N,$),h.set(N,O),d.push(N),$===1&&q&&M_.set(N,!0),O===1&&N.setAttribute(n,"true"),q||N.setAttribute(r,"true")}catch(X){console.error("aria-hidden: cannot operate on ",N,X)}})};return A(t),o.clear(),iS++,function(){d.forEach(function(P){var N=zg.get(P)-1,z=h.get(P)-1;zg.set(P,N),h.set(P,z),N||(M_.has(P)||P.removeAttribute(r),M_.delete(P)),z||P.removeAttribute(n)}),iS--,iS||(zg=new WeakMap,zg=new WeakMap,M_=new WeakMap,k_={})}},hM=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=hY(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live], script"))),pY(r,s,n,"aria-hidden")):function(){return null}};function mY(e){const t=gY(e),n=W.forwardRef((r,s)=>{const{children:h,...d}=r,o=W.Children.toArray(h),_=o.find(vY);if(_){const w=_.props.children,A=o.map(P=>P===_?W.Children.count(w)>1?W.Children.only(null):W.isValidElement(w)?w.props.children:null:P);return f.jsx(t,{...d,ref:s,children:W.isValidElement(w)?W.cloneElement(w,void 0,A):null})}return f.jsx(t,{...d,ref:s,children:h})});return n.displayName=`${e}.Slot`,n}function gY(e){const t=W.forwardRef((n,r)=>{const{children:s,...h}=n;if(W.isValidElement(s)){const d=_Y(s),o=xY(h,s.props);return s.type!==W.Fragment&&(o.ref=r?Sf(r,d):d),W.cloneElement(s,o)}return W.Children.count(s)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var yY=Symbol("radix.slottable");function vY(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===yY}function xY(e,t){const n={...t};for(const r in t){const s=e[r],h=t[r];/^on[A-Z]/.test(r)?s&&h?n[r]=(...o)=>{const _=h(...o);return s(...o),_}:s&&(n[r]=s):r==="style"?n[r]={...s,...h}:r==="className"&&(n[r]=[s,h].filter(Boolean).join(" "))}return{...e,...n}}function _Y(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var K1="Dialog",[u6]=Wl(K1),[bY,Pd]=u6(K1),d6=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:h,modal:d=!0}=e,o=W.useRef(null),_=W.useRef(null),[w,A]=bd({prop:r,defaultProp:s??!1,onChange:h,caller:K1});return f.jsx(bY,{scope:t,triggerRef:o,contentRef:_,contentId:vd(),titleId:vd(),descriptionId:vd(),open:w,onOpenChange:A,onOpenToggle:W.useCallback(()=>A(P=>!P),[A]),modal:d,children:n})};d6.displayName=K1;var h6="DialogTrigger",f6=W.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Pd(h6,n),h=gr(t,s.triggerRef);return f.jsx(qn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":mM(s.open),...r,ref:h,onClick:dn(e.onClick,s.onOpenToggle)})});f6.displayName=h6;var fM="DialogPortal",[wY,p6]=u6(fM,{forceMount:void 0}),m6=e=>{const{__scopeDialog:t,forceMount:n,children:r,container:s}=e,h=Pd(fM,t);return f.jsx(wY,{scope:t,forceMount:n,children:W.Children.map(r,d=>f.jsx(Bc,{present:n||h.open,children:f.jsx(p0,{asChild:!0,container:s,children:d})}))})};m6.displayName=fM;var Sb="DialogOverlay",g6=W.forwardRef((e,t)=>{const n=p6(Sb,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,h=Pd(Sb,e.__scopeDialog);return h.modal?f.jsx(Bc,{present:r||h.open,children:f.jsx(TY,{...s,ref:t})}):null});g6.displayName=Sb;var SY=mY("DialogOverlay.RemoveScroll"),TY=W.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Pd(Sb,n);return f.jsx(Z1,{as:SY,allowPinchZoom:!0,shards:[s.contentRef],children:f.jsx(qn.div,{"data-state":mM(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),$m="DialogContent",y6=W.forwardRef((e,t)=>{const n=p6($m,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,h=Pd($m,e.__scopeDialog);return f.jsx(Bc,{present:r||h.open,children:h.modal?f.jsx(PY,{...s,ref:t}):f.jsx(AY,{...s,ref:t})})});y6.displayName=$m;var PY=W.forwardRef((e,t)=>{const n=Pd($m,e.__scopeDialog),r=W.useRef(null),s=gr(t,n.contentRef,r);return W.useEffect(()=>{const h=r.current;if(h)return hM(h)},[]),f.jsx(v6,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:dn(e.onCloseAutoFocus,h=>{h.preventDefault(),n.triggerRef.current?.focus()}),onPointerDownOutside:dn(e.onPointerDownOutside,h=>{const d=h.detail.originalEvent,o=d.button===0&&d.ctrlKey===!0;(d.button===2||o)&&h.preventDefault()}),onFocusOutside:dn(e.onFocusOutside,h=>h.preventDefault())})}),AY=W.forwardRef((e,t)=>{const n=Pd($m,e.__scopeDialog),r=W.useRef(!1),s=W.useRef(!1);return f.jsx(v6,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:h=>{e.onCloseAutoFocus?.(h),h.defaultPrevented||(r.current||n.triggerRef.current?.focus(),h.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:h=>{e.onInteractOutside?.(h),h.defaultPrevented||(r.current=!0,h.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const d=h.target;n.triggerRef.current?.contains(d)&&h.preventDefault(),h.detail.originalEvent.type==="focusin"&&s.current&&h.preventDefault()}})}),v6=W.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:h,...d}=e,o=Pd($m,n),_=W.useRef(null),w=gr(t,_);return dM(),f.jsxs(f.Fragment,{children:[f.jsx(W1,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:h,children:f.jsx(f0,{role:"dialog",id:o.contentId,"aria-describedby":o.descriptionId,"aria-labelledby":o.titleId,"data-state":mM(o.open),...d,ref:w,onDismiss:()=>o.onOpenChange(!1)})}),f.jsxs(f.Fragment,{children:[f.jsx(CY,{titleId:o.titleId}),f.jsx(jY,{contentRef:_,descriptionId:o.descriptionId})]})]})}),pM="DialogTitle",x6=W.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Pd(pM,n);return f.jsx(qn.h2,{id:s.titleId,...r,ref:t})});x6.displayName=pM;var _6="DialogDescription",b6=W.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Pd(_6,n);return f.jsx(qn.p,{id:s.descriptionId,...r,ref:t})});b6.displayName=_6;var w6="DialogClose",S6=W.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=Pd(w6,n);return f.jsx(qn.button,{type:"button",...r,ref:t,onClick:dn(e.onClick,()=>s.onOpenChange(!1))})});S6.displayName=w6;function mM(e){return e?"open":"closed"}var T6="DialogTitleWarning",[RTe,P6]=YK(T6,{contentName:$m,titleName:pM,docsSlug:"dialog"}),CY=({titleId:e})=>{const t=P6(T6),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return W.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},EY="DialogDescriptionWarning",jY=({contentRef:e,descriptionId:t})=>{const r=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${P6(EY).contentName}}.`;return W.useEffect(()=>{const s=e.current?.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(r))},[r,e,t]),null},A6=d6,C6=f6,E6=m6,j6=g6,M6=y6,k6=x6,I6=b6,N6=S6;function ff({...e}){return f.jsx(A6,{"data-slot":"dialog",...e})}function gM({...e}){return f.jsx(C6,{"data-slot":"dialog-trigger",...e})}function MY({...e}){return f.jsx(E6,{"data-slot":"dialog-portal",...e})}const D6=W.forwardRef(({className:e,...t},n)=>f.jsx(j6,{ref:n,"data-slot":"dialog-overlay",className:or("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-[9998] bg-black/50",e),...t}));D6.displayName="DialogOverlay";function pf({className:e,children:t,...n}){return f.jsxs(MY,{"data-slot":"dialog-portal",children:[f.jsx(D6,{}),f.jsxs(M6,{"data-slot":"dialog-content",className:or("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-[9999] grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",e),...n,children:[t,f.jsxs(N6,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[f.jsx(G1,{}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function Ep({className:e,...t}){return f.jsx("div",{"data-slot":"dialog-header",className:or("flex flex-col gap-2 text-center sm:text-left",e),...t})}function mf({className:e,...t}){return f.jsx(k6,{"data-slot":"dialog-title",className:or("text-lg leading-none font-semibold",e),...t})}function gf({className:e,...t}){return f.jsx(I6,{"data-slot":"dialog-description",className:or("text-muted-foreground text-sm",e),...t})}const Pm=[{id:"UAV-001",name:"Pyrhos X V1",model:"Aerial Quadcopter",serial:"PXV1-2024-001",type:"UAV",status:"available",battery:100,flightHours:245,lastMaintenance:"2025-01-15",nextMaintenance:"2025-02-15",location:"Hangar A",totalFlights:89,color:"#21A68D"},{id:"UAV-002",name:"AR-2 Aerial",model:"Tactical Drone",serial:"AR2-2024-003",type:"UAV",status:"in-flight",battery:85,flightHours:156,lastMaintenance:"2025-01-10",nextMaintenance:"2025-02-10",location:"Active Mission",totalFlights:54,color:"#21A68D"},{id:"AUV-001",name:"AquaScan Alpha",model:"Survey AUV",serial:"ASA-2024-001",type:"AUV",status:"available",battery:92,diveHours:123,lastMaintenance:"2025-01-12",nextMaintenance:"2025-02-12",location:"Dock A",totalDives:34,maxDepth:500,color:"#0F4C75"},{id:"AUV-002",name:"DeepSeeker Pro",model:"Deep Sea AUV",serial:"DSP-2024-002",type:"AUV",status:"maintenance",battery:78,diveHours:289,lastMaintenance:"2025-01-18",nextMaintenance:"2025-02-18",location:"Maintenance Bay",totalDives:56,maxDepth:1e3,color:"#0F4C75"}],kc=[{id:"MSN-2025-001",name:"PSDKP Kupang Campaign - Week 3",description:"Weekly surveillance campaign to monitor Kupang waters and ensure maritime security compliance.",objective:"Comprehensive maritime security monitoring, vessel tracking, and illegal fishing detection in Kupang area.",droneType:"UAV",location:"Kupang Waters",area:"Kupang Zone A-D",startDate:"2025-01-20",endDate:"2025-01-22",status:"active",totalFlights:4,completedFlights:2,totalDuration:185,totalDetections:87,totalAnomalies:14,coverageArea:8.5,flights:[{id:"F-2025-01-20-001-001",missionId:"MSN-2025-001",flightNumber:1,name:"Morning Patrol - Zone A",date:"2025-01-20",time:"08:00",duration:47,status:"completed",drone:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",aiModel:"Vessel Detection & Recognition",avgSpeed:12.4,maxAltitude:128,distance:8.7,detections:23,area:2.3,anomalies:5,videoId:"JxrGGacMlys",hasVideo:!0,hasTelemetry:!0},{id:"F-2025-01-20-001-002",missionId:"MSN-2025-001",flightNumber:2,name:"Afternoon Patrol - Zone B",date:"2025-01-20",time:"14:30",duration:52,status:"completed",drone:"AR-2 Aerial",droneId:"UAV-002",droneType:"UAV",pilot:"Mike Johnson",aiModel:"Vessel Attribute Detection",avgSpeed:11.8,maxAltitude:115,distance:9.2,detections:31,area:2.8,anomalies:6,videoId:"2TmJKrhBzs4",hasVideo:!0,hasTelemetry:!0},{id:"F-2025-01-21-001-003",missionId:"MSN-2025-001",flightNumber:3,name:"Morning Patrol - Zone C",date:"2025-01-21",time:"08:15",duration:45,status:"pending",drone:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",aiModel:"Vessel Detection & Recognition",avgSpeed:0,maxAltitude:0,distance:0,detections:0,area:0,anomalies:0,hasVideo:!1,hasTelemetry:!1},{id:"F-2025-01-22-001-004",missionId:"MSN-2025-001",flightNumber:4,name:"Final Sweep - Zone D",date:"2025-01-22",time:"09:00",duration:41,status:"pending",drone:"AR-2 Aerial",droneId:"UAV-002",droneType:"UAV",pilot:"Mike Johnson",aiModel:"Vessel Hull Number Recognition",avgSpeed:0,maxAltitude:0,distance:0,detections:0,area:0,anomalies:0,hasVideo:!1,hasTelemetry:!1}]},{id:"MSN-2025-002",name:"Bolok Harbor Security Assessment",description:"Comprehensive security assessment of Bolok Harbor with multiple patrol sessions.",objective:"Identify security vulnerabilities and monitor unauthorized vessel activities in Bolok area.",droneType:"UAV",location:"Bolok, Kupang",area:"Bolok Zones 1-3",startDate:"2025-01-19",endDate:"2025-01-20",status:"completed",totalFlights:3,completedFlights:3,totalDuration:148,totalDetections:112,totalAnomalies:23,coverageArea:12.7,flights:[{id:"F-2025-01-19-002-001",missionId:"MSN-2025-002",flightNumber:1,name:"Zone 1 Security Sweep",date:"2025-01-19",time:"09:00",duration:52,status:"completed",drone:"AR-2 Aerial",droneId:"UAV-002",droneType:"UAV",pilot:"Mike Johnson",aiModel:"Vessel Attribute Detection",avgSpeed:10.5,maxAltitude:95,distance:9.1,detections:47,area:5.2,anomalies:11,videoId:"2TmJKrhBzs4",hasVideo:!0,hasTelemetry:!0},{id:"F-2025-01-19-002-002",missionId:"MSN-2025-002",flightNumber:2,name:"Zone 2 Perimeter Check",date:"2025-01-19",time:"13:45",duration:48,status:"completed",drone:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",aiModel:"Vessel Detection & Recognition",avgSpeed:11.2,maxAltitude:105,distance:8.9,detections:38,area:4.5,anomalies:7,videoId:"JxrGGacMlys",hasVideo:!0,hasTelemetry:!0},{id:"F-2025-01-20-002-003",missionId:"MSN-2025-002",flightNumber:3,name:"Zone 3 Final Assessment",date:"2025-01-20",time:"08:30",duration:48,status:"completed",drone:"AR-2 Aerial",droneId:"UAV-002",droneType:"UAV",pilot:"Mike Johnson",aiModel:"Vessel Hull Number Recognition",avgSpeed:10.8,maxAltitude:98,distance:8.6,detections:27,area:3,anomalies:5,videoId:"_PWIJ3a_XZ4",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-19-003",name:"Tenau Coastal Monitoring",description:"Daily patrol to monitor coastal activities near Tenau.",objective:"Ensure coastal security and monitor environmental issues in Tenau waters.",droneType:"UAV",location:"Tenau Waters",area:"2 km",startDate:"2025-01-19",endDate:"2025-01-19",status:"completed",totalFlights:1,completedFlights:1,totalDuration:38,totalDetections:312,totalAnomalies:8,coverageArea:1.2,flights:[{id:"F-2025-01-19-003-001",missionId:"M-2025-01-19-003",flightNumber:1,name:"Tenau Coastal Monitoring",date:"2025-01-19",time:"10:00",duration:38,status:"completed",drone:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",aiModel:"Trash Detection",avgSpeed:8.2,maxAltitude:45,distance:3.2,detections:312,area:1.2,anomalies:8,videoId:"_PWIJ3a_XZ4",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-18-004",name:"Harbor Gate Inspection - Kupang",description:"Inspection of Kupang Harbor Gate area.",objective:"Ensure bridge integrity and monitor structural issues near Kupang Port.",droneType:"UAV",location:"Kupang Port",area:"1 km",startDate:"2025-01-18",endDate:"2025-01-18",status:"completed",totalFlights:1,completedFlights:1,totalDuration:65,totalDetections:18,totalAnomalies:3,coverageArea:.8,flights:[{id:"F-2025-01-18-004-001",missionId:"M-2025-01-18-004",flightNumber:1,name:"Harbor Gate Inspection - Kupang",date:"2025-01-18",time:"11:00",duration:65,status:"completed",drone:"AR-2 Aerial",droneId:"UAV-002",droneType:"UAV",pilot:"Mike Johnson",aiModel:"Vessel Hull Number Recognition",avgSpeed:9.5,maxAltitude:78,distance:5.8,detections:18,area:.8,anomalies:3,videoId:"JxrGGacMlys",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-18-005",name:"Emergency Response - Sector 7",description:"Emergency response mission in Sector 7.",objective:"Assess and respond to emergency situations.",droneType:"UAV",location:"Emergency Zone",area:"4 km",startDate:"2025-01-18",endDate:"2025-01-18",status:"completed",totalFlights:1,completedFlights:1,totalDuration:28,totalDetections:3,totalAnomalies:1,coverageArea:3.5,flights:[{id:"F-2025-01-18-005-001",missionId:"M-2025-01-18-005",flightNumber:1,name:"Emergency Response - Sector 7",date:"2025-01-18",time:"12:00",duration:28,status:"completed",drone:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",aiModel:"Vessel Detection & Recognition",avgSpeed:15.2,maxAltitude:142,distance:7.1,detections:3,area:3.5,anomalies:1,videoId:"QelM_5EPOHE",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-17-006",name:"Underwater Pipeline Inspection",description:"Inspection of underwater pipeline.",objective:"Ensure pipeline integrity and monitor structural issues.",droneType:"AUV",location:"Tanjung Priok Underwater",area:"1 km",startDate:"2025-01-17",endDate:"2025-01-17",status:"completed",totalFlights:1,completedFlights:1,totalDuration:71,totalDetections:12,totalAnomalies:3,coverageArea:.5,flights:[{id:"F-2025-01-17-006-001",missionId:"M-2025-01-17-006",flightNumber:1,name:"Underwater Pipeline Inspection",date:"2025-01-17",time:"13:00",duration:71,status:"completed",drone:"AquaScan Alpha",droneId:"AUV-001",droneType:"AUV",pilot:"David Lee",aiModel:"Structure Inspection",avgSpeed:2.3,maxDepth:45,distance:2.8,detections:12,area:.5,anomalies:3,videoId:"2TmJKrhBzs4",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-17-007",name:"Deep Sea Survey",description:"Survey of deep sea area.",objective:"Map seabed and monitor environmental issues.",droneType:"AUV",location:"Jakarta Bay",area:"2 km",startDate:"2025-01-17",endDate:"2025-01-17",status:"completed",totalFlights:1,completedFlights:1,totalDuration:95,totalDetections:28,totalAnomalies:7,coverageArea:1.8,flights:[{id:"F-2025-01-17-007-001",missionId:"M-2025-01-17-007",flightNumber:1,name:"Deep Sea Survey",date:"2025-01-17",time:"14:00",duration:95,status:"completed",drone:"DeepSeeker Pro",droneId:"AUV-002",droneType:"AUV",pilot:"David Lee",aiModel:"Seabed Mapping",avgSpeed:1.8,maxDepth:120,distance:4.2,detections:28,area:1.8,anomalies:7,videoId:"QelM_5EPOHE",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-16-008",name:"Port Infrastructure Assessment",description:"Assessment of port infrastructure.",objective:"Evaluate port infrastructure and monitor structural issues.",droneType:"AUV",location:"Port Foundation",area:"1 km",startDate:"2025-01-16",endDate:"2025-01-16",status:"completed",totalFlights:1,completedFlights:1,totalDuration:88,totalDetections:19,totalAnomalies:4,coverageArea:.9,flights:[{id:"F-2025-01-16-008-001",missionId:"M-2025-01-16-008",flightNumber:1,name:"Port Infrastructure Assessment",date:"2025-01-16",time:"15:00",duration:88,status:"completed",drone:"AquaScan Alpha",droneId:"AUV-001",droneType:"AUV",pilot:"David Lee",aiModel:"Structure Inspection",avgSpeed:2.1,maxDepth:35,distance:3.1,detections:19,area:.9,anomalies:4,videoId:"QelM_5EPOHE",hasVideo:!0,hasTelemetry:!0}]},{id:"M-2025-01-16-009",name:"Ship Hull Inspection",description:"Inspection of ship hull.",objective:"Ensure ship hull integrity and monitor structural issues.",droneType:"UAV",location:"Dock 3",area:"0.5 km",startDate:"2025-01-16",endDate:"2025-01-16",status:"completed",totalFlights:1,completedFlights:1,totalDuration:42,totalDetections:8,totalAnomalies:2,coverageArea:.4,flights:[{id:"F-2025-01-16-009-001",missionId:"M-2025-01-16-009",flightNumber:1,name:"Ship Hull Inspection",date:"2025-01-16",time:"16:00",duration:42,status:"completed",drone:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",aiModel:"Vessel Hull Number Recognition",avgSpeed:6.5,maxAltitude:25,distance:2.3,detections:8,area:.4,anomalies:2,videoId:"_PWIJ3a_XZ4",hasVideo:!0,hasTelemetry:!0}]}],aS=[{id:"OP-2025-001",droneName:"Pyrhos X V1",droneId:"UAV-001",droneType:"UAV",pilot:"Sarah Chen",status:"active",mission:"Port Surveillance",videoId:"JxrGGacMlys",position:[-10.1735,123.525],color:"#21A68D",telemetry:{altitude:127,speed:12.3,battery:78,distance:2.4,signal:95,satellites:14,droneHeight:150,temperature:32,windSpeed:8.5,heading:145,voltage:24.3,current:12.5,latitude:-10.195,longitude:123.545,flightTime:"00:23:45"}}],oS=[{id:"DET-001",type:"Vessel Detection & Recognition",missionId:"M-2025-01-20-001",vesselName:"MV OCEANIC SPIRIT",vesselType:"Container Ship",confidence:96,timestamp:"14:23:45",captureImage:"https://images.unsplash.com/photo-1578942219017-04e8a5a61da9?w=400",aisData:{mmsi:"477123456",imo:"IMO9234567",callSign:"VRXY2",speed:8.5,course:145,length:294,width:32,draft:12.5,destination:"Jakarta Port",eta:"2025-01-20 16:00"}},{id:"DET-002",type:"Vessel Hull Number Recognition",missionId:"M-2025-01-18-004",hullNumber:"TK-2847",confidence:92,timestamp:"14:24:12",captureImage:"https://images.unsplash.com/photo-1548599878-3e44d8d1d50d?w=400",aisData:{mmsi:"477234567",imo:"IMO9345678",callSign:"VTKY8",speed:6.2,course:180,length:182,width:28,draft:10.2,destination:"Singapore",eta:"2025-01-21 08:00"}},{id:"DET-003",type:"Vessel Attribute Detection",missionId:"M-2025-01-19-002",attributes:["Cargo Crane","Container Stack","Navigation Lights"],count:3,confidence:89,timestamp:"14:24:38",captureImage:"https://images.unsplash.com/photo-1566576721346-d4a3b4eaeb55?w=400"},{id:"DET-004",type:"Illegal Fishing Indicator",missionId:"M-2025-01-19-003",trashType:"Suspicious Vessel",severity:"High",count:1,confidence:87,timestamp:"14:25:01",captureImage:"https://images.unsplash.com/photo-1621451537084-482c73073a0f?w=400",location:{lat:-10.18,lng:123.51}},{id:"DET-005",type:"Collision Risk",missionId:"M-2025-01-20-001",location:{lat:-10.17,lng:123.53}},{id:"DET-006",type:"Unidentified Object",missionId:"M-2025-01-20-001",location:{lat:-10.19,lng:123.52}},{id:"DET-007",type:"Speeding Violation",missionId:"M-2025-01-20-001",location:{lat:-10.2,lng:123.54}}],sh=[{id:"AIS-477123456",mmsi:"477123456",imo:"IMO9234567",name:"MV OCEANIC SPIRIT",callsign:"VRXY2",position:[-10.161,123.518],type:"Container Ship",speed:8.5,course:145,heading:145,length:294,width:32,draft:12.5,destination:"Kupang Port",eta:"2025-01-20 16:00",status:"Under way using engine"},{id:"AIS-477234567",mmsi:"477234567",imo:"IMO9345678",name:"ASIAN TRADER",callsign:"VTKY8",position:[-10.165,123.521],type:"Tanker",speed:6.2,course:180,heading:180,length:182,width:28,draft:10.2,destination:"Dili",eta:"2025-01-21 08:00",status:"Under way using engine"},{id:"AIS-477345678",mmsi:"477345678",imo:"IMO9456789",name:"PACIFIC HARMONY",callsign:"VRPL5",position:[-10.188,123.512],type:"Container Ship",speed:4.8,course:90,heading:92,length:225,width:30,draft:11,destination:"Kupang Port",eta:"2025-01-20 14:30",status:"Moored"},{id:"AIS-477456789",mmsi:"477456789",imo:"IMO9567890",name:"TIMOR EXPRESS",callsign:"VREX3",position:[-10.168,123.505],type:"Cargo Ship",speed:7.3,course:220,heading:220,length:156,width:24,draft:8.5,destination:"Kupang Port",eta:"2025-01-20 18:00",status:"Under way using engine"},{id:"AIS-477567890",mmsi:"477567890",imo:"IMO9678901",name:"NUSA TENGGARA",callsign:"VRNT7",position:[-10.175,123.51],type:"Ferry",speed:5.5,course:310,heading:310,length:98,width:18,draft:5.2,destination:"Kupang Port",eta:"2025-01-20 15:30",status:"Under way using engine"},{id:"AIS-477678901",mmsi:"477678901",imo:"IMO9789012",name:"KUPANG CARRIER",callsign:"VRKC5",position:[-10.182,123.495],type:"Bulk Carrier",speed:6.8,course:180,heading:180,length:210,width:29,draft:10.8,destination:"Darwin",eta:"2025-01-21 12:00",status:"Under way using engine"},{id:"AIS-477789012",mmsi:"477789012",imo:"IMO9890123",name:"SEA EXPLORER",callsign:"VRSE9",position:[-10.19,123.47],type:"Research Vessel",speed:4.2,course:270,heading:270,length:85,width:15,draft:6.5,destination:"Tasman Sea",eta:"2025-01-25 08:00",status:"Under way using engine"},{id:"AIS-477890123",mmsi:"477890123",imo:"IMO9901234",name:"KUPANG TUG 01",callsign:"VRTG1",position:[-10.165,123.535],type:"Tug",speed:3.5,course:45,heading:45,length:32,width:11,draft:4.5,destination:"Kupang Port",eta:"2025-01-20 14:15",status:"Restricted maneuverability"},{id:"AIS-477901234",mmsi:"477901234",imo:"IMO9012345",name:"BARUNA JAYA",callsign:"VRBJ2",position:[-10.205,123.52],type:"Fishing Vessel",speed:8.2,course:160,heading:155,length:45,width:9,draft:3.8,destination:"Fishing Grounds",eta:"2025-01-22 12:00",status:"Engaged in fishing"},{id:"AIS-477012345",mmsi:"477012345",imo:"IMO9123456",name:"PETRO NAVIGATOR",callsign:"VRPN4",position:[-10.22,123.45],type:"Tanker",speed:12.5,course:280,heading:280,length:245,width:42,draft:14.2,destination:"Singapore",eta:"2025-01-24 10:00",status:"Under way using engine"},{id:"AIS-477123456",mmsi:"477123456",imo:"IMO9234567",name:"LADY LUCK",callsign:"VRLL1",position:[-10.225,123.35],type:"Yacht",speed:15,course:120,heading:120,length:42,width:8,draft:2.5,destination:"Labuan Bajo",eta:"2025-01-21 16:00",status:"Under way using engine"},{id:"AIS-477000001",mmsi:"477000001",name:"KRI DIPONEGORO",callsign:"VRNA1",position:[-10.15,123.58],type:"Military Ops",speed:22,course:90,heading:90,length:90,width:12,draft:4.5,destination:"Naval Base",eta:"2025-01-20 20:00",status:"Under way using engine"},{id:"AIS-477000002",mmsi:"477000002",name:"EXPRESS BAHARI",callsign:"VREB2",position:[-10.172,123.515],type:"High Speed Craft",speed:28.5,course:340,heading:340,length:35,width:7,draft:1.8,destination:"Rote Island",eta:"2025-01-20 15:00",status:"Under way using engine"},{id:"AIS-477000003",mmsi:"477000003",name:"PILOT BOAT 02",callsign:"VRPB2",position:[-10.162,123.53],type:"Pilot Vessel",speed:10,course:210,heading:210,length:18,width:4,draft:1.2,destination:"Kupang Port",eta:"2025-01-20 14:05",status:"Under way using engine"},{id:"AIS-477000004",mmsi:"477000004",name:"WIND SURFER",callsign:"VRWS4",position:[-10.24,123.32],type:"Sailing Vessel",speed:6.5,course:45,heading:50,length:15,width:3.5,draft:2.2,destination:"Coastal Tour",eta:"2025-01-20 17:00",status:"Under way using sail"},{id:"AIS-477000005",mmsi:"477000005",name:"GLOBAL FREIGHTER",callsign:"VRGF5",position:[-10.21,123.42],type:"Cargo",speed:11.2,course:300,heading:300,length:280,width:38,draft:13.5,destination:"Jakarta",eta:"2025-01-23 09:00",status:"Under way using engine"}],hy=[{id:"ADSB-001",name:"GA123",callsign:"GIA123",position:[-10.17,123.62],altitude:35e3,speed:460,heading:90,type:"aircraft",onGround:!1},{id:"ADSB-002",name:"QZ456",callsign:"AWQ456",position:[-10.23,123.48],altitude:4200,speed:280,heading:180,type:"aircraft",onGround:!1},{id:"ADSB-003",name:"SJ123",callsign:"SJY123",position:[-10.19,123.58],altitude:12e3,speed:320,heading:270,type:"aircraft",onGround:!1},{id:"ADSB-004",name:"JT789",callsign:"LNI789",position:[-10.15,123.55],altitude:8500,speed:290,heading:45,type:"aircraft",onGround:!1},{id:"ADSB-005",name:"ID567",callsign:"BTK567",position:[-10.21,123.65],altitude:33e3,speed:440,heading:315,type:"aircraft",onGround:!1},{id:"ADSB-006",name:"IW321",callsign:"WON321",position:[-10.25,123.52],altitude:2500,speed:180,heading:0,type:"aircraft",onGround:!1},{id:"ADSB-007",name:"QG987",callsign:"CTV987",position:[-10.28,123.4],altitude:21e3,speed:380,heading:135,type:"aircraft",onGround:!1}],kY=[{id:"DEPTH-01",type:"depth",name:"24",position:[-10.155,123.51],color:"blue",description:"Depth sounding"},{id:"DEPTH-02",type:"depth",name:"35",position:[-10.16,123.525],color:"blue",description:"Depth sounding"},{id:"DEPTH-03",type:"depth",name:"13",position:[-10.17,123.535],color:"blue",description:"Depth sounding"},{id:"DEPTH-04",type:"depth",name:"52",position:[-10.178,123.538],color:"blue",description:"Depth sounding"},{id:"DEPTH-05",type:"depth",name:"70",position:[-10.182,123.542],color:"blue",description:"Depth sounding"},{id:"DEPTH-06",type:"depth",name:"9.2",position:[-10.165,123.542],color:"blue",description:"Depth sounding"},{id:"ROCK-01",type:"rock",name:"Baron Rock",position:[-10.182,123.535],color:"black",description:"Submerged rock hazard"},{id:"ROCK-02",type:"rock",name:"Heron Rock",position:[-10.162,123.512],color:"black",description:"Submerged rock hazard"},{id:"ROCK-03",type:"rock",name:"Unnamed Hazard",position:[-10.205,123.53],color:"black",description:"Obstruction"},{id:"SPECIAL-01",type:"special",name:"No Anchorage",position:[-10.145,123.535],color:"magenta",description:"Restricted area marker"},{id:"SPECIAL-02",type:"special",name:"Pipeline Area",position:[-10.158,123.548],color:"magenta",description:"Restricted area marker"},{id:"BUOY-RED-01",type:"buoy",subType:"port",name:"PS(1) R 4s",position:[-10.165,123.515],color:"red",description:"Port side marker",lightCharacter:"Fl(1) R 4s"},{id:"BUOY-GREEN-01",type:"buoy",subType:"starboard",name:"SB(1) G 4s",position:[-10.168,123.528],color:"green",description:"Starboard side marker",lightCharacter:"Fl(1) G 4s"},{id:"BEACON-01",type:"beacon",subType:"lighthouse",name:"Kupang Main Light",position:[-10.159,123.538],color:"yellow",description:"Main port entrance lighthouse",lightCharacter:"Fl(2) W 10s"},{id:"BEACON-02",type:"beacon",subType:"lighthouse",name:"East Beacon",position:[-10.175,123.545],color:"yellow",description:"Eastern navigation beacon",lightCharacter:"Fl 5s"},{id:"SAFE-01",type:"safe_water",subType:"fairway",name:"Fairway Buoy",position:[-10.175,123.524],color:"white",description:"Safe water passage"},{id:"ANCHOR-01",type:"anchorage",name:"Anchorage Area A",position:[-10.192,123.528],color:"purple",description:"Designated anchorage area"},{id:"ANCHOR-02",type:"anchorage",name:"Anchorage Area B",position:[-10.188,123.528],color:"purple",description:"Designated anchorage area"},{id:"HAZARD-01",type:"hazard",subType:"rock",name:"Submerged Rock",position:[-10.164,123.52],color:"orange",description:"Dangerous submerged rock"},{id:"HAZARD-02",type:"hazard",subType:"wreck",name:"Wreck Site",position:[-10.188,123.515],color:"orange",description:"Sunken vessel wreck"},{id:"CHANNEL-01",type:"channel",name:"Channel Marker North",position:[-10.162,123.522],color:"cyan",description:"Navigation channel boundary"},{id:"CHANNEL-02",type:"channel",name:"Channel Marker South",position:[-10.178,123.526],color:"cyan",description:"Navigation channel boundary"},{id:"PORT-01",type:"port_facility",subType:"pier",name:"Main Pier",position:[-10.158,123.535],color:"blue",description:"Main loading pier"},{id:"PORT-02",type:"port_facility",subType:"dock",name:"Container Dock",position:[-10.1595,123.537],color:"blue",description:"Container terminal"}],ND=[{id:"W-01",type:"rain",value:"12",unit:"mm/h",position:[-10.15,123.48],temp:24,description:"Moderate Rain"},{id:"W-02",type:"cloud",value:"85",unit:"%",position:[-10.22,123.58],temp:27,description:"Overcast"},{id:"W-03",type:"wind",value:"18",unit:"kn",position:[-10.18,123.42],temp:26,description:"Strong Breeze"},{id:"W-04",type:"wave",value:"2.4",unit:"m",position:[-10.25,123.35],temp:25,description:"High Swell"},{id:"W-05",type:"storm",value:"985",unit:"hPa",position:[-10.3,123.65],temp:22,description:"Low Pressure Area"},{id:"W-06",type:"wind",value:"12",unit:"kn",position:[-10.12,123.55],temp:28,description:"Calm Wind"},{id:"W-07",type:"rain",value:"5",unit:"mm/h",position:[-10.05,123.5],temp:26,description:"Light Drizzle"}],IY=[{id:"GF-01",name:"Primary Search Area",bounds:[[-10.25,123.45],[-10.1,123.65]],color:"#22c55e",dashed:!0},{id:"GF-02",name:"Sector A",bounds:[[-10.1,123.5],[-10.05,123.6]],color:"#22c55e",dashed:!0},{id:"GF-03",name:"Mission AOI",bounds:[[-10.21,123.51],[-10.16,123.58]],color:"#ef4444",dashed:!0}];kc.length,kc.reduce((e,t)=>e+t.totalFlights,0),kc.filter(e=>e.droneType==="UAV").length,kc.filter(e=>e.droneType==="AUV").length,kc.reduce((e,t)=>e+t.totalDetections,0),kc.reduce((e,t)=>e+t.totalAnomalies,0),kc.reduce((e,t)=>e+t.coverageArea,0),kc.reduce((e,t)=>e+t.totalDuration,0),kc.reduce((e,t)=>e+t.flights.reduce((n,r)=>n+r.distance,0),0),Math.round(kc.filter(e=>e.status==="completed").length/kc.length*100),Pm.filter(e=>e.status==="in-flight").length,Pm.filter(e=>e.status==="available").length,Pm.filter(e=>e.status==="maintenance").length,Pm.filter(e=>e.status==="charging").length,Pm.length,sh.length,hy.length;const Ad={MISSIONS:"mariview_missions",DRONES:"mariview_drones",FLIGHTS:"mariview_flights",ASSETS:"mariview_assets",SETTINGS:"mariview_settings"};function lh(e,t){try{const n=JSON.stringify(t);localStorage.setItem(e,n),window.dispatchEvent(new CustomEvent("mariview-storage-change"))}catch(n){console.error(`Error saving to localStorage (${e}):`,n)}}function Su(e,t){try{const n=localStorage.getItem(e);return n===null?t:JSON.parse(n)}catch(n){return console.error(`Error loading from localStorage (${e}):`,n),t}}function NY(){try{Object.values(Ad).forEach(e=>{localStorage.removeItem(e)})}catch(e){console.error("Error clearing localStorage:",e)}}function DY(e){lh(Ad.MISSIONS,e)}function OY(){return Su(Ad.MISSIONS,kc)}function RY(e){lh(Ad.DRONES,e)}function LY(){return Su(Ad.DRONES,Pm)}function zY(e){lh(Ad.ASSETS,e)}function FY(){return Su(Ad.ASSETS,[])}function BY(e){lh(Ad.FLIGHTS,e)}function $Y(){return Su(Ad.FLIGHTS,[])}const VY={theme:"dark",mapProvider:"google",units:"metric",language:"id",notifications:!0};function UY(e){lh(Ad.SETTINGS,e)}function qY(){return Su(Ad.SETTINGS,VY)}function GY(){return{missions:OY(),drones:LY(),assets:FY(),flights:$Y(),settings:qY(),exportDate:new Date().toISOString()}}function WY(e){e.missions&&DY(e.missions),e.drones&&RY(e.drones),e.assets&&zY(e.assets),e.flights&&BY(e.flights),e.settings&&UY(e.settings)}const rl=Su("mariview_missions",kc),Fv=Su("mariview_drones",Pm),xu={totalMissions:rl.length,totalFlights:rl.reduce((e,t)=>e+t.totalFlights,0),uavMissions:rl.filter(e=>e.droneType==="UAV").length,auvMissions:rl.filter(e=>e.droneType==="AUV").length,totalDetections:rl.reduce((e,t)=>e+t.totalDetections,0),totalAnomalies:rl.reduce((e,t)=>e+t.totalAnomalies,0),totalArea:rl.reduce((e,t)=>e+t.coverageArea,0),totalDuration:rl.reduce((e,t)=>e+t.totalDuration,0),totalDistance:rl.reduce((e,t)=>e+t.flights.reduce((n,r)=>n+r.distance,0),0),successRate:Math.round(rl.filter(e=>e.status==="completed").length/rl.length*100),activeDrones:Fv.filter(e=>e.status==="in-flight").length,availableDrones:Fv.filter(e=>e.status==="available").length,maintenanceDrones:Fv.filter(e=>e.status==="maintenance").length,chargingDrones:Fv.filter(e=>e.status==="charging").length,totalDrones:Fv.length,totalVessels:sh.length,totalAircraft:hy.length};var ab={exports:{}};/**
 * MapLibre GL JS
 * @license 3-Clause BSD. Full text of license: https://github.com/maplibre/maplibre-gl-js/blob/v5.18.0/LICENSE.txt
 */var HY=ab.exports,DD;function ZY(){return DD||(DD=1,(function(e,t){(function(n,r){e.exports=r()})(HY,(function(){var n={},r={};function s(d,o,_){if(r[d]=_,d==="index"){var w="var sharedModule = {}; ("+r.shared+")(sharedModule); ("+r.worker+")(sharedModule);",A={};return r.shared(A),r.index(n,A),typeof window<"u"&&n.setWorkerUrl(window.URL.createObjectURL(new Blob([w],{type:"text/javascript"}))),n}}s("shared",["exports"],(function(d){function o(c,i,l,p){return new(l||(l=Promise))((function(v,S){function T(V){try{D(p.next(V))}catch(G){S(G)}}function M(V){try{D(p.throw(V))}catch(G){S(G)}}function D(V){var G;V.done?v(V.value):(G=V.value,G instanceof l?G:new l((function(Z){Z(G)}))).then(T,M)}D((p=p.apply(c,i||[])).next())}))}function _(c,i){this.x=c,this.y=i}function w(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var A,P;typeof SuppressedError=="function"&&SuppressedError,_.prototype={clone(){return new _(this.x,this.y)},add(c){return this.clone()._add(c)},sub(c){return this.clone()._sub(c)},multByPoint(c){return this.clone()._multByPoint(c)},divByPoint(c){return this.clone()._divByPoint(c)},mult(c){return this.clone()._mult(c)},div(c){return this.clone()._div(c)},rotate(c){return this.clone()._rotate(c)},rotateAround(c,i){return this.clone()._rotateAround(c,i)},matMult(c){return this.clone()._matMult(c)},unit(){return this.clone()._unit()},perp(){return this.clone()._perp()},round(){return this.clone()._round()},mag(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals(c){return this.x===c.x&&this.y===c.y},dist(c){return Math.sqrt(this.distSqr(c))},distSqr(c){const i=c.x-this.x,l=c.y-this.y;return i*i+l*l},angle(){return Math.atan2(this.y,this.x)},angleTo(c){return Math.atan2(this.y-c.y,this.x-c.x)},angleWith(c){return this.angleWithSep(c.x,c.y)},angleWithSep(c,i){return Math.atan2(this.x*i-this.y*c,this.x*c+this.y*i)},_matMult(c){const i=c[2]*this.x+c[3]*this.y;return this.x=c[0]*this.x+c[1]*this.y,this.y=i,this},_add(c){return this.x+=c.x,this.y+=c.y,this},_sub(c){return this.x-=c.x,this.y-=c.y,this},_mult(c){return this.x*=c,this.y*=c,this},_div(c){return this.x/=c,this.y/=c,this},_multByPoint(c){return this.x*=c.x,this.y*=c.y,this},_divByPoint(c){return this.x/=c.x,this.y/=c.y,this},_unit(){return this._div(this.mag()),this},_perp(){const c=this.y;return this.y=this.x,this.x=-c,this},_rotate(c){const i=Math.cos(c),l=Math.sin(c),p=l*this.x+i*this.y;return this.x=i*this.x-l*this.y,this.y=p,this},_rotateAround(c,i){const l=Math.cos(c),p=Math.sin(c),v=i.y+p*(this.x-i.x)+l*(this.y-i.y);return this.x=i.x+l*(this.x-i.x)-p*(this.y-i.y),this.y=v,this},_round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},constructor:_},_.convert=function(c){if(c instanceof _)return c;if(Array.isArray(c))return new _(+c[0],+c[1]);if(c.x!==void 0&&c.y!==void 0)return new _(+c.x,+c.y);throw new Error("Expected [x, y] or {x, y} point format")};var N=(function(){if(P)return A;function c(i,l,p,v){this.cx=3*i,this.bx=3*(p-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=p,this.p2y=v}return P=1,A=c,c.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var p=i,v=0;v<8;v++){var S=this.sampleCurveX(p)-i;if(Math.abs(S)<l)return p;var T=this.sampleCurveDerivativeX(p);if(Math.abs(T)<1e-6)break;p-=S/T}var M=0,D=1;for(p=i,v=0;v<20&&(S=this.sampleCurveX(p),!(Math.abs(S-i)<l));v++)i>S?M=p:D=p,p=.5*(D-M)+M;return p},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},A})(),z=w(N);let q,$;function O(){return q==null&&(q=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")&&typeof createImageBitmap=="function"),q}function X(){if($==null&&($=!1,O())){const i=new OffscreenCanvas(5,5).getContext("2d",{willReadFrequently:!0});if(i){for(let p=0;p<25;p++){const v=4*p;i.fillStyle=`rgb(${v},${v+1},${v+2})`,i.fillRect(p%5,Math.floor(p/5),1,1)}const l=i.getImageData(0,0,5,5).data;for(let p=0;p<100;p++)if(p%4!=3&&l[p]!==p){$=!0;break}}}return $||!1}var K=1e-6,te=typeof Float32Array<"u"?Float32Array:Array;function ne(){var c=new te(9);return te!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[5]=0,c[6]=0,c[7]=0),c[0]=1,c[4]=1,c[8]=1,c}function H(c){return c[0]=1,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=1,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=1,c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c}function ae(){var c=new te(3);return te!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c}function de(c){var i=c[0],l=c[1],p=c[2];return Math.sqrt(i*i+l*l+p*p)}function ye(c,i,l){var p=new te(3);return p[0]=c,p[1]=i,p[2]=l,p}function Ae(c,i,l){return c[0]=i[0]+l[0],c[1]=i[1]+l[1],c[2]=i[2]+l[2],c}function _e(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l,c}function fe(c,i,l){var p=i[0],v=i[1],S=i[2],T=l[0],M=l[1],D=l[2];return c[0]=v*D-S*M,c[1]=S*T-p*D,c[2]=p*M-v*T,c}var Ee,Be=de;function De(c,i,l){var p=i[0],v=i[1],S=i[2],T=i[3];return c[0]=l[0]*p+l[4]*v+l[8]*S+l[12]*T,c[1]=l[1]*p+l[5]*v+l[9]*S+l[13]*T,c[2]=l[2]*p+l[6]*v+l[10]*S+l[14]*T,c[3]=l[3]*p+l[7]*v+l[11]*S+l[15]*T,c}function Je(){var c=new te(4);return te!=Float32Array&&(c[0]=0,c[1]=0,c[2]=0),c[3]=1,c}function Ve(c,i,l,p){var v=arguments.length>4&&arguments[4]!==void 0?arguments[4]:"zyx",S=Math.PI/360;i*=S,p*=S,l*=S;var T=Math.sin(i),M=Math.cos(i),D=Math.sin(l),V=Math.cos(l),G=Math.sin(p),Z=Math.cos(p);switch(v){case"xyz":c[0]=T*V*Z+M*D*G,c[1]=M*D*Z-T*V*G,c[2]=M*V*G+T*D*Z,c[3]=M*V*Z-T*D*G;break;case"xzy":c[0]=T*V*Z-M*D*G,c[1]=M*D*Z-T*V*G,c[2]=M*V*G+T*D*Z,c[3]=M*V*Z+T*D*G;break;case"yxz":c[0]=T*V*Z+M*D*G,c[1]=M*D*Z-T*V*G,c[2]=M*V*G-T*D*Z,c[3]=M*V*Z+T*D*G;break;case"yzx":c[0]=T*V*Z+M*D*G,c[1]=M*D*Z+T*V*G,c[2]=M*V*G-T*D*Z,c[3]=M*V*Z-T*D*G;break;case"zxy":c[0]=T*V*Z-M*D*G,c[1]=M*D*Z+T*V*G,c[2]=M*V*G+T*D*Z,c[3]=M*V*Z-T*D*G;break;case"zyx":c[0]=T*V*Z-M*D*G,c[1]=M*D*Z+T*V*G,c[2]=M*V*G-T*D*Z,c[3]=M*V*Z+T*D*G;break;default:throw new Error("Unknown angle order "+v)}return c}function et(){var c=new te(2);return te!=Float32Array&&(c[0]=0,c[1]=0),c}function Ce(c,i){var l=new te(2);return l[0]=c,l[1]=i,l}ae(),Ee=new te(4),te!=Float32Array&&(Ee[0]=0,Ee[1]=0,Ee[2]=0,Ee[3]=0),ae(),ye(1,0,0),ye(0,1,0),Je(),Je(),ne(),et();const We=8192;function Qe(c,i,l){return i*(We/(c.tileSize*Math.pow(2,l-c.tileID.overscaledZ)))}function Re(c,i){return(c%i+i)%i}function nt(c,i,l){return c*(1-l)+i*l}function pt(c){if(c<=0)return 0;if(c>=1)return 1;const i=c*c,l=i*c;return 4*(c<.5?l:3*(c-i)+l-.75)}function Ct(c,i,l,p){const v=new z(c,i,l,p);return S=>v.solve(S)}const Mt=Ct(.25,.1,.25,1);function Nt(c,i,l){return Math.min(l,Math.max(i,c))}function Tt(c,i,l){const p=l-i,v=((c-i)%p+p)%p+i;return v===i?l:v}function Ot(c,...i){for(const l of i)for(const p in l)c[p]=l[p];return c}let rt=1;function zt(c,i,l){const p={};for(const v in c)p[v]=i.call(this,c[v],v,c);return p}function Ut(c,i,l){const p={};for(const v in c)i.call(this,c[v],v,c)&&(p[v]=c[v]);return p}function dt(c){return Array.isArray(c)?c.map(dt):typeof c=="object"&&c?zt(c,dt):c}const Rn={};function cn(c){Rn[c]||(typeof console<"u"&&console.warn(c),Rn[c]=!0)}function Hn(c,i,l){return(l.y-c.y)*(i.x-c.x)>(i.y-c.y)*(l.x-c.x)}function Gn(c){return typeof WorkerGlobalScope<"u"&&c!==void 0&&c instanceof WorkerGlobalScope}let Mn=null;function Nr(c){return typeof ImageBitmap<"u"&&c instanceof ImageBitmap}const Fr="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";function xi(c,i,l,p,v){return o(this,void 0,void 0,(function*(){if(typeof VideoFrame>"u")throw new Error("VideoFrame not supported");const S=new VideoFrame(c,{timestamp:0});try{const T=S?.format;if(!T||!T.startsWith("BGR")&&!T.startsWith("RGB"))throw new Error(`Unrecognized format ${T}`);const M=T.startsWith("BGR"),D=new Uint8ClampedArray(p*v*4);if(yield S.copyTo(D,(function(V,G,Z,ie,se){const pe=4*Math.max(-G,0),me=(Math.max(0,Z)-Z)*ie*4+pe,xe=4*ie,Pe=Math.max(0,G),Le=Math.max(0,Z);return{rect:{x:Pe,y:Le,width:Math.min(V.width,G+ie)-Pe,height:Math.min(V.height,Z+se)-Le},layout:[{offset:me,stride:xe}]}})(c,i,l,p,v)),M)for(let V=0;V<D.length;V+=4){const G=D[V];D[V]=D[V+2],D[V+2]=G}return D}finally{S.close()}}))}let Br,hr;function ri(c,i,l,p){return c.addEventListener(i,l,p),{unsubscribe:()=>{c.removeEventListener(i,l,p)}}}function wa(c){return c*Math.PI/180}function _i(c){return c/Math.PI*180}const Sa={touchstart:!0,touchmove:!0,touchmoveWindow:!0,touchend:!0,touchcancel:!0},Ta={dblclick:!0,click:!0,mouseover:!0,mouseout:!0,mousedown:!0,mousemove:!0,mousemoveWindow:!0,mouseup:!0,mouseupWindow:!0,contextmenu:!0,wheel:!0},Pa="AbortError";class Ya extends Error{constructor(i=Pa){super(i instanceof Error?i.message:i),this.name=Pa,i instanceof Error&&i.stack&&(this.stack=i.stack)}}function gi(c){return c.name===Pa}const it={MAX_PARALLEL_IMAGE_REQUESTS:16,MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:8,MAX_TILE_CACHE_ZOOM_LEVELS:5,REGISTERED_PROTOCOLS:{},WORKER_URL:""};function ee(c){return it.REGISTERED_PROTOCOLS[c.substring(0,c.indexOf("://"))]}const ue="global-dispatcher";class ve extends Error{constructor(i,l,p,v){super(`AJAXError: ${l} (${i}): ${p}`),this.status=i,this.statusText=l,this.url=p,this.body=v}}const Oe=()=>Gn(self)?self.worker&&self.worker.referrer:(window.location.protocol==="blob:"?window.parent:window).location.href,$e=function(c,i){if(/:\/\//.test(c.url)&&!/^https?:|^file:/.test(c.url)){const p=ee(c.url);if(p)return p(c,i);if(Gn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,targetMapId:ue},i)}if(!(/^file:/.test(l=c.url)||/^file:/.test(Oe())&&!/^\w+:/.test(l))){if(fetch&&Request&&AbortController&&Object.prototype.hasOwnProperty.call(Request.prototype,"signal"))return(function(p,v){return o(this,void 0,void 0,(function*(){const S=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,cache:p.cache,referrer:Oe(),signal:v.signal});let T,M;p.type!=="json"||S.headers.has("Accept")||S.headers.set("Accept","application/json");try{T=yield fetch(S)}catch(V){throw gi(V)?V:new ve(0,V.message,p.url,new Blob)}if(!T.ok){const V=yield T.blob();throw new ve(T.status,T.statusText,p.url,V)}M=p.type==="arrayBuffer"||p.type==="image"?T.arrayBuffer():p.type==="json"?T.json():T.text();const D=yield M;return v.signal.throwIfAborted(),{data:D,cacheControl:T.headers.get("Cache-Control"),expires:T.headers.get("Expires")}}))})(c,i);if(Gn(self)&&self.worker&&self.worker.actor)return self.worker.actor.sendAsync({type:"GR",data:c,mustQueue:!0,targetMapId:ue},i)}var l;return(function(p,v){return new Promise(((S,T)=>{var M;const D=new XMLHttpRequest;D.open(p.method||"GET",p.url,!0),p.type!=="arrayBuffer"&&p.type!=="image"||(D.responseType="arraybuffer");for(const V in p.headers)D.setRequestHeader(V,p.headers[V]);p.type==="json"&&(D.responseType="text",!((M=p.headers)===null||M===void 0)&&M.Accept||D.setRequestHeader("Accept","application/json")),D.withCredentials=p.credentials==="include",D.onerror=()=>{T(new Error(D.statusText))},D.onload=()=>{if(!v.signal.aborted)if((D.status>=200&&D.status<300||D.status===0)&&D.response!==null){let V=D.response;if(p.type==="json")try{V=JSON.parse(D.response)}catch(G){return void T(G)}S({data:V,cacheControl:D.getResponseHeader("Cache-Control"),expires:D.getResponseHeader("Expires")})}else{const V=new Blob([D.response],{type:D.getResponseHeader("Content-Type")});T(new ve(D.status,D.statusText,p.url,V))}},v.signal.addEventListener("abort",(()=>{D.abort(),T(new Ya(v.signal.reason))})),D.send(p.body)}))})(c,i)};function ct(c){if(!c||c.indexOf("://")<=0||c.indexOf("data:image/")===0||c.indexOf("blob:")===0)return!0;const i=new URL(c),l=window.location;return i.protocol===l.protocol&&i.host===l.host}function ut(c,i,l){l[c]&&l[c].indexOf(i)!==-1||(l[c]=l[c]||[],l[c].push(i))}function at(c,i,l){if(l&&l[c]){const p=l[c].indexOf(i);p!==-1&&l[c].splice(p,1)}}class ft{constructor(i,l={}){Ot(this,l),this.type=i}}class Dt extends ft{constructor(i,l={}){super("error",Ot({error:i},l))}}class St{on(i,l){return this._listeners=this._listeners||{},ut(i,l,this._listeners),{unsubscribe:()=>{this.off(i,l)}}}off(i,l){return at(i,l,this._listeners),at(i,l,this._oneTimeListeners),this}once(i,l){return l?(this._oneTimeListeners=this._oneTimeListeners||{},ut(i,l,this._oneTimeListeners),this):new Promise((p=>this.once(i,p)))}fire(i,l){typeof i=="string"&&(i=new ft(i,l||{}));const p=i.type;if(this.listens(p)){i.target=this;const v=this._listeners&&this._listeners[p]?this._listeners[p].slice():[];for(const M of v)M.call(this,i);const S=this._oneTimeListeners&&this._oneTimeListeners[p]?this._oneTimeListeners[p].slice():[];for(const M of S)at(p,M,this._oneTimeListeners),M.call(this,i);const T=this._eventedParent;T&&(Ot(i,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),T.fire(i))}else i instanceof Dt&&console.error(i.error);return this}listens(i){return this._listeners&&this._listeners[i]&&this._listeners[i].length>0||this._oneTimeListeners&&this._oneTimeListeners[i]&&this._oneTimeListeners[i].length>0||this._eventedParent&&this._eventedParent.listens(i)}setEventedParent(i,l){return this._eventedParent=i,this._eventedParentData=l,this}}var Ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number",length:2},centerAltitude:{type:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},roll:{type:"number",default:0,units:"degrees"},state:{type:"state",default:{}},light:{type:"light"},sky:{type:"sky"},projection:{type:"projection"},terrain:{type:"terrain"},sources:{required:!0,type:"sources"},sprite:{type:"sprite"},glyphs:{type:"string"},"font-faces":{type:"fontFaces"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},encoding:{type:"enum",values:{mvt:{},mlt:{}},default:"mvt"},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{},custom:{}},default:"mapbox"},redFactor:{type:"number",default:1},blueFactor:{type:"number",default:1},greenFactor:{type:"number",default:1},baseShift:{type:"number",default:0},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{required:!0,type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"filter"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},"color-relief":{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_color-relief","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image",{"!":"icon-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"padding",default:[2],units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},"viewport-glyph":{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-variable-anchor-offset":{type:"variableAnchorOffsetCollection",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field",{"!":"text-overlap"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-overlap":{type:"enum",values:{never:{},always:{},cooperative:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},"layout_color-relief":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible",expression:{interpolated:!1,parameters:["global-state"]},"property-type":"data-constant"}},filter:{type:"boolean",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"expression_name",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},sky:{"sky-color":{type:"color","property-type":"data-constant",default:"#88C6FC",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-color":{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"fog-ground-blend":{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-fog-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"sky-horizon-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"atmosphere-blend":{type:"number","property-type":"data-constant",default:.8,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number",minimum:0,default:1}},projection:{type:{type:"projectionDefinition",default:"mercator","property-type":"data-constant",transition:!1,expression:{interpolated:!0,parameters:["zoom"]}}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_color-relief","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"numberArray",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-altitude":{type:"numberArray",default:45,minimum:0,maximum:90,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"colorArray",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"colorArray",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-method":{type:"enum",values:{standard:{},basic:{},combined:{},igor:{},multidirectional:{}},default:"standard",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},"paint_color-relief":{"color-relief-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"color-relief-color":{type:"color",transition:!1,expression:{interpolated:!0,parameters:["elevation"]},"property-type":"color-ramp"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}},interpolation:{type:"array",value:"interpolation_name",minimum:1},interpolation_name:{type:"enum",values:{linear:{syntax:{overloads:[{parameters:[],"output-type":"interpolation"}],parameters:[]}},exponential:{syntax:{overloads:[{parameters:["base"],"output-type":"interpolation"}],parameters:[{name:"base",type:"number literal"}]}},"cubic-bezier":{syntax:{overloads:[{parameters:["x1","y1","x2","y2"],"output-type":"interpolation"}],parameters:[{name:"x1",type:"number literal"},{name:"y1",type:"number literal"},{name:"x2",type:"number literal"},{name:"y2",type:"number literal"}]}}}}};const Bt=["type","source","source-layer","minzoom","maxzoom","filter","layout"];function gn(c,i){const l={};for(const p in c)p!=="ref"&&(l[p]=c[p]);return Bt.forEach((p=>{p in i&&(l[p]=i[p])})),l}function on(c,i){if(Array.isArray(c)){if(!Array.isArray(i)||c.length!==i.length)return!1;for(let l=0;l<c.length;l++)if(!on(c[l],i[l]))return!1;return!0}if(typeof c=="object"&&c!==null&&i!==null){if(typeof i!="object"||Object.keys(c).length!==Object.keys(i).length)return!1;for(const l in c)if(!on(c[l],i[l]))return!1;return!0}return c===i}function hn(c,i){c.push(i)}function bn(c,i,l){hn(l,{command:"addSource",args:[c,i[c]]})}function pn(c,i,l){hn(i,{command:"removeSource",args:[c]}),l[c]=!0}function er(c,i,l,p){pn(c,l,p),bn(c,i,l)}function Cr(c,i,l){let p;for(p in c[l])if(Object.prototype.hasOwnProperty.call(c[l],p)&&p!=="data"&&!on(c[l][p],i[l][p]))return!1;for(p in i[l])if(Object.prototype.hasOwnProperty.call(i[l],p)&&p!=="data"&&!on(c[l][p],i[l][p]))return!1;return!0}function cr(c,i,l,p,v,S){c=c||{},i=i||{};for(const T in c)Object.prototype.hasOwnProperty.call(c,T)&&(on(c[T],i[T])||l.push({command:S,args:[p,T,i[T],v]}));for(const T in i)Object.prototype.hasOwnProperty.call(i,T)&&!Object.prototype.hasOwnProperty.call(c,T)&&(on(c[T],i[T])||l.push({command:S,args:[p,T,i[T],v]}))}function Dr(c){return c.id}function ur(c,i){return c[i.id]=i,c}class ht{constructor(i,l,p,v){this.message=(i?`${i}: `:"")+p,v&&(this.identifier=v),l!=null&&l.__line__&&(this.line=l.__line__)}}function fr(c,...i){for(const l of i)for(const p in l)c[p]=l[p];return c}class Er extends Error{constructor(i,l){super(l),this.message=l,this.key=i}}class ul{constructor(i,l=[]){this.parent=i,this.bindings={};for(const[p,v]of l)this.bindings[p]=v}concat(i){return new ul(this,i)}get(i){if(this.bindings[i])return this.bindings[i];if(this.parent)return this.parent.get(i);throw new Error(`${i} not found in scope.`)}has(i){return!!this.bindings[i]||!!this.parent&&this.parent.has(i)}}const oa={kind:"null"},Ht={kind:"number"},Tn={kind:"string"},In={kind:"boolean"},Aa={kind:"color"},Ed={kind:"projectionDefinition"},os={kind:"object"},Wn={kind:"value"},$c={kind:"collator"},Zl={kind:"formatted"},jd={kind:"padding"},Ms={kind:"colorArray"},Xr={kind:"numberArray"},Vc={kind:"resolvedImage"},Kl={kind:"variableAnchorOffsetCollection"};function sa(c,i){return{kind:"array",itemType:c,N:i}}function xr(c){if(c.kind==="array"){const i=xr(c.itemType);return typeof c.N=="number"?`array<${i}, ${c.N}>`:c.itemType.kind==="value"?"array":`array<${i}>`}return c.kind}const Uc=[oa,Ht,Tn,In,Aa,Ed,Zl,os,sa(Wn),jd,Xr,Ms,Vc,Kl];function Go(c,i){if(i.kind==="error")return null;if(c.kind==="array"){if(i.kind==="array"&&(i.N===0&&i.itemType.kind==="value"||!Go(c.itemType,i.itemType))&&(typeof c.N!="number"||c.N===i.N))return null}else{if(c.kind===i.kind)return null;if(c.kind==="value"){for(const l of Uc)if(!Go(l,i))return null}}return`Expected ${xr(c)} but found ${xr(i)} instead.`}function ks(c,i){return i.some((l=>l.kind===c.kind))}function Xi(c,i){return i.some((l=>l==="null"?c===null:l==="array"?Array.isArray(c):l==="object"?c&&!Array.isArray(c)&&typeof c=="object":l===typeof c))}function Ca(c,i){return c.kind==="array"&&i.kind==="array"?c.itemType.kind===i.itemType.kind&&typeof c.N=="number":c.kind===i.kind}const Yn=.96422,jr=.82521,Xl=4/29,Or=6/29,ss=3*Or*Or,Yl=Or*Or*Or,Fn=Math.PI/180,Yr=180/Math.PI;function Md(c){return(c%=360)<0&&(c+=360),c}function ku([c,i,l,p]){let v,S;const T=kd((.2225045*(c=Yi(c))+.7168786*(i=Yi(i))+.0606169*(l=Yi(l)))/1);c===i&&i===l?v=S=T:(v=kd((.4360747*c+.3850649*i+.1430804*l)/Yn),S=kd((.0139322*c+.0971045*i+.7141733*l)/jr));const M=116*T-16;return[M<0?0:M,500*(v-T),200*(T-S),p]}function Yi(c){return c<=.04045?c/12.92:Math.pow((c+.055)/1.055,2.4)}function kd(c){return c>Yl?Math.pow(c,1/3):c/ss+Xl}function dl([c,i,l,p]){let v=(c+16)/116,S=isNaN(i)?v:v+i/500,T=isNaN(l)?v:v-l/200;return v=1*yi(v),S=Yn*yi(S),T=jr*yi(T),[Ja(3.1338561*S-1.6168667*v-.4906146*T),Ja(-.9787684*S+1.9161415*v+.033454*T),Ja(.0719453*S-.2289914*v+1.4052427*T),p]}function Ja(c){return(c=c<=.00304?12.92*c:1.055*Math.pow(c,1/2.4)-.055)<0?0:c>1?1:c}function yi(c){return c>Or?c*c*c:ss*(c-Xl)}const Is=Object.hasOwn||function(c,i){return Object.prototype.hasOwnProperty.call(c,i)};function pr(c,i){return Is(c,i)?c[i]:void 0}function Ns(c){return parseInt(c.padEnd(2,c),16)/255}function Iu(c,i){return bo(i?c/100:c,0,1)}function bo(c,i,l){return Math.min(Math.max(i,c),l)}function qc(c){return!c.some(Number.isNaN)}const hl={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};function wo(c,i,l){return c+l*(i-c)}function ls(c,i,l){return c.map(((p,v)=>wo(p,i[v],l)))}class Bn{constructor(i,l,p,v=1,S=!0){this.r=i,this.g=l,this.b=p,this.a=v,S||(this.r*=v,this.g*=v,this.b*=v,v||this.overwriteGetter("rgb",[i,l,p,v]))}static parse(i){if(i instanceof Bn)return i;if(typeof i!="string")return;const l=(function(p){if((p=p.toLowerCase().trim())==="transparent")return[0,0,0,0];const v=pr(hl,p);if(v){const[T,M,D]=v;return[T/255,M/255,D/255,1]}if(p.startsWith("#")&&/^#(?:[0-9a-f]{3,4}|[0-9a-f]{6}|[0-9a-f]{8})$/.test(p)){const T=p.length<6?1:2;let M=1;return[Ns(p.slice(M,M+=T)),Ns(p.slice(M,M+=T)),Ns(p.slice(M,M+=T)),Ns(p.slice(M,M+T)||"ff")]}if(p.startsWith("rgb")){const T=p.match(/^rgba?\(\s*([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s+|\s*(,)\s*)([\de.+-]+)(%)?(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(T){const[M,D,V,G,Z,ie,se,pe,me,xe,Pe,Le]=T,Se=[G||" ",se||" ",xe].join("");if(Se==="  "||Se==="  /"||Se===",,"||Se===",,,"){const ke=[V,ie,me].join(""),qe=ke==="%%%"?100:ke===""?255:0;if(qe){const tt=[bo(+D/qe,0,1),bo(+Z/qe,0,1),bo(+pe/qe,0,1),Pe?Iu(+Pe,Le):1];if(qc(tt))return tt}}return}}const S=p.match(/^hsla?\(\s*([\de.+-]+)(?:deg)?(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s+|\s*(,)\s*)([\de.+-]+)%(?:\s*([,\/])\s*([\de.+-]+)(%)?)?\s*\)$/);if(S){const[T,M,D,V,G,Z,ie,se,pe]=S,me=[D||" ",G||" ",ie].join("");if(me==="  "||me==="  /"||me===",,"||me===",,,"){const xe=[+M,bo(+V,0,100),bo(+Z,0,100),se?Iu(+se,pe):1];if(qc(xe))return(function([Pe,Le,Se,ke]){function qe(tt){const gt=(tt+Pe/30)%12,jt=Le*Math.min(Se,1-Se);return Se-jt*Math.max(-1,Math.min(gt-3,9-gt,1))}return Pe=Md(Pe),Le/=100,Se/=100,[qe(0),qe(8),qe(4),ke]})(xe)}}})(i);return l?new Bn(...l,!1):void 0}get rgb(){const{r:i,g:l,b:p,a:v}=this,S=v||1/0;return this.overwriteGetter("rgb",[i/S,l/S,p/S,v])}get hcl(){return this.overwriteGetter("hcl",(function(i){const[l,p,v,S]=ku(i),T=Math.sqrt(p*p+v*v);return[Math.round(1e4*T)?Md(Math.atan2(v,p)*Yr):NaN,T,l,S]})(this.rgb))}get lab(){return this.overwriteGetter("lab",ku(this.rgb))}overwriteGetter(i,l){return Object.defineProperty(this,i,{value:l}),l}toString(){const[i,l,p,v]=this.rgb;return`rgba(${[i,l,p].map((S=>Math.round(255*S))).join(",")},${v})`}static interpolate(i,l,p,v="rgb"){switch(v){case"rgb":{const[S,T,M,D]=ls(i.rgb,l.rgb,p);return new Bn(S,T,M,D,!1)}case"hcl":{const[S,T,M,D]=i.hcl,[V,G,Z,ie]=l.hcl;let se,pe;if(isNaN(S)||isNaN(V))isNaN(S)?isNaN(V)?se=NaN:(se=V,M!==1&&M!==0||(pe=G)):(se=S,Z!==1&&Z!==0||(pe=T));else{let Se=V-S;V>S&&Se>180?Se-=360:V<S&&S-V>180&&(Se+=360),se=S+p*Se}const[me,xe,Pe,Le]=(function([Se,ke,qe,tt]){return Se=isNaN(Se)?0:Se*Fn,dl([qe,Math.cos(Se)*ke,Math.sin(Se)*ke,tt])})([se,pe??wo(T,G,p),wo(M,Z,p),wo(D,ie,p)]);return new Bn(me,xe,Pe,Le,!1)}case"lab":{const[S,T,M,D]=dl(ls(i.lab,l.lab,p));return new Bn(S,T,M,D,!1)}}}}Bn.black=new Bn(0,0,0,1),Bn.white=new Bn(1,1,1,1),Bn.transparent=new Bn(0,0,0,0),Bn.red=new Bn(1,0,0,1);class Qa{constructor(i,l,p){this.sensitivity=i?l?"variant":"case":l?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(i,l){return this.collator.compare(i,l)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}const Ds=["bottom","center","top"];class So{constructor(i,l,p,v,S,T){this.text=i,this.image=l,this.scale=p,this.fontStack=v,this.textColor=S,this.verticalAlign=T}}class $i{constructor(i){this.sections=i}static fromString(i){return new $i([new So(i,null,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some((i=>i.text.length!==0||i.image&&i.image.name.length!==0))}static factory(i){return i instanceof $i?i:$i.fromString(i)}toString(){return this.sections.length===0?"":this.sections.map((i=>i.text)).join("")}}class _n{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof _n)return i;if(typeof i=="number")return new _n([i,i,i,i]);if(Array.isArray(i)&&!(i.length<1||i.length>4)){for(const l of i)if(typeof l!="number")return;switch(i.length){case 1:i=[i[0],i[0],i[0],i[0]];break;case 2:i=[i[0],i[1],i[0],i[1]];break;case 3:i=[i[0],i[1],i[2],i[1]]}return new _n(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p){return new _n(ls(i.values,l.values,p))}}class sr{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof sr)return i;if(typeof i=="number")return new sr([i]);if(Array.isArray(i)){for(const l of i)if(typeof l!="number")return;return new sr(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p){return new sr(ls(i.values,l.values,p))}}class rn{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof rn)return i;if(typeof i=="string"){const p=Bn.parse(i);return p?new rn([p]):void 0}if(!Array.isArray(i))return;const l=[];for(const p of i){if(typeof p!="string")return;const v=Bn.parse(p);if(!v)return;l.push(v)}return new rn(l)}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p,v="rgb"){const S=[];if(i.values.length!=l.values.length)throw new Error(`colorArray: Arrays have mismatched length (${i.values.length} vs. ${l.values.length}), cannot interpolate.`);for(let T=0;T<i.values.length;T++)S.push(Bn.interpolate(i.values[T],l.values[T],p,v));return new rn(S)}}class Pr extends Error{constructor(i){super(i),this.name="RuntimeError"}toJSON(){return this.message}}const Da=new Set(["center","left","right","top","bottom","top-left","top-right","bottom-left","bottom-right"]);class Ji{constructor(i){this.values=i.slice()}static parse(i){if(i instanceof Ji)return i;if(Array.isArray(i)&&!(i.length<1)&&i.length%2==0){for(let l=0;l<i.length;l+=2){const p=i[l],v=i[l+1];if(typeof p!="string"||!Da.has(p)||!Array.isArray(v)||v.length!==2||typeof v[0]!="number"||typeof v[1]!="number")return}return new Ji(i)}}toString(){return JSON.stringify(this.values)}static interpolate(i,l,p){const v=i.values,S=l.values;if(v.length!==S.length)throw new Pr(`Cannot interpolate values of different length. from: ${i.toString()}, to: ${l.toString()}`);const T=[];for(let M=0;M<v.length;M+=2){if(v[M]!==S[M])throw new Pr(`Cannot interpolate values containing mismatched anchors. from[${M}]: ${v[M]}, to[${M}]: ${S[M]}`);T.push(v[M]);const[D,V]=v[M+1],[G,Z]=S[M+1];T.push([wo(D,G,p),wo(V,Z,p)])}return new Ji(T)}}class la{constructor(i){this.name=i.name,this.available=i.available}toString(){return this.name}static fromString(i){return i?new la({name:i,available:!1}):null}}class ii{constructor(i,l,p){this.from=i,this.to=l,this.transition=p}static interpolate(i,l,p){return new ii(i,l,p)}static parse(i){return i instanceof ii?i:Array.isArray(i)&&i.length===3&&typeof i[0]=="string"&&typeof i[1]=="string"&&typeof i[2]=="number"?new ii(i[0],i[1],i[2]):typeof i=="object"&&typeof i.from=="string"&&typeof i.to=="string"&&typeof i.transition=="number"?new ii(i.from,i.to,i.transition):typeof i=="string"?new ii(i,i,1):void 0}}function Os(c,i,l,p){return typeof c=="number"&&c>=0&&c<=255&&typeof i=="number"&&i>=0&&i<=255&&typeof l=="number"&&l>=0&&l<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[c,i,l,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[c,i,l,p]:[c,i,l]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function To(c){if(c===null||typeof c=="string"||typeof c=="boolean"||typeof c=="number"||c instanceof ii||c instanceof Bn||c instanceof Qa||c instanceof $i||c instanceof _n||c instanceof sr||c instanceof rn||c instanceof Ji||c instanceof la)return!0;if(Array.isArray(c)){for(const i of c)if(!To(i))return!1;return!0}if(typeof c=="object"){for(const i in c)if(!To(c[i]))return!1;return!0}return!1}function tr(c){if(c===null)return oa;if(typeof c=="string")return Tn;if(typeof c=="boolean")return In;if(typeof c=="number")return Ht;if(c instanceof Bn)return Aa;if(c instanceof ii)return Ed;if(c instanceof Qa)return $c;if(c instanceof $i)return Zl;if(c instanceof _n)return jd;if(c instanceof sr)return Xr;if(c instanceof rn)return Ms;if(c instanceof Ji)return Kl;if(c instanceof la)return Vc;if(Array.isArray(c)){const i=c.length;let l;for(const p of c){const v=tr(p);if(l){if(l===v)continue;l=Wn;break}l=v}return sa(l||Wn,i)}return os}function Qi(c){const i=typeof c;return c===null?"":i==="string"||i==="number"||i==="boolean"?String(c):c instanceof Bn||c instanceof ii||c instanceof $i||c instanceof _n||c instanceof sr||c instanceof rn||c instanceof Ji||c instanceof la?c.toString():JSON.stringify(c)}class ca{constructor(i,l){this.type=i,this.value=l}static parse(i,l){if(i.length!==2)return l.error(`'literal' expression requires exactly one argument, but found ${i.length-1} instead.`);if(!To(i[1]))return l.error("invalid value");const p=i[1];let v=tr(p);const S=l.expectedType;return v.kind!=="array"||v.N!==0||!S||S.kind!=="array"||typeof S.N=="number"&&S.N!==0||(v=S),new ca(v,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}}const fl={string:Tn,number:Ht,boolean:In,object:os};class Oa{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let p,v=1;const S=i[0];if(S==="array"){let M,D;if(i.length>2){const V=i[1];if(typeof V!="string"||!(V in fl)||V==="object")return l.error('The item type argument of "array" must be one of string, number, boolean',1);M=fl[V],v++}else M=Wn;if(i.length>3){if(i[2]!==null&&(typeof i[2]!="number"||i[2]<0||i[2]!==Math.floor(i[2])))return l.error('The length argument to "array" must be a positive integer literal',2);D=i[2],v++}p=sa(M,D)}else{if(!fl[S])throw new Error(`Types doesn't contain name = ${S}`);p=fl[S]}const T=[];for(;v<i.length;v++){const M=l.parse(i[v],v,Wn);if(!M)return null;T.push(M)}return new Oa(p,T)}evaluate(i){for(let l=0;l<this.args.length;l++){const p=this.args[l].evaluate(i);if(!Go(this.type,tr(p)))return p;if(l===this.args.length-1)throw new Pr(`Expected value to be of type ${xr(this.type)}, but found ${xr(tr(p))} instead.`)}throw new Error}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}const pl={"to-boolean":In,"to-color":Aa,"to-number":Ht,"to-string":Tn};class eo{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const p=i[0];if(!pl[p])throw new Error(`Can't parse ${p} as it is not part of the known types`);if((p==="to-boolean"||p==="to-string")&&i.length!==2)return l.error("Expected one argument.");const v=pl[p],S=[];for(let T=1;T<i.length;T++){const M=l.parse(i[T],T,Wn);if(!M)return null;S.push(M)}return new eo(v,S)}evaluate(i){switch(this.type.kind){case"boolean":return!!this.args[0].evaluate(i);case"color":{let l,p;for(const v of this.args){if(l=v.evaluate(i),p=null,l instanceof Bn)return l;if(typeof l=="string"){const S=i.parseColor(l);if(S)return S}else if(Array.isArray(l)&&(p=l.length<3||l.length>4?`Invalid rgba value ${JSON.stringify(l)}: expected an array containing either three or four numeric values.`:Os(l[0],l[1],l[2],l[3]),!p))return new Bn(l[0]/255,l[1]/255,l[2]/255,l[3])}throw new Pr(p||`Could not parse color from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"padding":{let l;for(const p of this.args){l=p.evaluate(i);const v=_n.parse(l);if(v)return v}throw new Pr(`Could not parse padding from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"numberArray":{let l;for(const p of this.args){l=p.evaluate(i);const v=sr.parse(l);if(v)return v}throw new Pr(`Could not parse numberArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"colorArray":{let l;for(const p of this.args){l=p.evaluate(i);const v=rn.parse(l);if(v)return v}throw new Pr(`Could not parse colorArray from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"variableAnchorOffsetCollection":{let l;for(const p of this.args){l=p.evaluate(i);const v=Ji.parse(l);if(v)return v}throw new Pr(`Could not parse variableAnchorOffsetCollection from value '${typeof l=="string"?l:JSON.stringify(l)}'`)}case"number":{let l=null;for(const p of this.args){if(l=p.evaluate(i),l===null)return 0;const v=Number(l);if(!isNaN(v))return v}throw new Pr(`Could not convert ${JSON.stringify(l)} to number.`)}case"formatted":return $i.fromString(Qi(this.args[0].evaluate(i)));case"resolvedImage":return la.fromString(Qi(this.args[0].evaluate(i)));case"projectionDefinition":return this.args[0].evaluate(i);default:return Qi(this.args[0].evaluate(i))}}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}const Nu=["Unknown","Point","LineString","Polygon"];class Gc{constructor(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache=new Map,this.availableImages=null,this.canonical=null}id(){return this.feature&&"id"in this.feature?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?Nu[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}parseColor(i){let l=this._parseColorCache.get(i);return l||(l=Bn.parse(i),this._parseColorCache.set(i,l)),l}}class nr{constructor(i,l,p=[],v,S=new ul,T=[]){this.registry=i,this.path=p,this.key=p.map((M=>`[${M}]`)).join(""),this.scope=S,this.errors=T,this.expectedType=v,this._isConstant=l}parse(i,l,p,v,S={}){return l?this.concat(l,p,v)._parse(i,S):this._parse(i,S)}_parse(i,l){function p(v,S,T){return T==="assert"?new Oa(S,[v]):T==="coerce"?new eo(S,[v]):v}if(i!==null&&typeof i!="string"&&typeof i!="boolean"&&typeof i!="number"||(i=["literal",i]),Array.isArray(i)){if(i.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const v=i[0];if(typeof v!="string")return this.error(`Expression name must be a string, but found ${typeof v} instead. If you wanted a literal array, use ["literal", [...]].`,0),null;const S=this.registry[v];if(S){let T=S.parse(i,this);if(!T)return null;if(this.expectedType){const M=this.expectedType,D=T.type;if(M.kind!=="string"&&M.kind!=="number"&&M.kind!=="boolean"&&M.kind!=="object"&&M.kind!=="array"||D.kind!=="value"){if(M.kind==="projectionDefinition"&&["string","array"].includes(D.kind)||["color","formatted","resolvedImage"].includes(M.kind)&&["value","string"].includes(D.kind)||["padding","numberArray"].includes(M.kind)&&["value","number","array"].includes(D.kind)||M.kind==="colorArray"&&["value","string","array"].includes(D.kind)||M.kind==="variableAnchorOffsetCollection"&&["value","array"].includes(D.kind))T=p(T,M,l.typeAnnotation||"coerce");else if(this.checkSubtype(M,D))return null}else T=p(T,M,l.typeAnnotation||"assert")}if(!(T instanceof ca)&&T.type.kind!=="resolvedImage"&&this._isConstant(T)){const M=new Gc;try{T=new ca(T.type,T.evaluate(M))}catch(D){return this.error(D.message),null}}return T}return this.error(`Unknown expression "${v}". If you wanted a literal array, use ["literal", [...]].`,0)}return this.error(i===void 0?"'undefined' value invalid. Use null instead.":typeof i=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof i} instead.`)}concat(i,l,p){const v=typeof i=="number"?this.path.concat(i):this.path,S=p?this.scope.concat(p):this.scope;return new nr(this.registry,this._isConstant,v,l||null,S,this.errors)}error(i,...l){const p=`${this.key}${l.map((v=>`[${v}]`)).join("")}`;this.errors.push(new Er(p,i))}checkSubtype(i,l){const p=Go(i,l);return p&&this.error(p),p}}class yr{constructor(i,l){this.type=l.type,this.bindings=[].concat(i),this.result=l}evaluate(i){return this.result.evaluate(i)}eachChild(i){for(const l of this.bindings)i(l[1]);i(this.result)}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found ${i.length-1} instead.`);const p=[];for(let S=1;S<i.length-1;S+=2){const T=i[S];if(typeof T!="string")return l.error(`Expected string, but found ${typeof T} instead.`,S);if(/[^a-zA-Z0-9_]/.test(T))return l.error("Variable names must contain only alphanumeric characters or '_'.",S);const M=l.parse(i[S+1],S+1);if(!M)return null;p.push([T,M])}const v=l.parse(i[i.length-1],i.length-1,l.expectedType,p);return v?new yr(p,v):null}outputDefined(){return this.result.outputDefined()}}class Vi{constructor(i,l){this.type=l.type,this.name=i,this.boundExpression=l}static parse(i,l){if(i.length!==2||typeof i[1]!="string")return l.error("'var' expression requires exactly one string literal argument.");const p=i[1];return l.scope.has(p)?new Vi(p,l.scope.get(p)):l.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(i){return this.boundExpression.evaluate(i)}eachChild(){}outputDefined(){return!1}}class Zn{constructor(i,l,p){this.type=i,this.index=l,this.input=p}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Ht),v=l.parse(i[2],2,sa(l.expectedType||Wn));return p&&v?new Zn(v.type.itemType,p,v):null}evaluate(i){const l=this.index.evaluate(i),p=this.input.evaluate(i);if(l<0)throw new Pr(`Array index out of bounds: ${l} < 0.`);if(l>=p.length)throw new Pr(`Array index out of bounds: ${l} > ${p.length-1}.`);if(l!==Math.floor(l))throw new Pr(`Array index must be an integer, but found ${l} instead.`);return p[l]}eachChild(i){i(this.index),i(this.input)}outputDefined(){return!1}}class Un{constructor(i,l){this.type=In,this.needle=i,this.haystack=l}static parse(i,l){if(i.length!==3)return l.error(`Expected 2 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Wn),v=l.parse(i[2],2,Wn);return p&&v?ks(p.type,[In,Tn,Ht,oa,Wn])?new Un(p,v):l.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(p.type)} instead`):null}evaluate(i){const l=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!p)return!1;if(!Xi(l,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${xr(tr(l))} instead.`);if(!Xi(p,["string","array"]))throw new Pr(`Expected second argument to be of type array or string, but found ${xr(tr(p))} instead.`);return p.indexOf(l)>=0}eachChild(i){i(this.needle),i(this.haystack)}outputDefined(){return!0}}class Rs{constructor(i,l,p){this.type=Ht,this.needle=i,this.haystack=l,this.fromIndex=p}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Wn),v=l.parse(i[2],2,Wn);if(!p||!v)return null;if(!ks(p.type,[In,Tn,Ht,oa,Wn]))return l.error(`Expected first argument to be of type boolean, string, number or null, but found ${xr(p.type)} instead`);if(i.length===4){const S=l.parse(i[3],3,Ht);return S?new Rs(p,v,S):null}return new Rs(p,v)}evaluate(i){const l=this.needle.evaluate(i),p=this.haystack.evaluate(i);if(!Xi(l,["boolean","string","number","null"]))throw new Pr(`Expected first argument to be of type boolean, string, number or null, but found ${xr(tr(l))} instead.`);let v;if(this.fromIndex&&(v=this.fromIndex.evaluate(i)),Xi(p,["string"])){const S=p.indexOf(l,v);return S===-1?-1:[...p.slice(0,S)].length}if(Xi(p,["array"]))return p.indexOf(l,v);throw new Pr(`Expected second argument to be of type array or string, but found ${xr(tr(p))} instead.`)}eachChild(i){i(this.needle),i(this.haystack),this.fromIndex&&i(this.fromIndex)}outputDefined(){return!1}}class rr{constructor(i,l,p,v,S,T){this.inputType=i,this.type=l,this.input=p,this.cases=v,this.outputs=S,this.otherwise=T}static parse(i,l){if(i.length<5)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if(i.length%2!=1)return l.error("Expected an even number of arguments.");let p,v;l.expectedType&&l.expectedType.kind!=="value"&&(v=l.expectedType);const S={},T=[];for(let V=2;V<i.length-1;V+=2){let G=i[V];const Z=i[V+1];Array.isArray(G)||(G=[G]);const ie=l.concat(V);if(G.length===0)return ie.error("Expected at least one branch label.");for(const pe of G){if(typeof pe!="number"&&typeof pe!="string")return ie.error("Branch labels must be numbers or strings.");if(typeof pe=="number"&&Math.abs(pe)>Number.MAX_SAFE_INTEGER)return ie.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof pe=="number"&&Math.floor(pe)!==pe)return ie.error("Numeric branch labels must be integer values.");if(p){if(ie.checkSubtype(p,tr(pe)))return null}else p=tr(pe);if(S[String(pe)]!==void 0)return ie.error("Branch labels must be unique.");S[String(pe)]=T.length}const se=l.parse(Z,V,v);if(!se)return null;v=v||se.type,T.push(se)}const M=l.parse(i[1],1,Wn);if(!M)return null;const D=l.parse(i[i.length-1],i.length-1,v);return D?M.type.kind!=="value"&&l.concat(1).checkSubtype(p,M.type)?null:new rr(p,v,M,S,T,D):null}evaluate(i){const l=this.input.evaluate(i);return(tr(l)===this.inputType&&this.outputs[this.cases[l]]||this.otherwise).evaluate(i)}eachChild(i){i(this.input),this.outputs.forEach(i),i(this.otherwise)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))&&this.otherwise.outputDefined()}}class Wc{constructor(i,l,p){this.type=i,this.branches=l,this.otherwise=p}static parse(i,l){if(i.length<4)return l.error(`Expected at least 3 arguments, but found only ${i.length-1}.`);if(i.length%2!=0)return l.error("Expected an odd number of arguments.");let p;l.expectedType&&l.expectedType.kind!=="value"&&(p=l.expectedType);const v=[];for(let T=1;T<i.length-1;T+=2){const M=l.parse(i[T],T,In);if(!M)return null;const D=l.parse(i[T+1],T+1,p);if(!D)return null;v.push([M,D]),p=p||D.type}const S=l.parse(i[i.length-1],i.length-1,p);if(!S)return null;if(!p)throw new Error("Can't infer output type");return new Wc(p,v,S)}evaluate(i){for(const[l,p]of this.branches)if(l.evaluate(i))return p.evaluate(i);return this.otherwise.evaluate(i)}eachChild(i){for(const[l,p]of this.branches)i(l),i(p);i(this.otherwise)}outputDefined(){return this.branches.every((([i,l])=>l.outputDefined()))&&this.otherwise.outputDefined()}}class Jr{constructor(i,l,p,v){this.type=i,this.input=l,this.beginIndex=p,this.endIndex=v}static parse(i,l){if(i.length<=2||i.length>=5)return l.error(`Expected 2 or 3 arguments, but found ${i.length-1} instead.`);const p=l.parse(i[1],1,Wn),v=l.parse(i[2],2,Ht);if(!p||!v)return null;if(!ks(p.type,[sa(Wn),Tn,Wn]))return l.error(`Expected first argument to be of type array or string, but found ${xr(p.type)} instead`);if(i.length===4){const S=l.parse(i[3],3,Ht);return S?new Jr(p.type,p,v,S):null}return new Jr(p.type,p,v)}evaluate(i){const l=this.input.evaluate(i),p=this.beginIndex.evaluate(i);let v;if(this.endIndex&&(v=this.endIndex.evaluate(i)),Xi(l,["string"]))return[...l].slice(p,v).join("");if(Xi(l,["array"]))return l.slice(p,v);throw new Pr(`Expected first argument to be of type array or string, but found ${xr(tr(l))} instead.`)}eachChild(i){i(this.input),i(this.beginIndex),this.endIndex&&i(this.endIndex)}outputDefined(){return!1}}function Wo(c,i){const l=c.length-1;let p,v,S=0,T=l,M=0;for(;S<=T;)if(M=Math.floor((S+T)/2),p=c[M],v=c[M+1],p<=i){if(M===l||i<v)return M;S=M+1}else{if(!(p>i))throw new Pr("Input is not a number.");T=M-1}return 0}class cs{constructor(i,l,p){this.type=i,this.input=l,this.labels=[],this.outputs=[];for(const[v,S]of p)this.labels.push(v),this.outputs.push(S)}static parse(i,l){if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");const p=l.parse(i[1],1,Ht);if(!p)return null;const v=[];let S=null;l.expectedType&&l.expectedType.kind!=="value"&&(S=l.expectedType);for(let T=1;T<i.length;T+=2){const M=T===1?-1/0:i[T],D=i[T+1],V=T,G=T+1;if(typeof M!="number")return l.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',V);if(v.length&&v[v.length-1][0]>=M)return l.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',V);const Z=l.parse(D,G,S);if(!Z)return null;S=S||Z.type,v.push([M,Z])}return new cs(S,p,v)}evaluate(i){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(i);const v=this.input.evaluate(i);if(v<=l[0])return p[0].evaluate(i);const S=l.length;return v>=l[S-1]?p[S-1].evaluate(i):p[Wo(l,v)].evaluate(i)}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}}function ml(c){return c&&c.__esModule&&Object.prototype.hasOwnProperty.call(c,"default")?c.default:c}var Du,Ra,Ph=(function(){if(Ra)return Du;function c(i,l,p,v){this.cx=3*i,this.bx=3*(p-i)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*l,this.by=3*(v-l)-this.cy,this.ay=1-this.cy-this.by,this.p1x=i,this.p1y=l,this.p2x=p,this.p2y=v}return Ra=1,Du=c,c.prototype={sampleCurveX:function(i){return((this.ax*i+this.bx)*i+this.cx)*i},sampleCurveY:function(i){return((this.ay*i+this.by)*i+this.cy)*i},sampleCurveDerivativeX:function(i){return(3*this.ax*i+2*this.bx)*i+this.cx},solveCurveX:function(i,l){if(l===void 0&&(l=1e-6),i<0)return 0;if(i>1)return 1;for(var p=i,v=0;v<8;v++){var S=this.sampleCurveX(p)-i;if(Math.abs(S)<l)return p;var T=this.sampleCurveDerivativeX(p);if(Math.abs(T)<1e-6)break;p-=S/T}var M=0,D=1;for(p=i,v=0;v<20&&(S=this.sampleCurveX(p),!(Math.abs(S-i)<l));v++)i>S?M=p:D=p,p=.5*(D-M)+M;return p},solve:function(i,l){return this.sampleCurveY(this.solveCurveX(i,l))}},Du})(),Jl=ml(Ph);class Qr{constructor(i,l,p,v,S){this.type=i,this.operator=l,this.interpolation=p,this.input=v,this.labels=[],this.outputs=[];for(const[T,M]of S)this.labels.push(T),this.outputs.push(M)}static interpolationFactor(i,l,p,v){let S=0;if(i.name==="exponential")S=Po(l,i.base,p,v);else if(i.name==="linear")S=Po(l,1,p,v);else if(i.name==="cubic-bezier"){const T=i.controlPoints;S=new Jl(T[0],T[1],T[2],T[3]).solve(Po(l,1,p,v))}return S}static parse(i,l){let[p,v,S,...T]=i;if(!Array.isArray(v)||v.length===0)return l.error("Expected an interpolation type expression.",1);if(v[0]==="linear")v={name:"linear"};else if(v[0]==="exponential"){const V=v[1];if(typeof V!="number")return l.error("Exponential interpolation requires a numeric base.",1,1);v={name:"exponential",base:V}}else{if(v[0]!=="cubic-bezier")return l.error(`Unknown interpolation type ${String(v[0])}`,1,0);{const V=v.slice(1);if(V.length!==4||V.some((G=>typeof G!="number"||G<0||G>1)))return l.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);v={name:"cubic-bezier",controlPoints:V}}}if(i.length-1<4)return l.error(`Expected at least 4 arguments, but found only ${i.length-1}.`);if((i.length-1)%2!=0)return l.error("Expected an even number of arguments.");if(S=l.parse(S,2,Ht),!S)return null;const M=[];let D=null;p!=="interpolate-hcl"&&p!=="interpolate-lab"||l.expectedType==Ms?l.expectedType&&l.expectedType.kind!=="value"&&(D=l.expectedType):D=Aa;for(let V=0;V<T.length;V+=2){const G=T[V],Z=T[V+1],ie=V+3,se=V+4;if(typeof G!="number")return l.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',ie);if(M.length&&M[M.length-1][0]>=G)return l.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',ie);const pe=l.parse(Z,se,D);if(!pe)return null;D=D||pe.type,M.push([G,pe])}return Ca(D,Ht)||Ca(D,Ed)||Ca(D,Aa)||Ca(D,jd)||Ca(D,Xr)||Ca(D,Ms)||Ca(D,Kl)||Ca(D,sa(Ht))?new Qr(D,p,v,S,M):l.error(`Type ${xr(D)} is not interpolatable.`)}evaluate(i){const l=this.labels,p=this.outputs;if(l.length===1)return p[0].evaluate(i);const v=this.input.evaluate(i);if(v<=l[0])return p[0].evaluate(i);const S=l.length;if(v>=l[S-1])return p[S-1].evaluate(i);const T=Wo(l,v),M=Qr.interpolationFactor(this.interpolation,v,l[T],l[T+1]),D=p[T].evaluate(i),V=p[T+1].evaluate(i);switch(this.operator){case"interpolate":switch(this.type.kind){case"number":return wo(D,V,M);case"color":return Bn.interpolate(D,V,M);case"padding":return _n.interpolate(D,V,M);case"colorArray":return rn.interpolate(D,V,M);case"numberArray":return sr.interpolate(D,V,M);case"variableAnchorOffsetCollection":return Ji.interpolate(D,V,M);case"array":return ls(D,V,M);case"projectionDefinition":return ii.interpolate(D,V,M)}case"interpolate-hcl":switch(this.type.kind){case"color":return Bn.interpolate(D,V,M,"hcl");case"colorArray":return rn.interpolate(D,V,M,"hcl")}case"interpolate-lab":switch(this.type.kind){case"color":return Bn.interpolate(D,V,M,"lab");case"colorArray":return rn.interpolate(D,V,M,"lab")}}}eachChild(i){i(this.input);for(const l of this.outputs)i(l)}outputDefined(){return this.outputs.every((i=>i.outputDefined()))}}function Po(c,i,l,p){const v=p-l,S=c-l;return v===0?0:i===1?S/v:(Math.pow(i,S)-1)/(Math.pow(i,v)-1)}const qr={color:Bn.interpolate,number:wo,padding:_n.interpolate,numberArray:sr.interpolate,colorArray:rn.interpolate,variableAnchorOffsetCollection:Ji.interpolate,array:ls};class Ls{constructor(i,l){this.type=i,this.args=l}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");let p=null;const v=l.expectedType;v&&v.kind!=="value"&&(p=v);const S=[];for(const M of i.slice(1)){const D=l.parse(M,1+S.length,p,void 0,{typeAnnotation:"omit"});if(!D)return null;p=p||D.type,S.push(D)}if(!p)throw new Error("No output type");const T=v&&S.some((M=>Go(v,M.type)));return new Ls(T?Wn:p,S)}evaluate(i){let l,p=null,v=0;for(const S of this.args)if(v++,p=S.evaluate(i),p&&p instanceof la&&!p.available&&(l||(l=p.name),p=null,v===this.args.length&&(p=l)),p!==null)break;return p}eachChild(i){this.args.forEach(i)}outputDefined(){return this.args.every((i=>i.outputDefined()))}}function Ah(c,i){return c==="=="||c==="!="?i.kind==="boolean"||i.kind==="string"||i.kind==="number"||i.kind==="null"||i.kind==="value":i.kind==="string"||i.kind==="number"||i.kind==="value"}function gl(c,i,l,p){return p.compare(i,l)===0}function ai(c,i,l){const p=c!=="=="&&c!=="!=";return class O6{constructor(S,T,M){this.type=In,this.lhs=S,this.rhs=T,this.collator=M,this.hasUntypedArgument=S.type.kind==="value"||T.type.kind==="value"}static parse(S,T){if(S.length!==3&&S.length!==4)return T.error("Expected two or three arguments.");const M=S[0];let D=T.parse(S[1],1,Wn);if(!D)return null;if(!Ah(M,D.type))return T.concat(1).error(`"${M}" comparisons are not supported for type '${xr(D.type)}'.`);let V=T.parse(S[2],2,Wn);if(!V)return null;if(!Ah(M,V.type))return T.concat(2).error(`"${M}" comparisons are not supported for type '${xr(V.type)}'.`);if(D.type.kind!==V.type.kind&&D.type.kind!=="value"&&V.type.kind!=="value")return T.error(`Cannot compare types '${xr(D.type)}' and '${xr(V.type)}'.`);p&&(D.type.kind==="value"&&V.type.kind!=="value"?D=new Oa(V.type,[D]):D.type.kind!=="value"&&V.type.kind==="value"&&(V=new Oa(D.type,[V])));let G=null;if(S.length===4){if(D.type.kind!=="string"&&V.type.kind!=="string"&&D.type.kind!=="value"&&V.type.kind!=="value")return T.error("Cannot use collator to compare non-string types.");if(G=T.parse(S[3],3,$c),!G)return null}return new O6(D,V,G)}evaluate(S){const T=this.lhs.evaluate(S),M=this.rhs.evaluate(S);if(p&&this.hasUntypedArgument){const D=tr(T),V=tr(M);if(D.kind!==V.kind||D.kind!=="string"&&D.kind!=="number")throw new Pr(`Expected arguments for "${c}" to be (string, string) or (number, number), but found (${D.kind}, ${V.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const D=tr(T),V=tr(M);if(D.kind!=="string"||V.kind!=="string")return i(S,T,M)}return this.collator?l(S,T,M,this.collator.evaluate(S)):i(S,T,M)}eachChild(S){S(this.lhs),S(this.rhs),this.collator&&S(this.collator)}outputDefined(){return!0}}}const Ef=ai("==",(function(c,i,l){return i===l}),gl),Ch=ai("!=",(function(c,i,l){return i!==l}),(function(c,i,l,p){return!gl(0,i,l,p)})),Id=ai("<",(function(c,i,l){return i<l}),(function(c,i,l,p){return p.compare(i,l)<0})),Vp=ai(">",(function(c,i,l){return i>l}),(function(c,i,l,p){return p.compare(i,l)>0})),yl=ai("<=",(function(c,i,l){return i<=l}),(function(c,i,l,p){return p.compare(i,l)<=0})),Ou=ai(">=",(function(c,i,l){return i>=l}),(function(c,i,l,p){return p.compare(i,l)>=0}));class zs{constructor(i,l,p){this.type=$c,this.locale=p,this.caseSensitive=i,this.diacriticSensitive=l}static parse(i,l){if(i.length!==2)return l.error("Expected one argument.");const p=i[1];if(typeof p!="object"||Array.isArray(p))return l.error("Collator options argument must be an object.");const v=l.parse(p["case-sensitive"]!==void 0&&p["case-sensitive"],1,In);if(!v)return null;const S=l.parse(p["diacritic-sensitive"]!==void 0&&p["diacritic-sensitive"],1,In);if(!S)return null;let T=null;return p.locale&&(T=l.parse(p.locale,1,Tn),!T)?null:new zs(v,S,T)}evaluate(i){return new Qa(this.caseSensitive.evaluate(i),this.diacriticSensitive.evaluate(i),this.locale?this.locale.evaluate(i):null)}eachChild(i){i(this.caseSensitive),i(this.diacriticSensitive),this.locale&&i(this.locale)}outputDefined(){return!1}}class Fs{constructor(i,l,p,v,S){this.type=Tn,this.number=i,this.locale=l,this.currency=p,this.minFractionDigits=v,this.maxFractionDigits=S}static parse(i,l){if(i.length!==3)return l.error("Expected two arguments.");const p=l.parse(i[1],1,Ht);if(!p)return null;const v=i[2];if(typeof v!="object"||Array.isArray(v))return l.error("NumberFormat options argument must be an object.");let S=null;if(v.locale&&(S=l.parse(v.locale,1,Tn),!S))return null;let T=null;if(v.currency&&(T=l.parse(v.currency,1,Tn),!T))return null;let M=null;if(v["min-fraction-digits"]&&(M=l.parse(v["min-fraction-digits"],1,Ht),!M))return null;let D=null;return v["max-fraction-digits"]&&(D=l.parse(v["max-fraction-digits"],1,Ht),!D)?null:new Fs(p,S,T,M,D)}evaluate(i){return new Intl.NumberFormat(this.locale?this.locale.evaluate(i):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(i):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(i):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(i):void 0}).format(this.number.evaluate(i))}eachChild(i){i(this.number),this.locale&&i(this.locale),this.currency&&i(this.currency),this.minFractionDigits&&i(this.minFractionDigits),this.maxFractionDigits&&i(this.maxFractionDigits)}outputDefined(){return!1}}class Ru{constructor(i){this.type=Zl,this.sections=i}static parse(i,l){if(i.length<2)return l.error("Expected at least one argument.");const p=i[1];if(!Array.isArray(p)&&typeof p=="object")return l.error("First argument must be an image or text section.");const v=[];let S=!1;for(let T=1;T<=i.length-1;++T){const M=i[T];if(S&&typeof M=="object"&&!Array.isArray(M)){S=!1;let D=null;if(M["font-scale"]&&(D=l.parse(M["font-scale"],1,Ht),!D))return null;let V=null;if(M["text-font"]&&(V=l.parse(M["text-font"],1,sa(Tn)),!V))return null;let G=null;if(M["text-color"]&&(G=l.parse(M["text-color"],1,Aa),!G))return null;let Z=null;if(M["vertical-align"]){if(typeof M["vertical-align"]=="string"&&!Ds.includes(M["vertical-align"]))return l.error(`'vertical-align' must be one of: 'bottom', 'center', 'top' but found '${M["vertical-align"]}' instead.`);if(Z=l.parse(M["vertical-align"],1,Tn),!Z)return null}const ie=v[v.length-1];ie.scale=D,ie.font=V,ie.textColor=G,ie.verticalAlign=Z}else{const D=l.parse(i[T],1,Wn);if(!D)return null;const V=D.type.kind;if(V!=="string"&&V!=="value"&&V!=="null"&&V!=="resolvedImage")return l.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");S=!0,v.push({content:D,scale:null,font:null,textColor:null,verticalAlign:null})}}return new Ru(v)}evaluate(i){return new $i(this.sections.map((l=>{const p=l.content.evaluate(i);return tr(p)===Vc?new So("",p,null,null,null,l.verticalAlign?l.verticalAlign.evaluate(i):null):new So(Qi(p),null,l.scale?l.scale.evaluate(i):null,l.font?l.font.evaluate(i).join(","):null,l.textColor?l.textColor.evaluate(i):null,l.verticalAlign?l.verticalAlign.evaluate(i):null)})))}eachChild(i){for(const l of this.sections)i(l.content),l.scale&&i(l.scale),l.font&&i(l.font),l.textColor&&i(l.textColor),l.verticalAlign&&i(l.verticalAlign)}outputDefined(){return!1}}class Ao{constructor(i){this.type=Vc,this.input=i}static parse(i,l){if(i.length!==2)return l.error("Expected two arguments.");const p=l.parse(i[1],1,Tn);return p?new Ao(p):l.error("No image name provided.")}evaluate(i){const l=this.input.evaluate(i),p=la.fromString(l);return p&&i.availableImages&&(p.available=i.availableImages.indexOf(l)>-1),p}eachChild(i){i(this.input)}outputDefined(){return!1}}class ea{constructor(i){this.type=Ht,this.input=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=l.parse(i[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?l.error(`Expected argument of type string or array, but found ${xr(p.type)} instead.`):new ea(p):null}evaluate(i){const l=this.input.evaluate(i);if(typeof l=="string")return[...l].length;if(Array.isArray(l))return l.length;throw new Pr(`Expected value to be of type string or array, but found ${xr(tr(l))} instead.`)}eachChild(i){i(this.input)}outputDefined(){return!1}}const bi=8192;function Eh(c,i){const l=(180+c[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c[1]*Math.PI/360)))/360,v=Math.pow(2,i.z);return[Math.round(l*v*bi),Math.round(p*v*bi)]}function Ql(c,i){const l=Math.pow(2,i.z);return[(v=(c[0]/bi+i.x)/l,360*v-180),(p=(c[1]/bi+i.y)/l,360/Math.PI*Math.atan(Math.exp((180-360*p)*Math.PI/180))-90)];var p,v}function ec(c,i){c[0]=Math.min(c[0],i[0]),c[1]=Math.min(c[1],i[1]),c[2]=Math.max(c[2],i[0]),c[3]=Math.max(c[3],i[1])}function Bs(c,i){return!(c[0]<=i[0]||c[2]>=i[2]||c[1]<=i[1]||c[3]>=i[3])}function Up(c,i,l){const p=c[0]-i[0],v=c[1]-i[1],S=c[0]-l[0],T=c[1]-l[1];return p*T-S*v==0&&p*S<=0&&v*T<=0}function Nd(c,i,l,p){return(v=[p[0]-l[0],p[1]-l[1]])[0]*(S=[i[0]-c[0],i[1]-c[1]])[1]-v[1]*S[0]!=0&&!(!Ho(c,i,l,p)||!Ho(l,p,c,i));var v,S}function jf(c,i,l){for(const p of l)for(let v=0;v<p.length-1;++v)if(Nd(c,i,p[v],p[v+1]))return!0;return!1}function Hc(c,i,l=!1){let p=!1;for(const M of i)for(let D=0;D<M.length-1;D++){if(Up(c,M[D],M[D+1]))return l;(S=M[D])[1]>(v=c)[1]!=(T=M[D+1])[1]>v[1]&&v[0]<(T[0]-S[0])*(v[1]-S[1])/(T[1]-S[1])+S[0]&&(p=!p)}var v,S,T;return p}function La(c,i){for(const l of i)if(Hc(c,l))return!0;return!1}function $s(c,i){for(const l of c)if(!Hc(l,i))return!1;for(let l=0;l<c.length-1;++l)if(jf(c[l],c[l+1],i))return!1;return!0}function Zc(c,i){for(const l of i)if($s(c,l))return!0;return!1}function Ho(c,i,l,p){const v=p[0]-l[0],S=p[1]-l[1],T=(c[0]-l[0])*S-v*(c[1]-l[1]),M=(i[0]-l[0])*S-v*(i[1]-l[1]);return T>0&&M<0||T<0&&M>0}function Dd(c,i,l){const p=[];for(let v=0;v<c.length;v++){const S=[];for(let T=0;T<c[v].length;T++){const M=Eh(c[v][T],l);ec(i,M),S.push(M)}p.push(S)}return p}function Vs(c,i,l){const p=[];for(let v=0;v<c.length;v++){const S=Dd(c[v],i,l);p.push(S)}return p}function jh(c,i,l,p){if(c[0]<l[0]||c[0]>l[2]){const v=.5*p;let S=c[0]-l[0]>v?-p:l[0]-c[0]>v?p:0;S===0&&(S=c[0]-l[2]>v?-p:l[2]-c[0]>v?p:0),c[0]+=S}ec(i,c)}function tc(c,i,l,p){const v=Math.pow(2,p.z)*bi,S=[p.x*bi,p.y*bi],T=[];for(const M of c)for(const D of M){const V=[D.x+S[0],D.y+S[1]];jh(V,i,l,v),T.push(V)}return T}function Od(c,i,l,p){const v=Math.pow(2,p.z)*bi,S=[p.x*bi,p.y*bi],T=[];for(const D of c){const V=[];for(const G of D){const Z=[G.x+S[0],G.y+S[1]];ec(i,Z),V.push(Z)}T.push(V)}if(i[2]-i[0]<=v/2){(M=i)[0]=M[1]=1/0,M[2]=M[3]=-1/0;for(const D of T)for(const V of D)jh(V,i,l,v)}var M;return T}class Ea{constructor(i,l){this.type=In,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'within' expression requires exactly one argument, but found ${i.length-1} instead.`);if(To(i[1])){const p=i[1];if(p.type==="FeatureCollection"){const v=[];for(const S of p.features){const{type:T,coordinates:M}=S.geometry;T==="Polygon"&&v.push(M),T==="MultiPolygon"&&v.push(...M)}if(v.length)return new Ea(p,{type:"MultiPolygon",coordinates:v})}else if(p.type==="Feature"){const v=p.geometry.type;if(v==="Polygon"||v==="MultiPolygon")return new Ea(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Ea(p,p)}return l.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(l,p){const v=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=l.canonicalID();if(p.type==="Polygon"){const M=Dd(p.coordinates,S,T),D=tc(l.geometry(),v,S,T);if(!Bs(v,S))return!1;for(const V of D)if(!Hc(V,M))return!1}if(p.type==="MultiPolygon"){const M=Vs(p.coordinates,S,T),D=tc(l.geometry(),v,S,T);if(!Bs(v,S))return!1;for(const V of D)if(!La(V,M))return!1}return!0})(i,this.geometries);if(i.geometryType()==="LineString")return(function(l,p){const v=[1/0,1/0,-1/0,-1/0],S=[1/0,1/0,-1/0,-1/0],T=l.canonicalID();if(p.type==="Polygon"){const M=Dd(p.coordinates,S,T),D=Od(l.geometry(),v,S,T);if(!Bs(v,S))return!1;for(const V of D)if(!$s(V,M))return!1}if(p.type==="MultiPolygon"){const M=Vs(p.coordinates,S,T),D=Od(l.geometry(),v,S,T);if(!Bs(v,S))return!1;for(const V of D)if(!Zc(V,M))return!1}return!0})(i,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}}let Mf=class{constructor(c=[],i=(l,p)=>l<p?-1:l>p?1:0){if(this.data=c,this.length=this.data.length,this.compare=i,this.length>0)for(let l=(this.length>>1)-1;l>=0;l--)this._down(l)}push(c){this.data.push(c),this._up(this.length++)}pop(){if(this.length===0)return;const c=this.data[0],i=this.data.pop();return--this.length>0&&(this.data[0]=i,this._down(0)),c}peek(){return this.data[0]}_up(c){const{data:i,compare:l}=this,p=i[c];for(;c>0;){const v=c-1>>1,S=i[v];if(l(p,S)>=0)break;i[c]=S,c=v}i[c]=p}_down(c){const{data:i,compare:l}=this,p=this.length>>1,v=i[c];for(;c<p;){let S=1+(c<<1);const T=S+1;if(T<this.length&&l(i[T],i[S])<0&&(S=T),l(i[S],v)>=0)break;i[c]=i[S],c=S}i[c]=v}};function us(c,i,l=0,p=c.length-1,v=Mh){for(;p>l;){if(p-l>600){const D=p-l+1,V=i-l+1,G=Math.log(D),Z=.5*Math.exp(2*G/3),ie=.5*Math.sqrt(G*Z*(D-Z)/D)*(V-D/2<0?-1:1);us(c,i,Math.max(l,Math.floor(i-V*Z/D+ie)),Math.min(p,Math.floor(i+(D-V)*Z/D+ie)),v)}const S=c[i];let T=l,M=p;for(Us(c,l,i),v(c[p],S)>0&&Us(c,l,p);T<M;){for(Us(c,T,M),T++,M--;v(c[T],S)<0;)T++;for(;v(c[M],S)>0;)M--}v(c[l],S)===0?Us(c,l,M):(M++,Us(c,M,p)),M<=i&&(l=M+1),i<=M&&(p=M-1)}}function Us(c,i,l){const p=c[i];c[i]=c[l],c[l]=p}function Mh(c,i){return c<i?-1:c>i?1:0}function nc(c,i){if(c.length<=1)return[c];const l=[];let p,v;for(const S of c){const T=to(S);T!==0&&(S.area=Math.abs(T),v===void 0&&(v=T<0),v===T<0?(p&&l.push(p),p=[S]):p.push(S))}if(p&&l.push(p),i>1)for(let S=0;S<l.length;S++)l[S].length<=i||(us(l[S],i,1,l[S].length-1,Lu),l[S]=l[S].slice(0,i));return l}function Lu(c,i){return i.area-c.area}function to(c){let i=0;for(let l,p,v=0,S=c.length,T=S-1;v<S;T=v++)l=c[v],p=c[T],i+=(p.x-l.x)*(l.y+p.y);return i}const kf=1/298.257223563,no=kf*(2-kf),If=Math.PI/180;class Co{constructor(i){const l=6378.137*If*1e3,p=Math.cos(i*If),v=1/(1-no*(1-p*p)),S=Math.sqrt(v);this.kx=l*S*p,this.ky=l*S*v*(1-no)}distance(i,l){const p=this.wrap(i[0]-l[0])*this.kx,v=(i[1]-l[1])*this.ky;return Math.sqrt(p*p+v*v)}pointOnLine(i,l){let p,v,S,T,M=1/0;for(let D=0;D<i.length-1;D++){let V=i[D][0],G=i[D][1],Z=this.wrap(i[D+1][0]-V)*this.kx,ie=(i[D+1][1]-G)*this.ky,se=0;Z===0&&ie===0||(se=(this.wrap(l[0]-V)*this.kx*Z+(l[1]-G)*this.ky*ie)/(Z*Z+ie*ie),se>1?(V=i[D+1][0],G=i[D+1][1]):se>0&&(V+=Z/this.kx*se,G+=ie/this.ky*se)),Z=this.wrap(l[0]-V)*this.kx,ie=(l[1]-G)*this.ky;const pe=Z*Z+ie*ie;pe<M&&(M=pe,p=V,v=G,S=D,T=se)}return{point:[p,v],index:S,t:Math.max(0,Math.min(1,T))}}wrap(i){for(;i<-180;)i+=360;for(;i>180;)i-=360;return i}}function rc(c,i){return i[0]-c[0]}function ic(c){return c[1]-c[0]+1}function za(c,i){return c[1]>=c[0]&&c[1]<i}function vl(c,i){if(c[0]>c[1])return[null,null];const l=ic(c);if(i){if(l===2)return[c,null];const v=Math.floor(l/2);return[[c[0],c[0]+v],[c[0]+v,c[1]]]}if(l===1)return[c,null];const p=Math.floor(l/2)-1;return[[c[0],c[0]+p],[c[0]+p+1,c[1]]]}function Kc(c,i){if(!za(i,c.length))return[1/0,1/0,-1/0,-1/0];const l=[1/0,1/0,-1/0,-1/0];for(let p=i[0];p<=i[1];++p)ec(l,c[p]);return l}function Xc(c){const i=[1/0,1/0,-1/0,-1/0];for(const l of c)for(const p of l)ec(i,p);return i}function xl(c){return c[0]!==-1/0&&c[1]!==-1/0&&c[2]!==1/0&&c[3]!==1/0}function ac(c,i,l){if(!xl(c)||!xl(i))return NaN;let p=0,v=0;return c[2]<i[0]&&(p=i[0]-c[2]),c[0]>i[2]&&(p=c[0]-i[2]),c[1]>i[3]&&(v=c[1]-i[3]),c[3]<i[1]&&(v=i[1]-c[3]),l.distance([0,0],[p,v])}function qs(c,i,l){const p=l.pointOnLine(i,c);return l.distance(c,p.point)}function Rd(c,i,l,p,v){const S=Math.min(qs(c,[l,p],v),qs(i,[l,p],v)),T=Math.min(qs(l,[c,i],v),qs(p,[c,i],v));return Math.min(S,T)}function Zo(c,i,l,p,v){if(!za(i,c.length)||!za(p,l.length))return 1/0;let S=1/0;for(let T=i[0];T<i[1];++T){const M=c[T],D=c[T+1];for(let V=p[0];V<p[1];++V){const G=l[V],Z=l[V+1];if(Nd(M,D,G,Z))return 0;S=Math.min(S,Rd(M,D,G,Z,v))}}return S}function Gs(c,i,l,p,v){if(!za(i,c.length)||!za(p,l.length))return NaN;let S=1/0;for(let T=i[0];T<=i[1];++T)for(let M=p[0];M<=p[1];++M)if(S=Math.min(S,v.distance(c[T],l[M])),S===0)return S;return S}function Nf(c,i,l){if(Hc(c,i,!0))return 0;let p=1/0;for(const v of i){const S=v[0],T=v[v.length-1];if(S!==T&&(p=Math.min(p,qs(c,[T,S],l)),p===0))return p;const M=l.pointOnLine(v,c);if(p=Math.min(p,l.distance(c,M.point)),p===0)return p}return p}function kh(c,i,l,p){if(!za(i,c.length))return NaN;for(let S=i[0];S<=i[1];++S)if(Hc(c[S],l,!0))return 0;let v=1/0;for(let S=i[0];S<i[1];++S){const T=c[S],M=c[S+1];for(const D of l)for(let V=0,G=D.length,Z=G-1;V<G;Z=V++){const ie=D[Z],se=D[V];if(Nd(T,M,ie,se))return 0;v=Math.min(v,Rd(T,M,ie,se,p))}}return v}function Ih(c,i){for(const l of c)for(const p of l)if(Hc(p,i,!0))return!0;return!1}function Nh(c,i,l,p=1/0){const v=Xc(c),S=Xc(i);if(p!==1/0&&ac(v,S,l)>=p)return p;if(Bs(v,S)){if(Ih(c,i))return 0}else if(Ih(i,c))return 0;let T=1/0;for(const M of c)for(let D=0,V=M.length,G=V-1;D<V;G=D++){const Z=M[G],ie=M[D];for(const se of i)for(let pe=0,me=se.length,xe=me-1;pe<me;xe=pe++){const Pe=se[xe],Le=se[pe];if(Nd(Z,ie,Pe,Le))return 0;T=Math.min(T,Rd(Z,ie,Pe,Le,l))}}return T}function vr(c,i,l,p,v,S){if(!S)return;const T=ac(Kc(p,S),v,l);T<i&&c.push([T,S,[0,0]])}function ro(c,i,l,p,v,S,T){if(!S||!T)return;const M=ac(Kc(p,S),Kc(v,T),l);M<i&&c.push([M,S,T])}function oc(c,i,l,p,v=1/0){let S=Math.min(p.distance(c[0],l[0][0]),v);if(S===0)return S;const T=new Mf([[0,[0,c.length-1],[0,0]]],rc),M=Xc(l);for(;T.length>0;){const D=T.pop();if(D[0]>=S)continue;const V=D[1],G=i?50:100;if(ic(V)<=G){if(!za(V,c.length))return NaN;if(i){const Z=kh(c,V,l,p);if(isNaN(Z)||Z===0)return Z;S=Math.min(S,Z)}else for(let Z=V[0];Z<=V[1];++Z){const ie=Nf(c[Z],l,p);if(S=Math.min(S,ie),S===0)return 0}}else{const Z=vl(V,i);vr(T,S,p,c,M,Z[0]),vr(T,S,p,c,M,Z[1])}}return S}function Ws(c,i,l,p,v,S=1/0){let T=Math.min(S,v.distance(c[0],l[0]));if(T===0)return T;const M=new Mf([[0,[0,c.length-1],[0,l.length-1]]],rc);for(;M.length>0;){const D=M.pop();if(D[0]>=T)continue;const V=D[1],G=D[2],Z=i?50:100,ie=p?50:100;if(ic(V)<=Z&&ic(G)<=ie){if(!za(V,c.length)&&za(G,l.length))return NaN;let se;if(i&&p)se=Zo(c,V,l,G,v),T=Math.min(T,se);else if(i&&!p){const pe=c.slice(V[0],V[1]+1);for(let me=G[0];me<=G[1];++me)if(se=qs(l[me],pe,v),T=Math.min(T,se),T===0)return T}else if(!i&&p){const pe=l.slice(G[0],G[1]+1);for(let me=V[0];me<=V[1];++me)if(se=qs(c[me],pe,v),T=Math.min(T,se),T===0)return T}else se=Gs(c,V,l,G,v),T=Math.min(T,se)}else{const se=vl(V,i),pe=vl(G,p);ro(M,T,v,c,l,se[0],pe[0]),ro(M,T,v,c,l,se[0],pe[1]),ro(M,T,v,c,l,se[1],pe[0]),ro(M,T,v,c,l,se[1],pe[1])}}return T}function _l(c){return c.type==="MultiPolygon"?c.coordinates.map((i=>({type:"Polygon",coordinates:i}))):c.type==="MultiLineString"?c.coordinates.map((i=>({type:"LineString",coordinates:i}))):c.type==="MultiPoint"?c.coordinates.map((i=>({type:"Point",coordinates:i}))):[c]}class Ko{constructor(i,l){this.type=Ht,this.geojson=i,this.geometries=l}static parse(i,l){if(i.length!==2)return l.error(`'distance' expression requires exactly one argument, but found ${i.length-1} instead.`);if(To(i[1])){const p=i[1];if(p.type==="FeatureCollection")return new Ko(p,p.features.map((v=>_l(v.geometry))).flat());if(p.type==="Feature")return new Ko(p,_l(p.geometry));if("type"in p&&"coordinates"in p)return new Ko(p,_l(p))}return l.error("'distance' expression requires valid geojson object that contains polygon geometry type.")}evaluate(i){if(i.geometry()!=null&&i.canonicalID()!=null){if(i.geometryType()==="Point")return(function(l,p){const v=l.geometry(),S=v.flat().map((D=>Ql([D.x,D.y],l.canonical)));if(v.length===0)return NaN;const T=new Co(S[0][1]);let M=1/0;for(const D of p){switch(D.type){case"Point":M=Math.min(M,Ws(S,!1,[D.coordinates],!1,T,M));break;case"LineString":M=Math.min(M,Ws(S,!1,D.coordinates,!0,T,M));break;case"Polygon":M=Math.min(M,oc(S,!1,D.coordinates,T,M))}if(M===0)return M}return M})(i,this.geometries);if(i.geometryType()==="LineString")return(function(l,p){const v=l.geometry(),S=v.flat().map((D=>Ql([D.x,D.y],l.canonical)));if(v.length===0)return NaN;const T=new Co(S[0][1]);let M=1/0;for(const D of p){switch(D.type){case"Point":M=Math.min(M,Ws(S,!0,[D.coordinates],!1,T,M));break;case"LineString":M=Math.min(M,Ws(S,!0,D.coordinates,!0,T,M));break;case"Polygon":M=Math.min(M,oc(S,!0,D.coordinates,T,M))}if(M===0)return M}return M})(i,this.geometries);if(i.geometryType()==="Polygon")return(function(l,p){const v=l.geometry();if(v.length===0||v[0].length===0)return NaN;const S=nc(v,0).map((D=>D.map((V=>V.map((G=>Ql([G.x,G.y],l.canonical))))))),T=new Co(S[0][0][0][1]);let M=1/0;for(const D of p)for(const V of S){switch(D.type){case"Point":M=Math.min(M,oc([D.coordinates],!1,V,T,M));break;case"LineString":M=Math.min(M,oc(D.coordinates,!0,V,T,M));break;case"Polygon":M=Math.min(M,Nh(V,D.coordinates,T,M))}if(M===0)return M}return M})(i,this.geometries)}return NaN}eachChild(){}outputDefined(){return!0}}class bl{constructor(i){this.type=Wn,this.key=i}static parse(i,l){if(i.length!==2)return l.error(`Expected 1 argument, but found ${i.length-1} instead.`);const p=i[1];return p==null?l.error("Global state property must be defined."):typeof p!="string"?l.error(`Global state property must be string, but found ${typeof i[1]} instead.`):new bl(p)}evaluate(i){var l;const p=(l=i.globals)===null||l===void 0?void 0:l.globalState;return p&&Object.keys(p).length!==0?pr(p,this.key):null}eachChild(){}outputDefined(){return!1}}const sc={"==":Ef,"!=":Ch,">":Vp,"<":Id,">=":Ou,"<=":yl,array:Oa,at:Zn,boolean:Oa,case:Wc,coalesce:Ls,collator:zs,format:Ru,image:Ao,in:Un,"index-of":Rs,interpolate:Qr,"interpolate-hcl":Qr,"interpolate-lab":Qr,length:ea,let:yr,literal:ca,match:rr,number:Oa,"number-format":Fs,object:Oa,slice:Jr,step:cs,string:Oa,"to-boolean":eo,"to-color":eo,"to-number":eo,"to-string":eo,var:Vi,within:Ea,distance:Ko,"global-state":bl};class Di{constructor(i,l,p,v){this.name=i,this.type=l,this._evaluate=p,this.args=v}evaluate(i){return this._evaluate(i,this.args)}eachChild(i){this.args.forEach(i)}outputDefined(){return!1}static parse(i,l){const p=i[0],v=Di.definitions[p];if(!v)return l.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const S=Array.isArray(v)?v[0]:v.type,T=Array.isArray(v)?[[v[1],v[2]]]:v.overloads,M=T.filter((([V])=>!Array.isArray(V)||V.length===i.length-1));let D=null;for(const[V,G]of M){D=new nr(l.registry,Fu,l.path,null,l.scope);const Z=[];let ie=!1;for(let se=1;se<i.length;se++){const pe=i[se],me=Array.isArray(V)?V[se-1]:V.type,xe=D.parse(pe,1+Z.length,me);if(!xe){ie=!0;break}Z.push(xe)}if(!ie)if(Array.isArray(V)&&V.length!==Z.length)D.error(`Expected ${V.length} arguments, but found ${Z.length} instead.`);else{for(let se=0;se<Z.length;se++){const pe=Array.isArray(V)?V[se]:V.type,me=Z[se];D.concat(se+1).checkSubtype(pe,me.type)}if(D.errors.length===0)return new Di(p,S,G,Z)}}if(M.length===1)l.errors.push(...D.errors);else{const V=(M.length?M:T).map((([Z])=>{return ie=Z,Array.isArray(ie)?`(${ie.map(xr).join(", ")})`:`(${xr(ie.type)}...)`;var ie})).join(" | "),G=[];for(let Z=1;Z<i.length;Z++){const ie=l.parse(i[Z],1+G.length);if(!ie)return null;G.push(xr(ie.type))}l.error(`Expected arguments of type ${V}, but found (${G.join(", ")}) instead.`)}return null}static register(i,l){Di.definitions=l;for(const p in l)i[p]=Di}}function lc(c,[i,l,p,v]){i=i.evaluate(c),l=l.evaluate(c),p=p.evaluate(c);const S=v?v.evaluate(c):1,T=Os(i,l,p,S);if(T)throw new Pr(T);return new Bn(i/255,l/255,p/255,S,!1)}function Hs(c,i){return c in i}function zu(c,i){const l=i[c];return l===void 0?null:l}function Xo(c){return{type:c}}function Fu(c){if(c instanceof Vi)return Fu(c.boundExpression);if(c instanceof Di&&c.name==="error"||c instanceof zs||c instanceof Ea||c instanceof Ko||c instanceof bl)return!1;const i=c instanceof eo||c instanceof Oa;let l=!0;return c.eachChild((p=>{l=i?l&&Fu(p):l&&p instanceof ca})),!!l&&io(c)&&Yc(c,["zoom","heatmap-density","elevation","line-progress","accumulated","is-supported-script"])}function io(c){if(c instanceof Di&&(c.name==="get"&&c.args.length===1||c.name==="feature-state"||c.name==="has"&&c.args.length===1||c.name==="properties"||c.name==="geometry-type"||c.name==="id"||/^filter-/.test(c.name))||c instanceof Ea||c instanceof Ko)return!1;let i=!0;return c.eachChild((l=>{i&&!io(l)&&(i=!1)})),i}function cc(c){if(c instanceof Di&&c.name==="feature-state")return!1;let i=!0;return c.eachChild((l=>{i&&!cc(l)&&(i=!1)})),i}function Yc(c,i){if(c instanceof Di&&i.indexOf(c.name)>=0)return!1;let l=!0;return c.eachChild((p=>{l&&!Yc(p,i)&&(l=!1)})),l}function uc(c){return{result:"success",value:c}}function dc(c){return{result:"error",value:c}}function ua(c){return c["property-type"]==="data-driven"||c["property-type"]==="cross-faded-data-driven"}function wl(c){return!!c.expression&&c.expression.parameters.indexOf("zoom")>-1}function Jc(c){return!!c.expression&&c.expression.interpolated}function Jn(c){return c instanceof Number?"number":c instanceof String?"string":c instanceof Boolean?"boolean":Array.isArray(c)?"array":c===null?"null":typeof c}function Ld(c){return typeof c=="object"&&c!==null&&!Array.isArray(c)&&tr(c)===os}function Qc(c){return c}function Dh(c,i){const l=c.stops&&typeof c.stops[0][0]=="object",p=l||!(l||c.property!==void 0),v=c.type||(Jc(i)?"exponential":"interval"),S=(function(G){switch(G.type){case"color":return Bn.parse;case"padding":return _n.parse;case"numberArray":return sr.parse;case"colorArray":return rn.parse;default:return null}})(i);if(S&&((c=fr({},c)).stops&&(c.stops=c.stops.map((G=>[G[0],S(G[1])]))),c.default=S(c.default?c.default:i.default)),c.colorSpace&&(T=c.colorSpace)!=="rgb"&&T!=="hcl"&&T!=="lab")throw new Error(`Unknown color space: "${c.colorSpace}"`);var T;const M=(function(G){switch(G){case"exponential":return zd;case"interval":return Gr;case"categorical":return Oh;case"identity":return Bu;default:throw new Error(`Unknown function type "${G}"`)}})(v);let D,V;if(v==="categorical"){D=Object.create(null);for(const G of c.stops)D[G[0]]=G[1];V=typeof c.stops[0][0]}if(l){const G={},Z=[];for(let pe=0;pe<c.stops.length;pe++){const me=c.stops[pe],xe=me[0].zoom;G[xe]===void 0&&(G[xe]={zoom:xe,type:c.type,property:c.property,default:c.default,stops:[]},Z.push(xe)),G[xe].stops.push([me[0].value,me[1]])}const ie=[];for(const pe of Z)ie.push([G[pe].zoom,Dh(G[pe],i)]);const se={name:"linear"};return{kind:"composite",interpolationType:se,interpolationFactor:Qr.interpolationFactor.bind(void 0,se),zoomStops:ie.map((pe=>pe[0])),evaluate:({zoom:pe},me)=>zd({stops:ie,base:c.base},i,pe).evaluate(pe,me)}}if(p){const G=v==="exponential"?{name:"exponential",base:c.base!==void 0?c.base:1}:null;return{kind:"camera",interpolationType:G,interpolationFactor:Qr.interpolationFactor.bind(void 0,G),zoomStops:c.stops.map((Z=>Z[0])),evaluate:({zoom:Z})=>M(c,i,Z,D,V)}}return{kind:"source",evaluate(G,Z){const ie=Z&&Z.properties?Z.properties[c.property]:void 0;return ie===void 0?hc(c.default,i.default):M(c,i,ie,D,V)}}}function hc(c,i,l){return c!==void 0?c:i!==void 0?i:l!==void 0?l:void 0}function Oh(c,i,l,p,v){return hc(typeof l===v?p[l]:void 0,c.default,i.default)}function Gr(c,i,l){if(Jn(l)!=="number")return hc(c.default,i.default);const p=c.stops.length;if(p===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[p-1][0])return c.stops[p-1][1];const v=Wo(c.stops.map((S=>S[0])),l);return c.stops[v][1]}function zd(c,i,l){const p=c.base!==void 0?c.base:1;if(Jn(l)!=="number")return hc(c.default,i.default);const v=c.stops.length;if(v===1||l<=c.stops[0][0])return c.stops[0][1];if(l>=c.stops[v-1][0])return c.stops[v-1][1];const S=Wo(c.stops.map((G=>G[0])),l),T=(function(G,Z,ie,se){const pe=se-ie,me=G-ie;return pe===0?0:Z===1?me/pe:(Math.pow(Z,me)-1)/(Math.pow(Z,pe)-1)})(l,p,c.stops[S][0],c.stops[S+1][0]),M=c.stops[S][1],D=c.stops[S+1][1],V=qr[i.type]||Qc;return typeof M.evaluate=="function"?{evaluate(...G){const Z=M.evaluate.apply(void 0,G),ie=D.evaluate.apply(void 0,G);if(Z!==void 0&&ie!==void 0)return V(Z,ie,T,c.colorSpace)}}:V(M,D,T,c.colorSpace)}function Bu(c,i,l){switch(i.type){case"color":l=Bn.parse(l);break;case"formatted":l=$i.fromString(l.toString());break;case"resolvedImage":l=la.fromString(l.toString());break;case"padding":l=_n.parse(l);break;case"colorArray":l=rn.parse(l);break;case"numberArray":l=sr.parse(l);break;default:Jn(l)===i.type||i.type==="enum"&&i.values[l]||(l=void 0)}return hc(l,c.default,i.default)}Di.register(sc,{error:[{kind:"error"},[Tn],(c,[i])=>{throw new Pr(i.evaluate(c))}],typeof:[Tn,[Wn],(c,[i])=>xr(tr(i.evaluate(c)))],"to-rgba":[sa(Ht,4),[Aa],(c,[i])=>{const[l,p,v,S]=i.evaluate(c).rgb;return[255*l,255*p,255*v,S]}],rgb:[Aa,[Ht,Ht,Ht],lc],rgba:[Aa,[Ht,Ht,Ht,Ht],lc],has:{type:In,overloads:[[[Tn],(c,[i])=>Hs(i.evaluate(c),c.properties())],[[Tn,os],(c,[i,l])=>Hs(i.evaluate(c),l.evaluate(c))]]},get:{type:Wn,overloads:[[[Tn],(c,[i])=>zu(i.evaluate(c),c.properties())],[[Tn,os],(c,[i,l])=>zu(i.evaluate(c),l.evaluate(c))]]},"feature-state":[Wn,[Tn],(c,[i])=>zu(i.evaluate(c),c.featureState||{})],properties:[os,[],c=>c.properties()],"geometry-type":[Tn,[],c=>c.geometryType()],id:[Wn,[],c=>c.id()],zoom:[Ht,[],c=>c.globals.zoom],"heatmap-density":[Ht,[],c=>c.globals.heatmapDensity||0],elevation:[Ht,[],c=>c.globals.elevation||0],"line-progress":[Ht,[],c=>c.globals.lineProgress||0],accumulated:[Wn,[],c=>c.globals.accumulated===void 0?null:c.globals.accumulated],"+":[Ht,Xo(Ht),(c,i)=>{let l=0;for(const p of i)l+=p.evaluate(c);return l}],"*":[Ht,Xo(Ht),(c,i)=>{let l=1;for(const p of i)l*=p.evaluate(c);return l}],"-":{type:Ht,overloads:[[[Ht,Ht],(c,[i,l])=>i.evaluate(c)-l.evaluate(c)],[[Ht],(c,[i])=>-i.evaluate(c)]]},"/":[Ht,[Ht,Ht],(c,[i,l])=>i.evaluate(c)/l.evaluate(c)],"%":[Ht,[Ht,Ht],(c,[i,l])=>i.evaluate(c)%l.evaluate(c)],ln2:[Ht,[],()=>Math.LN2],pi:[Ht,[],()=>Math.PI],e:[Ht,[],()=>Math.E],"^":[Ht,[Ht,Ht],(c,[i,l])=>Math.pow(i.evaluate(c),l.evaluate(c))],sqrt:[Ht,[Ht],(c,[i])=>Math.sqrt(i.evaluate(c))],log10:[Ht,[Ht],(c,[i])=>Math.log(i.evaluate(c))/Math.LN10],ln:[Ht,[Ht],(c,[i])=>Math.log(i.evaluate(c))],log2:[Ht,[Ht],(c,[i])=>Math.log(i.evaluate(c))/Math.LN2],sin:[Ht,[Ht],(c,[i])=>Math.sin(i.evaluate(c))],cos:[Ht,[Ht],(c,[i])=>Math.cos(i.evaluate(c))],tan:[Ht,[Ht],(c,[i])=>Math.tan(i.evaluate(c))],asin:[Ht,[Ht],(c,[i])=>Math.asin(i.evaluate(c))],acos:[Ht,[Ht],(c,[i])=>Math.acos(i.evaluate(c))],atan:[Ht,[Ht],(c,[i])=>Math.atan(i.evaluate(c))],min:[Ht,Xo(Ht),(c,i)=>Math.min(...i.map((l=>l.evaluate(c))))],max:[Ht,Xo(Ht),(c,i)=>Math.max(...i.map((l=>l.evaluate(c))))],abs:[Ht,[Ht],(c,[i])=>Math.abs(i.evaluate(c))],round:[Ht,[Ht],(c,[i])=>{const l=i.evaluate(c);return l<0?-Math.round(-l):Math.round(l)}],floor:[Ht,[Ht],(c,[i])=>Math.floor(i.evaluate(c))],ceil:[Ht,[Ht],(c,[i])=>Math.ceil(i.evaluate(c))],"filter-==":[In,[Tn,Wn],(c,[i,l])=>c.properties()[i.value]===l.value],"filter-id-==":[In,[Wn],(c,[i])=>c.id()===i.value],"filter-type-==":[In,[Tn],(c,[i])=>c.geometryType()===i.value],"filter-<":[In,[Tn,Wn],(c,[i,l])=>{const p=c.properties()[i.value],v=l.value;return typeof p==typeof v&&p<v}],"filter-id-<":[In,[Wn],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l<p}],"filter->":[In,[Tn,Wn],(c,[i,l])=>{const p=c.properties()[i.value],v=l.value;return typeof p==typeof v&&p>v}],"filter-id->":[In,[Wn],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l>p}],"filter-<=":[In,[Tn,Wn],(c,[i,l])=>{const p=c.properties()[i.value],v=l.value;return typeof p==typeof v&&p<=v}],"filter-id-<=":[In,[Wn],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l<=p}],"filter->=":[In,[Tn,Wn],(c,[i,l])=>{const p=c.properties()[i.value],v=l.value;return typeof p==typeof v&&p>=v}],"filter-id->=":[In,[Wn],(c,[i])=>{const l=c.id(),p=i.value;return typeof l==typeof p&&l>=p}],"filter-has":[In,[Wn],(c,[i])=>i.value in c.properties()],"filter-has-id":[In,[],c=>c.id()!==null&&c.id()!==void 0],"filter-type-in":[In,[sa(Tn)],(c,[i])=>i.value.indexOf(c.geometryType())>=0],"filter-id-in":[In,[sa(Wn)],(c,[i])=>i.value.indexOf(c.id())>=0],"filter-in-small":[In,[Tn,sa(Wn)],(c,[i,l])=>l.value.indexOf(c.properties()[i.value])>=0],"filter-in-large":[In,[Tn,sa(Wn)],(c,[i,l])=>(function(p,v,S,T){for(;S<=T;){const M=S+T>>1;if(v[M]===p)return!0;v[M]>p?T=M-1:S=M+1}return!1})(c.properties()[i.value],l.value,0,l.value.length-1)],all:{type:In,overloads:[[[In,In],(c,[i,l])=>i.evaluate(c)&&l.evaluate(c)],[Xo(In),(c,i)=>{for(const l of i)if(!l.evaluate(c))return!1;return!0}]]},any:{type:In,overloads:[[[In,In],(c,[i,l])=>i.evaluate(c)||l.evaluate(c)],[Xo(In),(c,i)=>{for(const l of i)if(l.evaluate(c))return!0;return!1}]]},"!":[In,[In],(c,[i])=>!i.evaluate(c)],"is-supported-script":[In,[Tn],(c,[i])=>{const l=c.globals&&c.globals.isSupportedScript;return!l||l(i.evaluate(c))}],upcase:[Tn,[Tn],(c,[i])=>i.evaluate(c).toUpperCase()],downcase:[Tn,[Tn],(c,[i])=>i.evaluate(c).toLowerCase()],concat:[Tn,Xo(Wn),(c,i)=>i.map((l=>Qi(l.evaluate(c)))).join("")],"resolved-locale":[Tn,[$c],(c,[i])=>i.evaluate(c).resolvedLocale()]});class Sl{constructor(i,l,p){this.expression=i,this._warningHistory={},this._evaluator=new Gc,this._defaultValue=l?(function(v){if(v.type==="color"&&Ld(v.default))return new Bn(0,0,0,0);switch(v.type){case"color":return Bn.parse(v.default)||null;case"padding":return _n.parse(v.default)||null;case"numberArray":return sr.parse(v.default)||null;case"colorArray":return rn.parse(v.default)||null;case"variableAnchorOffsetCollection":return Ji.parse(v.default)||null;case"projectionDefinition":return ii.parse(v.default)||null;default:return v.default===void 0?null:v.default}})(l):null,this._enumValues=l&&l.type==="enum"?l.values:null,this._globalState=p}evaluateWithoutErrorHandling(i,l,p,v,S,T){return this._globalState&&(i=mt(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=l,this._evaluator.featureState=p,this._evaluator.canonical=v,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T,this.expression.evaluate(this._evaluator)}evaluate(i,l,p,v,S,T){this._globalState&&(i=mt(i,this._globalState)),this._evaluator.globals=i,this._evaluator.feature=l||null,this._evaluator.featureState=p||null,this._evaluator.canonical=v,this._evaluator.availableImages=S||null,this._evaluator.formattedSection=T||null;try{const M=this.expression.evaluate(this._evaluator);if(M==null||typeof M=="number"&&M!=M)return this._defaultValue;if(this._enumValues&&!(M in this._enumValues))throw new Pr(`Expected value to be one of ${Object.keys(this._enumValues).map((D=>JSON.stringify(D))).join(", ")}, but found ${JSON.stringify(M)} instead.`);return M}catch(M){return this._warningHistory[M.message]||(this._warningHistory[M.message]=!0,typeof console<"u"&&console.warn(M.message)),this._defaultValue}}}function fc(c){return Array.isArray(c)&&c.length>0&&typeof c[0]=="string"&&c[0]in sc}function g(c,i,l){const p=new nr(sc,Fu,[],i?(function(S){const T={color:Aa,string:Tn,number:Ht,enum:Tn,boolean:In,formatted:Zl,padding:jd,numberArray:Xr,colorArray:Ms,projectionDefinition:Ed,resolvedImage:Vc,variableAnchorOffsetCollection:Kl};return S.type==="array"?sa(T[S.value]||Wn,S.length):T[S.type]})(i):void 0),v=p.parse(c,void 0,void 0,void 0,i&&i.type==="string"?{typeAnnotation:"coerce"}:void 0);return v?uc(new Sl(v,i,l)):dc(p.errors)}class E{constructor(i,l,p){this.kind=i,this._styleExpression=l,this.isStateDependent=i!=="constant"&&!cc(l.expression),this.globalStateRefs=Xe(l.expression),this._globalState=p}evaluateWithoutErrorHandling(i,l,p,v,S,T){return this._globalState&&(i=mt(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,l,p,v,S,T)}evaluate(i,l,p,v,S,T){return this._globalState&&(i=mt(i,this._globalState)),this._styleExpression.evaluate(i,l,p,v,S,T)}}class R{constructor(i,l,p,v,S){this.kind=i,this.zoomStops=p,this._styleExpression=l,this.isStateDependent=i!=="camera"&&!cc(l.expression),this.globalStateRefs=Xe(l.expression),this.interpolationType=v,this._globalState=S}evaluateWithoutErrorHandling(i,l,p,v,S,T){return this._globalState&&(i=mt(i,this._globalState)),this._styleExpression.evaluateWithoutErrorHandling(i,l,p,v,S,T)}evaluate(i,l,p,v,S,T){return this._globalState&&(i=mt(i,this._globalState)),this._styleExpression.evaluate(i,l,p,v,S,T)}interpolationFactor(i,l,p){return this.interpolationType?Qr.interpolationFactor(this.interpolationType,i,l,p):0}}function J(c,i,l){const p=g(c,i,l);if(p.result==="error")return p;const v=p.value.expression,S=io(v);if(!S&&!ua(i))return dc([new Er("","data expressions not supported")]);const T=Yc(v,["zoom"]);if(!T&&!wl(i))return dc([new Er("","zoom expressions not supported")]);const M=Te(v);return M||T?M instanceof Er?dc([M]):M instanceof Qr&&!Jc(i)?dc([new Er("",'"interpolate" expressions cannot be used with this property')]):uc(M?new R(S?"camera":"composite",p.value,M.labels,M instanceof Qr?M.interpolation:void 0,l):new E(S?"constant":"source",p.value,l)):dc([new Er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}class he{constructor(i,l){this._parameters=i,this._specification=l,fr(this,Dh(this._parameters,this._specification))}static deserialize(i){return new he(i._parameters,i._specification)}static serialize(i){return{_parameters:i._parameters,_specification:i._specification}}}function Te(c){let i=null;if(c instanceof yr)i=Te(c.result);else if(c instanceof Ls){for(const l of c.args)if(i=Te(l),i)break}else(c instanceof cs||c instanceof Qr)&&c.input instanceof Di&&c.input.name==="zoom"&&(i=c);return i instanceof Er||c.eachChild((l=>{const p=Te(l);p instanceof Er?i=p:!i&&p?i=new Er("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&p&&i!==p&&(i=new Er("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),i}function Xe(c,i=new Set){return c instanceof bl&&i.add(c.key),c.eachChild((l=>{Xe(l,i)})),i}function mt(c,i){const{zoom:l,heatmapDensity:p,elevation:v,lineProgress:S,isSupportedScript:T,accumulated:M}=c??{};return{zoom:l,heatmapDensity:p,elevation:v,lineProgress:S,isSupportedScript:T,accumulated:M,globalState:i}}function Pt(c){if(c===!0||c===!1)return!0;if(!Array.isArray(c)||c.length===0)return!1;switch(c[0]){case"has":return c.length>=2&&c[1]!=="$id"&&c[1]!=="$type";case"in":return c.length>=3&&(typeof c[1]!="string"||Array.isArray(c[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return c.length!==3||Array.isArray(c[1])||Array.isArray(c[2]);case"any":case"all":for(const i of c.slice(1))if(!Pt(i)&&typeof i!="boolean")return!1;return!0;default:return!0}}const Vt={type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}};function sn(c,i){if(c==null)return{filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set};Pt(c)||(c=wi(c));const l=g(c,Vt,i);if(l.result==="error")throw new Error(l.value.map((p=>`${p.key}: ${p.message}`)).join(", "));return{filter:(p,v,S)=>l.value.evaluate(p,v,{},S),needGeometry:ir(c),getGlobalStateRefs:()=>Xe(l.value.expression)}}function On(c,i){return c<i?-1:c>i?1:0}function ir(c){if(!Array.isArray(c))return!1;if(c[0]==="within"||c[0]==="distance")return!0;for(let i=1;i<c.length;i++)if(ir(c[i]))return!0;return!1}function wi(c){if(!c)return!0;const i=c[0];return c.length<=1?i!=="any":i==="=="?Si(c[1],c[2],"=="):i==="!="?ds(Si(c[1],c[2],"==")):i==="<"||i===">"||i==="<="||i===">="?Si(c[1],c[2],i):i==="any"?(l=c.slice(1),["any"].concat(l.map(wi))):i==="all"?["all"].concat(c.slice(1).map(wi)):i==="none"?["all"].concat(c.slice(1).map(wi).map(ds)):i==="in"?Fa(c[1],c.slice(2)):i==="!in"?ds(Fa(c[1],c.slice(2))):i==="has"?ja(c[1]):i!=="!has"||ds(ja(c[1]));var l}function Si(c,i,l){switch(c){case"$type":return[`filter-type-${l}`,i];case"$id":return[`filter-id-${l}`,i];default:return[`filter-${l}`,c,i]}}function Fa(c,i){if(i.length===0)return!1;switch(c){case"$type":return["filter-type-in",["literal",i]];case"$id":return["filter-id-in",["literal",i]];default:return i.length>200&&!i.some((l=>typeof l!=typeof i[0]))?["filter-in-large",c,["literal",i.sort(On)]]:["filter-in-small",c,["literal",i]]}}function ja(c){switch(c){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",c]}}function ds(c){return["!",c]}function eu(c){const i=typeof c;if(i==="number"||i==="boolean"||i==="string"||c==null)return JSON.stringify(c);if(Array.isArray(c)){let v="[";for(const S of c)v+=`${eu(S)},`;return`${v}]`}const l=Object.keys(c).sort();let p="{";for(let v=0;v<l.length;v++)p+=`${JSON.stringify(l[v])}:${eu(c[l[v]])},`;return`${p}}`}function Zs(c){let i="";for(const l of Bt)i+=`/${eu(c[l])}`;return i}function Rh(c){const i=c.value;return i?[new ht(c.key,i,"constants have been deprecated as of v8")]:[]}function Rr(c){return c instanceof Number||c instanceof String||c instanceof Boolean?c.valueOf():c}function da(c){if(Array.isArray(c))return c.map(da);if(c instanceof Object&&!(c instanceof Number||c instanceof String||c instanceof Boolean)){const i={};for(const l in c)i[l]=da(c[l]);return i}return Rr(c)}function Ui(c){const i=c.key,l=c.value,p=c.valueSpec||{},v=c.objectElementValidators||{},S=c.style,T=c.styleSpec,M=c.validateSpec;let D=[];const V=Jn(l);if(V!=="object")return[new ht(i,l,`object expected, ${V} found`)];for(const G in l){const Z=G.split(".")[0],ie=pr(p,Z)||p["*"];let se;if(pr(v,Z))se=v[Z];else if(pr(p,Z)){if(l[G]===void 0)continue;se=M}else if(v["*"])se=v["*"];else{if(!p["*"]){D.push(new ht(i,l[G],`unknown property "${G}"`));continue}se=M}D=D.concat(se({key:(i&&`${i}.`)+G,value:l[G],valueSpec:ie,style:S,styleSpec:T,object:l,objectKey:G,validateSpec:M},l))}for(const G in p)v[G]||p[G].required&&p[G].default===void 0&&l[G]===void 0&&D.push(new ht(i,l,`missing required property "${G}"`));return D}function wr(c){const i=c.value,l=c.valueSpec,p=c.style,v=c.styleSpec,S=c.key,T=c.arrayElementValidator||c.validateSpec;if(Jn(i)!=="array")return[new ht(S,i,`array expected, ${Jn(i)} found`)];if(l.length&&i.length!==l.length)return[new ht(S,i,`array length ${l.length} expected, length ${i.length} found`)];let M={type:l.value,values:l.values};v.$version<7&&(M.function=l.function),Jn(l.value)==="object"&&(M=l.value);let D=[];for(let V=0;V<i.length;V++)D=D.concat(T({array:i,arrayIndex:V,value:i[V],valueSpec:M,validateSpec:c.validateSpec,style:p,styleSpec:v,key:`${S}[${V}]`}));return D}function hs(c){const i=c.key,l=c.value,p=c.valueSpec;let v=Jn(l);return v==="number"&&l!=l&&(v="NaN"),v!=="number"?[new ht(i,l,`number expected, ${v} found`)]:"minimum"in p&&l<p.minimum?[new ht(i,l,`${l} is less than the minimum value ${p.minimum}`)]:"maximum"in p&&l>p.maximum?[new ht(i,l,`${l} is greater than the maximum value ${p.maximum}`)]:[]}function Fd(c){const i=c.valueSpec,l=Rr(c.value.type);let p,v,S,T={};const M=l!=="categorical"&&c.value.property===void 0,D=!M,V=Jn(c.value.stops)==="array"&&Jn(c.value.stops[0])==="array"&&Jn(c.value.stops[0][0])==="object",G=Ui({key:c.key,value:c.value,valueSpec:c.styleSpec.function,validateSpec:c.validateSpec,style:c.style,styleSpec:c.styleSpec,objectElementValidators:{stops:function(se){if(l==="identity")return[new ht(se.key,se.value,'identity function may not have a "stops" property')];let pe=[];const me=se.value;return pe=pe.concat(wr({key:se.key,value:me,valueSpec:se.valueSpec,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec,arrayElementValidator:Z})),Jn(me)==="array"&&me.length===0&&pe.push(new ht(se.key,me,"array must have at least one stop")),pe},default:function(se){return se.validateSpec({key:se.key,value:se.value,valueSpec:i,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec})}}});return l==="identity"&&M&&G.push(new ht(c.key,c.value,'missing required property "property"')),l==="identity"||c.value.stops||G.push(new ht(c.key,c.value,'missing required property "stops"')),l==="exponential"&&c.valueSpec.expression&&!Jc(c.valueSpec)&&G.push(new ht(c.key,c.value,"exponential functions not supported")),c.styleSpec.$version>=8&&(D&&!ua(c.valueSpec)?G.push(new ht(c.key,c.value,"property functions not supported")):M&&!wl(c.valueSpec)&&G.push(new ht(c.key,c.value,"zoom functions not supported"))),l!=="categorical"&&!V||c.value.property!==void 0||G.push(new ht(c.key,c.value,'"property" property is required')),G;function Z(se){let pe=[];const me=se.value,xe=se.key;if(Jn(me)!=="array")return[new ht(xe,me,`array expected, ${Jn(me)} found`)];if(me.length!==2)return[new ht(xe,me,`array length 2 expected, length ${me.length} found`)];if(V){if(Jn(me[0])!=="object")return[new ht(xe,me,`object expected, ${Jn(me[0])} found`)];if(me[0].zoom===void 0)return[new ht(xe,me,"object stop key must have zoom")];if(me[0].value===void 0)return[new ht(xe,me,"object stop key must have value")];if(S&&S>Rr(me[0].zoom))return[new ht(xe,me[0].zoom,"stop zoom values must appear in ascending order")];Rr(me[0].zoom)!==S&&(S=Rr(me[0].zoom),v=void 0,T={}),pe=pe.concat(Ui({key:`${xe}[0]`,value:me[0],valueSpec:{zoom:{}},validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec,objectElementValidators:{zoom:hs,value:ie}}))}else pe=pe.concat(ie({key:`${xe}[0]`,value:me[0],validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec},me));return fc(da(me[1]))?pe.concat([new ht(`${xe}[1]`,me[1],"expressions are not allowed in function stops.")]):pe.concat(se.validateSpec({key:`${xe}[1]`,value:me[1],valueSpec:i,validateSpec:se.validateSpec,style:se.style,styleSpec:se.styleSpec}))}function ie(se,pe){const me=Jn(se.value),xe=Rr(se.value),Pe=se.value!==null?se.value:pe;if(p){if(me!==p)return[new ht(se.key,Pe,`${me} stop domain type must match previous stop domain type ${p}`)]}else p=me;if(me!=="number"&&me!=="string"&&me!=="boolean")return[new ht(se.key,Pe,"stop domain value must be a number, string, or boolean")];if(me!=="number"&&l!=="categorical"){let Le=`number expected, ${me} found`;return ua(i)&&l===void 0&&(Le+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new ht(se.key,Pe,Le)]}return l!=="categorical"||me!=="number"||isFinite(xe)&&Math.floor(xe)===xe?l!=="categorical"&&me==="number"&&v!==void 0&&xe<v?[new ht(se.key,Pe,"stop domain values must appear in ascending order")]:(v=xe,l==="categorical"&&xe in T?[new ht(se.key,Pe,"stop domain values must be unique")]:(T[xe]=!0,[])):[new ht(se.key,Pe,`integer expected, found ${xe}`)]}}function Tl(c){const i=(c.expressionContext==="property"?J:g)(da(c.value),c.valueSpec);if(i.result==="error")return i.value.map((p=>new ht(`${c.key}${p.key}`,c.value,p.message)));const l=i.value.expression||i.value._styleExpression.expression;if(c.expressionContext==="property"&&c.propertyKey==="text-font"&&!l.outputDefined())return[new ht(c.key,c.value,`Invalid data expression for "${c.propertyKey}". Output values must be contained as literals within the expression.`)];if(c.expressionContext==="property"&&c.propertyType==="layout"&&!cc(l))return[new ht(c.key,c.value,'"feature-state" data expressions are not supported with layout properties.')];if(c.expressionContext==="filter"&&!cc(l))return[new ht(c.key,c.value,'"feature-state" data expressions are not supported with filters.')];if(c.expressionContext&&c.expressionContext.indexOf("cluster")===0){if(!Yc(l,["zoom","feature-state"]))return[new ht(c.key,c.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(c.expressionContext==="cluster-initial"&&!io(l))return[new ht(c.key,c.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Yo(c){const i=c.key,l=c.value,p=Jn(l);return p!=="string"?[new ht(i,l,`color expected, ${p} found`)]:Bn.parse(String(l))?[]:[new ht(i,l,`color expected, "${l}" found`)]}function ao(c){const i=c.key,l=c.value,p=c.valueSpec,v=[];return Array.isArray(p.values)?p.values.indexOf(Rr(l))===-1&&v.push(new ht(i,l,`expected one of [${p.values.join(", ")}], ${JSON.stringify(l)} found`)):Object.keys(p.values).indexOf(Rr(l))===-1&&v.push(new ht(i,l,`expected one of [${Object.keys(p.values).join(", ")}], ${JSON.stringify(l)} found`)),v}function Eo(c){return Pt(da(c.value))?Tl(fr({},c,{expressionContext:"filter",valueSpec:{value:"boolean"}})):$u(c)}function $u(c){const i=c.value,l=c.key;if(Jn(i)!=="array")return[new ht(l,i,`array expected, ${Jn(i)} found`)];const p=c.styleSpec;let v,S=[];if(i.length<1)return[new ht(l,i,"filter array must have at least 1 element")];switch(S=S.concat(ao({key:`${l}[0]`,value:i[0],valueSpec:p.filter_operator,style:c.style,styleSpec:c.styleSpec})),Rr(i[0])){case"<":case"<=":case">":case">=":i.length>=2&&Rr(i[1])==="$type"&&S.push(new ht(l,i,`"$type" cannot be use with operator "${i[0]}"`));case"==":case"!=":i.length!==3&&S.push(new ht(l,i,`filter array for operator "${i[0]}" must have 3 elements`));case"in":case"!in":i.length>=2&&(v=Jn(i[1]),v!=="string"&&S.push(new ht(`${l}[1]`,i[1],`string expected, ${v} found`)));for(let T=2;T<i.length;T++)v=Jn(i[T]),Rr(i[1])==="$type"?S=S.concat(ao({key:`${l}[${T}]`,value:i[T],valueSpec:p.geometry_type,style:c.style,styleSpec:c.styleSpec})):v!=="string"&&v!=="number"&&v!=="boolean"&&S.push(new ht(`${l}[${T}]`,i[T],`string, number, or boolean expected, ${v} found`));break;case"any":case"all":case"none":for(let T=1;T<i.length;T++)S=S.concat($u({key:`${l}[${T}]`,value:i[T],style:c.style,styleSpec:c.styleSpec}));break;case"has":case"!has":v=Jn(i[1]),i.length!==2?S.push(new ht(l,i,`filter array for "${i[0]}" operator must have 2 elements`)):v!=="string"&&S.push(new ht(`${l}[1]`,i[1],`string expected, ${v} found`))}return S}function Df(c,i){const l=c.key,p=c.validateSpec,v=c.style,S=c.styleSpec,T=c.value,M=c.objectKey,D=S[`${i}_${c.layerType}`];if(!D)return[];const V=M.match(/^(.*)-transition$/);if(i==="paint"&&V&&D[V[1]]&&D[V[1]].transition)return p({key:l,value:T,valueSpec:S.transition,style:v,styleSpec:S});const G=c.valueSpec||D[M];if(!G)return[new ht(l,T,`unknown property "${M}"`)];let Z;if(Jn(T)==="string"&&ua(G)&&!G.tokens&&(Z=/^{([^}]+)}$/.exec(T)))return[new ht(l,T,`"${M}" does not support interpolation syntax
Use an identity property function instead: \`{ "type": "identity", "property": ${JSON.stringify(Z[1])} }\`.`)];const ie=[];return c.layerType==="symbol"&&M==="text-font"&&Ld(da(T))&&Rr(T.type)==="identity"&&ie.push(new ht(l,T,'"text-font" does not support identity functions')),ie.concat(p({key:c.key,value:T,valueSpec:G,style:v,styleSpec:S,expressionContext:"property",propertyType:i,propertyKey:M}))}function Vu(c){return Df(c,"paint")}function pc(c){return Df(c,"layout")}function oi(c){let i=[];const l=c.value,p=c.key,v=c.style,S=c.styleSpec;if(Jn(l)!=="object")return[new ht(p,l,`object expected, ${Jn(l)} found`)];l.type||l.ref||i.push(new ht(p,l,'either "type" or "ref" is required'));let T=Rr(l.type);const M=Rr(l.ref);if(l.id){const D=Rr(l.id);for(let V=0;V<c.arrayIndex;V++){const G=v.layers[V];Rr(G.id)===D&&i.push(new ht(p,l.id,`duplicate layer id "${l.id}", previously used at line ${G.id.__line__}`))}}if("ref"in l){let D;["type","source","source-layer","filter","layout"].forEach((V=>{V in l&&i.push(new ht(p,l[V],`"${V}" is prohibited for ref layers`))})),v.layers.forEach((V=>{Rr(V.id)===M&&(D=V)})),D?D.ref?i.push(new ht(p,l.ref,"ref cannot reference another ref layer")):T=Rr(D.type):i.push(new ht(p,l.ref,`ref layer "${M}" not found`))}else if(T!=="background")if(l.source){const D=v.sources&&v.sources[l.source],V=D&&Rr(D.type);D?V==="vector"&&T==="raster"?i.push(new ht(p,l.source,`layer "${l.id}" requires a raster source`)):V!=="raster-dem"&&T==="hillshade"||V!=="raster-dem"&&T==="color-relief"?i.push(new ht(p,l.source,`layer "${l.id}" requires a raster-dem source`)):V==="raster"&&T!=="raster"?i.push(new ht(p,l.source,`layer "${l.id}" requires a vector source`)):V!=="vector"||l["source-layer"]?V==="raster-dem"&&T!=="hillshade"&&T!=="color-relief"?i.push(new ht(p,l.source,"raster-dem source can only be used with layer type 'hillshade' or 'color-relief'.")):T!=="line"||!l.paint||!l.paint["line-gradient"]||V==="geojson"&&D.lineMetrics||i.push(new ht(p,l,`layer "${l.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):i.push(new ht(p,l,`layer "${l.id}" must specify a "source-layer"`)):i.push(new ht(p,l.source,`source "${l.source}" not found`))}else i.push(new ht(p,l,'missing required property "source"'));return i=i.concat(Ui({key:p,value:l,valueSpec:S.layer,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,objectElementValidators:{"*":()=>[],type:()=>c.validateSpec({key:`${p}.type`,value:l.type,valueSpec:S.layer.type,style:c.style,styleSpec:c.styleSpec,validateSpec:c.validateSpec,object:l,objectKey:"type"}),filter:Eo,layout:D=>Ui({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":V=>pc(fr({layerType:T},V))}}),paint:D=>Ui({layer:l,key:D.key,value:D.value,style:D.style,styleSpec:D.styleSpec,validateSpec:D.validateSpec,objectElementValidators:{"*":V=>Vu(fr({layerType:T},V))}})}})),i}function Sr(c){const i=c.value,l=c.key,p=Jn(i);return p!=="string"?[new ht(l,i,`string expected, ${p} found`)]:[]}const Pl={promoteId:function({key:c,value:i}){if(Jn(i)==="string")return Sr({key:c,value:i});{const l=[];for(const p in i)l.push(...Sr({key:`${c}.${p}`,value:i[p]}));return l}}};function ha(c){const i=c.value,l=c.key,p=c.styleSpec,v=c.style,S=c.validateSpec;if(!i.type)return[new ht(l,i,'"type" is required')];const T=Rr(i.type);let M;switch(T){case"vector":case"raster":return M=Ui({key:l,value:i,valueSpec:p[`source_${T.replace("-","_")}`],style:c.style,styleSpec:p,objectElementValidators:Pl,validateSpec:S}),M;case"raster-dem":return M=(function(D){var V;const G=(V=D.sourceName)!==null&&V!==void 0?V:"",Z=D.value,ie=D.styleSpec,se=ie.source_raster_dem,pe=D.style;let me=[];const xe=Jn(Z);if(Z===void 0)return me;if(xe!=="object")return me.push(new ht("source_raster_dem",Z,`object expected, ${xe} found`)),me;const Pe=Rr(Z.encoding)==="custom",Le=["redFactor","greenFactor","blueFactor","baseShift"],Se=D.value.encoding?`"${D.value.encoding}"`:"Default";for(const ke in Z)!Pe&&Le.includes(ke)?me.push(new ht(ke,Z[ke],`In "${G}": "${ke}" is only valid when "encoding" is set to "custom". ${Se} encoding found`)):se[ke]?me=me.concat(D.validateSpec({key:ke,value:Z[ke],valueSpec:se[ke],validateSpec:D.validateSpec,style:pe,styleSpec:ie})):me.push(new ht(ke,Z[ke],`unknown property "${ke}"`));return me})({sourceName:l,value:i,style:c.style,styleSpec:p,validateSpec:S}),M;case"geojson":if(M=Ui({key:l,value:i,valueSpec:p.source_geojson,style:v,styleSpec:p,validateSpec:S,objectElementValidators:Pl}),i.cluster)for(const D in i.clusterProperties){const[V,G]=i.clusterProperties[D],Z=typeof V=="string"?[V,["accumulated"],["get",D]]:V;M.push(...Tl({key:`${l}.${D}.map`,value:G,expressionContext:"cluster-map"})),M.push(...Tl({key:`${l}.${D}.reduce`,value:Z,expressionContext:"cluster-reduce"}))}return M;case"video":return Ui({key:l,value:i,valueSpec:p.source_video,style:v,validateSpec:S,styleSpec:p});case"image":return Ui({key:l,value:i,valueSpec:p.source_image,style:v,validateSpec:S,styleSpec:p});case"canvas":return[new ht(l,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return ao({key:`${l}.type`,value:i.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function fa(c){const i=c.value,l=c.styleSpec,p=l.light,v=c.style;let S=[];const T=Jn(i);if(i===void 0)return S;if(T!=="object")return S=S.concat([new ht("light",i,`object expected, ${T} found`)]),S;for(const M in i){const D=M.match(/^(.*)-transition$/);S=S.concat(D&&p[D[1]]&&p[D[1]].transition?c.validateSpec({key:M,value:i[M],valueSpec:l.transition,validateSpec:c.validateSpec,style:v,styleSpec:l}):p[M]?c.validateSpec({key:M,value:i[M],valueSpec:p[M],validateSpec:c.validateSpec,style:v,styleSpec:l}):[new ht(M,i[M],`unknown property "${M}"`)])}return S}function tu(c){const i=c.value,l=c.styleSpec,p=l.sky,v=c.style,S=Jn(i);if(i===void 0)return[];if(S!=="object")return[new ht("sky",i,`object expected, ${S} found`)];let T=[];for(const M in i)T=T.concat(p[M]?c.validateSpec({key:M,value:i[M],valueSpec:p[M],style:v,styleSpec:l}):[new ht(M,i[M],`unknown property "${M}"`)]);return T}function nu(c){const i=c.value,l=c.styleSpec,p=l.terrain,v=c.style;let S=[];const T=Jn(i);if(i===void 0)return S;if(T!=="object")return S=S.concat([new ht("terrain",i,`object expected, ${T} found`)]),S;for(const M in i)S=S.concat(p[M]?c.validateSpec({key:M,value:i[M],valueSpec:p[M],validateSpec:c.validateSpec,style:v,styleSpec:l}):[new ht(M,i[M],`unknown property "${M}"`)]);return S}function Ba(c){let i=[];const l=c.value,p=c.key;if(Array.isArray(l)){const v=[],S=[];for(const T in l)l[T].id&&v.includes(l[T].id)&&i.push(new ht(p,l,`all the sprites' ids must be unique, but ${l[T].id} is duplicated`)),v.push(l[T].id),l[T].url&&S.includes(l[T].url)&&i.push(new ht(p,l,`all the sprites' URLs must be unique, but ${l[T].url} is duplicated`)),S.push(l[T].url),i=i.concat(Ui({key:`${p}[${T}]`,value:l[T],valueSpec:{id:{type:"string",required:!0},url:{type:"string",required:!0}},validateSpec:c.validateSpec}));return i}return Sr({key:p,value:l})}function Lh(c){return!!c&&c.constructor===Object}function Of(c){return Lh(c.value)?[]:[new ht(c.key,c.value,`object expected, ${Jn(c.value)} found`)]}const Rf={"*":()=>[],array:wr,boolean:function(c){const i=c.value,l=c.key,p=Jn(i);return p!=="boolean"?[new ht(l,i,`boolean expected, ${p} found`)]:[]},number:hs,color:Yo,constants:Rh,enum:ao,filter:Eo,function:Fd,layer:oi,object:Ui,source:ha,light:fa,sky:tu,terrain:nu,projection:function(c){const i=c.value,l=c.styleSpec,p=l.projection,v=c.style,S=Jn(i);if(i===void 0)return[];if(S!=="object")return[new ht("projection",i,`object expected, ${S} found`)];let T=[];for(const M in i)T=T.concat(p[M]?c.validateSpec({key:M,value:i[M],valueSpec:p[M],style:v,styleSpec:l}):[new ht(M,i[M],`unknown property "${M}"`)]);return T},projectionDefinition:function(c){const i=c.key;let l=c.value;l=l instanceof String?l.valueOf():l;const p=Jn(l);return p!=="array"||(function(v){return Array.isArray(v)&&v.length===3&&typeof v[0]=="string"&&typeof v[1]=="string"&&typeof v[2]=="number"})(l)||(function(v){return!!["interpolate","step","literal"].includes(v[0])})(l)?["array","string"].includes(p)?[]:[new ht(i,l,`projection expected, invalid type "${p}" found`)]:[new ht(i,l,`projection expected, invalid array ${JSON.stringify(l)} found`)]},string:Sr,formatted:function(c){return Sr(c).length===0?[]:Tl(c)},resolvedImage:function(c){return Sr(c).length===0?[]:Tl(c)},padding:function(c){const i=c.key,l=c.value;if(Jn(l)==="array"){if(l.length<1||l.length>4)return[new ht(i,l,`padding requires 1 to 4 values; ${l.length} values found`)];const p={type:"number"};let v=[];for(let S=0;S<l.length;S++)v=v.concat(c.validateSpec({key:`${i}[${S}]`,value:l[S],validateSpec:c.validateSpec,valueSpec:p}));return v}return hs({key:i,value:l,valueSpec:{}})},numberArray:function(c){const i=c.key,l=c.value;if(Jn(l)==="array"){const p={type:"number"};if(l.length<1)return[new ht(i,l,"array length at least 1 expected, length 0 found")];let v=[];for(let S=0;S<l.length;S++)v=v.concat(c.validateSpec({key:`${i}[${S}]`,value:l[S],validateSpec:c.validateSpec,valueSpec:p}));return v}return hs({key:i,value:l,valueSpec:{}})},colorArray:function(c){const i=c.key,l=c.value;if(Jn(l)==="array"){if(l.length<1)return[new ht(i,l,"array length at least 1 expected, length 0 found")];let p=[];for(let v=0;v<l.length;v++)p=p.concat(Yo({key:`${i}[${v}]`,value:l[v]}));return p}return Yo({key:i,value:l})},variableAnchorOffsetCollection:function(c){const i=c.key,l=c.value,p=Jn(l),v=c.styleSpec;if(p!=="array"||l.length<1||l.length%2!=0)return[new ht(i,l,"variableAnchorOffsetCollection requires a non-empty array of even length")];let S=[];for(let T=0;T<l.length;T+=2)S=S.concat(ao({key:`${i}[${T}]`,value:l[T],valueSpec:v.layout_symbol["text-anchor"]})),S=S.concat(wr({key:`${i}[${T+1}]`,value:l[T+1],valueSpec:{length:2,value:"number"},validateSpec:c.validateSpec,style:c.style,styleSpec:v}));return S},sprite:Ba,state:Of,fontFaces:function(c){const i=c.key,l=c.value,p=c.validateSpec,v=c.styleSpec,S=c.style;if(!Lh(l))return[new ht(i,l,`object expected, ${Jn(l)} found`)];const T=[];for(const M in l){const D=l[M],V=Jn(D);if(V==="string")T.push(...Sr({key:`${i}.${M}`,value:D}));else if(V==="array"){const G={url:{type:"string",required:!0},"unicode-range":{type:"array",value:"string"}};for(const[Z,ie]of D.entries())T.push(...Ui({key:`${i}.${M}[${Z}]`,value:ie,valueSpec:G,styleSpec:v,style:S,validateSpec:p}))}else T.push(new ht(`${i}.${M}`,D,`string or array expected, ${V} found`))}return T}};function Ks(c){const i=c.value,l=c.valueSpec,p=c.styleSpec;return c.validateSpec=Ks,l.expression&&Ld(Rr(i))?Fd(c):l.expression&&fc(da(i))?Tl(c):l.type&&Rf[l.type]?Rf[l.type](c):Ui(fr({},c,{valueSpec:l.type?p[l.type]:l}))}function qp(c){const i=c.value,l=c.key,p=Sr(c);return p.length||(i.indexOf("{fontstack}")===-1&&p.push(new ht(l,i,'"glyphs" url must include a "{fontstack}" token')),i.indexOf("{range}")===-1&&p.push(new ht(l,i,'"glyphs" url must include a "{range}" token'))),p}function qi(c,i=Ke){let l=[];return l=l.concat(Ks({key:"",value:c,valueSpec:i.$root,styleSpec:i,style:c,validateSpec:Ks,objectElementValidators:{glyphs:qp,"*":()=>[]}})),c.constants&&(l=l.concat(Rh({key:"constants",value:c.constants}))),Lf(l)}function jo(c){return function(i){return c(Object.assign({},i,{validateSpec:Ks}))}}function Lf(c){return[].concat(c).sort(((i,l)=>i.line-l.line))}function fs(c){return function(...i){return Lf(c.apply(this,i))}}qi.source=fs(jo(ha)),qi.sprite=fs(jo(Ba)),qi.glyphs=fs(jo(qp)),qi.light=fs(jo(fa)),qi.sky=fs(jo(tu)),qi.terrain=fs(jo(nu)),qi.state=fs(jo(Of)),qi.layer=fs(jo(oi)),qi.filter=fs(jo(Eo)),qi.paintProperty=fs(jo(Vu)),qi.layoutProperty=fs(jo(pc));const cv={type:"enum","property-type":"data-constant",expression:{interpolated:!1,parameters:["global-state"]},values:{visible:{},none:{}},transition:!1,default:"visible"};class ps{constructor(i,l){this._globalState=l,this.setValue(i)}evaluate(){var i;return(i=this._literalValue)!==null&&i!==void 0?i:this._compiledValue.evaluate({})}setValue(i){if(i==null||i==="visible"||i==="none")return this._literalValue=i==="none"?"none":"visible",this._compiledValue=void 0,void(this._globalStateRefs=new Set);const l=g(i,cv,this._globalState);if(l.result==="error")throw this._literalValue="visible",this._compiledValue=void 0,new Error(l.value.map((p=>`${p.key}: ${p.message}`)).join(", "));this._literalValue=void 0,this._compiledValue=l.value,this._globalStateRefs=Xe(l.value.expression)}getGlobalStateRefs(){return this._globalStateRefs}}const Al=Ke,Ti=qi,ru=Ti.light,zh=Ti.sky,ms=Ti.paintProperty,gs=Ti.layoutProperty;function ys(c,i){let l=!1;if(i&&i.length)for(const p of i)c.fire(new Dt(new Error(p.message))),l=!0;return l}class Mo{constructor(i,l,p){const v=this.cells=[];if(i instanceof ArrayBuffer){this.arrayBuffer=i;const T=new Int32Array(this.arrayBuffer);i=T[0],this.d=(l=T[1])+2*(p=T[2]);for(let D=0;D<this.d*this.d;D++){const V=T[3+D],G=T[3+D+1];v.push(V===G?null:T.subarray(V,G))}const M=T[3+v.length+1];this.keys=T.subarray(T[3+v.length],M),this.bboxes=T.subarray(M),this.insert=this._insertReadonly}else{this.d=l+2*p;for(let T=0;T<this.d*this.d;T++)v.push([]);this.keys=[],this.bboxes=[]}this.n=l,this.extent=i,this.padding=p,this.scale=l/i,this.uid=0;const S=p/l*i;this.min=-S,this.max=i+S}insert(i,l,p,v,S){this._forEachCell(l,p,v,S,this._insertCell,this.uid++,void 0,void 0),this.keys.push(i),this.bboxes.push(l),this.bboxes.push(p),this.bboxes.push(v),this.bboxes.push(S)}_insertReadonly(){throw new Error("Cannot insert into a GridIndex created from an ArrayBuffer.")}_insertCell(i,l,p,v,S,T){this.cells[S].push(T)}query(i,l,p,v,S){const T=this.min,M=this.max;if(i<=T&&l<=T&&M<=p&&M<=v&&!S)return Array.prototype.slice.call(this.keys);{const D=[];return this._forEachCell(i,l,p,v,this._queryCell,D,{},S),D}}_queryCell(i,l,p,v,S,T,M,D){const V=this.cells[S];if(V!==null){const G=this.keys,Z=this.bboxes;for(let ie=0;ie<V.length;ie++){const se=V[ie];if(M[se]===void 0){const pe=4*se;(D?D(Z[pe+0],Z[pe+1],Z[pe+2],Z[pe+3]):i<=Z[pe+2]&&l<=Z[pe+3]&&p>=Z[pe+0]&&v>=Z[pe+1])?(M[se]=!0,T.push(G[se])):M[se]=!1}}}}_forEachCell(i,l,p,v,S,T,M,D){const V=this._convertToCellCoord(i),G=this._convertToCellCoord(l),Z=this._convertToCellCoord(p),ie=this._convertToCellCoord(v);for(let se=V;se<=Z;se++)for(let pe=G;pe<=ie;pe++){const me=this.d*pe+se;if((!D||D(this._convertFromCellCoord(se),this._convertFromCellCoord(pe),this._convertFromCellCoord(se+1),this._convertFromCellCoord(pe+1)))&&S.call(this,i,l,p,v,me,T,M,D))return}}_convertFromCellCoord(i){return(i-this.padding)/this.scale}_convertToCellCoord(i){return Math.max(0,Math.min(this.d-1,Math.floor(i*this.scale)+this.padding))}toArrayBuffer(){if(this.arrayBuffer)return this.arrayBuffer;const i=this.cells,l=3+this.cells.length+1+1;let p=0;for(let T=0;T<this.cells.length;T++)p+=this.cells[T].length;const v=new Int32Array(l+p+this.keys.length+this.bboxes.length);v[0]=this.extent,v[1]=this.n,v[2]=this.padding;let S=l;for(let T=0;T<i.length;T++){const M=i[T];v[3+T]=S,v.set(M,S),S+=M.length}return v[3+i.length]=S,v.set(this.keys,S),S+=this.keys.length,v[3+i.length+1]=S,v.set(this.bboxes,S),S+=this.bboxes.length,v.buffer}static serialize(i,l){const p=i.toArrayBuffer();return l&&l.push(p),{buffer:p}}static deserialize(i){return new Mo(i.buffer)}}const ta={};function tn(c,i,l={}){if(ta[c])throw new Error(`${c} is already registered.`);Object.defineProperty(i,"_classRegistryKey",{value:c,writeable:!1}),ta[c]={klass:i,omit:l.omit||[],shallow:l.shallow||[]}}tn("Object",Object),tn("Set",Set),tn("TransferableGridIndex",Mo),tn("Color",Bn),tn("Error",Error),tn("AJAXError",ve),tn("ResolvedImage",la),tn("StylePropertyFunction",he),tn("StyleExpression",Sl,{omit:["_evaluator"]}),tn("ZoomDependentExpression",R),tn("ZoomConstantExpression",E),tn("CompoundExpression",Di,{omit:["_evaluate"]});for(const c in sc)sc[c]._classRegistryKey||tn(`Expression_${c}`,sc[c]);function Fh(c){return c&&typeof ArrayBuffer<"u"&&(c instanceof ArrayBuffer||c.constructor&&c.constructor.name==="ArrayBuffer")}function Bh(c){return c.$name||c.constructor._classRegistryKey}function iu(c){return!(function(i){if(i===null||typeof i!="object")return!1;const l=Bh(i);return!(!l||l==="Object")})(c)&&(c==null||typeof c=="boolean"||typeof c=="number"||typeof c=="string"||c instanceof Boolean||c instanceof Number||c instanceof String||c instanceof Date||c instanceof RegExp||c instanceof Blob||c instanceof Error||Fh(c)||Nr(c)||ArrayBuffer.isView(c)||c instanceof ImageData)}function Ma(c,i){if(iu(c))return(Fh(c)||Nr(c))&&i&&i.push(c),ArrayBuffer.isView(c)&&i&&i.push(c.buffer),c instanceof ImageData&&i&&i.push(c.data.buffer),c;if(Array.isArray(c)){const S=[];for(const T of c)S.push(Ma(T,i));return S}if(typeof c!="object")throw new Error("can't serialize object of type "+typeof c);const l=Bh(c);if(!l)throw new Error(`can't serialize object of unregistered class ${c.constructor.name}`);if(!ta[l])throw new Error(`${l} is not registered.`);const{klass:p}=ta[l],v=p.serialize?p.serialize(c,i):{};if(p.serialize){if(i&&v===i[i.length-1])throw new Error("statically serialized object won't survive transfer of $name property")}else{for(const S in c){if(!c.hasOwnProperty(S)||ta[l].omit.indexOf(S)>=0)continue;const T=c[S];v[S]=ta[l].shallow.indexOf(S)>=0?T:Ma(T,i)}c instanceof Error&&(v.message=c.message)}if(v.$name)throw new Error("$name property is reserved for worker serialization logic.");return l!=="Object"&&(v.$name=l),v}function ka(c){if(iu(c))return c;if(Array.isArray(c))return c.map(ka);if(typeof c!="object")throw new Error("can't deserialize object of type "+typeof c);const i=Bh(c)||"Object";if(!ta[i])throw new Error(`can't deserialize unregistered class ${i}`);const{klass:l}=ta[i];if(!l)throw new Error(`can't deserialize unregistered class ${i}`);if(l.deserialize)return l.deserialize(c);const p=Object.create(l.prototype);for(const v of Object.keys(c)){if(v==="$name")continue;const S=c[v];p[v]=ta[i].shallow.indexOf(v)>=0?S:ka(S)}return p}class si{constructor(){this.first=!0}update(i,l){const p=Math.floor(i);return this.first?(this.first=!1,this.lastIntegerZoom=p,this.lastIntegerZoomTime=0,this.lastZoom=i,this.lastFloorZoom=p,!0):(this.lastFloorZoom>p?(this.lastIntegerZoom=p+1,this.lastIntegerZoomTime=l):this.lastFloorZoom<p&&(this.lastIntegerZoom=p,this.lastIntegerZoomTime=l),i!==this.lastZoom&&(this.lastZoom=i,this.lastFloorZoom=p,!0))}}function oo(c){return/[\u02EA\u02EB\u2E80-\u2FDF\u2FF0-\u303F\u3041-\u3096\u309D-\u309F\u30A1-\u30FA\u30FD-\u30FF\u3105-\u312F\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(c))}function zf(c){return/[\u02EA\u02EB\u1100-\u11FF\u1400-\u167F\u18B0-\u18F5\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u3007\u3012\u3013\u3020-\u302F\u3031-\u303F\u3041-\u3096\u309D-\u30FB\u30FD-\u30FF\u3105-\u312F\u3131-\u318E\u3190-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE48\uFE50-\uFE57\uFE5F-\uFE62\uFE67-\uFE6F\uFF00-\uFF07\uFF0A-\uFF0C\uFF0E-\uFF19\uFF1F-\uFF3A\uFF3C\uFF3E\uFF40-\uFF5A\uFFE0-\uFFE2\uFFE4-\uFFE7]|\uD802[\uDD80-\uDD9F]|\uD805[\uDD80-\uDDFF]|\uD806[\uDE00-\uDEBF]|\uD811[\uDC00-\uDE7F]|\uD81B[\uDFE0-\uDFE4\uDFF0-\uDFF6]|[\uD81C-\uD822\uD83D\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFF3\uDFF5-\uDFFB\uDFFD\uDFFE]|\uD82C[\uDC00-\uDD22\uDD30-\uDEFB]|\uD833[\uDEC0-\uDFCF]|\uD834[\uDC00-\uDDFF\uDEE0-\uDF7F]|\uD836[\uDC00-\uDEAF]|\uD83C[\uDC00-\uDE00\uDF00-\uDFFF]|\uD83E[\uDD00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(c))}function Gp(c){return/\s/u.test(String.fromCodePoint(c))}function au(c){for(const i of c)if(zf(i.codePointAt(0)))return!0;return!1}function Wp(c){for(const i of c)if(!Hp(i.codePointAt(0)))return!1;return!0}function $h(c){const i=c.map((l=>{try{return new RegExp(`\\p{sc=${l}}`,"u").source}catch{return null}})).filter((l=>l));return new RegExp(i.join("|"),"u")}const Uu=$h(["Arab","Dupl","Mong","Ougr","Syrc"]);function Hp(c){return!Uu.test(String.fromCodePoint(c))}function ou(c){return!(zf(c)||(i=c,/[\xA7\xA9\xAE\xB1\xBC-\xBE\xD7\xF7\u2016\u2020\u2021\u2030\u2031\u203B\u203C\u2042\u2047-\u2049\u2051\u2100-\u218F\u221E\u2234\u2235\u2300-\u2307\u230C-\u231F\u2324-\u2328\u232B\u237D-\u239A\u23BE-\u23CD\u23CF\u23D1-\u23DB\u23E2-\u2422\u2424-\u24FF\u25A0-\u2619\u2620-\u2767\u2776-\u2793\u2B12-\u2B2F\u2B50-\u2B59\u2BB8-\u2BEB\u3000-\u303F\u30A0-\u30FF\uE000-\uF8FF\uFE30-\uFE6F\uFF00-\uFFEF\uFFFC\uFFFD]|[\uDB80-\uDBFF][\uDC00-\uDFFF]/gim.test(String.fromCodePoint(i))));var i}const Ff=$h(["Adlm","Arab","Armi","Avst","Chrs","Cprt","Egyp","Elym","Gara","Hatr","Hebr","Hung","Khar","Lydi","Mand","Mani","Mend","Merc","Mero","Narb","Nbat","Nkoo","Orkh","Palm","Phli","Phlp","Phnx","Prti","Rohg","Samr","Sarb","Sogo","Syrc","Thaa","Todr","Yezi"]);function Zp(c){return Ff.test(String.fromCodePoint(c))}function qu(c,i){return!(!i&&Zp(c)||/[\u0900-\u0DFF\u0F00-\u109F\u1780-\u17FF]/gim.test(String.fromCodePoint(c)))}function Vh(c){for(const i of c)if(Zp(i.codePointAt(0)))return!0;return!1}const mc=new class{constructor(){this.TIMEOUT=5e3,this.applyArabicShaping=null,this.processBidirectionalText=null,this.processStyledBidirectionalText=null,this.pluginStatus="unavailable",this.pluginURL=null,this.loadScriptResolve=()=>{}}setState(c){this.pluginStatus=c.pluginStatus,this.pluginURL=c.pluginURL}getState(){return{pluginStatus:this.pluginStatus,pluginURL:this.pluginURL}}setMethods(c){if(mc.isParsed())throw new Error("RTL text plugin already registered.");this.applyArabicShaping=c.applyArabicShaping,this.processBidirectionalText=c.processBidirectionalText,this.processStyledBidirectionalText=c.processStyledBidirectionalText,this.loadScriptResolve()}isParsed(){return this.applyArabicShaping!=null&&this.processBidirectionalText!=null&&this.processStyledBidirectionalText!=null}getRTLTextPluginStatus(){return this.pluginStatus}syncState(c,i){return o(this,void 0,void 0,(function*(){if(this.isParsed())return this.getState();if(c.pluginStatus!=="loading")return this.setState(c),c;const l=c.pluginURL,p=new Promise((S=>{this.loadScriptResolve=S}));i(l);const v=new Promise((S=>setTimeout((()=>S()),this.TIMEOUT)));if(yield Promise.race([p,v]),this.isParsed()){const S={pluginStatus:"loaded",pluginURL:l};return this.setState(S),S}throw this.setState({pluginStatus:"error",pluginURL:""}),new Error(`RTL Text Plugin failed to import scripts from ${l}`)}))}};class Lr{constructor(i,l){this.isSupportedScript=Bd,this.zoom=i,l?(this.now=l.now||0,this.fadeDuration=l.fadeDuration||0,this.zoomHistory=l.zoomHistory||new si,this.transition=l.transition||{}):(this.now=0,this.fadeDuration=0,this.zoomHistory=new si,this.transition={})}crossFadingFactor(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)}getCrossfadeParameters(){const i=this.zoom,l=i-Math.floor(i),p=this.crossFadingFactor();return i>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:l+(1-l)*p}:{fromScale:.5,toScale:1,t:1-(1-p)*l}}}function Bd(c){return(function(i,l){for(const p of i)if(!qu(p.codePointAt(0),l))return!1;return!0})(c,mc.getRTLTextPluginStatus()==="loaded")}const $d="-transition";class Gu{constructor(i,l,p){this.property=i,this.value=l,this.expression=(function(v,S,T){if(Ld(v))return new he(v,S);if(fc(v)){const M=J(v,S,T);if(M.result==="error")throw new Error(M.value.map((D=>`${D.key}: ${D.message}`)).join(", "));return M.value}{let M=v;return S.type==="color"&&typeof v=="string"?M=Bn.parse(v):S.type!=="padding"||typeof v!="number"&&!Array.isArray(v)?S.type!=="numberArray"||typeof v!="number"&&!Array.isArray(v)?S.type!=="colorArray"||typeof v!="string"&&!Array.isArray(v)?S.type==="variableAnchorOffsetCollection"&&Array.isArray(v)?M=Ji.parse(v):S.type==="projectionDefinition"&&typeof v=="string"&&(M=ii.parse(v)):M=rn.parse(v):M=sr.parse(v):M=_n.parse(v),{globalStateRefs:new Set,_globalState:null,kind:"constant",evaluate:()=>M}}})(l===void 0?i.specification.default:l,i.specification,p)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}getGlobalStateRefs(){return this.expression.globalStateRefs||new Set}possiblyEvaluate(i,l,p){return this.property.possiblyEvaluate(this,i,l,p)}}class Wu{constructor(i,l){this.property=i,this.value=new Gu(i,void 0,l)}transitioned(i,l){return new Bf(this.property,this.value,l,Ot({},i.transition,this.transition),i.now)}untransitioned(){return new Bf(this.property,this.value,null,{},0)}}class su{constructor(i,l){this._properties=i,this._values=Object.create(i.defaultTransitionablePropertyValues),this._globalState=l}getValue(i){return dt(this._values[i].value.value)}setValue(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Wu(this._values[i].property,this._globalState)),this._values[i].value=new Gu(this._values[i].property,l===null?void 0:dt(l),this._globalState)}getTransition(i){return dt(this._values[i].transition)}setTransition(i,l){Object.prototype.hasOwnProperty.call(this._values,i)||(this._values[i]=new Wu(this._values[i].property,this._globalState)),this._values[i].transition=dt(l)||void 0}serialize(){const i={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(i[l]=p);const v=this.getTransition(l);v!==void 0&&(i[`${l}${$d}`]=v)}return i}transitioned(i,l){const p=new $f(this._properties);for(const v of Object.keys(this._values))p._values[v]=this._values[v].transitioned(i,l._values[v]);return p}untransitioned(){const i=new $f(this._properties);for(const l of Object.keys(this._values))i._values[l]=this._values[l].untransitioned();return i}}class Bf{constructor(i,l,p,v,S){this.property=i,this.value=l,this.begin=S+v.delay||0,this.end=this.begin+v.duration||0,i.specification.transition&&(v.delay||v.duration)&&(this.prior=p)}possiblyEvaluate(i,l,p){const v=i.now||0,S=this.value.possiblyEvaluate(i,l,p),T=this.prior;if(T){if(v>this.end)return this.prior=null,S;if(this.value.isDataDriven())return this.prior=null,S;if(v<this.begin)return T.possiblyEvaluate(i,l,p);{const M=(v-this.begin)/(this.end-this.begin);return this.property.interpolate(T.possiblyEvaluate(i,l,p),S,pt(M))}}return S}}class $f{constructor(i){this._properties=i,this._values=Object.create(i.defaultTransitioningPropertyValues)}possiblyEvaluate(i,l,p){const v=new Cl(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].possiblyEvaluate(i,l,p);return v}hasTransition(){for(const i of Object.keys(this._values))if(this._values[i].prior)return!0;return!1}}class Vf{constructor(i,l){this._properties=i,this._values=Object.create(i.defaultPropertyValues),this._globalState=l}hasValue(i){return this._values[i].value!==void 0}getValue(i){return dt(this._values[i].value)}setValue(i,l){this._values[i]=new Gu(this._values[i].property,l===null?void 0:dt(l),this._globalState)}serialize(){const i={};for(const l of Object.keys(this._values)){const p=this.getValue(l);p!==void 0&&(i[l]=p)}return i}possiblyEvaluate(i,l,p){const v=new Cl(this._properties);for(const S of Object.keys(this._values))v._values[S]=this._values[S].possiblyEvaluate(i,l,p);return v}}class Jo{constructor(i,l,p){this.property=i,this.value=l,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(i){return this.value.kind==="constant"?this.value.value:i}evaluate(i,l,p,v){return this.property.evaluate(this.value,this.parameters,i,l,p,v)}}class Cl{constructor(i){this._properties=i,this._values=Object.create(i.defaultPossiblyEvaluatedValues)}get(i){return this._values[i]}}class an{constructor(i){this.specification=i}possiblyEvaluate(i,l){if(i.isDataDriven())throw new Error("Value should not be data driven");return i.expression.evaluate(l)}interpolate(i,l,p){const v=qr[this.specification.type];return v?v(i,l,p):i}}class vn{constructor(i,l){this.specification=i,this.overrides=l}possiblyEvaluate(i,l,p,v){return new Jo(this,i.expression.kind==="constant"||i.expression.kind==="camera"?{kind:"constant",value:i.expression.evaluate(l,null,{},p,v)}:i.expression,l)}interpolate(i,l,p){if(i.value.kind!=="constant"||l.value.kind!=="constant")return i;if(i.value.value===void 0||l.value.value===void 0)return new Jo(this,{kind:"constant",value:void 0},i.parameters);const v=qr[this.specification.type];if(v){const S=v(i.value.value,l.value.value,p);return new Jo(this,{kind:"constant",value:S},i.parameters)}return i}evaluate(i,l,p,v,S,T){return i.kind==="constant"?i.value:i.evaluate(l,p,v,S,T)}}class Hu extends vn{possiblyEvaluate(i,l,p,v){if(i.value===void 0)return new Jo(this,{kind:"constant",value:void 0},l);if(i.expression.kind==="constant"){const S=i.expression.evaluate(l,null,{},p,v),T=i.property.specification.type==="resolvedImage"&&typeof S!="string"?S.name:S,M=this._calculate(T,T,T,l);return new Jo(this,{kind:"constant",value:M},l)}if(i.expression.kind==="camera"){const S=this._calculate(i.expression.evaluate({zoom:l.zoom-1}),i.expression.evaluate({zoom:l.zoom}),i.expression.evaluate({zoom:l.zoom+1}),l);return new Jo(this,{kind:"constant",value:S},l)}return new Jo(this,i.expression,l)}evaluate(i,l,p,v,S,T){if(i.kind==="source"){const M=i.evaluate(l,p,v,S,T);return this._calculate(M,M,M,l)}return i.kind==="composite"?this._calculate(i.evaluate({zoom:Math.floor(l.zoom)-1},p,v),i.evaluate({zoom:Math.floor(l.zoom)},p,v),i.evaluate({zoom:Math.floor(l.zoom)+1},p,v),l):i.value}_calculate(i,l,p,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}}interpolate(i){return i}}class Uh{constructor(i){this.specification=i}possiblyEvaluate(i,l,p,v){if(i.value!==void 0){if(i.expression.kind==="constant"){const S=i.expression.evaluate(l,null,{},p,v);return this._calculate(S,S,S,l)}return this._calculate(i.expression.evaluate(new Lr(Math.floor(l.zoom-1),l)),i.expression.evaluate(new Lr(Math.floor(l.zoom),l)),i.expression.evaluate(new Lr(Math.floor(l.zoom+1),l)),l)}}_calculate(i,l,p,v){return v.zoom>v.zoomHistory.lastIntegerZoom?{from:i,to:l}:{from:p,to:l}}interpolate(i){return i}}class vs{constructor(i){this.specification=i}possiblyEvaluate(i,l,p,v){return!!i.expression.evaluate(l,null,{},p,v)}interpolate(){return!1}}class Ei{constructor(i){this.properties=i,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];for(const l in i){const p=i[l];p.specification.overridable&&this.overridableProperties.push(l);const v=this.defaultPropertyValues[l]=new Gu(p,void 0,void 0),S=this.defaultTransitionablePropertyValues[l]=new Wu(p,void 0);this.defaultTransitioningPropertyValues[l]=S.untransitioned(),this.defaultPossiblyEvaluatedValues[l]=v.possiblyEvaluate({})}}}tn("DataDrivenProperty",vn),tn("DataConstantProperty",an),tn("CrossFadedDataDrivenProperty",Hu),tn("CrossFadedProperty",Uh),tn("ColorRampProperty",vs);class ko extends St{constructor(i,l,p){if(super(),this.id=i.id,this.type=i.type,this._globalState=p,this._featureFilter={filter:()=>!0,needGeometry:!1,getGlobalStateRefs:()=>new Set},this._visibilityExpression=(function(v,S){return new ps(v,S)})(this.visibility,p),i.type!=="custom"&&(this.metadata=i.metadata,this.minzoom=i.minzoom,this.maxzoom=i.maxzoom,i.type!=="background"&&(this.source=i.source,this.sourceLayer=i["source-layer"],this.filter=i.filter,this._featureFilter=sn(i.filter,p)),l.layout&&(this._unevaluatedLayout=new Vf(l.layout,p)),l.paint)){this._transitionablePaint=new su(l.paint,p);for(const v in i.paint)this.setPaintProperty(v,i.paint[v],{validate:!1});for(const v in i.layout)this.setLayoutProperty(v,i.layout[v],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cl(l.paint)}}setFilter(i){this.filter=i,this._featureFilter=sn(i,this._globalState)}getCrossfadeParameters(){return this._crossfadeParameters}getLayoutProperty(i){return i==="visibility"?this.visibility:this._unevaluatedLayout.getValue(i)}getLayoutAffectingGlobalStateRefs(){const i=new Set;for(const l of this._visibilityExpression.getGlobalStateRefs())i.add(l);if(this._unevaluatedLayout)for(const l in this._unevaluatedLayout._values){const p=this._unevaluatedLayout._values[l];for(const v of p.getGlobalStateRefs())i.add(v)}for(const l of this._featureFilter.getGlobalStateRefs())i.add(l);return i}getPaintAffectingGlobalStateRefs(){var i;const l=new globalThis.Map;if(this._transitionablePaint)for(const p in this._transitionablePaint._values){const v=this._transitionablePaint._values[p].value;for(const S of v.getGlobalStateRefs()){const T=(i=l.get(S))!==null&&i!==void 0?i:[];T.push({name:p,value:v.value}),l.set(S,T)}}return l}getVisibilityAffectingGlobalStateRefs(){return this._visibilityExpression.getGlobalStateRefs()}setLayoutProperty(i,l,p={}){if(l==null||!this._validate(gs,`layers.${this.id}.layout.${i}`,i,l,p))return i==="visibility"?(this.visibility=l,this._visibilityExpression.setValue(l),void this.recalculateVisibility()):void this._unevaluatedLayout.setValue(i,l)}getPaintProperty(i){return i.endsWith($d)?this._transitionablePaint.getTransition(i.slice(0,-11)):this._transitionablePaint.getValue(i)}setPaintProperty(i,l,p={}){if(l!=null&&this._validate(ms,`layers.${this.id}.paint.${i}`,i,l,p))return!1;if(i.endsWith($d))return this._transitionablePaint.setTransition(i.slice(0,-11),l||void 0),!1;{const v=this._transitionablePaint._values[i],S=v.property.specification["property-type"]==="cross-faded-data-driven",T=v.value.isDataDriven(),M=v.value;this._transitionablePaint.setValue(i,l),this._handleSpecialPaintPropertyUpdate(i);const D=this._transitionablePaint._values[i].value;return D.isDataDriven()||T||S||this._handleOverridablePaintPropertyUpdate(i,M,D)}}_handleSpecialPaintPropertyUpdate(i){}_handleOverridablePaintPropertyUpdate(i,l,p){return!1}isHidden(i=this.minzoom,l=!1){return!!(this.minzoom&&i<(l?Math.floor(this.minzoom):this.minzoom))||!!(this.maxzoom&&i>=this.maxzoom)||this._evaluatedVisibility==="none"}updateTransitions(i){this._transitioningPaint=this._transitionablePaint.transitioned(i,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculateVisibility(){this._evaluatedVisibility=this._visibilityExpression.evaluate()}recalculate(i,l){i.getCrossfadeParameters&&(this._crossfadeParameters=i.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(i,void 0,l)),this.paint=this._transitioningPaint.possiblyEvaluate(i,void 0,l)}serialize(){const i={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(i.layout=i.layout||{},i.layout.visibility=this.visibility),Ut(i,((l,p)=>!(l===void 0||p==="layout"&&!Object.keys(l).length||p==="paint"&&!Object.keys(l).length)))}_validate(i,l,p,v,S={}){return(!S||S.validate!==!1)&&ys(this,i.call(Ti,{key:l,layerType:this.type,objectKey:p,value:v,styleSpec:Ke,style:{glyphs:!0,sprite:!0}}))}is3D(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}resize(){}isStateDependent(){for(const i in this.paint._values){const l=this.paint.get(i);if(l instanceof Jo&&ua(l.property.specification)&&(l.value.kind==="source"||l.value.kind==="composite")&&l.value.isStateDependent)return!0}return!1}}let Uf;var El={get paint(){return Uf=Uf||new Ei({"raster-opacity":new an(Ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new an(Ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new an(Ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new an(Ke.paint_raster["raster-brightness-max"]),"raster-saturation":new an(Ke.paint_raster["raster-saturation"]),"raster-contrast":new an(Ke.paint_raster["raster-contrast"]),"raster-resampling":new an(Ke.paint_raster["raster-resampling"]),"raster-fade-duration":new an(Ke.paint_raster["raster-fade-duration"])})}};class lu extends ko{constructor(i,l){super(i,El,l)}}const qf={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class Vd{constructor(i,l){this._structArray=i,this._pos1=l*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class ei{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(i,l){return i._trim(),l&&(i.isTransferred=!0,l.push(i.arrayBuffer)),{length:i.length,arrayBuffer:i.arrayBuffer}}static deserialize(i){const l=Object.create(this.prototype);return l.arrayBuffer=i.arrayBuffer,l.length=i.length,l.capacity=i.arrayBuffer.byteLength/l.bytesPerElement,l._refreshViews(),l}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(i){this.reserve(i),this.length=i}reserve(i){if(i>this.capacity){this.capacity=Math.max(i,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const l=this.uint8;this._refreshViews(),l&&this.uint8.set(l)}}_refreshViews(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")}}function Pi(c,i=1){let l=0,p=0;return{members:c.map((v=>{const S=qf[v.type].BYTES_PER_ELEMENT,T=l=Xs(l,Math.max(i,S)),M=v.components||1;return p=Math.max(p,S),l+=S*M,{name:v.name,type:v.type,components:M,offset:T}})),size:Xs(l,Math.max(p,i)),alignment:i}}function Xs(c,i){return Math.ceil(c/i)*i}class Io extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const v=2*i;return this.int16[v+0]=l,this.int16[v+1]=p,i}}Io.prototype.bytesPerElement=4,tn("StructArrayLayout2i4",Io);class cu extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,p)}emplace(i,l,p,v){const S=3*i;return this.int16[S+0]=l,this.int16[S+1]=p,this.int16[S+2]=v,i}}cu.prototype.bytesPerElement=6,tn("StructArrayLayout3i6",cu);class Zu extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,v)}emplace(i,l,p,v,S){const T=4*i;return this.int16[T+0]=l,this.int16[T+1]=p,this.int16[T+2]=v,this.int16[T+3]=S,i}}Zu.prototype.bytesPerElement=8,tn("StructArrayLayout4i8",Zu);class jl extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,p,v,S,T)}emplace(i,l,p,v,S,T,M){const D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=v,this.int16[D+3]=S,this.int16[D+4]=T,this.int16[D+5]=M,i}}jl.prototype.bytesPerElement=12,tn("StructArrayLayout2i4i12",jl);class qh extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,p,v,S,T)}emplace(i,l,p,v,S,T,M){const D=4*i,V=8*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.uint8[V+4]=v,this.uint8[V+5]=S,this.uint8[V+6]=T,this.uint8[V+7]=M,i}}qh.prototype.bytesPerElement=8,tn("StructArrayLayout2i4ub8",qh);class Ml extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const v=2*i;return this.float32[v+0]=l,this.float32[v+1]=p,i}}Ml.prototype.bytesPerElement=8,tn("StructArrayLayout2f8",Ml);class kl extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T,M,D,V,G){const Z=this.length;return this.resize(Z+1),this.emplace(Z,i,l,p,v,S,T,M,D,V,G)}emplace(i,l,p,v,S,T,M,D,V,G,Z){const ie=10*i;return this.uint16[ie+0]=l,this.uint16[ie+1]=p,this.uint16[ie+2]=v,this.uint16[ie+3]=S,this.uint16[ie+4]=T,this.uint16[ie+5]=M,this.uint16[ie+6]=D,this.uint16[ie+7]=V,this.uint16[ie+8]=G,this.uint16[ie+9]=Z,i}}kl.prototype.bytesPerElement=20,tn("StructArrayLayout10ui20",kl);class Ud extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T,M,D){const V=this.length;return this.resize(V+1),this.emplace(V,i,l,p,v,S,T,M,D)}emplace(i,l,p,v,S,T,M,D,V){const G=8*i;return this.uint16[G+0]=l,this.uint16[G+1]=p,this.uint16[G+2]=v,this.uint16[G+3]=S,this.uint16[G+4]=T,this.uint16[G+5]=M,this.uint16[G+6]=D,this.uint16[G+7]=V,i}}Ud.prototype.bytesPerElement=16,tn("StructArrayLayout8ui16",Ud);class ti extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T,M,D,V,G,Z,ie){const se=this.length;return this.resize(se+1),this.emplace(se,i,l,p,v,S,T,M,D,V,G,Z,ie)}emplace(i,l,p,v,S,T,M,D,V,G,Z,ie,se){const pe=12*i;return this.int16[pe+0]=l,this.int16[pe+1]=p,this.int16[pe+2]=v,this.int16[pe+3]=S,this.uint16[pe+4]=T,this.uint16[pe+5]=M,this.uint16[pe+6]=D,this.uint16[pe+7]=V,this.int16[pe+8]=G,this.int16[pe+9]=Z,this.int16[pe+10]=ie,this.int16[pe+11]=se,i}}ti.prototype.bytesPerElement=24,tn("StructArrayLayout4i4ui4i24",ti);class Ku extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,p)}emplace(i,l,p,v){const S=3*i;return this.float32[S+0]=l,this.float32[S+1]=p,this.float32[S+2]=v,i}}Ku.prototype.bytesPerElement=12,tn("StructArrayLayout3f12",Ku);class Xu extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint32[1*i+0]=l,i}}Xu.prototype.bytesPerElement=4,tn("StructArrayLayout1ul4",Xu);class Gh extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T,M,D,V){const G=this.length;return this.resize(G+1),this.emplace(G,i,l,p,v,S,T,M,D,V)}emplace(i,l,p,v,S,T,M,D,V,G){const Z=10*i,ie=5*i;return this.int16[Z+0]=l,this.int16[Z+1]=p,this.int16[Z+2]=v,this.int16[Z+3]=S,this.int16[Z+4]=T,this.int16[Z+5]=M,this.uint32[ie+3]=D,this.uint16[Z+8]=V,this.uint16[Z+9]=G,i}}Gh.prototype.bytesPerElement=20,tn("StructArrayLayout6i1ul2ui20",Gh);class gc extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,p,v,S,T)}emplace(i,l,p,v,S,T,M){const D=6*i;return this.int16[D+0]=l,this.int16[D+1]=p,this.int16[D+2]=v,this.int16[D+3]=S,this.int16[D+4]=T,this.int16[D+5]=M,i}}gc.prototype.bytesPerElement=12,tn("StructArrayLayout2i2i2i12",gc);class yc extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S){const T=this.length;return this.resize(T+1),this.emplace(T,i,l,p,v,S)}emplace(i,l,p,v,S,T){const M=4*i,D=8*i;return this.float32[M+0]=l,this.float32[M+1]=p,this.float32[M+2]=v,this.int16[D+6]=S,this.int16[D+7]=T,i}}yc.prototype.bytesPerElement=16,tn("StructArrayLayout2f1f2i16",yc);class vc extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T){const M=this.length;return this.resize(M+1),this.emplace(M,i,l,p,v,S,T)}emplace(i,l,p,v,S,T,M){const D=16*i,V=4*i,G=8*i;return this.uint8[D+0]=l,this.uint8[D+1]=p,this.float32[V+1]=v,this.float32[V+2]=S,this.int16[G+6]=T,this.int16[G+7]=M,i}}vc.prototype.bytesPerElement=16,tn("StructArrayLayout2ub2f2i16",vc);class ni extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,p)}emplace(i,l,p,v){const S=3*i;return this.uint16[S+0]=l,this.uint16[S+1]=p,this.uint16[S+2]=v,i}}ni.prototype.bytesPerElement=6,tn("StructArrayLayout3ui6",ni);class fi extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe){const Le=this.length;return this.resize(Le+1),this.emplace(Le,i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe)}emplace(i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe,Le){const Se=24*i,ke=12*i,qe=48*i;return this.int16[Se+0]=l,this.int16[Se+1]=p,this.uint16[Se+2]=v,this.uint16[Se+3]=S,this.uint32[ke+2]=T,this.uint32[ke+3]=M,this.uint32[ke+4]=D,this.uint16[Se+10]=V,this.uint16[Se+11]=G,this.uint16[Se+12]=Z,this.float32[ke+7]=ie,this.float32[ke+8]=se,this.uint8[qe+36]=pe,this.uint8[qe+37]=me,this.uint8[qe+38]=xe,this.uint32[ke+10]=Pe,this.int16[Se+22]=Le,i}}fi.prototype.bytesPerElement=48,tn("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",fi);class Gi extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe,Le,Se,ke,qe,tt,gt,jt,kt,Ft,Kt,$t){const It=this.length;return this.resize(It+1),this.emplace(It,i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe,Le,Se,ke,qe,tt,gt,jt,kt,Ft,Kt,$t)}emplace(i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe,Le,Se,ke,qe,tt,gt,jt,kt,Ft,Kt,$t,It){const At=32*i,ln=16*i;return this.int16[At+0]=l,this.int16[At+1]=p,this.int16[At+2]=v,this.int16[At+3]=S,this.int16[At+4]=T,this.int16[At+5]=M,this.int16[At+6]=D,this.int16[At+7]=V,this.uint16[At+8]=G,this.uint16[At+9]=Z,this.uint16[At+10]=ie,this.uint16[At+11]=se,this.uint16[At+12]=pe,this.uint16[At+13]=me,this.uint16[At+14]=xe,this.uint16[At+15]=Pe,this.uint16[At+16]=Le,this.uint16[At+17]=Se,this.uint16[At+18]=ke,this.uint16[At+19]=qe,this.uint16[At+20]=tt,this.uint16[At+21]=gt,this.uint16[At+22]=jt,this.uint32[ln+12]=kt,this.float32[ln+13]=Ft,this.float32[ln+14]=Kt,this.uint16[At+30]=$t,this.uint16[At+31]=It,i}}Gi.prototype.bytesPerElement=64,tn("StructArrayLayout8i15ui1ul2f2ui64",Gi);class Yu extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.float32[1*i+0]=l,i}}Yu.prototype.bytesPerElement=4,tn("StructArrayLayout1f4",Yu);class uu extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,p)}emplace(i,l,p,v){const S=3*i;return this.uint16[6*i+0]=l,this.float32[S+1]=p,this.float32[S+2]=v,i}}uu.prototype.bytesPerElement=12,tn("StructArrayLayout1ui2f12",uu);class Ju extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l,p){const v=this.length;return this.resize(v+1),this.emplace(v,i,l,p)}emplace(i,l,p,v){const S=4*i;return this.uint32[2*i+0]=l,this.uint16[S+2]=p,this.uint16[S+3]=v,i}}Ju.prototype.bytesPerElement=8,tn("StructArrayLayout1ul2ui8",Ju);class C extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i,l){const p=this.length;return this.resize(p+1),this.emplace(p,i,l)}emplace(i,l,p){const v=2*i;return this.uint16[v+0]=l,this.uint16[v+1]=p,i}}C.prototype.bytesPerElement=4,tn("StructArrayLayout2ui4",C);class a extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(i){const l=this.length;return this.resize(l+1),this.emplace(l,i)}emplace(i,l){return this.uint16[1*i+0]=l,i}}a.prototype.bytesPerElement=2,tn("StructArrayLayout1ui2",a);class u extends ei{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(i,l,p,v){const S=this.length;return this.resize(S+1),this.emplace(S,i,l,p,v)}emplace(i,l,p,v,S){const T=4*i;return this.float32[T+0]=l,this.float32[T+1]=p,this.float32[T+2]=v,this.float32[T+3]=S,i}}u.prototype.bytesPerElement=16,tn("StructArrayLayout4f16",u);class y extends Vd{get anchorPointX(){return this._structArray.int16[this._pos2+0]}get anchorPointY(){return this._structArray.int16[this._pos2+1]}get x1(){return this._structArray.int16[this._pos2+2]}get y1(){return this._structArray.int16[this._pos2+3]}get x2(){return this._structArray.int16[this._pos2+4]}get y2(){return this._structArray.int16[this._pos2+5]}get featureIndex(){return this._structArray.uint32[this._pos4+3]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+8]}get bucketIndex(){return this._structArray.uint16[this._pos2+9]}get anchorPoint(){return new _(this.anchorPointX,this.anchorPointY)}}y.prototype.size=20;class b extends Gh{get(i){return new y(this,i)}}tn("CollisionBoxArray",b);class j extends Vd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+2]}get numGlyphs(){return this._structArray.uint16[this._pos2+3]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+2]}get lineStartIndex(){return this._structArray.uint32[this._pos4+3]}get lineLength(){return this._structArray.uint32[this._pos4+4]}get segment(){return this._structArray.uint16[this._pos2+10]}get lowerSize(){return this._structArray.uint16[this._pos2+11]}get upperSize(){return this._structArray.uint16[this._pos2+12]}get lineOffsetX(){return this._structArray.float32[this._pos4+7]}get lineOffsetY(){return this._structArray.float32[this._pos4+8]}get writingMode(){return this._structArray.uint8[this._pos1+36]}get placedOrientation(){return this._structArray.uint8[this._pos1+37]}set placedOrientation(i){this._structArray.uint8[this._pos1+37]=i}get hidden(){return this._structArray.uint8[this._pos1+38]}set hidden(i){this._structArray.uint8[this._pos1+38]=i}get crossTileID(){return this._structArray.uint32[this._pos4+10]}set crossTileID(i){this._structArray.uint32[this._pos4+10]=i}get associatedIconIndex(){return this._structArray.int16[this._pos2+22]}}j.prototype.size=48;class I extends fi{get(i){return new j(this,i)}}tn("PlacedSymbolArray",I);class F extends Vd{get anchorX(){return this._structArray.int16[this._pos2+0]}get anchorY(){return this._structArray.int16[this._pos2+1]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+2]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+3]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+4]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+5]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+6]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+7]}get key(){return this._structArray.uint16[this._pos2+8]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+9]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+10]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+11]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+12]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+13]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+14]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+15]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+16]}get featureIndex(){return this._structArray.uint16[this._pos2+17]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+18]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+19]}get numIconVertices(){return this._structArray.uint16[this._pos2+20]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+21]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+22]}get crossTileID(){return this._structArray.uint32[this._pos4+12]}set crossTileID(i){this._structArray.uint32[this._pos4+12]=i}get textBoxScale(){return this._structArray.float32[this._pos4+13]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+14]}get textAnchorOffsetStartIndex(){return this._structArray.uint16[this._pos2+30]}get textAnchorOffsetEndIndex(){return this._structArray.uint16[this._pos2+31]}}F.prototype.size=64;class U extends Gi{get(i){return new F(this,i)}}tn("SymbolInstanceArray",U);class Y extends Yu{getoffsetX(i){return this.float32[1*i+0]}}tn("GlyphOffsetArray",Y);class re extends cu{getx(i){return this.int16[3*i+0]}gety(i){return this.int16[3*i+1]}gettileUnitDistanceFromAnchor(i){return this.int16[3*i+2]}}tn("SymbolLineVertexArray",re);class ce extends Vd{get textAnchor(){return this._structArray.uint16[this._pos2+0]}get textOffset0(){return this._structArray.float32[this._pos4+1]}get textOffset1(){return this._structArray.float32[this._pos4+2]}}ce.prototype.size=12;class le extends uu{get(i){return new ce(this,i)}}tn("TextAnchorOffsetArray",le);class ge extends Vd{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}}ge.prototype.size=8;class be extends Ju{get(i){return new ge(this,i)}}tn("FeatureIndexArray",be);class Me extends Io{}class Ne extends Io{}class Ie extends Io{}class ze extends jl{}class He extends qh{}class Fe extends Ml{}class Ge extends kl{}class Ye extends Ud{}class Ue extends ti{}class st extends Ku{}class bt extends Xu{}class yt extends gc{}class vt extends vc{}class xt extends ni{}class qt extends C{}const Gt=Pi([{name:"a_pos",components:2,type:"Int16"}],4),{members:Rt}=Gt;class Yt{constructor(i=[]){this._forceNewSegmentOnNextPrepare=!1,this.segments=i}prepareSegment(i,l,p,v){const S=this.segments[this.segments.length-1];return i>Yt.MAX_VERTEX_ARRAY_LENGTH&&cn(`Max vertices per segment is ${Yt.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${i}. Consider using the \`fillLargeMeshArrays\` function if you require meshes with more than ${Yt.MAX_VERTEX_ARRAY_LENGTH} vertices.`),this._forceNewSegmentOnNextPrepare||!S||S.vertexLength+i>Yt.MAX_VERTEX_ARRAY_LENGTH||S.sortKey!==v?this.createNewSegment(l,p,v):S}createNewSegment(i,l,p){const v={vertexOffset:i.length,primitiveOffset:l.length,vertexLength:0,primitiveLength:0,vaos:{}};return p!==void 0&&(v.sortKey=p),this._forceNewSegmentOnNextPrepare=!1,this.segments.push(v),v}getOrCreateLatestSegment(i,l,p){return this.prepareSegment(0,i,l,p)}forceNewSegmentOnNextPrepare(){this._forceNewSegmentOnNextPrepare=!0}get(){return this.segments}destroy(){for(const i of this.segments)for(const l in i.vaos)i.vaos[l].destroy()}static simpleSegment(i,l,p,v){return new Yt([{vertexOffset:i,primitiveOffset:l,vertexLength:p,primitiveLength:v,vaos:{},sortKey:0}])}}function $n(c,i){return 256*(c=Nt(Math.floor(c),0,255))+Nt(Math.floor(i),0,255)}Yt.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,tn("SegmentVector",Yt);const Mr=Pi([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),li=Pi([{name:"a_dasharray_from",components:4,type:"Uint16"},{name:"a_dasharray_to",components:4,type:"Uint16"}]);var $r,ci,Vr,ui={exports:{}},pi={exports:{}},pa={exports:{}},Oi=(function(){if(Vr)return ui.exports;Vr=1;var c=($r||($r=1,pi.exports=function(l,p){var v,S,T,M,D,V,G,Z;for(S=l.length-(v=3&l.length),T=p,D=3432918353,V=461845907,Z=0;Z<S;)G=255&l.charCodeAt(Z)|(255&l.charCodeAt(++Z))<<8|(255&l.charCodeAt(++Z))<<16|(255&l.charCodeAt(++Z))<<24,++Z,T=27492+(65535&(M=5*(65535&(T=(T^=G=(65535&(G=(G=(65535&G)*D+(((G>>>16)*D&65535)<<16)&4294967295)<<15|G>>>17))*V+(((G>>>16)*V&65535)<<16)&4294967295)<<13|T>>>19))+((5*(T>>>16)&65535)<<16)&4294967295))+((58964+(M>>>16)&65535)<<16);switch(G=0,v){case 3:G^=(255&l.charCodeAt(Z+2))<<16;case 2:G^=(255&l.charCodeAt(Z+1))<<8;case 1:T^=G=(65535&(G=(G=(65535&(G^=255&l.charCodeAt(Z)))*D+(((G>>>16)*D&65535)<<16)&4294967295)<<15|G>>>17))*V+(((G>>>16)*V&65535)<<16)&4294967295}return T^=l.length,T=2246822507*(65535&(T^=T>>>16))+((2246822507*(T>>>16)&65535)<<16)&4294967295,T=3266489909*(65535&(T^=T>>>13))+((3266489909*(T>>>16)&65535)<<16)&4294967295,(T^=T>>>16)>>>0}),pi.exports),i=(ci||(ci=1,pa.exports=function(l,p){for(var v,S=l.length,T=p^S,M=0;S>=4;)v=1540483477*(65535&(v=255&l.charCodeAt(M)|(255&l.charCodeAt(++M))<<8|(255&l.charCodeAt(++M))<<16|(255&l.charCodeAt(++M))<<24))+((1540483477*(v>>>16)&65535)<<16),T=1540483477*(65535&T)+((1540483477*(T>>>16)&65535)<<16)^(v=1540483477*(65535&(v^=v>>>24))+((1540483477*(v>>>16)&65535)<<16)),S-=4,++M;switch(S){case 3:T^=(255&l.charCodeAt(M+2))<<16;case 2:T^=(255&l.charCodeAt(M+1))<<8;case 1:T=1540483477*(65535&(T^=255&l.charCodeAt(M)))+((1540483477*(T>>>16)&65535)<<16)}return T=1540483477*(65535&(T^=T>>>13))+((1540483477*(T>>>16)&65535)<<16),(T^=T>>>15)>>>0}),pa.exports);return ui.exports=c,ui.exports.murmur3=c,ui.exports.murmur2=i,ui.exports})(),Ar=w(Oi);class na{constructor(){this.ids=[],this.positions=[],this.indexed=!1}add(i,l,p,v){this.ids.push(Ys(i)),this.positions.push(l,p,v)}getPositions(i){if(!this.indexed)throw new Error("Trying to get index, but feature positions are not indexed");const l=Ys(i);let p=0,v=this.ids.length-1;for(;p<v;){const T=p+v>>1;this.ids[T]>=l?v=T:p=T+1}const S=[];for(;this.ids[p]===l;)S.push({index:this.positions[3*p],start:this.positions[3*p+1],end:this.positions[3*p+2]}),p++;return S}static serialize(i,l){const p=new Float64Array(i.ids),v=new Uint32Array(i.positions);return Il(p,v,0,p.length-1),l&&l.push(p.buffer,v.buffer),{ids:p,positions:v}}static deserialize(i){const l=new na;return l.ids=i.ids,l.positions=i.positions,l.indexed=!0,l}}function Ys(c){const i=+c;return!isNaN(i)&&i<=Number.MAX_SAFE_INTEGER?i:Ar(String(c))}function Il(c,i,l,p){for(;l<p;){const v=c[l+p>>1];let S=l-1,T=p+1;for(;;){do S++;while(c[S]<v);do T--;while(c[T]>v);if(S>=T)break;Js(c,S,T),Js(i,3*S,3*T),Js(i,3*S+1,3*T+1),Js(i,3*S+2,3*T+2)}T-l<p-T?(Il(c,i,l,T),l=T+1):(Il(c,i,T+1,p),p=T)}}function Js(c,i,l){const p=c[i];c[i]=c[l],c[l]=p}tn("FeaturePositionMap",na);class so{constructor(i,l){this.gl=i.gl,this.location=l}}class xc extends so{constructor(i,l){super(i,l),this.current=0}set(i){this.current!==i&&(this.current=i,this.gl.uniform1f(this.location,i))}}class Nl extends so{constructor(i,l){super(i,l),this.current=[0,0,0,0]}set(i){i[0]===this.current[0]&&i[1]===this.current[1]&&i[2]===this.current[2]&&i[3]===this.current[3]||(this.current=i,this.gl.uniform4f(this.location,i[0],i[1],i[2],i[3]))}}class _c extends so{constructor(i,l){super(i,l),this.current=Bn.transparent}set(i){i.r===this.current.r&&i.g===this.current.g&&i.b===this.current.b&&i.a===this.current.a||(this.current=i,this.gl.uniform4f(this.location,i.r,i.g,i.b,i.a))}}const No=new Float32Array(16);function Dl(c){return[$n(255*c.r,255*c.g),$n(255*c.b,255*c.a)]}class xs{constructor(i,l,p){this.value=i,this.uniformNames=l.map((v=>`u_${v}`)),this.type=p}setUniform(i,l,p){i.set(p.constantOr(this.value))}getBinding(i,l,p){return this.type==="color"?new _c(i,l):new xc(i,l)}}class _s{constructor(i,l){this.uniformNames=l.map((p=>`u_${p}`)),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1}setConstantPatternPositions(i,l){this.pixelRatioFrom=l.pixelRatio,this.pixelRatioTo=i.pixelRatio,this.patternFrom=l.tlbr,this.patternTo=i.tlbr}setConstantDashPositions(i,l){this.dashTo=[0,i.y,i.height,i.width],this.dashFrom=[0,l.y,l.height,l.width]}setUniform(i,l,p,v){let S=null;v==="u_pattern_to"?S=this.patternTo:v==="u_pattern_from"?S=this.patternFrom:v==="u_dasharray_to"?S=this.dashTo:v==="u_dasharray_from"?S=this.dashFrom:v==="u_pixel_ratio_to"?S=this.pixelRatioTo:v==="u_pixel_ratio_from"&&(S=this.pixelRatioFrom),S!==null&&i.set(S)}getBinding(i,l,p){return p.substr(0,9)==="u_pattern"||p.substr(0,12)==="u_dasharray_"?new Nl(i,l):new xc(i,l)}}class Wr{constructor(i,l,p,v){this.expression=i,this.type=p,this.maxValue=0,this.paintVertexAttributes=l.map((S=>({name:`a_${S}`,type:"Float32",components:p==="color"?2:1,offset:0}))),this.paintVertexArray=new v}populatePaintArray(i,l,p){const v=this.paintVertexArray.length,S=this.expression.evaluate(new Lr(0,p),l,{},p.canonical,[],p.formattedSection);this.paintVertexArray.resize(i),this._setPaintValue(v,i,S)}updatePaintArray(i,l,p,v,S){const T=this.expression.evaluate(new Lr(0,S),p,v);this._setPaintValue(i,l,T)}_setPaintValue(i,l,p){if(this.type==="color"){const v=Dl(p);for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,v[0],v[1])}else{for(let v=i;v<l;v++)this.paintVertexArray.emplace(v,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class Ur{constructor(i,l,p,v,S,T){this.expression=i,this.uniformNames=l.map((M=>`u_${M}_t`)),this.type=p,this.useIntegerZoom=v,this.zoom=S,this.maxValue=0,this.paintVertexAttributes=l.map((M=>({name:`a_${M}`,type:"Float32",components:p==="color"?4:2,offset:0}))),this.paintVertexArray=new T}populatePaintArray(i,l,p){const v=this.expression.evaluate(new Lr(this.zoom,p),l,{},p.canonical,[],p.formattedSection),S=this.expression.evaluate(new Lr(this.zoom+1,p),l,{},p.canonical,[],p.formattedSection),T=this.paintVertexArray.length;this.paintVertexArray.resize(i),this._setPaintValue(T,i,v,S)}updatePaintArray(i,l,p,v,S){const T=this.expression.evaluate(new Lr(this.zoom,S),p,v),M=this.expression.evaluate(new Lr(this.zoom+1,S),p,v);this._setPaintValue(i,l,T,M)}_setPaintValue(i,l,p,v){if(this.type==="color"){const S=Dl(p),T=Dl(v);for(let M=i;M<l;M++)this.paintVertexArray.emplace(M,S[0],S[1],T[0],T[1])}else{for(let S=i;S<l;S++)this.paintVertexArray.emplace(S,p,v);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(v))}}upload(i){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=i.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(i,l){const p=this.useIntegerZoom?Math.floor(l.zoom):l.zoom,v=Nt(this.expression.interpolationFactor(p,this.zoom,this.zoom+1),0,1);i.set(v)}getBinding(i,l,p){return new xc(i,l)}}class Wi{constructor(i,l,p,v,S,T){this.expression=i,this.type=l,this.useIntegerZoom=p,this.zoom=v,this.layerId=T,this.zoomInPaintVertexArray=new S,this.zoomOutPaintVertexArray=new S}populatePaintArray(i,l,p){const v=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(i),this.zoomOutPaintVertexArray.resize(i),this._setPaintValues(v,i,this.getPositionIds(l),p)}updatePaintArray(i,l,p,v,S){this._setPaintValues(i,l,this.getPositionIds(p),S)}_setPaintValues(i,l,p,v){const S=this.getPositions(v);if(!S||!p)return;const T=S[p.min],M=S[p.mid],D=S[p.max];if(T&&M&&D)for(let V=i;V<l;V++)this.emplace(this.zoomInPaintVertexArray,V,M,T),this.emplace(this.zoomOutPaintVertexArray,V,M,D)}upload(i){if(this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer){const l=this.getVertexAttributes();this.zoomInPaintVertexBuffer=i.createVertexBuffer(this.zoomInPaintVertexArray,l,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=i.createVertexBuffer(this.zoomOutPaintVertexArray,l,this.expression.isStateDependent)}}destroy(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()}}class ra extends Wi{getPositions(i){return i.imagePositions}getPositionIds(i){return i.patterns&&i.patterns[this.layerId]}getVertexAttributes(){return Mr.members}emplace(i,l,p,v){i.emplace(l,p.tlbr[0],p.tlbr[1],p.tlbr[2],p.tlbr[3],v.tlbr[0],v.tlbr[1],v.tlbr[2],v.tlbr[3],p.pixelRatio,v.pixelRatio)}}class lo extends Wi{getPositions(i){return i.dashPositions}getPositionIds(i){return i.dashes&&i.dashes[this.layerId]}getVertexAttributes(){return li.members}emplace(i,l,p,v){i.emplace(l,0,p.y,p.height,p.width,0,v.y,v.height,v.width)}}class $a{constructor(i,l,p){this.binders={},this._buffers=[];const v=[];for(const S in i.paint._values){if(!p(S))continue;const T=i.paint.get(S);if(!(T instanceof Jo&&ua(T.property.specification)))continue;const M=cg(S,i.type),D=T.value,V=T.property.specification.type,G=T.property.useIntegerZoom,Z=T.property.specification["property-type"],ie=Z==="cross-faded"||Z==="cross-faded-data-driven";if(D.kind==="constant")this.binders[S]=ie?new _s(D.value,M):new xs(D.value,M,V),v.push(`/u_${S}`);else if(D.kind==="source"||ie){const se=Kp(S,V,"source");this.binders[S]=ie?S==="line-dasharray"?new lo(D,V,G,l,se,i.id):new ra(D,V,G,l,se,i.id):new Wr(D,M,V,se),v.push(`/a_${S}`)}else{const se=Kp(S,V,"composite");this.binders[S]=new Ur(D,M,V,G,l,se),v.push(`/z_${S}`)}}this.cacheKey=v.sort().join("")}getMaxValue(i){const l=this.binders[i];return l instanceof Wr||l instanceof Ur?l.maxValue:0}populatePaintArrays(i,l,p){for(const v in this.binders){const S=this.binders[v];(S instanceof Wr||S instanceof Ur||S instanceof Wi)&&S.populatePaintArray(i,l,p)}}setConstantPatternPositions(i,l){for(const p in this.binders){const v=this.binders[p];v instanceof _s&&v.setConstantPatternPositions(i,l)}}setConstantDashPositions(i,l){for(const p in this.binders){const v=this.binders[p];v instanceof _s&&v.setConstantDashPositions(i,l)}}updatePaintArrays(i,l,p,v,S){let T=!1;for(const M in i){const D=l.getPositions(M);for(const V of D){const G=p.feature(V.index);for(const Z in this.binders){const ie=this.binders[Z];if((ie instanceof Wr||ie instanceof Ur||ie instanceof Wi)&&ie.expression.isStateDependent===!0){const se=v.paint.get(Z);ie.expression=se.value,ie.updatePaintArray(V.start,V.end,G,i[M],S),T=!0}}}}return T}defines(){const i=[];for(const l in this.binders){const p=this.binders[l];(p instanceof xs||p instanceof _s)&&i.push(...p.uniformNames.map((v=>`#define HAS_UNIFORM_${v}`)))}return i}getBinderAttributes(){const i=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof Wr||p instanceof Ur)for(let v=0;v<p.paintVertexAttributes.length;v++)i.push(p.paintVertexAttributes[v].name);else if(p instanceof Wi){const v=p.getVertexAttributes();for(const S of v)i.push(S.name)}}return i}getBinderUniforms(){const i=[];for(const l in this.binders){const p=this.binders[l];if(p instanceof xs||p instanceof _s||p instanceof Ur)for(const v of p.uniformNames)i.push(v)}return i}getPaintVertexBuffers(){return this._buffers}getUniforms(i,l){const p=[];for(const v in this.binders){const S=this.binders[v];if(S instanceof xs||S instanceof _s||S instanceof Ur){for(const T of S.uniformNames)if(l[T]){const M=S.getBinding(i,l[T],T);p.push({name:T,property:v,binding:M})}}}return p}setUniforms(i,l,p,v){for(const{name:S,property:T,binding:M}of l)this.binders[T].setUniform(M,v,p.get(T),S)}updatePaintBuffers(i){this._buffers=[];for(const l in this.binders){const p=this.binders[l];if(i&&p instanceof Wi){const v=i.fromScale===2?p.zoomInPaintVertexBuffer:p.zoomOutPaintVertexBuffer;v&&this._buffers.push(v)}else(p instanceof Wr||p instanceof Ur)&&p.paintVertexBuffer&&this._buffers.push(p.paintVertexBuffer)}}upload(i){for(const l in this.binders){const p=this.binders[l];(p instanceof Wr||p instanceof Ur||p instanceof Wi)&&p.upload(i)}this.updatePaintBuffers()}destroy(){for(const i in this.binders){const l=this.binders[i];(l instanceof Wr||l instanceof Ur||l instanceof Wi)&&l.destroy()}}}class du{constructor(i,l,p=()=>!0){this.programConfigurations={};for(const v of i)this.programConfigurations[v.id]=new $a(v,l,p);this.needsUpload=!1,this._featureMap=new na,this._bufferOffset=0}populatePaintArrays(i,l,p,v){for(const S in this.programConfigurations)this.programConfigurations[S].populatePaintArrays(i,l,v);l.id!==void 0&&this._featureMap.add(l.id,p,this._bufferOffset,i),this._bufferOffset=i,this.needsUpload=!0}updatePaintArrays(i,l,p,v){for(const S of p)this.needsUpload=this.programConfigurations[S.id].updatePaintArrays(i,this._featureMap,l,S,v)||this.needsUpload}get(i){return this.programConfigurations[i]}upload(i){if(this.needsUpload){for(const l in this.programConfigurations)this.programConfigurations[l].upload(i);this.needsUpload=!1}}destroy(){for(const i in this.programConfigurations)this.programConfigurations[i].destroy()}}function cg(c,i){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-dasharray":["dasharray_to","dasharray_from"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[c]||[c.replace(`${i}-`,"").replace(/-/g,"_")]}function Kp(c,i,l){const p={color:{source:Ml,composite:u},number:{source:Yu,composite:Ml}},v=(function(S){return{"line-pattern":{source:Ge,composite:Ge},"fill-pattern":{source:Ge,composite:Ge},"fill-extrusion-pattern":{source:Ge,composite:Ge},"line-dasharray":{source:Ye,composite:Ye}}[S]})(c);return v&&v[l]||p[i][l]}tn("ConstantBinder",xs),tn("CrossFadedConstantBinder",_s),tn("SourceExpressionBinder",Wr),tn("CrossFadedPatternBinder",ra),tn("CrossFadedDasharrayBinder",lo),tn("CompositeExpressionBinder",Ur),tn("ProgramConfiguration",$a,{omit:["_buffers"]}),tn("ProgramConfigurationSet",du);const Gf=Math.pow(2,14)-1,bc=-Gf-1;function Ol(c){const i=We/c.extent,l=c.loadGeometry();for(let p=0;p<l.length;p++){const v=l[p];for(let S=0;S<v.length;S++){const T=v[S],M=Math.round(T.x*i),D=Math.round(T.y*i);T.x=Nt(M,bc,Gf),T.y=Nt(D,bc,Gf),(M<T.x||M>T.x+1||D<T.y||D>T.y+1)&&cn("Geometry exceeds allowed extent, reduce your vector tile buffer size")}}return l}function wc(c,i){return{type:c.type,id:c.id,properties:c.properties,geometry:i?Ol(c):[]}}const Wh=-32768;function Wf(c,i,l,p,v){c.emplaceBack(Wh+8*i+p,Wh+8*l+v)}class Hh{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.layoutVertexArray=new Ne,this.indexArray=new xt,this.segments=new Yt,this.programConfigurations=new du(i.layers,i.zoom),this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,p){const v=this.layers[0],S=[];let T=null,M=!1,D=v.type==="heatmap";if(v.type==="circle"){const G=v;T=G.layout.get("circle-sort-key"),M=!T.isConstant(),D=D||G.paint.get("circle-pitch-alignment")==="map"}const V=D?l.subdivisionGranularity.circle:1;for(const{feature:G,id:Z,index:ie,sourceLayerIndex:se}of i){const pe=this.layers[0]._featureFilter.needGeometry,me=wc(G,pe);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),me,p))continue;const xe=M?T.evaluate(me,{},p):void 0,Pe={id:Z,properties:G.properties,type:G.type,sourceLayerIndex:se,index:ie,geometry:pe?me.geometry:Ol(G),patterns:{},sortKey:xe};S.push(Pe)}M&&S.sort(((G,Z)=>G.sortKey-Z.sortKey));for(const G of S){const{geometry:Z,index:ie,sourceLayerIndex:se}=G,pe=i[ie].feature;this.addFeature(G,Z,ie,p,V),l.featureIndex.insert(pe,Z,ie,se,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p})}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Rt),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(i,l,p,v,S=1){let T;switch(S){case 1:T=[0,7];break;case 3:T=[0,2,5,7];break;case 5:T=[0,1,3,4,6,7];break;case 7:T=[0,1,2,3,4,5,6,7];break;default:throw new Error(`Invalid circle bucket granularity: ${S}; valid values are 1, 3, 5, 7.`)}const M=T.length;for(const D of l)for(const V of D){const G=V.x,Z=V.y;if(G<0||G>=We||Z<0||Z>=We)continue;const ie=this.segments.prepareSegment(M*M,this.layoutVertexArray,this.indexArray,i.sortKey),se=ie.vertexLength;for(let pe=0;pe<M;pe++)for(let me=0;me<M;me++)Wf(this.layoutVertexArray,G,Z,T[me],T[pe]);for(let pe=0;pe<M-1;pe++)for(let me=0;me<M-1;me++){const xe=se+pe*M+me,Pe=se+(pe+1)*M+me;this.indexArray.emplaceBack(xe,Pe+1,xe+1),this.indexArray.emplaceBack(xe,Pe,Pe+1)}ie.vertexLength+=M*M,ie.primitiveLength+=(M-1)*(M-1)*2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:{},canonical:v})}}function qd(c,i){for(let l=0;l<c.length;l++)if(Qu(i,c[l]))return!0;for(let l=0;l<i.length;l++)if(Qu(c,i[l]))return!0;return!!Zf(c,i)}function Hf(c,i,l){return!!Qu(c,i)||!!ug(i,c,l)}function uv(c,i){if(c.length===1)return hv(i,c[0]);for(let l=0;l<i.length;l++){const p=i[l];for(let v=0;v<p.length;v++)if(Qu(c,p[v]))return!0}for(let l=0;l<c.length;l++)if(hv(i,c[l]))return!0;for(let l=0;l<i.length;l++)if(Zf(c,i[l]))return!0;return!1}function dv(c,i,l){if(c.length>1){if(Zf(c,i))return!0;for(let p=0;p<i.length;p++)if(ug(i[p],c,l))return!0}for(let p=0;p<c.length;p++)if(ug(c[p],i,l))return!0;return!1}function Zf(c,i){if(c.length===0||i.length===0)return!1;for(let l=0;l<c.length-1;l++){const p=c[l],v=c[l+1];for(let S=0;S<i.length-1;S++)if(Qw(p,v,i[S],i[S+1]))return!0}return!1}function Qw(c,i,l,p){return Hn(c,l,p)!==Hn(i,l,p)&&Hn(c,i,l)!==Hn(c,i,p)}function ug(c,i,l){const p=l*l;if(i.length===1)return c.distSqr(i[0])<p;for(let v=1;v<i.length;v++)if(dg(c,i[v-1],i[v])<p)return!0;return!1}function dg(c,i,l){const p=i.distSqr(l);if(p===0)return c.distSqr(i);const v=((c.x-i.x)*(l.x-i.x)+(c.y-i.y)*(l.y-i.y))/p;return c.distSqr(v<0?i:v>1?l:l.sub(i)._mult(v)._add(i))}function hv(c,i){let l,p,v,S=!1;for(let T=0;T<c.length;T++){l=c[T];for(let M=0,D=l.length-1;M<l.length;D=M++)p=l[M],v=l[D],p.y>i.y!=v.y>i.y&&i.x<(v.x-p.x)*(i.y-p.y)/(v.y-p.y)+p.x&&(S=!S)}return S}function Qu(c,i){let l=!1;for(let p=0,v=c.length-1;p<c.length;v=p++){const S=c[p],T=c[v];S.y>i.y!=T.y>i.y&&i.x<(T.x-S.x)*(i.y-S.y)/(T.y-S.y)+S.x&&(l=!l)}return l}function ed(c,i,l){const p=l[0],v=l[2];if(c.x<p.x&&i.x<p.x||c.x>v.x&&i.x>v.x||c.y<p.y&&i.y<p.y||c.y>v.y&&i.y>v.y)return!1;const S=Hn(c,i,l[0]);return S!==Hn(c,i,l[1])||S!==Hn(c,i,l[2])||S!==Hn(c,i,l[3])}function Kf(c,i,l){const p=i.paint.get(c).value;return p.kind==="constant"?p.value:l.programConfigurations.get(i.id).getMaxValue(c)}function Xp(c){return Math.sqrt(c[0]*c[0]+c[1]*c[1])}function Xf(c,i,l,p,v){if(!i[0]&&!i[1])return c;const S=_.convert(i)._mult(v);l==="viewport"&&S._rotate(-p);const T=[];for(let M=0;M<c.length;M++)T.push(c[M].sub(S));return T}function O0(c){const i=[];for(let l=0;l<c.length;l++){const p=c[l],v=i.at(-1);(l===0||v&&!p.equals(v))&&i.push(p)}return i}function R0({queryGeometry:c,size:i},l){return Hf(c,l,i)}function Yp({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:v},S){return Hf(c,S,i*(l.projectTileCoordinates(S.x,S.y,p,v).signedDistanceFromCamera/l.cameraToCenterDistance))}function Do({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:v},S){const T=l.projectTileCoordinates(S.x,S.y,p,v).signedDistanceFromCamera,M=i*(l.cameraToCenterDistance/T);return Hf(c,Yf(S,l,p,v),M)}function e2({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:v},S){return Hf(c,Yf(S,l,p,v),i)}function L0({queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:v,pitchAlignment:S="map",pitchScale:T="map"},M){const D=S==="map"?T==="map"?R0:Yp:T==="map"?Do:e2,V={queryGeometry:c,size:i,transform:l,unwrappedTileID:p,getElevation:v};for(const G of M)for(const Z of G)if(D(V,Z))return!0;return!1}function Yf(c,i,l,p){const v=i.projectTileCoordinates(c.x,c.y,l,p).point;return new _((.5*v.x+.5)*i.width,(.5*-v.y+.5)*i.height)}let co,z0;tn("CircleBucket",Hh,{omit:["layers"]});var xn={get paint(){return z0=z0||new Ei({"circle-radius":new vn(Ke.paint_circle["circle-radius"]),"circle-color":new vn(Ke.paint_circle["circle-color"]),"circle-blur":new vn(Ke.paint_circle["circle-blur"]),"circle-opacity":new vn(Ke.paint_circle["circle-opacity"]),"circle-translate":new an(Ke.paint_circle["circle-translate"]),"circle-translate-anchor":new an(Ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new an(Ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new an(Ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new vn(Ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new vn(Ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new vn(Ke.paint_circle["circle-stroke-opacity"])})},get layout(){return co=co||new Ei({"circle-sort-key":new vn(Ke.layout_circle["circle-sort-key"])})}};class Jf extends ko{constructor(i,l){super(i,xn,l)}createBucket(i){return new Hh(i)}queryRadius(i){const l=i;return Kf("circle-radius",this,l)+Kf("circle-stroke-width",this,l)+Xp(this.paint.get("circle-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:v,transform:S,pixelsToTileUnits:T,unwrappedTileID:M,getElevation:D}){const V=Xf(i,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),-S.bearingInRadians,T),G=this.paint.get("circle-radius").evaluate(l,p)+this.paint.get("circle-stroke-width").evaluate(l,p),Z=this.paint.get("circle-pitch-scale"),ie=this.paint.get("circle-pitch-alignment");let se,pe;return ie==="map"?(se=V,pe=G*T):(se=(function(me,xe,Pe,Le){return me.map((Se=>Yf(Se,xe,Pe,Le)))})(V,S,M,D),pe=G),L0({queryGeometry:se,size:pe,transform:S,unwrappedTileID:M,getElevation:D,pitchAlignment:ie,pitchScale:Z},v)}}class hg extends Hh{}let fv;tn("HeatmapBucket",hg,{omit:["layers"]});var t2={get paint(){return fv=fv||new Ei({"heatmap-radius":new vn(Ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new vn(Ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new an(Ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new vs(Ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new an(Ke.paint_heatmap["heatmap-opacity"])})}};function Zh(c,{width:i,height:l},p,v){if(v){if(v instanceof Uint8ClampedArray)v=new Uint8Array(v.buffer);else if(v.length!==i*l*p)throw new RangeError(`mismatched image size. expected: ${v.length} but got: ${i*l*p}`)}else v=new Uint8Array(i*l*p);return c.width=i,c.height=l,c.data=v,c}function Jp(c,{width:i,height:l},p){if(i===c.width&&l===c.height)return;const v=Zh({},{width:i,height:l},p);Qp(c,v,{x:0,y:0},{x:0,y:0},{width:Math.min(c.width,i),height:Math.min(c.height,l)},p),c.width=i,c.height=l,c.data=v.data}function Qp(c,i,l,p,v,S){if(v.width===0||v.height===0)return i;if(v.width>c.width||v.height>c.height||l.x>c.width-v.width||l.y>c.height-v.height)throw new RangeError("out of range source coordinates for image copy");if(v.width>i.width||v.height>i.height||p.x>i.width-v.width||p.y>i.height-v.height)throw new RangeError("out of range destination coordinates for image copy");const T=c.data,M=i.data;if(T===M)throw new Error("srcData equals dstData, so image is already copied");for(let D=0;D<v.height;D++){const V=((l.y+D)*c.width+l.x)*S,G=((p.y+D)*i.width+p.x)*S;for(let Z=0;Z<v.width*S;Z++)M[G+Z]=T[V+Z]}return i}class Qf{constructor(i,l){Zh(this,i,1,l)}resize(i){Jp(this,i,1)}clone(){return new Qf({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,p,v,S){Qp(i,l,p,v,S,1)}}class Oo{constructor(i,l){Zh(this,i,4,l)}resize(i){Jp(this,i,4)}replace(i,l){l?this.data.set(i):this.data=i instanceof Uint8ClampedArray?new Uint8Array(i.buffer):i}clone(){return new Oo({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(i,l,p,v,S){Qp(i,l,p,v,S,4)}setPixel(i,l,p){const v=4*(i*this.width+l);this.data[v+0]=Math.round(255*p.r/p.a),this.data[v+1]=Math.round(255*p.g/p.a),this.data[v+2]=Math.round(255*p.b/p.a),this.data[v+3]=Math.round(255*p.a)}}function pv(c){const i={},l=c.resolution||256,p=c.clips?c.clips.length:1,v=c.image||new Oo({width:l,height:p});if(Math.log(l)/Math.LN2%1!=0)throw new Error(`width is not a power of 2 - ${l}`);const S=(T,M,D)=>{i[c.evaluationKey]=D;const V=c.expression.evaluate(i);v.setPixel(T/4/l,M/4,V)};if(c.clips)for(let T=0,M=0;T<p;++T,M+=4*l)for(let D=0,V=0;D<l;D++,V+=4){const G=D/(l-1),{start:Z,end:ie}=c.clips[T];S(M,V,Z*(1-G)+ie*G)}else for(let T=0,M=0;T<l;T++,M+=4)S(0,M,T/(l-1));return v}tn("AlphaImage",Qf),tn("RGBAImage",Oo);const em="big-fb";class mv extends ko{createBucket(i){return new hg(i)}constructor(i,l){super(i,t2,l),this.heatmapFbos=new Map,this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(i){i==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=pv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbos.has(em)&&this.heatmapFbos.delete(em)}queryRadius(i){return Kf("heatmap-radius",this,i)}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:v,transform:S,pixelsToTileUnits:T,unwrappedTileID:M,getElevation:D}){return L0({queryGeometry:i,size:this.paint.get("heatmap-radius").evaluate(l,p)*T,transform:S,unwrappedTileID:M,getElevation:D},v)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&!this.isHidden()}}let Va;var Sc={get paint(){return Va=Va||new Ei({"hillshade-illumination-direction":new an(Ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-altitude":new an(Ke.paint_hillshade["hillshade-illumination-altitude"]),"hillshade-illumination-anchor":new an(Ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new an(Ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new an(Ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new an(Ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new an(Ke.paint_hillshade["hillshade-accent-color"]),"hillshade-method":new an(Ke.paint_hillshade["hillshade-method"])})}};class Gd extends ko{constructor(i,l){super(i,Sc,l),this.recalculate({zoom:0,zoomHistory:{}},void 0)}getIlluminationProperties(){let i=this.paint.get("hillshade-illumination-direction").values,l=this.paint.get("hillshade-illumination-altitude").values,p=this.paint.get("hillshade-highlight-color").values,v=this.paint.get("hillshade-shadow-color").values;const S=Math.max(i.length,l.length,p.length,v.length);i=i.concat(Array(S-i.length).fill(i.at(-1))),l=l.concat(Array(S-l.length).fill(l.at(-1))),p=p.concat(Array(S-p.length).fill(p.at(-1))),v=v.concat(Array(S-v.length).fill(v.at(-1)));const T=l.map(wa);return{directionRadians:i.map(wa),altitudeRadians:T,shadowColor:v,highlightColor:p}}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&!this.isHidden()}}let gv;var F0={get paint(){return gv=gv||new Ei({"color-relief-opacity":new an(Ke["paint_color-relief"]["color-relief-opacity"]),"color-relief-color":new vs(Ke["paint_color-relief"]["color-relief-color"])})}};class Qs{constructor(i,l,p,v){this.context=i,this.format=p,this.texture=i.gl.createTexture(),this.update(l,v)}update(i,l,p){const{width:v,height:S}=i,T=!(this.size&&this.size[0]===v&&this.size[1]===S||p),{context:M}=this,{gl:D}=M;if(this.useMipmap=!!(l&&l.useMipmap),D.bindTexture(D.TEXTURE_2D,this.texture),M.pixelStoreUnpackFlipY.set(!1),M.pixelStoreUnpack.set(1),M.pixelStoreUnpackPremultiplyAlpha.set(this.format===D.RGBA&&(!l||l.premultiply!==!1)),T)this.size=[v,S],i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||Nr(i)?D.texImage2D(D.TEXTURE_2D,0,this.format,this.format,D.UNSIGNED_BYTE,i):D.texImage2D(D.TEXTURE_2D,0,this.format,v,S,0,this.format,D.UNSIGNED_BYTE,i.data);else{const{x:V,y:G}=p||{x:0,y:0};i instanceof HTMLImageElement||i instanceof HTMLCanvasElement||i instanceof HTMLVideoElement||i instanceof ImageData||Nr(i)?D.texSubImage2D(D.TEXTURE_2D,0,V,G,D.RGBA,D.UNSIGNED_BYTE,i):D.texSubImage2D(D.TEXTURE_2D,0,V,G,v,S,D.RGBA,D.UNSIGNED_BYTE,i.data)}this.useMipmap&&this.isSizePowerOfTwo()&&D.generateMipmap(D.TEXTURE_2D),M.pixelStoreUnpackFlipY.setDefault(),M.pixelStoreUnpack.setDefault(),M.pixelStoreUnpackPremultiplyAlpha.setDefault()}bind(i,l,p){const{context:v}=this,{gl:S}=v;S.bindTexture(S.TEXTURE_2D,this.texture),p!==S.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(p=S.LINEAR),i!==this.filter&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MAG_FILTER,i),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_MIN_FILTER,p||i),this.filter=i),l!==this.wrap&&(S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_S,l),S.texParameteri(S.TEXTURE_2D,S.TEXTURE_WRAP_T,l),this.wrap=l)}isSizePowerOfTwo(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0}destroy(){const{gl:i}=this.context;i.deleteTexture(this.texture),this.texture=null}}class yv{constructor(i,l,p,v=1,S=1,T=1,M=0){if(this.uid=i,l.height!==l.width)throw new RangeError("DEM tiles must be square");if(p&&!["mapbox","terrarium","custom"].includes(p))return void cn(`"${p}" is not a valid encoding type. Valid types include "mapbox", "terrarium" and "custom".`);this.stride=l.height;const D=this.dim=l.height-2;switch(this.data=new Uint32Array(l.data.buffer),p){case"terrarium":this.redFactor=256,this.greenFactor=1,this.blueFactor=1/256,this.baseShift=32768;break;case"custom":this.redFactor=v,this.greenFactor=S,this.blueFactor=T,this.baseShift=M;break;default:this.redFactor=6553.6,this.greenFactor=25.6,this.blueFactor=.1,this.baseShift=1e4}for(let V=0;V<D;V++)this.data[this._idx(-1,V)]=this.data[this._idx(0,V)],this.data[this._idx(D,V)]=this.data[this._idx(D-1,V)],this.data[this._idx(V,-1)]=this.data[this._idx(V,0)],this.data[this._idx(V,D)]=this.data[this._idx(V,D-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(D,-1)]=this.data[this._idx(D-1,0)],this.data[this._idx(-1,D)]=this.data[this._idx(0,D-1)],this.data[this._idx(D,D)]=this.data[this._idx(D-1,D-1)],this.min=Number.MAX_SAFE_INTEGER,this.max=Number.MIN_SAFE_INTEGER;for(let V=0;V<D;V++)for(let G=0;G<D;G++){const Z=this.get(V,G);Z>this.max&&(this.max=Z),Z<this.min&&(this.min=Z)}}get(i,l){const p=new Uint8Array(this.data.buffer),v=4*this._idx(i,l);return this.unpack(p[v],p[v+1],p[v+2])}getUnpackVector(){return[this.redFactor,this.greenFactor,this.blueFactor,this.baseShift]}_idx(i,l){if(i<-1||i>=this.dim+1||l<-1||l>=this.dim+1)throw new RangeError(`Out of range source coordinates for DEM data. x: ${i}, y: ${l}, dim: ${this.dim}`);return(l+1)*this.stride+(i+1)}unpack(i,l,p){return i*this.redFactor+l*this.greenFactor+p*this.blueFactor-this.baseShift}pack(i){return Tc(i,this.getUnpackVector())}getPixels(){return new Oo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))}backfillBorder(i,l,p){if(this.dim!==i.dim)throw new Error("dem dimension mismatch");let v=l*this.dim,S=l*this.dim+this.dim,T=p*this.dim,M=p*this.dim+this.dim;switch(l){case-1:v=S-1;break;case 1:S=v+1}switch(p){case-1:T=M-1;break;case 1:M=T+1}const D=-l*this.dim,V=-p*this.dim;for(let G=T;G<M;G++)for(let Z=v;Z<S;Z++)this.data[this._idx(Z,G)]=i.data[this._idx(Z+D,G+V)]}}function Tc(c,i){const l=i[0],p=i[1],v=i[2],S=i[3],T=Math.min(l,p,v),M=Math.round((c+S)/T);return{r:Math.floor(M*T/l)%256,g:Math.floor(M*T/p)%256,b:Math.floor(M*T/v)%256}}tn("DEMData",yv);class n2 extends ko{constructor(i,l){super(i,F0,l)}_createColorRamp(i){const l={elevationStops:[],colorStops:[]},p=this._transitionablePaint._values["color-relief-color"].value.expression;if(p instanceof E&&p._styleExpression.expression instanceof Qr){this.colorRampExpression=p;const T=p._styleExpression.expression;l.elevationStops=T.labels,l.colorStops=[];for(const M of l.elevationStops)l.colorStops.push(T.evaluate({globals:{elevation:M}}))}if(l.elevationStops.length<1&&(l.elevationStops=[0],l.colorStops=[Bn.transparent]),l.elevationStops.length<2&&(l.elevationStops.push(l.elevationStops[0]+1),l.colorStops.push(l.colorStops[0])),l.elevationStops.length<=i)return l;const v={elevationStops:[],colorStops:[]},S=(l.elevationStops.length-1)/(i-1);for(let T=0;T<l.elevationStops.length-.5;T+=S)v.elevationStops.push(l.elevationStops[Math.round(T)]),v.colorStops.push(l.colorStops[Math.round(T)]);return cn(`Too many colors in specification of ${this.id} color-relief layer, may not render properly. Max possible colors: ${i}, provided: ${l.elevationStops.length}`),v}_colorRampChanged(){return this.colorRampExpression!=this._transitionablePaint._values["color-relief-color"].value.expression}getColorRampTextures(i,l,p){if(this.colorRampTextures&&!this._colorRampChanged())return this.colorRampTextures;const v=this._createColorRamp(l),S=new Oo({width:v.colorStops.length,height:1}),T=new Oo({width:v.colorStops.length,height:1});for(let M=0;M<v.elevationStops.length;M++){const D=Tc(v.elevationStops[M],p);T.setPixel(0,M,new Bn(D.r/255,D.g/255,D.b/255,1)),S.setPixel(0,M,v.colorStops[M])}return this.colorRampTextures={elevationTexture:new Qs(i,T,i.gl.RGBA),colorTexture:new Qs(i,S,i.gl.RGBA)},this.colorRampTextures}hasOffscreenPass(){return!this.isHidden()&&!!this.colorRampTextures}}const B0=Pi([{name:"a_pos",components:2,type:"Int16"}],4),{members:$0}=B0;function tm(c,i,l){const p=l.patternDependencies;let v=!1;for(const S of i){const T=S.paint.get(`${c}-pattern`);T.isConstant()||(v=!0);const M=T.constantOr(null);M&&(v=!0,p[M.to]=!0,p[M.from]=!0)}return v}function fg(c,i,l,p,v){const{zoom:S}=p,T=v.patternDependencies;for(const M of i){const D=M.paint.get(`${c}-pattern`).value;if(D.kind!=="constant"){let V=D.evaluate({zoom:S-1},l,{},v.availableImages),G=D.evaluate({zoom:S},l,{},v.availableImages),Z=D.evaluate({zoom:S+1},l,{},v.availableImages);V=V&&V.name?V.name:V,G=G&&G.name?G.name:G,Z=Z&&Z.name?Z.name:Z,T[V]=!0,T[G]=!0,T[Z]=!0,l.patterns[M.id]={min:V,mid:G,max:Z}}}return l}function V0(c,i,l,p,v){let S;if(v===(function(T,M,D,V){let G=0;for(let Z=M,ie=D-V;Z<D;Z+=V)G+=(T[ie]-T[Z])*(T[Z+1]+T[ie+1]),ie=Z;return G})(c,i,l,p)>0)for(let T=i;T<l;T+=p)S=nd(T/p|0,c[T],c[T+1],S);else for(let T=l-p;T>=i;T-=p)S=nd(T/p|0,c[T],c[T+1],S);return S&&Ia(S,S.next)&&(Kd(S),S=S.next),S}function hu(c,i){if(!c)return c;i||(i=c);let l,p=c;do if(l=!1,p.steiner||!Ia(p,p.next)&&mi(p.prev,p,p.next)!==0)p=p.next;else{if(Kd(p),p=i=p.prev,p===p.next)break;l=!0}while(l||p!==i);return i}function Kh(c,i,l,p,v,S,T){if(!c)return;!T&&S&&(function(D,V,G,Z){let ie=D;do ie.z===0&&(ie.z=ia(ie.x,ie.y,V,G,Z)),ie.prevZ=ie.prev,ie.nextZ=ie.next,ie=ie.next;while(ie!==D);ie.prevZ.nextZ=null,ie.prevZ=null,(function(se){let pe,me=1;do{let xe,Pe=se;se=null;let Le=null;for(pe=0;Pe;){pe++;let Se=Pe,ke=0;for(let tt=0;tt<me&&(ke++,Se=Se.nextZ,Se);tt++);let qe=me;for(;ke>0||qe>0&&Se;)ke!==0&&(qe===0||!Se||Pe.z<=Se.z)?(xe=Pe,Pe=Pe.nextZ,ke--):(xe=Se,Se=Se.nextZ,qe--),Le?Le.nextZ=xe:se=xe,xe.prevZ=Le,Le=xe;Pe=Se}Le.nextZ=null,me*=2}while(pe>1)})(ie)})(c,p,v,S);let M=c;for(;c.prev!==c.next;){const D=c.prev,V=c.next;if(S?kr(c,p,v,S):Rl(c))i.push(D.i,c.i,V.i),Kd(c),c=V.next,M=V.next;else if((c=V)===M){T?T===1?Kh(c=Ua(hu(c),i),i,l,p,v,S,2):T===2&&ma(c,i,l,p,v,S):Kh(hu(c),i,l,p,v,S,1);break}}}function Rl(c){const i=c.prev,l=c,p=c.next;if(mi(i,l,p)>=0)return!1;const v=i.x,S=l.x,T=p.x,M=i.y,D=l.y,V=p.y,G=Math.min(v,S,T),Z=Math.min(M,D,V),ie=Math.max(v,S,T),se=Math.max(M,D,V);let pe=p.next;for(;pe!==i;){if(pe.x>=G&&pe.x<=ie&&pe.y>=Z&&pe.y<=se&&Hd(v,M,S,D,T,V,pe.x,pe.y)&&mi(pe.prev,pe,pe.next)>=0)return!1;pe=pe.next}return!0}function kr(c,i,l,p){const v=c.prev,S=c,T=c.next;if(mi(v,S,T)>=0)return!1;const M=v.x,D=S.x,V=T.x,G=v.y,Z=S.y,ie=T.y,se=Math.min(M,D,V),pe=Math.min(G,Z,ie),me=Math.max(M,D,V),xe=Math.max(G,Z,ie),Pe=ia(se,pe,i,l,p),Le=ia(me,xe,i,l,p);let Se=c.prevZ,ke=c.nextZ;for(;Se&&Se.z>=Pe&&ke&&ke.z<=Le;){if(Se.x>=se&&Se.x<=me&&Se.y>=pe&&Se.y<=xe&&Se!==v&&Se!==T&&Hd(M,G,D,Z,V,ie,Se.x,Se.y)&&mi(Se.prev,Se,Se.next)>=0||(Se=Se.prevZ,ke.x>=se&&ke.x<=me&&ke.y>=pe&&ke.y<=xe&&ke!==v&&ke!==T&&Hd(M,G,D,Z,V,ie,ke.x,ke.y)&&mi(ke.prev,ke,ke.next)>=0))return!1;ke=ke.nextZ}for(;Se&&Se.z>=Pe;){if(Se.x>=se&&Se.x<=me&&Se.y>=pe&&Se.y<=xe&&Se!==v&&Se!==T&&Hd(M,G,D,Z,V,ie,Se.x,Se.y)&&mi(Se.prev,Se,Se.next)>=0)return!1;Se=Se.prevZ}for(;ke&&ke.z<=Le;){if(ke.x>=se&&ke.x<=me&&ke.y>=pe&&ke.y<=xe&&ke!==v&&ke!==T&&Hd(M,G,D,Z,V,ie,ke.x,ke.y)&&mi(ke.prev,ke,ke.next)>=0)return!1;ke=ke.nextZ}return!0}function Ua(c,i){let l=c;do{const p=l.prev,v=l.next.next;!Ia(p,v)&&pg(p,l,l.next,v)&&Zd(p,v)&&Zd(v,p)&&(i.push(p.i,l.i,v.i),Kd(l),Kd(l.next),l=c=v),l=l.next}while(l!==c);return hu(l)}function ma(c,i,l,p,v,S){let T=c;do{let M=T.next.next;for(;M!==T.prev;){if(T.i!==M.i&&vv(T,M)){let D=mg(T,M);return T=hu(T,T.next),D=hu(D,D.next),Kh(T,i,l,p,v,S,0),void Kh(D,i,l,p,v,S,0)}M=M.next}T=T.next}while(T!==c)}function uo(c,i){let l=c.x-i.x;return l===0&&(l=c.y-i.y,l===0)&&(l=(c.next.y-c.y)/(c.next.x-c.x)-(i.next.y-i.y)/(i.next.x-i.x)),l}function el(c,i){const l=(function(v,S){let T=S;const M=v.x,D=v.y;let V,G=-1/0;if(Ia(v,T))return T;do{if(Ia(v,T.next))return T.next;if(D<=T.y&&D>=T.next.y&&T.next.y!==T.y){const me=T.x+(D-T.y)*(T.next.x-T.x)/(T.next.y-T.y);if(me<=M&&me>G&&(G=me,V=T.x<T.next.x?T:T.next,me===M))return V}T=T.next}while(T!==S);if(!V)return null;const Z=V,ie=V.x,se=V.y;let pe=1/0;T=V;do{if(M>=T.x&&T.x>=ie&&M!==T.x&&Wd(D<se?M:G,D,ie,se,D<se?G:M,D,T.x,T.y)){const me=Math.abs(D-T.y)/(M-T.x);Zd(T,v)&&(me<pe||me===pe&&(T.x>V.x||T.x===V.x&&ep(V,T)))&&(V=T,pe=me)}T=T.next}while(T!==Z);return V})(c,i);if(!l)return i;const p=mg(l,c);return hu(p,p.next),hu(l,l.next)}function ep(c,i){return mi(c.prev,c,i.prev)<0&&mi(i.next,c,c.next)<0}function ia(c,i,l,p,v){return(c=1431655765&((c=858993459&((c=252645135&((c=16711935&((c=(c-l)*v|0)|c<<8))|c<<4))|c<<2))|c<<1))|(i=1431655765&((i=858993459&((i=252645135&((i=16711935&((i=(i-p)*v|0)|i<<8))|i<<4))|i<<2))|i<<1))<<1}function nm(c){let i=c,l=c;do(i.x<l.x||i.x===l.x&&i.y<l.y)&&(l=i),i=i.next;while(i!==c);return l}function Wd(c,i,l,p,v,S,T,M){return(v-T)*(i-M)>=(c-T)*(S-M)&&(c-T)*(p-M)>=(l-T)*(i-M)&&(l-T)*(S-M)>=(v-T)*(p-M)}function Hd(c,i,l,p,v,S,T,M){return!(c===T&&i===M)&&Wd(c,i,l,p,v,S,T,M)}function vv(c,i){return c.next.i!==i.i&&c.prev.i!==i.i&&!(function(l,p){let v=l;do{if(v.i!==l.i&&v.next.i!==l.i&&v.i!==p.i&&v.next.i!==p.i&&pg(v,v.next,l,p))return!0;v=v.next}while(v!==l);return!1})(c,i)&&(Zd(c,i)&&Zd(i,c)&&(function(l,p){let v=l,S=!1;const T=(l.x+p.x)/2,M=(l.y+p.y)/2;do v.y>M!=v.next.y>M&&v.next.y!==v.y&&T<(v.next.x-v.x)*(M-v.y)/(v.next.y-v.y)+v.x&&(S=!S),v=v.next;while(v!==l);return S})(c,i)&&(mi(c.prev,c,i.prev)||mi(c,i.prev,i))||Ia(c,i)&&mi(c.prev,c,c.next)>0&&mi(i.prev,i,i.next)>0)}function mi(c,i,l){return(i.y-c.y)*(l.x-i.x)-(i.x-c.x)*(l.y-i.y)}function Ia(c,i){return c.x===i.x&&c.y===i.y}function pg(c,i,l,p){const v=Ll(mi(c,i,l)),S=Ll(mi(c,i,p)),T=Ll(mi(l,p,c)),M=Ll(mi(l,p,i));return v!==S&&T!==M||!(v!==0||!td(c,l,i))||!(S!==0||!td(c,p,i))||!(T!==0||!td(l,c,p))||!(M!==0||!td(l,i,p))}function td(c,i,l){return i.x<=Math.max(c.x,l.x)&&i.x>=Math.min(c.x,l.x)&&i.y<=Math.max(c.y,l.y)&&i.y>=Math.min(c.y,l.y)}function Ll(c){return c>0?1:c<0?-1:0}function Zd(c,i){return mi(c.prev,c,c.next)<0?mi(c,i,c.next)>=0&&mi(c,c.prev,i)>=0:mi(c,i,c.prev)<0||mi(c,c.next,i)<0}function mg(c,i){const l=fu(c.i,c.x,c.y),p=fu(i.i,i.x,i.y),v=c.next,S=i.prev;return c.next=i,i.prev=c,l.next=v,v.prev=l,p.next=l,l.prev=p,S.next=p,p.prev=S,p}function nd(c,i,l,p){const v=fu(c,i,l);return p?(v.next=p.next,v.prev=p,p.next.prev=v,p.next=v):(v.prev=v,v.next=v),v}function Kd(c){c.next.prev=c.prev,c.prev.next=c.next,c.prevZ&&(c.prevZ.nextZ=c.nextZ),c.nextZ&&(c.nextZ.prevZ=c.prevZ)}function fu(c,i,l){return{i:c,x:i,y:l,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}class rd{constructor(i,l){if(l>i)throw new Error("Min granularity must not be greater than base granularity.");this._baseZoomGranularity=i,this._minGranularity=l}getGranularityForZoomLevel(i){return Math.max(Math.floor(this._baseZoomGranularity/(1<<i)),this._minGranularity,1)}}class Xd{constructor(i){this.fill=i.fill,this.line=i.line,this.tile=i.tile,this.stencil=i.stencil,this.circle=i.circle}}Xd.noSubdivision=new Xd({fill:new rd(0,0),line:new rd(0,0),tile:new rd(0,0),stencil:new rd(0,0),circle:1}),tn("SubdivisionGranularityExpression",rd),tn("SubdivisionGranularitySetting",Xd);const Yd=-32768,Jd=32767;class gg{constructor(i,l){this._vertexBuffer=[],this._vertexDictionary=new Map,this._used=!1,this._granularity=i,this._granularityCellSize=We/i,this._canonical=l}_getKey(i,l){return(i+=32768)<<16|l+32768}_vertexToIndex(i,l){if(i<-32768||l<-32768||i>32767||l>32767)throw new Error("Vertex coordinates are out of signed 16 bit integer range.");const p=0|Math.round(i),v=0|Math.round(l),S=this._getKey(p,v);if(this._vertexDictionary.has(S))return this._vertexDictionary.get(S);const T=this._vertexBuffer.length/2;return this._vertexDictionary.set(S,T),this._vertexBuffer.push(p,v),T}_subdivideTrianglesScanline(i){if(this._granularity<2)return(function(v,S){const T=[];for(let M=0;M<S.length;M+=3){const D=S[M],V=S[M+1],G=S[M+2],Z=v[2*D],ie=v[2*D+1];(v[2*V]-Z)*(v[2*G+1]-ie)-(v[2*V+1]-ie)*(v[2*G]-Z)>0?(T.push(D),T.push(G),T.push(V)):(T.push(D),T.push(V),T.push(G))}return T})(this._vertexBuffer,i);const l=[],p=i.length;for(let v=0;v<p;v+=3){const S=[i[v+0],i[v+1],i[v+2]],T=[this._vertexBuffer[2*i[v+0]+0],this._vertexBuffer[2*i[v+0]+1],this._vertexBuffer[2*i[v+1]+0],this._vertexBuffer[2*i[v+1]+1],this._vertexBuffer[2*i[v+2]+0],this._vertexBuffer[2*i[v+2]+1]];let M=1/0,D=1/0,V=-1/0,G=-1/0;for(let me=0;me<3;me++){const xe=T[2*me],Pe=T[2*me+1];M=Math.min(M,xe),V=Math.max(V,xe),D=Math.min(D,Pe),G=Math.max(G,Pe)}if(M===V||D===G)continue;const Z=Math.floor(M/this._granularityCellSize),ie=Math.ceil(V/this._granularityCellSize),se=Math.floor(D/this._granularityCellSize),pe=Math.ceil(G/this._granularityCellSize);if(Z!==ie||se!==pe)for(let me=se;me<pe;me++){const xe=this._scanlineGenerateVertexRingForCellRow(me,T,S);Pc(this._vertexBuffer,xe,l)}else l.push(...S)}return l}_scanlineGenerateVertexRingForCellRow(i,l,p){const v=i*this._granularityCellSize,S=v+this._granularityCellSize,T=[];for(let M=0;M<3;M++){const D=l[2*M],V=l[2*M+1],G=l[2*(M+1)%6],Z=l[(2*(M+1)+1)%6],ie=l[2*(M+2)%6],se=l[(2*(M+2)+1)%6],pe=G-D,me=Z-V,xe=pe===0,Pe=me===0,Le=(v-V)/me,Se=(S-V)/me,ke=Math.min(Le,Se),qe=Math.max(Le,Se);if(!Pe&&(ke>=1||qe<=0)||Pe&&(V<v||V>S)){Z>=v&&Z<=S&&T.push(p[(M+1)%3]);continue}!Pe&&ke>0&&T.push(this._vertexToIndex(D+pe*ke,V+me*ke));const tt=D+pe*Math.max(ke,0),gt=D+pe*Math.min(qe,1);xe||this._generateIntraEdgeVertices(T,D,V,G,Z,tt,gt),!Pe&&qe<1&&T.push(this._vertexToIndex(D+pe*qe,V+me*qe)),(Pe||Z>=v&&Z<=S)&&T.push(p[(M+1)%3]),!Pe&&(Z<=v||Z>=S)&&this._generateInterEdgeVertices(T,D,V,G,Z,ie,se,gt,v,S)}return T}_generateIntraEdgeVertices(i,l,p,v,S,T,M){const D=v-l,V=S-p,G=V===0,Z=G?Math.min(l,v):Math.min(T,M),ie=G?Math.max(l,v):Math.max(T,M),se=Math.floor(Z/this._granularityCellSize)+1,pe=Math.ceil(ie/this._granularityCellSize)-1;if(G?l<v:T<M)for(let me=se;me<=pe;me++){const xe=me*this._granularityCellSize;i.push(this._vertexToIndex(xe,p+V*(xe-l)/D))}else for(let me=pe;me>=se;me--){const xe=me*this._granularityCellSize;i.push(this._vertexToIndex(xe,p+V*(xe-l)/D))}}_generateInterEdgeVertices(i,l,p,v,S,T,M,D,V,G){const Z=S-p,ie=T-v,se=M-S,pe=(V-S)/se,me=(G-S)/se,xe=Math.min(pe,me),Pe=Math.max(pe,me),Le=v+ie*xe;let Se=Math.floor(Math.min(Le,D)/this._granularityCellSize)+1,ke=Math.ceil(Math.max(Le,D)/this._granularityCellSize)-1,qe=D<Le;const tt=se===0;if(tt&&(M===V||M===G))return;if(tt||xe>=1||Pe<=0){const jt=p-M,kt=T+(l-T)*Math.min((V-M)/jt,(G-M)/jt);Se=Math.floor(Math.min(kt,D)/this._granularityCellSize)+1,ke=Math.ceil(Math.max(kt,D)/this._granularityCellSize)-1,qe=D<kt}const gt=Z>0?G:V;if(qe)for(let jt=Se;jt<=ke;jt++)i.push(this._vertexToIndex(jt*this._granularityCellSize,gt));else for(let jt=ke;jt>=Se;jt--)i.push(this._vertexToIndex(jt*this._granularityCellSize,gt))}_generateOutline(i){const l=[];for(const p of i){const v=bs(p,this._granularity,!0),S=this._pointArrayToIndices(v),T=[];for(let M=1;M<S.length;M++)T.push(S[M-1]),T.push(S[M]);l.push(T)}return l}_handlePoles(i){let l=!1,p=!1;this._canonical&&(this._canonical.y===0&&(l=!0),this._canonical.y===(1<<this._canonical.z)-1&&(p=!0)),(l||p)&&this._fillPoles(i,l,p)}_ensureNoPoleVertices(){const i=this._vertexBuffer;for(let l=0;l<i.length;l+=2){const p=i[l+1];p===Yd&&(i[l+1]=-32767),p===Jd&&(i[l+1]=32766)}}_generatePoleQuad(i,l,p,v,S,T){v>S!=(T===Yd)?(i.push(l),i.push(p),i.push(this._vertexToIndex(v,T)),i.push(p),i.push(this._vertexToIndex(S,T)),i.push(this._vertexToIndex(v,T))):(i.push(p),i.push(l),i.push(this._vertexToIndex(v,T)),i.push(this._vertexToIndex(S,T)),i.push(p),i.push(this._vertexToIndex(v,T)))}_fillPoles(i,l,p){const v=this._vertexBuffer,S=We,T=i.length;for(let M=2;M<T;M+=3){const D=i[M-2],V=i[M-1],G=i[M],Z=v[2*D],ie=v[2*D+1],se=v[2*V],pe=v[2*V+1],me=v[2*G],xe=v[2*G+1];l&&(ie===0&&pe===0&&this._generatePoleQuad(i,D,V,Z,se,Yd),pe===0&&xe===0&&this._generatePoleQuad(i,V,G,se,me,Yd),xe===0&&ie===0&&this._generatePoleQuad(i,G,D,me,Z,Yd)),p&&(ie===S&&pe===S&&this._generatePoleQuad(i,D,V,Z,se,Jd),pe===S&&xe===S&&this._generatePoleQuad(i,V,G,se,me,Jd),xe===S&&ie===S&&this._generatePoleQuad(i,G,D,me,Z,Jd))}}_initializeVertices(i){for(let l=0;l<i.length;l+=2)this._vertexToIndex(i[l],i[l+1])}subdividePolygonInternal(i,l){if(this._used)throw new Error("Subdivision: multiple use not allowed.");this._used=!0;const{flattened:p,holeIndices:v}=(function(M){const D=[],V=[];for(const G of M)if(G.length!==0){G!==M[0]&&D.push(V.length/2);for(let Z=0;Z<G.length;Z++)V.push(G[Z].x),V.push(G[Z].y)}return{flattened:V,holeIndices:D}})(i);let S;this._initializeVertices(p);try{const M=(function(V,G,Z=2){const ie=G&&G.length,se=ie?G[0]*Z:V.length;let pe=V0(V,0,se,Z,!0);const me=[];if(!pe||pe.next===pe.prev)return me;let xe,Pe,Le;if(ie&&(pe=(function(Se,ke,qe,tt){const gt=[];for(let jt=0,kt=ke.length;jt<kt;jt++){const Ft=V0(Se,ke[jt]*tt,jt<kt-1?ke[jt+1]*tt:Se.length,tt,!1);Ft===Ft.next&&(Ft.steiner=!0),gt.push(nm(Ft))}gt.sort(uo);for(let jt=0;jt<gt.length;jt++)qe=el(gt[jt],qe);return qe})(V,G,pe,Z)),V.length>80*Z){xe=V[0],Pe=V[1];let Se=xe,ke=Pe;for(let qe=Z;qe<se;qe+=Z){const tt=V[qe],gt=V[qe+1];tt<xe&&(xe=tt),gt<Pe&&(Pe=gt),tt>Se&&(Se=tt),gt>ke&&(ke=gt)}Le=Math.max(Se-xe,ke-Pe),Le=Le!==0?32767/Le:0}return Kh(pe,me,Z,xe,Pe,Le,0),me})(p,v),D=this._convertIndices(p,M);S=this._subdivideTrianglesScanline(D)}catch(M){console.error(M)}let T=[];return l&&(T=this._generateOutline(i)),this._ensureNoPoleVertices(),this._handlePoles(S),{verticesFlattened:this._vertexBuffer,indicesTriangles:S,indicesLineList:T}}_convertIndices(i,l){const p=[];for(let v=0;v<l.length;v++)p.push(this._vertexToIndex(i[2*l[v]],i[2*l[v]+1]));return p}_pointArrayToIndices(i){const l=[];for(let p=0;p<i.length;p++){const v=i[p];l.push(this._vertexToIndex(v.x,v.y))}return l}}function Ro(c,i,l,p=!0){return new gg(l,i).subdividePolygonInternal(c,p)}function bs(c,i,l=!1){if(!c||c.length<1)return[];if(c.length<2)return[];const p=c[0],v=c[c.length-1],S=l&&(p.x!==v.x||p.y!==v.y);if(i<2)return S?[...c,c[0]]:[...c];const T=Math.floor(We/i),M=[];M.push(new _(c[0].x,c[0].y));const D=c.length,V=S?D:D-1;for(let G=0;G<V;G++){const Z=c[G],ie=G<D-1?c[G+1]:c[0],se=Z.x,pe=Z.y,me=ie.x,xe=ie.y,Pe=se!==me,Le=pe!==xe;if(!Pe&&!Le)continue;const Se=me-se,ke=xe-pe,qe=Math.abs(Se),tt=Math.abs(ke);let gt=se,jt=pe;for(;;){const Ft=Se>0?(Math.floor(gt/T)+1)*T:(Math.ceil(gt/T)-1)*T,Kt=ke>0?(Math.floor(jt/T)+1)*T:(Math.ceil(jt/T)-1)*T,$t=Math.abs(gt-Ft),It=Math.abs(jt-Kt),At=Math.abs(gt-me),ln=Math.abs(jt-xe),fn=Pe?$t/qe:Number.POSITIVE_INFINITY,An=Le?It/tt:Number.POSITIVE_INFINITY;if((At<=$t||!Pe)&&(ln<=It||!Le))break;if(fn<An&&Pe||!Le){gt=Ft,jt+=ke*fn;const mn=new _(gt,Math.round(jt));M[M.length-1].x===mn.x&&M[M.length-1].y===mn.y||M.push(mn)}else{gt+=Se*An,jt=Kt;const mn=new _(Math.round(gt),jt);M[M.length-1].x===mn.x&&M[M.length-1].y===mn.y||M.push(mn)}}const kt=new _(me,xe);M[M.length-1].x===kt.x&&M[M.length-1].y===kt.y||M.push(kt)}return M}function Pc(c,i,l){if(i.length===0)throw new Error("Subdivision vertex ring is empty.");let p=0,v=c[2*i[0]];for(let D=1;D<i.length;D++){const V=c[2*i[D]];V<v&&(v=V,p=D)}const S=i.length;let T=p,M=(T+1)%S;for(;;){const D=T-1>=0?T-1:S-1,V=(M+1)%S,G=c[2*i[D]],Z=c[2*i[V]],ie=c[2*i[T]],se=c[2*i[T]+1],pe=c[2*i[M]+1];let me=!1;if(G<Z)me=!0;else if(G>Z)me=!1;else{const xe=pe-se,Pe=-(c[2*i[M]]-ie),Le=se<pe?1:-1;((G-ie)*xe+(c[2*i[D]+1]-se)*Pe)*Le>((Z-ie)*xe+(c[2*i[V]+1]-se)*Pe)*Le&&(me=!0)}if(me){const xe=i[D],Pe=i[T],Le=i[M];xe!==Pe&&xe!==Le&&Pe!==Le&&l.push(Le,Pe,xe),T--,T<0&&(T=S-1)}else{const xe=i[V],Pe=i[T],Le=i[M];xe!==Pe&&xe!==Le&&Pe!==Le&&l.push(Le,Pe,xe),M++,M>=S&&(M=0)}if(D===V)break}}function Qo(c,i,l,p,v,S,T,M,D){const V=v.length/2,G=T&&M&&D;if(V<Yt.MAX_VERTEX_ARRAY_LENGTH){const Z=i.prepareSegment(V,l,p),ie=Z.vertexLength;for(let me=0;me<S.length;me+=3)p.emplaceBack(ie+S[me],ie+S[me+1],ie+S[me+2]);let se,pe;Z.vertexLength+=V,Z.primitiveLength+=S.length/3,G&&(pe=T.prepareSegment(V,l,M),se=pe.vertexLength,pe.vertexLength+=V);for(let me=0;me<v.length;me+=2)c(v[me],v[me+1]);if(G)for(let me=0;me<D.length;me++){const xe=D[me];for(let Pe=1;Pe<xe.length;Pe+=2)M.emplaceBack(se+xe[Pe-1],se+xe[Pe]);pe.primitiveLength+=xe.length/2}}else(function(Z,ie,se,pe,me,xe){const Pe=[];for(let tt=0;tt<pe.length/2;tt++)Pe.push(-1);const Le={count:0};let Se=0,ke=Z.getOrCreateLatestSegment(ie,se),qe=ke.vertexLength;for(let tt=2;tt<me.length;tt+=3){const gt=me[tt-2],jt=me[tt-1],kt=me[tt];let Ft=Pe[gt]<Se,Kt=Pe[jt]<Se,$t=Pe[kt]<Se;ke.vertexLength+((Ft?1:0)+(Kt?1:0)+($t?1:0))>Yt.MAX_VERTEX_ARRAY_LENGTH&&(ke=Z.createNewSegment(ie,se),Se=Le.count,Ft=!0,Kt=!0,$t=!0,qe=0);const It=tp(Pe,pe,xe,Le,gt,Ft,ke),At=tp(Pe,pe,xe,Le,jt,Kt,ke),ln=tp(Pe,pe,xe,Le,kt,$t,ke);se.emplaceBack(qe+It-Se,qe+At-Se,qe+ln-Se),ke.primitiveLength++}})(i,l,p,v,S,c),G&&(function(Z,ie,se,pe,me,xe){const Pe=[];for(let tt=0;tt<pe.length/2;tt++)Pe.push(-1);const Le={count:0};let Se=0,ke=Z.getOrCreateLatestSegment(ie,se),qe=ke.vertexLength;for(let tt=0;tt<me.length;tt++){const gt=me[tt];for(let jt=1;jt<me[tt].length;jt+=2){const kt=gt[jt-1],Ft=gt[jt];let Kt=Pe[kt]<Se,$t=Pe[Ft]<Se;ke.vertexLength+((Kt?1:0)+($t?1:0))>Yt.MAX_VERTEX_ARRAY_LENGTH&&(ke=Z.createNewSegment(ie,se),Se=Le.count,Kt=!0,$t=!0,qe=0);const It=tp(Pe,pe,xe,Le,kt,Kt,ke),At=tp(Pe,pe,xe,Le,Ft,$t,ke);se.emplaceBack(qe+It-Se,qe+At-Se),ke.primitiveLength++}}})(T,l,M,v,D,c),i.forceNewSegmentOnNextPrepare(),T?.forceNewSegmentOnNextPrepare()}function tp(c,i,l,p,v,S,T){if(S){const M=p.count;return l(i[2*v],i[2*v+1]),c[v]=p.count,p.count++,T.vertexLength++,M}return c[v]}class rm{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.patternFeatures=[],this.layoutVertexArray=new Ie,this.indexArray=new xt,this.indexArray2=new qt,this.programConfigurations=new du(i.layers,i.zoom),this.segments=new Yt,this.segments2=new Yt,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,p){this.hasDependencies=tm("fill",this.layers,l);const v=this.layers[0].layout.get("fill-sort-key"),S=!v.isConstant(),T=[];for(const{feature:M,id:D,index:V,sourceLayerIndex:G}of i){const Z=this.layers[0]._featureFilter.needGeometry,ie=wc(M,Z);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),ie,p))continue;const se=S?v.evaluate(ie,{},p,l.availableImages):void 0,pe={id:D,properties:M.properties,type:M.type,sourceLayerIndex:G,index:V,geometry:Z?ie.geometry:Ol(M),patterns:{},sortKey:se};T.push(pe)}S&&T.sort(((M,D)=>M.sortKey-D.sortKey));for(const M of T){const{geometry:D,index:V,sourceLayerIndex:G}=M;if(this.hasDependencies){const Z=fg("fill",this.layers,M,{zoom:this.zoom},l);this.patternFeatures.push(Z)}else this.addFeature(M,D,V,p,{},l.subdivisionGranularity);l.featureIndex.insert(i[V].feature,D,V,G,this.index)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p})}addFeatures(i,l,p){for(const v of this.patternFeatures)this.addFeature(v,v.geometry,v.index,l,p,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,$0),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.indexBuffer2=i.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(i,l,p,v,S,T){for(const M of nc(l,500)){const D=Ro(M,v,T.fill.getGranularityForZoomLevel(v.z)),V=this.layoutVertexArray;Qo(((G,Z)=>{V.emplaceBack(G,Z)}),this.segments,this.layoutVertexArray,this.indexArray,D.verticesFlattened,D.indicesTriangles,this.segments2,this.indexArray2,D.indicesLineList)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:S,canonical:v})}}let yg,U0;tn("FillBucket",rm,{omit:["layers","patternFeatures"]});var Qd={get paint(){return U0=U0||new Ei({"fill-antialias":new an(Ke.paint_fill["fill-antialias"]),"fill-opacity":new vn(Ke.paint_fill["fill-opacity"]),"fill-color":new vn(Ke.paint_fill["fill-color"]),"fill-outline-color":new vn(Ke.paint_fill["fill-outline-color"]),"fill-translate":new an(Ke.paint_fill["fill-translate"]),"fill-translate-anchor":new an(Ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new Hu(Ke.paint_fill["fill-pattern"])})},get layout(){return yg=yg||new Ei({"fill-sort-key":new vn(Ke.layout_fill["fill-sort-key"])})}};class q0 extends ko{constructor(i,l){super(i,Qd,l)}recalculate(i,l){super.recalculate(i,l);const p=this.paint._values["fill-outline-color"];p.value.kind==="constant"&&p.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(i){return new rm(i)}queryRadius(){return Xp(this.paint.get("fill-translate"))}queryIntersectsFeature({queryGeometry:i,geometry:l,transform:p,pixelsToTileUnits:v}){return uv(Xf(i,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),-p.bearingInRadians,v),l)}isTileClipped(){return!0}}const xv=Pi([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4),Xh=Pi([{name:"a_centroid",components:2,type:"Int16"}],4),{members:_v}=xv;class Ac{constructor(i,l,p,v,S){this.properties={},this.extent=p,this.type=0,this.id=void 0,this._pbf=i,this._geometry=-1,this._keys=v,this._values=S,i.readFields(G0,this,l)}loadGeometry(){const i=this._pbf;i.pos=this._geometry;const l=i.readVarint()+i.pos,p=[];let v,S=1,T=0,M=0,D=0;for(;i.pos<l;){if(T<=0){const V=i.readVarint();S=7&V,T=V>>3}if(T--,S===1||S===2)M+=i.readSVarint(),D+=i.readSVarint(),S===1&&(v&&p.push(v),v=[]),v&&v.push(new _(M,D));else{if(S!==7)throw new Error(`unknown command ${S}`);v&&v.push(v[0].clone())}}return v&&p.push(v),p}bbox(){const i=this._pbf;i.pos=this._geometry;const l=i.readVarint()+i.pos;let p=1,v=0,S=0,T=0,M=1/0,D=-1/0,V=1/0,G=-1/0;for(;i.pos<l;){if(v<=0){const Z=i.readVarint();p=7&Z,v=Z>>3}if(v--,p===1||p===2)S+=i.readSVarint(),T+=i.readSVarint(),S<M&&(M=S),S>D&&(D=S),T<V&&(V=T),T>G&&(G=T);else if(p!==7)throw new Error(`unknown command ${p}`)}return[M,V,D,G]}toGeoJSON(i,l,p){const v=this.extent*Math.pow(2,p),S=this.extent*i,T=this.extent*l,M=this.loadGeometry();function D(ie){return[360*(ie.x+S)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(ie.y+T)/v)*Math.PI))-90]}function V(ie){return ie.map(D)}let G;if(this.type===1){const ie=[];for(const pe of M)ie.push(pe[0]);const se=V(ie);G=ie.length===1?{type:"Point",coordinates:se[0]}:{type:"MultiPoint",coordinates:se}}else if(this.type===2){const ie=M.map(V);G=ie.length===1?{type:"LineString",coordinates:ie[0]}:{type:"MultiLineString",coordinates:ie}}else{if(this.type!==3)throw new Error("unknown feature type");{const ie=bv(M),se=[];for(const pe of ie)se.push(pe.map(V));G=se.length===1?{type:"Polygon",coordinates:se[0]}:{type:"MultiPolygon",coordinates:se}}}const Z={type:"Feature",geometry:G,properties:this.properties};return this.id!=null&&(Z.id=this.id),Z}}function G0(c,i,l){c===1?i.id=l.readVarint():c===2?(function(p,v){const S=p.readVarint()+p.pos;for(;p.pos<S;){const T=v._keys[p.readVarint()],M=v._values[p.readVarint()];v.properties[T]=M}})(l,i):c===3?i.type=l.readVarint():c===4&&(i._geometry=l.pos)}function bv(c){const i=c.length;if(i<=1)return[c];const l=[];let p,v;for(let S=0;S<i;S++){const T=wv(c[S]);T!==0&&(v===void 0&&(v=T<0),v===T<0?(p&&l.push(p),p=[c[S]]):p&&p.push(c[S]))}return p&&l.push(p),l}function wv(c){let i=0;for(let l,p,v=0,S=c.length,T=S-1;v<S;T=v++)l=c[v],p=c[T],i+=(p.x-l.x)*(l.y+p.y);return i}Ac.types=["Unknown","Point","LineString","Polygon"];class vg{constructor(i,l){this.version=1,this.name="",this.extent=4096,this.length=0,this._pbf=i,this._keys=[],this._values=[],this._features=[],i.readFields(r2,this,l),this.length=this._features.length}feature(i){if(i<0||i>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[i];const l=this._pbf.readVarint()+this._pbf.pos;return new Ac(this._pbf,l,this.extent,this._keys,this._values)}}function r2(c,i,l){c===15?i.version=l.readVarint():c===1?i.name=l.readString():c===5?i.extent=l.readVarint():c===2?i._features.push(l.pos):c===3?i._keys.push(l.readString()):c===4&&i._values.push((function(p){let v=null;const S=p.readVarint()+p.pos;for(;p.pos<S;){const T=p.readVarint()>>3;v=T===1?p.readString():T===2?p.readFloat():T===3?p.readDouble():T===4?p.readVarint64():T===5?p.readVarint():T===6?p.readSVarint():T===7?p.readBoolean():null}if(v==null)throw new Error("unknown feature value");return v})(l))}class W0{constructor(i,l){this.layers=i.readFields(H0,{},l)}}function H0(c,i,l){if(c===3){const p=new vg(l,l.readVarint()+l.pos);p.length&&(i[p.name]=p)}}const xg=Math.pow(2,13);function Cc(c,i,l,p,v,S,T,M){c.emplaceBack(i,l,2*Math.floor(p*xg)+T,v*xg*2,S*xg*2,Math.round(M))}class Sv{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.layoutVertexArray=new ze,this.centroidVertexArray=new Me,this.indexArray=new xt,this.programConfigurations=new du(i.layers,i.zoom),this.segments=new Yt,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,p){this.features=[],this.hasDependencies=tm("fill-extrusion",this.layers,l);for(const{feature:v,id:S,index:T,sourceLayerIndex:M}of i){const D=this.layers[0]._featureFilter.needGeometry,V=wc(v,D);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),V,p))continue;const G={id:S,sourceLayerIndex:M,index:T,geometry:D?V.geometry:Ol(v),properties:v.properties,type:v.type,patterns:{}};this.hasDependencies?this.features.push(fg("fill-extrusion",this.layers,G,{zoom:this.zoom},l)):this.addFeature(G,G.geometry,T,p,{},l.subdivisionGranularity),l.featureIndex.insert(v,G.geometry,T,M,this.index,!0)}}addFeatures(i,l,p){for(const v of this.features){const{geometry:S}=v;this.addFeature(v,S,v.index,l,p,i.subdivisionGranularity)}}update(i,l,p){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p})}isEmpty(){return this.layoutVertexArray.length===0&&this.centroidVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,_v),this.centroidVertexBuffer=i.createVertexBuffer(this.centroidVertexArray,Xh.members,!0),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.centroidVertexBuffer.destroy())}addFeature(i,l,p,v,S,T){for(const M of nc(l,500)){const D={x:0,y:0,sampleCount:0},V=this.layoutVertexArray.length;this.processPolygon(D,v,i,M,T);const G=this.layoutVertexArray.length-V,Z=Math.floor(D.x/D.sampleCount),ie=Math.floor(D.y/D.sampleCount);for(let se=0;se<G;se++)this.centroidVertexArray.emplaceBack(Z,ie)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:S,canonical:v})}processPolygon(i,l,p,v,S){if(v.length<1||Ri(v[0]))return;for(const Z of v)Z.length!==0&&np(i,Z);const T={segment:this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray)},M=S.fill.getGranularityForZoomLevel(l.z),D=Ac.types[p.type]==="Polygon";for(const Z of v){if(Z.length===0||Ri(Z))continue;const ie=bs(Z,M,D);this._generateSideFaces(ie,T)}if(!D)return;const V=Ro(v,l,M,!1),G=this.layoutVertexArray;Qo(((Z,ie)=>{Cc(G,Z,ie,0,0,1,1,0)}),this.segments,this.layoutVertexArray,this.indexArray,V.verticesFlattened,V.indicesTriangles)}_generateSideFaces(i,l){let p=0;for(let v=1;v<i.length;v++){const S=i[v],T=i[v-1];if(Z0(S,T))continue;l.segment.vertexLength+4>Yt.MAX_VERTEX_ARRAY_LENGTH&&(l.segment=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));const M=S.sub(T)._perp()._unit(),D=T.dist(S);p+D>32768&&(p=0),Cc(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,0,p),Cc(this.layoutVertexArray,S.x,S.y,M.x,M.y,0,1,p),p+=D,Cc(this.layoutVertexArray,T.x,T.y,M.x,M.y,0,0,p),Cc(this.layoutVertexArray,T.x,T.y,M.x,M.y,0,1,p);const V=l.segment.vertexLength;this.indexArray.emplaceBack(V,V+2,V+1),this.indexArray.emplaceBack(V+1,V+2,V+3),l.segment.vertexLength+=4,l.segment.primitiveLength+=2}}}function np(c,i){for(let l=0;l<i.length;l++){const p=i[l];l===i.length-1&&i[0].x===p.x&&i[0].y===p.y||(c.x+=p.x,c.y+=p.y,c.sampleCount++)}}function Z0(c,i){return c.x===i.x&&(c.x<0||c.x>We)||c.y===i.y&&(c.y<0||c.y>We)}function Ri(c){return c.every((i=>i.x<0))||c.every((i=>i.x>We))||c.every((i=>i.y<0))||c.every((i=>i.y>We))}let K0;tn("FillExtrusionBucket",Sv,{omit:["layers","features"]});var X0={get paint(){return K0=K0||new Ei({"fill-extrusion-opacity":new an(Ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new vn(Ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new an(Ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new an(Ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Hu(Ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new vn(Ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new vn(Ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new an(Ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})}};class i2 extends ko{constructor(i,l){super(i,X0,l)}createBucket(i){return new Sv(i)}queryRadius(){return Xp(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:v,transform:S,pixelsToTileUnits:T,pixelPosMatrix:M}){const D=Xf(i,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),-S.bearingInRadians,T),V=this.paint.get("fill-extrusion-height").evaluate(l,p),G=this.paint.get("fill-extrusion-base").evaluate(l,p),Z=(function(se,pe){const me=[];for(const xe of se){const Pe=[xe.x,xe.y,0,1];De(Pe,Pe,pe),me.push(new _(Pe[0]/Pe[3],Pe[1]/Pe[3]))}return me})(D,M),ie=(function(se,pe,me,xe){const Pe=[],Le=[],Se=xe[8]*pe,ke=xe[9]*pe,qe=xe[10]*pe,tt=xe[11]*pe,gt=xe[8]*me,jt=xe[9]*me,kt=xe[10]*me,Ft=xe[11]*me;for(const Kt of se){const $t=[],It=[];for(const At of Kt){const ln=At.x,fn=At.y,An=xe[0]*ln+xe[4]*fn+xe[12],mn=xe[1]*ln+xe[5]*fn+xe[13],ar=xe[2]*ln+xe[6]*fn+xe[14],Ai=xe[3]*ln+xe[7]*fn+xe[15],ya=ar+qe,Fo=Ai+tt,pu=An+gt,Ts=mn+jt,ho=ar+kt,Bo=Ai+Ft,Zi=new _((An+Se)/Fo,(mn+ke)/Fo);Zi.z=ya/Fo,$t.push(Zi);const fo=new _(pu/Bo,Ts/Bo);fo.z=ho/Bo,It.push(fo)}Pe.push($t),Le.push(It)}return[Pe,Le]})(v,G,V,M);return(function(se,pe,me){let xe=1/0;uv(me,pe)&&(xe=Tv(me,pe[0]));for(let Pe=0;Pe<pe.length;Pe++){const Le=pe[Pe],Se=se[Pe];for(let ke=0;ke<Le.length-1;ke++){const qe=Le[ke],tt=[qe,Le[ke+1],Se[ke+1],Se[ke],qe];qd(me,tt)&&(xe=Math.min(xe,Tv(me,tt)))}}return xe!==1/0&&xe})(ie[0],ie[1],Z)}}function im(c,i){return c.x*i.x+c.y*i.y}function Tv(c,i){if(c.length===1){let l=0;const p=i[l++];let v;for(;!v||p.equals(v);)if(v=i[l++],!v)return 1/0;for(;l<i.length;l++){const S=i[l],T=c[0],M=v.sub(p),D=S.sub(p),V=T.sub(p),G=im(M,M),Z=im(M,D),ie=im(D,D),se=im(V,M),pe=im(V,D),me=G*ie-Z*Z,xe=(ie*se-Z*pe)/me,Pe=(G*pe-Z*se)/me,Le=p.z*(1-xe-Pe)+v.z*xe+S.z*Pe;if(isFinite(Le))return Le}return 1/0}{let l=1/0;for(const p of i)l=Math.min(l,p.z);return l}}const Y0=Pi([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4),{members:a2}=Y0,zl=Pi([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]),{members:Pv}=zl,o2=Math.cos(Math.PI/180*37.5),id=Math.pow(2,14)/.5;class rp{constructor(i){this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((l=>l.id)),this.index=i.index,this.hasDependencies=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((l=>{this.gradients[l.id]={}})),this.layoutVertexArray=new He,this.layoutVertexArray2=new Fe,this.indexArray=new xt,this.programConfigurations=new du(i.layers,i.zoom),this.segments=new Yt,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((l=>l.isStateDependent())).map((l=>l.id))}populate(i,l,p){this.hasDependencies=tm("line",this.layers,l)||this.hasLineDasharray(this.layers);const v=this.layers[0].layout.get("line-sort-key"),S=!v.isConstant(),T=[];for(const{feature:M,id:D,index:V,sourceLayerIndex:G}of i){const Z=this.layers[0]._featureFilter.needGeometry,ie=wc(M,Z);if(!this.layers[0]._featureFilter.filter(new Lr(this.zoom),ie,p))continue;const se=S?v.evaluate(ie,{},p):void 0,pe={id:D,properties:M.properties,type:M.type,sourceLayerIndex:G,index:V,geometry:Z?ie.geometry:Ol(M),patterns:{},dashes:{},sortKey:se};T.push(pe)}S&&T.sort(((M,D)=>M.sortKey-D.sortKey));for(const M of T){const{geometry:D,index:V,sourceLayerIndex:G}=M;this.hasDependencies?(tm("line",this.layers,l)?fg("line",this.layers,M,{zoom:this.zoom},l):this.hasLineDasharray(this.layers)&&this.addLineDashDependencies(this.layers,M,this.zoom,l),this.patternFeatures.push(M)):this.addFeature(M,D,V,p,{},{},l.subdivisionGranularity),l.featureIndex.insert(i[V].feature,D,V,G,this.index)}}update(i,l,p,v){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(i,l,this.stateDependentLayers,{imagePositions:p,dashPositions:v})}addFeatures(i,l,p,v){for(const S of this.patternFeatures)this.addFeature(S,S.geometry,S.index,l,p,v,i.subdivisionGranularity)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(i){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=i.createVertexBuffer(this.layoutVertexArray2,Pv)),this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,a2),this.indexBuffer=i.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(i),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(i){if(i.properties&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_start")&&Object.prototype.hasOwnProperty.call(i.properties,"mapbox_clip_end"))return{start:+i.properties.mapbox_clip_start,end:+i.properties.mapbox_clip_end}}addFeature(i,l,p,v,S,T,M){const D=this.layers[0].layout,V=D.get("line-join").evaluate(i,{}),G=D.get("line-cap"),Z=D.get("line-miter-limit"),ie=D.get("line-round-limit");this.lineClips=this.lineFeatureClips(i);for(const se of l)this.addLine(se,i,V,G,Z,ie,v,M);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,i,p,{imagePositions:S,dashPositions:T,canonical:v})}addLine(i,l,p,v,S,T,M,D){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,i=bs(i,M?D.line.getGranularityForZoomLevel(M.z):1),this.lineClips){this.lineClipsArray.push(this.lineClips);for(let Se=0;Se<i.length-1;Se++)this.totalDistance+=i[Se].dist(i[Se+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const V=Ac.types[l.type]==="Polygon";let G=i.length;for(;G>=2&&i[G-1].equals(i[G-2]);)G--;let Z=0;for(;Z<G-1&&i[Z].equals(i[Z+1]);)Z++;if(G<(V?3:2))return;p==="bevel"&&(S=1.05);const ie=this.overscaling<=16?122880/(512*this.overscaling):0,se=this.segments.prepareSegment(10*G,this.layoutVertexArray,this.indexArray);let pe,me,xe,Pe,Le;this.e1=this.e2=-1,V&&(pe=i[G-2],Le=i[Z].sub(pe)._unit()._perp());for(let Se=Z;Se<G;Se++){if(xe=Se===G-1?V?i[Z+1]:void 0:i[Se+1],xe&&i[Se].equals(xe))continue;Le&&(Pe=Le),pe&&(me=pe),pe=i[Se],Le=xe?xe.sub(pe)._unit()._perp():Pe,Pe=Pe||Le;let ke=Pe.add(Le);ke.x===0&&ke.y===0||ke._unit();const qe=Pe.x*Le.x+Pe.y*Le.y,tt=ke.x*Le.x+ke.y*Le.y,gt=tt!==0?1/tt:1/0,jt=2*Math.sqrt(2-2*tt),kt=tt<o2&&me&&xe,Ft=Pe.x*Le.y-Pe.y*Le.x>0;if(kt&&Se>Z){const It=pe.dist(me);if(It>2*ie){const At=pe.sub(pe.sub(me)._mult(ie/It)._round());this.updateDistance(me,At),this.addCurrentVertex(At,Pe,0,0,se),me=At}}const Kt=me&&xe;let $t=Kt?p:V?"butt":v;if(Kt&&$t==="round"&&(gt<T?$t="miter":gt<=2&&($t="fakeround")),$t==="miter"&&gt>S&&($t="bevel"),$t==="bevel"&&(gt>2&&($t="flipbevel"),gt<S&&($t="miter")),me&&this.updateDistance(me,pe),$t==="miter")ke._mult(gt),this.addCurrentVertex(pe,ke,0,0,se);else if($t==="flipbevel"){if(gt>100)ke=Le.mult(-1);else{const It=gt*Pe.add(Le).mag()/Pe.sub(Le).mag();ke._perp()._mult(It*(Ft?-1:1))}this.addCurrentVertex(pe,ke,0,0,se),this.addCurrentVertex(pe,ke.mult(-1),0,0,se)}else if($t==="bevel"||$t==="fakeround"){const It=-Math.sqrt(gt*gt-1),At=Ft?It:0,ln=Ft?0:It;if(me&&this.addCurrentVertex(pe,Pe,At,ln,se),$t==="fakeround"){const fn=Math.round(180*jt/Math.PI/20);for(let An=1;An<fn;An++){let mn=An/fn;if(mn!==.5){const Ai=mn-.5;mn+=mn*Ai*(mn-1)*((1.0904+qe*(qe*(3.55645-1.43519*qe)-3.2452))*Ai*Ai+(.848013+qe*(.215638*qe-1.06021)))}const ar=Le.sub(Pe)._mult(mn)._add(Pe)._unit()._mult(Ft?-1:1);this.addHalfVertex(pe,ar.x,ar.y,!1,Ft,0,se)}}xe&&this.addCurrentVertex(pe,Le,-At,-ln,se)}else if($t==="butt")this.addCurrentVertex(pe,ke,0,0,se);else if($t==="square"){const It=me?1:-1;this.addCurrentVertex(pe,ke,It,It,se)}else $t==="round"&&(me&&(this.addCurrentVertex(pe,Pe,0,0,se),this.addCurrentVertex(pe,Pe,1,1,se,!0)),xe&&(this.addCurrentVertex(pe,Le,-1,-1,se,!0),this.addCurrentVertex(pe,Le,0,0,se)));if(kt&&Se<G-1){const It=pe.dist(xe);if(It>2*ie){const At=pe.add(xe.sub(pe)._mult(ie/It)._round());this.updateDistance(pe,At),this.addCurrentVertex(At,Le,0,0,se),pe=At}}}}addCurrentVertex(i,l,p,v,S,T=!1){const M=l.y*v-l.x,D=-l.y-l.x*v;this.addHalfVertex(i,l.x+l.y*p,l.y-l.x*p,T,!1,p,S),this.addHalfVertex(i,M,D,T,!0,-v,S),this.distance>id/2&&this.totalDistance===0&&(this.distance=0,this.updateScaledDistance(),this.addCurrentVertex(i,l,p,v,S,T))}addHalfVertex({x:i,y:l},p,v,S,T,M,D){const V=.5*(this.lineClips?this.scaledDistance*(id-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((i<<1)+(S?1:0),(l<<1)+(T?1:0),Math.round(63*p)+128,Math.round(63*v)+128,1+(M===0?0:M<0?-1:1)|(63&V)<<2,V>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);const G=D.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,G,this.e2),D.primitiveLength++),T?this.e2=G:this.e1=G}updateScaledDistance(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance}updateDistance(i,l){this.distance+=i.dist(l),this.updateScaledDistance()}hasLineDasharray(i){for(const l of i){const p=l.paint.get("line-dasharray");if(p&&!p.isConstant())return!0}return!1}addLineDashDependencies(i,l,p,v){for(const S of i){const T=S.paint.get("line-dasharray");if(!T||T.value.kind==="constant")continue;const M=S.layout.get("line-cap")==="round",D={dasharray:T.value.evaluate({zoom:p-1},l,{}),round:M},V={dasharray:T.value.evaluate({zoom:p},l,{}),round:M},G={dasharray:T.value.evaluate({zoom:p+1},l,{}),round:M},Z=`${D.dasharray.join(",")},${D.round}`,ie=`${V.dasharray.join(",")},${V.round}`,se=`${G.dasharray.join(",")},${G.round}`;v.dashDependencies[Z]=D,v.dashDependencies[ie]=V,v.dashDependencies[se]=G,l.dashes[S.id]={min:Z,mid:ie,max:se}}}}let eh,am;tn("LineBucket",rp,{omit:["layers","patternFeatures"]});var _g={get paint(){return am=am||new Ei({"line-opacity":new vn(Ke.paint_line["line-opacity"]),"line-color":new vn(Ke.paint_line["line-color"]),"line-translate":new an(Ke.paint_line["line-translate"]),"line-translate-anchor":new an(Ke.paint_line["line-translate-anchor"]),"line-width":new vn(Ke.paint_line["line-width"]),"line-gap-width":new vn(Ke.paint_line["line-gap-width"]),"line-offset":new vn(Ke.paint_line["line-offset"]),"line-blur":new vn(Ke.paint_line["line-blur"]),"line-dasharray":new Hu(Ke.paint_line["line-dasharray"]),"line-pattern":new Hu(Ke.paint_line["line-pattern"]),"line-gradient":new vs(Ke.paint_line["line-gradient"])})},get layout(){return eh=eh||new Ei({"line-cap":new an(Ke.layout_line["line-cap"]),"line-join":new vn(Ke.layout_line["line-join"]),"line-miter-limit":new an(Ke.layout_line["line-miter-limit"]),"line-round-limit":new an(Ke.layout_line["line-round-limit"]),"line-sort-key":new vn(Ke.layout_line["line-sort-key"])})}};class Av extends vn{possiblyEvaluate(i,l){return l=new Lr(Math.floor(l.zoom),{now:l.now,fadeDuration:l.fadeDuration,zoomHistory:l.zoomHistory,transition:l.transition}),super.possiblyEvaluate(i,l)}evaluate(i,l,p,v){return l=Ot({},l,{zoom:Math.floor(l.zoom)}),super.evaluate(i,l,p,v)}}let bg;class Cv extends ko{constructor(i,l){super(i,_g,l),this.gradientVersion=0,bg||(bg=new Av(_g.paint.properties["line-width"].specification),bg.useIntegerZoom=!0)}_handleSpecialPaintPropertyUpdate(i){if(i==="line-gradient"){const l=this.gradientExpression();this.stepInterpolant=!!(function(p){return p._styleExpression!==void 0})(l)&&l._styleExpression.expression instanceof cs,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}recalculate(i,l){super.recalculate(i,l),this.paint._values["line-floorwidth"]=bg.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,i)}createBucket(i){return new rp(i)}queryRadius(i){const l=i,p=J0(Kf("line-width",this,l),Kf("line-gap-width",this,l)),v=Kf("line-offset",this,l);return p/2+Math.abs(v)+Xp(this.paint.get("line-translate"))}queryIntersectsFeature({queryGeometry:i,feature:l,featureState:p,geometry:v,transform:S,pixelsToTileUnits:T}){const M=Xf(i,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),-S.bearingInRadians,T),D=T/2*J0(this.paint.get("line-width").evaluate(l,p),this.paint.get("line-gap-width").evaluate(l,p)),V=this.paint.get("line-offset").evaluate(l,p);return V&&(v=(function(G,Z){const ie=[];for(let se=0;se<G.length;se++){const pe=O0(G[se]),me=[];for(let xe=0;xe<pe.length;xe++){const Pe=pe[xe],Le=pe[xe-1],Se=pe[xe+1],ke=xe===0?new _(0,0):Pe.sub(Le)._unit()._perp(),qe=xe===pe.length-1?new _(0,0):Se.sub(Pe)._unit()._perp(),tt=ke._add(qe)._unit(),gt=tt.x*qe.x+tt.y*qe.y;gt!==0&&tt._mult(1/gt),me.push(tt._mult(Z)._add(Pe))}ie.push(me)}return ie})(v,V*T)),(function(G,Z,ie){for(let se=0;se<Z.length;se++){const pe=Z[se];if(G.length>=3){for(let me=0;me<pe.length;me++)if(Qu(G,pe[me]))return!0}if(dv(G,pe,ie))return!0}return!1})(M,v,D)}isTileClipped(){return!0}}function J0(c,i){return i>0?i+2*c:c}const Q0=Pi([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),e_=Pi([{name:"a_projected_pos",components:3,type:"Float32"}],4);Pi([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const wg=Pi([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_box_real",components:2,type:"Int16"}]);Pi([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const om=Pi([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),t_=Pi([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function Ev(c,i,l){return c.sections.forEach((p=>{p.text=(function(v,S,T){const M=S.layout.get("text-transform").evaluate(T,{});return M==="uppercase"?v=v.toLocaleUpperCase():M==="lowercase"&&(v=v.toLocaleLowerCase()),mc.applyArabicShaping&&(v=mc.applyArabicShaping(v)),v})(p.text,i,l)})),c}Pi([{name:"triangle",components:3,type:"Uint16"}]),Pi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),Pi([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Uint16",name:"textAnchorOffsetStartIndex"},{type:"Uint16",name:"textAnchorOffsetEndIndex"}]),Pi([{type:"Float32",name:"offsetX"}]),Pi([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]),Pi([{type:"Uint16",name:"textAnchor"},{type:"Float32",components:2,name:"textOffset"}]);var ga=24;const ip={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},jv={10:!0,32:!0,38:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0},Sg={40:!0};function Tg(c,i,l,p,v,S){if("fontStack"in i){const T=l[i.fontStack],M=T&&T[c];return M?M.metrics.advance*i.scale+v:0}{const T=p[i.imageName];return T?T.displaySize[0]*i.scale*ga/S+v:0}}function sm(c,i,l,p){const v=Math.pow(c-i,2);return p?c<i?v/2:2*v:v+Math.abs(l)*l}function n_(c,i,l){let p=0;return c===10&&(p-=1e4),l&&(p+=150),c!==40&&c!==65288||(p+=50),i!==41&&i!==65289||(p+=50),p}function r_(c,i,l,p,v,S){let T=null,M=sm(i,l,v,S);for(const D of p){const V=sm(i-D.x,l,v,S)+D.badness;V<=M&&(T=D,M=V)}return{index:c,x:i,priorBreak:T,badness:M}}function lm(c){return c?lm(c.priorBreak).concat(c.index):[]}class ap{constructor(i="",l=[],p=[]){this.text=i,this.sections=l,this.sectionIndex=p,this.imageSectionID=null}static fromFeature(i,l){const p=new ap;for(let v=0;v<i.sections.length;v++){const S=i.sections[v];S.image?p.addImageSection(S):p.addTextSection(S,l)}return p}length(){return[...this.text].length}getSection(i){return this.sections[this.sectionIndex[i]]}getSectionIndex(i){return this.sectionIndex[i]}verticalizePunctuation(){this.text=(function(i){let l="",p={premature:!0,value:void 0};const v=i[Symbol.iterator]();let S=v.next();const T=i[Symbol.iterator]();T.next();let M=T.next();for(;!S.done;)l+=!M.done&&ou(M.value.codePointAt(0))&&!ip[M.value]||!p.premature&&ou(p.value.codePointAt(0))&&!ip[p.value]||!ip[S.value]?S.value:ip[S.value],p={value:S.value,premature:!1},S=v.next(),M=T.next();return l})(this.text)}hasZeroWidthSpaces(){return this.text.includes("")}trim(){const i=this.text.match(/^\s*/),l=i?i[0].length:0,p=this.text.match(/\S\s*$/),v=p?p[0].length-1:0;this.text=this.text.substring(l,this.text.length-v),this.sectionIndex=this.sectionIndex.slice(l,this.sectionIndex.length-v)}substring(i,l){const p=[...this.text].slice(i,l).join(""),v=this.sectionIndex.slice(i,l);return new ap(p,this.sections,v)}toCodeUnitIndex(i){return[...this.text].slice(0,i).join("").length}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce(((i,l)=>Math.max(i,this.sections[l].scale)),0)}getMaxImageSize(i){let l=0,p=0;for(let v=0;v<this.length();v++){const S=this.getSection(v);if("imageName"in S){const T=i[S.imageName];if(!T)continue;const M=T.displaySize;l=Math.max(l,M[0]),p=Math.max(p,M[1])}}return{maxImageWidth:l,maxImageHeight:p}}addTextSection(i,l){this.text+=i.text,this.sections.push({scale:i.scale||1,verticalAlign:i.verticalAlign||"bottom",fontStack:i.fontStack||l});const p=this.sections.length-1;this.sectionIndex.push(...[...i.text].map((()=>p)))}addImageSection(i){const l=i.image?i.image.name:"";if(l.length===0)return void cn("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCharCode(p),this.sections.push({scale:1,verticalAlign:i.verticalAlign||"bottom",imageName:l}),this.sectionIndex.push(this.sections.length-1)):cn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}determineLineBreaks(i,l,p,v,S){const T=[],M=this.determineAverageLineWidth(i,l,p,v,S),D=this.hasZeroWidthSpaces();let V=0,G=0;const Z=this.text[Symbol.iterator]();let ie=Z.next();const se=this.text[Symbol.iterator]();se.next();let pe=se.next();const me=this.text[Symbol.iterator]();me.next(),me.next();let xe=me.next();for(;!ie.done;){const Pe=this.getSection(G),Le=ie.value.codePointAt(0);if(Gp(Le)||(V+=Tg(Le,Pe,p,v,i,S)),!pe.done){const Se=oo(Le),ke=pe.value.codePointAt(0);(jv[Le]||Se||"imageName"in Pe||!xe.done&&Sg[ke])&&T.push(r_(G+1,V,M,T,n_(Le,ke,Se&&D),!1))}G++,ie=Z.next(),pe=se.next(),xe=me.next()}return lm(r_(this.length(),V,M,T,0,!0))}determineAverageLineWidth(i,l,p,v,S){let T=0,M=0;for(const D of this.text){const V=this.getSection(M);T+=Tg(D.codePointAt(0),V,p,v,i,S),M++}return T/Math.max(1,Math.ceil(T/l))}}const Yh=4294967296,i_=1/Yh,cm=typeof TextDecoder>"u"?null:new TextDecoder("utf-8");class m{constructor(i=new Uint8Array(16)){this.buf=ArrayBuffer.isView(i)?i:new Uint8Array(i),this.dataView=new DataView(this.buf.buffer),this.pos=0,this.type=0,this.length=this.buf.length}readFields(i,l,p=this.length){for(;this.pos<p;){const v=this.readVarint(),S=v>>3,T=this.pos;this.type=7&v,i(S,l,this),this.pos===T&&this.skip(v)}return l}readMessage(i,l){return this.readFields(i,l,this.readVarint()+this.pos)}readFixed32(){const i=this.dataView.getUint32(this.pos,!0);return this.pos+=4,i}readSFixed32(){const i=this.dataView.getInt32(this.pos,!0);return this.pos+=4,i}readFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getUint32(this.pos+4,!0)*Yh;return this.pos+=8,i}readSFixed64(){const i=this.dataView.getUint32(this.pos,!0)+this.dataView.getInt32(this.pos+4,!0)*Yh;return this.pos+=8,i}readFloat(){const i=this.dataView.getFloat32(this.pos,!0);return this.pos+=4,i}readDouble(){const i=this.dataView.getFloat64(this.pos,!0);return this.pos+=8,i}readVarint(i){const l=this.buf;let p,v;return v=l[this.pos++],p=127&v,v<128?p:(v=l[this.pos++],p|=(127&v)<<7,v<128?p:(v=l[this.pos++],p|=(127&v)<<14,v<128?p:(v=l[this.pos++],p|=(127&v)<<21,v<128?p:(v=l[this.pos],p|=(15&v)<<28,(function(S,T,M){const D=M.buf;let V,G;if(G=D[M.pos++],V=(112&G)>>4,G<128||(G=D[M.pos++],V|=(127&G)<<3,G<128)||(G=D[M.pos++],V|=(127&G)<<10,G<128)||(G=D[M.pos++],V|=(127&G)<<17,G<128)||(G=D[M.pos++],V|=(127&G)<<24,G<128)||(G=D[M.pos++],V|=(1&G)<<31,G<128))return x(S,V,T);throw new Error("Expected varint not more than 10 bytes")})(p,i,this)))))}readVarint64(){return this.readVarint(!0)}readSVarint(){const i=this.readVarint();return i%2==1?(i+1)/-2:i/2}readBoolean(){return!!this.readVarint()}readString(){const i=this.readVarint()+this.pos,l=this.pos;return this.pos=i,i-l>=12&&cm?cm.decode(this.buf.subarray(l,i)):(function(p,v,S){let T="",M=v;for(;M<S;){const D=p[M];let V,G,Z,ie=null,se=D>239?4:D>223?3:D>191?2:1;if(M+se>S)break;se===1?D<128&&(ie=D):se===2?(V=p[M+1],(192&V)==128&&(ie=(31&D)<<6|63&V,ie<=127&&(ie=null))):se===3?(V=p[M+1],G=p[M+2],(192&V)==128&&(192&G)==128&&(ie=(15&D)<<12|(63&V)<<6|63&G,(ie<=2047||ie>=55296&&ie<=57343)&&(ie=null))):se===4&&(V=p[M+1],G=p[M+2],Z=p[M+3],(192&V)==128&&(192&G)==128&&(192&Z)==128&&(ie=(15&D)<<18|(63&V)<<12|(63&G)<<6|63&Z,(ie<=65535||ie>=1114112)&&(ie=null))),ie===null?(ie=65533,se=1):ie>65535&&(ie-=65536,T+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),T+=String.fromCharCode(ie),M+=se}return T})(this.buf,l,i)}readBytes(){const i=this.readVarint()+this.pos,l=this.buf.subarray(this.pos,i);return this.pos=i,l}readPackedVarint(i=[],l){const p=this.readPackedEnd();for(;this.pos<p;)i.push(this.readVarint(l));return i}readPackedSVarint(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSVarint());return i}readPackedBoolean(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readBoolean());return i}readPackedFloat(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFloat());return i}readPackedDouble(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readDouble());return i}readPackedFixed32(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFixed32());return i}readPackedSFixed32(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSFixed32());return i}readPackedFixed64(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readFixed64());return i}readPackedSFixed64(i=[]){const l=this.readPackedEnd();for(;this.pos<l;)i.push(this.readSFixed64());return i}readPackedEnd(){return this.type===2?this.readVarint()+this.pos:this.pos+1}skip(i){const l=7&i;if(l===0)for(;this.buf[this.pos++]>127;);else if(l===2)this.pos=this.readVarint()+this.pos;else if(l===5)this.pos+=4;else{if(l!==1)throw new Error(`Unimplemented type: ${l}`);this.pos+=8}}writeTag(i,l){this.writeVarint(i<<3|l)}realloc(i){let l=this.length||16;for(;l<this.pos+i;)l*=2;if(l!==this.length){const p=new Uint8Array(l);p.set(this.buf),this.buf=p,this.dataView=new DataView(p.buffer),this.length=l}}finish(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)}writeFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeSFixed32(i){this.realloc(4),this.dataView.setInt32(this.pos,i,!0),this.pos+=4}writeFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*i_),!0),this.pos+=8}writeSFixed64(i){this.realloc(8),this.dataView.setInt32(this.pos,-1&i,!0),this.dataView.setInt32(this.pos+4,Math.floor(i*i_),!0),this.pos+=8}writeVarint(i){(i=+i||0)>268435455||i<0?(function(l,p){let v,S;if(l>=0?(v=l%4294967296|0,S=l/4294967296|0):(v=~(-l%4294967296),S=~(-l/4294967296),4294967295^v?v=v+1|0:(v=0,S=S+1|0)),l>=18446744073709552e3||l<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");p.realloc(10),(function(T,M,D){D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,T>>>=7,D.buf[D.pos++]=127&T|128,D.buf[D.pos]=127&(T>>>=7)})(v,0,p),(function(T,M){const D=(7&T)<<4;M.buf[M.pos++]|=D|((T>>>=3)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T|((T>>>=7)?128:0),T&&(M.buf[M.pos++]=127&T)))))})(S,p)})(i,this):(this.realloc(4),this.buf[this.pos++]=127&i|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=127&(i>>>=7)|(i>127?128:0),i<=127||(this.buf[this.pos++]=i>>>7&127))))}writeSVarint(i){this.writeVarint(i<0?2*-i-1:2*i)}writeBoolean(i){this.writeVarint(+i)}writeString(i){i=String(i),this.realloc(4*i.length),this.pos++;const l=this.pos;this.pos=(function(v,S,T){for(let M,D,V=0;V<S.length;V++){if(M=S.charCodeAt(V),M>55295&&M<57344){if(!D){M>56319||V+1===S.length?(v[T++]=239,v[T++]=191,v[T++]=189):D=M;continue}if(M<56320){v[T++]=239,v[T++]=191,v[T++]=189,D=M;continue}M=D-55296<<10|M-56320|65536,D=null}else D&&(v[T++]=239,v[T++]=191,v[T++]=189,D=null);M<128?v[T++]=M:(M<2048?v[T++]=M>>6|192:(M<65536?v[T++]=M>>12|224:(v[T++]=M>>18|240,v[T++]=M>>12&63|128),v[T++]=M>>6&63|128),v[T++]=63&M|128)}return T})(this.buf,i,this.pos);const p=this.pos-l;p>=128&&k(l,p,this),this.pos=l-1,this.writeVarint(p),this.pos+=p}writeFloat(i){this.realloc(4),this.dataView.setFloat32(this.pos,i,!0),this.pos+=4}writeDouble(i){this.realloc(8),this.dataView.setFloat64(this.pos,i,!0),this.pos+=8}writeBytes(i){const l=i.length;this.writeVarint(l),this.realloc(l);for(let p=0;p<l;p++)this.buf[this.pos++]=i[p]}writeRawMessage(i,l){this.pos++;const p=this.pos;i(l,this);const v=this.pos-p;v>=128&&k(p,v,this),this.pos=p-1,this.writeVarint(v),this.pos+=v}writeMessage(i,l,p){this.writeTag(i,2),this.writeRawMessage(l,p)}writePackedVarint(i,l){l.length&&this.writeMessage(i,B,l)}writePackedSVarint(i,l){l.length&&this.writeMessage(i,Q,l)}writePackedBoolean(i,l){l.length&&this.writeMessage(i,Ze,l)}writePackedFloat(i,l){l.length&&this.writeMessage(i,oe,l)}writePackedDouble(i,l){l.length&&this.writeMessage(i,we,l)}writePackedFixed32(i,l){l.length&&this.writeMessage(i,ot,l)}writePackedSFixed32(i,l){l.length&&this.writeMessage(i,Et,l)}writePackedFixed64(i,l){l.length&&this.writeMessage(i,Zt,l)}writePackedSFixed64(i,l){l.length&&this.writeMessage(i,Xt,l)}writeBytesField(i,l){this.writeTag(i,2),this.writeBytes(l)}writeFixed32Field(i,l){this.writeTag(i,5),this.writeFixed32(l)}writeSFixed32Field(i,l){this.writeTag(i,5),this.writeSFixed32(l)}writeFixed64Field(i,l){this.writeTag(i,1),this.writeFixed64(l)}writeSFixed64Field(i,l){this.writeTag(i,1),this.writeSFixed64(l)}writeVarintField(i,l){this.writeTag(i,0),this.writeVarint(l)}writeSVarintField(i,l){this.writeTag(i,0),this.writeSVarint(l)}writeStringField(i,l){this.writeTag(i,2),this.writeString(l)}writeFloatField(i,l){this.writeTag(i,5),this.writeFloat(l)}writeDoubleField(i,l){this.writeTag(i,1),this.writeDouble(l)}writeBooleanField(i,l){this.writeVarintField(i,+l)}}function x(c,i,l){return l?4294967296*i+(c>>>0):4294967296*(i>>>0)+(c>>>0)}function k(c,i,l){const p=i<=16383?1:i<=2097151?2:i<=268435455?3:Math.floor(Math.log(i)/(7*Math.LN2));l.realloc(p);for(let v=l.pos-1;v>=c;v--)l.buf[v+p]=l.buf[v]}function B(c,i){for(let l=0;l<c.length;l++)i.writeVarint(c[l])}function Q(c,i){for(let l=0;l<c.length;l++)i.writeSVarint(c[l])}function oe(c,i){for(let l=0;l<c.length;l++)i.writeFloat(c[l])}function we(c,i){for(let l=0;l<c.length;l++)i.writeDouble(c[l])}function Ze(c,i){for(let l=0;l<c.length;l++)i.writeBoolean(c[l])}function ot(c,i){for(let l=0;l<c.length;l++)i.writeFixed32(c[l])}function Et(c,i){for(let l=0;l<c.length;l++)i.writeSFixed32(c[l])}function Zt(c,i){for(let l=0;l<c.length;l++)i.writeFixed64(c[l])}function Xt(c,i){for(let l=0;l<c.length;l++)i.writeSFixed64(c[l])}function Wt(c,i,l){c===1&&l.readMessage(yn,i)}function yn(c,i,l){if(c===3){const{id:p,bitmap:v,width:S,height:T,left:M,top:D,advance:V}=l.readMessage(wn,{});i.push({id:p,bitmap:new Qf({width:S+6,height:T+6},v),metrics:{width:S,height:T,left:M,top:D,advance:V}})}}function wn(c,i,l){c===1?i.id=l.readVarint():c===2?i.bitmap=l.readBytes():c===3?i.width=l.readVarint():c===4?i.height=l.readVarint():c===5?i.left=l.readSVarint():c===6?i.top=l.readSVarint():c===7&&(i.advance=l.readVarint())}function Pn(c){let i=0,l=0;for(const T of c)i+=T.w*T.h,l=Math.max(l,T.w);c.sort(((T,M)=>M.h-T.h));const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(i/.95)),l),h:1/0}];let v=0,S=0;for(const T of c)for(let M=p.length-1;M>=0;M--){const D=p[M];if(!(T.w>D.w||T.h>D.h)){if(T.x=D.x,T.y=D.y,S=Math.max(S,T.y+T.h),v=Math.max(v,T.x+T.w),T.w===D.w&&T.h===D.h){const V=p.pop();V&&M<p.length&&(p[M]=V)}else T.h===D.h?(D.x+=T.w,D.w-=T.w):T.w===D.w?(D.y+=T.h,D.h-=T.h):(p.push({x:D.x+T.w,y:D.y,w:D.w-T.w,h:T.h}),D.y+=T.h,D.h-=T.h);break}}return{w:v,h:S,fill:i/(v*S)||0}}class Li{constructor(i,{pixelRatio:l,version:p,stretchX:v,stretchY:S,content:T,textFitWidth:M,textFitHeight:D}){this.paddedRect=i,this.pixelRatio=l,this.stretchX=v,this.stretchY=S,this.content=T,this.version=p,this.textFitWidth=M,this.textFitHeight=D}get tl(){return[this.paddedRect.x+1,this.paddedRect.y+1]}get br(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]}get tlbr(){return this.tl.concat(this.br)}get displaySize(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]}}class _t{constructor(i,l){const p={},v={};this.haveRenderCallbacks=[];const S=[];this.addImages(i,p,S),this.addImages(l,v,S);const{w:T,h:M}=Pn(S),D=new Oo({width:T||1,height:M||1});for(const V in i){const G=i[V],Z=p[V].paddedRect;Oo.copy(G.data,D,{x:0,y:0},{x:Z.x+1,y:Z.y+1},G.data)}for(const V in l){const G=l[V],Z=v[V].paddedRect,ie=Z.x+1,se=Z.y+1,pe=G.data.width,me=G.data.height;Oo.copy(G.data,D,{x:0,y:0},{x:ie,y:se},G.data),Oo.copy(G.data,D,{x:0,y:me-1},{x:ie,y:se-1},{width:pe,height:1}),Oo.copy(G.data,D,{x:0,y:0},{x:ie,y:se+me},{width:pe,height:1}),Oo.copy(G.data,D,{x:pe-1,y:0},{x:ie-1,y:se},{width:1,height:me}),Oo.copy(G.data,D,{x:0,y:0},{x:ie+pe,y:se},{width:1,height:me})}this.image=D,this.iconPositions=p,this.patternPositions=v}addImages(i,l,p){for(const v in i){const S=i[v],T={x:0,y:0,w:S.data.width+2,h:S.data.height+2};p.push(T),l[v]=new Li(T,S),S.hasRenderCallback&&this.haveRenderCallbacks.push(v)}}patchUpdatedImages(i,l){i.dispatchRenderCallbacks(this.haveRenderCallbacks);for(const p in i.updatedImages)this.patchUpdatedImage(this.iconPositions[p],i.getImage(p),l),this.patchUpdatedImage(this.patternPositions[p],i.getImage(p),l)}patchUpdatedImage(i,l,p){if(!i||!l||i.version===l.version)return;i.version=l.version;const[v,S]=i.tl;p.update(l.data,void 0,{x:v,y:S})}}var lt;function wt(c,i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe){const me=ap.fromFeature(c,v);let xe;Z===d.az.vertical&&me.verticalizePunctuation();let Pe=me.determineLineBreaks(V,S,i,p,se);const{processBidirectionalText:Le,processStyledBidirectionalText:Se}=mc;if(Le&&me.sections.length===1){xe=[],Pe=Pe.map((gt=>me.toCodeUnitIndex(gt)));const tt=Le(me.toString(),Pe);for(const gt of tt){const jt=[...gt].map((()=>0));xe.push(new ap(gt,me.sections,jt))}}else if(Se){xe=[],Pe=Pe.map((kt=>me.toCodeUnitIndex(kt)));let tt=0;const gt=[];for(const kt of me.text)gt.push(...Array(kt.length).fill(me.sectionIndex[tt])),tt++;const jt=Se(me.text,gt,Pe);for(const kt of jt){const Ft=[];let Kt="";for(const $t of kt[0])Ft.push(kt[1][Kt.length]),Kt+=$t;xe.push(new ap(kt[0],me.sections,Ft))}}else xe=(function(tt,gt){const jt=[];let kt=0;for(const Ft of gt)jt.push(tt.substring(kt,Ft)),kt=Ft;return kt<tt.length()&&jt.push(tt.substring(kt,tt.length())),jt})(me,Pe);const ke=[],qe={positionedLines:ke,text:me.toString(),top:G[1],bottom:G[1],left:G[0],right:G[0],writingMode:Z,iconsInText:!1,verticalizable:!1};return(function(tt,gt,jt,kt,Ft,Kt,$t,It,At,ln,fn,An){let mn=0,ar=0,Ai=0,ya=0;const Fo=It==="right"?1:It==="left"?0:.5,pu=ga/An;let Ts=0;for(const Zi of Ft){Zi.trim();const fo=Zi.getMaxScale(),ts={positionedGlyphs:[],lineOffset:0};tt.positionedLines[Ts]=ts;const ns=ts.positionedGlyphs;let tl=0;if(!Zi.length()){ar+=Kt,++Ts;continue}const $o=kn(kt,Zi,pu);let nl=0;for(const Wa of Zi.text){const ji=Zi.getSection(nl),va=Wa.codePointAt(0),Fi=Vn(At,fn,va),Ha={glyph:va,imageName:null,x:mn,y:ar+-17,vertical:Fi,scale:1,fontStack:"",sectionIndex:Zi.getSectionIndex(nl),metrics:null,rect:null};let Qh;if("fontStack"in ji){if(Qh=Qn(ji,va,Fi,$o,gt,jt),!Qh)continue;Ha.fontStack=ji.fontStack}else{if(tt.iconsInText=!0,ji.scale*=pu,Qh=qa(ji,Fi,fo,$o,kt),!Qh)continue;tl=Math.max(tl,Qh.imageOffset),Ha.imageName=ji.imageName}const{rect:sd,metrics:Rv,baselineOffset:dp}=Qh;Ha.y+=dp,Ha.scale=ji.scale,Ha.metrics=Rv,Ha.rect=sd,ns.push(Ha),Fi?(tt.verticalizable=!0,mn+=("imageName"in ji?Rv.advance:ga)*ji.scale+ln):mn+=Rv.advance*ji.scale+ln,nl++}ns.length!==0&&(Ai=Math.max(mn-ln,Ai),zr(ns,0,ns.length-1,Fo)),mn=0,ts.lineOffset=Math.max(tl,(fo-1)*ga);const mu=Kt*fo+tl;ar+=mu,ya=Math.max(mu,ya),++Ts}const{horizontalAlign:ho,verticalAlign:Bo}=Jt($t);(function(Zi,fo,ts,ns,tl,$o,nl,mu,Wa){const ji=(fo-ts)*tl;let va=0;va=$o!==nl?-mu*ns- -17:-ns*Wa*nl+.5*nl;for(const Fi of Zi)for(const Ha of Fi.positionedGlyphs)Ha.x+=ji,Ha.y+=va})(tt.positionedLines,Fo,ho,Bo,Ai,ya,Kt,ar,Ft.length),tt.top+=-Bo*ar,tt.bottom=tt.top+ar,tt.left+=-ho*Ai,tt.right=tt.left+Ai})(qe,i,l,p,xe,T,M,D,Z,V,ie,pe),!(function(tt){for(const gt of tt)if(gt.positionedGlyphs.length!==0)return!1;return!0})(ke)&&qe}function Jt(c){let i=.5,l=.5;switch(c){case"right":case"top-right":case"bottom-right":i=1;break;case"left":case"top-left":case"bottom-left":i=0}switch(c){case"bottom":case"bottom-right":case"bottom-left":l=1;break;case"top":case"top-right":case"top-left":l=0}return{horizontalAlign:i,verticalAlign:l}}function kn(c,i,l){const p=i.getMaxScale()*ga,{maxImageWidth:v,maxImageHeight:S}=i.getMaxImageSize(c),T=Math.max(p,S*l);return{verticalLineContentWidth:Math.max(p,v*l),horizontalLineContentHeight:T}}function Ln(c){switch(c){case"top":return 0;case"center":return .5;default:return 1}}function Vn(c,i,l){return!(c===d.az.horizontal||!i&&!zf(l)||i&&(Gp(l)||(p=l,/\p{sc=Arab}/u.test(String.fromCodePoint(p)))));var p}function Qn(c,i,l,p,v,S){const T=S[c.fontStack],M=(function(V,G,Z,ie){if(V&&V.rect)return V;const se=G[Z.fontStack],pe=se&&se[ie];return pe?{rect:null,metrics:pe.metrics}:null})(T&&T[i],v,c,i);if(M===null)return null;let D;if(l)D=p.verticalLineContentWidth-c.scale*ga;else{const V=Ln(c.verticalAlign);D=(p.horizontalLineContentHeight-c.scale*ga)*V}return{rect:M.rect,metrics:M.metrics,baselineOffset:D}}function qa(c,i,l,p,v){const S=v[c.imageName];if(!S)return null;const T=S.paddedRect,M=S.displaySize,D={width:M[0],height:M[1],left:1,top:-3,advance:i?M[1]:M[0]};let V;if(i)V=p.verticalLineContentWidth-M[1]*c.scale;else{const G=Ln(c.verticalAlign);V=(p.horizontalLineContentHeight-M[1]*c.scale)*G}return{rect:T,metrics:D,baselineOffset:V,imageOffset:(i?M[0]:M[1])*c.scale-ga*l}}function zr(c,i,l,p){if(p===0)return;const v=c[l],S=(c[l].x+v.metrics.advance*v.scale)*p;for(let T=i;T<=l;T++)c[T].x-=S}function th(c,i,l){const{horizontalAlign:p,verticalAlign:v}=Jt(l),S=i[0]-c.displaySize[0]*p,T=i[1]-c.displaySize[1]*v;return{image:c,top:T,bottom:T+c.displaySize[1],left:S,right:S+c.displaySize[0]}}function a_(c){var i,l;let p=c.left,v=c.top,S=c.right-p,T=c.bottom-v;const M=(i=c.image.textFitWidth)!==null&&i!==void 0?i:"stretchOrShrink",D=(l=c.image.textFitHeight)!==null&&l!==void 0?l:"stretchOrShrink",V=(c.image.content[2]-c.image.content[0])/(c.image.content[3]-c.image.content[1]);if(D==="proportional"){if(M==="stretchOnly"&&S/T<V||M==="proportional"){const G=Math.ceil(T*V);p*=G/S,S=G}}else if(M==="proportional"&&D==="stretchOnly"&&V!==0&&S/T>V){const G=Math.ceil(S/V);v*=G/T,T=G}return{x1:p,y1:v,x2:p+S,y2:v+T}}function jI(c,i,l,p,v,S){const T=c.image;let M;if(T.content){const xe=T.content,Pe=T.pixelRatio||1;M=[xe[0]/Pe,xe[1]/Pe,T.displaySize[0]-xe[2]/Pe,T.displaySize[1]-xe[3]/Pe]}const D=i.left*S,V=i.right*S;let G,Z,ie,se;l==="width"||l==="both"?(se=v[0]+D-p[3],Z=v[0]+V+p[1]):(se=v[0]+(D+V-T.displaySize[0])/2,Z=se+T.displaySize[0]);const pe=i.top*S,me=i.bottom*S;return l==="height"||l==="both"?(G=v[1]+pe-p[0],ie=v[1]+me+p[2]):(G=v[1]+(pe+me-T.displaySize[1])/2,ie=G+T.displaySize[1]),{image:T,top:G,right:Z,bottom:ie,left:se,collisionPadding:M}}tn("ImagePosition",Li),tn("ImageAtlas",_t),d.az=void 0,(lt=d.az||(d.az={}))[lt.none=0]="none",lt[lt.horizontal=1]="horizontal",lt[lt.vertical=2]="vertical",lt[lt.horizontalOnly=3]="horizontalOnly";const Jh=128,op=32640;function MI(c,i){const{expression:l}=i;if(l.kind==="constant")return{kind:"constant",layoutSize:l.evaluate(new Lr(c+1))};if(l.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:v}=l;let S=0;for(;S<p.length&&p[S]<=c;)S++;S=Math.max(0,S-1);let T=S;for(;T<p.length&&p[T]<c+1;)T++;T=Math.min(p.length-1,T);const M=p[S],D=p[T];return l.kind==="composite"?{kind:"composite",minZoom:M,maxZoom:D,interpolationType:v}:{kind:"camera",minZoom:M,maxZoom:D,minSize:l.evaluate(new Lr(M)),maxSize:l.evaluate(new Lr(D)),interpolationType:v}}}function s2(c,i,l){let p="never";const v=c.get(i);return v?p=v:c.get(l)&&(p="always"),p}const UG=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function o_(c,i,l,p,v,S,T,M,D,V,G,Z,ie){const se=M?Math.min(op,Math.round(M[0])):0,pe=M?Math.min(op,Math.round(M[1])):0;c.emplaceBack(i,l,Math.round(32*p),Math.round(32*v),S,T,(se<<1)+(D?1:0),pe,16*V,16*G,256*Z,256*ie)}function l2(c,i,l){c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l),c.emplaceBack(i.x,i.y,l)}function qG(c){for(const i of c.sections)if(Vh(i.text))return!0;return!1}class c2{constructor(i){this.layoutVertexArray=new Ue,this.indexArray=new xt,this.programConfigurations=i,this.segments=new Yt,this.dynamicLayoutVertexArray=new st,this.opacityVertexArray=new bt,this.hasVisibleVertices=!1,this.placedSymbolArray=new I}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0}upload(i,l,p,v){this.isEmpty()||(p&&(this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,Q0.members),this.indexBuffer=i.createIndexBuffer(this.indexArray,l),this.dynamicLayoutVertexBuffer=i.createVertexBuffer(this.dynamicLayoutVertexArray,e_.members,!0),this.opacityVertexBuffer=i.createVertexBuffer(this.opacityVertexArray,UG,!0),this.opacityVertexBuffer.itemSize=1),(p||v)&&this.programConfigurations.upload(i))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())}}tn("SymbolBuffers",c2);class u2{constructor(i,l,p){this.layoutVertexArray=new i,this.layoutAttributes=l,this.indexArray=new p,this.segments=new Yt,this.collisionVertexArray=new vt}upload(i){this.layoutVertexBuffer=i.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=i.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=i.createVertexBuffer(this.collisionVertexArray,wg.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())}}tn("CollisionBuffers",u2);class Pg{constructor(i){this.collisionBoxArray=i.collisionBoxArray,this.zoom=i.zoom,this.overscaling=i.overscaling,this.layers=i.layers,this.layerIds=this.layers.map((T=>T.id)),this.index=i.index,this.pixelRatio=i.pixelRatio,this.sourceLayerIndex=i.sourceLayerIndex,this.hasDependencies=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[];const l=this.layers[0]._unevaluatedLayout._values;this.textSizeData=MI(this.zoom,l["text-size"]),this.iconSizeData=MI(this.zoom,l["icon-size"]);const p=this.layers[0].layout,v=p.get("symbol-sort-key"),S=p.get("symbol-z-order");this.canOverlap=s2(p,"text-overlap","text-allow-overlap")!=="never"||s2(p,"icon-overlap","icon-allow-overlap")!=="never"||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=S!=="viewport-y"&&!v.isConstant(),this.sortFeaturesByY=(S==="viewport-y"||S==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,p.get("symbol-placement")==="point"&&(this.writingModes=p.get("text-writing-mode").map((T=>d.az[T]))),this.stateDependentLayerIds=this.layers.filter((T=>T.isStateDependent())).map((T=>T.id)),this.sourceID=i.sourceID}createArrays(){this.text=new c2(new du(this.layers,this.zoom,(i=>/^text/.test(i)))),this.icon=new c2(new du(this.layers,this.zoom,(i=>/^icon/.test(i)))),this.glyphOffsetArray=new Y,this.lineVertexArray=new re,this.symbolInstances=new U,this.textAnchorOffsets=new le}calculateGlyphDependencies(i,l,p,v,S){for(const T of i)if(l[T.codePointAt(0)]=!0,(p||v)&&S){const M=ip[T];M&&(l[M.codePointAt(0)]=!0)}}populate(i,l,p){const v=this.layers[0],S=v.layout,T=S.get("text-font"),M=S.get("text-field"),D=S.get("icon-image"),V=(M.value.kind!=="constant"||M.value.value instanceof $i&&!M.value.value.isEmpty()||M.value.value.toString().length>0)&&(T.value.kind!=="constant"||T.value.value.length>0),G=D.value.kind!=="constant"||!!D.value.value||Object.keys(D.parameters).length>0,Z=S.get("symbol-sort-key");if(this.features=[],!V&&!G)return;const ie=l.iconDependencies,se=l.glyphDependencies,pe=l.availableImages,me=new Lr(this.zoom);for(const{feature:xe,id:Pe,index:Le,sourceLayerIndex:Se}of i){const ke=v._featureFilter.needGeometry,qe=wc(xe,ke);if(!v._featureFilter.filter(me,qe,p))continue;let tt,gt;if(ke||(qe.geometry=Ol(xe)),V){const kt=v.getValueAndResolveTokens("text-field",qe,p,pe),Ft=$i.factory(kt),Kt=this.hasRTLText=this.hasRTLText||qG(Ft);(!Kt||mc.getRTLTextPluginStatus()==="unavailable"||Kt&&mc.isParsed())&&(tt=Ev(Ft,v,qe))}if(G){const kt=v.getValueAndResolveTokens("icon-image",qe,p,pe);gt=kt instanceof la?kt:la.fromString(kt)}if(!tt&&!gt)continue;const jt=this.sortFeaturesByKey?Z.evaluate(qe,{},p):void 0;if(this.features.push({id:Pe,text:tt,icon:gt,index:Le,sourceLayerIndex:Se,geometry:qe.geometry,properties:xe.properties,type:Ac.types[xe.type],sortKey:jt}),gt&&(ie[gt.name]=!0),tt){const kt=T.evaluate(qe,{},p).join(","),Ft=S.get("text-rotation-alignment")!=="viewport"&&S.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(d.az.vertical)>=0;for(const Kt of tt.sections)if(Kt.image)ie[Kt.image.name]=!0;else{const $t=au(tt.toString()),It=Kt.fontStack||kt,At=se[It]=se[It]||{};this.calculateGlyphDependencies(Kt.text,At,Ft,this.allowVerticalPlacement,$t)}}}S.get("symbol-placement")==="line"&&(this.features=(function(xe){const Pe={},Le={},Se=[];let ke=0;function qe(kt){Se.push(xe[kt]),ke++}function tt(kt,Ft,Kt){const $t=Le[kt];return delete Le[kt],Le[Ft]=$t,Se[$t].geometry[0].pop(),Se[$t].geometry[0]=Se[$t].geometry[0].concat(Kt[0]),$t}function gt(kt,Ft,Kt){const $t=Pe[Ft];return delete Pe[Ft],Pe[kt]=$t,Se[$t].geometry[0].shift(),Se[$t].geometry[0]=Kt[0].concat(Se[$t].geometry[0]),$t}function jt(kt,Ft,Kt){const $t=Kt?Ft[0][Ft[0].length-1]:Ft[0][0];return`${kt}:${$t.x}:${$t.y}`}for(let kt=0;kt<xe.length;kt++){const Ft=xe[kt],Kt=Ft.geometry,$t=Ft.text?Ft.text.toString():null;if(!$t){qe(kt);continue}const It=jt($t,Kt),At=jt($t,Kt,!0);if(It in Le&&At in Pe&&Le[It]!==Pe[At]){const ln=gt(It,At,Kt),fn=tt(It,At,Se[ln].geometry);delete Pe[It],delete Le[At],Le[jt($t,Se[fn].geometry,!0)]=fn,Se[ln].geometry=null}else It in Le?tt(It,At,Kt):At in Pe?gt(It,At,Kt):(qe(kt),Pe[It]=ke-1,Le[At]=ke-1)}return Se.filter((kt=>kt.geometry))})(this.features)),this.sortFeaturesByKey&&this.features.sort(((xe,Pe)=>xe.sortKey-Pe.sortKey))}update(i,l,p){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(i,l,this.layers,{imagePositions:p}),this.icon.programConfigurations.updatePaintArrays(i,l,this.layers,{imagePositions:p}))}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(i){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(i),this.iconCollisionBox.upload(i)),this.text.upload(i,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(i,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(i,l){const p=this.lineVertexArray.length;if(i.segment!==void 0){let v=i.dist(l[i.segment+1]),S=i.dist(l[i.segment]);const T={};for(let M=i.segment+1;M<l.length;M++)T[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:v},M<l.length-1&&(v+=l[M+1].dist(l[M]));for(let M=i.segment||0;M>=0;M--)T[M]={x:l[M].x,y:l[M].y,tileUnitDistanceFromAnchor:S},M>0&&(S+=l[M-1].dist(l[M]));for(let M=0;M<l.length;M++){const D=T[M];this.lineVertexArray.emplaceBack(D.x,D.y,D.tileUnitDistanceFromAnchor)}}return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(i,l,p,v,S,T,M,D,V,G,Z,ie){const se=i.indexArray,pe=i.layoutVertexArray,me=i.segments.prepareSegment(4*l.length,pe,se,this.canOverlap?T.sortKey:void 0),xe=this.glyphOffsetArray.length,Pe=me.vertexLength,Le=this.allowVerticalPlacement&&M===d.az.vertical?Math.PI/2:0,Se=T.text&&T.text.sections;for(let ke=0;ke<l.length;ke++){const{tl:qe,tr:tt,bl:gt,br:jt,tex:kt,pixelOffsetTL:Ft,pixelOffsetBR:Kt,minFontScaleX:$t,minFontScaleY:It,glyphOffset:At,isSDF:ln,sectionIndex:fn}=l[ke],An=me.vertexLength,mn=At[1];o_(pe,D.x,D.y,qe.x,mn+qe.y,kt.x,kt.y,p,ln,Ft.x,Ft.y,$t,It),o_(pe,D.x,D.y,tt.x,mn+tt.y,kt.x+kt.w,kt.y,p,ln,Kt.x,Ft.y,$t,It),o_(pe,D.x,D.y,gt.x,mn+gt.y,kt.x,kt.y+kt.h,p,ln,Ft.x,Kt.y,$t,It),o_(pe,D.x,D.y,jt.x,mn+jt.y,kt.x+kt.w,kt.y+kt.h,p,ln,Kt.x,Kt.y,$t,It),l2(i.dynamicLayoutVertexArray,D,Le),se.emplaceBack(An,An+2,An+1),se.emplaceBack(An+1,An+2,An+3),me.vertexLength+=4,me.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(At[0]),ke!==l.length-1&&fn===l[ke+1].sectionIndex||i.programConfigurations.populatePaintArrays(pe.length,T,T.index,{imagePositions:{},canonical:ie,formattedSection:Se&&Se[fn]})}i.placedSymbolArray.emplaceBack(D.x,D.y,xe,this.glyphOffsetArray.length-xe,Pe,V,G,D.segment,p?p[0]:0,p?p[1]:0,v[0],v[1],M,0,!1,0,Z)}_addCollisionDebugVertex(i,l,p,v,S,T){return l.emplaceBack(0,0),i.emplaceBack(p.x,p.y,v,S,Math.round(T.x),Math.round(T.y))}addCollisionDebugVertices(i,l,p,v,S,T,M){const D=S.segments.prepareSegment(4,S.layoutVertexArray,S.indexArray),V=D.vertexLength,G=S.layoutVertexArray,Z=S.collisionVertexArray,ie=M.anchorX,se=M.anchorY;this._addCollisionDebugVertex(G,Z,T,ie,se,new _(i,l)),this._addCollisionDebugVertex(G,Z,T,ie,se,new _(p,l)),this._addCollisionDebugVertex(G,Z,T,ie,se,new _(p,v)),this._addCollisionDebugVertex(G,Z,T,ie,se,new _(i,v)),D.vertexLength+=4;const pe=S.indexArray;pe.emplaceBack(V,V+1),pe.emplaceBack(V+1,V+2),pe.emplaceBack(V+2,V+3),pe.emplaceBack(V+3,V),D.primitiveLength+=4}addDebugCollisionBoxes(i,l,p,v){for(let S=i;S<l;S++){const T=this.collisionBoxArray.get(S);this.addCollisionDebugVertices(T.x1,T.y1,T.x2,T.y2,v?this.textCollisionBox:this.iconCollisionBox,T.anchorPoint,p)}}generateCollisionDebugBuffers(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new u2(yt,om.members,qt),this.iconCollisionBox=new u2(yt,om.members,qt);for(let i=0;i<this.symbolInstances.length;i++){const l=this.symbolInstances.get(i);this.addDebugCollisionBoxes(l.textBoxStartIndex,l.textBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.verticalTextBoxStartIndex,l.verticalTextBoxEndIndex,l,!0),this.addDebugCollisionBoxes(l.iconBoxStartIndex,l.iconBoxEndIndex,l,!1),this.addDebugCollisionBoxes(l.verticalIconBoxStartIndex,l.verticalIconBoxEndIndex,l,!1)}}_deserializeCollisionBoxesForSymbol(i,l,p,v,S,T,M,D,V){const G={};for(let Z=l;Z<p;Z++){const ie=i.get(Z);G.textBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},G.textFeatureIndex=ie.featureIndex;break}for(let Z=v;Z<S;Z++){const ie=i.get(Z);G.verticalTextBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},G.verticalTextFeatureIndex=ie.featureIndex;break}for(let Z=T;Z<M;Z++){const ie=i.get(Z);G.iconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},G.iconFeatureIndex=ie.featureIndex;break}for(let Z=D;Z<V;Z++){const ie=i.get(Z);G.verticalIconBox={x1:ie.x1,y1:ie.y1,x2:ie.x2,y2:ie.y2,anchorPointX:ie.anchorPointX,anchorPointY:ie.anchorPointY},G.verticalIconFeatureIndex=ie.featureIndex;break}return G}deserializeCollisionBoxes(i){this.collisionArrays=[];for(let l=0;l<this.symbolInstances.length;l++){const p=this.symbolInstances.get(l);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(i,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}addIndicesForPlacedSymbol(i,l){const p=i.placedSymbolArray.get(l),v=p.vertexStartIndex+4*p.numGlyphs;for(let S=p.vertexStartIndex;S<v;S+=4)i.indexArray.emplaceBack(S,S+2,S+1),i.indexArray.emplaceBack(S+1,S+2,S+3)}getSortedSymbolIndexes(i){if(this.sortedAngle===i&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const l=Math.sin(i),p=Math.cos(i),v=[],S=[],T=[];for(let M=0;M<this.symbolInstances.length;++M){T.push(M);const D=this.symbolInstances.get(M);v.push(0|Math.round(l*D.anchorX+p*D.anchorY)),S.push(D.featureIndex)}return T.sort(((M,D)=>v[M]-v[D]||S[D]-S[M])),T}addToSortKeyRanges(i,l){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===l?p.symbolInstanceEnd=i+1:this.sortKeyRanges.push({sortKey:l,symbolInstanceStart:i,symbolInstanceEnd:i+1})}sortFeatures(i){if(this.sortFeaturesByY&&this.sortedAngle!==i&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(i),this.sortedAngle=i,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const l of this.symbolInstanceIndexes){const p=this.symbolInstances.get(l);this.featureSortOrder.push(p.featureIndex),[p.rightJustifiedTextSymbolIndex,p.centerJustifiedTextSymbolIndex,p.leftJustifiedTextSymbolIndex].forEach(((v,S,T)=>{v>=0&&T.indexOf(v)===S&&this.addIndicesForPlacedSymbol(this.text,v)})),p.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,p.verticalPlacedTextSymbolIndex),p.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.placedIconSymbolIndex),p.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,p.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let kI,II;tn("SymbolBucket",Pg,{omit:["layers","collisionBoxArray","features","compareText"]}),Pg.MAX_GLYPHS=65535,Pg.addDynamicAttributes=l2;var d2={get paint(){return II=II||new Ei({"icon-opacity":new vn(Ke.paint_symbol["icon-opacity"]),"icon-color":new vn(Ke.paint_symbol["icon-color"]),"icon-halo-color":new vn(Ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new vn(Ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new vn(Ke.paint_symbol["icon-halo-blur"]),"icon-translate":new an(Ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new an(Ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new vn(Ke.paint_symbol["text-opacity"]),"text-color":new vn(Ke.paint_symbol["text-color"],{runtimeType:Aa,getOverride:c=>c.textColor,hasOverride:c=>!!c.textColor}),"text-halo-color":new vn(Ke.paint_symbol["text-halo-color"]),"text-halo-width":new vn(Ke.paint_symbol["text-halo-width"]),"text-halo-blur":new vn(Ke.paint_symbol["text-halo-blur"]),"text-translate":new an(Ke.paint_symbol["text-translate"]),"text-translate-anchor":new an(Ke.paint_symbol["text-translate-anchor"])})},get layout(){return kI=kI||new Ei({"symbol-placement":new an(Ke.layout_symbol["symbol-placement"]),"symbol-spacing":new an(Ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new an(Ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new vn(Ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new an(Ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new an(Ke.layout_symbol["icon-allow-overlap"]),"icon-overlap":new an(Ke.layout_symbol["icon-overlap"]),"icon-ignore-placement":new an(Ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new an(Ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new an(Ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new vn(Ke.layout_symbol["icon-size"]),"icon-text-fit":new an(Ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new an(Ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new vn(Ke.layout_symbol["icon-image"]),"icon-rotate":new vn(Ke.layout_symbol["icon-rotate"]),"icon-padding":new vn(Ke.layout_symbol["icon-padding"]),"icon-keep-upright":new an(Ke.layout_symbol["icon-keep-upright"]),"icon-offset":new vn(Ke.layout_symbol["icon-offset"]),"icon-anchor":new vn(Ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new an(Ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new an(Ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new an(Ke.layout_symbol["text-rotation-alignment"]),"text-field":new vn(Ke.layout_symbol["text-field"]),"text-font":new vn(Ke.layout_symbol["text-font"]),"text-size":new vn(Ke.layout_symbol["text-size"]),"text-max-width":new vn(Ke.layout_symbol["text-max-width"]),"text-line-height":new an(Ke.layout_symbol["text-line-height"]),"text-letter-spacing":new vn(Ke.layout_symbol["text-letter-spacing"]),"text-justify":new vn(Ke.layout_symbol["text-justify"]),"text-radial-offset":new vn(Ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new an(Ke.layout_symbol["text-variable-anchor"]),"text-variable-anchor-offset":new vn(Ke.layout_symbol["text-variable-anchor-offset"]),"text-anchor":new vn(Ke.layout_symbol["text-anchor"]),"text-max-angle":new an(Ke.layout_symbol["text-max-angle"]),"text-writing-mode":new an(Ke.layout_symbol["text-writing-mode"]),"text-rotate":new vn(Ke.layout_symbol["text-rotate"]),"text-padding":new an(Ke.layout_symbol["text-padding"]),"text-keep-upright":new an(Ke.layout_symbol["text-keep-upright"]),"text-transform":new vn(Ke.layout_symbol["text-transform"]),"text-offset":new vn(Ke.layout_symbol["text-offset"]),"text-allow-overlap":new an(Ke.layout_symbol["text-allow-overlap"]),"text-overlap":new an(Ke.layout_symbol["text-overlap"]),"text-ignore-placement":new an(Ke.layout_symbol["text-ignore-placement"]),"text-optional":new an(Ke.layout_symbol["text-optional"])})}};class NI{constructor(i){if(i.property.overrides===void 0)throw new Error("overrides must be provided to instantiate FormatSectionOverride class");this.type=i.property.overrides?i.property.overrides.runtimeType:oa,this.defaultValue=i}evaluate(i){if(i.formattedSection){const l=this.defaultValue.property.overrides;if(l&&l.hasOverride(i.formattedSection))return l.getOverride(i.formattedSection)}return i.feature&&i.featureState?this.defaultValue.evaluate(i.feature,i.featureState):this.defaultValue.property.specification.default}eachChild(i){this.defaultValue.isConstant()||i(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}tn("FormatSectionOverride",NI,{omit:["defaultValue"]});class s_ extends ko{constructor(i,l){super(i,d2,l)}recalculate(i,l){if(super.recalculate(i,l),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")==="map"?"map":"viewport"),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){const p=this.layout.get("text-writing-mode");if(p){const v=[];for(const S of p)v.indexOf(S)<0&&v.push(S);this.layout._values["text-writing-mode"]=v}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()}getValueAndResolveTokens(i,l,p,v){const S=this.layout.get(i).evaluate(l,{},p,v),T=this._unevaluatedLayout._values[i];return T.isDataDriven()||fc(T.value)||!S?S:(function(M,D){return D.replace(/{([^{}]+)}/g,((V,G)=>M&&G in M?String(M[G]):""))})(l.properties,S)}createBucket(i){return new Pg(i)}queryRadius(){return 0}queryIntersectsFeature(){throw new Error("Should take a different path in FeatureIndex")}_setPaintOverrides(){for(const i of d2.paint.overridableProperties){if(!s_.hasPaintOverride(this.layout,i))continue;const l=this.paint.get(i),p=new NI(l),v=new Sl(p,l.property.specification);let S=null;S=l.value.kind==="constant"||l.value.kind==="source"?new E("source",v):new R("composite",v,l.value.zoomStops),this.paint._values[i]=new Jo(l.property,S,l.parameters)}}_handleOverridablePaintPropertyUpdate(i,l,p){return!(!this.layout||l.isDataDriven()||p.isDataDriven())&&s_.hasPaintOverride(this.layout,i)}static hasPaintOverride(i,l){const p=i.get("text-field"),v=d2.paint.properties[l];let S=!1;const T=M=>{for(const D of M)if(v.overrides&&v.overrides.hasOverride(D))return void(S=!0)};if(p.value.kind==="constant"&&p.value.value instanceof $i)T(p.value.value.sections);else if(p.value.kind==="source"||p.value.kind==="composite"){const M=V=>{S||(V instanceof ca&&tr(V.value)===Zl?T(V.value.sections):V instanceof Ru?T(V.sections):V.eachChild(M))},D=p.value;D._styleExpression&&M(D._styleExpression.expression)}return S}}let DI;var GG={get paint(){return DI=DI||new Ei({"background-color":new an(Ke.paint_background["background-color"]),"background-pattern":new Uh(Ke.paint_background["background-pattern"]),"background-opacity":new an(Ke.paint_background["background-opacity"])})}};class WG extends ko{constructor(i,l){super(i,GG,l)}}class HG extends ko{constructor(i,l){super(i,{},l),this.onAdd=p=>{this.implementation.onAdd&&this.implementation.onAdd(p,p.painter.context.gl)},this.onRemove=p=>{this.implementation.onRemove&&this.implementation.onRemove(p,p.painter.context.gl)},this.implementation=i}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){throw new Error("Custom layers cannot be serialized")}}class ZG{constructor(i){this._methodToThrottle=i,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._methodToThrottle()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((()=>{this._triggered=!1,this._methodToThrottle()}),0))}remove(){delete this._channel,this._methodToThrottle=()=>{}}}const KG={once:!0},h2=63710088e-1;class sp{constructor(i,l){if(isNaN(i)||isNaN(l))throw new Error(`Invalid LngLat object: (${i}, ${l})`);if(this.lng=+i,this.lat=+l,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new sp(Tt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(i){const l=Math.PI/180,p=this.lat*l,v=i.lat*l,S=Math.sin(p)*Math.sin(v)+Math.cos(p)*Math.cos(v)*Math.cos((i.lng-this.lng)*l);return h2*Math.acos(Math.min(S,1))}static convert(i){if(i instanceof sp)return i;if(Array.isArray(i)&&(i.length===2||i.length===3))return new sp(Number(i[0]),Number(i[1]));if(!Array.isArray(i)&&typeof i=="object"&&i!==null)return new sp(Number("lng"in i?i.lng:i.lon),Number(i.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}const OI=2*Math.PI*h2;function RI(c){return OI*Math.cos(c*Math.PI/180)}function LI(c){return(180+c)/360}function zI(c){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+c*Math.PI/360)))/360}function FI(c,i){return c/RI(i)}function BI(c){return 360*c-180}function l_(c){return 360/Math.PI*Math.atan(Math.exp((180-360*c)*Math.PI/180))-90}function $I(c,i){return c*RI(l_(i))}class Mv{constructor(i,l,p=0){this.x=+i,this.y=+l,this.z=+p}static fromLngLat(i,l=0){const p=sp.convert(i);return new Mv(LI(p.lng),zI(p.lat),FI(l,p.lat))}toLngLat(){return new sp(BI(this.x),l_(this.y))}toAltitude(){return $I(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/OI*(i=l_(this.y),1/Math.cos(i*Math.PI/180));var i}}function VI(c,i,l){var p=2*Math.PI*6378137/256/Math.pow(2,l);return[c*p-2*Math.PI*6378137/2,i*p-2*Math.PI*6378137/2]}class f2{constructor(i,l,p){if(!(function(v,S,T){return!(v<0||v>25||T<0||T>=Math.pow(2,v)||S<0||S>=Math.pow(2,v))})(i,l,p))throw new Error(`x=${l}, y=${p}, z=${i} outside of bounds. 0<=x<${Math.pow(2,i)}, 0<=y<${Math.pow(2,i)} 0<=z<=25 `);this.z=i,this.x=l,this.y=p,this.key=Ag(0,i,i,l,p)}equals(i){return this.z===i.z&&this.x===i.x&&this.y===i.y}url(i,l,p){const v=(T=this.y,M=this.z,D=VI(256*(S=this.x),256*(T=Math.pow(2,M)-T-1),M),V=VI(256*(S+1),256*(T+1),M),D[0]+","+D[1]+","+V[0]+","+V[1]);var S,T,M,D,V;const G=(function(Z,ie,se){let pe,me="";for(let xe=Z;xe>0;xe--)pe=1<<xe-1,me+=(ie&pe?1:0)+(se&pe?2:0);return me})(this.z,this.x,this.y);return i[(this.x+this.y)%i.length].replace(/{prefix}/g,(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(p==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace(/{ratio}/g,l>1?"@2x":"").replace(/{quadkey}/g,G).replace(/{bbox-epsg-3857}/g,v)}isChildOf(i){const l=this.z-i.z;return l>0&&i.x===this.x>>l&&i.y===this.y>>l}getTilePoint(i){const l=Math.pow(2,this.z);return new _((i.x*l-this.x)*We,(i.y*l-this.y)*We)}toString(){return`${this.z}/${this.x}/${this.y}`}}class UI{constructor(i,l){this.wrap=i,this.canonical=l,this.key=Ag(i,l.z,l.z,l.x,l.y)}}class Fl{constructor(i,l,p,v,S){if(this.terrainRttPosMatrix32f=null,i<p)throw new Error(`overscaledZ should be >= z; overscaledZ = ${i}; z = ${p}`);this.overscaledZ=i,this.wrap=l,this.canonical=new f2(p,+v,+S),this.key=Ag(l,i,p,v,S)}clone(){return new Fl(this.overscaledZ,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)}equals(i){return this.overscaledZ===i.overscaledZ&&this.wrap===i.wrap&&this.canonical.equals(i.canonical)}scaledTo(i){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const l=this.canonical.z-i;return i>this.canonical.z?new Fl(i,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Fl(i,this.wrap,i,this.canonical.x>>l,this.canonical.y>>l)}isOverscaled(){return this.overscaledZ>this.canonical.z}calculateScaledKey(i,l){if(i>this.overscaledZ)throw new Error(`targetZ > this.overscaledZ; targetZ = ${i}; overscaledZ = ${this.overscaledZ}`);const p=this.canonical.z-i;return i>this.canonical.z?Ag(this.wrap*+l,i,this.canonical.z,this.canonical.x,this.canonical.y):Ag(this.wrap*+l,i,i,this.canonical.x>>p,this.canonical.y>>p)}isChildOf(i){if(i.wrap!==this.wrap||this.overscaledZ-i.overscaledZ<=0)return!1;if(i.overscaledZ===0)return this.overscaledZ>0;const l=this.canonical.z-i.canonical.z;return!(l<0)&&i.canonical.x===this.canonical.x>>l&&i.canonical.y===this.canonical.y>>l}children(i){if(this.overscaledZ>=i)return[new Fl(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const l=this.canonical.z+1,p=2*this.canonical.x,v=2*this.canonical.y;return[new Fl(l,this.wrap,l,p,v),new Fl(l,this.wrap,l,p+1,v),new Fl(l,this.wrap,l,p,v+1),new Fl(l,this.wrap,l,p+1,v+1)]}isLessThan(i){return this.wrap<i.wrap||!(this.wrap>i.wrap)&&(this.overscaledZ<i.overscaledZ||!(this.overscaledZ>i.overscaledZ)&&(this.canonical.x<i.canonical.x||!(this.canonical.x>i.canonical.x)&&this.canonical.y<i.canonical.y))}wrapped(){return new Fl(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(i){return new Fl(this.overscaledZ,i,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new UI(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}getTilePoint(i){return this.canonical.getTilePoint(new Mv(i.x-this.wrap,i.y))}normalizeCoordinates(i,l,p=8192){if(i>=0&&i<p&&l>=0&&l<p)return{tileID:this,x:i,y:l};const v=Math.floor(i/p),S=Math.floor(l/p),T=i-v*p,M=l-S*p,D=this.canonical.z,V=1<<D,G=this.canonical.y+S;if(G<0||G>=V)return null;let Z=this.canonical.x+v,ie=this.wrap;return Z<0?(ie-=Math.ceil(-Z/V),Z=(Z%V+V)%V):Z>=V&&(ie+=Math.floor(Z/V),Z%=V),{tileID:new Fl(this.overscaledZ,ie,D,Z,G),x:T,y:M}}}function Ag(c,i,l,p,v){(c*=2)<0&&(c=-1*c-1);const S=1<<l;return(S*S*c+S*v+p).toString(36)+l.toString(36)+i.toString(36)}function p2(c,i){return i?c.properties[i]:c.id}function XG(c,i){const l={id:c.id};if(i.removeAllProperties&&(delete c.removeProperties,delete c.addOrUpdateProperties,delete i.removeProperties),i.removeProperties)for(const p of i.removeProperties){const v=c.addOrUpdateProperties.findIndex((S=>S.key===p));v>-1&&c.addOrUpdateProperties.splice(v,1)}return(c.removeAllProperties||i.removeAllProperties)&&(l.removeAllProperties=!0),(c.removeProperties||i.removeProperties)&&(l.removeProperties=[...c.removeProperties||[],...i.removeProperties||[]]),(c.addOrUpdateProperties||i.addOrUpdateProperties)&&(l.addOrUpdateProperties=[...c.addOrUpdateProperties||[],...i.addOrUpdateProperties||[]]),(c.newGeometry||i.newGeometry)&&(l.newGeometry=i.newGeometry||c.newGeometry),l}function qI(c){var i,l;if(!c)return{};const p={};return p.removeAll=c.removeAll,p.remove=new Set(c.remove||[]),p.add=new Map((i=c.add)===null||i===void 0?void 0:i.map((v=>[v.id,v]))),p.update=new Map((l=c.update)===null||l===void 0?void 0:l.map((v=>[v.id,v]))),p}tn("CanonicalTileID",f2),tn("OverscaledTileID",Fl,{omit:["terrainRttPosMatrix32f"]});class um{constructor(){this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0}extend(i){return this.minX=Math.min(this.minX,i.x),this.minY=Math.min(this.minY,i.y),this.maxX=Math.max(this.maxX,i.x),this.maxY=Math.max(this.maxY,i.y),this}expandBy(i){return this.minX-=i,this.minY-=i,this.maxX+=i,this.maxY+=i,(this.minX>this.maxX||this.minY>this.maxY)&&(this.minX=1/0,this.maxX=-1/0,this.minY=1/0,this.maxY=-1/0),this}shrinkBy(i){return this.expandBy(-i)}map(i){const l=new um;return l.extend(i(new _(this.minX,this.minY))),l.extend(i(new _(this.maxX,this.minY))),l.extend(i(new _(this.minX,this.maxY))),l.extend(i(new _(this.maxX,this.maxY))),l}static fromPoints(i){const l=new um;for(const p of i)l.extend(p);return l}contains(i){return i.x>=this.minX&&i.x<=this.maxX&&i.y>=this.minY&&i.y<=this.maxY}empty(){return this.minX>this.maxX}width(){return this.maxX-this.minX}height(){return this.maxY-this.minY}covers(i){return!this.empty()&&!i.empty()&&i.minX>=this.minX&&i.maxX<=this.maxX&&i.minY>=this.minY&&i.maxY<=this.maxY}intersects(i){return!this.empty()&&!i.empty()&&i.minX<=this.maxX&&i.maxX>=this.minX&&i.minY<=this.maxY&&i.maxY>=this.minY}}class GI{constructor(i){this._stringToNumber={},this._numberToString=[];for(let l=0;l<i.length;l++){const p=i[l];this._stringToNumber[p]=l,this._numberToString[l]=p}}encode(i){return this._stringToNumber[i]}decode(i){if(i>=this._numberToString.length)throw new Error(`Out of bounds. Index requested n=${i} can't be >= this._numberToString.length ${this._numberToString.length}`);return this._numberToString[i]}}class WI{constructor(i,l,p,v,S){this.type="Feature",this._vectorTileFeature=i,this._x=p,this._y=v,this._z=l,this.properties=i.properties,this.id=S}projectPoint(i,l,p,v){return[360*(i.x+l)/v-180,360/Math.PI*Math.atan(Math.exp((1-2*(i.y+p)/v)*Math.PI))-90]}projectLine(i,l,p,v){return i.map((S=>this.projectPoint(S,l,p,v)))}get geometry(){if(this._geometry)return this._geometry;const i=this._vectorTileFeature,l=i.extent*Math.pow(2,this._z),p=i.extent*this._x,v=i.extent*this._y,S=i.loadGeometry();switch(i.type){case 1:{const T=[];for(const D of S)T.push(D[0]);const M=this.projectLine(T,p,v,l);this._geometry=T.length===1?{type:"Point",coordinates:M[0]}:{type:"MultiPoint",coordinates:M};break}case 2:{const T=S.map((M=>this.projectLine(M,p,v,l)));this._geometry=T.length===1?{type:"LineString",coordinates:T[0]}:{type:"MultiLineString",coordinates:T};break}case 3:{const T=bv(S),M=[];for(const D of T)M.push(D.map((V=>this.projectLine(V,p,v,l))));this._geometry=M.length===1?{type:"Polygon",coordinates:M[0]}:{type:"MultiPolygon",coordinates:M};break}default:throw new Error(`unknown feature type: ${i.type}`)}return this._geometry}set geometry(i){this._geometry=i}toJSON(){const i={geometry:this.geometry};for(const l in this)l!=="_geometry"&&l!=="_vectorTileFeature"&&l!=="_x"&&l!=="_y"&&l!=="_z"&&(i[l]=this[l]);return i}}class Cg{_name;dataBuffer;nullabilityBuffer;_size;constructor(i,l,p){this._name=i,this.dataBuffer=l,typeof p=="number"?this._size=p:(this.nullabilityBuffer=p,this._size=p.size())}getValue(i){return this.nullabilityBuffer&&!this.nullabilityBuffer.get(i)?null:this.getValueFromBuffer(i)}has(i){return this.nullabilityBuffer&&this.nullabilityBuffer.get(i)||!this.nullabilityBuffer}get name(){return this._name}get size(){return this._size}}class c_ extends Cg{}class m2 extends c_{getValueFromBuffer(i){return this.dataBuffer[i]}}class g2 extends c_{getValueFromBuffer(i){return this.dataBuffer[i]}}class HI extends Cg{delta;constructor(i,l,p,v){super(i,l,v),this.delta=p}}class y2 extends HI{constructor(i,l,p,v){super(i,Int32Array.of(l),p,v)}getValueFromBuffer(i){return this.dataBuffer[0]+i*this.delta}}class v2 extends Cg{constructor(i,l,p){super(i,Int32Array.of(l),p)}getValueFromBuffer(i){return this.dataBuffer[0]}}class YG{_name;_geometryVector;_idVector;_propertyVectors;_extent;propertyVectorsMap;constructor(i,l,p,v,S=4096){this._name=i,this._geometryVector=l,this._idVector=p,this._propertyVectors=v,this._extent=S}get name(){return this._name}get idVector(){return this._idVector}get geometryVector(){return this._geometryVector}get propertyVectors(){return this._propertyVectors}getPropertyVector(i){return this.propertyVectorsMap||(this.propertyVectorsMap=new Map(this._propertyVectors.map((l=>[l.name,l])))),this.propertyVectorsMap.get(i)}*[Symbol.iterator](){const i=this.geometryVector[Symbol.iterator]();let l=0;for(;l<this.numFeatures;){let p;this.idVector&&(p=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(l)):this.idVector.getValue(l));const v=i?.next().value,S={};for(const T of this.propertyVectors){if(!T)continue;const M=T.name,D=T.getValue(l);D!==null&&(S[M]=D)}l++,yield{id:p,geometry:v,properties:S}}}get numFeatures(){return this.geometryVector.numGeometries}get extent(){return this._extent}getFeatures(){const i=[],l=this.geometryVector.getGeometries();for(let p=0;p<this.numFeatures;p++){let v;this.idVector&&(v=this.containsMaxSaveIntegerValues(this.idVector)?Number(this.idVector.getValue(p)):this.idVector.getValue(p));const S={coordinates:l[p],type:this.geometryVector.geometryType(p)},T={};for(const M of this.propertyVectors){if(!M)continue;const D=M.name,V=M.getValue(p);V!==null&&(T[D]=V)}i.push({id:v,geometry:S,properties:T})}return i}containsMaxSaveIntegerValues(i){return i instanceof m2||i instanceof v2&&i instanceof y2||i instanceof g2}}class JG{value;constructor(i){this.value=i}get(){return this.value}set(i){this.value=i}increment(){return this.value++}add(i){this.value+=i}}var Hr,lp,Lo,ad,dm,Bl,Hi,Ga,ZI,Ec;function es(c,i,l){const p=new Int32Array(l);let v=0,S=i.get();for(let T=0;T<p.length;T++){let M=c[S++],D=127&M;M<128||(M=c[S++],D|=(127&M)<<7,M<128||(M=c[S++],D|=(127&M)<<14,M<128||(M=c[S++],D|=(127&M)<<21,M<128||(M=c[S++],D|=(15&M)<<28)))),p[v++]=D}return i.set(S),p}function x2(c,i,l){const p=new BigInt64Array(l);for(let v=0;v<p.length;v++)p[v]=QG(c,i);return p}function QG(c,i){let l=0n,p=0,v=i.get();for(;v<c.length;){const S=c[v++];if(l|=BigInt(127&S)<<BigInt(p),!(128&S))break;if(p+=7,p>=64)throw new Error("Varint too long")}return i.set(v),l}function eW(c,i){let l,p;return p=c[i.get()],i.increment(),l=127&p,p<128?l:(p=c[i.get()],i.increment(),l|=(127&p)<<7,p<128?l:(p=c[i.get()],i.increment(),l|=(127&p)<<14,p<128?l:(p=c[i.get()],i.increment(),l|=(127&p)<<21,p<128?l:(p=c[i.get()],l|=(15&p)<<28,(function(v,S,T){let M,D;if(D=S[T.get()],T.increment(),M=(112&D)>>4,D<128||(D=S[T.get()],T.increment(),M|=(127&D)<<3,D<128)||(D=S[T.get()],T.increment(),M|=(127&D)<<10,D<128)||(D=S[T.get()],T.increment(),M|=(127&D)<<17,D<128)||(D=S[T.get()],T.increment(),M|=(127&D)<<24,D<128)||(D=S[T.get()],T.increment(),M|=(1&D)<<31,D<128))return 4294967296*M+(v>>>0);throw new Error("Expected varint not more than 10 bytes")})(l,c,i)))))}function zi(c){return c>>>1^-(1&c)}function $l(c){return c>>1n^-(1n&c)}function Eg(c){return c%2==1?(c+1)/-2:c/2}function KI(c,i,l){if(l===void 0){l=0;for(let S=0;S<i;S++)l+=c[S]}const p=new Int32Array(l);let v=0;for(let S=0;S<i;S++){const T=c[S];p.fill(c[S+i],v,v+T),v+=T}return p}function XI(c,i,l){if(l===void 0){l=0;for(let S=0;S<i;S++)l+=Number(c[S])}const p=new BigInt64Array(l);let v=0;for(let S=0;S<i;S++){const T=Number(c[S]);p.fill(c[S+i],v,v+T),v+=T}return p}function YI(c,i,l){const p=new Float64Array(l);let v=0;for(let S=0;S<i;S++){const T=c[S];p.fill(c[S+i],v,v+T),v+=T}return p}function JI(c){const i=c.length/4*4;let l=1;if(i>=4)for(let p=c[0];l<i-4;l+=4)p=c[l]+=p,p=c[l+1]+=p,p=c[l+2]+=p,p=c[l+3]+=p;for(;l!=c.length;)c[l]+=c[l-1],++l}(function(c){c.NONE="NONE",c.DELTA="DELTA",c.COMPONENTWISE_DELTA="COMPONENTWISE_DELTA",c.RLE="RLE",c.MORTON="MORTON",c.PDE="PDE"})(Hr||(Hr={})),(function(c){c.NONE="NONE",c.FAST_PFOR="FAST_PFOR",c.VARINT="VARINT",c.ALP="ALP"})(lp||(lp={})),(function(c){c.PRESENT="PRESENT",c.DATA="DATA",c.OFFSET="OFFSET",c.LENGTH="LENGTH"})(Lo||(Lo={}));class _2{_dictionaryType;_offsetType;_lengthType;constructor(i,l,p){this._dictionaryType=i,this._offsetType=l,this._lengthType=p}get dictionaryType(){return this._dictionaryType}get offsetType(){return this._offsetType}get lengthType(){return this._lengthType}}function ws(c,i){const l=(function(p,v){const S=p[v.get()],T=Object.values(Lo)[S>>4];let M=null;switch(T){case Lo.DATA:M=new _2(Object.values(ad)[15&S]);break;case Lo.OFFSET:M=new _2(null,Object.values(dm)[15&S]);break;case Lo.LENGTH:M=new _2(null,null,Object.values(Bl)[15&S])}v.increment();const D=p[v.get()],V=Object.values(Hr)[D>>5],G=Object.values(Hr)[D>>2&7],Z=Object.values(lp)[3&D];v.increment();const ie=es(p,v,2),se=ie[0];return{physicalStreamType:T,logicalStreamType:M,logicalLevelTechnique1:V,logicalLevelTechnique2:G,physicalLevelTechnique:Z,numValues:se,byteLength:ie[1],decompressedCount:se}})(c,i);return l.logicalLevelTechnique1===Hr.MORTON?(function(p,v,S){const T=es(v,S,2);return{physicalStreamType:p.physicalStreamType,logicalStreamType:p.logicalStreamType,logicalLevelTechnique1:p.logicalLevelTechnique1,logicalLevelTechnique2:p.logicalLevelTechnique2,physicalLevelTechnique:p.physicalLevelTechnique,numValues:p.numValues,byteLength:p.byteLength,decompressedCount:p.decompressedCount,numBits:T[0],coordinateShift:T[1]}})(l,c,i):Hr.RLE!==l.logicalLevelTechnique1&&Hr.RLE!==l.logicalLevelTechnique2||lp.NONE===l.physicalLevelTechnique?l:(function(p,v,S){const T=es(v,S,2);return{physicalStreamType:p.physicalStreamType,logicalStreamType:p.logicalStreamType,logicalLevelTechnique1:p.logicalLevelTechnique1,logicalLevelTechnique2:p.logicalLevelTechnique2,physicalLevelTechnique:p.physicalLevelTechnique,numValues:p.numValues,byteLength:p.byteLength,decompressedCount:T[1],runs:T[0],numRleValues:T[1]}})(l,c,i)}(function(c){c.NONE="NONE",c.SINGLE="SINGLE",c.SHARED="SHARED",c.VERTEX="VERTEX",c.MORTON="MORTON",c.FSST="FSST"})(ad||(ad={})),(function(c){c.VERTEX="VERTEX",c.INDEX="INDEX",c.STRING="STRING",c.KEY="KEY"})(dm||(dm={})),(function(c){c.VAR_BINARY="VAR_BINARY",c.GEOMETRIES="GEOMETRIES",c.PARTS="PARTS",c.RINGS="RINGS",c.TRIANGLES="TRIANGLES",c.SYMBOL="SYMBOL",c.DICTIONARY="DICTIONARY"})(Bl||(Bl={})),(function(c){c[c.FLAT=0]="FLAT",c[c.CONST=1]="CONST",c[c.SEQUENCE=2]="SEQUENCE",c[c.DICTIONARY=3]="DICTIONARY",c[c.FSST_DICTIONARY=4]="FSST_DICTIONARY"})(Hi||(Hi={}));class od{values;_size;constructor(i,l){this.values=i,this._size=l}get(i){const l=Math.floor(i/8);return(this.values[l]>>i%8&1)==1}set(i,l){const p=Math.floor(i/8);this.values[p]=this.values[p]|(l?1:0)<<i%8}getInt(i){const l=Math.floor(i/8);return this.values[l]>>i%8&1}size(){return this._size}getBuffer(){return this.values}}function u_(c,i,l){if(!i)return c;const p=i.size(),v=new c.constructor(p);let S=0;for(let T=0;T<p;T++)v[T]=i.get(T)?c[S++]:l;return v}function Ss(c,i,l,p,v,S){return(function(T,M,D,V,G){switch(M.logicalLevelTechnique1){case Hr.DELTA:if(M.logicalLevelTechnique2===Hr.RLE){const Z=M;if(!G)return(function(ie,se,pe){const me=new Int32Array(pe);let xe=0,Pe=0;for(let Le=0;Le<se;Le++){const Se=ie[Le],ke=zi(ie[Le+se]);for(let qe=0;qe<Se;qe++)Pe+=ke,me[xe++]=Pe}return me})(T,Z.runs,Z.numRleValues);T=KI(T,Z.runs,Z.numRleValues)}(function(Z){Z[0]=zi(Z[0]);const ie=Z.length/4*4;let se=1;if(ie>=4)for(;se<ie-4;se+=4){const pe=Z[se+1],me=Z[se+2],xe=Z[se+3];Z[se]=zi(Z[se])+Z[se-1],Z[se+1]=zi(pe)+Z[se],Z[se+2]=zi(me)+Z[se+1],Z[se+3]=zi(xe)+Z[se+2]}for(;se!=Z.length;++se)Z[se]=zi(Z[se])+Z[se-1]})(T);break;case Hr.RLE:T=(function(Z,ie,se){return se?(function(pe,me,xe){if(xe===void 0){xe=0;for(let Se=0;Se<me;Se++)xe+=pe[Se]}const Pe=new Int32Array(xe);let Le=0;for(let Se=0;Se<me;Se++){const ke=pe[Se];let qe=pe[Se+me];qe=zi(qe),Pe.fill(qe,Le,Le+ke),Le+=ke}return Pe})(Z,ie.runs,ie.numRleValues):KI(Z,ie.runs,ie.numRleValues)})(T,M,D);break;case Hr.MORTON:JI(T);break;case Hr.COMPONENTWISE_DELTA:(function(Z){if(Z.length<2)return;Z[0]=zi(Z[0]),Z[1]=zi(Z[1]);const ie=Z.length/4*4;let se=2;if(ie>=4)for(;se<ie-4;se+=4){const pe=Z[se+1],me=Z[se+2],xe=Z[se+3];Z[se]=zi(Z[se])+Z[se-2],Z[se+1]=zi(pe)+Z[se-1],Z[se+2]=zi(me)+Z[se],Z[se+3]=zi(xe)+Z[se+1]}for(;se!=Z.length;se+=2)Z[se]=zi(Z[se])+Z[se-2],Z[se+1]=zi(Z[se+1])+Z[se-1]})(T);break;case Hr.NONE:D&&(function(Z){for(let ie=0;ie<Z.length;ie++)Z[ie]=zi(Z[ie])})(T);break;default:throw new Error(`The specified Logical level technique is not supported: ${M.logicalLevelTechnique1}`)}return G?u_(T,G,0):T})(d_(c,i,l),l,p,0,S)}function cp(c,i,l){return(function(p,v){if(v.logicalLevelTechnique1===Hr.DELTA&&v.logicalLevelTechnique2===Hr.NONE)return(function(S){const T=new Int32Array(S.length+1);T[0]=0,T[1]=zi(S[0]);let M=T[1];for(let D=2;D!=T.length;++D)M+=zi(S[D-1]),T[D]=T[D-1]+M;return new Uint32Array(T)})(p);if(v.logicalLevelTechnique1===Hr.RLE&&v.logicalLevelTechnique2===Hr.NONE)return(function(S,T,M){const D=new Int32Array(M+1);D[0]=0;let V=1,G=D[0];for(let Z=0;Z<T;Z++){const ie=S[Z],se=S[Z+T];for(let pe=V;pe<V+ie;pe++)D[pe]=se+G,G=D[pe];V+=ie}return new Uint32Array(D)})(p,v.runs,v.numRleValues);if(v.logicalLevelTechnique1===Hr.NONE&&v.logicalLevelTechnique2===Hr.NONE){(function(T){let M=0;for(let D=0;D<T.length;D++)T[D]+=M,M=T[D]})(p);const S=new Uint32Array(v.numValues+1);return S[0]=0,S.set(p,1),S}if(v.logicalLevelTechnique1===Hr.DELTA&&v.logicalLevelTechnique2===Hr.RLE){const S=(function(T,M,D){const V=new Int32Array(D+1);V[0]=0;let G=1,Z=V[0];for(let ie=0;ie<M;ie++){const se=T[ie];let pe=T[ie+M];pe=zi(pe);for(let me=G;me<G+se;me++)V[me]=pe+Z,Z=V[me];G+=se}return new Uint32Array(V)})(p,v.runs,v.numRleValues);return JI(S),S}throw new Error("Only delta encoding is supported for transforming length to offset streams yet.")})(d_(c,i,l),l)}function d_(c,i,l){const p=l.physicalLevelTechnique;if(p===lp.FAST_PFOR)return(function(){throw new Error("FastPFor is not implemented yet.")})();if(p===lp.VARINT)return es(c,i,l.numValues);if(p===lp.NONE){const v=i.get();i.add(l.byteLength);const S=c.subarray(v,i.get());return new Int32Array(S)}throw new Error("Specified physicalLevelTechnique is not supported (yet).")}function b2(c,i,l,p){const v=d_(c,i,l);if(v.length===1){const S=v[0];return p?zi(S):S}return p?(function(S){return zi(S[1])})(v):(function(S){return S[1]})(v)}function QI(c,i,l){return(function(p){if(p.length==2){const v=zi(p[1]);return[v,v]}return[zi(p[2]),zi(p[3])]})(d_(c,i,l))}function eN(c,i,l){return(function(p){if(p.length==2){const v=$l(p[1]);return[v,v]}return[$l(p[2]),$l(p[3])]})(x2(c,i,l.numValues))}function tN(c,i,l,p,v){return(function(S,T,M,D){switch(T.logicalLevelTechnique1){case Hr.DELTA:if(T.logicalLevelTechnique2===Hr.RLE){const V=T;if(!D)return(function(G,Z,ie){const se=new BigInt64Array(ie);let pe=0,me=0n;for(let xe=0;xe<Z;xe++){const Pe=Number(G[xe]),Le=$l(G[xe+Z]);for(let Se=0;Se<Pe;Se++)me+=Le,se[pe++]=me}return se})(S,V.runs,V.numRleValues);S=XI(S,V.runs,V.numRleValues)}(function(V){V[0]=$l(V[0]);const G=V.length/4*4;let Z=1;if(G>=4)for(;Z<G-4;Z+=4){const ie=V[Z+1],se=V[Z+2],pe=V[Z+3];V[Z]=$l(V[Z])+V[Z-1],V[Z+1]=$l(ie)+V[Z],V[Z+2]=$l(se)+V[Z+1],V[Z+3]=$l(pe)+V[Z+2]}for(;Z!=V.length;++Z)V[Z]=$l(V[Z])+V[Z-1]})(S);break;case Hr.RLE:S=(function(V,G,Z){return Z?(function(ie,se,pe){if(pe===void 0){pe=0;for(let Pe=0;Pe<se;Pe++)pe+=Number(ie[Pe])}const me=new BigInt64Array(pe);let xe=0;for(let Pe=0;Pe<se;Pe++){const Le=Number(ie[Pe]);let Se=ie[Pe+se];Se=$l(Se),me.fill(Se,xe,xe+Le),xe+=Le}return me})(V,G.runs,G.numRleValues):XI(V,G.runs,G.numRleValues)})(S,T,M);break;case Hr.NONE:M&&(function(V){for(let G=0;G<V.length;G++)V[G]=$l(V[G])})(S);break;default:throw new Error(`The specified Logical level technique is not supported: ${T.logicalLevelTechnique1}`)}return D?u_(S,D,0n):S})(x2(c,i,l.numValues),l,p,v)}function nN(c,i,l,p){const v=x2(c,i,l.numValues);if(v.length===1){const S=v[0];return p?$l(S):S}return p?(function(S){return $l(S[1])})(v):(function(S){return S[1]})(v)}function h_(c,i,l,p){const v=c.logicalLevelTechnique1;if(v===Hr.RLE)return c.runs===1?Hi.CONST:Hi.FLAT;if(v!==Hr.DELTA||c.logicalLevelTechnique2!==Hr.RLE)return c.numValues===1?Hi.CONST:Hi.FLAT;const S=i instanceof od?i.size():i;if(c.numRleValues!==S)return Hi.FLAT;if(c.runs===1)return Hi.SEQUENCE;if(c.runs!==2)return c.numValues===1?Hi.CONST:Hi.FLAT;const T=p.get();let M;if(c.physicalLevelTechnique===lp.VARINT)M=es(l,p,4);else{const D=p.get();M=new Int32Array(l.buffer,l.byteOffset+D,4)}return p.set(T),M[2]===2&&M[3]===2?Hi.SEQUENCE:c.numValues===1?Hi.CONST:Hi.FLAT}class rN extends c_{getValueFromBuffer(i){return this.dataBuffer[i]}}class iN extends HI{constructor(i,l,p,v){super(i,BigInt64Array.of(l),p,v)}getValueFromBuffer(i){return this.dataBuffer[0]+BigInt(i)*this.delta}}class jg{_geometryOffsets;_partOffsets;_ringOffsets;constructor(i,l,p){this._geometryOffsets=i,this._partOffsets=l,this._ringOffsets=p}get geometryOffsets(){return this._geometryOffsets}get partOffsets(){return this._partOffsets}get ringOffsets(){return this._ringOffsets}}function w2(c,i,l){return{x:aN(c,i)-l,y:aN(c>>1,i)-l}}function aN(c,i){let l=0;for(let p=0;p<i;p++)l|=(c&1<<2*p)>>p;return l}(function(c){c[c.POINT=0]="POINT",c[c.LINESTRING=1]="LINESTRING",c[c.POLYGON=2]="POLYGON",c[c.MULTIPOINT=3]="MULTIPOINT",c[c.MULTILINESTRING=4]="MULTILINESTRING",c[c.MULTIPOLYGON=5]="MULTIPOLYGON"})(Ga||(Ga={})),(function(c){c[c.POINT=0]="POINT",c[c.LINESTRING=1]="LINESTRING",c[c.POLYGON=2]="POLYGON"})(ZI||(ZI={})),(function(c){c[c.MORTON=0]="MORTON",c[c.VEC_2=1]="VEC_2",c[c.VEC_3=2]="VEC_3"})(Ec||(Ec={}));class tW{createPoint(i){return[[i]]}createMultiPoint(i){return i.map((l=>[l]))}createLineString(i){return[i]}createMultiLineString(i){return i}createPolygon(i,l){return[i].concat(l)}createMultiPolygon(i){return i.flat()}}function oN(c){const i=new Array(c.numGeometries);let l=1,p=1,v=1,S=0;const T=new tW;let M=0,D=0;const V=c.mortonSettings,G=c.topologyVector,Z=G.geometryOffsets,ie=G.partOffsets,se=G.ringOffsets,pe=c.vertexOffsets,me=c.containsPolygonGeometry(),xe=c.vertexBuffer;for(let Pe=0;Pe<c.numGeometries;Pe++){const Le=c.geometryType(Pe);if(Le===Ga.POINT){if(pe&&pe.length!==0)if(c.vertexBufferType===Ec.VEC_2){const Se=2*pe[D++],ke=new _(xe[Se],xe[Se+1]);i[S++]=T.createPoint(ke)}else{const Se=w2(xe[pe[D++]],V.numBits,V.coordinateShift),ke=new _(Se.x,Se.y);i[S++]=T.createPoint(ke)}else{const Se=new _(xe[M++],xe[M++]);i[S++]=T.createPoint(Se)}Z&&v++,ie&&l++,se&&p++}else if(Le===Ga.MULTIPOINT){const Se=Z[v]-Z[v-1];v++;const ke=new Array(Se);if(pe&&pe.length!==0){for(let qe=0;qe<Se;qe++){const tt=2*pe[D++];ke[qe]=new _(xe[tt],xe[tt+1])}i[S++]=T.createMultiPoint(ke)}else{for(let qe=0;qe<Se;qe++){const tt=xe[M++],gt=xe[M++];ke[qe]=new _(tt,gt)}i[S++]=T.createMultiPoint(ke)}}else if(Le===Ga.LINESTRING){let Se,ke=0;me?(ke=se[p]-se[p-1],p++):ke=ie[l]-ie[l-1],l++,pe&&pe.length!==0?(Se=c.vertexBufferType===Ec.VEC_2?T2(xe,pe,D,ke,!1):P2(xe,pe,D,ke,!1,V),D+=ke):(Se=S2(xe,M,ke,!1),M+=2*ke),i[S++]=T.createLineString(Se),Z&&v++}else if(Le===Ga.POLYGON){const Se=ie[l]-ie[l-1];l++;const ke=new Array(Se-1);let qe=se[p]-se[p-1];if(p++,pe&&pe.length!==0){const tt=c.vertexBufferType===Ec.VEC_2?p_(xe,pe,D,qe):m_(xe,pe,D,qe,0,V);D+=qe;for(let gt=0;gt<ke.length;gt++)qe=se[p]-se[p-1],p++,ke[gt]=c.vertexBufferType===Ec.VEC_2?p_(xe,pe,D,qe):m_(xe,pe,D,qe,0,V),D+=qe;i[S++]=T.createPolygon(tt,ke)}else{const tt=f_(xe,M,qe);M+=2*qe;for(let gt=0;gt<ke.length;gt++)qe=se[p]-se[p-1],p++,ke[gt]=f_(xe,M,qe),M+=2*qe;i[S++]=T.createPolygon(tt,ke)}Z&&v++}else if(Le===Ga.MULTILINESTRING){const Se=Z[v]-Z[v-1];v++;const ke=new Array(Se);if(pe&&pe.length!==0){for(let qe=0;qe<Se;qe++){let tt=0;me?(tt=se[p]-se[p-1],p++):tt=ie[l]-ie[l-1],l++;const gt=c.vertexBufferType===Ec.VEC_2?T2(xe,pe,D,tt,!1):P2(xe,pe,D,tt,!1,V);ke[qe]=gt,D+=tt}i[S++]=T.createMultiLineString(ke)}else{for(let qe=0;qe<Se;qe++){let tt=0;me?(tt=se[p]-se[p-1],p++):tt=ie[l]-ie[l-1],l++,ke[qe]=S2(xe,M,tt,!1),M+=2*tt}i[S++]=T.createMultiLineString(ke)}}else{if(Le!==Ga.MULTIPOLYGON)throw new Error("The specified geometry type is currently not supported.");{const Se=Z[v]-Z[v-1];v++;const ke=new Array(Se);let qe=0;if(pe&&pe.length!==0){for(let tt=0;tt<Se;tt++){const gt=ie[l]-ie[l-1];l++;const jt=new Array(gt-1);qe=se[p]-se[p-1],p++;const kt=c.vertexBufferType===Ec.VEC_2?p_(xe,pe,D,qe):m_(xe,pe,D,qe,0,V);D+=qe;for(let Ft=0;Ft<jt.length;Ft++)qe=se[p]-se[p-1],p++,jt[Ft]=c.vertexBufferType===Ec.VEC_2?p_(xe,pe,D,qe):m_(xe,pe,D,qe,0,V),D+=qe;ke[tt]=T.createPolygon(kt,jt)}i[S++]=T.createMultiPolygon(ke)}else{for(let tt=0;tt<Se;tt++){const gt=ie[l]-ie[l-1];l++;const jt=new Array(gt-1);qe=se[p]-se[p-1],p++;const kt=f_(xe,M,qe);M+=2*qe;for(let Ft=0;Ft<jt.length;Ft++){const Kt=se[p]-se[p-1];p++,jt[Ft]=f_(xe,M,Kt),M+=2*Kt}ke[tt]=T.createPolygon(kt,jt)}i[S++]=T.createMultiPolygon(ke)}}}}return i}function f_(c,i,l){return S2(c,i,l,!0)}function p_(c,i,l,p){return T2(c,i,l,p,!0)}function m_(c,i,l,p,v,S){return P2(c,i,l,p,!0,S)}function S2(c,i,l,p){const v=new Array(p?l+1:l);for(let S=0;S<2*l;S+=2)v[S/2]=new _(c[i+S],c[i+S+1]);return p&&(v[v.length-1]=v[0]),v}function T2(c,i,l,p,v){const S=new Array(v?p+1:p);for(let T=0;T<2*p;T+=2){const M=2*i[l+T/2];S[T/2]=new _(c[M],c[M+1])}return v&&(S[S.length-1]=S[0]),S}function P2(c,i,l,p,v,S){const T=new Array(v?p+1:p);for(let M=0;M<p;M++){const D=w2(c[i[l+M]],S.numBits,S.coordinateShift);T[M]=new _(D.x,D.y)}return v&&(T[T.length-1]=T[0]),T}class sN{_vertexBufferType;_topologyVector;_vertexOffsets;_vertexBuffer;_mortonSettings;constructor(i,l,p,v,S){this._vertexBufferType=i,this._topologyVector=l,this._vertexOffsets=p,this._vertexBuffer=v,this._mortonSettings=S}get vertexBufferType(){return this._vertexBufferType}get topologyVector(){return this._topologyVector}get vertexOffsets(){return this._vertexOffsets}get vertexBuffer(){return this._vertexBuffer}*[Symbol.iterator](){const i=oN(this);let l=0;for(;l<this.numGeometries;)yield{coordinates:i[l],type:this.geometryType(l)},l++}getSimpleEncodedVertex(i){const l=this.vertexOffsets?2*this.vertexOffsets[i]:2*i;return[this.vertexBuffer[l],this.vertexBuffer[l+1]]}getVertex(i){if(this.vertexOffsets&&this.mortonSettings){const p=w2(this.vertexBuffer[this.vertexOffsets[i]],this.mortonSettings.numBits,this.mortonSettings.coordinateShift);return[p.x,p.y]}const l=this.vertexOffsets?2*this.vertexOffsets[i]:2*i;return[this.vertexBuffer[l],this.vertexBuffer[l+1]]}getGeometries(){return oN(this)}get mortonSettings(){return this._mortonSettings}}class lN extends sN{_numGeometries;_geometryType;constructor(i,l,p,v,S,T,M){super(p,v,S,T,M),this._numGeometries=i,this._geometryType=l}geometryType(i){return this._geometryType}get numGeometries(){return this._numGeometries}containsPolygonGeometry(){return this._geometryType===Ga.POLYGON||this._geometryType===Ga.MULTIPOLYGON}containsSingleGeometryType(){return!0}}class cN extends sN{_geometryTypes;constructor(i,l,p,v,S,T){super(i,p,v,S,T),this._geometryTypes=l}geometryType(i){return this._geometryTypes[i]}get numGeometries(){return this._geometryTypes.length}containsPolygonGeometry(){for(let i=0;i<this.numGeometries;i++)if(this.geometryType(i)===Ga.POLYGON||this.geometryType(i)===Ga.MULTIPOLYGON)return!0;return!1}containsSingleGeometryType(){return!1}}class uN{_triangleOffsets;_indexBuffer;_vertexBuffer;_topologyVector;constructor(i,l,p,v){this._triangleOffsets=i,this._indexBuffer=l,this._vertexBuffer=p,this._topologyVector=v}get triangleOffsets(){return this._triangleOffsets}get indexBuffer(){return this._indexBuffer}get vertexBuffer(){return this._vertexBuffer}get topologyVector(){return this._topologyVector}getGeometries(){if(!this._topologyVector)throw new Error("Cannot convert GpuVector to coordinates without topology information");const i=new Array(this.numGeometries),l=this._topologyVector,p=l.partOffsets,v=l.ringOffsets,S=l.geometryOffsets;let T=0,M=1,D=1,V=1;for(let G=0;G<this.numGeometries;G++)switch(this.geometryType(G)){case Ga.POLYGON:{const Z=p[M]-p[M-1];M++;const ie=[];for(let se=0;se<Z;se++){const pe=v[D]-v[D-1];D++;const me=[];for(let xe=0;xe<pe;xe++){const Pe=this._vertexBuffer[T++],Le=this._vertexBuffer[T++];me.push(new _(Pe,Le))}me.length>0&&me.push(me[0]),ie.push(me)}i[G]=ie,S&&V++}break;case Ga.MULTIPOLYGON:{const Z=S[V]-S[V-1];V++;const ie=[];for(let se=0;se<Z;se++){const pe=p[M]-p[M-1];M++;for(let me=0;me<pe;me++){const xe=v[D]-v[D-1];D++;const Pe=[];for(let Le=0;Le<xe;Le++){const Se=this._vertexBuffer[T++],ke=this._vertexBuffer[T++];Pe.push(new _(Se,ke))}Pe.length>0&&Pe.push(Pe[0]),ie.push(Pe)}}i[G]=ie}}return i}[Symbol.iterator](){return null}}function dN(c,i,l,p,v,S){return new nW(c,i,l,p,v,S)}class nW extends uN{_numGeometries;_geometryType;constructor(i,l,p,v,S,T){super(p,v,S,T),this._numGeometries=i,this._geometryType=l}geometryType(i){return this._geometryType}get numGeometries(){return this._numGeometries}containsSingleGeometryType(){return!0}}function hN(c,i,l,p,v){return new rW(c,i,l,p,v)}class rW extends uN{_geometryTypes;constructor(i,l,p,v,S){super(l,p,v,S),this._geometryTypes=i}geometryType(i){return this._geometryTypes[i]}get numGeometries(){return this._geometryTypes.length}containsSingleGeometryType(){return!1}}function iW(c,i,l,p,v){const S=ws(c,l);let T=null,M=null,D=null,V=null;if(h_(S,p,c,l)===Hi.CONST){const Le=b2(c,l,S,!1);let Se=null,ke=null,qe=null,tt=null;for(let gt=0;gt<i-1;gt++){const jt=ws(c,l);switch(jt.physicalStreamType){case Lo.LENGTH:switch(jt.logicalStreamType.lengthType){case Bl.GEOMETRIES:Se=cp(c,l,jt);break;case Bl.PARTS:ke=cp(c,l,jt);break;case Bl.RINGS:qe=cp(c,l,jt);break;case Bl.TRIANGLES:tt=cp(c,l,jt)}break;case Lo.OFFSET:switch(jt.logicalStreamType.offsetType){case dm.VERTEX:T=Ss(c,l,jt,!1);break;case dm.INDEX:V=Ss(c,l,jt,!1)}break;case Lo.DATA:ad.VERTEX===jt.logicalStreamType.dictionaryType?M=Ss(c,l,jt,!0):(D={numBits:jt.numBits,coordinateShift:jt.coordinateShift},M=Ss(c,l,jt,!1))}}return V!==null?Se!=null||ke!=null?dN(p,Le,tt,V,M,new jg(Se,ke,qe)):dN(p,Le,tt,V,M):D===null?(function(gt,jt,kt,Ft,Kt){return new lN(gt,jt,Ec.VEC_2,kt,Ft,Kt)})(p,Le,new jg(Se,ke,qe),T,M):(function(gt,jt,kt,Ft,Kt,$t){return new lN(gt,jt,Ec.MORTON,kt,Ft,Kt,$t)})(p,Le,new jg(Se,ke,qe),T,M,D)}const G=Ss(c,l,S,!1);let Z=null,ie=null,se=null,pe=null;for(let Le=0;Le<i-1;Le++){const Se=ws(c,l);switch(Se.physicalStreamType){case Lo.LENGTH:switch(Se.logicalStreamType.lengthType){case Bl.GEOMETRIES:Z=Ss(c,l,Se,!1);break;case Bl.PARTS:ie=Ss(c,l,Se,!1);break;case Bl.RINGS:se=Ss(c,l,Se,!1);break;case Bl.TRIANGLES:pe=cp(c,l,Se)}break;case Lo.OFFSET:switch(Se.logicalStreamType.offsetType){case dm.VERTEX:T=Ss(c,l,Se,!1);break;case dm.INDEX:V=Ss(c,l,Se,!1)}break;case Lo.DATA:ad.VERTEX===Se.logicalStreamType.dictionaryType?M=Ss(c,l,Se,!0):(D={numBits:Se.numBits,coordinateShift:Se.coordinateShift},M=Ss(c,l,Se,!1))}}let me=null,xe=null,Pe=null;return Z!==null?(me=A2(G,Z,2),ie!==null&&se!==null?(xe=fN(G,me,ie,!1),Pe=(function(Le,Se,ke,qe){const tt=new Uint32Array(ke[ke.length-1]+1);let gt=0;tt[0]=gt;let jt=1,kt=1,Ft=0;for(let Kt=0;Kt<Le.length;Kt++){const $t=Le[Kt],It=Se[Kt+1]-Se[Kt];if($t!==0&&$t!==3)for(let At=0;At<It;At++){const ln=ke[jt]-ke[jt-1];jt++;for(let fn=0;fn<ln;fn++)gt=tt[kt++]=gt+qe[Ft++]}else for(let At=0;At<It;At++)tt[kt++]=++gt,jt++}return tt})(G,me,xe,se)):ie!==null&&(xe=(function(Le,Se,ke){const qe=new Uint32Array(Se[Se.length-1]+1);let tt=0;qe[0]=tt;let gt=1,jt=0;for(let kt=0;kt<Le.length;kt++){const Ft=Le[kt],Kt=Se[kt+1]-Se[kt];if(Ft===4||Ft===1)for(let $t=0;$t<Kt;$t++)tt=qe[gt++]=tt+ke[jt++];else for(let $t=0;$t<Kt;$t++)qe[gt++]=++tt}return qe})(G,me,ie))):ie!==null&&se!==null?(xe=A2(G,ie,1),Pe=fN(G,xe,se,!0)):ie!==null&&(xe=A2(G,ie,0)),V!==null&&xe===null?hN(G,pe,V,M):V!==null?hN(G,pe,V,M,new jg(me,xe,Pe)):D===null?(function(Le,Se,ke,qe){return new cN(Ec.VEC_2,Le,Se,ke,qe)})(G,new jg(me,xe,Pe),T,M):(function(Le,Se,ke,qe,tt){return new cN(Ec.MORTON,Le,Se,ke,qe,tt)})(G,new jg(me,xe,Pe),T,M,D)}function A2(c,i,l){const p=new Uint32Array(c.length+1);let v=0;p[0]=v;let S=0;for(let T=0;T<c.length;T++)v=p[T+1]=v+(c[T]>l?i[S++]:1);return p}function fN(c,i,l,p){const v=new Uint32Array(i[i.length-1]+1);let S=0;v[0]=S;let T=1,M=0;for(let D=0;D<c.length;D++){const V=c[D],G=i[D+1]-i[D];if(V===5||V===2||p&&(V===4||V===1))for(let Z=0;Z<G;Z++)S=v[T++]=S+l[M++];else for(let Z=0;Z<G;Z++)v[T++]=++S}return v}class aW extends Cg{dataVector;constructor(i,l,p){super(i,l.getBuffer(),p),this.dataVector=l}getValueFromBuffer(i){return this.dataVector.get(i)}}class oW extends c_{getValueFromBuffer(i){return this.dataBuffer[i]}}class pN extends Cg{constructor(i,l,p){super(i,BigInt64Array.of(l),p)}getValueFromBuffer(i){return this.dataBuffer[0]}}function kv(c,i,l,p,v){const S=(function(T,M,D,V){const G=new Uint8Array(M);let Z=0;const ie=V.get()+D;for(;Z<M&&!(V.get()>=ie);){const se=T[V.increment()];if(se<=127){const pe=se+3,me=T[V.increment()],xe=Math.min(Z+pe,M);G.fill(me,Z,xe),Z=xe}else{const pe=256-se;for(let me=0;me<pe&&Z<M;me++)G[Z++]=T[V.increment()]}}return V.set(ie),G})(c,Math.ceil(i/8),l,p);return v?(function(T,M,D){if(!D)return T;const V=D.size(),G=new od(T,M),Z=new od(new Uint8Array(Math.ceil(V/8)),V);let ie=0;for(let se=0;se<V;se++){const pe=!!D.get(se)&&G.get(ie++);Z.set(se,pe)}return Z.getBuffer()})(S,i,v):S}const sW=new TextDecoder;function C2(c,i,l){return l-i>=12?sW.decode(c.subarray(i,l)):(function(p,v,S){let T="",M=v;for(;M<S;){const D=p[M];let V,G,Z,ie=null,se=D>239?4:D>223?3:D>191?2:1;if(M+se>S)break;se===1?D<128&&(ie=D):se===2?(V=p[M+1],(192&V)==128&&(ie=(31&D)<<6|63&V,ie<=127&&(ie=null))):se===3?(V=p[M+1],G=p[M+2],(192&V)==128&&(192&G)==128&&(ie=(15&D)<<12|(63&V)<<6|63&G,(ie<=2047||ie>=55296&&ie<=57343)&&(ie=null))):se===4&&(V=p[M+1],G=p[M+2],Z=p[M+3],(192&V)==128&&(192&G)==128&&(192&Z)==128&&(ie=(15&D)<<18|(63&V)<<12|(63&G)<<6|63&Z,(ie<=65535||ie>=1114112)&&(ie=null))),ie===null?(ie=65533,se=1):ie>65535&&(ie-=65536,T+=String.fromCharCode(ie>>>10&1023|55296),ie=56320|1023&ie),T+=String.fromCharCode(ie),M+=se}return T})(c,i,l)}class E2 extends Cg{offsetBuffer;constructor(i,l,p,v){super(i,p,v),this.offsetBuffer=l}}class mN extends E2{textEncoder;constructor(i,l,p,v){super(i,l,p,v??l.length-1),this.textEncoder=new TextEncoder}getValueFromBuffer(i){return C2(this.dataBuffer,this.offsetBuffer[i],this.offsetBuffer[i+1])}}class Mg extends E2{indexBuffer;textEncoder;constructor(i,l,p,v,S){super(i,p,v,S??l.length),this.indexBuffer=l,this.indexBuffer=l,this.textEncoder=new TextEncoder}getValueFromBuffer(i){const l=this.indexBuffer[i];return C2(this.dataBuffer,this.offsetBuffer[l],this.offsetBuffer[l+1])}}class gN extends E2{indexBuffer;symbolOffsetBuffer;symbolTableBuffer;textEncoder;symbolLengthBuffer;lengthBuffer;decodedDictionary;constructor(i,l,p,v,S,T,M){super(i,p,v,M),this.indexBuffer=l,this.symbolOffsetBuffer=S,this.symbolTableBuffer=T,this.textEncoder=new TextEncoder}getValueFromBuffer(i){this.decodedDictionary==null&&(this.symbolLengthBuffer==null&&(this.symbolLengthBuffer=this.offsetToLengthBuffer(this.symbolOffsetBuffer),this.lengthBuffer=this.offsetToLengthBuffer(this.offsetBuffer)),this.decodedDictionary=(function(p,v,S){const T=[],M=new Array(v.length).fill(0);for(let D=1;D<v.length;D++)M[D]=M[D-1]+v[D-1];for(let D=0;D<S.length;D++)if(S[D]===255)T.push(S[++D]);else{const V=v[S[D]],G=M[S[D]];for(let Z=0;Z<V;Z++)T.push(p[G+Z])}return new Uint8Array(T)})(this.symbolTableBuffer,this.symbolLengthBuffer,this.dataBuffer));const l=this.indexBuffer[i];return C2(this.decodedDictionary,this.offsetBuffer[l],this.offsetBuffer[l+1])}offsetToLengthBuffer(i){const l=new Uint32Array(i.length-1);let p=i[0];for(let v=1;v<i.length;v++){const S=i[v];l[v-1]=S-p,p=S}return l}}function lW(c,i,l,p,v,S){return l.type==="scalarType"?(function(T,M,D,V,G,Z){let ie=null,se=0;if(T===0)return null;if(Z.nullable){const me=ws(M,D);se=me.numValues;const xe=D.get(),Pe=kv(M,se,me.byteLength,D);D.set(xe+me.byteLength),ie=new od(Pe,me.numValues)}const pe=ie??V;switch(G.physicalType){case 4:case 3:return(function(me,xe,Pe,Le,Se){const ke=ws(me,xe),qe=h_(ke,Se,me,xe),tt=Le.physicalType===3;if(qe===Hi.FLAT){const gt=Ss(me,xe,ke,tt,0,Iv(Se)?Se:void 0);return new m2(Pe.name,gt,Se)}if(qe===Hi.SEQUENCE){const gt=QI(me,xe,ke);return new y2(Pe.name,gt[0],gt[1],ke.numRleValues)}{const gt=b2(me,xe,ke,tt);return new v2(Pe.name,gt,Se)}})(M,D,Z,G,pe);case 9:return(function(me,xe,Pe,Le,Se){let ke=null,qe=null,tt=null,gt=null,jt=null,kt=null,Ft=null,Kt=null;for(let $t=0;$t<Le;$t++){const It=ws(xe,Pe);if(It.byteLength!==0)switch(It.physicalStreamType){case Lo.PRESENT:{const At=kv(xe,It.numValues,It.byteLength,Pe);kt=new od(At,It.numValues);break}case Lo.OFFSET:qe=Ss(xe,Pe,It,!1,0,Se!=null||kt!=null?Se??kt:void 0);break;case Lo.LENGTH:{const At=cp(xe,Pe,It);Bl.DICTIONARY===It.logicalStreamType.lengthType?ke=At:Bl.SYMBOL===It.logicalStreamType.lengthType?gt=At:Ft=At;break}case Lo.DATA:{const At=xe.subarray(Pe.get(),Pe.get()+It.byteLength);Pe.add(It.byteLength);const ln=It.logicalStreamType.dictionaryType;ad.FSST===ln?jt=At:ad.SINGLE===ln||ad.SHARED===ln?tt=At:ad.NONE===ln&&(Kt=At);break}}}return(function($t,It,At,ln,fn,An,mn){return It?new gN($t,At,ln,fn,An,It,mn):null})(me,jt,qe,ke,tt,gt,Se??kt)??(function($t,It,At,ln,fn){return It?fn?new Mg($t,At,ln,It,fn):new Mg($t,At,ln,It):null})(me,tt,qe,ke,Se??kt)??(function($t,It,At,ln,fn){if(!It||!At)return null;if(ln)return fn?new Mg($t,ln,It,At,fn):new Mg($t,ln,It,At);if(fn&&fn.size()!==It.length-1){const An=new Int32Array(fn.size());let mn=0;for(let ar=0;ar<fn.size();ar++)An[ar]=fn.get(ar)?mn++:0;return new Mg($t,An,It,At,fn)}return fn?new mN($t,It,At,fn):new mN($t,It,At)})(me,Ft,Kt,qe,Se??kt)})(Z.name,M,D,Z.nullable?T-1:T,ie);case 0:return(function(me,xe,Pe,Le,Se){const ke=ws(me,xe),qe=ke.numValues,tt=xe.get(),gt=Iv(Se)?Se:void 0,jt=kv(me,qe,ke.byteLength,xe,gt);xe.set(tt+ke.byteLength);const kt=new od(jt,qe);return new aW(Pe.name,kt,Se)})(M,D,Z,0,pe);case 6:case 5:return(function(me,xe,Pe,Le,Se){const ke=ws(me,xe),qe=h_(ke,Le,me,xe),tt=Se.physicalType===5;if(qe===Hi.FLAT){const gt=tN(me,xe,ke,tt,Iv(Le)?Le:void 0);return new rN(Pe.name,gt,Le)}if(qe===Hi.SEQUENCE){const gt=eN(me,xe,ke);return new iN(Pe.name,gt[0],gt[1],ke.numRleValues)}{const gt=nN(me,xe,ke,tt);return new pN(Pe.name,gt,Le)}})(M,D,Z,pe,G);case 7:return(function(me,xe,Pe,Le){const Se=ws(me,xe),ke=Iv(Le)?Le:void 0,qe=(function(tt,gt,jt,kt){const Ft=gt.get(),Kt=Ft+jt*Float32Array.BYTES_PER_ELEMENT,$t=new Uint8Array(tt.subarray(Ft,Kt)).buffer,It=new Float32Array($t);return gt.set(Kt),kt?u_(It,kt,0):It})(me,xe,Se.numValues,ke);return new oW(Pe.name,qe,Le)})(M,D,Z,pe);case 8:return(function(me,xe,Pe,Le){const Se=ws(me,xe),ke=Iv(Le)?Le:void 0,qe=(function(tt,gt,jt,kt){const Ft=gt.get(),Kt=Ft+jt*Float64Array.BYTES_PER_ELEMENT,$t=new Uint8Array(tt.subarray(Ft,Kt)).buffer,It=new Float64Array($t);return gt.set(Kt),kt?u_(It,kt,0):It})(me,xe,Se.numValues,ke);return new g2(Pe.name,qe,Le)})(M,D,Z,pe);default:throw new Error(`The specified data type for the field is currently not supported: ${G}`)}})(p,c,i,v,l.scalarType,l):p===0?null:(function(T,M,D,V){let G=null,Z=null,ie=null,se=null,pe=!1;for(;!pe;){const Le=ws(T,M);switch(Le.physicalStreamType){case Lo.LENGTH:Bl.DICTIONARY===Le.logicalStreamType.lengthType?G=cp(T,M,Le):ie=cp(T,M,Le);break;case Lo.DATA:ad.SINGLE===Le.logicalStreamType.dictionaryType||ad.SHARED===Le.logicalStreamType.dictionaryType?(Z=T.subarray(M.get(),M.get()+Le.byteLength),pe=!0):se=T.subarray(M.get(),M.get()+Le.byteLength),M.add(Le.byteLength)}}const me=D.complexType.children,xe=[];let Pe=0;for(const Le of me){const Se=es(T,M,1)[0];if(Se==0)continue;const ke=Le.name?`${D.name}${Le.name}`:D.name;if(Se!==2||Le.type!=="scalarField"||Le.scalarField.physicalType!==9)throw new Error("Currently only optional string fields are implemented for a struct.");const qe=ws(T,M),tt=kv(T,qe.numValues,qe.byteLength,M),gt=ws(T,M),jt=Ss(T,M,gt,!1,0,gt.decompressedCount!==V?new od(tt,qe.numValues):void 0);xe[Pe++]=se?new gN(ke,jt,G,Z,ie,se,new od(tt,qe.numValues)):new Mg(ke,jt,G,Z,new od(tt,qe.numValues))}return xe})(c,i,l,v)}function Iv(c){return c instanceof od}function yN(c){switch(c){case 0:case 1:case 2:case 3:{const i={};i.nullable=!!(1&c),i.columnScope=0;const l={};return l.physicalType=c>1?6:4,l.type="physicalType",i.scalarType=l,i.type="scalarType",i}case 4:{const i={nullable:!1,columnScope:0},l={type:"physicalType",physicalType:0};return i.type="complexType",i.complexType=l,i}case 30:{const i={nullable:!1,columnScope:0},l={type:"physicalType",physicalType:1};return i.type="complexType",i.complexType=l,i}default:return(function(i){let l=null;switch(i){case 10:case 11:l=0;break;case 12:case 13:l=1;break;case 14:case 15:l=2;break;case 16:case 17:l=3;break;case 18:case 19:l=4;break;case 20:case 21:l=5;break;case 22:case 23:l=6;break;case 24:case 25:l=7;break;case 26:case 27:l=8;break;case 28:case 29:l=9;break;default:return null}const p={};p.nullable=!!(1&i),p.columnScope=0;const v={type:"physicalType"};return v.physicalType=l,p.type="scalarType",p.scalarType=v,p})(c)}}function vN(c){return c>=10}function xN(c){return c===30}function cW(c){if(c.name==="id")return!1;if(c.type==="scalarType"){const i=c.scalarType;if(i.type==="physicalType")switch(i.physicalType){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:default:return!1;case 9:return!0}else if(i.type==="logicalType")return!1}else if(c.type==="complexType"){const i=c.complexType;if(i.type==="physicalType")switch(i.physicalType){case 0:case 1:return!0;default:return!1}}return console.warn("Unexpected column type in hasStreamCount",c),!1}const uW=new TextDecoder;function j2(c,i){const l=es(c,i,1)[0];if(l===0)return"";const p=i.get(),v=c.subarray(p,p+l);return i.add(l),uW.decode(v)}function _N(c,i){const l=es(c,i,1)[0]>>>0;if(l<10||l>30)throw new Error(`Unsupported field type code ${l}. Supported: 10-29(scalars), 30(STRUCT)`);const p=yN(l);if(vN(l)&&(p.name=j2(c,i)),xN(l)){const v=es(c,i,1)[0]>>>0;p.complexType.children=new Array(v);for(let S=0;S<v;S++)p.complexType.children[S]=_N(c,i)}return(function(v){return{name:v.name,nullable:v.nullable,scalarField:v.scalarType,complexField:v.complexType,type:v.type==="scalarType"?"scalarField":"complexField"}})(p)}function dW(c,i){const l=es(c,i,1)[0]>>>0,p=yN(l);if(!p)throw new Error(`Unsupported column type code ${l}. Supported: 0-3(ID), 4(GEOMETRY), 10-29(scalars), 30(STRUCT)`);if(vN(l)?p.name=j2(c,i):l>=0&&l<=3?p.name="id":l===4&&(p.name="geometry"),xN(l)){const v=es(c,i,1)[0]>>>0,S=p.complexType;S.children=new Array(v);for(let T=0;T<v;T++)S.children[T]=_N(c,i)}return p}function hW(c,i){const l={featureTables:[]},p={};p.name=j2(c,i);const v=es(c,i,1)[0]>>>0,S=es(c,i,1)[0]>>>0;p.columns=new Array(S);for(let T=0;T<S;T++)p.columns[T]=dW(c,i);return l.featureTables.push(p),[l,v]}function fW(c,i,l,p,v,S,T=!1){const M=i.scalarType.physicalType,D=h_(v,S,c,l);if(M===4)switch(D){case Hi.FLAT:{const V=Ss(c,l,v,!1);return new m2(p,V,S)}case Hi.SEQUENCE:{const V=QI(c,l,v);return new y2(p,V[0],V[1],v.numRleValues)}case Hi.CONST:{const V=b2(c,l,v,!1);return new v2(p,V,S)}}else switch(D){case Hi.FLAT:{if(T){const G=(function(Z,ie,se){const pe=(function(me,xe,Pe){const Le=new Float64Array(Pe);for(let Se=0;Se<Pe;Se++)Le[Se]=eW(me,xe);return Le})(Z,ie,se.numValues);return(function(me,xe){switch(xe.logicalLevelTechnique1){case Hr.DELTA:return xe.logicalLevelTechnique2===Hr.RLE&&(me=YI(me,xe.runs,xe.numRleValues)),(function(Pe){Pe[0]=Eg(Pe[0]);const Le=Pe.length/4*4;let Se=1;if(Le>=4)for(;Se<Le-4;Se+=4){const ke=Pe[Se+1],qe=Pe[Se+2],tt=Pe[Se+3];Pe[Se]=Eg(Pe[Se])+Pe[Se-1],Pe[Se+1]=Eg(ke)+Pe[Se],Pe[Se+2]=Eg(qe)+Pe[Se+1],Pe[Se+3]=Eg(tt)+Pe[Se+2]}for(;Se!=Pe.length;++Se)Pe[Se]=Eg(Pe[Se])+Pe[Se-1]})(me),me;case Hr.RLE:return(function(Pe,Le){return YI(Pe,Le.runs,Le.numRleValues)})(me,xe);case Hr.NONE:return me;default:throw new Error(`The specified Logical level technique is not supported: ${xe.logicalLevelTechnique1}`)}})(pe,se)})(c,l,v);return new g2(p,G,S)}const V=tN(c,l,v,!1);return new rN(p,V,S)}case Hi.SEQUENCE:{const V=eN(c,l,v);return new iN(p,V[0],V[1],v.numRleValues)}case Hi.CONST:{const V=nN(c,l,v,!1);return new pN(p,V,S)}}throw new Error("Vector type not supported for id column.")}class pW{constructor(i,l){var p;switch(this._featureData=i,this.properties=this._featureData.properties||{},(p=this._featureData.geometry)===null||p===void 0?void 0:p.type){case Ga.POINT:case Ga.MULTIPOINT:this.type=1;break;case Ga.LINESTRING:case Ga.MULTILINESTRING:this.type=2;break;case Ga.POLYGON:case Ga.MULTIPOLYGON:this.type=3;break;default:this.type=0}this.extent=l,this.id=Number(this._featureData.id)}loadGeometry(){const i=[];for(const l of this._featureData.geometry.coordinates){const p=[];for(const v of l)p.push(new _(v.x,v.y));i.push(p)}return i}}class mW{constructor(i){this.features=[],this.featureTable=i,this.name=i.name,this.extent=i.extent,this.version=2,this.features=i.getFeatures(),this.length=this.features.length}feature(i){return new pW(this.features[i],this.extent)}}class bN{constructor(i){this.layers={};const l=(function(p,v,S=!0){const T=new JG(0),M=[];for(;T.get()<p.length;){const D=es(p,T,1)[0]>>>0,V=T.get()+D;if(V>p.length)throw new Error(`Block overruns tile: ${V} > ${p.length}`);if(es(p,T,1)[0]>>>0!=1){T.set(V);continue}const G=hW(p,T),Z=G[1],ie=G[0].featureTables[0];let se=null,pe=null;const me=[];let xe=0;for(const Le of ie.columns){const Se=Le.name;if(Se==="id"){let ke=null;if(Le.nullable){const tt=ws(p,T),gt=T.get(),jt=kv(p,tt.numValues,tt.byteLength,T);T.set(gt+tt.byteLength),ke=new od(jt,tt.numValues)}const qe=ws(p,T);xe=qe.decompressedCount,se=fW(p,Le,T,Se,qe,ke??xe,S)}else if(Se==="geometry"){const ke=es(p,T,1)[0];if(xe===0){const qe=T.get();xe=ws(p,T).decompressedCount,T.set(qe)}pe=iW(p,ke,T,xe)}else{const ke=cW(Le)?es(p,T,1)[0]:1;if(ke===0)continue;const qe=lW(p,T,Le,ke,xe);if(qe)if(Array.isArray(qe))for(const tt of qe)me.push(tt);else me.push(qe)}}const Pe=new YG(ie.name,pe,se,me,Z);M.push(Pe),T.set(V)}return M})(new Uint8Array(i));this.layers=l.reduce(((p,v)=>Object.assign(Object.assign({},p),{[v.name]:new mW(v)})),{})}}class gW{constructor(i,l){this.feature=i,this.type=i.type,this.properties=i.tags?i.tags:{},this.extent=l,"id"in i&&(typeof i.id=="string"?this.id=parseInt(i.id,10):typeof i.id!="number"||isNaN(i.id)||(this.id=i.id))}loadGeometry(){const i=[],l=this.feature.type===1?[this.feature.geometry]:this.feature.geometry;for(const p of l){const v=[];for(const S of p)v.push(new _(S[0],S[1]));i.push(v)}return i}}const Nv="_geojsonTileLayer";function yW(c,i){i.writeVarintField(15,c.version||1),i.writeStringField(1,c.name||""),i.writeVarintField(5,c.extent||4096);const l={keys:[],values:[],keycache:{},valuecache:{}};for(let S=0;S<c.length;S++)l.feature=c.feature(S),i.writeMessage(2,vW,l);const p=l.keys;for(const S of p)i.writeStringField(3,S);const v=l.values;for(const S of v)i.writeMessage(4,bW,S)}function vW(c,i){if(!c.feature)return;const l=c.feature;l.id!==void 0&&i.writeVarintField(1,l.id),i.writeMessage(2,xW,c),i.writeVarintField(3,l.type),i.writeMessage(4,_W,l)}function xW(c,i){for(const l in c.feature?.properties){let p=c.feature.properties[l],v=c.keycache[l];if(p==null)continue;v===void 0&&(c.keys.push(l),v=c.keys.length-1,c.keycache[l]=v),i.writeVarint(v),typeof p!="string"&&typeof p!="boolean"&&typeof p!="number"&&(p=JSON.stringify(p));const S=typeof p+":"+p;let T=c.valuecache[S];T===void 0&&(c.values.push(p),T=c.values.length-1,c.valuecache[S]=T),i.writeVarint(T)}}function M2(c,i){return(i<<3)+(7&c)}function wN(c){return c<<1^c>>31}function _W(c,i){const l=c.loadGeometry(),p=c.type;let v=0,S=0;for(const T of l){let M=1;p===1&&(M=T.length),i.writeVarint(M2(1,M));const D=p===3?T.length-1:T.length;for(let V=0;V<D;V++){V===1&&p!==1&&i.writeVarint(M2(2,D-1));const G=T[V].x-v,Z=T[V].y-S;i.writeVarint(wN(G)),i.writeVarint(wN(Z)),v+=G,S+=Z}c.type===3&&i.writeVarint(M2(7,1))}}function bW(c,i){const l=typeof c;l==="string"?i.writeStringField(1,c):l==="boolean"?i.writeBooleanField(7,c):l==="number"&&(c%1!=0?i.writeDoubleField(3,c):c<0?i.writeSVarintField(6,c):i.writeVarintField(5,c))}class SN{constructor(i,l){this.tileID=i,this.x=i.canonical.x,this.y=i.canonical.y,this.z=i.canonical.z,this.grid=new Mo(We,16,0),this.grid3D=new Mo(We,16,0),this.featureIndexArray=new be,this.promoteId=l}insert(i,l,p,v,S,T){const M=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,v,S);const D=T?this.grid3D:this.grid;for(let V=0;V<l.length;V++){const G=l[V],Z=[1/0,1/0,-1/0,-1/0];for(let ie=0;ie<G.length;ie++){const se=G[ie];Z[0]=Math.min(Z[0],se.x),Z[1]=Math.min(Z[1],se.y),Z[2]=Math.max(Z[2],se.x),Z[3]=Math.max(Z[3],se.y)}Z[0]<We&&Z[1]<We&&Z[2]>=0&&Z[3]>=0&&D.insert(M,Z[0],Z[1],Z[2],Z[3])}}loadVTLayers(){return this.vtLayers||(this.vtLayers=this.encoding!=="mlt"?new W0(new m(this.rawTileData)).layers:new bN(this.rawTileData).layers,this.sourceLayerCoder=new GI(this.vtLayers?Object.keys(this.vtLayers).sort():[Nv])),this.vtLayers}query(i,l,p,v){this.loadVTLayers();const S=i.params,T=We/i.tileSize/i.scale,M=sn(S.filter,S.globalState),D=i.queryGeometry,V=i.queryPadding*T,G=um.fromPoints(D),Z=this.grid.query(G.minX-V,G.minY-V,G.maxX+V,G.maxY+V),ie=um.fromPoints(i.cameraQueryGeometry).expandBy(V),se=this.grid3D.query(ie.minX,ie.minY,ie.maxX,ie.maxY,((xe,Pe,Le,Se)=>(function(ke,qe,tt,gt,jt){for(const Ft of ke)if(qe<=Ft.x&&tt<=Ft.y&&gt>=Ft.x&&jt>=Ft.y)return!0;const kt=[new _(qe,tt),new _(qe,jt),new _(gt,jt),new _(gt,tt)];if(ke.length>2){for(const Ft of kt)if(Qu(ke,Ft))return!0}for(let Ft=0;Ft<ke.length-1;Ft++)if(ed(ke[Ft],ke[Ft+1],kt))return!0;return!1})(i.cameraQueryGeometry,xe-V,Pe-V,Le+V,Se+V)));for(const xe of se)Z.push(xe);Z.sort(wW);const pe={};let me;for(let xe=0;xe<Z.length;xe++){const Pe=Z[xe];if(Pe===me)continue;me=Pe;const Le=this.featureIndexArray.get(Pe);let Se=null;this.loadMatchingFeature(pe,Le.bucketIndex,Le.sourceLayerIndex,Le.featureIndex,M,S.layers,S.availableImages,l,p,v,((ke,qe,tt)=>(Se||(Se=Ol(ke)),qe.queryIntersectsFeature({queryGeometry:D,feature:ke,featureState:tt,geometry:Se,zoom:this.z,transform:i.transform,pixelsToTileUnits:T,pixelPosMatrix:i.pixelPosMatrix,unwrappedTileID:this.tileID.toUnwrapped(),getElevation:i.getElevation}))))}return pe}loadMatchingFeature(i,l,p,v,S,T,M,D,V,G,Z){const ie=this.bucketLayerIDs[l];if(T&&!ie.some((xe=>T.has(xe))))return;const se=this.sourceLayerCoder.decode(p),pe=this.vtLayers[se].feature(v);if(S.needGeometry){const xe=wc(pe,!0);if(!S.filter(new Lr(this.tileID.overscaledZ),xe,this.tileID.canonical))return}else if(!S.filter(new Lr(this.tileID.overscaledZ),pe))return;const me=this.getId(pe,se);for(let xe=0;xe<ie.length;xe++){const Pe=ie[xe];if(T&&!T.has(Pe))continue;const Le=D[Pe];if(!Le)continue;let Se={};me&&G&&(Se=G.getState(Le.sourceLayer||Nv,me));const ke=Ot({},V[Pe]);ke.paint=TN(ke.paint,Le.paint,pe,Se,M),ke.layout=TN(ke.layout,Le.layout,pe,Se,M);const qe=!Z||Z(pe,Le,Se);if(!qe)continue;const tt=new WI(pe,this.z,this.x,this.y,me);tt.layer=ke;let gt=i[Pe];gt===void 0&&(gt=i[Pe]=[]),gt.push({featureIndex:v,feature:tt,intersectionZ:qe})}}lookupSymbolFeatures(i,l,p,v,S,T,M,D){const V={};this.loadVTLayers();const G=sn(S.filterSpec,S.globalState);for(const Z of i)this.loadMatchingFeature(V,p,v,Z,G,T,M,D,l);return V}hasLayer(i){for(const l of this.bucketLayerIDs)for(const p of l)if(i===p)return!0;return!1}getId(i,l){var p;let v=i.id;return this.promoteId&&(v=i.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[l]],typeof v=="boolean"&&(v=Number(v)),v===void 0&&(!((p=i.properties)===null||p===void 0)&&p.cluster)&&this.promoteId&&(v=Number(i.properties.cluster_id))),v}}function TN(c,i,l,p,v){return zt(c,((S,T)=>{const M=i instanceof Cl?i.get(T):null;return M&&M.evaluate?M.evaluate(l,p,v):M}))}function wW(c,i){return i-c}function PN(c,i,l,p,v){const S=[];for(let T=0;T<c.length;T++){const M=c[T];let D;for(let V=0;V<M.length-1;V++){let G=M[V],Z=M[V+1];G.x<i&&Z.x<i||(G.x<i?G=new _(i,G.y+(i-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x<i&&(Z=new _(i,G.y+(i-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y<l&&Z.y<l||(G.y<l?G=new _(G.x+(l-G.y)/(Z.y-G.y)*(Z.x-G.x),l)._round():Z.y<l&&(Z=new _(G.x+(l-G.y)/(Z.y-G.y)*(Z.x-G.x),l)._round()),G.x>=p&&Z.x>=p||(G.x>=p?G=new _(p,G.y+(p-G.x)/(Z.x-G.x)*(Z.y-G.y))._round():Z.x>=p&&(Z=new _(p,G.y+(p-G.x)/(Z.x-G.x)*(Z.y-G.y))._round()),G.y>=v&&Z.y>=v||(G.y>=v?G=new _(G.x+(v-G.y)/(Z.y-G.y)*(Z.x-G.x),v)._round():Z.y>=v&&(Z=new _(G.x+(v-G.y)/(Z.y-G.y)*(Z.x-G.x),v)._round()),D&&G.equals(D[D.length-1])||(D=[G],S.push(D)),D.push(Z)))))}}return S}function AN(c,i,l,p,v){switch(i){case 1:return(function(S,T,M,D){const V=[];for(const G of S)for(const Z of G){const ie=D===0?Z.x:Z.y;ie>=T&&ie<=M&&V.push([Z])}return V})(c,l,p,v);case 2:return CN(c,l,p,v,!1);case 3:return CN(c,l,p,v,!0)}return[]}function SW(c,i,l,p,v){const S=p===0?TW:PW;let T=[];const M=[];for(let G=0;G<c.length-1;G++){const Z=c[G],ie=c[G+1],se=p===0?Z.x:Z.y,pe=p===0?ie.x:ie.y;let me=!1;se<i?pe>i&&T.push(S(Z,ie,i)):se>l?pe<l&&T.push(S(Z,ie,l)):T.push(Z),pe<i&&se>=i&&(T.push(S(Z,ie,i)),me=!0),pe>l&&se<=l&&(T.push(S(Z,ie,l)),me=!0),!v&&me&&(M.push(T),T=[])}const D=c.length-1,V=p===0?c[D].x:c[D].y;return V>=i&&V<=l&&T.push(c[D]),v&&T.length>0&&!T[0].equals(T[T.length-1])&&T.push(new _(T[0].x,T[0].y)),T.length>0&&M.push(T),M}function CN(c,i,l,p,v){const S=[];for(const T of c){const M=SW(T,i,l,p,v);M.length>0&&S.push(...M)}return S}function TW(c,i,l){return new _(l,c.y+(l-c.x)/(i.x-c.x)*(i.y-c.y))}function PW(c,i,l){return new _(c.x+(l-c.y)/(i.y-c.y)*(i.x-c.x),l)}tn("FeatureIndex",SN,{omit:["rawTileData","sourceLayerCoder"]});class up extends _{constructor(i,l,p,v){super(i,l),this.angle=p,v!==void 0&&(this.segment=v)}clone(){return new up(this.x,this.y,this.angle,this.segment)}}function EN(c,i,l,p,v){if(i.segment===void 0||l===0)return!0;let S=i,T=i.segment+1,M=0;for(;M>-l/2;){if(T--,T<0)return!1;M-=c[T].dist(S),S=c[T]}M+=c[T].dist(c[T+1]),T++;const D=[];let V=0;for(;M<l/2;){const G=c[T],Z=c[T+1];if(!Z)return!1;let ie=c[T-1].angleTo(G)-G.angleTo(Z);for(ie=Math.abs((ie+3*Math.PI)%(2*Math.PI)-Math.PI),D.push({distance:M,angleDelta:ie}),V+=ie;M-D[0].distance>p;)V-=D.shift().angleDelta;if(V>v)return!1;T++,M+=G.dist(Z)}return!0}function jN(c){let i=0;for(let l=0;l<c.length-1;l++)i+=c[l].dist(c[l+1]);return i}function MN(c,i,l){return c?.6*i*l:0}function kN(c,i){return Math.max(c?c.right-c.left:0,i?i.right-i.left:0)}function AW(c,i,l,p,v,S){const T=MN(l,v,S),M=kN(l,p)*S;let D=0;const V=jN(c)/2;for(let G=0;G<c.length-1;G++){const Z=c[G],ie=c[G+1],se=Z.dist(ie);if(D+se>V){const pe=(V-D)/se,me=qr.number(Z.x,ie.x,pe),xe=qr.number(Z.y,ie.y,pe),Pe=new up(me,xe,ie.angleTo(Z),G);return Pe._round(),!T||EN(c,Pe,M,T,i)?Pe:void 0}D+=se}}function CW(c,i,l,p,v,S,T,M,D){const V=MN(p,S,T),G=kN(p,v),Z=G*T,ie=c[0].x===0||c[0].x===D||c[0].y===0||c[0].y===D;return i-Z<i/4&&(i=Z+i/4),IN(c,ie?i/2*M%i:(G/2+2*S)*T*M%i,i,V,l,Z,ie,!1,D)}function IN(c,i,l,p,v,S,T,M,D){const V=S/2,G=jN(c);let Z=0,ie=i-l,se=[];for(let pe=0;pe<c.length-1;pe++){const me=c[pe],xe=c[pe+1],Pe=me.dist(xe),Le=xe.angleTo(me);for(;ie+l<Z+Pe;){ie+=l;const Se=(ie-Z)/Pe,ke=qr.number(me.x,xe.x,Se),qe=qr.number(me.y,xe.y,Se);if(ke>=0&&ke<D&&qe>=0&&qe<D&&ie-V>=0&&ie+V<=G){const tt=new up(ke,qe,Le,pe);tt._round(),p&&!EN(c,tt,S,p,v)||se.push(tt)}}Z+=Pe}return M||se.length||T||(se=IN(c,Z/2,l,p,v,S,T,!0,D)),se}function NN(c,i,l,p){const v=[],S=c.image,T=S.pixelRatio,M=S.paddedRect.w-2,D=S.paddedRect.h-2;let V={x1:c.left,y1:c.top,x2:c.right,y2:c.bottom};const G=S.stretchX||[[0,M]],Z=S.stretchY||[[0,D]],ie=(At,ln)=>At+ln[1]-ln[0],se=G.reduce(ie,0),pe=Z.reduce(ie,0),me=M-se,xe=D-pe;let Pe=0,Le=se,Se=0,ke=pe,qe=0,tt=me,gt=0,jt=xe;if(S.content&&p){const At=S.content,ln=At[2]-At[0],fn=At[3]-At[1];(S.textFitWidth||S.textFitHeight)&&(V=a_(c)),Pe=g_(G,0,At[0]),Se=g_(Z,0,At[1]),Le=g_(G,At[0],At[2]),ke=g_(Z,At[1],At[3]),qe=At[0]-Pe,gt=At[1]-Se,tt=ln-Le,jt=fn-ke}const kt=V.x1,Ft=V.y1,Kt=V.x2-kt,$t=V.y2-Ft,It=(At,ln,fn,An)=>{const mn=y_(At.stretch-Pe,Le,Kt,kt),ar=v_(At.fixed-qe,tt,At.stretch,se),Ai=y_(ln.stretch-Se,ke,$t,Ft),ya=v_(ln.fixed-gt,jt,ln.stretch,pe),Fo=y_(fn.stretch-Pe,Le,Kt,kt),pu=v_(fn.fixed-qe,tt,fn.stretch,se),Ts=y_(An.stretch-Se,ke,$t,Ft),ho=v_(An.fixed-gt,jt,An.stretch,pe),Bo=new _(mn,Ai),Zi=new _(Fo,Ai),fo=new _(Fo,Ts),ts=new _(mn,Ts),ns=new _(ar/T,ya/T),tl=new _(pu/T,ho/T),$o=i*Math.PI/180;if($o){const Wa=Math.sin($o),ji=Math.cos($o),va=[ji,-Wa,Wa,ji];Bo._matMult(va),Zi._matMult(va),ts._matMult(va),fo._matMult(va)}const nl=At.stretch+At.fixed,mu=ln.stretch+ln.fixed;return{tl:Bo,tr:Zi,bl:ts,br:fo,tex:{x:S.paddedRect.x+1+nl,y:S.paddedRect.y+1+mu,w:fn.stretch+fn.fixed-nl,h:An.stretch+An.fixed-mu},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:ns,pixelOffsetBR:tl,minFontScaleX:tt/T/Kt,minFontScaleY:jt/T/$t,isSDF:l}};if(p&&(S.stretchX||S.stretchY)){const At=DN(G,me,se),ln=DN(Z,xe,pe);for(let fn=0;fn<At.length-1;fn++){const An=At[fn],mn=At[fn+1];for(let ar=0;ar<ln.length-1;ar++)v.push(It(An,ln[ar],mn,ln[ar+1]))}}else v.push(It({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:M+1},{fixed:0,stretch:D+1}));return v}function g_(c,i,l){let p=0;for(const v of c)p+=Math.max(i,Math.min(l,v[1]))-Math.max(i,Math.min(l,v[0]));return p}function DN(c,i,l){const p=[{fixed:-1,stretch:0}];for(const[v,S]of c){const T=p[p.length-1];p.push({fixed:v-T.stretch,stretch:T.stretch}),p.push({fixed:v-T.stretch,stretch:T.stretch+(S-v)})}return p.push({fixed:i+1,stretch:l}),p}function y_(c,i,l,p){return c/i*l+p}function v_(c,i,l,p){return c-i*l/p}tn("Anchor",up);class x_{constructor(i,l,p,v,S,T,M,D,V,G){var Z;if(this.boxStartIndex=i.length,V){let ie=T.top,se=T.bottom;const pe=T.collisionPadding;pe&&(ie-=pe[1],se+=pe[3]);let me=se-ie;me>0&&(me=Math.max(10,me),this.circleDiameter=me)}else{const ie=!((Z=T.image)===null||Z===void 0)&&Z.content&&(T.image.textFitWidth||T.image.textFitHeight)?a_(T):{x1:T.left,y1:T.top,x2:T.right,y2:T.bottom};ie.y1=ie.y1*M-D[0],ie.y2=ie.y2*M+D[2],ie.x1=ie.x1*M-D[3],ie.x2=ie.x2*M+D[1];const se=T.collisionPadding;if(se&&(ie.x1-=se[0]*M,ie.y1-=se[1]*M,ie.x2+=se[2]*M,ie.y2+=se[3]*M),G){const pe=new _(ie.x1,ie.y1),me=new _(ie.x2,ie.y1),xe=new _(ie.x1,ie.y2),Pe=new _(ie.x2,ie.y2),Le=G*Math.PI/180;pe._rotate(Le),me._rotate(Le),xe._rotate(Le),Pe._rotate(Le),ie.x1=Math.min(pe.x,me.x,xe.x,Pe.x),ie.x2=Math.max(pe.x,me.x,xe.x,Pe.x),ie.y1=Math.min(pe.y,me.y,xe.y,Pe.y),ie.y2=Math.max(pe.y,me.y,xe.y,Pe.y)}i.emplaceBack(l.x,l.y,ie.x1,ie.y1,ie.x2,ie.y2,p,v,S)}this.boxEndIndex=i.length}}class EW{constructor(i=[],l=(p,v)=>p<v?-1:p>v?1:0){if(this.data=i,this.length=this.data.length,this.compare=l,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(i){this.data.push(i),this._up(this.length++)}pop(){if(this.length===0)return;const i=this.data[0],l=this.data.pop();return--this.length>0&&(this.data[0]=l,this._down(0)),i}peek(){return this.data[0]}_up(i){const{data:l,compare:p}=this,v=l[i];for(;i>0;){const S=i-1>>1,T=l[S];if(p(v,T)>=0)break;l[i]=T,i=S}l[i]=v}_down(i){const{data:l,compare:p}=this,v=this.length>>1,S=l[i];for(;i<v;){let T=1+(i<<1);const M=T+1;if(M<this.length&&p(l[M],l[T])<0&&(T=M),p(l[T],S)>=0)break;l[i]=l[T],i=T}l[i]=S}}function jW(c,i=1,l=!1){const p=um.fromPoints(c[0]),v=Math.min(p.width(),p.height());let S=v/2;const T=new EW([],MW),{minX:M,minY:D,maxX:V,maxY:G}=p;if(v===0)return new _(M,D);for(let se=M;se<V;se+=v)for(let pe=D;pe<G;pe+=v)T.push(new kg(se+S,pe+S,S,c));let Z=(function(se){let pe=0,me=0,xe=0;const Pe=se[0];for(let Le=0,Se=Pe.length,ke=Se-1;Le<Se;ke=Le++){const qe=Pe[Le],tt=Pe[ke],gt=qe.x*tt.y-tt.x*qe.y;me+=(qe.x+tt.x)*gt,xe+=(qe.y+tt.y)*gt,pe+=3*gt}return new kg(me/pe,xe/pe,0,se)})(c),ie=T.length;for(;T.length;){const se=T.pop();(se.d>Z.d||!Z.d)&&(Z=se,l&&console.log("found best %d after %d probes",Math.round(1e4*se.d)/1e4,ie)),se.max-Z.d<=i||(S=se.h/2,T.push(new kg(se.p.x-S,se.p.y-S,S,c)),T.push(new kg(se.p.x+S,se.p.y-S,S,c)),T.push(new kg(se.p.x-S,se.p.y+S,S,c)),T.push(new kg(se.p.x+S,se.p.y+S,S,c)),ie+=4)}return l&&(console.log(`num probes: ${ie}`),console.log(`best distance: ${Z.d}`)),Z.p}function MW(c,i){return i.max-c.max}function kg(c,i,l,p){this.p=new _(c,i),this.h=l,this.d=(function(v,S){let T=!1,M=1/0;for(let D=0;D<S.length;D++){const V=S[D];for(let G=0,Z=V.length,ie=Z-1;G<Z;ie=G++){const se=V[G],pe=V[ie];se.y>v.y!=pe.y>v.y&&v.x<(pe.x-se.x)*(v.y-se.y)/(pe.y-se.y)+se.x&&(T=!T),M=Math.min(M,dg(v,se,pe))}}return(T?1:-1)*Math.sqrt(M)})(this.p,p),this.max=this.d+this.h*Math.SQRT2}var zo;d.aP=void 0,(zo=d.aP||(d.aP={}))[zo.center=1]="center",zo[zo.left=2]="left",zo[zo.right=3]="right",zo[zo.top=4]="top",zo[zo.bottom=5]="bottom",zo[zo["top-left"]=6]="top-left",zo[zo["top-right"]=7]="top-right",zo[zo["bottom-left"]=8]="bottom-left",zo[zo["bottom-right"]=9]="bottom-right";const k2=Number.POSITIVE_INFINITY;function ON(c,i){return i[1]!==k2?(function(l,p,v){let S=0,T=0;switch(p=Math.abs(p),v=Math.abs(v),l){case"top-right":case"top-left":case"top":T=v-7;break;case"bottom-right":case"bottom-left":case"bottom":T=7-v}switch(l){case"top-right":case"bottom-right":case"right":S=-p;break;case"top-left":case"bottom-left":case"left":S=p}return[S,T]})(c,i[0],i[1]):(function(l,p){let v=0,S=0;p<0&&(p=0);const T=p/Math.SQRT2;switch(l){case"top-right":case"top-left":S=T-7;break;case"bottom-right":case"bottom-left":S=7-T;break;case"bottom":S=7-p;break;case"top":S=p-7}switch(l){case"top-right":case"bottom-right":v=-T;break;case"top-left":case"bottom-left":v=T;break;case"left":v=p;break;case"right":v=-p}return[v,S]})(c,i[0])}function RN(c,i,l){var p;const v=c.layout,S=(p=v.get("text-variable-anchor-offset"))===null||p===void 0?void 0:p.evaluate(i,{},l);if(S){const M=S.values,D=[];for(let V=0;V<M.length;V+=2){const G=D[V]=M[V],Z=M[V+1].map((ie=>ie*ga));G.startsWith("top")?Z[1]-=7:G.startsWith("bottom")&&(Z[1]+=7),D[V+1]=Z}return new Ji(D)}const T=v.get("text-variable-anchor");if(T){let M;M=c._unevaluatedLayout.getValue("text-radial-offset")!==void 0?[v.get("text-radial-offset").evaluate(i,{},l)*ga,k2]:v.get("text-offset").evaluate(i,{},l).map((V=>V*ga));const D=[];for(const V of T)D.push(V,ON(V,M));return new Ji(D)}return null}function I2(c){switch(c){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function kW(c,i,l,p,v,S,T,M,D,V,G,Z){let ie=S.textMaxSize.evaluate(i,{});ie===void 0&&(ie=T);const se=c.layers[0].layout,pe=se.get("icon-offset").evaluate(i,{},G),me=zN(l.horizontal),xe=T/24,Pe=c.tilePixelRatio*xe,Le=c.tilePixelRatio*ie/24,Se=c.tilePixelRatio*M,ke=c.tilePixelRatio*se.get("symbol-spacing"),qe=se.get("text-padding")*c.tilePixelRatio,tt=(function(fn,An,mn,ar=1){const Ai=fn.get("icon-padding").evaluate(An,{},mn),ya=Ai&&Ai.values;return[ya[0]*ar,ya[1]*ar,ya[2]*ar,ya[3]*ar]})(se,i,G,c.tilePixelRatio),gt=se.get("text-max-angle")/180*Math.PI,jt=se.get("text-rotation-alignment")!=="viewport"&&se.get("symbol-placement")!=="point",kt=se.get("icon-rotation-alignment")==="map"&&se.get("symbol-placement")!=="point",Ft=se.get("symbol-placement"),Kt=ke/2,$t=se.get("icon-text-fit");let It;p&&$t!=="none"&&(c.allowVerticalPlacement&&l.vertical&&(It=jI(p,l.vertical,$t,se.get("icon-text-fit-padding"),pe,xe)),me&&(p=jI(p,me,$t,se.get("icon-text-fit-padding"),pe,xe)));const At=G?Z.line.getGranularityForZoomLevel(G.z):1,ln=(fn,An)=>{An.x<0||An.x>=We||An.y<0||An.y>=We||(function(mn,ar,Ai,ya,Fo,pu,Ts,ho,Bo,Zi,fo,ts,ns,tl,$o,nl,mu,Wa,ji,va,Fi,Ha,Qh,sd,Rv){const dp=mn.addToLineVertexArray(ar,Ai);let hm,Ig,Ng,Dg,VN=0,UN=0,qN=0,GN=0,B2=-1,$2=-1;const ef={};let WN=Ar("");if(mn.allowVerticalPlacement&&ya.vertical){const rs=ho.layout.get("text-rotate").evaluate(Fi,{},sd)+90;Ng=new x_(Bo,ar,Zi,fo,ts,ya.vertical,ns,tl,$o,rs),Ts&&(Dg=new x_(Bo,ar,Zi,fo,ts,Ts,mu,Wa,$o,rs))}if(Fo){const rs=ho.layout.get("icon-rotate").evaluate(Fi,{}),jc=ho.layout.get("icon-text-fit")!=="none",fm=NN(Fo,rs,Qh,jc),cd=Ts?NN(Ts,rs,Qh,jc):void 0;Ig=new x_(Bo,ar,Zi,fo,ts,Fo,mu,Wa,!1,rs),VN=4*fm.length;const pm=mn.iconSizeData;let nh=null;pm.kind==="source"?(nh=[Jh*ho.layout.get("icon-size").evaluate(Fi,{})],nh[0]>op&&cn(`${mn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)):pm.kind==="composite"&&(nh=[Jh*Ha.compositeIconSizes[0].evaluate(Fi,{},sd),Jh*Ha.compositeIconSizes[1].evaluate(Fi,{},sd)],(nh[0]>op||nh[1]>op)&&cn(`${mn.layerIds[0]}: Value for "icon-size" is >= 255. Reduce your "icon-size".`)),mn.addSymbols(mn.icon,fm,nh,va,ji,Fi,d.az.none,ar,dp.lineStartIndex,dp.lineLength,-1,sd),B2=mn.icon.placedSymbolArray.length-1,cd&&(UN=4*cd.length,mn.addSymbols(mn.icon,cd,nh,va,ji,Fi,d.az.vertical,ar,dp.lineStartIndex,dp.lineLength,-1,sd),$2=mn.icon.placedSymbolArray.length-1)}const HN=Object.keys(ya.horizontal);for(const rs of HN){const jc=ya.horizontal[rs];if(!hm){WN=Ar(jc.text);const cd=ho.layout.get("text-rotate").evaluate(Fi,{},sd);hm=new x_(Bo,ar,Zi,fo,ts,jc,ns,tl,$o,cd)}const fm=jc.positionedLines.length===1;if(qN+=LN(mn,ar,jc,pu,ho,$o,Fi,nl,dp,ya.vertical?d.az.horizontal:d.az.horizontalOnly,fm?HN:[rs],ef,B2,Ha,sd),fm)break}ya.vertical&&(GN+=LN(mn,ar,ya.vertical,pu,ho,$o,Fi,nl,dp,d.az.vertical,["vertical"],ef,$2,Ha,sd));const DW=hm?hm.boxStartIndex:mn.collisionBoxArray.length,OW=hm?hm.boxEndIndex:mn.collisionBoxArray.length,RW=Ng?Ng.boxStartIndex:mn.collisionBoxArray.length,LW=Ng?Ng.boxEndIndex:mn.collisionBoxArray.length,zW=Ig?Ig.boxStartIndex:mn.collisionBoxArray.length,FW=Ig?Ig.boxEndIndex:mn.collisionBoxArray.length,BW=Dg?Dg.boxStartIndex:mn.collisionBoxArray.length,$W=Dg?Dg.boxEndIndex:mn.collisionBoxArray.length;let ld=-1;const b_=(rs,jc)=>rs&&rs.circleDiameter?Math.max(rs.circleDiameter,jc):jc;ld=b_(hm,ld),ld=b_(Ng,ld),ld=b_(Ig,ld),ld=b_(Dg,ld);const ZN=ld>-1?1:0;ZN&&(ld*=Rv/ga),mn.glyphOffsetArray.length>=Pg.MAX_GLYPHS&&cn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fi.sortKey!==void 0&&mn.addToSortKeyRanges(mn.symbolInstances.length,Fi.sortKey);const VW=RN(ho,Fi,sd),[UW,qW]=(function(rs,jc){const fm=rs.length,cd=jc?.values;if(cd?.length>0)for(let pm=0;pm<cd.length;pm+=2){const nh=cd[pm+1];rs.emplaceBack(d.aP[cd[pm]],nh[0],nh[1])}return[fm,rs.length]})(mn.textAnchorOffsets,VW);mn.symbolInstances.emplaceBack(ar.x,ar.y,ef.right>=0?ef.right:-1,ef.center>=0?ef.center:-1,ef.left>=0?ef.left:-1,ef.vertical||-1,B2,$2,WN,DW,OW,RW,LW,zW,FW,BW,$W,Zi,qN,GN,VN,UN,ZN,0,ns,ld,UW,qW)})(c,An,fn,l,p,v,It,c.layers[0],c.collisionBoxArray,i.index,i.sourceLayerIndex,c.index,Pe,[qe,qe,qe,qe],jt,D,Se,tt,kt,pe,i,S,V,G,T)};if(Ft==="line")for(const fn of PN(i.geometry,0,0,We,We)){const An=bs(fn,At),mn=CW(An,ke,gt,l.vertical||me,p,24,Le,c.overscaling,We);for(const ar of mn)me&&IW(c,me.text,Kt,ar)||ln(An,ar)}else if(Ft==="line-center"){for(const fn of i.geometry)if(fn.length>1){const An=bs(fn,At),mn=AW(An,gt,l.vertical||me,p,24,Le);mn&&ln(An,mn)}}else if(i.type==="Polygon")for(const fn of nc(i.geometry,0)){const An=jW(fn,16);ln(bs(fn[0],At,!0),new up(An.x,An.y,0))}else if(i.type==="LineString")for(const fn of i.geometry){const An=bs(fn,At);ln(An,new up(An[0].x,An[0].y,0))}else if(i.type==="Point")for(const fn of i.geometry)for(const An of fn)ln([An],new up(An.x,An.y,0))}function LN(c,i,l,p,v,S,T,M,D,V,G,Z,ie,se,pe){const me=(function(Le,Se,ke,qe,tt,gt,jt,kt){const Ft=qe.layout.get("text-rotate").evaluate(gt,{})*Math.PI/180,Kt=[];for(const $t of Se.positionedLines)for(const It of $t.positionedGlyphs){if(!It.rect)continue;const At=It.rect||{};let ln=4,fn=!0,An=1,mn=0;const ar=(tt||kt)&&It.vertical,Ai=It.metrics.advance*It.scale/2;if(kt&&Se.verticalizable&&(mn=$t.lineOffset/2-(It.imageName?-(ga-It.metrics.width*It.scale)/2:(It.scale-1)*ga)),It.imageName){const Wa=jt[It.imageName];fn=Wa.sdf,An=Wa.pixelRatio,ln=1/An}const ya=tt?[It.x+Ai,It.y]:[0,0];let Fo=tt?[0,0]:[It.x+Ai+ke[0],It.y+ke[1]-mn],pu=[0,0];ar&&(pu=Fo,Fo=[0,0]);const Ts=It.metrics.isDoubleResolution?2:1,ho=(It.metrics.left-ln)*It.scale-Ai+Fo[0],Bo=(-It.metrics.top-ln)*It.scale+Fo[1],Zi=ho+At.w/Ts*It.scale/An,fo=Bo+At.h/Ts*It.scale/An,ts=new _(ho,Bo),ns=new _(Zi,Bo),tl=new _(ho,fo),$o=new _(Zi,fo);if(ar){const Wa=new _(-Ai,Ai- -17),ji=-Math.PI/2,va=12-Ai,Fi=new _(22-va,-(It.imageName?va:0)),Ha=new _(...pu);ts._rotateAround(ji,Wa)._add(Fi)._add(Ha),ns._rotateAround(ji,Wa)._add(Fi)._add(Ha),tl._rotateAround(ji,Wa)._add(Fi)._add(Ha),$o._rotateAround(ji,Wa)._add(Fi)._add(Ha)}if(Ft){const Wa=Math.sin(Ft),ji=Math.cos(Ft),va=[ji,-Wa,Wa,ji];ts._matMult(va),ns._matMult(va),tl._matMult(va),$o._matMult(va)}const nl=new _(0,0),mu=new _(0,0);Kt.push({tl:ts,tr:ns,bl:tl,br:$o,tex:At,writingMode:Se.writingMode,glyphOffset:ya,sectionIndex:It.sectionIndex,isSDF:fn,pixelOffsetTL:nl,pixelOffsetBR:mu,minFontScaleX:0,minFontScaleY:0})}return Kt})(0,l,M,v,S,T,p,c.allowVerticalPlacement),xe=c.textSizeData;let Pe=null;xe.kind==="source"?(Pe=[Jh*v.layout.get("text-size").evaluate(T,{})],Pe[0]>op&&cn(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)):xe.kind==="composite"&&(Pe=[Jh*se.compositeTextSizes[0].evaluate(T,{},pe),Jh*se.compositeTextSizes[1].evaluate(T,{},pe)],(Pe[0]>op||Pe[1]>op)&&cn(`${c.layerIds[0]}: Value for "text-size" is >= 255. Reduce your "text-size".`)),c.addSymbols(c.text,me,Pe,M,S,T,V,i,D.lineStartIndex,D.lineLength,ie,pe);for(const Le of G)Z[Le]=c.text.placedSymbolArray.length-1;return 4*me.length}function zN(c){for(const i in c)return c[i];return null}function IW(c,i,l,p){const v=c.compareText;if(i in v){const S=v[i];for(let T=S.length-1;T>=0;T--)if(p.dist(S[T])<l)return!0}else v[i]=[];return v[i].push(p),!1}const FN=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class N2{static from(i){if(!(i instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[l,p]=new Uint8Array(i,0,2);if(l!==219)throw new Error("Data does not appear to be in a KDBush format.");const v=p>>4;if(v!==1)throw new Error(`Got v${v} data when expected v1.`);const S=FN[15&p];if(!S)throw new Error("Unrecognized array type.");const[T]=new Uint16Array(i,2,1),[M]=new Uint32Array(i,4,1);return new N2(M,T,S,i)}constructor(i,l=64,p=Float64Array,v){if(isNaN(i)||i<0)throw new Error(`Unpexpected numItems value: ${i}.`);this.numItems=+i,this.nodeSize=Math.min(Math.max(+l,2),65535),this.ArrayType=p,this.IndexArrayType=i<65536?Uint16Array:Uint32Array;const S=FN.indexOf(this.ArrayType),T=2*i*this.ArrayType.BYTES_PER_ELEMENT,M=i*this.IndexArrayType.BYTES_PER_ELEMENT,D=(8-M%8)%8;if(S<0)throw new Error(`Unexpected typed array class: ${p}.`);v&&v instanceof ArrayBuffer?(this.data=v,this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+M+D,2*i),this._pos=2*i,this._finished=!0):(this.data=new ArrayBuffer(8+T+M+D),this.ids=new this.IndexArrayType(this.data,8,i),this.coords=new this.ArrayType(this.data,8+M+D,2*i),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+S]),new Uint16Array(this.data,2,1)[0]=l,new Uint32Array(this.data,4,1)[0]=i)}add(i,l){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=i,this.coords[this._pos++]=l,p}finish(){const i=this._pos>>1;if(i!==this.numItems)throw new Error(`Added ${i} items when expected ${this.numItems}.`);return D2(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(i,l,p,v){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:S,coords:T,nodeSize:M}=this,D=[0,S.length-1,0],V=[];for(;D.length;){const G=D.pop()||0,Z=D.pop()||0,ie=D.pop()||0;if(Z-ie<=M){for(let xe=ie;xe<=Z;xe++){const Pe=T[2*xe],Le=T[2*xe+1];Pe>=i&&Pe<=p&&Le>=l&&Le<=v&&V.push(S[xe])}continue}const se=ie+Z>>1,pe=T[2*se],me=T[2*se+1];pe>=i&&pe<=p&&me>=l&&me<=v&&V.push(S[se]),(G===0?i<=pe:l<=me)&&(D.push(ie),D.push(se-1),D.push(1-G)),(G===0?p>=pe:v>=me)&&(D.push(se+1),D.push(Z),D.push(1-G))}return V}within(i,l,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:v,coords:S,nodeSize:T}=this,M=[0,v.length-1,0],D=[],V=p*p;for(;M.length;){const G=M.pop()||0,Z=M.pop()||0,ie=M.pop()||0;if(Z-ie<=T){for(let xe=ie;xe<=Z;xe++)$N(S[2*xe],S[2*xe+1],i,l)<=V&&D.push(v[xe]);continue}const se=ie+Z>>1,pe=S[2*se],me=S[2*se+1];$N(pe,me,i,l)<=V&&D.push(v[se]),(G===0?i-p<=pe:l-p<=me)&&(M.push(ie),M.push(se-1),M.push(1-G)),(G===0?i+p>=pe:l+p>=me)&&(M.push(se+1),M.push(Z),M.push(1-G))}return D}}function D2(c,i,l,p,v,S){if(v-p<=l)return;const T=p+v>>1;BN(c,i,T,p,v,S),D2(c,i,l,p,T-1,1-S),D2(c,i,l,T+1,v,1-S)}function BN(c,i,l,p,v,S){for(;v>p;){if(v-p>600){const V=v-p+1,G=l-p+1,Z=Math.log(V),ie=.5*Math.exp(2*Z/3),se=.5*Math.sqrt(Z*ie*(V-ie)/V)*(G-V/2<0?-1:1);BN(c,i,l,Math.max(p,Math.floor(l-G*ie/V+se)),Math.min(v,Math.floor(l+(V-G)*ie/V+se)),S)}const T=i[2*l+S];let M=p,D=v;for(Dv(c,i,p,l),i[2*v+S]>T&&Dv(c,i,p,v);M<D;){for(Dv(c,i,M,D),M++,D--;i[2*M+S]<T;)M++;for(;i[2*D+S]>T;)D--}i[2*p+S]===T?Dv(c,i,p,D):(D++,Dv(c,i,D,v)),D<=l&&(p=D+1),l<=D&&(v=D-1)}}function Dv(c,i,l,p){O2(c,l,p),O2(i,2*l,2*p),O2(i,2*l+1,2*p+1)}function O2(c,i,l){const p=c[i];c[i]=c[l],c[l]=p}function $N(c,i,l,p){const v=c-l,S=i-p;return v*v+S*S}var R2;d.cI=void 0,(R2=d.cI||(d.cI={})).create="create",R2.load="load",R2.fullLoad="fullLoad";let __=null,Ov=[];const L2=1e3/60,z2="loadTime",F2="fullLoadTime",NW={mark(c){performance.mark(c)},recordStartOfFrameAt(c){__!=null&&Ov.push(c-__),__=c},resetRuntimeMetrics(){__=null,Ov=[]},clearInitializationMetrics(){performance.clearMeasures(z2),performance.clearMeasures(F2);for(const c in d.cI)performance.clearMarks(d.cI[c])},remove(){this.resetRuntimeMetrics(),this.clearInitializationMetrics()},getPerformanceMetrics(){performance.measure(z2,d.cI.create,d.cI.load),performance.measure(F2,d.cI.create,d.cI.fullLoad);const c=performance.getEntriesByName(z2)[0].duration,i=performance.getEntriesByName(F2)[0].duration,l=Ov.length;return{loadTimeMs:c,fullLoadTimeMs:i,averageFramesPerSecond:1/(Ov.reduce(((p,v)=>p+v),0)/l/1e3),virtualDroppedFramesCount:Ov.filter((p=>p>L2)).reduce(((p,v)=>p+(v-L2)/L2),0),totalFramesCount:l}}};d.$=O,d.A=te,d.B=ys,d.C=Ti,d.D=an,d.E=St,d.F=function([c,i,l]){return i+=90,i*=Math.PI/180,l*=Math.PI/180,{x:c*Math.cos(i)*Math.sin(l),y:c*Math.sin(i)*Math.sin(l),z:c*Math.cos(l)}},d.G=qr,d.H=Lr,d.I=Li,d.J=zh,d.K=function(c){if(Mn==null){const i=c.navigator?c.navigator.userAgent:null;Mn=!!c.safari||!(!i||!(/\b(iPad|iPhone|iPod)\b/.test(i)||i.match("Safari")&&!i.match("Chrome")))}return Mn},d.L=class{constructor(c,i){this.target=c,this.mapId=i,this.resolveRejects={},this.tasks={},this.taskQueue=[],this.abortControllers={},this.messageHandlers={},this.invoker=new ZG((()=>this.process())),this.subscription=ri(this.target,"message",(l=>this.receive(l)),!1),this.globalScope=Gn(self)?c:window}registerMessageHandler(c,i){this.messageHandlers[c]=i}unregisterMessageHandler(c){delete this.messageHandlers[c]}sendAsync(c,i){return new Promise(((l,p)=>{const v=Math.round(1e18*Math.random()).toString(36).substring(0,10),S=i?ri(i.signal,"abort",(()=>{S?.unsubscribe(),delete this.resolveRejects[v];const D={id:v,type:"<cancel>",origin:location.origin,targetMapId:c.targetMapId,sourceMapId:this.mapId};this.target.postMessage(D)}),KG):null;this.resolveRejects[v]={resolve:D=>{S?.unsubscribe(),l(D)},reject:D=>{S?.unsubscribe(),p(D)}};const T=[],M=Object.assign(Object.assign({},c),{id:v,sourceMapId:this.mapId,origin:location.origin,data:Ma(c.data,T)});this.target.postMessage(M,{transfer:T})}))}receive(c){const i=c.data,l=i.id;if(!(i.origin!=="file://"&&location.origin!=="file://"&&i.origin!=="resource://android"&&location.origin!=="resource://android"&&i.origin!==location.origin||i.targetMapId&&this.mapId!==i.targetMapId)){if(i.type==="<cancel>"){delete this.tasks[l];const p=this.abortControllers[l];return delete this.abortControllers[l],void(p&&p.abort())}if(Gn(self)||i.mustQueue)return this.tasks[l]=i,this.taskQueue.push(l),void this.invoker.trigger();this.processTask(l,i)}}process(){if(this.taskQueue.length===0)return;const c=this.taskQueue.shift(),i=this.tasks[c];delete this.tasks[c],this.taskQueue.length>0&&this.invoker.trigger(),i&&this.processTask(c,i)}processTask(c,i){return o(this,void 0,void 0,(function*(){if(i.type==="<response>"){const v=this.resolveRejects[c];return delete this.resolveRejects[c],v?void(i.error?v.reject(ka(i.error)):v.resolve(ka(i.data))):void 0}if(!this.messageHandlers[i.type])return void this.completeTask(c,new Error(`Could not find a registered handler for ${i.type}, map ID: ${this.mapId}, available handlers: ${Object.keys(this.messageHandlers).join(", ")}`));const l=ka(i.data),p=new AbortController;this.abortControllers[c]=p;try{const v=yield this.messageHandlers[i.type](i.sourceMapId,l,p);this.completeTask(c,null,v)}catch(v){this.completeTask(c,v)}}))}completeTask(c,i,l){const p=[];delete this.abortControllers[c];const v={id:c,type:"<response>",sourceMapId:this.mapId,origin:location.origin,error:i?Ma(i):null,data:Ma(l,p)};this.target.postMessage(v,{transfer:p})}remove(){this.invoker.remove(),this.subscription.unsubscribe()}},d.M=ue,d.N=function(){var c=new te(16);return te!=Float32Array&&(c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=0,c[12]=0,c[13]=0,c[14]=0),c[0]=1,c[5]=1,c[10]=1,c[15]=1,c},d.O=function(c,i,l){var p,v,S,T,M,D,V,G,Z,ie,se,pe,me=l[0],xe=l[1],Pe=l[2];return i===c?(c[12]=i[0]*me+i[4]*xe+i[8]*Pe+i[12],c[13]=i[1]*me+i[5]*xe+i[9]*Pe+i[13],c[14]=i[2]*me+i[6]*xe+i[10]*Pe+i[14],c[15]=i[3]*me+i[7]*xe+i[11]*Pe+i[15]):(v=i[1],S=i[2],T=i[3],M=i[4],D=i[5],V=i[6],G=i[7],Z=i[8],ie=i[9],se=i[10],pe=i[11],c[0]=p=i[0],c[1]=v,c[2]=S,c[3]=T,c[4]=M,c[5]=D,c[6]=V,c[7]=G,c[8]=Z,c[9]=ie,c[10]=se,c[11]=pe,c[12]=p*me+M*xe+Z*Pe+i[12],c[13]=v*me+D*xe+ie*Pe+i[13],c[14]=S*me+V*xe+se*Pe+i[14],c[15]=T*me+G*xe+pe*Pe+i[15]),c},d.P=_,d.Q=function(c,i,l){var p=l[0],v=l[1],S=l[2];return c[0]=i[0]*p,c[1]=i[1]*p,c[2]=i[2]*p,c[3]=i[3]*p,c[4]=i[4]*v,c[5]=i[5]*v,c[6]=i[6]*v,c[7]=i[7]*v,c[8]=i[8]*S,c[9]=i[9]*S,c[10]=i[10]*S,c[11]=i[11]*S,c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c},d.R=Oo,d.S=function(c,i,l){var p=i[0],v=i[1],S=i[2],T=i[3],M=i[4],D=i[5],V=i[6],G=i[7],Z=i[8],ie=i[9],se=i[10],pe=i[11],me=i[12],xe=i[13],Pe=i[14],Le=i[15],Se=l[0],ke=l[1],qe=l[2],tt=l[3];return c[0]=Se*p+ke*M+qe*Z+tt*me,c[1]=Se*v+ke*D+qe*ie+tt*xe,c[2]=Se*S+ke*V+qe*se+tt*Pe,c[3]=Se*T+ke*G+qe*pe+tt*Le,c[4]=(Se=l[4])*p+(ke=l[5])*M+(qe=l[6])*Z+(tt=l[7])*me,c[5]=Se*v+ke*D+qe*ie+tt*xe,c[6]=Se*S+ke*V+qe*se+tt*Pe,c[7]=Se*T+ke*G+qe*pe+tt*Le,c[8]=(Se=l[8])*p+(ke=l[9])*M+(qe=l[10])*Z+(tt=l[11])*me,c[9]=Se*v+ke*D+qe*ie+tt*xe,c[10]=Se*S+ke*V+qe*se+tt*Pe,c[11]=Se*T+ke*G+qe*pe+tt*Le,c[12]=(Se=l[12])*p+(ke=l[13])*M+(qe=l[14])*Z+(tt=l[15])*me,c[13]=Se*v+ke*D+qe*ie+tt*xe,c[14]=Se*S+ke*V+qe*se+tt*Pe,c[15]=Se*T+ke*G+qe*pe+tt*Le,c},d.T=Qs,d.U=function(c,i){const l={};for(let p=0;p<i.length;p++){const v=i[p];v in c&&(l[v]=c[v])}return l},d.V=sp,d.W=Tt,d.X=zI,d.Y=LI,d.Z=gi,d._=o,d.a=Ya,d.a$=_e,d.a0=X,d.a1=xi,d.a2=Fl,d.a3=BI,d.a4=l_,d.a5=We,d.a6=function(c,i,l){if(!c)return i||{};if(!i)return c||{};const p=qI(c),v=qI(i);(function(T,M){M.removeAll&&(T.add.clear(),T.update.clear(),T.remove.clear(),M.remove.clear());for(const D of M.remove)T.add.delete(D),T.update.delete(D);for(const[D,V]of M.update){const G=T.update.get(D);G&&(M.update.set(D,XG(G,V)),T.update.delete(D))}})(p,v);const S={};if((p.removeAll||v.removeAll)&&(S.removeAll=!0),S.remove=new Set([...p.remove,...v.remove]),S.add=new Map([...p.add,...v.add]),S.update=new Map([...p.update,...v.update]),S.remove.size&&S.add.size)for(const T of S.add.keys())S.remove.delete(T);return(function(T){const M={};return T.removeAll&&(M.removeAll=T.removeAll),T.remove&&(M.remove=Array.from(T.remove)),T.add&&(M.add=Array.from(T.add.values())),T.update&&(M.update=Array.from(T.update.values())),M})(S)},d.a7=function(c,i){const l=new Map;if(c==null||c.type==null)return l;if(c.type==="Feature"){const p=p2(c,i);return p==null?void 0:(l.set(p,c),l)}if(c.type==="FeatureCollection"){const p=new Set;for(const v of c.features){const S=p2(v,i);if(S==null||p.has(S))return;p.add(S),l.set(S,v)}return l}},d.a8=function(c,i,l){var p,v;const S=[];if(i.removeAll)c.clear();else if(i.remove)for(const T of i.remove){const M=c.get(T);M&&(S.push(M.geometry),c.delete(T))}if(i.add)for(const T of i.add){const M=p2(T,l);if(M==null)continue;const D=c.get(M);D&&S.push(D.geometry),S.push(T.geometry),c.set(M,T)}if(i.update)for(const T of i.update){const M=c.get(T.id);if(!M)continue;const D=!!T.newGeometry,V=T.removeAllProperties||((p=T.removeProperties)===null||p===void 0?void 0:p.length)>0||((v=T.addOrUpdateProperties)===null||v===void 0?void 0:v.length)>0;if(!D&&!V)continue;S.push(M.geometry);const G=Object.assign({},M);if(c.set(T.id,G),D&&(S.push(T.newGeometry),G.geometry=T.newGeometry),V){if(G.properties=T.removeAllProperties?{}:Object.assign({},G.properties||{}),T.removeProperties)for(const Z of T.removeProperties)delete G.properties[Z];if(T.addOrUpdateProperties)for(const{key:Z,value:ie}of T.addOrUpdateProperties)G.properties[Z]=ie}}return S},d.a9=Mv,d.aA=function(c,{uSize:i,uSizeT:l},{lowerSize:p,upperSize:v}){return c.kind==="source"?p/Jh:c.kind==="composite"?qr.number(p/Jh,v/Jh,l):i},d.aB=function(c,i){var l=i[0],p=i[1],v=i[2],S=i[3],T=i[4],M=i[5],D=i[6],V=i[7],G=i[8],Z=i[9],ie=i[10],se=i[11],pe=i[12],me=i[13],xe=i[14],Pe=i[15],Le=l*M-p*T,Se=l*D-v*T,ke=l*V-S*T,qe=p*D-v*M,tt=p*V-S*M,gt=v*V-S*D,jt=G*me-Z*pe,kt=G*xe-ie*pe,Ft=G*Pe-se*pe,Kt=Z*xe-ie*me,$t=Z*Pe-se*me,It=ie*Pe-se*xe,At=Le*It-Se*$t+ke*Kt+qe*Ft-tt*kt+gt*jt;return At?(c[0]=(M*It-D*$t+V*Kt)*(At=1/At),c[1]=(v*$t-p*It-S*Kt)*At,c[2]=(me*gt-xe*tt+Pe*qe)*At,c[3]=(ie*tt-Z*gt-se*qe)*At,c[4]=(D*Ft-T*It-V*kt)*At,c[5]=(l*It-v*Ft+S*kt)*At,c[6]=(xe*ke-pe*gt-Pe*Se)*At,c[7]=(G*gt-ie*ke+se*Se)*At,c[8]=(T*$t-M*Ft+V*jt)*At,c[9]=(p*Ft-l*$t-S*jt)*At,c[10]=(pe*tt-me*ke+Pe*Le)*At,c[11]=(Z*ke-G*tt-se*Le)*At,c[12]=(M*kt-T*Kt-D*jt)*At,c[13]=(l*Kt-p*kt+v*jt)*At,c[14]=(me*Se-pe*qe-xe*Le)*At,c[15]=(G*qe-Z*Se+ie*Le)*At,c):null},d.aC=et,d.aD=function(c){var i=c[0],l=c[1];return Math.sqrt(i*i+l*l)},d.aE=function(c){return c[0]=0,c[1]=0,c},d.aF=function(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c},d.aG=l2,d.aH=De,d.aI=function(c,i,l,p){const v=i.y-c.y,S=i.x-c.x,T=p.y-l.y,M=p.x-l.x,D=T*S-M*v;if(D===0)return null;const V=(M*(c.y-l.y)-T*(c.x-l.x))/D;return new _(c.x+V*S,c.y+V*v)},d.aJ=PN,d.aK=qd,d.aL=function(c){let i=1/0,l=1/0,p=-1/0,v=-1/0;for(const S of c)i=Math.min(i,S.x),l=Math.min(l,S.y),p=Math.max(p,S.x),v=Math.max(v,S.y);return[i,l,p,v]},d.aM=ga,d.aN=Qe,d.aO=function(c,i,l,p,v=!1){if(!l[0]&&!l[1])return[0,0];const S=v?p==="map"?-c.bearingInRadians:0:p==="viewport"?c.bearingInRadians:0;if(S){const T=Math.sin(S),M=Math.cos(S);l=[l[0]*M-l[1]*T,l[0]*T+l[1]*M]}return[v?l[0]:Qe(i,l[0],c.zoom),v?l[1]:Qe(i,l[1],c.zoom)]},d.aQ=s2,d.aR=I2,d.aS=Jt,d.aT=N2,d.aU=Pi,d.aV=Xd,d.aW=Me,d.aX=Yt,d.aY=xt,d.aZ=_i,d.a_=$I,d.aa=um,d.ab=25,d.ac=f2,d.ad=c=>{const i=window.document.createElement("video");return i.muted=!0,new Promise((l=>{i.onloadstart=()=>{l(i)};for(const p of c){const v=window.document.createElement("source");ct(p)||(i.crossOrigin="Anonymous"),v.src=p,i.appendChild(v)}}))},d.ae=ht,d.af=function(){return rt++},d.ag=b,d.ah=Pg,d.ai=Nv,d.aj=sn,d.ak=wc,d.al=WI,d.am=function(c){const i={};if(c.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,((l,p,v,S)=>{const T=v||S;return i[p]=!T||T.toLowerCase(),""})),i["max-age"]){const l=parseInt(i["max-age"],10);isNaN(l)?delete i["max-age"]:i["max-age"]=l}return i},d.an=Nt,d.ao=85.051129,d.ap=wa,d.aq=function(c){return Math.pow(2,c)},d.ar=H,d.as=FI,d.at=function(c){return Math.log(c)/Math.LN2},d.au=function(c){var i=c[0],l=c[1];return i*i+l*l},d.av=function(c){if(!c.length)return new Set;const i=Math.max(...c.map((D=>D.canonical.z)));let l=1/0,p=-1/0,v=1/0,S=-1/0;const T=[];for(const D of c){const{x:V,y:G,z:Z}=D.canonical,ie=Math.pow(2,i-Z),se=V*ie,pe=G*ie;T.push({id:D,x:se,y:pe}),se<l&&(l=se),se>p&&(p=se),pe<v&&(v=pe),pe>S&&(S=pe)}const M=new Set;for(const D of T)D.x!==l&&D.x!==p&&D.y!==v&&D.y!==S||M.add(D.id);return M},d.aw=function(c,i){const l=Math.abs(2*c.wrap)-+(c.wrap<0),p=Math.abs(2*i.wrap)-+(i.wrap<0);return c.overscaledZ-i.overscaledZ||p-l||i.canonical.y-c.canonical.y||i.canonical.x-c.canonical.x},d.ax=class{constructor(c,i){this.max=c,this.onRemove=i,this.reset()}reset(){for(const c in this.data)for(const i of this.data[c])i.timeout&&clearTimeout(i.timeout),this.onRemove(i.value);return this.data={},this.order=[],this}add(c,i,l){const p=c.wrapped().key;this.data[p]===void 0&&(this.data[p]=[]);const v={value:i,timeout:void 0};if(l!==void 0&&(v.timeout=setTimeout((()=>{this.remove(c,v)}),l)),this.data[p].push(v),this.order.push(p),this.order.length>this.max){const S=this._getAndRemoveByKey(this.order[0]);S&&this.onRemove(S)}return this}has(c){return c.wrapped().key in this.data}getAndRemove(c){return this.has(c)?this._getAndRemoveByKey(c.wrapped().key):null}_getAndRemoveByKey(c){const i=this.data[c].shift();return i.timeout&&clearTimeout(i.timeout),this.data[c].length===0&&delete this.data[c],this.order.splice(this.order.indexOf(c),1),i.value}getByKey(c){const i=this.data[c];return i?i[0].value:null}get(c){return this.has(c)?this.data[c.wrapped().key][0].value:null}remove(c,i){if(!this.has(c))return this;const l=c.wrapped().key,p=i===void 0?0:this.data[l].indexOf(i),v=this.data[l][p];return this.data[l].splice(p,1),v.timeout&&clearTimeout(v.timeout),this.data[l].length===0&&delete this.data[l],this.onRemove(v.value),this.order.splice(this.order.indexOf(l),1),this}setMaxSize(c){for(this.max=c;this.order.length>this.max;){const i=this._getAndRemoveByKey(this.order[0]);i&&this.onRemove(i)}return this}filter(c){const i=[];for(const l in this.data)for(const p of this.data[l])c(p.value)||i.push(p);for(const l of i)this.remove(l.value.tileID,l)}},d.ay=function(c,i){let l=0,p=0;if(c.kind==="constant")p=c.layoutSize;else if(c.kind!=="source"){const{interpolationType:v,minZoom:S,maxZoom:T}=c,M=v?Nt(Qr.interpolationFactor(v,i,S,T),0,1):0;c.kind==="camera"?p=qr.number(c.minSize,c.maxSize,M):l=M}return{uSizeT:l,uSize:p}},d.b=Nr,d.b$=_c,d.b0=Ae,d.b1=function(c){var i=new te(3);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i},d.b2=function(c,i,l){return c[0]=i[0]-l[0],c[1]=i[1]-l[1],c[2]=i[2]-l[2],c},d.b3=function(c,i){var l=i[0],p=i[1],v=i[2],S=l*l+p*p+v*v;return S>0&&(S=1/Math.sqrt(S)),c[0]=i[0]*S,c[1]=i[1]*S,c[2]=i[2]*S,c},d.b4=fe,d.b5=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]},d.b6=function(c,i,l){return c[0]=i[0]*l[0],c[1]=i[1]*l[1],c[2]=i[2]*l[2],c[3]=i[3]*l[3],c},d.b7=de,d.b8=function(c,i,l){const p=i[0]*l[0]+i[1]*l[1]+i[2]*l[2];return p===0?null:(-(c[0]*l[0]+c[1]*l[1]+c[2]*l[2])-l[3])/p},d.b9=Be,d.bA=function(){return new Float64Array(3)},d.bB=Ve,d.bC=function(c,i,l){var p=l[0],v=l[1],S=l[2],T=l[3],M=i[0],D=i[1],V=i[2],G=v*V-S*D,Z=S*M-p*V,ie=p*D-v*M;return c[0]=M+T*(G+=G)+v*(ie+=ie)-S*(Z+=Z),c[1]=D+T*Z+S*G-p*ie,c[2]=V+T*ie+p*Z-v*G,c},d.bD=function(c,i,l){const p=(v=[c[0],c[1],c[2],i[0],i[1],i[2],l[0],l[1],l[2]])[0]*((G=v[8])*(T=v[4])-(M=v[5])*(V=v[7]))+v[1]*(-G*(S=v[3])+M*(D=v[6]))+v[2]*(V*S-T*D);var v,S,T,M,D,V,G;if(p===0)return null;const Z=fe([],[i[0],i[1],i[2]],[l[0],l[1],l[2]]),ie=fe([],[l[0],l[1],l[2]],[c[0],c[1],c[2]]),se=fe([],[c[0],c[1],c[2]],[i[0],i[1],i[2]]),pe=_e([],Z,-c[3]);return Ae(pe,pe,_e([],ie,-i[3])),Ae(pe,pe,_e([],se,-l[3])),_e(pe,pe,1/p),pe},d.bE=h2,d.bF=function(){return new Float64Array(4)},d.bG=function(c,i,l,p){var v=[],S=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],S[0]=v[0]*Math.cos(p)-v[1]*Math.sin(p),S[1]=v[0]*Math.sin(p)+v[1]*Math.cos(p),S[2]=v[2],c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},d.bH=function(c,i,l,p){var v=[],S=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],S[0]=v[0],S[1]=v[1]*Math.cos(p)-v[2]*Math.sin(p),S[2]=v[1]*Math.sin(p)+v[2]*Math.cos(p),c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},d.bI=function(c,i,l,p){var v=[],S=[];return v[0]=i[0]-l[0],v[1]=i[1]-l[1],v[2]=i[2]-l[2],S[0]=v[2]*Math.sin(p)+v[0]*Math.cos(p),S[1]=v[1],S[2]=v[2]*Math.cos(p)-v[0]*Math.sin(p),c[0]=S[0]+l[0],c[1]=S[1]+l[1],c[2]=S[2]+l[2],c},d.bJ=function(c,i,l){var p=Math.sin(l),v=Math.cos(l),S=i[0],T=i[1],M=i[2],D=i[3],V=i[8],G=i[9],Z=i[10],ie=i[11];return i!==c&&(c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=S*v-V*p,c[1]=T*v-G*p,c[2]=M*v-Z*p,c[3]=D*v-ie*p,c[8]=S*p+V*v,c[9]=T*p+G*v,c[10]=M*p+Z*v,c[11]=D*p+ie*v,c},d.bK=function(c,i){const l=Re(c,360),p=Re(i,360),v=p-l,S=p>l?v-360:v+360;return Math.abs(v)<Math.abs(S)?v:S},d.bL=function(c){return c[0]=0,c[1]=0,c[2]=0,c},d.bM=function(c,i,l,p){const v=Math.sqrt(c*c+i*i),S=Math.sqrt(l*l+p*p);c/=v,i/=v,l/=S,p/=S;const T=Math.acos(c*l+i*p);return-i*l+c*p>0?T:-T},d.bN=function(c,i){const l=Re(c,2*Math.PI),p=Re(i,2*Math.PI);return Math.min(Math.abs(l-p),Math.abs(l-p+2*Math.PI),Math.abs(l-p-2*Math.PI))},d.bO=function(){const c={},i=Ke.$version;for(const l in Ke.$root){const p=Ke.$root[l];if(p.required){let v=null;v=l==="version"?i:p.type==="array"?[]:{},v!=null&&(c[l]=v)}}return c},d.bP=Oe,d.bQ=si,d.bR=function c(i,l){if(Array.isArray(i)){if(!Array.isArray(l)||i.length!==l.length)return!1;for(let p=0;p<i.length;p++)if(!c(i[p],l[p]))return!1;return!0}if(typeof i=="object"&&i!==null&&l!==null){if(typeof l!="object"||Object.keys(i).length!==Object.keys(l).length)return!1;for(const p in i)if(!c(i[p],l[p]))return!1;return!0}return i===l},d.bS=function(c){c=c.slice();const i=Object.create(null);for(let l=0;l<c.length;l++)i[c[l].id]=c[l];for(let l=0;l<c.length;l++)"ref"in c[l]&&(c[l]=gn(c[l],i[c[l].ref]));return c},d.bT=function(c,i){if(c.type==="custom")return new HG(c,i);switch(c.type){case"background":return new WG(c,i);case"circle":return new Jf(c,i);case"color-relief":return new n2(c,i);case"fill":return new q0(c,i);case"fill-extrusion":return new i2(c,i);case"heatmap":return new mv(c,i);case"hillshade":return new Gd(c,i);case"line":return new Cv(c,i);case"raster":return new lu(c,i);case"symbol":return new s_(c,i)}},d.bU=c=>c.type==="raster",d.bV=dt,d.bW=function(c,i){if(!c)return[{command:"setStyle",args:[i]}];let l=[];try{if(!on(c.version,i.version))return[{command:"setStyle",args:[i]}];on(c.center,i.center)||l.push({command:"setCenter",args:[i.center]}),on(c.state,i.state)||l.push({command:"setGlobalState",args:[i.state]}),on(c.centerAltitude,i.centerAltitude)||l.push({command:"setCenterAltitude",args:[i.centerAltitude]}),on(c.zoom,i.zoom)||l.push({command:"setZoom",args:[i.zoom]}),on(c.bearing,i.bearing)||l.push({command:"setBearing",args:[i.bearing]}),on(c.pitch,i.pitch)||l.push({command:"setPitch",args:[i.pitch]}),on(c.roll,i.roll)||l.push({command:"setRoll",args:[i.roll]}),on(c.sprite,i.sprite)||l.push({command:"setSprite",args:[i.sprite]}),on(c.glyphs,i.glyphs)||l.push({command:"setGlyphs",args:[i.glyphs]}),on(c.transition,i.transition)||l.push({command:"setTransition",args:[i.transition]}),on(c.light,i.light)||l.push({command:"setLight",args:[i.light]}),on(c.terrain,i.terrain)||l.push({command:"setTerrain",args:[i.terrain]}),on(c.sky,i.sky)||l.push({command:"setSky",args:[i.sky]}),on(c.projection,i.projection)||l.push({command:"setProjection",args:[i.projection]});const p={},v=[];(function(T,M,D,V){let G;for(G in M=M||{},T=T||{})Object.prototype.hasOwnProperty.call(T,G)&&(Object.prototype.hasOwnProperty.call(M,G)||pn(G,D,V));for(G in M)Object.prototype.hasOwnProperty.call(M,G)&&(Object.prototype.hasOwnProperty.call(T,G)?on(T[G],M[G])||(T[G].type==="geojson"&&M[G].type==="geojson"&&Cr(T,M,G)?hn(D,{command:"setGeoJSONSourceData",args:[G,M[G].data]}):er(G,M,D,V)):bn(G,M,D))})(c.sources,i.sources,v,p);const S=[];c.layers&&c.layers.forEach((T=>{"source"in T&&p[T.source]?l.push({command:"removeLayer",args:[T.id]}):S.push(T)})),l=l.concat(v),(function(T,M,D){M=M||[];const V=(T=T||[]).map(Dr),G=M.map(Dr),Z=T.reduce(ur,{}),ie=M.reduce(ur,{}),se=V.slice(),pe=Object.create(null);let me,xe,Pe,Le,Se;for(let ke=0,qe=0;ke<V.length;ke++)me=V[ke],Object.prototype.hasOwnProperty.call(ie,me)?qe++:(hn(D,{command:"removeLayer",args:[me]}),se.splice(se.indexOf(me,qe),1));for(let ke=0,qe=0;ke<G.length;ke++)me=G[G.length-1-ke],se[se.length-1-ke]!==me&&(Object.prototype.hasOwnProperty.call(Z,me)?(hn(D,{command:"removeLayer",args:[me]}),se.splice(se.lastIndexOf(me,se.length-qe),1)):qe++,Le=se[se.length-ke],hn(D,{command:"addLayer",args:[ie[me],Le]}),se.splice(se.length-ke,0,me),pe[me]=!0);for(let ke=0;ke<G.length;ke++)if(me=G[ke],xe=Z[me],Pe=ie[me],!pe[me]&&!on(xe,Pe))if(on(xe.source,Pe.source)&&on(xe["source-layer"],Pe["source-layer"])&&on(xe.type,Pe.type)){for(Se in cr(xe.layout,Pe.layout,D,me,null,"setLayoutProperty"),cr(xe.paint,Pe.paint,D,me,null,"setPaintProperty"),on(xe.filter,Pe.filter)||hn(D,{command:"setFilter",args:[me,Pe.filter]}),on(xe.minzoom,Pe.minzoom)&&on(xe.maxzoom,Pe.maxzoom)||hn(D,{command:"setLayerZoomRange",args:[me,Pe.minzoom,Pe.maxzoom]}),xe)Object.prototype.hasOwnProperty.call(xe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?cr(xe[Se],Pe[Se],D,me,Se.slice(6),"setPaintProperty"):on(xe[Se],Pe[Se])||hn(D,{command:"setLayerProperty",args:[me,Se,Pe[Se]]}));for(Se in Pe)Object.prototype.hasOwnProperty.call(Pe,Se)&&!Object.prototype.hasOwnProperty.call(xe,Se)&&Se!=="layout"&&Se!=="paint"&&Se!=="filter"&&Se!=="metadata"&&Se!=="minzoom"&&Se!=="maxzoom"&&(Se.indexOf("paint.")===0?cr(xe[Se],Pe[Se],D,me,Se.slice(6),"setPaintProperty"):on(xe[Se],Pe[Se])||hn(D,{command:"setLayerProperty",args:[me,Se,Pe[Se]]}))}else hn(D,{command:"removeLayer",args:[me]}),Le=se[se.lastIndexOf(me)+1],hn(D,{command:"addLayer",args:[Pe,Le]})})(S,i.layers,l)}catch(p){console.warn("Unable to compute style diff:",p),l=[{command:"setStyle",args:[i]}]}return l},d.bX=function(c){const i=[],l=c.id;return l===void 0&&i.push({message:`layers.${l}: missing required property "id"`}),c.render===void 0&&i.push({message:`layers.${l}: missing required method "render"`}),c.renderingMode&&c.renderingMode!=="2d"&&c.renderingMode!=="3d"&&i.push({message:`layers.${l}: property "renderingMode" must be either "2d" or "3d"`}),i},d.bY=zt,d.bZ=Ut,d.b_=class extends so{constructor(c,i){super(c,i),this.current=0}set(c){this.current!==c&&(this.current=c,this.gl.uniform1i(this.location,c))}},d.ba=function(c,i,l){return c[0]=i[0]*l,c[1]=i[1]*l,c[2]=i[2]*l,c[3]=i[3]*l,c},d.bb=function(c,i){return c[0]*i[0]+c[1]*i[1]+c[2]*i[2]+c[3]},d.bc=UI,d.bd=Ag,d.be=function(c,i,l,p,v){var S=1/Math.tan(i/2);if(c[0]=S/l,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=S,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[11]=-1,c[12]=0,c[13]=0,c[15]=0,v!=null&&v!==1/0){var T=1/(p-v);c[10]=(v+p)*T,c[14]=2*v*p*T}else c[10]=-1,c[14]=-2*p;return c},d.bf=function(c){var i=new te(16);return i[0]=c[0],i[1]=c[1],i[2]=c[2],i[3]=c[3],i[4]=c[4],i[5]=c[5],i[6]=c[6],i[7]=c[7],i[8]=c[8],i[9]=c[9],i[10]=c[10],i[11]=c[11],i[12]=c[12],i[13]=c[13],i[14]=c[14],i[15]=c[15],i},d.bg=function(c,i,l){var p=Math.sin(l),v=Math.cos(l),S=i[0],T=i[1],M=i[2],D=i[3],V=i[4],G=i[5],Z=i[6],ie=i[7];return i!==c&&(c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[0]=S*v+V*p,c[1]=T*v+G*p,c[2]=M*v+Z*p,c[3]=D*v+ie*p,c[4]=V*v-S*p,c[5]=G*v-T*p,c[6]=Z*v-M*p,c[7]=ie*v-D*p,c},d.bh=function(c,i,l){var p=Math.sin(l),v=Math.cos(l),S=i[4],T=i[5],M=i[6],D=i[7],V=i[8],G=i[9],Z=i[10],ie=i[11];return i!==c&&(c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15]),c[4]=S*v+V*p,c[5]=T*v+G*p,c[6]=M*v+Z*p,c[7]=D*v+ie*p,c[8]=V*v-S*p,c[9]=G*v-T*p,c[10]=Z*v-M*p,c[11]=ie*v-D*p,c},d.bi=function(){const c=new Float32Array(16);return H(c),c},d.bj=function(){const c=new Float64Array(16);return H(c),c},d.bk=function(){return new Float64Array(16)},d.bl=function(c,i,l){const p=new Float64Array(4);return Ve(p,c,i-90,l),p},d.bm=function(c,i,l,p){var v,S,T,M,D,V=i[0],G=i[1],Z=i[2],ie=i[3],se=l[0],pe=l[1],me=l[2],xe=l[3];return(S=V*se+G*pe+Z*me+ie*xe)<0&&(S=-S,se=-se,pe=-pe,me=-me,xe=-xe),1-S>K?(v=Math.acos(S),T=Math.sin(v),M=Math.sin((1-p)*v)/T,D=Math.sin(p*v)/T):(M=1-p,D=p),c[0]=M*V+D*se,c[1]=M*G+D*pe,c[2]=M*Z+D*me,c[3]=M*ie+D*xe,c},d.bn=function(c){const i=new Float64Array(9);var l,p,v,S,T,M,D,V,G,Z,ie,se,pe,me,xe,Pe,Le,Se;Z=(v=(p=c)[0])*(D=v+v),ie=(S=p[1])*D,pe=(T=p[2])*D,me=T*(V=S+S),Pe=(M=p[3])*D,Le=M*V,Se=M*(G=T+T),(l=i)[0]=1-(se=S*V)-(xe=T*G),l[3]=ie-Se,l[6]=pe+Le,l[1]=ie+Se,l[4]=1-Z-xe,l[7]=me-Pe,l[2]=pe-Le,l[5]=me+Pe,l[8]=1-Z-se;const ke=_i(-Math.asin(Nt(i[2],-1,1)));let qe,tt;return Math.hypot(i[5],i[8])<.001?(qe=0,tt=-_i(Math.atan2(i[3],i[4]))):(qe=_i(i[5]===0&&i[8]===0?0:Math.atan2(i[5],i[8])),tt=_i(i[1]===0&&i[0]===0?0:Math.atan2(i[1],i[0]))),{roll:qe,pitch:ke+90,bearing:tt}},d.bo=function(c,i){return c.roll==i.roll&&c.pitch==i.pitch&&c.bearing==i.bearing},d.bp=Bn,d.bq=xc,d.br=Yd,d.bs=Jd,d.bt=rd,d.bu=nt,d.bv=pt,d.bw=ii,d.bx=function(c,i,l,p,v){return nt(p,v,Nt((c-i)/(l-i),0,1))},d.by=function(c,i,l,p){return c[0]=i[0]+l[0]*p,c[1]=i[1]+l[1]*p,c[2]=i[2]+l[2]*p,c},d.bz=Re,d.c=it,d.c$=class{constructor(c){this.start=`${c}#start`,this.end=`${c}#end`,this.measure=c,performance.mark(this.start)}finish(){performance.mark(this.end);let c=performance.getEntriesByName(this.measure);return c.length===0&&(performance.measure(this.measure,this.start,this.end),c=performance.getEntriesByName(this.measure),performance.clearMarks(this.start),performance.clearMarks(this.end),performance.clearMeasures(this.measure)),c}},d.c0=class extends so{constructor(c,i){super(c,i),this.current=No}set(c){if(c[12]!==this.current[12]||c[0]!==this.current[0])return this.current=c,void this.gl.uniformMatrix4fv(this.location,!1,c);for(let i=1;i<16;i++)if(c[i]!==this.current[i]){this.current=c,this.gl.uniformMatrix4fv(this.location,!1,c);break}}},d.c1=Nl,d.c2=class extends so{constructor(c,i){super(c,i),this.current=[0,0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]&&c[2]===this.current[2]||(this.current=c,this.gl.uniform3f(this.location,c[0],c[1],c[2]))}},d.c3=class extends so{constructor(c,i){super(c,i),this.current=[0,0]}set(c){c[0]===this.current[0]&&c[1]===this.current[1]||(this.current=c,this.gl.uniform2f(this.location,c[0],c[1]))}},d.c4=ne,d.c5=function(c,i){var l=Math.sin(i),p=Math.cos(i);return c[0]=p,c[1]=l,c[2]=0,c[3]=-l,c[4]=p,c[5]=0,c[6]=0,c[7]=0,c[8]=1,c},d.c6=function(c,i,l){var p=i[0],v=i[1],S=i[2];return c[0]=p*l[0]+v*l[3]+S*l[6],c[1]=p*l[1]+v*l[4]+S*l[7],c[2]=p*l[2]+v*l[5]+S*l[8],c},d.c7=function(c,i,l,p,v,S,T){var M=1/(i-l),D=1/(p-v),V=1/(S-T);return c[0]=-2*M,c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=-2*D,c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=2*V,c[11]=0,c[12]=(i+l)*M,c[13]=(v+p)*D,c[14]=(T+S)*V,c[15]=1,c},d.c8=class extends so{constructor(c,i){super(c,i),this.current=new Array}set(c){if(c!=this.current){this.current=c;const i=new Float32Array(4*c.length);for(let l=0;l<c.length;l++)i[4*l]=c[l].r,i[4*l+1]=c[l].g,i[4*l+2]=c[l].b,i[4*l+3]=c[l].a;this.gl.uniform4fv(this.location,i)}}},d.c9=class extends so{constructor(c,i){super(c,i),this.current=new Array}set(c){if(c!=this.current){this.current=c;const i=new Float32Array(c);this.gl.uniform1fv(this.location,i)}}},d.cA=function(c,i){var l;if(!Ta[i])return!1;const p=c?.target,v=((l=p?.ownerDocument)===null||l===void 0?void 0:l.defaultView)||window;return c instanceof v.MouseEvent||c instanceof v.WheelEvent},d.cB=function(c,i){return Sa[i]&&"touches"in c},d.cC=function(c){return Sa[c]||Ta[c]},d.cD=function(c,i,l){var p=i[0],v=i[1];return c[0]=l[0]*p+l[4]*v+l[12],c[1]=l[1]*p+l[5]*v+l[13],c},d.cE=function(c,i){const{x:l,y:p}=Mv.fromLngLat(i);return!(c<0||c>25||p<0||p>=1||l<0||l>=1)},d.cF=function(c,i){return c[0]=i[0],c[1]=0,c[2]=0,c[3]=0,c[4]=0,c[5]=i[1],c[6]=0,c[7]=0,c[8]=0,c[9]=0,c[10]=i[2],c[11]=0,c[12]=0,c[13]=0,c[14]=0,c[15]=1,c},d.cG=class extends cu{},d.cH=NW,d.cJ=ve,d.cK=function(c,i){it.REGISTERED_PROTOCOLS[c]=i},d.cL=function(c){delete it.REGISTERED_PROTOCOLS[c]},d.cM=function(c,i){const l={};for(let v=0;v<c.length;v++){const S=i&&i[c[v].id]||Zs(c[v]);i&&(i[c[v].id]=S);let T=l[S];T||(T=l[S]=[]),T.push(c[v])}const p=[];for(const v in l)p.push(l[v]);return p},d.cN=tn,d.cO=GI,d.cP=SN,d.cQ=_t,d.cR=function(c){var i;c.bucket.createArrays(),c.bucket.tilePixelRatio=We/(512*c.bucket.overscaling),c.bucket.compareText={},c.bucket.iconsNeedLinear=!1;const l=c.bucket.layers[0],p=l.layout,v=l._unevaluatedLayout._values,S={layoutIconSize:v["icon-size"].possiblyEvaluate(new Lr(c.bucket.zoom+1),c.canonical),layoutTextSize:v["text-size"].possiblyEvaluate(new Lr(c.bucket.zoom+1),c.canonical),textMaxSize:v["text-size"].possiblyEvaluate(new Lr(18))};if(c.bucket.textSizeData.kind==="composite"){const{minZoom:G,maxZoom:Z}=c.bucket.textSizeData;S.compositeTextSizes=[v["text-size"].possiblyEvaluate(new Lr(G),c.canonical),v["text-size"].possiblyEvaluate(new Lr(Z),c.canonical)]}if(c.bucket.iconSizeData.kind==="composite"){const{minZoom:G,maxZoom:Z}=c.bucket.iconSizeData;S.compositeIconSizes=[v["icon-size"].possiblyEvaluate(new Lr(G),c.canonical),v["icon-size"].possiblyEvaluate(new Lr(Z),c.canonical)]}const T=p.get("text-line-height")*ga,M=p.get("text-rotation-alignment")!=="viewport"&&p.get("symbol-placement")!=="point",D=p.get("text-keep-upright"),V=p.get("text-size");for(const G of c.bucket.features){const Z=p.get("text-font").evaluate(G,{},c.canonical).join(","),ie=V.evaluate(G,{},c.canonical),se=S.layoutTextSize.evaluate(G,{},c.canonical),pe=S.layoutIconSize.evaluate(G,{},c.canonical),me={horizontal:{},vertical:void 0},xe=G.text;let Pe,Le=[0,0];if(xe){const qe=xe.toString(),tt=p.get("text-letter-spacing").evaluate(G,{},c.canonical)*ga,gt=Wp(qe)?tt:0,jt=p.get("text-anchor").evaluate(G,{},c.canonical),kt=RN(l,G,c.canonical);if(!kt){const It=p.get("text-radial-offset").evaluate(G,{},c.canonical);Le=It?ON(jt,[It*ga,k2]):p.get("text-offset").evaluate(G,{},c.canonical).map((At=>At*ga))}let Ft=M?"center":p.get("text-justify").evaluate(G,{},c.canonical);const Kt=p.get("symbol-placement")==="point"?p.get("text-max-width").evaluate(G,{},c.canonical)*ga:1/0,$t=()=>{c.bucket.allowVerticalPlacement&&au(qe)&&(me.vertical=wt(xe,c.glyphMap,c.glyphPositions,c.imagePositions,Z,Kt,T,jt,"left",gt,Le,d.az.vertical,!0,se,ie))};if(!M&&kt){const It=new Set;if(Ft==="auto")for(let ln=0;ln<kt.values.length;ln+=2)It.add(I2(kt.values[ln]));else It.add(Ft);let At=!1;for(const ln of It)if(!me.horizontal[ln])if(At)me.horizontal[ln]=me.horizontal[0];else{const fn=wt(xe,c.glyphMap,c.glyphPositions,c.imagePositions,Z,Kt,T,"center",ln,gt,Le,d.az.horizontal,!1,se,ie);fn&&(me.horizontal[ln]=fn,At=fn.positionedLines.length===1)}$t()}else{Ft==="auto"&&(Ft=I2(jt));const It=wt(xe,c.glyphMap,c.glyphPositions,c.imagePositions,Z,Kt,T,jt,Ft,gt,Le,d.az.horizontal,!1,se,ie);It&&(me.horizontal[Ft]=It),$t(),au(qe)&&M&&D&&(me.vertical=wt(xe,c.glyphMap,c.glyphPositions,c.imagePositions,Z,Kt,T,jt,Ft,gt,Le,d.az.vertical,!1,se,ie))}}let Se=!1;if(G.icon&&G.icon.name){const qe=c.imageMap[G.icon.name];qe&&(Pe=th(c.imagePositions[G.icon.name],p.get("icon-offset").evaluate(G,{},c.canonical),p.get("icon-anchor").evaluate(G,{},c.canonical)),Se=!!qe.sdf,c.bucket.sdfIcons===void 0?c.bucket.sdfIcons=Se:c.bucket.sdfIcons!==Se&&cn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(qe.pixelRatio!==c.bucket.pixelRatio||p.get("icon-rotate").constantOr(1)!==0)&&(c.bucket.iconsNeedLinear=!0))}const ke=zN(me.horizontal)||me.vertical;(i=c.bucket).iconsInText||(i.iconsInText=!!ke&&ke.iconsInText),(ke||Pe)&&kW(c.bucket,G,me,Pe,c.imageMap,S,se,pe,Le,Se,c.canonical,c.subdivisionGranularity)}c.showCollisionBoxes&&c.bucket.generateCollisionDebugBuffers()},d.cS=rm,d.cT=Sv,d.cU=rp,d.cV=function(c){const i=new m;return(function(l,p){for(const v in l.layers)p.writeMessage(3,yW,l.layers[v])})(c,i),i.finish()},d.cW=function(c,i,l,p,v,S){let T=AN(c,i,l,v,0);return T=AN(T,i,p,S,1),T},d.cX=class{constructor(c){this.maxEntries=c,this.map=new Map}get(c){const i=this.map.get(c);return i!==void 0&&(this.map.delete(c),this.map.set(c,i)),i}set(c,i){if(this.map.has(c))this.map.delete(c);else if(this.map.size>=this.maxEntries){const l=this.map.keys().next().value;this.map.delete(l)}this.map.set(c,i)}clear(){this.map.clear()}},d.cY=W0,d.cZ=m,d.c_=bN,d.ca=class extends yc{},d.cb=t_,d.cc=class extends ni{},d.cd=em,d.ce=function(c){return c<=1?1:Math.pow(2,Math.ceil(Math.log(c)/Math.LN2))},d.cf=pv,d.cg=function(c,i,l){var p=i[0],v=i[1],S=i[2],T=l[3]*p+l[7]*v+l[11]*S+l[15];return c[0]=(l[0]*p+l[4]*v+l[8]*S+l[12])/(T=T||1),c[1]=(l[1]*p+l[5]*v+l[9]*S+l[13])/T,c[2]=(l[2]*p+l[6]*v+l[10]*S+l[14])/T,c},d.ch=class extends Zu{},d.ci=class extends a{},d.cj=function(c,i){return c[0]===i[0]&&c[1]===i[1]&&c[2]===i[2]&&c[3]===i[3]&&c[4]===i[4]&&c[5]===i[5]&&c[6]===i[6]&&c[7]===i[7]&&c[8]===i[8]&&c[9]===i[9]&&c[10]===i[10]&&c[11]===i[11]&&c[12]===i[12]&&c[13]===i[13]&&c[14]===i[14]&&c[15]===i[15]},d.ck=function(c,i){var l=c[0],p=c[1],v=c[2],S=c[3],T=c[4],M=c[5],D=c[6],V=c[7],G=c[8],Z=c[9],ie=c[10],se=c[11],pe=c[12],me=c[13],xe=c[14],Pe=c[15],Le=i[0],Se=i[1],ke=i[2],qe=i[3],tt=i[4],gt=i[5],jt=i[6],kt=i[7],Ft=i[8],Kt=i[9],$t=i[10],It=i[11],At=i[12],ln=i[13],fn=i[14],An=i[15];return Math.abs(l-Le)<=K*Math.max(1,Math.abs(l),Math.abs(Le))&&Math.abs(p-Se)<=K*Math.max(1,Math.abs(p),Math.abs(Se))&&Math.abs(v-ke)<=K*Math.max(1,Math.abs(v),Math.abs(ke))&&Math.abs(S-qe)<=K*Math.max(1,Math.abs(S),Math.abs(qe))&&Math.abs(T-tt)<=K*Math.max(1,Math.abs(T),Math.abs(tt))&&Math.abs(M-gt)<=K*Math.max(1,Math.abs(M),Math.abs(gt))&&Math.abs(D-jt)<=K*Math.max(1,Math.abs(D),Math.abs(jt))&&Math.abs(V-kt)<=K*Math.max(1,Math.abs(V),Math.abs(kt))&&Math.abs(G-Ft)<=K*Math.max(1,Math.abs(G),Math.abs(Ft))&&Math.abs(Z-Kt)<=K*Math.max(1,Math.abs(Z),Math.abs(Kt))&&Math.abs(ie-$t)<=K*Math.max(1,Math.abs(ie),Math.abs($t))&&Math.abs(se-It)<=K*Math.max(1,Math.abs(se),Math.abs(It))&&Math.abs(pe-At)<=K*Math.max(1,Math.abs(pe),Math.abs(At))&&Math.abs(me-ln)<=K*Math.max(1,Math.abs(me),Math.abs(ln))&&Math.abs(xe-fn)<=K*Math.max(1,Math.abs(xe),Math.abs(fn))&&Math.abs(Pe-An)<=K*Math.max(1,Math.abs(Pe),Math.abs(An))},d.cl=function(c,i){return c[0]=i[0],c[1]=i[1],c[2]=i[2],c[3]=i[3],c[4]=i[4],c[5]=i[5],c[6]=i[6],c[7]=i[7],c[8]=i[8],c[9]=i[9],c[10]=i[10],c[11]=i[11],c[12]=i[12],c[13]=i[13],c[14]=i[14],c[15]=i[15],c},d.cm=c=>c.type==="symbol",d.cn=c=>c.type==="circle",d.co=c=>c.type==="heatmap",d.cp=c=>c.type==="line",d.cq=c=>c.type==="fill",d.cr=c=>c.type==="fill-extrusion",d.cs=c=>c.type==="hillshade",d.ct=c=>c.type==="color-relief",d.cu=c=>c.type==="background",d.cv=c=>c.type==="custom",d.cw=Ct,d.cx=function(c,i,l){if(i<=0)return c;const p=1/i;return l===void 0||Math.abs(l)<1e-10?Math.round(c*p)/p:(l>0?Math.ceil(c*p-1e-9):Math.floor(c*p+1e-10))/p},d.cy=function(c,i,l){const p=Ce(i.x-l.x,i.y-l.y),v=Ce(c.x-l.x,c.y-l.y);var S,T;return _i(Math.atan2(p[0]*v[1]-p[1]*v[0],(S=p)[0]*(T=v)[0]+S[1]*T[1]))},d.cz=Mt,d.d=ct,d.d0=function(c,i,l,p,v){return o(this,void 0,void 0,(function*(){if(X())try{return yield xi(c,i,l,p,v)}catch{}return(function(S,T,M,D,V){const G=S.width,Z=S.height;Br&&hr||(Br=new OffscreenCanvas(G,Z),hr=Br.getContext("2d",{willReadFrequently:!0})),Br.width=G,Br.height=Z,hr.drawImage(S,0,0,G,Z);const ie=hr.getImageData(T,M,D,V);return hr.clearRect(0,0,G,Z),ie.data})(c,i,l,p,v)}))},d.d1=yv,d.d2=w,d.d3=class{constructor(c,i){this.layers={[Nv]:this},this.name=Nv,this.version=i?i.version:1,this.extent=i?i.extent:4096,this.length=c.length,this.features=c}feature(c){return new gW(this.features[c],this.extent)}},d.d4=g,d.d5=mc,d.e=Ot,d.f=c=>o(void 0,void 0,void 0,(function*(){if(c.byteLength===0)return createImageBitmap(new ImageData(1,1));const i=new Blob([new Uint8Array(c)],{type:"image/png"});try{return createImageBitmap(i)}catch(l){throw new Error(`Could not load image because of ${l.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`)}})),d.g=ee,d.h=c=>new Promise(((i,l)=>{const p=new Image;p.onload=()=>{i(p),URL.revokeObjectURL(p.src),p.onload=null,window.requestAnimationFrame((()=>{p.src=Fr}))},p.onerror=()=>l(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const v=new Blob([new Uint8Array(c)],{type:"image/png"});p.src=c.byteLength?URL.createObjectURL(v):Fr})),d.i=Gn,d.j=(c,i)=>$e(Ot(c,{type:"json"}),i),d.k=Dt,d.l=ft,d.m=$e,d.n=(c,i)=>$e(Ot(c,{type:"arrayBuffer"}),i),d.o=function(c){return new m(c).readFields(Wt,[])},d.p=Pn,d.q=function(c){return/[\u02EA\u02EB\u1100-\u11FF\u2E80-\u2FDF\u3000-\u30FF\u3105-\u312F\u3131-\u318E\u31A0-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFE10-\uFE1F\uFE30-\uFE4F\uFF00-\uFFEF]|\uD81B[\uDFE0-\uDFFF]|[\uD81C-\uD822\uD840-\uD868\uD86A-\uD86D\uD86F-\uD872\uD874-\uD879\uD880-\uD883\uD885-\uD88C][\uDC00-\uDFFF]|\uD823[\uDC00-\uDCD5\uDCFF-\uDD1E\uDD80-\uDDF2]|\uD82B[\uDFF0-\uDFFF]|\uD82C[\uDC00-\uDEFB]|\uD83C[\uDE00-\uDEFF]|\uD869[\uDC00-\uDEDF\uDF00-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEAD\uDEB0-\uDFFF]|\uD87A[\uDC00-\uDFE0\uDFF0-\uDFFF]|\uD87B[\uDC00-\uDE5D]|\uD87E[\uDC00-\uDE1D]|\uD884[\uDC00-\uDF4A\uDF50-\uDFFF]|\uD88D[\uDC00-\uDC79]/gim.test(String.fromCodePoint(c))},d.r=Qf,d.s=ri,d.t=Ei,d.u=Ke,d.v=Al,d.w=cn,d.x=su,d.y=ru,d.z=$d})),s("worker",["./shared"],(function(d){class o{constructor(ee,ue){this.keyCache={},ee&&this.replace(ee,ue)}replace(ee,ue){this._layerConfigs={},this._layers={},this.update(ee,[],ue)}update(ee,ue,ve){for(const $e of ee){this._layerConfigs[$e.id]=$e;const ct=this._layers[$e.id]=d.bT($e,ve);ct._featureFilter=d.aj(ct.filter,ve),this.keyCache[$e.id]&&delete this.keyCache[$e.id]}for(const $e of ue)delete this.keyCache[$e],delete this._layerConfigs[$e],delete this._layers[$e];this.familiesBySource={};const Oe=d.cM(Object.values(this._layerConfigs),this.keyCache);for(const $e of Oe){const ct=$e.map((Ke=>this._layers[Ke.id])),ut=ct[0];if(ut.isHidden())continue;const at=ut.source||"";let ft=this.familiesBySource[at];ft||(ft=this.familiesBySource[at]={});const Dt=ut.sourceLayer||d.ai;let St=ft[Dt];St||(St=ft[Dt]=[]),St.push(ct)}}}class _{constructor(ee){const ue={},ve=[];for(const ut in ee){const at=ee[ut],ft=ue[ut]={};for(const Dt in at){const St=at[+Dt];if(!St||St.bitmap.width===0||St.bitmap.height===0)continue;const Ke={x:0,y:0,w:St.bitmap.width+2,h:St.bitmap.height+2};ve.push(Ke),ft[Dt]={rect:Ke,metrics:St.metrics}}}const{w:Oe,h:$e}=d.p(ve),ct=new d.r({width:Oe||1,height:$e||1});for(const ut in ee){const at=ee[ut];for(const ft in at){const Dt=at[+ft];if(!Dt||Dt.bitmap.width===0||Dt.bitmap.height===0)continue;const St=ue[ut][ft].rect;d.r.copy(Dt.bitmap,ct,{x:0,y:0},{x:St.x+1,y:St.y+1},Dt.bitmap)}}this.image=ct,this.positions=ue}}d.cN("GlyphAtlas",_);class w{constructor(ee){this.tileID=new d.a2(ee.tileID.overscaledZ,ee.tileID.wrap,ee.tileID.canonical.z,ee.tileID.canonical.x,ee.tileID.canonical.y),this.uid=ee.uid,this.zoom=ee.zoom,this.pixelRatio=ee.pixelRatio,this.tileSize=ee.tileSize,this.source=ee.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=ee.showCollisionBoxes,this.collectResourceTiming=!!ee.collectResourceTiming,this.returnDependencies=!!ee.returnDependencies,this.promoteId=ee.promoteId,this.inFlightDependencies=[]}parse(ee,ue,ve,Oe,$e){return d._(this,void 0,void 0,(function*(){this.status="parsing",this.data=ee,this.collisionBoxArray=new d.ag;const ct=new d.cO(Object.keys(ee.layers).sort()),ut=new d.cP(this.tileID,this.promoteId);ut.bucketLayerIDs=[];const at={},ft={featureIndex:ut,iconDependencies:{},patternDependencies:{},glyphDependencies:{},dashDependencies:{},availableImages:ve,subdivisionGranularity:$e},Dt=ue.familiesBySource[this.source];for(const fr in Dt){const Er=ee.layers[fr];if(!Er)continue;Er.version===1&&d.w(`Vector tile source "${this.source}" layer "${fr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const ul=ct.encode(fr),oa=[];for(let Ht=0;Ht<Er.length;Ht++){const Tn=Er.feature(Ht),In=ut.getId(Tn,fr);oa.push({feature:Tn,id:In,index:Ht,sourceLayerIndex:ul})}for(const Ht of Dt[fr]){const Tn=Ht[0];Tn.source!==this.source&&d.w(`layer.source = ${Tn.source} does not equal this.source = ${this.source}`),Tn.isHidden(this.zoom,!0)||(A(Ht,this.zoom,ve),(at[Tn.id]=Tn.createBucket({index:ut.bucketLayerIDs.length,layers:Ht,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:ul,sourceID:this.source})).populate(oa,ft,this.tileID.canonical),ut.bucketLayerIDs.push(Ht.map((In=>In.id))))}}const St=d.bY(ft.glyphDependencies,(fr=>Object.keys(fr).map(Number)));this.inFlightDependencies.forEach((fr=>fr?.abort())),this.inFlightDependencies=[];let Ke=Promise.resolve({});if(Object.keys(St).length){const fr=new AbortController;this.inFlightDependencies.push(fr),Ke=Oe.sendAsync({type:"GG",data:{stacks:St,source:this.source,tileID:this.tileID,type:"glyphs"}},fr)}const Bt=Object.keys(ft.iconDependencies);let gn=Promise.resolve({});if(Bt.length){const fr=new AbortController;this.inFlightDependencies.push(fr),gn=Oe.sendAsync({type:"GI",data:{icons:Bt,source:this.source,tileID:this.tileID,type:"icons"}},fr)}const on=Object.keys(ft.patternDependencies);let hn=Promise.resolve({});if(on.length){const fr=new AbortController;this.inFlightDependencies.push(fr),hn=Oe.sendAsync({type:"GI",data:{icons:on,source:this.source,tileID:this.tileID,type:"patterns"}},fr)}const bn=ft.dashDependencies;let pn=Promise.resolve({});if(Object.keys(bn).length){const fr=new AbortController;this.inFlightDependencies.push(fr),pn=Oe.sendAsync({type:"GDA",data:{dashes:bn}},fr)}const[er,Cr,cr,Dr]=yield Promise.all([Ke,gn,hn,pn]),ur=new _(er),ht=new d.cQ(Cr,cr);for(const fr in at){const Er=at[fr];Er instanceof d.ah?(A(Er.layers,this.zoom,ve),d.cR({bucket:Er,glyphMap:er,glyphPositions:ur.positions,imageMap:Cr,imagePositions:ht.iconPositions,showCollisionBoxes:this.showCollisionBoxes,canonical:this.tileID.canonical,subdivisionGranularity:ft.subdivisionGranularity})):Er.hasDependencies&&(Er instanceof d.cS||Er instanceof d.cT||Er instanceof d.cU)&&(A(Er.layers,this.zoom,ve),Er.addFeatures(ft,this.tileID.canonical,ht.patternPositions,Dr))}return this.status="done",{buckets:Object.values(at).filter((fr=>!fr.isEmpty())),featureIndex:ut,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:ur.image,imageAtlas:ht,dashPositions:Dr,glyphMap:this.returnDependencies?er:null,iconMap:this.returnDependencies?Cr:null,glyphPositions:this.returnDependencies?ur.positions:null}}))}}function A(it,ee,ue){const ve=new d.H(ee);for(const Oe of it)Oe.recalculate(ve,ue)}class P{constructor(){this.loading={},this.loaded={},this.parsing={}}startLoading(ee,ue){this.loading[ee]=ue}finishLoading(ee){delete this.loading[ee]}abort(ee){const ue=this.loading[ee];ue?.abort&&(ue.abort.abort(),delete this.loading[ee])}setParsing(ee,ue){this.parsing[ee]=ue}consumeParsing(ee){const ue=this.parsing[ee];if(ue)return delete this.parsing[ee],ue}clearParsing(ee){delete this.parsing[ee]}markLoaded(ee,ue){this.loaded[ee]=ue}getLoaded(ee){const ue=this.loaded[ee];if(ue)return ue}removeLoaded(ee){delete this.loaded[ee]}clearLoaded(){this.loaded={}}}class N{constructor(ee,ue,ve,Oe,$e){this.type=ee,this.properties=ve||{},this.extent=$e,this.pointsArray=ue,this.id=Oe}loadGeometry(){return this.pointsArray.map((ee=>ee.map((ue=>new d.P(ue.x,ue.y)))))}}class z{constructor(ee,ue,ve){this.version=2,this._myFeatures=ee,this.name=ue,this.length=ee.length,this.extent=ve}feature(ee){return this._myFeatures[ee]}}class q{constructor(){this.layers={}}addLayer(ee){this.layers[ee.name]=ee}}function $(it){let ee=d.cV(it);return ee.byteOffset===0&&ee.byteLength===ee.buffer.byteLength||(ee=new Uint8Array(ee)),{vectorTile:it,rawData:ee.buffer}}function O(it,ee,ue){const{extent:ve}=it,Oe=Math.pow(2,ue.z-ee.z),$e=(ue.x-ee.x*Oe)*ve,ct=(ue.y-ee.y*Oe)*ve,ut=[];for(let at=0;at<it.length;at++){const ft=it.feature(at);let Dt=ft.loadGeometry();for(const Ke of Dt)for(const Bt of Ke)Bt.x=Bt.x*Oe-$e,Bt.y=Bt.y*Oe-ct;const St=128;Dt=d.cW(Dt,ft.type,-St,-St,ve+St,ve+St),Dt.length!==0&&ut.push(new N(ft.type,Dt,ft.properties,ft.id,ve))}return new z(ut,it.name,ve)}class X{constructor(ee,ue,ve){this.actor=ee,this.layerIndex=ue,this.availableImages=ve,this.tileState=new P,this.overzoomedTileResultCache=new d.cX(1e3)}loadVectorTile(ee,ue){return d._(this,void 0,void 0,(function*(){const ve=yield d.n(ee.request,ue);try{return{vectorTile:ee.encoding!=="mlt"?new d.cY(new d.cZ(ve.data)):new d.c_(ve.data),rawData:ve.data,cacheControl:ve.cacheControl,expires:ve.expires}}catch(Oe){const $e=new Uint8Array(ve.data);let ct=`Unable to parse the tile at ${ee.request.url}, `;throw ct+=$e[0]===31&&$e[1]===139?"please make sure the data is not gzipped and that you have configured the relevant header in the server":`got error: ${Oe.message}`,new Error(ct)}}))}loadTile(ee){return d._(this,void 0,void 0,(function*(){const{uid:ue,overzoomParameters:ve}=ee;ve&&(ee.request=ve.overzoomRequest);const Oe=this._startRequestTiming(ee),$e=new w(ee);this.tileState.startLoading(ue,$e);const ct=new AbortController;$e.abort=ct;try{const ut=yield this.loadVectorTile(ee,ct);if(this.tileState.finishLoading(ue),!ut)return null;let{vectorTile:at,rawData:ft}=ut;ve&&({vectorTile:at,rawData:ft}=this._getOverzoomTile(ee,ut.vectorTile));const Dt=this._getExpiryData(ut),St=this._finishRequestTiming(Oe);$e.vectorTile=at,this.tileState.markLoaded(ue,$e);const Ke={rawData:ft,cacheControl:Dt,resourceTiming:St};this.tileState.setParsing(ue,Ke);try{return yield this._parseWorkerTile($e,ee,Ke)}finally{this.tileState.clearParsing(ue)}}catch(ut){throw this.tileState.finishLoading(ue),$e.status="done",this.tileState.markLoaded(ue,$e),ut}}))}_parseWorkerTile(ee,ue,ve){return d._(this,void 0,void 0,(function*(){let Oe=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity);if(ve){const{rawData:$e,cacheControl:ct,resourceTiming:ut}=ve;Oe=d.e({rawTileData:$e.slice(0),encoding:ue.encoding},Oe,ct,ut)}return Oe}))}_getExpiryData(ee){const{expires:ue,cacheControl:ve}=ee,Oe={};return ue&&(Oe.expires=ue),ve&&(Oe.cacheControl=ve),Oe}_startRequestTiming(ee){var ue;if(!((ue=ee.request)===null||ue===void 0)&&ue.collectResourceTiming)return new d.c$(ee.request.url)}_finishRequestTiming(ee){const ue=ee?.finish();return ue?{resourceTiming:JSON.parse(JSON.stringify(ue))}:{}}_getOverzoomTile(ee,ue){const{tileID:ve,source:Oe,overzoomParameters:$e}=ee,{maxZoomTileID:ct}=$e,ut=`${ct.key}_${ve.key}`,at=this.overzoomedTileResultCache.get(ut);if(at)return at;const ft=new q,Dt=this.layerIndex.familiesBySource[Oe];for(const Ke in Dt){const Bt=ue.layers[Ke];if(!Bt)continue;const gn=O(Bt,ct,ve.canonical);gn.length>0&&ft.addLayer(gn)}const St=$(ft);return this.overzoomedTileResultCache.set(ut,St),St}reloadTile(ee){return d._(this,void 0,void 0,(function*(){const ue=ee.uid,ve=this.tileState.getLoaded(ue);if(!ve)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ve.showCollisionBoxes=ee.showCollisionBoxes,ve.status==="parsing"){const Oe=this.tileState.consumeParsing(ue);return yield this._parseWorkerTile(ve,ee,Oe)}if(ve.status==="done"&&ve.vectorTile)return yield this._parseWorkerTile(ve,ee)}))}abortTile(ee){return d._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return d._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}}class K{constructor(){this.loaded={}}loadTile(ee){return d._(this,void 0,void 0,(function*(){const{uid:ue,encoding:ve,rawImageData:Oe,redFactor:$e,greenFactor:ct,blueFactor:ut,baseShift:at}=ee,ft=Oe.width+2,Dt=Oe.height+2,St=d.b(Oe)?new d.R({width:ft,height:Dt},yield d.d0(Oe,-1,-1,ft,Dt)):Oe,Ke=new d.d1(ue,St,ve,$e,ct,ut,at);return this.loaded=this.loaded||{},this.loaded[ue]=Ke,Ke}))}removeTile(ee){const ue=this.loaded,ve=ee.uid;ue&&ue[ve]&&delete ue[ve]}}var te,ne,H=(function(){if(ne)return te;function it(ue,ve){if(ue.length!==0){ee(ue[0],ve);for(var Oe=1;Oe<ue.length;Oe++)ee(ue[Oe],!ve)}}function ee(ue,ve){for(var Oe=0,$e=0,ct=0,ut=ue.length,at=ut-1;ct<ut;at=ct++){var ft=(ue[ct][0]-ue[at][0])*(ue[at][1]+ue[ct][1]),Dt=Oe+ft;$e+=Math.abs(Oe)>=Math.abs(ft)?Oe-Dt+ft:ft-Dt+Oe,Oe=Dt}Oe+$e>=0!=!!ve&&ue.reverse()}return ne=1,te=function ue(ve,Oe){var $e,ct=ve&&ve.type;if(ct==="FeatureCollection")for($e=0;$e<ve.features.length;$e++)ue(ve.features[$e],Oe);else if(ct==="GeometryCollection")for($e=0;$e<ve.geometries.length;$e++)ue(ve.geometries[$e],Oe);else if(ct==="Feature")ue(ve.geometry,Oe);else if(ct==="Polygon")it(ve.coordinates,Oe);else if(ct==="MultiPolygon")for($e=0;$e<ve.coordinates.length;$e++)it(ve.coordinates[$e],Oe);return ve}})(),ae=d.d2(H);const de={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:it=>it},ye=Math.fround||(Ae=new Float32Array(1),it=>(Ae[0]=+it,Ae[0]));var Ae;class _e{constructor(ee){this.options=Object.assign(Object.create(de),ee),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(ee){const{log:ue,minZoom:ve,maxZoom:Oe}=this.options;ue&&console.time("total time");const $e=`prepare ${ee.length} points`;ue&&console.time($e),this.points=ee;const ct=[];for(let at=0;at<ee.length;at++){const ft=ee[at];if(!ft.geometry)continue;const[Dt,St]=ft.geometry.coordinates,Ke=ye(Be(Dt)),Bt=ye(De(St));ct.push(Ke,Bt,1/0,at,-1,1),this.options.reduce&&ct.push(0)}let ut=this.trees[Oe+1]=this._createTree(ct);ue&&console.timeEnd($e);for(let at=Oe;at>=ve;at--){const ft=+Date.now();ut=this.trees[at]=this._createTree(this._cluster(ut,at)),ue&&console.log("z%d: %d clusters in %dms",at,ut.numItems,+Date.now()-ft)}return ue&&console.timeEnd("total time"),this}getClusters(ee,ue){let ve=((ee[0]+180)%360+360)%360-180;const Oe=Math.max(-90,Math.min(90,ee[1]));let $e=ee[2]===180?180:((ee[2]+180)%360+360)%360-180;const ct=Math.max(-90,Math.min(90,ee[3]));if(ee[2]-ee[0]>=360)ve=-180,$e=180;else if(ve>$e){const St=this.getClusters([ve,Oe,180,ct],ue),Ke=this.getClusters([-180,Oe,$e,ct],ue);return St.concat(Ke)}const ut=this.trees[this._limitZoom(ue)],at=ut.range(Be(ve),De(ct),Be($e),De(Oe)),ft=ut.data,Dt=[];for(const St of at){const Ke=this.stride*St;Dt.push(ft[Ke+5]>1?fe(ft,Ke,this.clusterProps):this.points[ft[Ke+3]])}return Dt}getChildren(ee){const ue=this._getOriginId(ee),ve=this._getOriginZoom(ee),Oe="No cluster with the specified id.",$e=this.trees[ve];if(!$e)throw new Error(Oe);const ct=$e.data;if(ue*this.stride>=ct.length)throw new Error(Oe);const ut=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),at=$e.within(ct[ue*this.stride],ct[ue*this.stride+1],ut),ft=[];for(const Dt of at){const St=Dt*this.stride;ct[St+4]===ee&&ft.push(ct[St+5]>1?fe(ct,St,this.clusterProps):this.points[ct[St+3]])}if(ft.length===0)throw new Error(Oe);return ft}getLeaves(ee,ue,ve){const Oe=[];return this._appendLeaves(Oe,ee,ue=ue||10,ve=ve||0,0),Oe}getTile(ee,ue,ve){const Oe=this.trees[this._limitZoom(ee)],$e=Math.pow(2,ee),{extent:ct,radius:ut}=this.options,at=ut/ct,ft=(ve-at)/$e,Dt=(ve+1+at)/$e,St={features:[]};return this._addTileFeatures(Oe.range((ue-at)/$e,ft,(ue+1+at)/$e,Dt),Oe.data,ue,ve,$e,St),ue===0&&this._addTileFeatures(Oe.range(1-at/$e,ft,1,Dt),Oe.data,$e,ve,$e,St),ue===$e-1&&this._addTileFeatures(Oe.range(0,ft,at/$e,Dt),Oe.data,-1,ve,$e,St),St.features.length?St:null}getClusterExpansionZoom(ee){let ue=this._getOriginZoom(ee)-1;for(;ue<=this.options.maxZoom;){const ve=this.getChildren(ee);if(ue++,ve.length!==1)break;ee=ve[0].properties.cluster_id}return ue}_appendLeaves(ee,ue,ve,Oe,$e){const ct=this.getChildren(ue);for(const ut of ct){const at=ut.properties;if(at&&at.cluster?$e+at.point_count<=Oe?$e+=at.point_count:$e=this._appendLeaves(ee,at.cluster_id,ve,Oe,$e):$e<Oe?$e++:ee.push(ut),ee.length===ve)break}return $e}_createTree(ee){const ue=new d.aT(ee.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<ee.length;ve+=this.stride)ue.add(ee[ve],ee[ve+1]);return ue.finish(),ue.data=ee,ue}_addTileFeatures(ee,ue,ve,Oe,$e,ct){for(const ut of ee){const at=ut*this.stride,ft=ue[at+5]>1;let Dt,St,Ke;if(ft)Dt=Ee(ue,at,this.clusterProps),St=ue[at],Ke=ue[at+1];else{const on=this.points[ue[at+3]];Dt=on.properties;const[hn,bn]=on.geometry.coordinates;St=Be(hn),Ke=De(bn)}const Bt={type:1,geometry:[[Math.round(this.options.extent*(St*$e-ve)),Math.round(this.options.extent*(Ke*$e-Oe))]],tags:Dt};let gn;gn=ft||this.options.generateId?ue[at+3]:this.points[ue[at+3]].id,gn!==void 0&&(Bt.id=gn),ct.features.push(Bt)}}_limitZoom(ee){return Math.max(this.options.minZoom,Math.min(Math.floor(+ee),this.options.maxZoom+1))}_cluster(ee,ue){const{radius:ve,extent:Oe,reduce:$e,minPoints:ct}=this.options,ut=ve/(Oe*Math.pow(2,ue)),at=ee.data,ft=[],Dt=this.stride;for(let St=0;St<at.length;St+=Dt){if(at[St+2]<=ue)continue;at[St+2]=ue;const Ke=at[St],Bt=at[St+1],gn=ee.within(at[St],at[St+1],ut),on=at[St+5];let hn=on;for(const bn of gn){const pn=bn*Dt;at[pn+2]>ue&&(hn+=at[pn+5])}if(hn>on&&hn>=ct){let bn,pn=Ke*on,er=Bt*on,Cr=-1;const cr=(St/Dt<<5)+(ue+1)+this.points.length;for(const Dr of gn){const ur=Dr*Dt;if(at[ur+2]<=ue)continue;at[ur+2]=ue;const ht=at[ur+5];pn+=at[ur]*ht,er+=at[ur+1]*ht,at[ur+4]=cr,$e&&(bn||(bn=this._map(at,St,!0),Cr=this.clusterProps.length,this.clusterProps.push(bn)),$e(bn,this._map(at,ur)))}at[St+4]=cr,ft.push(pn/hn,er/hn,1/0,cr,-1,hn),$e&&ft.push(Cr)}else{for(let bn=0;bn<Dt;bn++)ft.push(at[St+bn]);if(hn>1)for(const bn of gn){const pn=bn*Dt;if(!(at[pn+2]<=ue)){at[pn+2]=ue;for(let er=0;er<Dt;er++)ft.push(at[pn+er])}}}}return ft}_getOriginId(ee){return ee-this.points.length>>5}_getOriginZoom(ee){return(ee-this.points.length)%32}_map(ee,ue,ve){if(ee[ue+5]>1){const ct=this.clusterProps[ee[ue+6]];return ve?Object.assign({},ct):ct}const Oe=this.points[ee[ue+3]].properties,$e=this.options.map(Oe);return ve&&$e===Oe?Object.assign({},$e):$e}}function fe(it,ee,ue){return{type:"Feature",id:it[ee+3],properties:Ee(it,ee,ue),geometry:{type:"Point",coordinates:[(ve=it[ee],360*(ve-.5)),Je(it[ee+1])]}};var ve}function Ee(it,ee,ue){const ve=it[ee+5],Oe=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,$e=it[ee+6],ct=$e===-1?{}:Object.assign({},ue[$e]);return Object.assign(ct,{cluster:!0,cluster_id:it[ee+3],point_count:ve,point_count_abbreviated:Oe})}function Be(it){return it/360+.5}function De(it){const ee=Math.sin(it*Math.PI/180),ue=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ue<0?0:ue>1?1:ue}function Je(it){const ee=(180-360*it)*Math.PI/180;return 360*Math.atan(Math.exp(ee))/Math.PI-90}function Ve(it,ee,ue,ve){let Oe=ve;const $e=ee+(ue-ee>>1);let ct,ut=ue-ee;const at=it[ee],ft=it[ee+1],Dt=it[ue],St=it[ue+1];for(let Ke=ee+3;Ke<ue;Ke+=3){const Bt=et(it[Ke],it[Ke+1],at,ft,Dt,St);if(Bt>Oe)ct=Ke,Oe=Bt;else if(Bt===Oe){const gn=Math.abs(Ke-$e);gn<ut&&(ct=Ke,ut=gn)}}Oe>ve&&(ct-ee>3&&Ve(it,ee,ct,ve),it[ct+2]=Oe,ue-ct>3&&Ve(it,ct,ue,ve))}function et(it,ee,ue,ve,Oe,$e){let ct=Oe-ue,ut=$e-ve;if(ct!==0||ut!==0){const at=((it-ue)*ct+(ee-ve)*ut)/(ct*ct+ut*ut);at>1?(ue=Oe,ve=$e):at>0&&(ue+=ct*at,ve+=ut*at)}return ct=it-ue,ut=ee-ve,ct*ct+ut*ut}function Ce(it,ee,ue,ve){const Oe={type:ee,geom:ue},$e={id:it??null,type:Oe.type,geometry:Oe.geom,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};switch(Oe.type){case"Point":case"MultiPoint":case"LineString":We($e,Oe.geom);break;case"Polygon":We($e,Oe.geom[0]);break;case"MultiLineString":for(const ct of Oe.geom)We($e,ct);break;case"MultiPolygon":for(const ct of Oe.geom)We($e,ct[0])}return $e}function We(it,ee){for(let ue=0;ue<ee.length;ue+=3)it.minX=Math.min(it.minX,ee[ue]),it.minY=Math.min(it.minY,ee[ue+1]),it.maxX=Math.max(it.maxX,ee[ue]),it.maxY=Math.max(it.maxY,ee[ue+1])}function Qe(it,ee){const ue=[];switch(it.type){case"FeatureCollection":for(let ve=0;ve<it.features.length;ve++)Re(ue,it.features[ve],ee,ve);break;case"Feature":Re(ue,it,ee);break;default:Re(ue,{geometry:it,properties:void 0},ee)}return ue}function Re(it,ee,ue,ve){if(!ee.geometry)return;if(ee.geometry.type==="GeometryCollection"){for(const ut of ee.geometry.geometries)Re(it,{id:ee.id,geometry:ut,properties:ee.properties},ue,ve);return}if(!ee.geometry.coordinates?.length)return;const $e=Math.pow(ue.tolerance/((1<<ue.maxZoom)*ue.extent),2);let ct=ee.id;switch(ue.promoteId?ct=ee.properties?.[ue.promoteId]:ue.generateId&&(ct=ve||0),ee.geometry.type){case"Point":{const ut=[];return nt(ee.geometry.coordinates,ut),void it.push(Ce(ct,ee.geometry.type,ut,ee.properties))}case"MultiPoint":{const ut=[];for(const at of ee.geometry.coordinates)nt(at,ut);return void it.push(Ce(ct,ee.geometry.type,ut,ee.properties))}case"LineString":{const ut=[];return pt(ee.geometry.coordinates,ut,$e,!1),void it.push(Ce(ct,ee.geometry.type,ut,ee.properties))}case"MultiLineString":{if(ue.lineMetrics){for(const at of ee.geometry.coordinates){const ft=[];pt(at,ft,$e,!1),it.push(Ce(ct,"LineString",ft,ee.properties))}return}const ut=[];return Ct(ee.geometry.coordinates,ut,$e,!1),void it.push(Ce(ct,ee.geometry.type,ut,ee.properties))}case"Polygon":{const ut=[];return Ct(ee.geometry.coordinates,ut,$e,!0),void it.push(Ce(ct,ee.geometry.type,ut,ee.properties))}case"MultiPolygon":{const ut=[];for(const at of ee.geometry.coordinates){const ft=[];Ct(at,ft,$e,!0),ut.push(ft)}return void it.push(Ce(ct,ee.geometry.type,ut,ee.properties))}default:throw new Error("Input data is not a valid GeoJSON object.")}}function nt(it,ee){ee.push(Mt(it[0]),Nt(it[1]),0)}function pt(it,ee,ue,ve){let Oe,$e,ct=0;for(let at=0;at<it.length;at++){const ft=Mt(it[at][0]),Dt=Nt(it[at][1]);ee.push(ft,Dt,0),at>0&&(ct+=ve?(Oe*Dt-ft*$e)/2:Math.sqrt(Math.pow(ft-Oe,2)+Math.pow(Dt-$e,2))),Oe=ft,$e=Dt}const ut=ee.length-3;ee[2]=1,ue>0&&Ve(ee,0,ut,ue),ee[ut+2]=1,ee.size=Math.abs(ct),ee.start=0,ee.end=ee.size}function Ct(it,ee,ue,ve){for(let Oe=0;Oe<it.length;Oe++){const $e=[];pt(it[Oe],$e,ue,ve),ee.push($e)}}function Mt(it){return it/360+.5}function Nt(it){const ee=Math.sin(it*Math.PI/180),ue=.5-.25*Math.log((1+ee)/(1-ee))/Math.PI;return ue<0?0:ue>1?1:ue}function Tt(it,ee,ue,ve,Oe,$e,ct,ut){if(ve/=ee,$e>=(ue/=ee)&&ct<ve)return it;if(ct<ue||$e>=ve)return null;const at=[];for(const ft of it){const Dt=Oe===0?ft.minX:ft.minY,St=Oe===0?ft.maxX:ft.maxY;if(Dt>=ue&&St<ve)at.push(ft);else if(!(St<ue||Dt>=ve))switch(ft.type){case"Point":case"MultiPoint":{const Ke=[];if(Ot(ft.geometry,Ke,ue,ve,Oe),!Ke.length)continue;at.push(Ce(ft.id,Ke.length===3?"Point":"MultiPoint",Ke,ft.tags));continue}case"LineString":{const Ke=[];if(rt(ft.geometry,Ke,ue,ve,Oe,!1,ut.lineMetrics),!Ke.length)continue;if(ut.lineMetrics){for(const Bt of Ke)at.push(Ce(ft.id,ft.type,Bt,ft.tags));continue}if(Ke.length>1){at.push(Ce(ft.id,"MultiLineString",Ke,ft.tags));continue}at.push(Ce(ft.id,ft.type,Ke[0],ft.tags));continue}case"MultiLineString":{const Ke=[];if(Ut(ft.geometry,Ke,ue,ve,Oe,!1),!Ke.length)continue;if(Ke.length===1){at.push(Ce(ft.id,"LineString",Ke[0],ft.tags));continue}at.push(Ce(ft.id,ft.type,Ke,ft.tags));continue}case"Polygon":{const Ke=[];if(Ut(ft.geometry,Ke,ue,ve,Oe,!0),!Ke.length)continue;at.push(Ce(ft.id,ft.type,Ke,ft.tags));continue}case"MultiPolygon":{const Ke=[];for(const Bt of ft.geometry){const gn=[];Ut(Bt,gn,ue,ve,Oe,!0),gn.length&&Ke.push(gn)}if(!Ke.length)continue;at.push(Ce(ft.id,ft.type,Ke,ft.tags));continue}}}return at.length?at:null}function Ot(it,ee,ue,ve,Oe){for(let $e=0;$e<it.length;$e+=3){const ct=it[$e+Oe];ct>=ue&&ct<=ve&&dt(ee,it[$e],it[$e+1],it[$e+2])}}function rt(it,ee,ue,ve,Oe,$e,ct){let ut=zt(it);const at=Oe===0?Rn:cn;let ft,Dt,St=it.start;for(let hn=0;hn<it.length-3;hn+=3){const bn=it[hn],pn=it[hn+1],er=it[hn+2],Cr=it[hn+3],cr=it[hn+4],Dr=Oe===0?bn:pn,ur=Oe===0?Cr:cr;let ht=!1;ct&&(ft=Math.sqrt(Math.pow(bn-Cr,2)+Math.pow(pn-cr,2))),Dr<ue?ur>ue&&(Dt=at(ut,bn,pn,Cr,cr,ue),ct&&(ut.start=St+ft*Dt)):Dr>ve?ur<ve&&(Dt=at(ut,bn,pn,Cr,cr,ve),ct&&(ut.start=St+ft*Dt)):dt(ut,bn,pn,er),ur<ue&&Dr>=ue&&(Dt=at(ut,bn,pn,Cr,cr,ue),ht=!0),ur>ve&&Dr<=ve&&(Dt=at(ut,bn,pn,Cr,cr,ve),ht=!0),!$e&&ht&&(ct&&(ut.end=St+ft*Dt),ee.push(ut),ut=zt(it)),ct&&(St+=ft)}let Ke=it.length-3;const Bt=it[Ke],gn=it[Ke+1],on=Oe===0?Bt:gn;on>=ue&&on<=ve&&dt(ut,Bt,gn,it[Ke+2]),Ke=ut.length-3,$e&&Ke>=3&&(ut[Ke]!==ut[0]||ut[Ke+1]!==ut[1])&&dt(ut,ut[0],ut[1],ut[2]),ut.length&&ee.push(ut)}function zt(it){const ee=[];return ee.size=it.size,ee.start=it.start,ee.end=it.end,ee}function Ut(it,ee,ue,ve,Oe,$e){for(const ct of it)rt(ct,ee,ue,ve,Oe,$e,!1)}function dt(it,ee,ue,ve){it.push(ee,ue,ve)}function Rn(it,ee,ue,ve,Oe,$e){const ct=($e-ee)/(ve-ee);return dt(it,$e,ue+(Oe-ue)*ct,1),ct}function cn(it,ee,ue,ve,Oe,$e){const ct=($e-ue)/(Oe-ue);return dt(it,ee+(ve-ee)*ct,$e,1),ct}function Hn(it,ee){const ue=ee.buffer/ee.extent;let ve=it;const Oe=Tt(it,1,-1-ue,ue,0,-1,2,ee),$e=Tt(it,1,1-ue,2+ue,0,-1,2,ee);return(Oe||$e)&&(ve=Tt(it,1,-ue,1+ue,0,-1,2,ee)||[],Oe&&(ve=Gn(Oe,1).concat(ve)),$e&&(ve=ve.concat(Gn($e,-1)))),ve}function Gn(it,ee){const ue=[];for(const ve of it)switch(ve.type){case"Point":case"MultiPoint":case"LineString":{const Oe=Mn(ve.geometry,ee);ue.push(Ce(ve.id,ve.type,Oe,ve.tags));continue}case"MultiLineString":case"Polygon":{const Oe=[];for(const $e of ve.geometry)Oe.push(Mn($e,ee));ue.push(Ce(ve.id,ve.type,Oe,ve.tags));continue}case"MultiPolygon":{const Oe=[];for(const $e of ve.geometry){const ct=[];for(const ut of $e)ct.push(Mn(ut,ee));Oe.push(ct)}ue.push(Ce(ve.id,ve.type,Oe,ve.tags));continue}}return ue}function Mn(it,ee){const ue=[];ue.size=it.size,it.start!==void 0&&(ue.start=it.start,ue.end=it.end);for(let ve=0;ve<it.length;ve+=3)ue.push(it[ve]+ee,it[ve+1],it[ve+2]);return ue}function Nr(it,ee){if(it.transformed)return it;const ue=1<<it.z,ve=it.x,Oe=it.y;for(const $e of it.features){if($e.type===1){const ut=[];for(let at=0;at<$e.geometry.length;at+=2)ut.push(Fr($e.geometry[at],$e.geometry[at+1],ee,ue,ve,Oe));$e.geometry=ut;continue}const ct=[];for(const ut of $e.geometry){const at=[];for(let ft=0;ft<ut.length;ft+=2)at.push(Fr(ut[ft],ut[ft+1],ee,ue,ve,Oe));ct.push(at)}$e.geometry=ct}return it.transformed=!0,it}function Fr(it,ee,ue,ve,Oe,$e){return[Math.round(ue*(it*ve-Oe)),Math.round(ue*(ee*ve-$e))]}function xi(it,ee,ue,ve,Oe){const $e=ee===Oe.maxZoom?0:Oe.tolerance/((1<<ee)*Oe.extent),ct={features:[],numPoints:0,numSimplified:0,numFeatures:it.length,source:null,x:ue,y:ve,z:ee,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const ut of it)Br(ct,ut,$e,Oe);return ct}function Br(it,ee,ue,ve){it.minX=Math.min(it.minX,ee.minX),it.minY=Math.min(it.minY,ee.minY),it.maxX=Math.max(it.maxX,ee.maxX),it.maxY=Math.max(it.maxY,ee.maxY);let Oe,$e=ee.tags||null;switch(ee.type){case"Point":case"MultiPoint":{const ct=[];for(let ut=0;ut<ee.geometry.length;ut+=3)ct.push(ee.geometry[ut],ee.geometry[ut+1]),it.numPoints++,it.numSimplified++;if(!ct.length)return;Oe={type:1,tags:$e,geometry:ct};break}case"LineString":{const ct=[];if(hr(ct,ee.geometry,it,ue,!1,!1),!ct.length)return;if(ve.lineMetrics){$e={};for(const ut in ee.tags)$e[ut]=ee.tags[ut];$e.mapbox_clip_start=ee.geometry.start/ee.geometry.size,$e.mapbox_clip_end=ee.geometry.end/ee.geometry.size}Oe={type:2,tags:$e,geometry:ct};break}case"MultiLineString":case"Polygon":{const ct=[];for(let ut=0;ut<ee.geometry.length;ut++)hr(ct,ee.geometry[ut],it,ue,ee.type==="Polygon",ut===0);if(!ct.length)return;Oe={type:ee.type==="Polygon"?3:2,tags:$e,geometry:ct};break}case"MultiPolygon":{const ct=[];for(let ut=0;ut<ee.geometry.length;ut++){const at=ee.geometry[ut];for(let ft=0;ft<at.length;ft++)hr(ct,at[ft],it,ue,!0,ft===0)}if(!ct.length)return;Oe={type:3,tags:$e,geometry:ct};break}}ee.id!==null&&(Oe.id=ee.id),it.features.push(Oe)}function hr(it,ee,ue,ve,Oe,$e){const ct=ve*ve;if(ve>0&&ee.size<(Oe?ct:ve))return void(ue.numPoints+=ee.length/3);const ut=[];for(let at=0;at<ee.length;at+=3)(ve===0||ee[at+2]>ct)&&(ue.numSimplified++,ut.push(ee[at],ee[at+1])),ue.numPoints++;Oe&&(function(at,ft){let Dt=0;for(let St=0,Ke=at.length,Bt=Ke-2;St<Ke;Bt=St,St+=2)Dt+=(at[St]-at[Bt])*(at[St+1]+at[Bt+1]);if(Dt>0===ft)for(let St=0,Ke=at.length;St<Ke/2;St+=2){const Bt=at[St],gn=at[St+1];at[St]=at[Ke-2-St],at[St+1]=at[Ke-1-St],at[Ke-2-St]=Bt,at[Ke-1-St]=gn}})(ut,$e),it.push(ut)}function ri(it,ee,ue){const ve=!!ee.newGeometry,Oe=ee.removeAllProperties||ee.removeProperties?.length>0||ee.addOrUpdateProperties?.length>0;if(ve){let $e=Qe({type:"FeatureCollection",features:[{type:"Feature",id:it.id,geometry:ee.newGeometry,properties:Oe?wa(it.tags,ee):it.tags}]},ue);return $e=Hn($e,ue),$e[0]}if(Oe){const $e={...it};return $e.tags=wa($e.tags,ee),$e}return null}function wa(it,ee){if(ee.removeAllProperties)return{};const ue={...it||{}};if(ee.removeProperties)for(const ve of ee.removeProperties)delete ue[ve];if(ee.addOrUpdateProperties)for(const{key:ve,value:Oe}of ee.addOrUpdateProperties)ue[ve]=Oe;return ue}const _i={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,updateable:!1,debug:0};class Sa{options;tiles;tileCoords;stats={};total=0;source;constructor(ee,ue){const ve=(ue=this.options=Object.assign({},_i,ue)).debug;if(ve&&console.time("preprocess data"),ue.maxZoom<0||ue.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(ue.promoteId&&ue.generateId)throw new Error("promoteId and generateId cannot be used together.");let Oe=Qe(ee,ue);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",ue.indexMaxZoom,ue.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Oe=Hn(Oe,ue),Oe.length&&this.splitTile(Oe,0,0,0),ue.updateable&&(this.source=Oe),ve&&(Oe.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(ee,ue,ve,Oe,$e,ct,ut){const at=[ee,ue,ve,Oe],ft=this.options,Dt=ft.debug;for(;at.length;){Oe=at.pop(),ve=at.pop(),ue=at.pop(),ee=at.pop();const St=1<<ue,Ke=Ta(ue,ve,Oe);let Bt=this.tiles[Ke];if(!Bt&&(Dt>1&&console.time("creation"),Bt=this.tiles[Ke]=xi(ee,ue,ve,Oe,ft),this.tileCoords.push({z:ue,x:ve,y:Oe,id:Ke}),Dt)){Dt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",ue,ve,Oe,Bt.numFeatures,Bt.numPoints,Bt.numSimplified),console.timeEnd("creation"));const ht=`z${ue}`;this.stats[ht]=(this.stats[ht]||0)+1,this.total++}if(Bt.source=ee,$e==null){if(ue===ft.indexMaxZoom||Bt.numPoints<=ft.indexMaxPoints)continue}else{if(ue===ft.maxZoom||ue===$e)continue;if($e!=null){const ht=$e-ue;if(ve!==ct>>ht||Oe!==ut>>ht)continue}}if(Bt.source=null,!ee.length)continue;Dt>1&&console.time("clipping");const gn=.5*ft.buffer/ft.extent,on=.5-gn,hn=.5+gn,bn=1+gn;let pn=null,er=null,Cr=null,cr=null;const Dr=Tt(ee,St,ve-gn,ve+hn,0,Bt.minX,Bt.maxX,ft),ur=Tt(ee,St,ve+on,ve+bn,0,Bt.minX,Bt.maxX,ft);Dr&&(pn=Tt(Dr,St,Oe-gn,Oe+hn,1,Bt.minY,Bt.maxY,ft),er=Tt(Dr,St,Oe+on,Oe+bn,1,Bt.minY,Bt.maxY,ft)),ur&&(Cr=Tt(ur,St,Oe-gn,Oe+hn,1,Bt.minY,Bt.maxY,ft),cr=Tt(ur,St,Oe+on,Oe+bn,1,Bt.minY,Bt.maxY,ft)),Dt>1&&console.timeEnd("clipping"),at.push(pn||[],ue+1,2*ve,2*Oe),at.push(er||[],ue+1,2*ve,2*Oe+1),at.push(Cr||[],ue+1,2*ve+1,2*Oe),at.push(cr||[],ue+1,2*ve+1,2*Oe+1)}}getTile(ee,ue,ve){ee=+ee,ue=+ue,ve=+ve;const Oe=this.options,{extent:$e,debug:ct}=Oe;if(ee<0||ee>24)return null;const ut=1<<ee,at=Ta(ee,ue=ue+ut&ut-1,ve);if(this.tiles[at])return Nr(this.tiles[at],$e);ct>1&&console.log("drilling down to z%d-%d-%d",ee,ue,ve);let ft,Dt=ee,St=ue,Ke=ve;for(;!ft&&Dt>0;)Dt--,St>>=1,Ke>>=1,ft=this.tiles[Ta(Dt,St,Ke)];return ft?.source?(ct>1&&(console.log("found parent tile z%d-%d-%d",Dt,St,Ke),console.time("drilling down")),this.splitTile(ft.source,Dt,St,Ke,ee,ue,ve),ct>1&&console.timeEnd("drilling down"),this.tiles[at]?Nr(this.tiles[at],$e):null):null}invalidateTiles(ee){const ue=this.options,{debug:ve}=ue;let Oe=1/0,$e=-1/0,ct=1/0,ut=-1/0;for(const Dt of ee)Oe=Math.min(Oe,Dt.minX),$e=Math.max($e,Dt.maxX),ct=Math.min(ct,Dt.minY),ut=Math.max(ut,Dt.maxY);const at=ue.buffer/ue.extent,ft=new Set;for(const Dt in this.tiles){const St=this.tiles[Dt],Ke=1<<St.z,Bt=(St.x-at)/Ke,gn=(St.x+1+at)/Ke,on=(St.y-at)/Ke,hn=(St.y+1+at)/Ke;if($e<Bt||Oe>=gn||ut<on||ct>=hn)continue;let bn=!1;for(const pn of ee)if(pn.maxX>=Bt&&pn.minX<gn&&pn.maxY>=on&&pn.minY<hn){bn=!0;break}if(bn){if(ve){ve>1&&console.log("invalidate tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",St.z,St.x,St.y,St.numFeatures,St.numPoints,St.numSimplified);const pn=`z${St.z}`;this.stats[pn]=(this.stats[pn]||0)-1,this.total--}delete this.tiles[Dt],ft.add(Dt)}}ft.size&&(this.tileCoords=this.tileCoords.filter((Dt=>!ft.has(Dt.id))))}updateData(ee){const ue=this.options,ve=ue.debug;if(!ue.updateable)throw new Error("to update tile geojson `updateable` option must be set to true");const{affected:Oe,source:$e}=(function(St,Ke,Bt){const gn=(function(hn){return hn?{removeAll:hn.removeAll,remove:new Set(hn.remove||[]),add:new Map(hn.add?.map((bn=>[bn.id,bn]))),update:new Map(hn.update?.map((bn=>[bn.id,bn])))}:{remove:new Set,add:new Map,update:new Map}})(Ke);let on=[];if(gn.removeAll&&(on=St,St=[]),gn.remove.size||gn.add.size){const hn=[];for(const bn of St){const{id:pn}=bn;(gn.remove.has(pn)||gn.add.has(pn))&&hn.push(bn)}if(hn.length){on.push(...hn);const bn=new Set(hn.map((pn=>pn.id)));St=St.filter((pn=>!bn.has(pn.id)))}if(gn.add.size){let bn=Qe({type:"FeatureCollection",features:Array.from(gn.add.values())},Bt);bn=Hn(bn,Bt),on.push(...bn),St.push(...bn)}}if(gn.update.size)for(const[hn,bn]of gn.update){const pn=St.findIndex((cr=>cr.id===hn));if(pn===-1)continue;const er=St[pn],Cr=ri(er,bn,Bt);Cr&&(on.push(er,Cr),St[pn]=Cr)}return{affected:on,source:St}})(this.source,ee,ue);if(!Oe.length)return;this.source=$e,ve>1&&(console.log("invalidating tiles"),console.time("invalidating")),this.invalidateTiles(Oe),ve>1&&console.timeEnd("invalidating");const[ct,ut,at]=[0,0,0],ft=xi(this.source,ct,ut,at,this.options);ft.source=this.source;const Dt=Ta(ct,ut,at);if(this.tiles[Dt]=ft,this.tileCoords.push({z:ct,x:ut,y:at,id:Dt}),ve){const St=`z${ct}`;this.stats[St]=(this.stats[St]||0)+1,this.total++}}}function Ta(it,ee,ue){return 32*((1<<it)*ue+ee)+it}class Pa{constructor(ee,ue,ve,Oe=Ya){this._dataUpdateable=new Map,this.actor=ee,this.layerIndex=ue,this.availableImages=ve,this.tileState=new P,this._createGeoJSONIndex=Oe}loadVectorTile(ee){if(!this._geoJSONIndex)throw new Error("Unable to parse the data into a cluster or geojson");const{z:ue,x:ve,y:Oe}=ee.tileID.canonical,$e=this._geoJSONIndex.getTile(ue,ve,Oe);return $e?$(new d.d3($e.features,{version:2,extent:d.a5})):null}loadTile(ee){return d._(this,void 0,void 0,(function*(){const{uid:ue}=ee,ve=new w(ee);ve.abort=new AbortController;try{const Oe=this.loadVectorTile(ee);if(!Oe)return null;const{vectorTile:$e,rawData:ct}=Oe;ve.vectorTile=$e,this.tileState.markLoaded(ue,ve);const ut={rawData:ct};this.tileState.setParsing(ue,ut);try{return yield this._parseWorkerTile(ve,ee,ut)}finally{this.tileState.clearParsing(ue)}}catch(Oe){throw ve.status="done",this.tileState.markLoaded(ue,ve),Oe}}))}_reloadLoadedTile(ee){return d._(this,void 0,void 0,(function*(){const ue=ee.uid,ve=this.tileState.getLoaded(ue);if(!ve)throw new Error("Should not be trying to reload a tile that was never loaded or has been removed");if(ve.showCollisionBoxes=ee.showCollisionBoxes,ve.status==="parsing"){const Oe=this.tileState.consumeParsing(ue);return yield this._parseWorkerTile(ve,ee,Oe)}if(ve.status==="done"&&ve.vectorTile)return yield this._parseWorkerTile(ve,ee)}))}_parseWorkerTile(ee,ue,ve){return d._(this,void 0,void 0,(function*(){let Oe=yield ee.parse(ee.vectorTile,this.layerIndex,this.availableImages,this.actor,ue.subdivisionGranularity);if(ve){const{rawData:$e}=ve;Oe=d.e({rawTileData:$e.slice(0)},Oe)}return Oe}))}abortTile(ee){return d._(this,void 0,void 0,(function*(){this.tileState.abort(ee.uid)}))}removeTile(ee){return d._(this,void 0,void 0,(function*(){this.tileState.removeLoaded(ee.uid)}))}loadData(ee){return d._(this,void 0,void 0,(function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort();const ve=this._startRequestTiming(ee);this._pendingRequest=new AbortController;try{(!this._pendingData||ee.request||ee.data||ee.dataDiff)&&(this._pendingData=this.loadAndProcessGeoJSON(ee,this._pendingRequest));const Oe=yield this._pendingData;this._geoJSONIndex=this._createGeoJSONIndex(Oe,ee),this.tileState.clearLoaded();const $e={};return ee.request&&($e.data=Oe),this._finishRequestTiming(ve,ee,$e),$e}catch(Oe){if(delete this._pendingRequest,d.Z(Oe))return{abandoned:!0};throw Oe}}))}_startRequestTiming(ee){var ue;if(!((ue=ee.request)===null||ue===void 0)&&ue.collectResourceTiming)return new d.c$(ee.request.url)}_finishRequestTiming(ee,ue,ve){const Oe=ee?.finish();Oe&&(ve.resourceTiming={[ue.source]:JSON.parse(JSON.stringify(Oe))})}getData(){return d._(this,void 0,void 0,(function*(){return this._pendingData}))}reloadTile(ee){return this.tileState.getLoaded(ee.uid)?this._reloadLoadedTile(ee):this.loadTile(ee)}loadAndProcessGeoJSON(ee,ue){return d._(this,void 0,void 0,(function*(){let ve;if(ee.request?ve=yield this.loadGeoJSONFromUrl(ee.request,ee.promoteId,ue):ee.data?ve=this._loadGeoJSONFromObject(ee.data,ee.promoteId):ee.dataDiff&&(ve=this._loadGeoJSONFromDiff(ee.dataDiff,ee.promoteId,ee.source)),delete this._pendingRequest,typeof ve!="object")throw new Error(`Input data given to '${ee.source}' is not a valid GeoJSON object.`);return ae(ve,!0),ee.filter&&(ve=this._filterGeoJSON(ve,ee.filter)),ve}))}loadGeoJSONFromUrl(ee,ue,ve){return d._(this,void 0,void 0,(function*(){const Oe=yield d.j(ee,ve);return this._dataUpdateable=d.a7(Oe.data,ue),Oe.data}))}_loadGeoJSONFromObject(ee,ue){return this._dataUpdateable=d.a7(ee,ue),ee}_loadGeoJSONFromDiff(ee,ue,ve){if(!this._dataUpdateable)throw new Error(`Cannot update existing geojson data in ${ve}`);d.a8(this._dataUpdateable,ee,ue);const Oe=Array.from(this._dataUpdateable.values());return this._toFeatureCollection(Oe)}_filterGeoJSON(ee,ue){const ve=d.d4(ue,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(ve.result==="error")throw new Error(ve.value.map(($e=>`${$e.key}: ${$e.message}`)).join(", "));const Oe=ee.features.filter(($e=>ve.value.evaluate({zoom:0},$e)));return this._toFeatureCollection(Oe)}_toFeatureCollection(ee){return{type:"FeatureCollection",features:ee}}removeSource(ee){return d._(this,void 0,void 0,(function*(){var ue;(ue=this._pendingRequest)===null||ue===void 0||ue.abort()}))}getClusterExpansionZoom(ee){return this._geoJSONIndex.getClusterExpansionZoom(ee.clusterId)}getClusterChildren(ee){return this._geoJSONIndex.getChildren(ee.clusterId)}getClusterLeaves(ee){return this._geoJSONIndex.getLeaves(ee.clusterId,ee.limit,ee.offset)}}function Ya(it,ee){return ee.cluster?new _e((function({superclusterOptions:ue,clusterProperties:ve}){if(!ve||!ue)return ue;const Oe={},$e={},ct={accumulated:null,zoom:0},ut={properties:null},at=Object.keys(ve);for(const ft of at){const[Dt,St]=ve[ft],Ke=d.d4(St),Bt=d.d4(typeof Dt=="string"?[Dt,["accumulated"],["get",ft]]:Dt);Oe[ft]=Ke.value,$e[ft]=Bt.value}return ue.map=ft=>{ut.properties=ft;const Dt={};for(const St of at)Dt[St]=Oe[St].evaluate(ct,ut);return Dt},ue.reduce=(ft,Dt)=>{ut.properties=Dt;for(const St of at)ct.accumulated=ft[St],ft[St]=$e[St].evaluate(ct,ut)},ue})(ee)).load(it.features):(function(ue,ve){return new Sa(ue,ve)})(it,ee.geojsonVtOptions)}class gi{constructor(ee){this.self=ee,this.actor=new d.L(ee),this.layerIndexes={},this.availableImages={},this.workerSources={},this.demWorkerSources={},this.externalWorkerSourceTypes={},this.globalStates=new Map,this.self.registerWorkerSource=(ue,ve)=>{if(this.externalWorkerSourceTypes[ue])throw new Error(`Worker source with name "${ue}" already registered.`);this.externalWorkerSourceTypes[ue]=ve},this.self.addProtocol=d.cK,this.self.removeProtocol=d.cL,this.self.registerRTLTextPlugin=ue=>{d.d5.setMethods(ue)},this.actor.registerMessageHandler("LDT",((ue,ve)=>this._getDEMWorkerSource(ue,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RDT",((ue,ve)=>d._(this,void 0,void 0,(function*(){this._getDEMWorkerSource(ue,ve.source).removeTile(ve)})))),this.actor.registerMessageHandler("GCEZ",((ue,ve)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ve.type,ve.source).getClusterExpansionZoom(ve)})))),this.actor.registerMessageHandler("GCC",((ue,ve)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ve.type,ve.source).getClusterChildren(ve)})))),this.actor.registerMessageHandler("GCL",((ue,ve)=>d._(this,void 0,void 0,(function*(){return this._getWorkerSource(ue,ve.type,ve.source).getClusterLeaves(ve)})))),this.actor.registerMessageHandler("LD",((ue,ve)=>this._getWorkerSource(ue,ve.type,ve.source).loadData(ve))),this.actor.registerMessageHandler("GD",((ue,ve)=>this._getWorkerSource(ue,ve.type,ve.source).getData())),this.actor.registerMessageHandler("LT",((ue,ve)=>this._getWorkerSource(ue,ve.type,ve.source).loadTile(ve))),this.actor.registerMessageHandler("RT",((ue,ve)=>this._getWorkerSource(ue,ve.type,ve.source).reloadTile(ve))),this.actor.registerMessageHandler("AT",((ue,ve)=>this._getWorkerSource(ue,ve.type,ve.source).abortTile(ve))),this.actor.registerMessageHandler("RMT",((ue,ve)=>this._getWorkerSource(ue,ve.type,ve.source).removeTile(ve))),this.actor.registerMessageHandler("RS",((ue,ve)=>d._(this,void 0,void 0,(function*(){if(!this.workerSources[ue]||!this.workerSources[ue][ve.type]||!this.workerSources[ue][ve.type][ve.source])return;const Oe=this.workerSources[ue][ve.type][ve.source];delete this.workerSources[ue][ve.type][ve.source],Oe.removeSource!==void 0&&Oe.removeSource(ve)})))),this.actor.registerMessageHandler("RM",(ue=>d._(this,void 0,void 0,(function*(){delete this.layerIndexes[ue],delete this.availableImages[ue],delete this.workerSources[ue],delete this.demWorkerSources[ue],this.globalStates.delete(ue)})))),this.actor.registerMessageHandler("SR",((ue,ve)=>d._(this,void 0,void 0,(function*(){this.referrer=ve})))),this.actor.registerMessageHandler("SRPS",((ue,ve)=>this._syncRTLPluginState(ue,ve))),this.actor.registerMessageHandler("IS",((ue,ve)=>d._(this,void 0,void 0,(function*(){this.self.importScripts(ve)})))),this.actor.registerMessageHandler("SI",((ue,ve)=>this._setImages(ue,ve))),this.actor.registerMessageHandler("UL",((ue,ve)=>d._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).update(ve.layers,ve.removedIds,this._getGlobalState(ue))})))),this.actor.registerMessageHandler("UGS",((ue,ve)=>d._(this,void 0,void 0,(function*(){const Oe=this._getGlobalState(ue);for(const $e in ve)Oe[$e]=ve[$e]})))),this.actor.registerMessageHandler("SL",((ue,ve)=>d._(this,void 0,void 0,(function*(){this._getLayerIndex(ue).replace(ve,this._getGlobalState(ue))}))))}_getGlobalState(ee){let ue=this.globalStates.get(ee);return ue||(ue={},this.globalStates.set(ee,ue)),ue}_setImages(ee,ue){return d._(this,void 0,void 0,(function*(){this.availableImages[ee]=ue;for(const ve in this.workerSources[ee]){const Oe=this.workerSources[ee][ve];for(const $e in Oe)Oe[$e].availableImages=ue}}))}_syncRTLPluginState(ee,ue){return d._(this,void 0,void 0,(function*(){return yield d.d5.syncState(ue,this.self.importScripts)}))}_getAvailableImages(ee){let ue=this.availableImages[ee];return ue||(ue=[]),ue}_getLayerIndex(ee){let ue=this.layerIndexes[ee];return ue||(ue=this.layerIndexes[ee]=new o),ue}_getWorkerSource(ee,ue,ve){if(this.workerSources[ee]||(this.workerSources[ee]={}),this.workerSources[ee][ue]||(this.workerSources[ee][ue]={}),!this.workerSources[ee][ue][ve]){const Oe={sendAsync:($e,ct)=>($e.targetMapId=ee,this.actor.sendAsync($e,ct))};switch(ue){case"vector":this.workerSources[ee][ue][ve]=new X(Oe,this._getLayerIndex(ee),this._getAvailableImages(ee));break;case"geojson":this.workerSources[ee][ue][ve]=new Pa(Oe,this._getLayerIndex(ee),this._getAvailableImages(ee));break;default:this.workerSources[ee][ue][ve]=new this.externalWorkerSourceTypes[ue](Oe,this._getLayerIndex(ee),this._getAvailableImages(ee))}}return this.workerSources[ee][ue][ve]}_getDEMWorkerSource(ee,ue){return this.demWorkerSources[ee]||(this.demWorkerSources[ee]={}),this.demWorkerSources[ee][ue]||(this.demWorkerSources[ee][ue]=new K),this.demWorkerSources[ee][ue]}}return d.i(self)&&(self.worker=new gi(self)),gi})),s("index",["exports","./shared"],(function(d,o){var _="5.18.0";function w(){var C=new o.A(4);return o.A!=Float32Array&&(C[1]=0,C[2]=0),C[0]=1,C[3]=1,C}let A,P,N;const z={frame(C,a,u,y){const b=y||window,j=b.requestAnimationFrame((F=>{I(),a(F)})),{unsubscribe:I}=o.s(C.signal,"abort",(()=>{I(),b.cancelAnimationFrame(j),u(new o.a(C.signal.reason))}),!1)},frameAsync(C,a){return new Promise(((u,y)=>{this.frame(C,u,y,a)}))},getImageData(C,a=0){return this.getImageCanvasContext(C).getImageData(-a,-a,C.width+2*a,C.height+2*a)},getImageCanvasContext(C){const a=window.document.createElement("canvas"),u=a.getContext("2d",{willReadFrequently:!0});if(!u)throw new Error("failed to create canvas 2d context");return a.width=C.width,a.height=C.height,u.drawImage(C,0,0,C.width,C.height),u},resolveURL:C=>(A||(A=document.createElement("a")),A.href=C,A.href),hardwareConcurrency:typeof navigator<"u"&&navigator.hardwareConcurrency||4,get prefersReducedMotion(){return N!==void 0?N:!!matchMedia&&(P==null&&(P=matchMedia("(prefers-reduced-motion: reduce)")),P.matches)},set prefersReducedMotion(C){N=C}},q=new class{constructor(){this._realTime=typeof performance<"u"&&performance&&performance.now?performance.now.bind(performance):Date.now.bind(Date),this._frozenAt=null}getCurrentTime(){return this._frozenAt!==null?this._frozenAt:this._realTime()}setNow(C){this._frozenAt=C}restoreNow(){this._frozenAt=null}isFrozen(){return this._frozenAt!==null}};function $(){return q.getCurrentTime()}class O{static testProp(a){if(!O.docStyle)return a[0];for(let u=0;u<a.length;u++)if(a[u]in O.docStyle)return a[u];return a[0]}static create(a,u,y){const b=window.document.createElement(a);return u!==void 0&&(b.className=u),y&&y.appendChild(b),b}static createNS(a,u){return window.document.createElementNS(a,u)}static disableDrag(){O.docStyle&&O.selectProp&&(O.userSelect=O.docStyle[O.selectProp],O.docStyle[O.selectProp]="none")}static enableDrag(){O.docStyle&&O.selectProp&&(O.docStyle[O.selectProp]=O.userSelect)}static setTransform(a,u){a.style[O.transformProp]=u}static addEventListener(a,u,y,b={}){a.addEventListener(u,y,"passive"in b?b:b.capture)}static removeEventListener(a,u,y,b={}){a.removeEventListener(u,y,"passive"in b?b:b.capture)}static suppressClickInternal(a){a.preventDefault(),a.stopPropagation(),window.removeEventListener("click",O.suppressClickInternal,!0)}static suppressClick(){window.addEventListener("click",O.suppressClickInternal,!0),window.setTimeout((()=>{window.removeEventListener("click",O.suppressClickInternal,!0)}),0)}static getScale(a){const u=a.getBoundingClientRect();return{x:u.width/a.offsetWidth||1,y:u.height/a.offsetHeight||1,boundingClientRect:u}}static getPoint(a,u,y){const b=u.boundingClientRect;return new o.P((y.clientX-b.left)/u.x-a.clientLeft,(y.clientY-b.top)/u.y-a.clientTop)}static mousePos(a,u){const y=O.getScale(a);return O.getPoint(a,y,u)}static touchPos(a,u){const y=[],b=O.getScale(a);for(let j=0;j<u.length;j++)y.push(O.getPoint(a,b,u[j]));return y}static mouseButton(a){return a.button}static remove(a){a.parentNode&&a.parentNode.removeChild(a)}static sanitize(a){const u=new DOMParser().parseFromString(a,"text/html").body||document.createElement("body"),y=u.querySelectorAll("script");for(const b of y)b.remove();return O.clean(u),u.innerHTML}static isPossiblyDangerous(a,u){const y=u.replace(/\s+/g,"").toLowerCase();return!(!["src","href","xlink:href"].includes(a)||!y.includes("javascript:")&&!y.includes("data:"))||!!a.startsWith("on")||void 0}static clean(a){const u=a.children;for(const y of u)O.removeAttributes(y),O.clean(y)}static removeAttributes(a){for(const{name:u,value:y}of a.attributes)O.isPossiblyDangerous(u,y)&&a.removeAttribute(u)}}O.docStyle=typeof window<"u"&&window.document&&window.document.documentElement.style,O.selectProp=O.testProp(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]),O.transformProp=O.testProp(["transform","WebkitTransform"]);const X={supported:!1,testSupport:function(C){!ne&&te&&(H?ae(C):K=C)}};let K,te,ne=!1,H=!1;function ae(C){const a=C.createTexture();C.bindTexture(C.TEXTURE_2D,a);try{if(C.texImage2D(C.TEXTURE_2D,0,C.RGBA,C.RGBA,C.UNSIGNED_BYTE,te),C.isContextLost())return;X.supported=!0}catch{}C.deleteTexture(a),ne=!0}var de;typeof document<"u"&&(te=document.createElement("img"),te.onload=()=>{K&&ae(K),K=null,H=!0},te.onerror=()=>{ne=!0,K=null},te.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA="),(function(C){let a,u,y,b;C.resetRequestQueue=()=>{a=[],u=0,y=0,b={}},C.addThrottleControl=U=>{const Y=y++;return b[Y]=U,Y},C.removeThrottleControl=U=>{delete b[U],I()},C.getImage=(U,Y,re=!0)=>new Promise(((ce,le)=>{X.supported&&(U.headers||(U.headers={}),U.headers.accept="image/webp,*/*"),o.e(U,{type:"image"}),a.push({abortController:Y,requestParameters:U,supportImageRefresh:re,state:"queued",onError:ge=>{le(ge)},onSuccess:ge=>{ce(ge)}}),I()}));const j=U=>o._(this,void 0,void 0,(function*(){U.state="running";const{requestParameters:Y,supportImageRefresh:re,onError:ce,onSuccess:le,abortController:ge}=U,be=re===!1&&!o.i(self)&&!o.g(Y.url)&&(!Y.headers||Object.keys(Y.headers).reduce(((Ie,ze)=>Ie&&ze==="accept"),!0));u++;const Me=be?F(Y,ge):o.m(Y,ge);try{const Ie=yield Me;delete U.abortController,U.state="completed",Ie.data instanceof HTMLImageElement||o.b(Ie.data)?le(Ie):Ie.data&&le({data:yield(Ne=Ie.data,typeof createImageBitmap=="function"?o.f(Ne):o.h(Ne)),cacheControl:Ie.cacheControl,expires:Ie.expires})}catch(Ie){delete U.abortController,ce(Ie)}finally{u--,I()}var Ne})),I=()=>{const U=(()=>{for(const Y of Object.keys(b))if(b[Y]())return!0;return!1})()?o.c.MAX_PARALLEL_IMAGE_REQUESTS_PER_FRAME:o.c.MAX_PARALLEL_IMAGE_REQUESTS;for(let Y=u;Y<U&&a.length>0;Y++){const re=a.shift();re.abortController.signal.aborted?Y--:j(re)}},F=(U,Y)=>new Promise(((re,ce)=>{const le=new Image,ge=U.url,be=U.credentials;be&&be==="include"?le.crossOrigin="use-credentials":(be&&be==="same-origin"||!o.d(ge))&&(le.crossOrigin="anonymous"),Y.signal.addEventListener("abort",(()=>{le.src="",ce(new o.a(Y.signal.reason))})),le.fetchPriority="high",le.onload=()=>{le.onerror=le.onload=null,re({data:le})},le.onerror=()=>{le.onerror=le.onload=null,Y.signal.aborted||ce(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))},le.src=ge}))})(de||(de={})),de.resetRequestQueue();class ye{constructor(a){this._transformRequestFn=a??null}transformRequest(a,u){return this._transformRequestFn&&this._transformRequestFn(a,u)||{url:a}}setTransformRequest(a){this._transformRequestFn=a}}function Ae(C){const a=[];if(typeof C=="string")a.push({id:"default",url:C});else if(C&&C.length>0){const u=[];for(const{id:y,url:b}of C){const j=`${y}${b}`;u.indexOf(j)===-1&&(u.push(j),a.push({id:y,url:b}))}}return a}function _e(C,a,u){try{const y=new URL(C);return y.pathname+=`${a}${u}`,y.toString()}catch{throw new Error(`Invalid sprite URL "${C}", must be absolute. Modify style specification directly or use TransformStyleFunction to correct the issue dynamically`)}}function fe(C){const{userImage:a}=C;return!!(a&&a.render&&a.render())&&(C.data.replace(new Uint8Array(a.data.buffer)),!0)}class Ee extends o.E{constructor(){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}destroy(){this.atlasTexture&&(this.atlasTexture.destroy(),this.atlasTexture=null);for(const a of Object.keys(this.images))this.removeImage(a);this.patterns={},this.atlasImage=new o.R({width:1,height:1}),this.dirty=!0}isLoaded(){return this.loaded}setLoaded(a){if(this.loaded!==a&&(this.loaded=a,a)){for(const{ids:u,promiseResolve:y}of this.requestors)y(this._getImagesForIds(u));this.requestors=[]}}getImage(a){const u=this.images[a];if(u&&!u.data&&u.spriteData){const y=u.spriteData;u.data=new o.R({width:y.width,height:y.height},y.context.getImageData(y.x,y.y,y.width,y.height).data),u.spriteData=null}return u}addImage(a,u){if(this.images[a])throw new Error(`Image id ${a} already exist, use updateImage instead`);this._validate(a,u)&&(this.images[a]=u)}_validate(a,u){let y=!0;const b=u.data||u.spriteData;return this._validateStretch(u.stretchX,b&&b.width)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchX" value`))),y=!1),this._validateStretch(u.stretchY,b&&b.height)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "stretchY" value`))),y=!1),this._validateContent(u.content,u)||(this.fire(new o.k(new Error(`Image "${a}" has invalid "content" value`))),y=!1),y}_validateStretch(a,u){if(!a)return!0;let y=0;for(const b of a){if(b[0]<y||b[1]<b[0]||u<b[1])return!1;y=b[1]}return!0}_validateContent(a,u){if(!a)return!0;if(a.length!==4)return!1;const y=u.spriteData,b=y&&y.width||u.data.width,j=y&&y.height||u.data.height;return!(a[0]<0||b<a[0]||a[1]<0||j<a[1]||a[2]<0||b<a[2]||a[3]<0||j<a[3]||a[2]<a[0]||a[3]<a[1])}updateImage(a,u,y=!0){const b=this.getImage(a);if(y&&(b.data.width!==u.data.width||b.data.height!==u.data.height))throw new Error(`size mismatch between old image (${b.data.width}x${b.data.height}) and new image (${u.data.width}x${u.data.height}).`);u.version=b.version+1,this.images[a]=u,this.updatedImages[a]=!0}removeImage(a){const u=this.images[a];delete this.images[a],delete this.patterns[a],u.userImage&&u.userImage.onRemove&&u.userImage.onRemove()}listImages(){return Object.keys(this.images)}getImages(a){return new Promise(((u,y)=>{let b=!0;if(!this.isLoaded())for(const j of a)this.images[j]||(b=!1);this.isLoaded()||b?u(this._getImagesForIds(a)):this.requestors.push({ids:a,promiseResolve:u})}))}_getImagesForIds(a){const u={};for(const y of a){let b=this.getImage(y);b||(this.fire(new o.l("styleimagemissing",{id:y})),b=this.getImage(y)),b?u[y]={data:b.data.clone(),pixelRatio:b.pixelRatio,sdf:b.sdf,version:b.version,stretchX:b.stretchX,stretchY:b.stretchY,content:b.content,textFitWidth:b.textFitWidth,textFitHeight:b.textFitHeight,hasRenderCallback:!!(b.userImage&&b.userImage.render)}:o.w(`Image "${y}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}return u}getPixelSize(){const{width:a,height:u}=this.atlasImage;return{width:a,height:u}}getPattern(a){const u=this.patterns[a],y=this.getImage(a);if(!y)return null;if(u&&u.position.version===y.version)return u.position;if(u)u.position.version=y.version;else{const b={w:y.data.width+2,h:y.data.height+2,x:0,y:0},j=new o.I(b,y);this.patterns[a]={bin:b,position:j}}return this._updatePatternAtlas(),this.patterns[a].position}bind(a){const u=a.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new o.T(a,this.atlasImage,u.RGBA),this.atlasTexture.bind(u.LINEAR,u.CLAMP_TO_EDGE)}_updatePatternAtlas(){const a=[];for(const j in this.patterns)a.push(this.patterns[j].bin);const{w:u,h:y}=o.p(a),b=this.atlasImage;b.resize({width:u||1,height:y||1});for(const j in this.patterns){const{bin:I}=this.patterns[j],F=I.x+1,U=I.y+1,Y=this.getImage(j).data,re=Y.width,ce=Y.height;o.R.copy(Y,b,{x:0,y:0},{x:F,y:U},{width:re,height:ce}),o.R.copy(Y,b,{x:0,y:ce-1},{x:F,y:U-1},{width:re,height:1}),o.R.copy(Y,b,{x:0,y:0},{x:F,y:U+ce},{width:re,height:1}),o.R.copy(Y,b,{x:re-1,y:0},{x:F-1,y:U},{width:1,height:ce}),o.R.copy(Y,b,{x:0,y:0},{x:F+re,y:U},{width:1,height:ce})}this.dirty=!0}beginFrame(){this.callbackDispatchedThisFrame={}}dispatchRenderCallbacks(a){for(const u of a){if(this.callbackDispatchedThisFrame[u])continue;this.callbackDispatchedThisFrame[u]=!0;const y=this.getImage(u);y||o.w(`Image with ID: "${u}" was not found`),fe(y)&&this.updateImage(u,y)}}cloneImages(){const a={};for(const u in this.images){const y=this.images[u];a[u]=Object.assign(Object.assign({},y),{data:y.data?y.data.clone():null})}return a}}const Be=1e20;function De(C,a,u,y,b,j,I,F,U){for(let Y=a;Y<a+y;Y++)Je(C,u*j+Y,j,b,I,F,U);for(let Y=u;Y<u+b;Y++)Je(C,Y*j+a,1,y,I,F,U)}function Je(C,a,u,y,b,j,I){j[0]=0,I[0]=-Be,I[1]=Be,b[0]=C[a];for(let F=1,U=0,Y=0;F<y;F++){b[F]=C[a+F*u];const re=F*F;do{const ce=j[U];Y=(b[F]-b[ce]+re-ce*ce)/(F-ce)/2}while(Y<=I[U]&&--U>-1);U++,j[U]=F,I[U]=Y,I[U+1]=Be}for(let F=0,U=0;F<y;F++){for(;I[U+1]<F;)U++;const Y=j[U],re=F-Y;C[a+F*u]=b[Y]+re*re}}const Ve=o.v.layout_symbol["text-font"].default.join(",");class et{constructor(a,u,y){this.requestManager=a,this.localIdeographFontFamily=u,this.entries={},this.lang=y}setURL(a){this.url=a}getGlyphs(a){return o._(this,void 0,void 0,(function*(){const u=[];for(const j in a)for(const I of a[j])u.push(this._getAndCacheGlyphsPromise(j,I));const y=yield Promise.all(u),b={};for(const{stack:j,id:I,glyph:F}of y)b[j]||(b[j]={}),b[j][I]=F&&{id:F.id,bitmap:F.bitmap.clone(),metrics:F.metrics};return b}))}_getAndCacheGlyphsPromise(a,u){return o._(this,void 0,void 0,(function*(){let y=this.entries[a];y||(y=this.entries[a]={glyphs:{},requests:{},ranges:{}});let b=y.glyphs[u];return b!==void 0?{stack:a,id:u,glyph:b}:!this.url||this._charUsesLocalIdeographFontFamily(u)?(b=y.glyphs[u]=this._drawGlyph(y,a,u),{stack:a,id:u,glyph:b}):yield this._downloadAndCacheRangePromise(a,u)}))}_downloadAndCacheRangePromise(a,u){return o._(this,void 0,void 0,(function*(){const y=this.entries[a],b=Math.floor(u/256);if(y.ranges[b])return{stack:a,id:u,glyph:null};if(!y.requests[b]){const j=et.loadGlyphRange(a,b,this.url,this.requestManager);y.requests[b]=j}try{const j=yield y.requests[b];for(const I in j)y.glyphs[+I]=j[+I];return y.ranges[b]=!0,{stack:a,id:u,glyph:j[u]||null}}catch(j){const I=y.glyphs[u]=this._drawGlyph(y,a,u);return this._warnOnMissingGlyphRange(I,b,u,j),{stack:a,id:u,glyph:I}}}))}_warnOnMissingGlyphRange(a,u,y,b){const j=256*u,I=j+255,F=y.toString(16).padStart(4,"0").toUpperCase();o.w(`Unable to load glyph range ${u}, ${j}-${I}. Rendering codepoint U+${F} locally instead. ${b}`)}_charUsesLocalIdeographFontFamily(a){return!!this.localIdeographFontFamily&&o.q(a)}_drawGlyph(a,u,y){const b=u===Ve&&this.localIdeographFontFamily!==""&&this._charUsesLocalIdeographFontFamily(y),j=b?"ideographTinySDF":"tinySDF";a[j]||(a[j]=this._createTinySDF(b?this.localIdeographFontFamily:u));const I=a[j].draw(String.fromCodePoint(y)),F=/^\p{gc=Cf}+$/u.test(String.fromCodePoint(y));return{id:y,bitmap:new o.r({width:I.width||60,height:I.height||60},I.data),metrics:{width:F?0:I.glyphWidth/2||24,height:I.glyphHeight/2||24,left:I.glyphLeft/2+.5||0,top:I.glyphTop/2-27.5||-8,advance:F?0:I.glyphAdvance/2||24,isDoubleResolution:!0}}}_createTinySDF(a){const u=a?a.split(","):[];u.push("sans-serif");const y=u.map((b=>/[-\w]+/.test(b)?b:`'${CSS.escape(b)}'`)).join(",");return new et.TinySDF({fontSize:48,buffer:6,radius:16,cutoff:.25,fontFamily:y,fontWeight:this._fontWeight(u[0]),fontStyle:this._fontStyle(u[0]),lang:this.lang})}_fontStyle(a){return/italic/i.test(a)?"italic":/oblique/i.test(a)?"oblique":"normal"}_fontWeight(a){const u={thin:100,hairline:100,"extra light":200,"ultra light":200,light:300,normal:400,regular:400,medium:500,semibold:600,demibold:600,bold:700,"extra bold":800,"ultra bold":800,black:900,heavy:900,"extra black":950,"ultra black":950};let y;for(const[b,j]of Object.entries(u))new RegExp(`\\b${b}\\b`,"i").test(a)&&(y=`${j}`);return y}destroy(){for(const a in this.entries){const u=this.entries[a];u.tinySDF&&(u.tinySDF=null),u.ideographTinySDF&&(u.ideographTinySDF=null),u.glyphs={},u.requests={},u.ranges={}}this.entries={}}}et.loadGlyphRange=function(C,a,u,y){return o._(this,void 0,void 0,(function*(){const b=256*a,j=b+255,I=y.transformRequest(u.replace("{fontstack}",C).replace("{range}",`${b}-${j}`),"Glyphs"),F=yield o.n(I,new AbortController);if(!F||!F.data)throw new Error(`Could not load glyph range. range: ${a}, ${b}-${j}`);const U={};for(const Y of o.o(F.data))U[Y.id]=Y;return U}))},et.TinySDF=class{constructor({fontSize:C=24,buffer:a=3,radius:u=8,cutoff:y=.25,fontFamily:b="sans-serif",fontWeight:j="normal",fontStyle:I="normal",lang:F=null}={}){this.buffer=a,this.cutoff=y,this.radius=u,this.lang=F;const U=this.size=C+4*a,Y=this._createCanvas(U),re=this.ctx=Y.getContext("2d",{willReadFrequently:!0});re.font=`${I} ${j} ${C}px ${b}`,re.textBaseline="alphabetic",re.textAlign="left",re.fillStyle="black",this.gridOuter=new Float64Array(U*U),this.gridInner=new Float64Array(U*U),this.f=new Float64Array(U),this.z=new Float64Array(U+1),this.v=new Uint16Array(U)}_createCanvas(C){const a=document.createElement("canvas");return a.width=a.height=C,a}draw(C){const{width:a,actualBoundingBoxAscent:u,actualBoundingBoxDescent:y,actualBoundingBoxLeft:b,actualBoundingBoxRight:j}=this.ctx.measureText(C),I=Math.ceil(u),F=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(j-b))),U=Math.min(this.size-this.buffer,I+Math.ceil(y)),Y=F+2*this.buffer,re=U+2*this.buffer,ce=Math.max(Y*re,0),le=new Uint8ClampedArray(ce),ge={data:le,width:Y,height:re,glyphWidth:F,glyphHeight:U,glyphTop:I,glyphLeft:0,glyphAdvance:a};if(F===0||U===0)return ge;const{ctx:be,buffer:Me,gridInner:Ne,gridOuter:Ie}=this;this.lang&&(be.lang=this.lang),be.clearRect(Me,Me,F,U),be.fillText(C,Me,Me+I);const ze=be.getImageData(Me,Me,F,U);Ie.fill(Be,0,ce),Ne.fill(0,0,ce);for(let He=0;He<U;He++)for(let Fe=0;Fe<F;Fe++){const Ge=ze.data[4*(He*F+Fe)+3]/255;if(Ge===0)continue;const Ye=(He+Me)*Y+Fe+Me;if(Ge===1)Ie[Ye]=0,Ne[Ye]=Be;else{const Ue=.5-Ge;Ie[Ye]=Ue>0?Ue*Ue:0,Ne[Ye]=Ue<0?Ue*Ue:0}}De(Ie,0,0,Y,re,Y,this.f,this.v,this.z),De(Ne,Me,Me,F,U,Y,this.f,this.v,this.z);for(let He=0;He<ce;He++){const Fe=Math.sqrt(Ie[He])-Math.sqrt(Ne[He]);le[He]=Math.round(255-255*(Fe/this.radius+this.cutoff))}return ge}};class Ce{constructor(){this.specification=o.u.light.position}possiblyEvaluate(a,u){return o.F(a.expression.evaluate(u))}interpolate(a,u,y){return{x:o.G.number(a.x,u.x,y),y:o.G.number(a.y,u.y,y),z:o.G.number(a.z,u.z,y)}}}let We;class Qe extends o.E{constructor(a){super(),We=We||new o.t({anchor:new o.D(o.u.light.anchor),position:new Ce,color:new o.D(o.u.light.color),intensity:new o.D(o.u.light.intensity)}),this._transitionable=new o.x(We,void 0),this.setLight(a),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(a,u={}){if(!this._validate(o.y,a,u))for(const y in a){const b=a[y];y.endsWith(o.z)?this._transitionable.setTransition(y.slice(0,-o.z.length),b):this._transitionable.setValue(y,b)}}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,y){return(!y||y.validate!==!1)&&o.B(this,a.call(o.C,{value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.u}))}}const Re=new o.t({"sky-color":new o.D(o.u.sky["sky-color"]),"horizon-color":new o.D(o.u.sky["horizon-color"]),"fog-color":new o.D(o.u.sky["fog-color"]),"fog-ground-blend":new o.D(o.u.sky["fog-ground-blend"]),"horizon-fog-blend":new o.D(o.u.sky["horizon-fog-blend"]),"sky-horizon-blend":new o.D(o.u.sky["sky-horizon-blend"]),"atmosphere-blend":new o.D(o.u.sky["atmosphere-blend"])});class nt extends o.E{constructor(a){super(),this._transitionable=new o.x(Re,void 0),this.setSky(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0))}setSky(a,u={}){if(!this._validate(o.J,a,u)){a||(a={"sky-color":"transparent","horizon-color":"transparent","fog-color":"transparent","fog-ground-blend":1,"atmosphere-blend":0});for(const y in a){const b=a[y];y.endsWith(o.z)?this._transitionable.setTransition(y.slice(0,-o.z.length),b):this._transitionable.setValue(y,b)}}}getSky(){return this._transitionable.serialize()}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}_validate(a,u,y={}){return y?.validate!==!1&&o.B(this,a.call(o.C,o.e({value:u,style:{glyphs:!0,sprite:!0},styleSpec:o.u})))}calculateFogBlendOpacity(a){return a<60?0:a<70?(a-60)/10:1}}class pt{constructor(a,u){this.width=a,this.height=u,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}}getDash(a,u){const y=a.join(",")+String(u);return this.dashEntry[y]||(this.dashEntry[y]=this.addDash(a,u)),this.dashEntry[y]}getDashRanges(a,u,y){const b=[];let j=a.length%2==1?-a[a.length-1]*y:0,I=a[0]*y,F=!0;b.push({left:j,right:I,isDash:F,zeroLength:a[0]===0});let U=a[0];for(let Y=1;Y<a.length;Y++){F=!F;const re=a[Y];j=U*y,U+=re,I=U*y,b.push({left:j,right:I,isDash:F,zeroLength:re===0})}return b}addRoundDash(a,u,y){const b=u/2;for(let j=-y;j<=y;j++){const I=this.width*(this.nextRow+y+j);let F=0,U=a[F];for(let Y=0;Y<this.width;Y++){Y/U.right>1&&(U=a[++F]);const re=Math.abs(Y-U.left),ce=Math.abs(Y-U.right),le=Math.min(re,ce);let ge;const be=j/y*(b+1);if(U.isDash){const Me=b-Math.abs(be);ge=Math.sqrt(le*le+Me*Me)}else ge=b-Math.sqrt(le*le+be*be);this.data[I+Y]=Math.max(0,Math.min(255,ge+128))}}}addRegularDash(a){for(let F=a.length-1;F>=0;--F){const U=a[F],Y=a[F+1];U.zeroLength?a.splice(F,1):Y&&Y.isDash===U.isDash&&(Y.left=U.left,a.splice(F,1))}const u=a[0],y=a[a.length-1];u.isDash===y.isDash&&(u.left=y.left-this.width,y.right=u.right+this.width);const b=this.width*this.nextRow;let j=0,I=a[j];for(let F=0;F<this.width;F++){F/I.right>1&&(I=a[++j]);const U=Math.abs(F-I.left),Y=Math.abs(F-I.right),re=Math.min(U,Y);this.data[b+F]=Math.max(0,Math.min(255,(I.isDash?re:-re)+128))}}addDash(a,u){const y=u?7:0,b=2*y+1;if(this.nextRow+b>this.height)return o.w("LineAtlas out of space"),null;let j=0;for(let F=0;F<a.length;F++)j+=a[F];if(j!==0){const F=this.width/j,U=this.getDashRanges(a,this.width,F);u?this.addRoundDash(U,F,y):this.addRegularDash(U)}const I={y:this.nextRow+y,height:2*y,width:j};return this.nextRow+=b,this.dirty=!0,I}bind(a){const u=a.gl;this.texture?(u.bindTexture(u.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,u.texSubImage2D(u.TEXTURE_2D,0,0,0,this.width,this.height,u.ALPHA,u.UNSIGNED_BYTE,this.data))):(this.texture=u.createTexture(),u.bindTexture(u.TEXTURE_2D,this.texture),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_S,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_WRAP_T,u.REPEAT),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MIN_FILTER,u.LINEAR),u.texParameteri(u.TEXTURE_2D,u.TEXTURE_MAG_FILTER,u.LINEAR),u.texImage2D(u.TEXTURE_2D,0,u.ALPHA,this.width,this.height,0,u.ALPHA,u.UNSIGNED_BYTE,this.data))}}const Ct="maplibre_preloaded_worker_pool";class Mt{constructor(){this.active={}}acquire(a){if(!this.workers)for(this.workers=[];this.workers.length<Mt.workerCount;)this.workers.push(new Worker(o.c.WORKER_URL));return this.active[a]=!0,this.workers.slice()}release(a){delete this.active[a],this.numActive()===0&&(this.workers.forEach((u=>{u.terminate()})),this.workers=null)}isPreloaded(){return!!this.active[Ct]}numActive(){return Object.keys(this.active).length}}const Nt=Math.floor(z.hardwareConcurrency/2);let Tt,Ot;function rt(){return Tt||(Tt=new Mt),Tt}Mt.workerCount=o.K(globalThis)?Math.max(Math.min(Nt,3),1):1;class zt{constructor(a,u){this.workerPool=a,this.actors=[],this.currentActor=0,this.id=u;const y=this.workerPool.acquire(u);for(let b=0;b<y.length;b++){const j=new o.L(y[b],u);j.name=`Worker ${b}`,this.actors.push(j)}if(!this.actors.length)throw new Error("No actors found")}broadcast(a,u){const y=[];for(const b of this.actors)y.push(b.sendAsync({type:a,data:u}));return Promise.all(y)}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(a=!0){this.actors.forEach((u=>{u.remove()})),this.actors=[],a&&this.workerPool.release(this.id)}registerMessageHandler(a,u){for(const y of this.actors)y.registerMessageHandler(a,u)}unregisterMessageHandler(a){for(const u of this.actors)u.unregisterMessageHandler(a)}}function Ut(){return Ot||(Ot=new zt(rt(),o.M),Ot.registerMessageHandler("GR",((C,a,u)=>o.m(a,u)))),Ot}function dt(C,a){const u=o.N();return o.O(u,u,[1,1,0]),o.Q(u,u,[.5*C.width,.5*C.height,1]),C.calculatePosMatrix?o.S(u,u,C.calculatePosMatrix(a.toUnwrapped())):u}function Rn(C,a,u,y,b,j,I){var F;const U=(function(le,ge,be){if(le)for(const Me of le){const Ne=ge[Me];if(Ne&&Ne.source===be&&Ne.type==="fill-extrusion")return!0}else for(const Me in ge){const Ne=ge[Me];if(Ne.source===be&&Ne.type==="fill-extrusion")return!0}return!1})((F=b?.layers)!==null&&F!==void 0?F:null,a,C.id),Y=j.maxPitchScaleFactor(),re=C.tilesIn(y,Y,U);re.sort(cn);const ce=[];for(const le of re)ce.push({wrappedTileID:le.tileID.wrapped().key,queryResults:le.tile.queryRenderedFeatures(a,u,C.getState(),le.queryGeometry,le.cameraQueryGeometry,le.scale,b,j,Y,dt(j,le.tileID),I?(ge,be)=>I(le.tileID,ge,be):void 0)});return(function(le,ge){for(const be in le)for(const Me of le[be])Hn(Me,ge);return le})((function(le){const ge={},be={};for(const Me of le){const Ne=Me.queryResults,Ie=Me.wrappedTileID,ze=be[Ie]=be[Ie]||{};for(const He in Ne){const Fe=Ne[He],Ge=ze[He]=ze[He]||{},Ye=ge[He]=ge[He]||[];for(const Ue of Fe)Ge[Ue.featureIndex]||(Ge[Ue.featureIndex]=!0,Ye.push(Ue))}}return ge})(ce),C)}function cn(C,a){const u=C.tileID,y=a.tileID;return u.overscaledZ-y.overscaledZ||u.canonical.y-y.canonical.y||u.wrap-y.wrap||u.canonical.x-y.canonical.x}function Hn(C,a){const u=C.feature,y=a.getFeatureState(u.layer["source-layer"],u.id);u.source=u.layer.source,u.layer["source-layer"]&&(u.sourceLayer=u.layer["source-layer"]),u.state=y}function Gn(C,a,u,y){return o._(this,void 0,void 0,(function*(){let b=C;if(C.url?b=(yield o.j(a.transformRequest(C.url,"Source"),u)).data:yield z.frameAsync(u,y),!b)return null;const j=o.U(o.e(b,C),["tiles","minzoom","maxzoom","attribution","bounds","scheme","tileSize","encoding"]);return"vector_layers"in b&&b.vector_layers&&(j.vectorLayerIds=b.vector_layers.map((I=>I.id))),j}))}class Mn{constructor(a,u){a&&(u?this.setSouthWest(a).setNorthEast(u):Array.isArray(a)&&(a.length===4?this.setSouthWest([a[0],a[1]]).setNorthEast([a[2],a[3]]):this.setSouthWest(a[0]).setNorthEast(a[1])))}setNorthEast(a){return this._ne=a instanceof o.V?new o.V(a.lng,a.lat):o.V.convert(a),this}setSouthWest(a){return this._sw=a instanceof o.V?new o.V(a.lng,a.lat):o.V.convert(a),this}extend(a){const u=this._sw,y=this._ne;let b,j;if(a instanceof o.V)b=a,j=a;else{if(!(a instanceof Mn))return Array.isArray(a)?a.length===4||a.every(Array.isArray)?this.extend(Mn.convert(a)):this.extend(o.V.convert(a)):a&&("lng"in a||"lon"in a)&&"lat"in a?this.extend(o.V.convert(a)):this;if(b=a._sw,j=a._ne,!b||!j)return this}return u||y?(u.lng=Math.min(b.lng,u.lng),u.lat=Math.min(b.lat,u.lat),y.lng=Math.max(j.lng,y.lng),y.lat=Math.max(j.lat,y.lat)):(this._sw=new o.V(b.lng,b.lat),this._ne=new o.V(j.lng,j.lat)),this}getCenter(){return new o.V((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new o.V(this.getWest(),this.getNorth())}getSouthEast(){return new o.V(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(a){const{lng:u,lat:y}=o.V.convert(a);let b=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(b=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=y&&y<=this._ne.lat&&b}intersects(a){if(!((a=Mn.convert(a)).getNorth()>=this.getSouth()&&a.getSouth()<=this.getNorth()))return!1;const u=Math.abs(this.getEast()-this.getWest()),y=Math.abs(a.getEast()-a.getWest());if(u>=360||y>=360)return!0;const b=o.W(this.getWest(),-180,180),j=o.W(this.getEast(),-180,180),I=o.W(a.getWest(),-180,180),F=o.W(a.getEast(),-180,180),U=b>j,Y=I>F;return!(!U||!Y)||(U?F>=b||I<=j:Y?j>=I||b<=F:I<=j&&F>=b)}static convert(a){return a instanceof Mn?a:a&&new Mn(a)}static fromLngLat(a,u=0){const y=360*u/40075017,b=y/Math.cos(Math.PI/180*a.lat);return new Mn(new o.V(a.lng-b,a.lat-y),new o.V(a.lng+b,a.lat+y))}adjustAntiMeridian(){const a=new o.V(this._sw.lng,this._sw.lat),u=new o.V(this._ne.lng,this._ne.lat);return new Mn(a,a.lng>u.lng?new o.V(u.lng+360,u.lat):u)}}class Nr{constructor(a,u,y){this.bounds=Mn.convert(this.validateBounds(a)),this.minzoom=u||0,this.maxzoom=y||24}validateBounds(a){return Array.isArray(a)&&a.length===4?[Math.max(-180,a[0]),Math.max(-90,a[1]),Math.min(180,a[2]),Math.min(90,a[3])]:[-180,-90,180,90]}contains(a){const u=Math.pow(2,a.z),y=Math.floor(o.Y(this.bounds.getWest())*u),b=Math.floor(o.X(this.bounds.getNorth())*u),j=Math.ceil(o.Y(this.bounds.getEast())*u),I=Math.ceil(o.X(this.bounds.getSouth())*u);return a.x>=y&&a.x<j&&a.y>=b&&a.y<I}}class Fr extends o.E{constructor(a,u,y,b){if(super(),this.id=a,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,o.e(this,o.U(u,["url","scheme","tileSize","promoteId","encoding"])),this._options=o.e({type:"vector"},u),this._collectResourceTiming=u.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(b)}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const a=yield Gn(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,this.map.style.tileManagers[this.id].clearTiles(),a&&(o.e(this,a),a.bounds&&(this.tileBounds=new Nr(a.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})))}catch(a){this._tileJSONRequest=null,this._loaded=!0,o.Z(a)||this.fire(new o.k(a))}}))}loaded(){return this._loaded}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}onAdd(a){this.map=a,this.load()}setSourceProperty(a){this._tileJSONRequest&&this._tileJSONRequest.abort(),a(),this.load()}setTiles(a){return this.setSourceProperty((()=>{this._options.tiles=a})),this}setUrl(a){return this.setSourceProperty((()=>{this.url=a,this._options.url=a})),this}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}serialize(){return o.e({},this._options)}loadTile(a){return o._(this,void 0,void 0,(function*(){const u=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y={request:this.map._requestManager.transformRequest(u,"Tile"),uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,tileSize:this.tileSize*a.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity,encoding:this.encoding,overzoomParameters:this._getOverzoomParameters(a)};y.request.collectResourceTiming=this._collectResourceTiming;let b="RT";if(a.actor&&a.state!=="expired"){if(a.state==="loading")return new Promise(((j,I)=>{a.reloadPromise={resolve:j,reject:I}}))}else a.actor=this.dispatcher.getActor(),b="LT";a.abortController=new AbortController;try{const j=yield a.actor.sendAsync({type:b,data:y},a.abortController);if(delete a.abortController,a.aborted)return;this._afterTileLoadWorkerResponse(a,j)}catch(j){if(delete a.abortController,a.aborted)return;if(j&&j.status!==404)throw j;this._afterTileLoadWorkerResponse(a,null)}}))}_getOverzoomParameters(a){if(a.tileID.canonical.z<=this.maxzoom||this.map._zoomLevelsToOverscale===void 0)return;const u=a.tileID.scaledTo(this.maxzoom).canonical,y=u.url(this.tiles,this.map.getPixelRatio(),this.scheme);return{maxZoomTileID:u,overzoomRequest:this.map._requestManager.transformRequest(y,"Tile")}}_afterTileLoadWorkerResponse(a,u){if(u&&u.resourceTiming&&(a.resourceTiming=u.resourceTiming),u&&this.map._refreshExpiredTiles&&a.setExpiryData(u),a.loadVectorData(u,this.map.painter),a.reloadPromise){const y=a.reloadPromise;a.reloadPromise=null,this.loadTile(a).then(y.resolve).catch(y.reject)}}abortTile(a){return o._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.actor&&(yield a.actor.sendAsync({type:"AT",data:{uid:a.uid,type:this.type,source:this.id}}))}))}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.unloadVectorData(),a.actor&&(yield a.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}}))}))}hasTransition(){return!1}}class xi extends o.E{constructor(a,u,y,b){super(),this.id=a,this.dispatcher=y,this.setEventedParent(b),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=o.e({type:"raster"},u),o.e(this,o.U(u,["url","scheme","tileSize"]))}load(){return o._(this,arguments,void 0,(function*(a=!1){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this._tileJSONRequest=new AbortController;try{const u=yield Gn(this._options,this.map._requestManager,this._tileJSONRequest,this.map._ownerWindow);this._tileJSONRequest=null,this._loaded=!0,u&&(o.e(this,u),u.bounds&&(this.tileBounds=new Nr(u.bounds,this.minzoom,this.maxzoom)),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new o.l("data",{dataType:"source",sourceDataType:"content",sourceDataChanged:a})))}catch(u){this._tileJSONRequest=null,this._loaded=!0,o.Z(u)||this.fire(new o.k(u))}}))}loaded(){return this._loaded}onAdd(a){this.map=a,this.load()}onRemove(){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null)}setSourceProperty(a){this._tileJSONRequest&&(this._tileJSONRequest.abort(),this._tileJSONRequest=null),a(),this.load(!0)}setTiles(a){return this.setSourceProperty((()=>{this._options.tiles=a})),this}setUrl(a){return this.setSourceProperty((()=>{this.url=a,this._options.url=a})),this}serialize(){return o.e({},this._options)}hasTile(a){return!this.tileBounds||this.tileBounds.contains(a.canonical)}loadTile(a){return o._(this,void 0,void 0,(function*(){const u=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme);a.abortController=new AbortController;try{const y=yield de.getImage(this.map._requestManager.transformRequest(u,"Tile"),a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(y&&y.data){this.map._refreshExpiredTiles&&(y.cacheControl||y.expires)&&a.setExpiryData({cacheControl:y.cacheControl,expires:y.expires});const b=this.map.painter.context,j=b.gl,I=y.data;a.texture=this.map.painter.getTileTexture(I.width),a.texture?a.texture.update(I,{useMipmap:!0}):(a.texture=new o.T(b,I,j.RGBA,{useMipmap:!0}),a.texture.bind(j.LINEAR,j.CLAMP_TO_EDGE,j.LINEAR_MIPMAP_NEAREST)),a.state="loaded"}}catch(y){if(delete a.abortController,a.aborted)a.state="unloaded";else if(y)throw a.state="errored",y}}))}abortTile(a){return o._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController)}))}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.texture&&this.map.painter.saveTileTexture(a.texture)}))}hasTransition(){return!1}}class Br extends xi{constructor(a,u,y,b){super(a,u,y,b),this.type="raster-dem",this.maxzoom=22,this._options=o.e({type:"raster-dem"},u),this.encoding=u.encoding||"mapbox",this.redFactor=u.redFactor,this.greenFactor=u.greenFactor,this.blueFactor=u.blueFactor,this.baseShift=u.baseShift}loadTile(a){return o._(this,void 0,void 0,(function*(){const u=a.tileID.canonical.url(this.tiles,this.map.getPixelRatio(),this.scheme),y=this.map._requestManager.transformRequest(u,"Tile");a.neighboringTiles=this._getNeighboringTiles(a.tileID),a.abortController=new AbortController;try{const b=yield de.getImage(y,a.abortController,this.map._refreshExpiredTiles);if(delete a.abortController,a.aborted)return void(a.state="unloaded");if(b&&b.data){const j=b.data;this.map._refreshExpiredTiles&&(b.cacheControl||b.expires)&&a.setExpiryData({cacheControl:b.cacheControl,expires:b.expires});const I=o.b(j)&&o.$()?j:yield this.readImageNow(j),F={type:this.type,uid:a.uid,source:this.id,rawImageData:I,encoding:this.encoding,redFactor:this.redFactor,greenFactor:this.greenFactor,blueFactor:this.blueFactor,baseShift:this.baseShift};if(!a.actor||a.state==="expired"){a.actor=this.dispatcher.getActor();const U=yield a.actor.sendAsync({type:"LDT",data:F});a.dem=U,a.needsHillshadePrepare=!0,a.needsTerrainPrepare=!0,a.state="loaded"}}}catch(b){if(delete a.abortController,a.aborted)a.state="unloaded";else if(b)throw a.state="errored",b}}))}readImageNow(a){return o._(this,void 0,void 0,(function*(){if(typeof VideoFrame<"u"&&o.a0()){const u=a.width+2,y=a.height+2;try{return new o.R({width:u,height:y},yield o.a1(a,-1,-1,u,y))}catch{}}return z.getImageData(a,1)}))}_getNeighboringTiles(a){const u=a.canonical,y=Math.pow(2,u.z),b=(u.x-1+y)%y,j=u.x===0?a.wrap-1:a.wrap,I=(u.x+1+y)%y,F=u.x+1===y?a.wrap+1:a.wrap,U={};return U[new o.a2(a.overscaledZ,j,u.z,b,u.y).key]={backfilled:!1},U[new o.a2(a.overscaledZ,F,u.z,I,u.y).key]={backfilled:!1},u.y>0&&(U[new o.a2(a.overscaledZ,j,u.z,b,u.y-1).key]={backfilled:!1},U[new o.a2(a.overscaledZ,a.wrap,u.z,u.x,u.y-1).key]={backfilled:!1},U[new o.a2(a.overscaledZ,F,u.z,I,u.y-1).key]={backfilled:!1}),u.y+1<y&&(U[new o.a2(a.overscaledZ,j,u.z,b,u.y+1).key]={backfilled:!1},U[new o.a2(a.overscaledZ,a.wrap,u.z,u.x,u.y+1).key]={backfilled:!1},U[new o.a2(a.overscaledZ,F,u.z,I,u.y+1).key]={backfilled:!1}),U}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.demTexture&&this.map.painter.saveTileTexture(a.demTexture),a.fbo&&(a.fbo.destroy(),delete a.fbo),a.dem&&delete a.dem,delete a.neighboringTiles,a.state="unloaded",a.actor&&(yield a.actor.sendAsync({type:"RDT",data:{type:this.type,uid:a.uid,source:this.id}}))}))}}function hr(C){return C.type==="GeometryCollection"?C.geometries.map((a=>a.coordinates)).flat(1/0):C.coordinates.flat(1/0)}function ri(C){const a=new Mn;let u;switch(C.type){case"FeatureCollection":u=C.features.map((y=>hr(y.geometry))).flat(1/0);break;case"Feature":u=hr(C.geometry);break;default:u=hr(C)}if(u.length==0)return a;for(let y=0;y<u.length-1;y+=2)a.extend([u[y],u[y+1]]);return a}class wa extends o.E{constructor(a,u,y,b){super(),this.id=a,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._isUpdatingWorker=!1,this._pendingWorkerUpdate={data:u.data},this.actor=y.getActor(),this.setEventedParent(b),this._data=typeof u.data=="string"?{url:u.data}:{geojson:u.data},this._options=o.e({},u),this._collectResourceTiming=u.collectResourceTiming,u.maxzoom!==void 0&&(this.maxzoom=u.maxzoom),u.type&&(this.type=u.type),u.attribution&&(this.attribution=u.attribution),this.promoteId=u.promoteId,u.clusterMaxZoom!==void 0&&this.maxzoom<=u.clusterMaxZoom&&o.w(`The maxzoom value "${this.maxzoom}" is expected to be greater than the clusterMaxZoom value "${u.clusterMaxZoom}".`),this.workerOptions=o.e({source:this.id,cluster:u.cluster||!1,geojsonVtOptions:{buffer:this._pixelsToTileUnits(u.buffer!==void 0?u.buffer:128),tolerance:this._pixelsToTileUnits(u.tolerance!==void 0?u.tolerance:.375),extent:o.a5,maxZoom:this.maxzoom,lineMetrics:u.lineMetrics||!1,generateId:u.generateId||!1},superclusterOptions:{maxZoom:this._getClusterMaxZoom(u.clusterMaxZoom),minPoints:Math.max(2,u.clusterMinPoints||2),extent:o.a5,radius:this._pixelsToTileUnits(u.clusterRadius||50),log:!1,generateId:u.generateId||!1},clusterProperties:u.clusterProperties,filter:u.filter},u.workerOptions),typeof this.promoteId=="string"&&(this.workerOptions.promoteId=this.promoteId)}_hasPendingWorkerUpdate(){return this._pendingWorkerUpdate.data!==void 0||this._pendingWorkerUpdate.diff!==void 0||this._pendingWorkerUpdate.optionsChanged}_pixelsToTileUnits(a){return a*(o.a5/this.tileSize)}_getClusterMaxZoom(a){const u=a?Math.round(a):this.maxzoom-1;return Number.isInteger(a)||a===void 0||o.w(`Integer expected for option 'clusterMaxZoom': provided value "${a}" rounded to "${u}"`),u}load(){return o._(this,void 0,void 0,(function*(){yield this._updateWorkerData()}))}onAdd(a){this.map=a,this.load()}setData(a,u){this._data=typeof a=="string"?{url:a}:{geojson:a},this._pendingWorkerUpdate={data:a};const y=this._updateWorkerData();return u?y:this}updateData(a,u){this._pendingWorkerUpdate.diff=o.a6(this._pendingWorkerUpdate.diff,a);const y=this._updateWorkerData();return u?y:this}getData(){return o._(this,void 0,void 0,(function*(){const a=o.e({type:this.type},this.workerOptions);return this.actor.sendAsync({type:"GD",data:a})}))}getBounds(){return o._(this,void 0,void 0,(function*(){return ri(yield this.getData())}))}setClusterOptions(a){return this.workerOptions.cluster=a.cluster,a.clusterRadius!==void 0&&(this.workerOptions.superclusterOptions.radius=this._pixelsToTileUnits(a.clusterRadius)),a.clusterMaxZoom!==void 0&&(this.workerOptions.superclusterOptions.maxZoom=this._getClusterMaxZoom(a.clusterMaxZoom)),this._pendingWorkerUpdate.optionsChanged=!0,this._updateWorkerData(),this}getClusterExpansionZoom(a){return this.actor.sendAsync({type:"GCEZ",data:{type:this.type,clusterId:a,source:this.id}})}getClusterChildren(a){return this.actor.sendAsync({type:"GCC",data:{type:this.type,clusterId:a,source:this.id}})}getClusterLeaves(a,u,y){return this.actor.sendAsync({type:"GCL",data:{type:this.type,source:this.id,clusterId:a,limit:u,offset:y}})}_updateWorkerData(){return o._(this,void 0,void 0,(function*(){if(this._isUpdatingWorker)return;if(!this._hasPendingWorkerUpdate())return void o.w(`No pending worker updates for GeoJSONSource ${this.id}.`);const{data:a,diff:u}=this._pendingWorkerUpdate,y=this._getLoadGeoJSONParameters(a,u);a!==void 0?this._pendingWorkerUpdate.data=void 0:u&&(this._pendingWorkerUpdate.diff=void 0),this._pendingWorkerUpdate.optionsChanged=void 0,yield this._dispatchWorkerUpdate(y)}))}_getLoadGeoJSONParameters(a,u){const y=o.e({type:this.type},this.workerOptions);return typeof a=="string"?(y.request=this.map._requestManager.transformRequest(z.resolveURL(a),"Source"),y.request.collectResourceTiming=this._collectResourceTiming,y):a!==void 0?(y.data=a,y):(u&&(y.dataDiff=u),y)}_dispatchWorkerUpdate(a){return o._(this,void 0,void 0,(function*(){this._isUpdatingWorker=!0,this.fire(new o.l("dataloading",{dataType:"source"}));try{const u=yield this.actor.sendAsync({type:"LD",data:a});if(this._isUpdatingWorker=!1,this._removed||u.abandoned)return void this.fire(new o.l("dataabort",{dataType:"source"}));u.data&&(this._data={geojson:u.data});const y=this._applyDiffToSource(a.dataDiff),b=this._getShouldReloadTileOptions(y),j={dataType:"source"};this._applyResourceTiming(j,u),this.fire(new o.l("data",Object.assign(Object.assign({},j),{sourceDataType:"metadata"}))),this.fire(new o.l("data",Object.assign(Object.assign({},j),{sourceDataType:"content",shouldReloadTileOptions:b})))}catch(u){if(this._isUpdatingWorker=!1,this._removed)return void this.fire(new o.l("dataabort",{dataType:"source"}));this.fire(new o.k(u))}finally{this._hasPendingWorkerUpdate()&&this._updateWorkerData()}}))}_applyResourceTiming(a,u){var y;if(!this._collectResourceTiming)return;const b=(y=u.resourceTiming)===null||y===void 0?void 0:y[this.id];if(!b)return;const j=b.slice(0);j?.length&&o.e(a,{resourceTiming:j})}_applyDiffToSource(a){if(!a)return;const u=typeof this.promoteId=="string"?this.promoteId:void 0;if(!this._data.url&&!this._data.updateable){const b=o.a7(this._data.geojson,u);if(!b)throw new Error(`GeoJSONSource "${this.id}": GeoJSON data is not compatible with updateData`);this._data={updateable:b}}if(!this._data.updateable)return;const y=o.a8(this._data.updateable,a,u);return a.removeAll||this._options.cluster?void 0:y}_getShouldReloadTileOptions(a){if(a)return{affectedBounds:a.filter(Boolean).map((u=>ri(u)))}}shouldReloadTile(a,{affectedBounds:u}){if(a.state==="loading")return!0;if(a.state==="unloaded")return!1;const{buffer:y,extent:b}=this.workerOptions.geojsonVtOptions,j=(function({x:I,y:F,z:U},Y=0){const re=o.a3((I-Y)/Math.pow(2,U)),ce=o.a4((F+1+Y)/Math.pow(2,U)),le=o.a3((I+1+Y)/Math.pow(2,U)),ge=o.a4((F-Y)/Math.pow(2,U));return new Mn([re,ce],[le,ge])})(a.tileID.canonical,y/b);for(const I of u)if(j.intersects(I))return!0;return!1}loaded(){return!this._isUpdatingWorker&&!this._hasPendingWorkerUpdate()}loadTile(a){return o._(this,void 0,void 0,(function*(){const u=a.actor?"RT":"LT";a.actor=this.actor;const y={type:this.type,uid:a.uid,tileID:a.tileID,zoom:a.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:this.map.getPixelRatio(),showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,subdivisionGranularity:this.map.style.projection.subdivisionGranularity};a.abortController=new AbortController;const b=yield this.actor.sendAsync({type:u,data:y},a.abortController);delete a.abortController,a.unloadVectorData(),a.aborted||a.loadVectorData(b,this.map.painter,u==="RT")}))}abortTile(a){return o._(this,void 0,void 0,(function*(){a.abortController&&(a.abortController.abort(),delete a.abortController),a.aborted=!0}))}unloadTile(a){return o._(this,void 0,void 0,(function*(){a.unloadVectorData(),yield this.actor.sendAsync({type:"RMT",data:{uid:a.uid,type:this.type,source:this.id}})}))}onRemove(){this._removed=!0,this.actor.sendAsync({type:"RS",data:{type:this.type,source:this.id}})}serialize(){return o.e({},this._options,{type:this.type,data:this._data.updateable?{type:"FeatureCollection",features:Array.from(this._data.updateable.values())}:this._data.url||this._data.geojson})}hasTransition(){return!1}}class _i extends o.E{constructor(a,u,y,b){super(),this.flippedWindingOrder=!1,this.id=a,this.dispatcher=y,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(b),this.options=u}load(a){return o._(this,void 0,void 0,(function*(){this._loaded=!1,this.fire(new o.l("dataloading",{dataType:"source"})),this.url=this.options.url,this._request=new AbortController;try{const u=yield de.getImage(this.map._requestManager.transformRequest(this.url,"Image"),this._request);this._request=null,this._loaded=!0,u&&u.data&&(this.image=u.data,a&&(this.coordinates=a),this._finishLoading())}catch(u){this._request=null,this._loaded=!0,o.Z(u)||this.fire(new o.k(u))}}))}loaded(){return this._loaded}updateImage(a){return a.url?(this._request&&(this._request.abort(),this._request=null),this.options.url=a.url,this.load(a.coordinates).finally((()=>{this.texture=null})),this):this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new o.l("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(a){this.map=a,this.load()}onRemove(){this._request&&(this._request.abort(),this._request=null)}setCoordinates(a){this.coordinates=a;const u=a.map(o.a9.fromLngLat);var y;return this.tileID=(function(b){const j=o.aa.fromPoints(b),I=j.width(),F=j.height(),U=Math.max(I,F),Y=Math.max(0,Math.floor(-Math.log(U)/Math.LN2)),re=Math.pow(2,Y);return new o.ac(Y,Math.floor((j.minX+j.maxX)/2*re),Math.floor((j.minY+j.maxY)/2*re))})(u),this.terrainTileRanges=this._getOverlappingTileRanges(u),this.minzoom=this.maxzoom=this.tileID.z,this.tileCoords=u.map((b=>this.tileID.getTilePoint(b)._round())),this.flippedWindingOrder=((y=this.tileCoords)[1].x-y[0].x)*(y[2].y-y[0].y)-(y[1].y-y[0].y)*(y[2].x-y[0].x)<0,this.fire(new o.l("data",{dataType:"source",sourceDataType:"content"})),this}prepare(){if(Object.keys(this.tiles).length===0||!this.image)return;const a=this.map.painter.context,u=a.gl;this.texture||(this.texture=new o.T(a,this.image,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const j=this.tiles[b];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}loadTile(a){return o._(this,void 0,void 0,(function*(){this.tileID&&this.tileID.equals(a.tileID.canonical)?(this.tiles[String(a.tileID.wrap)]=a,a.buckets={}):a.state="errored"}))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}_getOverlappingTileRanges(a){const{minX:u,minY:y,maxX:b,maxY:j}=o.aa.fromPoints(a),I={};for(let F=0;F<=o.ab;F++){const U=Math.pow(2,F),Y=Math.floor(u*U),re=Math.floor(y*U),ce=Math.floor(b*U),le=Math.floor(j*U),ge=(Y%U+U)%U,be=ce%U,Me=Math.floor(Y/U),Ne=Math.floor(ce/U);I[F]={minWrap:Me,maxWrap:Ne,minTileXWrapped:ge,maxTileXWrapped:be,minTileY:re,maxTileY:le}}return I}}class Sa extends _i{constructor(a,u,y,b){super(a,u,y,b),this.roundZoom=!0,this.type="video",this.options=u}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!1;const a=this.options;this.urls=[];for(const u of a.urls)this.urls.push(this.map._requestManager.transformRequest(u,"Source").url);try{const u=yield o.ad(this.urls);if(this._loaded=!0,!u)return;this.video=u,this.video.loop=!0,this.video.addEventListener("playing",(()=>{this.map.triggerRepaint()})),this.map&&this.video.play(),this._finishLoading()}catch(u){this.fire(new o.k(u))}}))}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(a){if(this.video){const u=this.video.seekable;a<u.start(0)||a>u.end(0)?this.fire(new o.k(new o.ae(`sources.${this.id}`,null,`Playback for this video can be set only between the ${u.start(0)} and ${u.end(0)}-second mark.`))):this.video.currentTime=a}}getVideo(){return this.video}onAdd(a){this.map||(this.map=a,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const a=this.map.painter.context,u=a.gl;this.texture?this.video.paused||(this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE),u.texSubImage2D(u.TEXTURE_2D,0,0,0,u.RGBA,u.UNSIGNED_BYTE,this.video)):(this.texture=new o.T(a,this.video,u.RGBA),this.texture.bind(u.LINEAR,u.CLAMP_TO_EDGE));let y=!1;for(const b in this.tiles){const j=this.tiles[b];j.state!=="loaded"&&(j.state="loaded",j.texture=this.texture,y=!0)}y&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}}class Ta extends _i{constructor(a,u,y,b){super(a,u,y,b),u.coordinates?Array.isArray(u.coordinates)&&u.coordinates.length===4&&!u.coordinates.some((j=>!Array.isArray(j)||j.length!==2||j.some((I=>typeof I!="number"))))||this.fire(new o.k(new o.ae(`sources.${a}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new o.k(new o.ae(`sources.${a}`,null,'missing required property "coordinates"'))),u.animate&&typeof u.animate!="boolean"&&this.fire(new o.k(new o.ae(`sources.${a}`,null,'optional "animate" property must be a boolean value'))),u.canvas?typeof u.canvas=="string"||u.canvas instanceof HTMLCanvasElement||this.fire(new o.k(new o.ae(`sources.${a}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new o.k(new o.ae(`sources.${a}`,null,'missing required property "canvas"'))),this.options=u,this.animate=u.animate===void 0||u.animate}load(){return o._(this,void 0,void 0,(function*(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new o.k(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}))}getCanvas(){return this.canvas}onAdd(a){this.map=a,this.load(),this.canvas&&this.animate&&this.play()}onRemove(){this.pause()}prepare(){let a=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,a=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,a=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const u=this.map.painter.context,y=u.gl;this.texture?(a||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):(this.texture=new o.T(u,this.canvas,y.RGBA,{premultiply:!0}),this.texture.bind(y.LINEAR,y.CLAMP_TO_EDGE));let b=!1;for(const j in this.tiles){const I=this.tiles[j];I.state!=="loaded"&&(I.state="loaded",I.texture=this.texture,b=!0)}b&&this.fire(new o.l("data",{dataType:"source",sourceDataType:"idle",sourceId:this.id}))}serialize(){return{type:"canvas",animate:this.animate,canvas:this.options.canvas,coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const a of[this.canvas.width,this.canvas.height])if(isNaN(a)||a<=0)return!0;return!1}}const Pa={},Ya=C=>{switch(C){case"geojson":return wa;case"image":return _i;case"raster":return xi;case"raster-dem":return Br;case"vector":return Fr;case"video":return Sa;case"canvas":return Ta}return Pa[C]},gi="RTLPluginLoaded";class it extends o.E{constructor(){super(...arguments),this.status="unavailable",this.url=null,this.dispatcher=Ut()}_syncState(a){return this.status=a,this.dispatcher.broadcast("SRPS",{pluginStatus:a,pluginURL:this.url}).catch((u=>{throw this.status="error",u}))}getRTLTextPluginStatus(){return this.status}clearRTLTextPlugin(){this.status="unavailable",this.url=null}setRTLTextPlugin(a){return o._(this,arguments,void 0,(function*(u,y=!1){if(this.url)throw new Error("setRTLTextPlugin cannot be called multiple times.");if(this.url=z.resolveURL(u),!this.url)throw new Error(`requested url ${u} is invalid`);if(this.status==="unavailable"){if(!y)return this._requestImport();this.status="deferred",this._syncState(this.status)}else if(this.status==="requested")return this._requestImport()}))}_requestImport(){return o._(this,void 0,void 0,(function*(){yield this._syncState("loading"),this.status="loaded",this.fire(new o.l(gi))}))}lazyLoad(){this.status==="unavailable"?this.status="requested":this.status==="deferred"&&this._requestImport()}}let ee=null;function ue(){return ee||(ee=new it),ee}var ve,Oe;(function(C){C[C.Base=0]="Base",C[C.Parent=1]="Parent"})(ve||(ve={})),(function(C){C[C.Departing=0]="Departing",C[C.Incoming=1]="Incoming"})(Oe||(Oe={}));class $e{constructor(a,u){this.timeAdded=0,this.fadeEndTime=0,this.fadeOpacity=1,this.tileID=a,this.uid=o.af(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.rtt=[],this.rttFingerprint={},this.expiredRequestCount=0,this.state="loading"}isRenderable(a){return this.hasData()&&(!this.fadeEndTime||this.fadeOpacity>0)&&(a||!this.holdingForSymbolFade())}setCrossFadeLogic({fadingRole:a,fadingDirection:u,fadingParentID:y,fadeEndTime:b}){this.resetFadeLogic(),this.fadingRole=a,this.fadingDirection=u,this.fadingParentID=y,this.fadeEndTime=b}setSelfFadeLogic(a){this.resetFadeLogic(),this.selfFading=!0,this.fadeEndTime=a}resetFadeLogic(){this.fadingRole=null,this.fadingDirection=null,this.fadingParentID=null,this.selfFading=!1,this.timeAdded=$(),this.fadeEndTime=0,this.fadeOpacity=1}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}clearTextures(a){this.demTexture&&a.saveTileTexture(this.demTexture),this.demTexture=null}loadVectorData(a,u,y){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",a){a.featureIndex&&(this.latestFeatureIndex=a.featureIndex,a.rawTileData?(this.latestRawTileData=a.rawTileData,this.latestFeatureIndex.rawTileData=a.rawTileData,this.latestFeatureIndex.encoding=a.encoding):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData,this.latestFeatureIndex.encoding=this.latestEncoding)),this.collisionBoxArray=a.collisionBoxArray,this.buckets=(function(b,j){const I={};if(!j)return I;for(const F of b){const U=F.layerIds.map((Y=>j.getLayer(Y))).filter(Boolean);if(U.length!==0){F.layers=U,F.stateDependentLayerIds&&(F.stateDependentLayers=F.stateDependentLayerIds.map((Y=>U.filter((re=>re.id===Y))[0])));for(const Y of U)I[Y.id]=F}}return I})(a.buckets,u?.style),this.hasSymbolBuckets=!1;for(const b in this.buckets){const j=this.buckets[b];if(j instanceof o.ah){if(this.hasSymbolBuckets=!0,!y)break;j.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const b in this.buckets){const j=this.buckets[b];if(j instanceof o.ah&&j.hasRTLText){this.hasRTLText=!0,ue().lazyLoad();break}}this.queryPadding=0;for(const b in this.buckets){const j=this.buckets[b];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(b).queryRadius(j))}a.imageAtlas&&(this.imageAtlas=a.imageAtlas),a.glyphAtlasImage&&(this.glyphAtlasImage=a.glyphAtlasImage),this.dashPositions=a.dashPositions}else this.collisionBoxArray=new o.ag}unloadVectorData(){for(const a in this.buckets)this.buckets[a].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.dashPositions&&(this.dashPositions=null),this.latestFeatureIndex=null,this.state="unloaded"}getBucket(a){return this.buckets[a.id]}upload(a){for(const y in this.buckets){const b=this.buckets[y];b.uploadPending()&&b.upload(a)}const u=a.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new o.T(a,this.imageAtlas.image,u.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new o.T(a,this.glyphAtlasImage,u.ALPHA),this.glyphAtlasImage=null)}prepare(a){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(a,this.imageAtlasTexture)}queryRenderedFeatures(a,u,y,b,j,I,F,U,Y,re,ce){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:b,cameraQueryGeometry:j,scale:I,tileSize:this.tileSize,pixelPosMatrix:re,transform:U,params:F,queryPadding:this.queryPadding*Y,getElevation:ce},a,u,y):{}}querySourceFeatures(a,u){const y=this.latestFeatureIndex;if(!y||!y.rawTileData)return;const b=y.loadVTLayers(),j=u&&u.sourceLayer?u.sourceLayer:"",I=b[o.ai]||b[j];if(!I)return;const F=o.aj(u?.filter,u?.globalState),{z:U,x:Y,y:re}=this.tileID.canonical,ce={z:U,x:Y,y:re};for(let le=0;le<I.length;le++){const ge=I.feature(le);if(F.needGeometry){const Ne=o.ak(ge,!0);if(!F.filter(new o.H(this.tileID.overscaledZ),Ne,this.tileID.canonical))continue}else if(!F.filter(new o.H(this.tileID.overscaledZ),ge))continue;const be=y.getId(ge,j),Me=new o.al(ge,U,Y,re,be);Me.tile=ce,a.push(Me)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(a){const u=this.expirationTime;if(a.cacheControl){const y=o.am(a.cacheControl);y["max-age"]&&(this.expirationTime=Date.now()+1e3*y["max-age"])}else a.expires&&(this.expirationTime=new Date(a.expires).getTime());if(this.expirationTime){const y=Date.now();let b=!1;if(this.expirationTime>y)b=!1;else if(u)if(this.expirationTime<u)b=!0;else{const j=this.expirationTime-u;j?this.expirationTime=y+Math.max(j,3e4):b=!0}else b=!0;b?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}setFeatureState(a,u){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData||Object.keys(a).length===0)return;const y=this.latestFeatureIndex.loadVTLayers();for(const b in this.buckets){if(!u.style.hasLayer(b))continue;const j=this.buckets[b],I=j.layers[0].sourceLayer||o.ai,F=y[I],U=a[I];if(!F||!U||Object.keys(U).length===0)continue;j.update(U,F,this.imageAtlas&&this.imageAtlas.patternPositions||{},this.dashPositions||{});const Y=u&&u.style&&u.style.getLayer(b);Y&&(this.queryPadding=Math.max(this.queryPadding,Y.queryRadius(j)))}}holdingForSymbolFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<$()}clearSymbolFadeHold(){this.symbolFadeHoldUntil=void 0}setSymbolHoldDuration(a){this.symbolFadeHoldUntil=$()+a}setDependencies(a,u){const y={};for(const b of u)y[b]=!0;this.dependencies[a]=y}hasDependency(a,u){for(const y of a){const b=this.dependencies[y];if(b){for(const j of u)if(b[j])return!0}}return!1}}class ct{constructor(){this.state={},this.stateChanges={},this.deletedStates={},this.revision=0}updateState(a,u,y){const b=String(u);if(this.stateChanges[a]=this.stateChanges[a]||{},this.stateChanges[a][b]=this.stateChanges[a][b]||{},o.e(this.stateChanges[a][b],y),this.deletedStates[a]===null){this.deletedStates[a]={};for(const j in this.state[a])j!==b&&(this.deletedStates[a][j]=null)}else if(this.deletedStates[a]&&this.deletedStates[a][b]===null){this.deletedStates[a][b]={};for(const j in this.state[a][b])y[j]||(this.deletedStates[a][b][j]=null)}else for(const j in y)this.deletedStates[a]&&this.deletedStates[a][b]&&this.deletedStates[a][b][j]===null&&delete this.deletedStates[a][b][j]}removeFeatureState(a,u,y){if(this.deletedStates[a]===null)return;const b=String(u);if(this.deletedStates[a]=this.deletedStates[a]||{},y&&u!==void 0)this.deletedStates[a][b]!==null&&(this.deletedStates[a][b]=this.deletedStates[a][b]||{},this.deletedStates[a][b][y]=null);else if(u!==void 0)if(this.stateChanges[a]&&this.stateChanges[a][b])for(y in this.deletedStates[a][b]={},this.stateChanges[a][b])this.deletedStates[a][b][y]=null;else this.deletedStates[a][b]=null;else this.deletedStates[a]=null}getState(a,u){const y=String(u),b=o.e({},(this.state[a]||{})[y],(this.stateChanges[a]||{})[y]);if(this.deletedStates[a]===null)return{};if(this.deletedStates[a]){const j=this.deletedStates[a][u];if(j===null)return{};for(const I in j)delete b[I]}return b}initializeTileState(a,u){a.setFeatureState(this.state,u)}coalesceChanges(a,u){const y={};for(const b in this.stateChanges){this.state[b]=this.state[b]||{};const j={};for(const I in this.stateChanges[b])this.state[b][I]||(this.state[b][I]={}),o.e(this.state[b][I],this.stateChanges[b][I]),j[I]=this.state[b][I];y[b]=j}for(const b in this.deletedStates){this.state[b]=this.state[b]||{};const j={};if(this.deletedStates[b]===null)for(const I in this.state[b])j[I]={},this.state[b][I]={};else for(const I in this.deletedStates[b]){if(this.deletedStates[b][I]===null)this.state[b][I]={};else for(const F of Object.keys(this.deletedStates[b][I]))delete this.state[b][I][F];j[I]=this.state[b][I]}y[b]=y[b]||{},o.e(y[b],j)}this.stateChanges={},this.deletedStates={},Object.keys(y).length!==0&&(this.revision++,a.setFeatureState(y,u))}}const ut=89.25;function at(C,a){const u=o.an(a.lat,-o.ao,o.ao);return new o.P(o.Y(a.lng)*C,o.X(u)*C)}function ft(C,a){return new o.a9(a.x/C,a.y/C).toLngLat()}function Dt(C){return C.cameraToCenterDistance*Math.min(.85*Math.tan(o.ap(90-C.pitch)),Math.tan(o.ap(ut-C.pitch)))}function St(C,a){const u=C.canonical,y=a/o.aq(u.z),b=u.x+Math.pow(2,u.z)*C.wrap,j=o.ar(new Float64Array(16));return o.O(j,j,[b*y,u.y*y,0]),o.Q(j,j,[y/o.a5,y/o.a5,1]),j}function Ke(C,a,u,y,b){const j=o.a9.fromLngLat(C,a),I=b*o.as(1,C.lat),{x:F,y:U,z:Y}=Bt(u,y);return new o.a9(j.x+I*-F,j.y+I*-U,j.z+I*-Y)}function Bt(C,a){const u=o.ap(C),y=o.ap(a),b=Math.cos(-u),j=Math.sin(u);return{x:j*Math.sin(y),y:-j*Math.cos(y),z:b}}function gn(C,a,u){const y=a.intersectsFrustum(C);if(!u||y===0)return y;const b=a.intersectsPlane(u);return b===0?0:y===2&&b===2?2:1}function on(C,a,u){let y=0;const b=(u-a)/10;for(let j=0;j<10;j++)y+=b*Math.pow(Math.cos(a+(j+.5)/10*(u-a)),C);return y}function hn(C,a){return function(u,y,b,j,I){const F=2*((C-1)/o.at(Math.cos(o.ap(ut-I))/Math.cos(o.ap(ut)))-1),U=Math.acos(b/j),Y=2*on(F-1,0,o.ap(I/2)),re=Math.min(o.ap(ut),U+o.ap(I/2)),ce=on(F-1,Math.min(re,U-o.ap(I/2)),re),le=Math.atan(y/b),ge=Math.hypot(y,b);let be=u;return be+=o.at(j/ge/Math.max(.5,Math.cos(o.ap(I/2)))),be+=F*o.at(Math.cos(le))/2,be-=o.at(Math.max(1,ce/Y/a))/2,be}}const bn=hn(9.314,3);function pn(C,a){const u=(a.roundZoom?Math.round:Math.floor)(C.zoom+o.at(C.tileSize/a.tileSize));return Math.max(0,u)}function er(C,a){const u=C.getCameraFrustum(),y=C.getClippingPlane(),b=C.screenPointToMercatorCoordinate(C.getCameraPoint()),j=o.a9.fromLngLat(C.center,C.elevation);b.z=j.z+Math.cos(C.pitchInRadians)*C.cameraToCenterDistance/C.worldSize;const I=C.getCoveringTilesDetailsProvider(),F=I.allowVariableZoom(C,a),U=pn(C,a),Y=a.minzoom||0,re=a.maxzoom!==void 0?a.maxzoom:C.maxZoom,ce=Math.min(Math.max(0,U),re),le=Math.pow(2,ce),ge=[le*b.x,le*b.y,0],be=[le*j.x,le*j.y,0],Me=Math.hypot(j.x-b.x,j.y-b.y),Ne=Math.abs(j.z-b.z),Ie=Math.hypot(Me,Ne),ze=Ge=>({zoom:0,x:0,y:0,wrap:Ge,fullyVisible:!1}),He=[],Fe=[];if(C.renderWorldCopies&&I.allowWorldCopies())for(let Ge=1;Ge<=3;Ge++)He.push(ze(-Ge)),He.push(ze(Ge));for(He.push(ze(0));He.length>0;){const Ge=He.pop(),Ye=Ge.x,Ue=Ge.y;let st=Ge.fullyVisible;const bt={x:Ye,y:Ue,z:Ge.zoom},yt=I.getTileBoundingVolume(bt,Ge.wrap,C.elevation,a);if(!st){const Gt=gn(u,yt,y);if(Gt===0)continue;st=Gt===2}const vt=I.distanceToTile2d(b.x,b.y,bt,yt);let xt=U;F&&(xt=(a.calculateTileZoom||bn)(C.zoom+o.at(C.tileSize/a.tileSize),vt,Ne,Ie,C.fov)),xt=(a.roundZoom?Math.round:Math.floor)(xt),xt=Math.max(0,xt);const qt=Math.min(xt,re);if(Ge.wrap=I.getWrap(j,bt,Ge.wrap),Ge.zoom>=qt){if(Ge.zoom<Y)continue;const Gt=ce-Ge.zoom,Rt=ge[0]-.5-(Ye<<Gt),Yt=ge[1]-.5-(Ue<<Gt),$n=a.reparseOverscaled?Math.max(Ge.zoom,xt):Ge.zoom;Fe.push({tileID:new o.a2(Ge.zoom===re?$n:Ge.zoom,Ge.wrap,Ge.zoom,Ye,Ue),distanceSq:o.au([be[0]-.5-Ye,be[1]-.5-Ue]),tileDistanceToCamera:Math.sqrt(Rt*Rt+Yt*Yt)})}else for(let Gt=0;Gt<4;Gt++)He.push({zoom:Ge.zoom+1,x:(Ye<<1)+Gt%2,y:(Ue<<1)+(Gt>>1),wrap:Ge.wrap,fullyVisible:st})}return Fe.sort(((Ge,Ye)=>Ge.distanceSq-Ye.distanceSq)).map((Ge=>Ge.tileID))}const Cr=o.aa.fromPoints([new o.P(0,0),new o.P(o.a5,o.a5)]);function cr(C){return C==="raster"||C==="image"||C==="video"}function Dr(C,a,u,y,b,j,I){if(!a.hasData())return!1;const{tileID:F,fadingRole:U,fadingDirection:Y,fadingParentID:re}=a;if(U===ve.Base&&Y===Oe.Incoming&&re)return u[re.key]=re,!0;const ce=Math.max(F.overscaledZ-b,j);for(let le=F.overscaledZ-1;le>=ce;le--){const ge=F.scaledTo(le),be=C.getLoadedTile(ge);if(be)return a.setCrossFadeLogic({fadingRole:ve.Base,fadingDirection:Oe.Incoming,fadingParentID:be.tileID,fadeEndTime:y+I}),be.setCrossFadeLogic({fadingRole:ve.Parent,fadingDirection:Oe.Departing,fadeEndTime:y+I}),u[ge.key]=ge,!0}return!1}function ur(C,a,u,y,b,j){if(!a.hasData())return!1;const I=a.tileID.children(b);let F=ht(C,a,I,u,y,b,j);if(F)return!0;for(const U of I)ht(C,a,U.children(b),u,y,b,j)&&(F=!0);return F}function ht(C,a,u,y,b,j,I){if(u[0].overscaledZ>=j)return!1;let F=!1;for(const U of u){const Y=C.getLoadedTile(U);if(!Y)continue;const{fadingRole:re,fadingDirection:ce,fadingParentID:le}=Y;re===ve.Base&&ce===Oe.Departing&&le||(Y.setCrossFadeLogic({fadingRole:ve.Base,fadingDirection:Oe.Departing,fadingParentID:a.tileID,fadeEndTime:b+I}),a.setCrossFadeLogic({fadingRole:ve.Parent,fadingDirection:Oe.Incoming,fadeEndTime:b+I})),y[U.key]=U,F=!0}return F}function fr(C,a,u,y){const b=C.tileID;return!!C.selfFading||!C.hasData()&&!!a.has(b)&&(C.setSelfFadeLogic(u+y),!0)}function Er(C,a){var u;C.needsHillshadePrepare=!0,C.needsTerrainPrepare=!0;let y=a.tileID.canonical.x-C.tileID.canonical.x;const b=a.tileID.canonical.y-C.tileID.canonical.y,j=Math.pow(2,C.tileID.canonical.z),I=a.tileID.key;y===0&&b===0||Math.abs(b)>1||(Math.abs(y)>1&&(Math.abs(y+j)===1?y+=j:Math.abs(y-j)===1&&(y-=j)),a.dem&&C.dem&&(C.dem.backfillBorder(a.dem,y,b),!((u=C.neighboringTiles)===null||u===void 0)&&u[I]&&(C.neighboringTiles[I].backfilled=!0)))}class ul{constructor(){this._tiles={}}handleWrapJump(a){const u={};for(const y in this._tiles){const b=this._tiles[y];b.tileID=b.tileID.unwrapTo(b.tileID.wrap+a),u[b.tileID.key]=b}this._tiles=u}setFeatureState(a,u){for(const y in this._tiles)this._tiles[y].setFeatureState(a,u)}getAllTiles(){return Object.values(this._tiles)}getAllIds(a=!1){return a?Object.values(this._tiles).map((u=>u.tileID)).sort(o.aw).map((u=>u.key)):Object.keys(this._tiles)}getTileById(a){return this._tiles[a]}setTile(a,u){this._tiles[a]=u}deleteTileById(a){delete this._tiles[a]}getLoadedTile(a){const u=this.getTileById(a.key);return u?.hasData()?u:null}isIdRenderable(a,u=!1){var y;return(y=this.getTileById(a))===null||y===void 0?void 0:y.isRenderable(u)}getRenderableIds(a=0,u){const y=[];for(const b of this.getAllIds())this.isIdRenderable(b,u)&&y.push(this.getTileById(b));return u?y.sort(((b,j)=>{const I=b.tileID,F=j.tileID,U=new o.P(I.canonical.x,I.canonical.y)._rotate(-a),Y=new o.P(F.canonical.x,F.canonical.y)._rotate(-a);return I.overscaledZ-F.overscaledZ||Y.y-U.y||Y.x-U.x})).map((b=>b.tileID.key)):y.map((b=>b.tileID)).sort(o.aw).map((b=>b.key))}}class oa extends o.E{constructor(a,u,y){super(),this.id=a,this.dispatcher=y,this.on("data",(b=>this._dataHandler(b))),this.on("dataloading",(()=>{this._sourceErrored=!1})),this.on("error",(()=>{this._sourceErrored=this._source.loaded()})),this._source=((b,j,I,F)=>{const U=new(Ya(j.type))(b,j,I,F);if(U.id!==b)throw new Error(`Expected Source id to be ${b} instead of ${U.id}`);return U})(a,u,y,this),this._inViewTiles=new ul,this._outOfViewCache=new o.ax(0,(b=>this._unloadTile(b))),this._timers={},this._maxTileCacheSize=null,this._maxTileCacheZoomLevels=null,this._rasterFadeDuration=0,this._maxFadingAncestorLevels=5,this._state=new ct,this._didEmitContent=!1,this._updated=!1}onAdd(a){this.map=a,this._maxTileCacheSize=a?a._maxTileCacheSize:null,this._maxTileCacheZoomLevels=a?a._maxTileCacheZoomLevels:null,this._source&&this._source.onAdd&&this._source.onAdd(a)}onRemove(a){for(const u of this._inViewTiles.getAllTiles())u.unloadVectorData();this.clearTiles(),this._source&&this._source.onRemove&&this._source.onRemove(a),this._inViewTiles=new ul}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;if(!(this.used===void 0&&this.usedForTerrain===void 0||this.used||this.usedForTerrain))return!0;if(!this._updated)return!1;for(const a of this._inViewTiles.getAllTiles())if(a.state!=="loaded"&&a.state!=="errored")return!1;return!0}getSource(){return this._source}getState(){return this._state}pause(){this._paused=!0}resume(){if(!this._paused)return;const a=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,a&&this.reload(),this.transform&&this.update(this.transform,this.terrain)}_loadTile(a,u,y){return o._(this,void 0,void 0,(function*(){try{yield this._source.loadTile(a),this._tileLoaded(a,u,y)}catch(b){a.state="errored",b.status!==404?this._source.fire(new o.k(b,{tile:a})):this.update(this.transform,this.terrain)}}))}_unloadTile(a){this._source.unloadTile&&this._source.unloadTile(a)}_abortTile(a){this._source.abortTile&&this._source.abortTile(a),this._source.fire(new o.l("dataabort",{tile:a,coord:a.tileID,dataType:"source"}))}serialize(){return this._source.serialize()}prepare(a){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._inViewTiles,this.map?this.map.painter:null);for(const u of this._inViewTiles.getAllTiles())u.upload(a),u.prepare(this.map.style.imageManager)}getIds(){return this._inViewTiles.getAllIds(!0)}getRenderableIds(a){var u;return this._inViewTiles.getRenderableIds((u=this.transform)===null||u===void 0?void 0:u.bearingInRadians,a)}hasRenderableParent(a){const u=a.overscaledZ-1;if(u>=this._source.minzoom){const y=this.getLoadedTile(a.scaledTo(u));if(y)return this._inViewTiles.isIdRenderable(y.tileID.key)}return!1}reload(a,u=void 0){if(this._paused)this._shouldReloadOnResume=!0;else{this._outOfViewCache.reset();for(const y of this._inViewTiles.getAllIds()){const b=this._inViewTiles.getTileById(y);u&&!this._source.shouldReloadTile(b,u)||(a?this._reloadTile(y,"expired"):b.state!=="errored"&&this._reloadTile(y,"reloading"))}}}_reloadTile(a,u){return o._(this,void 0,void 0,(function*(){const y=this._inViewTiles.getTileById(a);y&&(y.state!=="loading"&&(y.state=u),yield this._loadTile(y,a,u))}))}_tileLoaded(a,u,y){a.timeAdded=$(),a.selfFading&&(a.fadeEndTime=a.timeAdded+this._rasterFadeDuration),y==="expired"&&(a.refreshedUponExpiration=!0),this._setTileReloadTimer(u,a),this.getSource().type==="raster-dem"&&a.dem&&(function(b,j){var I,F;const U=j.getRenderableIds();for(const Y of U){if(!b.neighboringTiles||!b.neighboringTiles[Y])continue;const re=j.getTileById(Y);b.neighboringTiles[Y].backfilled||Er(b,re),!((F=(I=re.neighboringTiles)===null||I===void 0?void 0:I[b.tileID.key])===null||F===void 0)&&F.backfilled||Er(re,b)}})(a,this._inViewTiles),this._state.initializeTileState(a,this.map?this.map.painter:null),a.aborted||this._source.fire(new o.l("data",{dataType:"source",tile:a,coord:a.tileID}))}getTile(a){return this.getTileByID(a.key)}getTileByID(a){return this._inViewTiles.getTileById(a)}_retainLoadedChildren(a,u){const y=this._getLoadedDescendents(u),b=new Set;for(const j of u){const I=y[j.key];if(!I?.length){b.add(j);continue}const F=j.overscaledZ+oa.maxOverzooming,U=I.filter((ce=>ce.tileID.overscaledZ<=F));if(!U.length){b.add(j);continue}const Y=Math.min(...U.map((ce=>ce.tileID.overscaledZ))),re=U.filter((ce=>ce.tileID.overscaledZ===Y)).map((ce=>ce.tileID));for(const ce of re)a[ce.key]=ce;this._areDescendentsComplete(re,Y,j.overscaledZ)||b.add(j)}return b}_getLoadedDescendents(a){var u;const y={};for(const b of this._inViewTiles.getAllTiles().filter((j=>j.hasData())))for(const j of a)b.tileID.isChildOf(j)&&(y[u=j.key]||(y[u]=[])).push(b);return y}_areDescendentsComplete(a,u,y){return a.length===1&&a[0].isOverscaled()?a[0].overscaledZ===u:Math.pow(4,u-y)===a.length}getLoadedTile(a){return this._inViewTiles.getLoadedTile(a)}updateCacheSize(a){const u=Math.ceil(a.width/this._source.tileSize)+1,y=Math.ceil(a.height/this._source.tileSize)+1,b=Math.floor(u*y*(this._maxTileCacheZoomLevels===null?o.c.MAX_TILE_CACHE_ZOOM_LEVELS:this._maxTileCacheZoomLevels)),j=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,b):b;this._outOfViewCache.setMaxSize(j)}handleWrapJump(a){const u=Math.round((a-(this._prevLng===void 0?a:this._prevLng))/360);this._prevLng=a,u&&(this._inViewTiles.handleWrapJump(u),this._resetTileReloadTimers())}update(a,u){if(!this._sourceLoaded||this._paused)return;let y;this.transform=a,this.terrain=u,this.updateCacheSize(a),this.handleWrapJump(this.transform.center.lng),this.used||this.usedForTerrain?this._source.tileID?y=a.getVisibleUnwrappedCoordinates(this._source.tileID).map((U=>new o.a2(U.canonical.z,U.wrap,U.canonical.z,U.canonical.x,U.canonical.y))):(y=er(a,{tileSize:this.usedForTerrain?this.tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.type==="vector"&&this.map._zoomLevelsToOverscale!==void 0?a.maxZoom-this.map._zoomLevelsToOverscale:this._source.maxzoom,roundZoom:!this.usedForTerrain&&this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled,terrain:u,calculateTileZoom:this._source.calculateTileZoom}),this._source.hasTile&&(y=y.filter((U=>this._source.hasTile(U))))):y=[],this.usedForTerrain&&(y=this._addTerrainIdealTiles(y));const b=y.length===0&&!this._updated&&this._didEmitContent;this._updated=!0,b&&this.fire(new o.l("data",{sourceDataType:"idle",dataType:"source",sourceId:this.id}));const j=pn(a,this._source),I=this._updateRetainedTiles(y,j),F=cr(this._source.type);F&&this._rasterFadeDuration>0&&!u&&(function(U,Y,re,ce,le,ge,be){const Me=$(),Ne=o.av(Y);for(const Ie of Y){const ze=U.getTileById(Ie.key);ze.fadingDirection!==Oe.Departing&&ze.fadeOpacity!==0||ze.resetFadeLogic(),Dr(U,ze,re,Me,ce,le,be)||ur(U,ze,re,Me,ge,be)||fr(ze,Ne,Me,be)||ze.resetFadeLogic()}})(this._inViewTiles,y,I,this._maxFadingAncestorLevels,this._source.minzoom,this._source.maxzoom,this._rasterFadeDuration),F?this._cleanUpRasterTiles(I):this._cleanUpVectorTiles(I)}_cleanUpRasterTiles(a){for(const u of this._inViewTiles.getAllIds())a[u]||this._removeTile(u)}_cleanUpVectorTiles(a){for(const u of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(u);a[u]?y.clearSymbolFadeHold():y.hasSymbolBuckets?y.holdingForSymbolFade()?y.symbolFadeFinished()&&this._removeTile(u):y.setSymbolHoldDuration(this.map._fadeDuration):this._removeTile(u)}}_addTerrainIdealTiles(a){const u=[];for(const y of a)if(y.canonical.z>this._source.minzoom){const b=y.scaledTo(y.canonical.z-1);u.push(b);const j=y.scaledTo(Math.max(this._source.minzoom,Math.min(y.canonical.z,5)));u.push(j)}return a.concat(u)}releaseSymbolFadeTiles(){for(const a of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(a).holdingForSymbolFade()&&this._removeTile(a)}_updateRetainedTiles(a,u){var y;const b=new Set;for(const Y of a)this._addTile(Y).hasData()||b.add(Y);const j=a.reduce(((Y,re)=>(Y[re.key]=re,Y)),{}),I=this._retainLoadedChildren(j,b),F={},U=Math.max(u-oa.maxUnderzooming,this._source.minzoom);for(const Y of I){let re=this._inViewTiles.getTileById(Y.key),ce=re?.wasRequested();for(let le=Y.overscaledZ-1;le>=U;--le){const ge=Y.scaledTo(le);if(F[ge.key])break;if(F[ge.key]=!0,re=this.getTile(ge),!re&&ce&&(re=this._addTile(ge)),re){const be=re.hasData();if((be||!(!((y=this.map)===null||y===void 0)&&y.cancelPendingTileRequestsWhileZooming)||ce)&&(j[ge.key]=ge),ce=re.wasRequested(),be)break}}}return j}_addTile(a){let u=this._inViewTiles.getTileById(a.key);if(u)return u;u=this._outOfViewCache.getAndRemove(a),u&&(u.resetFadeLogic(),this._setTileReloadTimer(a.key,u),u.tileID=a,this._state.initializeTileState(u,this.map?this.map.painter:null));const y=u;return u||(u=new $e(a,this._source.tileSize*a.overscaleFactor()),this._loadTile(u,a.key,u.state)),u.uses++,this._inViewTiles.setTile(a.key,u),y||this._source.fire(new o.l("dataloading",{tile:u,coord:u.tileID,dataType:"source"})),u}_setTileReloadTimer(a,u){this._clearTileReloadTimer(a);const y=u.getExpiryTimeout();y&&(this._timers[a]=setTimeout((()=>{this._reloadTile(a,"expired"),delete this._timers[a]}),y))}_clearTileReloadTimer(a){const u=this._timers[a];u&&(clearTimeout(u),delete this._timers[a])}_resetTileReloadTimers(){for(const a in this._timers)clearTimeout(this._timers[a]),delete this._timers[a];for(const a of this._inViewTiles.getAllIds()){const u=this._inViewTiles.getTileById(a);this._setTileReloadTimer(a,u)}}refreshTiles(a){for(const u of this._inViewTiles.getAllIds()){const y=this._inViewTiles.getTileById(u);(this._inViewTiles.isIdRenderable(u)||y.state=="errored")&&a.some((b=>b.equals(y.tileID.canonical)))&&this._reloadTile(u,"expired")}}_removeTile(a){const u=this._inViewTiles.getTileById(a);u&&(u.uses--,this._inViewTiles.deleteTileById(a),this._clearTileReloadTimer(a),u.uses>0||(u.hasData()&&u.state!=="reloading"?this._outOfViewCache.add(u.tileID,u,u.getExpiryTimeout()):(u.aborted=!0,this._abortTile(u),this._unloadTile(u))))}_dataHandler(a){a.dataType==="source"&&(a.sourceDataType!=="metadata"?a.sourceDataType==="content"&&this._sourceLoaded&&!this._paused&&(this.reload(a.sourceDataChanged,a.shouldReloadTileOptions),this.transform&&this.update(this.transform,this.terrain),this._didEmitContent=!0):this._sourceLoaded=!0)}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const a of this._inViewTiles.getAllIds())this._removeTile(a);this._outOfViewCache.reset()}tilesIn(a,u,y){const b=[],j=this.transform;if(!j)return b;const I=j.getCoveringTilesDetailsProvider().allowWorldCopies(),F=y?j.getCameraQueryGeometry(a):a,U=ge=>j.screenPointToMercatorCoordinate(ge,this.terrain),Y=this.transformBbox(a,U,!I),re=this.transformBbox(F,U,!I),ce=this.getIds(),le=o.aa.fromPoints(re);for(let ge=0;ge<ce.length;ge++){const be=this._inViewTiles.getTileById(ce[ge]);if(be.holdingForSymbolFade())continue;const Me=I?[be.tileID]:[be.tileID.unwrapTo(-1),be.tileID.unwrapTo(0)],Ne=Math.pow(2,j.zoom-be.tileID.overscaledZ),Ie=u*be.queryPadding*o.a5/be.tileSize/Ne;for(const ze of Me){const He=le.map((Fe=>ze.getTilePoint(new o.a9(Fe.x,Fe.y))));if(He.expandBy(Ie),He.intersects(Cr)){const Fe=Y.map((Ye=>ze.getTilePoint(Ye))),Ge=re.map((Ye=>ze.getTilePoint(Ye)));b.push({tile:be,tileID:I?ze:ze.unwrapTo(0),queryGeometry:Fe,cameraQueryGeometry:Ge,scale:Ne})}}}return b}transformBbox(a,u,y){let b=a.map(u);if(y){const j=o.aa.fromPoints(a);j.shrinkBy(.001*Math.min(j.width(),j.height()));const I=j.map(u);o.aa.fromPoints(b).covers(I)||(b=b.map((F=>F.x>.5?new o.a9(F.x-1,F.y,F.z):F)))}return b}getVisibleCoordinates(a){const u=this.getRenderableIds(a).map((y=>this._inViewTiles.getTileById(y).tileID));return this.transform&&this.transform.populateCache(u),u}hasTransition(){return!!this._source.hasTransition()||!(!cr(this._source.type)||!(function(a,u){if(u<=0)return!1;const y=$();for(const b of a.getAllTiles())if(b.fadeEndTime>=y)return!0;return!1})(this._inViewTiles,this._rasterFadeDuration))}setRasterFadeDuration(a){this._rasterFadeDuration=a}setFeatureState(a,u,y){this._state.updateState(a=a||o.ai,u,y)}removeFeatureState(a,u,y){this._state.removeFeatureState(a=a||o.ai,u,y)}getFeatureState(a,u){return this._state.getState(a=a||o.ai,u)}setDependencies(a,u,y){const b=this._inViewTiles.getTileById(a);b&&b.setDependencies(u,y)}reloadTilesForDependencies(a,u){for(const y of this._inViewTiles.getAllIds())this._inViewTiles.getTileById(y).hasDependency(a,u)&&this._reloadTile(y,"reloading");this._outOfViewCache.filter((y=>!y.hasDependency(a,u)))}areTilesLoaded(){for(const a of this._inViewTiles.getAllTiles())if(a.state!=="loaded"&&a.state!=="errored")return!1;return!0}}oa.maxUnderzooming=10,oa.maxOverzooming=3;class Ht{constructor(a,u){this.reset(a,u)}reset(a,u){this.points=a||[],this._distances=[0];for(let y=1;y<this.points.length;y++)this._distances[y]=this._distances[y-1]+this.points[y].dist(this.points[y-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(u||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(a){if(this.points.length===1)return this.points[0];a=o.an(a,0,1);let u=1,y=this._distances[u];const b=a*this.paddedLength+this.padding;for(;y<b&&u<this._distances.length;)y=this._distances[++u];const j=u-1,I=this._distances[j],F=y-I,U=F>0?(b-I)/F:0;return this.points[j].mult(1-U).add(this.points[u].mult(U))}}function Tn(C,a){let u=!0;return C==="always"||C!=="never"&&a!=="never"||(u=!1),u}class In{constructor(a,u,y){const b=this.boxCells=[],j=this.circleCells=[];this.xCellCount=Math.ceil(a/y),this.yCellCount=Math.ceil(u/y);for(let I=0;I<this.xCellCount*this.yCellCount;I++)b.push([]),j.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=a,this.height=u,this.xScale=this.xCellCount/a,this.yScale=this.yCellCount/u,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(a,u,y,b,j){this._forEachCell(u,y,b,j,this._insertBoxCell,this.boxUid++),this.boxKeys.push(a),this.bboxes.push(u),this.bboxes.push(y),this.bboxes.push(b),this.bboxes.push(j)}insertCircle(a,u,y,b){this._forEachCell(u-b,y-b,u+b,y+b,this._insertCircleCell,this.circleUid++),this.circleKeys.push(a),this.circles.push(u),this.circles.push(y),this.circles.push(b)}_insertBoxCell(a,u,y,b,j,I){this.boxCells[j].push(I)}_insertCircleCell(a,u,y,b,j,I){this.circleCells[j].push(I)}_query(a,u,y,b,j,I,F){if(y<0||a>this.width||b<0||u>this.height)return[];const U=[];if(a<=0&&u<=0&&this.width<=y&&this.height<=b){if(j)return[{key:null,x1:a,y1:u,x2:y,y2:b}];for(let Y=0;Y<this.boxKeys.length;Y++)U.push({key:this.boxKeys[Y],x1:this.bboxes[4*Y],y1:this.bboxes[4*Y+1],x2:this.bboxes[4*Y+2],y2:this.bboxes[4*Y+3]});for(let Y=0;Y<this.circleKeys.length;Y++){const re=this.circles[3*Y],ce=this.circles[3*Y+1],le=this.circles[3*Y+2];U.push({key:this.circleKeys[Y],x1:re-le,y1:ce-le,x2:re+le,y2:ce+le})}}else this._forEachCell(a,u,y,b,this._queryCell,U,{hitTest:j,overlapMode:I,seenUids:{box:{},circle:{}}},F);return U}query(a,u,y,b){return this._query(a,u,y,b,!1,null)}hitTest(a,u,y,b,j,I){return this._query(a,u,y,b,!0,j,I).length>0}hitTestCircle(a,u,y,b,j){const I=a-y,F=a+y,U=u-y,Y=u+y;if(F<0||I>this.width||Y<0||U>this.height)return!1;const re=[];return this._forEachCell(I,U,F,Y,this._queryCellCircle,re,{hitTest:!0,overlapMode:b,circle:{x:a,y:u,radius:y},seenUids:{box:{},circle:{}}},j),re.length>0}_queryCell(a,u,y,b,j,I,F,U){const{seenUids:Y,hitTest:re,overlapMode:ce}=F,le=this.boxCells[j];if(le!==null){const be=this.bboxes;for(const Me of le)if(!Y.box[Me]){Y.box[Me]=!0;const Ne=4*Me,Ie=this.boxKeys[Me];if(a<=be[Ne+2]&&u<=be[Ne+3]&&y>=be[Ne+0]&&b>=be[Ne+1]&&(!U||U(Ie))&&(!re||!Tn(ce,Ie.overlapMode))&&(I.push({key:Ie,x1:be[Ne],y1:be[Ne+1],x2:be[Ne+2],y2:be[Ne+3]}),re))return!0}}const ge=this.circleCells[j];if(ge!==null){const be=this.circles;for(const Me of ge)if(!Y.circle[Me]){Y.circle[Me]=!0;const Ne=3*Me,Ie=this.circleKeys[Me];if(this._circleAndRectCollide(be[Ne],be[Ne+1],be[Ne+2],a,u,y,b)&&(!U||U(Ie))&&(!re||!Tn(ce,Ie.overlapMode))){const ze=be[Ne],He=be[Ne+1],Fe=be[Ne+2];if(I.push({key:Ie,x1:ze-Fe,y1:He-Fe,x2:ze+Fe,y2:He+Fe}),re)return!0}}}return!1}_queryCellCircle(a,u,y,b,j,I,F,U){const{circle:Y,seenUids:re,overlapMode:ce}=F,le=this.boxCells[j];if(le!==null){const be=this.bboxes;for(const Me of le)if(!re.box[Me]){re.box[Me]=!0;const Ne=4*Me,Ie=this.boxKeys[Me];if(this._circleAndRectCollide(Y.x,Y.y,Y.radius,be[Ne+0],be[Ne+1],be[Ne+2],be[Ne+3])&&(!U||U(Ie))&&!Tn(ce,Ie.overlapMode))return I.push(!0),!0}}const ge=this.circleCells[j];if(ge!==null){const be=this.circles;for(const Me of ge)if(!re.circle[Me]){re.circle[Me]=!0;const Ne=3*Me,Ie=this.circleKeys[Me];if(this._circlesCollide(be[Ne],be[Ne+1],be[Ne+2],Y.x,Y.y,Y.radius)&&(!U||U(Ie))&&!Tn(ce,Ie.overlapMode))return I.push(!0),!0}}}_forEachCell(a,u,y,b,j,I,F,U){const Y=this._convertToXCellCoord(a),re=this._convertToYCellCoord(u),ce=this._convertToXCellCoord(y),le=this._convertToYCellCoord(b);for(let ge=Y;ge<=ce;ge++)for(let be=re;be<=le;be++)if(j.call(this,a,u,y,b,this.xCellCount*be+ge,I,F,U))return}_convertToXCellCoord(a){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(a*this.xScale)))}_convertToYCellCoord(a){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(a*this.yScale)))}_circlesCollide(a,u,y,b,j,I){const F=b-a,U=j-u,Y=y+I;return Y*Y>F*F+U*U}_circleAndRectCollide(a,u,y,b,j,I,F){const U=(I-b)/2,Y=Math.abs(a-(b+U));if(Y>U+y)return!1;const re=(F-j)/2,ce=Math.abs(u-(j+re));if(ce>re+y)return!1;if(Y<=U||ce<=re)return!0;const le=Y-U,ge=ce-re;return le*le+ge*ge<=y*y}}function Aa(C,a,u){const y=o.N();if(!C){const{vecSouth:ce,vecEast:le}=os(a),ge=w();ge[0]=le[0],ge[1]=le[1],ge[2]=ce[0],ge[3]=ce[1],b=ge,(re=(I=(j=ge)[0])*(Y=j[3])-(U=j[2])*(F=j[1]))&&(b[0]=Y*(re=1/re),b[1]=-F*re,b[2]=-U*re,b[3]=I*re),y[0]=ge[0],y[1]=ge[1],y[4]=ge[2],y[5]=ge[3]}var b,j,I,F,U,Y,re;return o.Q(y,y,[1/u,1/u,1]),y}function Ed(C,a,u,y){if(C){const b=o.N();if(!a){const{vecSouth:j,vecEast:I}=os(u);b[0]=I[0],b[1]=I[1],b[4]=j[0],b[5]=j[1]}return o.Q(b,b,[y,y,1]),b}return u.pixelsToClipSpaceMatrix}function os(C){const a=Math.cos(C.rollInRadians),u=Math.sin(C.rollInRadians),y=Math.cos(C.pitchInRadians),b=Math.cos(C.bearingInRadians),j=Math.sin(C.bearingInRadians),I=o.aC();I[0]=-b*y*u-j*a,I[1]=-j*y*u+b*a;const F=o.aD(I);F<1e-9?o.aE(I):o.aF(I,I,1/F);const U=o.aC();U[0]=b*y*a-j*u,U[1]=j*y*a+b*u;const Y=o.aD(U);return Y<1e-9?o.aE(U):o.aF(U,U,1/Y),{vecEast:U,vecSouth:I}}function Wn(C,a,u,y){let b;y?(b=[C,a,y(C,a),1],o.aH(b,b,u)):(b=[C,a,0,1],Xl(b,b,u));const j=b[3];return{point:new o.P(b[0]/j,b[1]/j),signedDistanceFromCamera:j,isOccluded:!1}}function $c(C,a){return .5+C/a*.5}function Zl(C,a){return C.x>=-a[0]&&C.x<=a[0]&&C.y>=-a[1]&&C.y<=a[1]}function jd(C,a,u,y,b,j,I,F,U,Y,re,ce,le){const ge=u?C.textSizeData:C.iconSizeData,be=o.ay(ge,a.transform.zoom),Me=[256/a.width*2+1,256/a.height*2+1],Ne=u?C.text.dynamicLayoutVertexArray:C.icon.dynamicLayoutVertexArray;Ne.clear();const Ie=C.lineVertexArray,ze=u?C.text.placedSymbolArray:C.icon.placedSymbolArray,He=a.transform.width/a.transform.height;let Fe=!1;for(let Ge=0;Ge<ze.length;Ge++){const Ye=ze.get(Ge);if(Ye.hidden||Ye.writingMode===o.az.vertical&&!Fe){jr(Ye.numGlyphs,Ne);continue}Fe=!1;const Ue=new o.P(Ye.anchorX,Ye.anchorY),st={getElevation:le,pitchedLabelPlaneMatrix:y,lineVertexArray:Ie,pitchWithMap:j,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:a.transform,tileAnchorPoint:Ue,unwrappedTileID:U,width:Y,height:re,translation:ce},bt=Go(Ye.anchorX,Ye.anchorY,st);if(!Zl(bt.point,Me)){jr(Ye.numGlyphs,Ne);continue}const yt=$c(a.transform.cameraToCenterDistance,bt.signedDistanceFromCamera),vt=o.aA(ge,be,Ye),xt=j?vt*a.transform.getPitchedTextCorrection(Ye.anchorX,Ye.anchorY,U)/yt:vt*yt,qt=Vc({projectionContext:st,pitchedLabelPlaneMatrixInverse:b,symbol:Ye,fontSize:xt,flip:!1,keepUpright:I,glyphOffsetArray:C.glyphOffsetArray,dynamicLayoutVertexArray:Ne,aspectRatio:He,rotateToLine:F});Fe=qt.useVertical,(qt.notEnoughRoom||Fe||qt.needsFlipping&&Vc({projectionContext:st,pitchedLabelPlaneMatrixInverse:b,symbol:Ye,fontSize:xt,flip:!0,keepUpright:I,glyphOffsetArray:C.glyphOffsetArray,dynamicLayoutVertexArray:Ne,aspectRatio:He,rotateToLine:F}).notEnoughRoom)&&jr(Ye.numGlyphs,Ne)}u?C.text.dynamicLayoutVertexBuffer.updateData(Ne):C.icon.dynamicLayoutVertexBuffer.updateData(Ne)}function Ms(C,a,u,y,b,j,I,F){const U=j.glyphStartIndex+j.numGlyphs,Y=j.lineStartIndex,re=j.lineStartIndex+j.lineLength,ce=a.getoffsetX(j.glyphStartIndex),le=a.getoffsetX(U-1),ge=Ca(C*ce,u,y,b,j.segment,Y,re,F,I);if(!ge)return null;const be=Ca(C*le,u,y,b,j.segment,Y,re,F,I);return be?F.projectionCache.anyProjectionOccluded?null:{first:ge,last:be}:null}function Xr(C,a,u,y){return C===o.az.horizontal&&Math.abs(u.y-a.y)>Math.abs(u.x-a.x)*y?{useVertical:!0}:(C===o.az.vertical?a.y<u.y:a.x>u.x)?{needsFlipping:!0}:null}function Vc(C){const{projectionContext:a,pitchedLabelPlaneMatrixInverse:u,symbol:y,fontSize:b,flip:j,keepUpright:I,glyphOffsetArray:F,dynamicLayoutVertexArray:U,aspectRatio:Y,rotateToLine:re}=C,ce=b/24,le=y.lineOffsetX*ce,ge=y.lineOffsetY*ce;let be;if(y.numGlyphs>1){const Me=y.glyphStartIndex+y.numGlyphs,Ne=y.lineStartIndex,Ie=y.lineStartIndex+y.lineLength,ze=Ms(ce,F,le,ge,j,y,re,a);if(!ze)return{notEnoughRoom:!0};const He=Uc(ze.first.point.x,ze.first.point.y,a,u),Fe=Uc(ze.last.point.x,ze.last.point.y,a,u);if(I&&!j){const Ge=Xr(y.writingMode,He,Fe,Y);if(Ge)return Ge}be=[ze.first];for(let Ge=y.glyphStartIndex+1;Ge<Me-1;Ge++){const Ye=Ca(ce*F.getoffsetX(Ge),le,ge,j,y.segment,Ne,Ie,a,re);if(!Ye)return{notEnoughRoom:!0};be.push(Ye)}be.push(ze.last)}else{if(I&&!j){const Ne=xr(a.tileAnchorPoint.x,a.tileAnchorPoint.y,a).point,Ie=y.lineStartIndex+y.segment+1,ze=new o.P(a.lineVertexArray.getx(Ie),a.lineVertexArray.gety(Ie)),He=xr(ze.x,ze.y,a),Fe=He.signedDistanceFromCamera>0?He.point:Kl(a.tileAnchorPoint,ze,Ne,1,a),Ge=Uc(Ne.x,Ne.y,a,u),Ye=Uc(Fe.x,Fe.y,a,u),Ue=Xr(y.writingMode,Ge,Ye,Y);if(Ue)return Ue}const Me=Ca(ce*F.getoffsetX(y.glyphStartIndex),le,ge,j,y.segment,y.lineStartIndex,y.lineStartIndex+y.lineLength,a,re);if(!Me||a.projectionCache.anyProjectionOccluded)return{notEnoughRoom:!0};be=[Me]}for(const Me of be)o.aG(U,Me.point,Me.angle);return{}}function Kl(C,a,u,y,b){const j=C.add(C.sub(a)._unit()),I=xr(j.x,j.y,b).point,F=u.sub(I);return u.add(F._mult(y/F.mag()))}function sa(C,a,u){const y=a.projectionCache;if(y.projections[C])return y.projections[C];const b=new o.P(a.lineVertexArray.getx(C),a.lineVertexArray.gety(C)),j=xr(b.x,b.y,a);if(j.signedDistanceFromCamera>0)return y.projections[C]=j.point,y.anyProjectionOccluded=y.anyProjectionOccluded||j.isOccluded,j.point;const I=C-u.direction;return Kl(u.distanceFromAnchor===0?a.tileAnchorPoint:new o.P(a.lineVertexArray.getx(I),a.lineVertexArray.gety(I)),b,u.previousVertex,u.absOffsetX-u.distanceFromAnchor+1,a)}function xr(C,a,u){const y=C+u.translation[0],b=a+u.translation[1];let j;return u.pitchWithMap?(j=Wn(y,b,u.pitchedLabelPlaneMatrix,u.getElevation),j.isOccluded=!1):(j=u.transform.projectTileCoordinates(y,b,u.unwrappedTileID,u.getElevation),j.point.x=(.5*j.point.x+.5)*u.width,j.point.y=(.5*-j.point.y+.5)*u.height),j}function Uc(C,a,u,y){if(u.pitchWithMap){const b=[C,a,0,1];return o.aH(b,b,y),u.transform.projectTileCoordinates(b[0]/b[3],b[1]/b[3],u.unwrappedTileID,u.getElevation).point}return{x:C/u.width*2-1,y:1-a/u.height*2}}function Go(C,a,u){return u.transform.projectTileCoordinates(C,a,u.unwrappedTileID,u.getElevation)}function ks(C,a,u){return C._unit()._perp()._mult(a*u)}function Xi(C,a,u,y,b,j,I,F,U){if(F.projectionCache.offsets[C])return F.projectionCache.offsets[C];const Y=u.add(a);if(C+U.direction<y||C+U.direction>=b)return F.projectionCache.offsets[C]=Y,Y;const re=sa(C+U.direction,F,U),ce=ks(re.sub(u),I,U.direction),le=u.add(ce),ge=re.add(ce);return F.projectionCache.offsets[C]=o.aI(j,Y,le,ge)||Y,F.projectionCache.offsets[C]}function Ca(C,a,u,y,b,j,I,F,U){const Y=y?C-a:C+a;let re=Y>0?1:-1,ce=0;y&&(re*=-1,ce=Math.PI),re<0&&(ce+=Math.PI);let le,ge=re>0?j+b:j+b+1;F.projectionCache.cachedAnchorPoint?le=F.projectionCache.cachedAnchorPoint:(le=xr(F.tileAnchorPoint.x,F.tileAnchorPoint.y,F).point,F.projectionCache.cachedAnchorPoint=le);let be,Me,Ne=le,Ie=le,ze=0,He=0;const Fe=Math.abs(Y),Ge=[];let Ye;for(;ze+He<=Fe;){if(ge+=re,ge<j||ge>=I)return null;ze+=He,Ie=Ne,Me=be;const bt={absOffsetX:Fe,direction:re,distanceFromAnchor:ze,previousVertex:Ie};if(Ne=sa(ge,F,bt),u===0)Ge.push(Ie),Ye=Ne.sub(Ie);else{let yt;const vt=Ne.sub(Ie);yt=vt.mag()===0?ks(sa(ge+re,F,bt).sub(Ne),u,re):ks(vt,u,re),Me||(Me=Ie.add(yt)),be=Xi(ge,yt,Ne,j,I,Me,u,F,bt),Ge.push(Me),Ye=be.sub(Me)}He=Ye.mag()}const Ue=Ye._mult((Fe-ze)/He)._add(Me||Ie),st=ce+Math.atan2(Ne.y-Ie.y,Ne.x-Ie.x);return Ge.push(Ue),{point:Ue,angle:U?st:0,path:Ge}}const Yn=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function jr(C,a){for(let u=0;u<C;u++){const y=a.length;a.resize(y+4),a.float32.set(Yn,3*y)}}function Xl(C,a,u){const y=a[0],b=a[1];return C[0]=u[0]*y+u[4]*b+u[12],C[1]=u[1]*y+u[5]*b+u[13],C[3]=u[3]*y+u[7]*b+u[15],C}const Or=100;class ss{constructor(a,u=new In(a.width+200,a.height+200,25),y=new In(a.width+200,a.height+200,25)){this.transform=a,this.grid=u,this.ignoredGrid=y,this.pitchFactor=Math.cos(a.pitch*Math.PI/180)*a.cameraToCenterDistance,this.screenRightBoundary=a.width+Or,this.screenBottomBoundary=a.height+Or,this.gridRightBoundary=a.width+200,this.gridBottomBoundary=a.height+200,this.perspectiveRatioCutoff=.6}placeCollisionBox(a,u,y,b,j,I,F,U,Y,re,ce,le){const ge=this.projectAndGetPerspectiveRatio(a.anchorPointX+U[0],a.anchorPointY+U[1],j,re,le),be=y*ge.perspectiveRatio;let Me;if(I||F)Me=this._projectCollisionBox(a,be,b,j,I,F,U,ge,re,ce,le);else{const Ye=ge.x+(ce?ce.x*be:0),Ue=ge.y+(ce?ce.y*be:0);Me={allPointsOccluded:!1,box:[Ye+a.x1*be,Ue+a.y1*be,Ye+a.x2*be,Ue+a.y2*be]}}const[Ne,Ie,ze,He]=Me.box,Fe=I?Me.allPointsOccluded:ge.isOccluded;let Ge=Fe;return Ge||(Ge=ge.perspectiveRatio<this.perspectiveRatioCutoff),Ge||(Ge=!this.isInsideGrid(Ne,Ie,ze,He)),Ge||u!=="always"&&this.grid.hitTest(Ne,Ie,ze,He,u,Y)?{box:[Ne,Ie,ze,He],placeable:!1,offscreen:!1,occluded:Fe}:{box:[Ne,Ie,ze,He],placeable:!0,offscreen:this.isOffscreen(Ne,Ie,ze,He),occluded:Fe}}placeCollisionCircles(a,u,y,b,j,I,F,U,Y,re,ce,le,ge,be){const Me=[],Ne=new o.P(u.anchorX,u.anchorY),Ie=this.getPerspectiveRatio(Ne.x,Ne.y,I,be),ze=(Y?j*this.transform.getPitchedTextCorrection(u.anchorX,u.anchorY,I)/Ie:j*Ie)/o.aM,He={getElevation:be,pitchedLabelPlaneMatrix:F,lineVertexArray:y,pitchWithMap:Y,projectionCache:{projections:{},offsets:{},cachedAnchorPoint:void 0,anyProjectionOccluded:!1},transform:this.transform,tileAnchorPoint:Ne,unwrappedTileID:I,width:this.transform.width,height:this.transform.height,translation:ge},Fe=Ms(ze,b,u.lineOffsetX*ze,u.lineOffsetY*ze,!1,u,!1,He);let Ge=!1,Ye=!1,Ue=!0;if(Fe){const st=.5*ce*Ie+le,bt=new o.P(-100,-100),yt=new o.P(this.screenRightBoundary,this.screenBottomBoundary),vt=new Ht,xt=Fe.first,qt=Fe.last;let Gt=[];for(let $n=xt.path.length-1;$n>=1;$n--)Gt.push(xt.path[$n]);for(let $n=1;$n<qt.path.length;$n++)Gt.push(qt.path[$n]);const Rt=2.5*st;if(Y){const $n=this.projectPathToScreenSpace(Gt,He);Gt=$n.some((Mr=>Mr.signedDistanceFromCamera<=0))?[]:$n.map((Mr=>Mr.point))}let Yt=[];if(Gt.length>0){const $n=Gt[0].clone(),Mr=Gt[0].clone();for(let li=1;li<Gt.length;li++)$n.x=Math.min($n.x,Gt[li].x),$n.y=Math.min($n.y,Gt[li].y),Mr.x=Math.max(Mr.x,Gt[li].x),Mr.y=Math.max(Mr.y,Gt[li].y);Yt=$n.x>=bt.x&&Mr.x<=yt.x&&$n.y>=bt.y&&Mr.y<=yt.y?[Gt]:Mr.x<bt.x||$n.x>yt.x||Mr.y<bt.y||$n.y>yt.y?[]:o.aJ([Gt],bt.x,bt.y,yt.x,yt.y)}for(const $n of Yt){vt.reset($n,.25*st);let Mr=0;Mr=vt.length<=.5*st?1:Math.ceil(vt.paddedLength/Rt)+1;for(let li=0;li<Mr;li++){const $r=li/Math.max(Mr-1,1),ci=vt.lerp($r),Vr=ci.x+Or,ui=ci.y+Or;Me.push(Vr,ui,st,0);const pi=Vr-st,pa=ui-st,Oi=Vr+st,Ar=ui+st;if(Ue=Ue&&this.isOffscreen(pi,pa,Oi,Ar),Ye=Ye||this.isInsideGrid(pi,pa,Oi,Ar),a!=="always"&&this.grid.hitTestCircle(Vr,ui,st,a,re)&&(Ge=!0,!U))return{circles:[],offscreen:!1,collisionDetected:Ge}}}}return{circles:!U&&Ge||!Ye||Ie<this.perspectiveRatioCutoff?[]:Me,offscreen:Ue,collisionDetected:Ge}}projectPathToScreenSpace(a,u){const y=(function(b,j){const I=o.N();return o.aB(I,j.pitchedLabelPlaneMatrix),b.map((F=>{const U=Wn(F.x,F.y,I,j.getElevation),Y=j.transform.projectTileCoordinates(U.point.x,U.point.y,j.unwrappedTileID,j.getElevation);return Y.point.x=(.5*Y.point.x+.5)*j.width,Y.point.y=(.5*-Y.point.y+.5)*j.height,Y}))})(a,u);return(function(b){let j=0,I=0,F=0,U=0;for(let Y=0;Y<b.length;Y++)b[Y].isOccluded?(F=Y+1,U=0):(U++,U>I&&(I=U,j=F));return b.slice(j,j+I)})(y)}queryRenderedSymbols(a){if(a.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const u=[],y=new o.aa;for(const ce of a){const le=new o.P(ce.x+Or,ce.y+Or);y.extend(le),u.push(le)}const{minX:b,minY:j,maxX:I,maxY:F}=y,U=this.grid.query(b,j,I,F).concat(this.ignoredGrid.query(b,j,I,F)),Y={},re={};for(const ce of U){const le=ce.key;if(Y[le.bucketInstanceId]===void 0&&(Y[le.bucketInstanceId]={}),Y[le.bucketInstanceId][le.featureIndex])continue;const ge=[new o.P(ce.x1,ce.y1),new o.P(ce.x2,ce.y1),new o.P(ce.x2,ce.y2),new o.P(ce.x1,ce.y2)];o.aK(u,ge)&&(Y[le.bucketInstanceId][le.featureIndex]=!0,re[le.bucketInstanceId]===void 0&&(re[le.bucketInstanceId]=[]),re[le.bucketInstanceId].push(le.featureIndex))}return re}insertCollisionBox(a,u,y,b,j,I){(y?this.ignoredGrid:this.grid).insert({bucketInstanceId:b,featureIndex:j,collisionGroupID:I,overlapMode:u},a[0],a[1],a[2],a[3])}insertCollisionCircles(a,u,y,b,j,I){const F=y?this.ignoredGrid:this.grid,U={bucketInstanceId:b,featureIndex:j,collisionGroupID:I,overlapMode:u};for(let Y=0;Y<a.length;Y+=4)F.insertCircle(U,a[Y],a[Y+1],a[Y+2])}projectAndGetPerspectiveRatio(a,u,y,b,j){if(j){let I;b?(I=[a,u,b(a,u),1],o.aH(I,I,j)):(I=[a,u,0,1],Xl(I,I,j));const F=I[3];return{x:(I[0]/F+1)/2*this.transform.width+Or,y:(-I[1]/F+1)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/F*.5,isOccluded:!1,signedDistanceFromCamera:F}}{const I=this.transform.projectTileCoordinates(a,u,y,b);return{x:(I.point.x+1)/2*this.transform.width+Or,y:(1-I.point.y)/2*this.transform.height+Or,perspectiveRatio:.5+this.transform.cameraToCenterDistance/I.signedDistanceFromCamera*.5,isOccluded:I.isOccluded,signedDistanceFromCamera:I.signedDistanceFromCamera}}}getPerspectiveRatio(a,u,y,b){const j=this.transform.projectTileCoordinates(a,u,y,b);return .5+this.transform.cameraToCenterDistance/j.signedDistanceFromCamera*.5}isOffscreen(a,u,y,b){return y<Or||a>=this.screenRightBoundary||b<Or||u>this.screenBottomBoundary}isInsideGrid(a,u,y,b){return y>=0&&a<this.gridRightBoundary&&b>=0&&u<this.gridBottomBoundary}getViewportMatrix(){const a=o.ar([]);return o.O(a,a,[-100,-100,0]),a}_projectCollisionBox(a,u,y,b,j,I,F,U,Y,re,ce){let le=1,ge=0,be=0,Me=1;const Ne=a.anchorPointX+F[0],Ie=a.anchorPointY+F[1];if(I&&!j){const Gt=this.projectAndGetPerspectiveRatio(Ne+1,Ie,b,Y,ce),Rt=Gt.x-U.x,Yt=Math.atan((Gt.y-U.y)/Rt)+(Rt<0?Math.PI:0),$n=Math.sin(Yt),Mr=Math.cos(Yt);le=Mr,ge=$n,be=-$n,Me=Mr}else if(!I&&j){const Gt=os(this.transform);le=Gt.vecEast[0],ge=Gt.vecEast[1],be=Gt.vecSouth[0],Me=Gt.vecSouth[1]}let ze=U.x,He=U.y,Fe=u;j&&(ze=Ne,He=Ie,Fe=Math.pow(2,-(this.transform.zoom-y.overscaledZ)),Fe*=this.transform.getPitchedTextCorrection(Ne,Ie,b),re||(Fe*=o.an(.5+U.signedDistanceFromCamera/this.transform.cameraToCenterDistance*.5,0,4))),re&&(ze+=le*re.x*Fe+be*re.y*Fe,He+=ge*re.x*Fe+Me*re.y*Fe);const Ge=a.x1*Fe,Ye=a.x2*Fe,Ue=(Ge+Ye)/2,st=a.y1*Fe,bt=a.y2*Fe,yt=(st+bt)/2,vt=[{offsetX:Ge,offsetY:st},{offsetX:Ue,offsetY:st},{offsetX:Ye,offsetY:st},{offsetX:Ye,offsetY:yt},{offsetX:Ye,offsetY:bt},{offsetX:Ue,offsetY:bt},{offsetX:Ge,offsetY:bt},{offsetX:Ge,offsetY:yt}];let xt=[];for(const{offsetX:Gt,offsetY:Rt}of vt)xt.push(new o.P(ze+le*Gt+be*Rt,He+ge*Gt+Me*Rt));let qt=!1;if(j){const Gt=xt.map((Rt=>this.projectAndGetPerspectiveRatio(Rt.x,Rt.y,b,Y,ce)));qt=Gt.some((Rt=>!Rt.isOccluded)),xt=Gt.map((Rt=>new o.P(Rt.x,Rt.y)))}else qt=!0;return{box:o.aL(xt),allPointsOccluded:!qt}}}class Yl{constructor(a,u,y,b){this.opacity=a?Math.max(0,Math.min(1,a.opacity+(a.placed?u:-u))):b&&y?1:0,this.placed=y}isHidden(){return this.opacity===0&&!this.placed}}class Fn{constructor(a,u,y,b,j){this.text=new Yl(a?a.text:null,u,y,j),this.icon=new Yl(a?a.icon:null,u,b,j)}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Yr{constructor(a,u,y){this.text=a,this.icon=u,this.skipFade=y}}class Md{constructor(a,u,y,b,j){this.bucketInstanceId=a,this.featureIndex=u,this.sourceLayerIndex=y,this.bucketIndex=b,this.tileID=j}}class ku{constructor(a){this.crossSourceCollisions=a,this.maxGroupID=0,this.collisionGroups={}}get(a){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[a]){const u=++this.maxGroupID;this.collisionGroups[a]={ID:u,predicate:y=>y.collisionGroupID===u}}return this.collisionGroups[a]}}function Yi(C,a,u,y,b){const{horizontalAlign:j,verticalAlign:I}=o.aS(C);return new o.P(-(j-.5)*a+y[0]*b,-(I-.5)*u+y[1]*b)}class kd{constructor(a,u,y,b,j){this.transform=a.clone(),this.terrain=u,this.collisionIndex=new ss(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=y,this.retainedQueryData={},this.collisionGroups=new ku(b),this.collisionCircleArrays={},this.collisionBoxArrays=new Map,this.prevPlacement=j,j&&(j.prevPlacement=void 0),this.placedOrientations={}}_getTerrainElevationFunc(a){const u=this.terrain;return u?(y,b)=>u.getElevation(a,y,b):null}getBucketParts(a,u,y,b){const j=y.getBucket(u),I=y.latestFeatureIndex;if(!j||!I||u.id!==j.layerIds[0])return;const F=y.collisionBoxArray,U=j.layers[0].layout,Y=j.layers[0].paint,re=Math.pow(2,this.transform.zoom-y.tileID.overscaledZ),ce=y.tileSize/o.a5,le=y.tileID.toUnwrapped(),ge=U.get("text-rotation-alignment")==="map",be=o.aN(y,1,this.transform.zoom),Me=o.aO(this.collisionIndex.transform,y,Y.get("text-translate"),Y.get("text-translate-anchor")),Ne=o.aO(this.collisionIndex.transform,y,Y.get("icon-translate"),Y.get("icon-translate-anchor")),Ie=Aa(ge,this.transform,be);this.retainedQueryData[j.bucketInstanceId]=new Md(j.bucketInstanceId,I,j.sourceLayerIndex,j.index,y.tileID);const ze={bucket:j,layout:U,translationText:Me,translationIcon:Ne,unwrappedTileID:le,pitchedLabelPlaneMatrix:Ie,scale:re,textPixelRatio:ce,holdingForFade:y.holdingForSymbolFade(),collisionBoxArray:F,partiallyEvaluatedTextSize:o.ay(j.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(j.sourceID)};if(b)for(const He of j.sortKeyRanges){const{sortKey:Fe,symbolInstanceStart:Ge,symbolInstanceEnd:Ye}=He;a.push({sortKey:Fe,symbolInstanceStart:Ge,symbolInstanceEnd:Ye,parameters:ze})}else a.push({symbolInstanceStart:0,symbolInstanceEnd:j.symbolInstances.length,parameters:ze})}attemptAnchorPlacement(a,u,y,b,j,I,F,U,Y,re,ce,le,ge,be,Me,Ne,Ie,ze,He,Fe){const Ge=o.aP[a.textAnchor],Ye=[a.textOffset0,a.textOffset1],Ue=Yi(Ge,y,b,Ye,j),st=this.collisionIndex.placeCollisionBox(u,le,U,Y,re,F,I,Ne,ce.predicate,He,Ue,Fe);if((!ze||this.collisionIndex.placeCollisionBox(ze,le,U,Y,re,F,I,Ie,ce.predicate,He,Ue,Fe).placeable)&&st.placeable){let bt;if(this.prevPlacement&&this.prevPlacement.variableOffsets[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID]&&this.prevPlacement.placements[ge.crossTileID].text&&(bt=this.prevPlacement.variableOffsets[ge.crossTileID].anchor),ge.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");return this.variableOffsets[ge.crossTileID]={textOffset:Ye,width:y,height:b,anchor:Ge,textBoxScale:j,prevAnchor:bt},this.markUsedJustification(be,Ge,ge,Me),be.allowVerticalPlacement&&(this.markUsedOrientation(be,Me,ge),this.placedOrientations[ge.crossTileID]=Me),{shift:Ue,placedGlyphBoxes:st}}}placeLayerBucketPart(a,u,y){const{bucket:b,layout:j,translationText:I,translationIcon:F,unwrappedTileID:U,pitchedLabelPlaneMatrix:Y,textPixelRatio:re,holdingForFade:ce,collisionBoxArray:le,partiallyEvaluatedTextSize:ge,collisionGroup:be}=a.parameters,Me=j.get("text-optional"),Ne=j.get("icon-optional"),Ie=o.aQ(j,"text-overlap","text-allow-overlap"),ze=Ie==="always",He=o.aQ(j,"icon-overlap","icon-allow-overlap"),Fe=He==="always",Ge=j.get("text-rotation-alignment")==="map",Ye=j.get("text-pitch-alignment")==="map",Ue=j.get("icon-text-fit")!=="none",st=j.get("symbol-z-order")==="viewport-y",bt=ze&&(Fe||!b.hasIconData()||Ne),yt=Fe&&(ze||!b.hasTextData()||Me);!b.collisionArrays&&le&&b.deserializeCollisionBoxes(le);const vt=this.retainedQueryData[b.bucketInstanceId].tileID,xt=this._getTerrainElevationFunc(vt),qt=this.transform.getFastPathSimpleProjectionMatrix(vt),Gt=(Rt,Yt,$n)=>{var Mr,li;if(u[Rt.crossTileID])return;if(ce)return void(this.placements[Rt.crossTileID]=new Yr(!1,!1,!1));let $r=!1,ci=!1,Vr=!0,ui=null,pi={box:null,placeable:!1,offscreen:null,occluded:!1},pa={placeable:!1},Oi=null,Ar=null,na=null,Ys=0,Il=0,Js=0;Yt.textFeatureIndex?Ys=Yt.textFeatureIndex:Rt.useRuntimeCollisionCircles&&(Ys=Rt.featureIndex),Yt.verticalTextFeatureIndex&&(Il=Yt.verticalTextFeatureIndex);const so=Yt.textBox;if(so){const No=Wr=>{let Ur=o.az.horizontal;if(b.allowVerticalPlacement&&!Wr&&this.prevPlacement){const Wi=this.prevPlacement.placedOrientations[Rt.crossTileID];Wi&&(this.placedOrientations[Rt.crossTileID]=Wi,Ur=Wi,this.markUsedOrientation(b,Ur,Rt))}return Ur},Dl=(Wr,Ur)=>{if(b.allowVerticalPlacement&&Rt.numVerticalGlyphVertices>0&&Yt.verticalTextBox){for(const Wi of b.writingModes)if(Wi===o.az.vertical?(pi=Ur(),pa=pi):pi=Wr(),pi&&pi.placeable)break}else pi=Wr()},xs=Rt.textAnchorOffsetStartIndex,_s=Rt.textAnchorOffsetEndIndex;if(_s===xs){const Wr=(Ur,Wi)=>{const ra=this.collisionIndex.placeCollisionBox(Ur,Ie,re,vt,U,Ye,Ge,I,be.predicate,xt,void 0,qt);return ra&&ra.placeable&&(this.markUsedOrientation(b,Wi,Rt),this.placedOrientations[Rt.crossTileID]=Wi),ra};Dl((()=>Wr(so,o.az.horizontal)),(()=>{const Ur=Yt.verticalTextBox;return b.allowVerticalPlacement&&Rt.numVerticalGlyphVertices>0&&Ur?Wr(Ur,o.az.vertical):{box:null,offscreen:null}})),No(pi&&pi.placeable)}else{let Wr=o.aP[(li=(Mr=this.prevPlacement)===null||Mr===void 0?void 0:Mr.variableOffsets[Rt.crossTileID])===null||li===void 0?void 0:li.anchor];const Ur=(ra,lo,$a)=>{const du=ra.x2-ra.x1,cg=ra.y2-ra.y1,Kp=Rt.textBoxScale,Gf=Ue&&He==="never"?lo:null;let bc=null,Ol=Ie==="never"?1:2,wc="never";Wr&&Ol++;for(let Wh=0;Wh<Ol;Wh++){for(let Wf=xs;Wf<_s;Wf++){const Hh=b.textAnchorOffsets.get(Wf);if(Wr&&Hh.textAnchor!==Wr)continue;const qd=this.attemptAnchorPlacement(Hh,ra,du,cg,Kp,Ge,Ye,re,vt,U,be,wc,Rt,b,$a,I,F,Gf,xt);if(qd&&(bc=qd.placedGlyphBoxes,bc&&bc.placeable))return $r=!0,ui=qd.shift,bc}Wr?Wr=null:wc=Ie}return y&&!bc&&(bc={box:this.collisionIndex.placeCollisionBox(so,"always",re,vt,U,Ye,Ge,I,be.predicate,xt,void 0,qt).box,offscreen:!1,placeable:!1,occluded:!1}),bc};Dl((()=>Ur(so,Yt.iconBox,o.az.horizontal)),(()=>{const ra=Yt.verticalTextBox;return b.allowVerticalPlacement&&(!pi||!pi.placeable)&&Rt.numVerticalGlyphVertices>0&&ra?Ur(ra,Yt.verticalIconBox,o.az.vertical):{box:null,occluded:!0,offscreen:null}})),pi&&($r=pi.placeable,Vr=pi.offscreen);const Wi=No(pi&&pi.placeable);if(!$r&&this.prevPlacement){const ra=this.prevPlacement.variableOffsets[Rt.crossTileID];ra&&(this.variableOffsets[Rt.crossTileID]=ra,this.markUsedJustification(b,ra.anchor,Rt,Wi))}}}if(Oi=pi,$r=Oi&&Oi.placeable,Vr=Oi&&Oi.offscreen,Rt.useRuntimeCollisionCircles&&Rt.centerJustifiedTextSymbolIndex>=0){const No=b.text.placedSymbolArray.get(Rt.centerJustifiedTextSymbolIndex),Dl=o.aA(b.textSizeData,ge,No),xs=j.get("text-padding");Ar=this.collisionIndex.placeCollisionCircles(Ie,No,b.lineVertexArray,b.glyphOffsetArray,Dl,U,Y,y,Ye,be.predicate,Rt.collisionCircleDiameter,xs,I,xt),Ar.circles.length&&Ar.collisionDetected&&!y&&o.w("Collisions detected, but collision boxes are not shown"),$r=ze||Ar.circles.length>0&&!Ar.collisionDetected,Vr=Vr&&Ar.offscreen}if(Yt.iconFeatureIndex&&(Js=Yt.iconFeatureIndex),Yt.iconBox){const No=Dl=>this.collisionIndex.placeCollisionBox(Dl,He,re,vt,U,Ye,Ge,F,be.predicate,xt,Ue&&ui?ui:void 0,qt);pa&&pa.placeable&&Yt.verticalIconBox?(na=No(Yt.verticalIconBox),ci=na.placeable):(na=No(Yt.iconBox),ci=na.placeable),Vr=Vr&&na.offscreen}const xc=Me||Rt.numHorizontalGlyphVertices===0&&Rt.numVerticalGlyphVertices===0,Nl=Ne||Rt.numIconVertices===0;xc||Nl?Nl?xc||(ci=ci&&$r):$r=ci&&$r:ci=$r=ci&&$r;const _c=ci&&na.placeable;if($r&&Oi.placeable&&this.collisionIndex.insertCollisionBox(Oi.box,Ie,j.get("text-ignore-placement"),b.bucketInstanceId,pa&&pa.placeable&&Il?Il:Ys,be.ID),_c&&this.collisionIndex.insertCollisionBox(na.box,He,j.get("icon-ignore-placement"),b.bucketInstanceId,Js,be.ID),Ar&&$r&&this.collisionIndex.insertCollisionCircles(Ar.circles,Ie,j.get("text-ignore-placement"),b.bucketInstanceId,Ys,be.ID),y&&this.storeCollisionData(b.bucketInstanceId,$n,Yt,Oi,na,Ar),Rt.crossTileID===0)throw new Error("symbolInstance.crossTileID can't be 0");if(b.bucketInstanceId===0)throw new Error("bucket.bucketInstanceId can't be 0");this.placements[Rt.crossTileID]=new Yr(($r||bt)&&!Oi?.occluded,(ci||yt)&&!na?.occluded,Vr||b.justReloaded),u[Rt.crossTileID]=!0};if(st){if(a.symbolInstanceStart!==0)throw new Error("bucket.bucketInstanceId should be 0");const Rt=b.getSortedSymbolIndexes(-this.transform.bearingInRadians);for(let Yt=Rt.length-1;Yt>=0;--Yt){const $n=Rt[Yt];Gt(b.symbolInstances.get($n),b.collisionArrays[$n],$n)}}else for(let Rt=a.symbolInstanceStart;Rt<a.symbolInstanceEnd;Rt++)Gt(b.symbolInstances.get(Rt),b.collisionArrays[Rt],Rt);b.justReloaded=!1}storeCollisionData(a,u,y,b,j,I){if(y.textBox||y.iconBox){let F,U;this.collisionBoxArrays.has(a)?F=this.collisionBoxArrays.get(a):(F=new Map,this.collisionBoxArrays.set(a,F)),F.has(u)?U=F.get(u):(U={text:null,icon:null},F.set(u,U)),y.textBox&&(U.text=b.box),y.iconBox&&(U.icon=j.box)}if(I){let F=this.collisionCircleArrays[a];F===void 0&&(F=this.collisionCircleArrays[a]=[]);for(let U=0;U<I.circles.length;U+=4)F.push(I.circles[U+0]-Or),F.push(I.circles[U+1]-Or),F.push(I.circles[U+2]),F.push(I.collisionDetected?1:0)}}markUsedJustification(a,u,y,b){let j;j=b===o.az.vertical?y.verticalPlacedTextSymbolIndex:{left:y.leftJustifiedTextSymbolIndex,center:y.centerJustifiedTextSymbolIndex,right:y.rightJustifiedTextSymbolIndex}[o.aR(u)];const I=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex,y.verticalPlacedTextSymbolIndex];for(const F of I)F>=0&&(a.text.placedSymbolArray.get(F).crossTileID=j>=0&&F!==j?0:y.crossTileID)}markUsedOrientation(a,u,y){const b=u===o.az.horizontal||u===o.az.horizontalOnly?u:0,j=u===o.az.vertical?u:0,I=[y.leftJustifiedTextSymbolIndex,y.centerJustifiedTextSymbolIndex,y.rightJustifiedTextSymbolIndex];for(const F of I)a.text.placedSymbolArray.get(F).placedOrientation=b;y.verticalPlacedTextSymbolIndex&&(a.text.placedSymbolArray.get(y.verticalPlacedTextSymbolIndex).placedOrientation=j)}commit(a){this.commitTime=a,this.zoomAtLastRecencyCheck=this.transform.zoom;const u=this.prevPlacement;let y=!1;this.prevZoomAdjustment=u?u.zoomAdjustment(this.transform.zoom):0;const b=u?u.symbolFadeChange(a):1,j=u?u.opacities:{},I=u?u.variableOffsets:{},F=u?u.placedOrientations:{};for(const U in this.placements){const Y=this.placements[U],re=j[U];re?(this.opacities[U]=new Fn(re,b,Y.text,Y.icon),y=y||Y.text!==re.text.placed||Y.icon!==re.icon.placed):(this.opacities[U]=new Fn(null,b,Y.text,Y.icon,Y.skipFade),y=y||Y.text||Y.icon)}for(const U in j){const Y=j[U];if(!this.opacities[U]){const re=new Fn(Y,b,!1,!1);re.isHidden()||(this.opacities[U]=re,y=y||Y.text.placed||Y.icon.placed)}}for(const U in I)this.variableOffsets[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.variableOffsets[U]=I[U]);for(const U in F)this.placedOrientations[U]||!this.opacities[U]||this.opacities[U].isHidden()||(this.placedOrientations[U]=F[U]);if(u&&u.lastPlacementChangeTime===void 0)throw new Error("Last placement time for previous placement is not defined");y?this.lastPlacementChangeTime=a:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=u?u.lastPlacementChangeTime:a)}updateLayerOpacities(a,u){const y={};for(const b of u){const j=b.getBucket(a);j&&b.latestFeatureIndex&&a.id===j.layerIds[0]&&this.updateBucketOpacities(j,b.tileID,y,b.collisionBoxArray)}}updateBucketOpacities(a,u,y,b){a.hasTextData()&&(a.text.opacityVertexArray.clear(),a.text.hasVisibleVertices=!1),a.hasIconData()&&(a.icon.opacityVertexArray.clear(),a.icon.hasVisibleVertices=!1),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexArray.clear(),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexArray.clear();const j=a.layers[0],I=j.layout,F=new Fn(null,0,!1,!1,!0),U=I.get("text-allow-overlap"),Y=I.get("icon-allow-overlap"),re=j._unevaluatedLayout.hasValue("text-variable-anchor")||j._unevaluatedLayout.hasValue("text-variable-anchor-offset"),ce=I.get("text-rotation-alignment")==="map",le=I.get("text-pitch-alignment")==="map",ge=I.get("icon-text-fit")!=="none",be=new Fn(null,0,U&&(Y||!a.hasIconData()||I.get("icon-optional")),Y&&(U||!a.hasTextData()||I.get("text-optional")),!0);!a.collisionArrays&&b&&(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData())&&a.deserializeCollisionBoxes(b);const Me=(Ie,ze,He)=>{for(let Fe=0;Fe<ze/4;Fe++)Ie.opacityVertexArray.emplaceBack(He);Ie.hasVisibleVertices=Ie.hasVisibleVertices||He!==hl},Ne=this.collisionBoxArrays.get(a.bucketInstanceId);for(let Ie=0;Ie<a.symbolInstances.length;Ie++){const ze=a.symbolInstances.get(Ie),{numHorizontalGlyphVertices:He,numVerticalGlyphVertices:Fe,crossTileID:Ge}=ze;let Ye=this.opacities[Ge];y[Ge]?Ye=F:Ye||(Ye=be,this.opacities[Ge]=Ye),y[Ge]=!0;const Ue=ze.numIconVertices>0,st=this.placedOrientations[ze.crossTileID],bt=st===o.az.vertical,yt=st===o.az.horizontal||st===o.az.horizontalOnly;if(He>0||Fe>0){const xt=qc(Ye.text);Me(a.text,He,bt?hl:xt),Me(a.text,Fe,yt?hl:xt);const qt=Ye.text.isHidden();[ze.rightJustifiedTextSymbolIndex,ze.centerJustifiedTextSymbolIndex,ze.leftJustifiedTextSymbolIndex].forEach((Yt=>{Yt>=0&&(a.text.placedSymbolArray.get(Yt).hidden=qt||bt?1:0)})),ze.verticalPlacedTextSymbolIndex>=0&&(a.text.placedSymbolArray.get(ze.verticalPlacedTextSymbolIndex).hidden=qt||yt?1:0);const Gt=this.variableOffsets[ze.crossTileID];Gt&&this.markUsedJustification(a,Gt.anchor,ze,st);const Rt=this.placedOrientations[ze.crossTileID];Rt&&(this.markUsedJustification(a,"left",ze,Rt),this.markUsedOrientation(a,Rt,ze))}if(Ue){const xt=qc(Ye.icon),qt=!(ge&&ze.verticalPlacedIconSymbolIndex&&bt);ze.placedIconSymbolIndex>=0&&(Me(a.icon,ze.numIconVertices,qt?xt:hl),a.icon.placedSymbolArray.get(ze.placedIconSymbolIndex).hidden=Ye.icon.isHidden()),ze.verticalPlacedIconSymbolIndex>=0&&(Me(a.icon,ze.numVerticalIconVertices,qt?hl:xt),a.icon.placedSymbolArray.get(ze.verticalPlacedIconSymbolIndex).hidden=Ye.icon.isHidden())}const vt=Ne&&Ne.has(Ie)?Ne.get(Ie):{text:null,icon:null};if(a.hasIconCollisionBoxData()||a.hasTextCollisionBoxData()){const xt=a.collisionArrays[Ie];if(xt){let qt=new o.P(0,0);if(xt.textBox||xt.verticalTextBox){let Gt=!0;if(re){const Rt=this.variableOffsets[Ge];Rt?(qt=Yi(Rt.anchor,Rt.width,Rt.height,Rt.textOffset,Rt.textBoxScale),ce&&qt._rotate(le?-this.transform.bearingInRadians:this.transform.bearingInRadians)):Gt=!1}if(xt.textBox||xt.verticalTextBox){let Rt;xt.textBox&&(Rt=bt),xt.verticalTextBox&&(Rt=yt),dl(a.textCollisionBox.collisionVertexArray,Ye.text.placed,!Gt||Rt,vt.text,qt.x,qt.y)}}if(xt.iconBox||xt.verticalIconBox){const Gt=!!(!yt&&xt.verticalIconBox);let Rt;xt.iconBox&&(Rt=Gt),xt.verticalIconBox&&(Rt=!Gt),dl(a.iconCollisionBox.collisionVertexArray,Ye.icon.placed,Rt,vt.icon,ge?qt.x:0,ge?qt.y:0)}}}}if(a.sortFeatures(-this.transform.bearingInRadians),this.retainedQueryData[a.bucketInstanceId]&&(this.retainedQueryData[a.bucketInstanceId].featureSortOrder=a.featureSortOrder),a.hasTextData()&&a.text.opacityVertexBuffer&&a.text.opacityVertexBuffer.updateData(a.text.opacityVertexArray),a.hasIconData()&&a.icon.opacityVertexBuffer&&a.icon.opacityVertexBuffer.updateData(a.icon.opacityVertexArray),a.hasIconCollisionBoxData()&&a.iconCollisionBox.collisionVertexBuffer&&a.iconCollisionBox.collisionVertexBuffer.updateData(a.iconCollisionBox.collisionVertexArray),a.hasTextCollisionBoxData()&&a.textCollisionBox.collisionVertexBuffer&&a.textCollisionBox.collisionVertexBuffer.updateData(a.textCollisionBox.collisionVertexArray),a.text.opacityVertexArray.length!==a.text.layoutVertexArray.length/4)throw new Error(`bucket.text.opacityVertexArray.length (= ${a.text.opacityVertexArray.length}) !== bucket.text.layoutVertexArray.length (= ${a.text.layoutVertexArray.length}) / 4`);if(a.icon.opacityVertexArray.length!==a.icon.layoutVertexArray.length/4)throw new Error(`bucket.icon.opacityVertexArray.length (= ${a.icon.opacityVertexArray.length}) !== bucket.icon.layoutVertexArray.length (= ${a.icon.layoutVertexArray.length}) / 4`);a.bucketInstanceId in this.collisionCircleArrays&&(a.collisionCircleArray=this.collisionCircleArrays[a.bucketInstanceId],delete this.collisionCircleArrays[a.bucketInstanceId])}symbolFadeChange(a){return this.fadeDuration===0?1:(a-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(a){return Math.max(0,(this.transform.zoom-a)/1.5)}hasTransitions(a){return this.stale||a-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(a,u){const y=this.zoomAtLastRecencyCheck===u?1-this.zoomAdjustment(u):1;return this.zoomAtLastRecencyCheck=u,this.commitTime+this.fadeDuration*y>a}setStale(){this.stale=!0}}function dl(C,a,u,y,b,j){y&&y.length!==0||(y=[0,0,0,0]);const I=y[0]-Or,F=y[1]-Or,U=y[2]-Or,Y=y[3]-Or;C.emplaceBack(a?1:0,u?1:0,b||0,j||0,I,F),C.emplaceBack(a?1:0,u?1:0,b||0,j||0,U,F),C.emplaceBack(a?1:0,u?1:0,b||0,j||0,U,Y),C.emplaceBack(a?1:0,u?1:0,b||0,j||0,I,Y)}const Ja=Math.pow(2,25),yi=Math.pow(2,24),Is=Math.pow(2,17),pr=Math.pow(2,16),Ns=Math.pow(2,9),Iu=Math.pow(2,8),bo=Math.pow(2,1);function qc(C){if(C.opacity===0&&!C.placed)return 0;if(C.opacity===1&&C.placed)return 4294967295;const a=C.placed?1:0,u=Math.floor(127*C.opacity);return u*Ja+a*yi+u*Is+a*pr+u*Ns+a*Iu+u*bo+a}const hl=0;class wo{constructor(a){this._sortAcrossTiles=a.layout.get("symbol-z-order")!=="viewport-y"&&!a.layout.get("symbol-sort-key").isConstant(),this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]}continuePlacement(a,u,y,b,j){const I=this._bucketParts;for(;this._currentTileIndex<a.length;)if(u.getBucketParts(I,b,a[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,j())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,I.sort(((F,U)=>F.sortKey-U.sortKey)));this._currentPartIndex<I.length;)if(u.placeLayerBucketPart(I[this._currentPartIndex],this._seenCrossTileIDs,y),this._currentPartIndex++,j())return!0;return!1}}class ls{constructor(a,u,y,b,j,I,F,U){this.placement=new kd(a,u,I,F,U),this._currentPlacementIndex=y.length-1,this._forceFullPlacement=b,this._showCollisionBoxes=j,this._done=!1}isDone(){return this._done}continuePlacement(a,u,y){const b=$(),j=()=>!this._forceFullPlacement&&$()-b>2;for(;this._currentPlacementIndex>=0;){const I=u[a[this._currentPlacementIndex]],F=this.placement.collisionIndex.transform.zoom;if(I.type==="symbol"&&(!I.minzoom||I.minzoom<=F)&&(!I.maxzoom||I.maxzoom>F)){if(this._inProgressLayer||(this._inProgressLayer=new wo(I)),this._inProgressLayer.continuePlacement(y[I.source],this.placement,this._showCollisionBoxes,I,j))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(a){return this.placement.commit(a),this.placement}}const Bn=512/o.a5/2;class Qa{constructor(a,u,y){this.tileID=a,this.bucketInstanceId=y,this._symbolsByKey={};const b=new Map;for(let j=0;j<u.length;j++){const I=u.get(j),F=I.key,U=b.get(F);U?U.push(I):b.set(F,[I])}for(const[j,I]of b){const F={positions:I.map((U=>({x:Math.floor(U.anchorX*Bn),y:Math.floor(U.anchorY*Bn)}))),crossTileIDs:I.map((U=>U.crossTileID))};if(F.positions.length>128){const U=new o.aT(F.positions.length,16,Uint16Array);for(const{x:Y,y:re}of F.positions)U.add(Y,re);U.finish(),delete F.positions,F.index=U}this._symbolsByKey[j]=F}}getScaledCoordinates(a,u){const{x:y,y:b,z:j}=this.tileID.canonical,{x:I,y:F,z:U}=u.canonical,Y=Bn/Math.pow(2,U-j),re=(F*o.a5+a.anchorY)*Y,ce=b*o.a5*Bn;return{x:Math.floor((I*o.a5+a.anchorX)*Y-y*o.a5*Bn),y:Math.floor(re-ce)}}findMatches(a,u,y){const b=this.tileID.canonical.z<u.canonical.z?1:Math.pow(2,this.tileID.canonical.z-u.canonical.z);for(let j=0;j<a.length;j++){const I=a.get(j);if(I.crossTileID)continue;const F=this._symbolsByKey[I.key];if(!F)continue;const U=this.getScaledCoordinates(I,u);if(F.index){const Y=F.index.range(U.x-b,U.y-b,U.x+b,U.y+b).sort();for(const re of Y){const ce=F.crossTileIDs[re];if(!y[ce]){y[ce]=!0,I.crossTileID=ce;break}}}else if(F.positions)for(let Y=0;Y<F.positions.length;Y++){const re=F.positions[Y],ce=F.crossTileIDs[Y];if(Math.abs(re.x-U.x)<=b&&Math.abs(re.y-U.y)<=b&&!y[ce]){y[ce]=!0,I.crossTileID=ce;break}}}}getCrossTileIDsLists(){return Object.values(this._symbolsByKey).map((({crossTileIDs:a})=>a))}}class Ds{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class So{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(a){const u=Math.round((a-this.lng)/360);if(u!==0)for(const y in this.indexes){const b=this.indexes[y],j={};for(const I in b){const F=b[I];F.tileID=F.tileID.unwrapTo(F.tileID.wrap+u),j[F.tileID.key]=F}this.indexes[y]=j}this.lng=a}addBucket(a,u,y){if(this.indexes[a.overscaledZ]&&this.indexes[a.overscaledZ][a.key]){if(this.indexes[a.overscaledZ][a.key].bucketInstanceId===u.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(a.overscaledZ,this.indexes[a.overscaledZ][a.key])}for(let j=0;j<u.symbolInstances.length;j++)u.symbolInstances.get(j).crossTileID=0;this.usedCrossTileIDs[a.overscaledZ]||(this.usedCrossTileIDs[a.overscaledZ]={});const b=this.usedCrossTileIDs[a.overscaledZ];for(const j in this.indexes){const I=this.indexes[j];if(Number(j)>a.overscaledZ)for(const F in I){const U=I[F];U.tileID.isChildOf(a)&&U.findMatches(u.symbolInstances,a,b)}else{const F=I[a.scaledTo(Number(j)).key];F&&F.findMatches(u.symbolInstances,a,b)}}for(let j=0;j<u.symbolInstances.length;j++){const I=u.symbolInstances.get(j);I.crossTileID||(I.crossTileID=y.generate(),b[I.crossTileID]=!0)}return this.indexes[a.overscaledZ]===void 0&&(this.indexes[a.overscaledZ]={}),this.indexes[a.overscaledZ][a.key]=new Qa(a,u.symbolInstances,u.bucketInstanceId),!0}removeBucketCrossTileIDs(a,u){for(const y of u.getCrossTileIDsLists())for(const b of y)delete this.usedCrossTileIDs[a][b]}removeStaleBuckets(a){let u=!1;for(const y in this.indexes){const b=this.indexes[y];for(const j in b)a[b[j].bucketInstanceId]||(this.removeBucketCrossTileIDs(y,b[j]),delete b[j],u=!0)}return u}}class $i{constructor(){this.layerIndexes={},this.crossTileIDs=new Ds,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(a,u,y){let b=this.layerIndexes[a.id];b===void 0&&(b=this.layerIndexes[a.id]=new So);let j=!1;const I={};b.handleWrapJump(y);for(const F of u){const U=F.getBucket(a);U&&a.id===U.layerIds[0]&&(U.bucketInstanceId||(U.bucketInstanceId=++this.maxBucketInstanceId),b.addBucket(F.tileID,U,this.crossTileIDs)&&(j=!0),I[U.bucketInstanceId]=!0)}return b.removeStaleBuckets(I)&&(j=!0),j}pruneUnusedLayers(a){const u={};a.forEach((y=>{u[y]=!0}));for(const y in this.layerIndexes)u[y]||delete this.layerIndexes[y]}}var _n="void main() {fragColor=vec4(1.0);}";const sr={prelude:rn(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
out highp vec4 fragColor;`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}mat3 rotationMatrixFromAxisAngle(vec3 u,float angle) {float c=cos(angle);float s=sin(angle);float c2=1.0-c;return mat3(u.x*u.x*c2+      c,u.x*u.y*c2-u.z*s,u.x*u.z*c2+u.y*s,u.y*u.x*c2+u.z*s,u.y*u.y*c2+    c,u.y*u.z*c2-u.x*s,u.z*u.x*c2-u.y*s,u.z*u.y*c2+u.x*s,u.z*u.z*c2+    c
);}
#ifdef TERRAIN3D
uniform sampler2D u_terrain;uniform float u_terrain_dim;uniform mat4 u_terrain_matrix;uniform vec4 u_terrain_unpack;uniform float u_terrain_exaggeration;uniform highp sampler2D u_depth;
#endif
const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitShifts=vec4(1.)/bitSh;highp float unpack(highp vec4 color) {return dot(color,bitShifts);}highp float depthOpacity(vec3 frag) {
#ifdef TERRAIN3D
highp float d=unpack(texture(u_depth,frag.xy*0.5+0.5))+0.0001-frag.z;return 1.0-max(0.0,min(1.0,-d*500.0));
#else
return 1.0;
#endif
}float calculate_visibility(vec4 pos) {
#ifdef TERRAIN3D
vec3 frag=pos.xyz/pos.w;highp float d=depthOpacity(frag);if (d > 0.95) return 1.0;return (d+depthOpacity(frag+vec3(0.0,0.01,0.0)))/2.0;
#else
return 1.0;
#endif
}float ele(vec2 pos) {
#ifdef TERRAIN3D
vec4 rgb=(texture(u_terrain,pos)*255.0)*u_terrain_unpack;return rgb.r+rgb.g+rgb.b-u_terrain_unpack.a;
#else
return 0.0;
#endif
}float get_elevation(vec2 pos) {
#ifdef TERRAIN3D
#ifdef GLOBE
if ((pos.y <-32767.5) || (pos.y > 32766.5)) {return 0.0;}
#endif
vec2 coord=(u_terrain_matrix*vec4(pos,0.0,1.0)).xy*u_terrain_dim+1.0;vec2 f=fract(coord);vec2 c=(floor(coord)+0.5)/(u_terrain_dim+2.0);float d=1.0/(u_terrain_dim+2.0);float tl=ele(c);float tr=ele(c+vec2(d,0.0));float bl=ele(c+vec2(0.0,d));float br=ele(c+vec2(d,d));float elevation=mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);return elevation*u_terrain_exaggeration;
#else
return 0.0;
#endif
}const float PI=3.141592653589793;uniform mat4 u_projection_matrix;`),projectionMercator:rn("","float projectLineThickness(float tileY) {return 1.0;}float projectCircleRadius(float tileY) {return 1.0;}vec4 projectTile(vec2 p) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);return result;}vec4 projectTile(vec2 p,vec2 rawPos) {vec4 result=u_projection_matrix*vec4(p,0.0,1.0);if (rawPos.y <-32767.5 || rawPos.y > 32766.5) {result.z=-10000000.0;}return result;}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return u_projection_matrix*vec4(posInTile,elevation,1.0);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {return projectTileWithElevation(posInTile,elevation);}"),projectionGlobe:rn("",`#define GLOBE_RADIUS 6371008.8
uniform highp vec4 u_projection_tile_mercator_coords;uniform highp vec4 u_projection_clipping_plane;uniform highp float u_projection_transition;uniform mat4 u_projection_fallback_matrix;vec3 globeRotateVector(vec3 vec,vec2 angles) {vec3 axisRight=vec3(vec.z,0.0,-vec.x);vec3 axisUp=cross(axisRight,vec);axisRight=normalize(axisRight);axisUp=normalize(axisUp);vec2 t=tan(angles);return normalize(vec+axisRight*t.x+axisUp*t.y);}mat3 globeGetRotationMatrix(vec3 spherePos) {vec3 axisRight=vec3(spherePos.z,0.0,-spherePos.x);vec3 axisDown=cross(axisRight,spherePos);axisRight=normalize(axisRight);axisDown=normalize(axisDown);return mat3(axisRight,axisDown,spherePos
);}float circumferenceRatioAtTileY(float tileY) {float mercator_pos_y=u_projection_tile_mercator_coords.y+u_projection_tile_mercator_coords.w*tileY;float spherical_y=2.0*atan(exp(PI-(mercator_pos_y*PI*2.0)))-PI*0.5;return cos(spherical_y);}float projectLineThickness(float tileY) {float thickness=1.0/circumferenceRatioAtTileY(tileY); 
if (u_projection_transition < 0.999) {return mix(1.0,thickness,u_projection_transition);} else {return thickness;}}vec3 projectToSphere(vec2 translatedPos,vec2 rawPos) {vec2 mercator_pos=u_projection_tile_mercator_coords.xy+u_projection_tile_mercator_coords.zw*translatedPos;vec2 spherical;spherical.x=mercator_pos.x*PI*2.0+PI;spherical.y=2.0*atan(exp(PI-(mercator_pos.y*PI*2.0)))-PI*0.5;float len=cos(spherical.y);vec3 pos=vec3(sin(spherical.x)*len,sin(spherical.y),cos(spherical.x)*len
);if (rawPos.y <-32767.5) {pos=vec3(0.0,1.0,0.0);}if (rawPos.y > 32766.5) {pos=vec3(0.0,-1.0,0.0);}return pos;}vec3 projectToSphere(vec2 posInTile) {return projectToSphere(posInTile,vec2(0.0,0.0));}float globeComputeClippingZ(vec3 spherePos) {return (1.0-(dot(spherePos,u_projection_clipping_plane.xyz)+u_projection_clipping_plane.w));}vec4 interpolateProjection(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);globePosition.z=globeComputeClippingZ(elevatedPos)*globePosition.w;if (u_projection_transition > 0.999) {return globePosition;}vec4 flatPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);const float z_globeness_threshold=0.2;vec4 result=globePosition;result.z=mix(0.0,globePosition.z,clamp((u_projection_transition-z_globeness_threshold)/(1.0-z_globeness_threshold),0.0,1.0));result.xyw=mix(flatPosition.xyw,globePosition.xyw,u_projection_transition);if ((posInTile.y <-32767.5) || (posInTile.y > 32766.5)) {result=globePosition;const float poles_hidden_anim_percentage=0.02;result.z=mix(globePosition.z,100.0,pow(max((1.0-u_projection_transition)/poles_hidden_anim_percentage,0.0),8.0));}return result;}vec4 interpolateProjectionFor3D(vec2 posInTile,vec3 spherePos,float elevation) {vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);vec4 globePosition=u_projection_matrix*vec4(elevatedPos,1.0);if (u_projection_transition > 0.999) {return globePosition;}vec4 fallbackPosition=u_projection_fallback_matrix*vec4(posInTile,elevation,1.0);return mix(fallbackPosition,globePosition,u_projection_transition);}vec4 projectTile(vec2 posInTile) {return interpolateProjection(posInTile,projectToSphere(posInTile),0.0);}vec4 projectTile(vec2 posInTile,vec2 rawPos) {return interpolateProjection(posInTile,projectToSphere(posInTile,rawPos),0.0);}vec4 projectTileWithElevation(vec2 posInTile,float elevation) {return interpolateProjection(posInTile,projectToSphere(posInTile),elevation);}vec4 projectTileFor3D(vec2 posInTile,float elevation) {vec3 spherePos=projectToSphere(posInTile,posInTile);return interpolateProjectionFor3D(posInTile,spherePos,elevation);}`),background:rn(`uniform vec4 u_color;uniform float u_opacity;void main() {fragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),backgroundPattern:rn(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;void main() {gl_Position=projectTile(a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),circle:rn(`in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);float antialiased_blur=v_data.z;float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));fragColor=v_visibility*opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);const float epsilon=0.5/255.0;if (fragColor.r < epsilon && fragColor.g < epsilon && fragColor.b < epsilon && fragColor.a < epsilon) {discard;}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform highp float u_globe_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;uniform vec2 u_translate;in vec2 a_pos;out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 pos_raw=a_pos+32768.0;vec2 extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);vec2 circle_center=floor(pos_raw/8.0)+u_translate;float ele=get_elevation(circle_center);v_visibility=calculate_visibility(projectTileWithElevation(circle_center,ele));if (u_pitch_with_map) {
#ifdef GLOBE
vec3 center_vector=projectToSphere(circle_center);
#endif
float angle_scale=u_globe_extrude_scale;vec2 corner_position=circle_center;if (u_scale_with_map) {angle_scale*=(radius+stroke_width);corner_position+=extrude*u_extrude_scale*(radius+stroke_width);} else {
#ifdef GLOBE
vec4 projected_center=interpolateProjection(circle_center,center_vector,ele);
#else
vec4 projected_center=projectTileWithElevation(circle_center,ele);
#endif
corner_position+=extrude*u_extrude_scale*(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);angle_scale*=(radius+stroke_width)*(projected_center.w/u_camera_to_center_distance);}
#ifdef GLOBE
vec2 angles=extrude*angle_scale;vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(corner_position,corner_vector,ele);
#else
gl_Position=projectTileWithElevation(corner_position,ele);
#endif
} else {gl_Position=projectTileWithElevation(circle_center,ele);if (gl_Position.z/gl_Position.w > 1.0) {gl_Position.xy=vec2(10000.0);}if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}float antialiasblur=-max(1.0/u_device_pixel_ratio/(radius+stroke_width),blur);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),clippingMask:rn(_n,"in vec2 a_pos;void main() {gl_Position=projectTile(a_pos);}"),heatmap:rn(`uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);fragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;uniform highp float u_globe_extrude_scale;in vec2 a_pos;out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 pos_raw=a_pos+32768.0;vec2 unscaled_extrude=vec2(mod(pos_raw,8.0)/7.0*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 circle_center=floor(pos_raw/8.0);
#ifdef GLOBE
vec2 angles=v_extrude*radius*u_globe_extrude_scale;vec3 center_vector=projectToSphere(circle_center);vec3 corner_vector=globeRotateVector(center_vector,angles);gl_Position=interpolateProjection(circle_center+extrude,corner_vector,0.0);
#else
gl_Position=projectTileFor3D(circle_center+extrude,get_elevation(circle_center));
#endif
}`),heatmapTexture:rn(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));fragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),collisionBox:rn("in float v_placed;in float v_notUsed;void main() {float alpha=0.5;fragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {fragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {fragColor*=.1;}}","in vec2 a_anchor_pos;in vec2 a_placed;in vec2 a_box_real;uniform vec2 u_pixel_extrude_scale;out float v_placed;out float v_notUsed;void main() {gl_Position=projectTileWithElevation(a_anchor_pos,get_elevation(a_anchor_pos));gl_Position.xy=((a_box_real+0.5)*u_pixel_extrude_scale*2.0-1.0)*vec2(1.0,-1.0)*gl_Position.w;if (gl_Position.z/gl_Position.w < 1.1) {gl_Position.z=0.5;}v_placed=a_placed.x;v_notUsed=a_placed.y;}"),collisionCircle:rn("in float v_radius;in vec2 v_extrude;in float v_collision;void main() {float alpha=0.5;float stroke_radius=0.9;float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);fragColor=color*alpha*opacity_t;}","in vec2 a_pos;in float a_radius;in vec2 a_flags;uniform vec2 u_viewport_size;out float v_radius;out vec2 v_extrude;out float v_collision;void main() {float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_collision=collision;gl_Position=vec4((a_pos/u_viewport_size*2.0-1.0)*vec2(1.0,-1.0),0.0,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),colorRelief:rn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;uniform vec4 u_unpack;uniform sampler2D u_elevation_stops;uniform sampler2D u_color_stops;uniform int u_color_ramp_size;uniform float u_opacity;in vec2 v_pos;float getElevation(vec2 coord) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}float getElevationStop(int stop) {float x=(float(stop)+0.5)/float(u_color_ramp_size);vec4 data=texture(u_elevation_stops,vec2(x,0))*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {float el=getElevation(v_pos);int r=(u_color_ramp_size-1);int l=0;float el_l=getElevationStop(l);float el_r=getElevationStop(r);while(r-l > 1){int m=(r+l)/2;float el_m=getElevationStop(m);if(el < el_m){r=m;el_r=el_m;}else
{l=m;el_l=el_m;}}float x=(float(l)+(el-el_l)/(el_r-el_l)+0.5)/float(u_color_ramp_size);fragColor=u_opacity*texture(u_color_stops,vec2(x,0));
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform vec2 u_dimension;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_pos/8192.0)*scale+epsilon;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),debug:rn("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);fragColor=mix(u_color,overlay_color,overlay_color.a);}","in vec2 a_pos;out vec2 v_uv;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=projectTileWithElevation(a_pos*u_overlay_scale,get_elevation(a_pos));}"),depth:rn(_n,`in vec2 a_pos;void main() {
#ifdef GLOBE
gl_Position=projectTileFor3D(a_pos,0.0);
#else
gl_Position=u_projection_matrix*vec4(a_pos,0.0,1.0);
#endif
}`),fill:rn(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
fragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_fill_translate;in vec2 a_pos;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);}`),fillOutline:rn(`in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=outline_color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillOutlinePattern:rn(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;in vec2 v_pos_a;in vec2 v_pos_b;in vec2 v_pos;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);fragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;out vec2 v_pos;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
}`),fillPattern:rn(`#ifdef GL_ES
precision highp float;
#endif
uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);fragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;uniform vec2 u_fill_translate;in vec2 a_pos;out vec2 v_pos_a;out vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=projectTile(a_pos+u_fill_translate,a_pos);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),fillExtrusion:rn(`in vec4 v_color;void main() {fragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
out vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;vec3 normalForLighting=normal/16384.0;float directional=clamp(dot(normalForLighting,u_lightpos),0.0,1.0);
#ifdef GLOBE
mat3 rotMatrix=globeGetRotationMatrix(spherePos);normalForLighting=rotMatrix*normalForLighting;directional=mix(directional,clamp(dot(normalForLighting,u_lightpos_globe),0.0,1.0),u_projection_transition);
#endif
directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),fillExtrusionPattern:rn(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;in vec2 v_pos_a;in vec2 v_pos_b;in vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);fragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec2 u_fill_translate;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp vec3 u_lightpos_globe;uniform lowp float u_lightintensity;in vec2 a_pos;in vec4 a_normal_ed;
#ifdef TERRAIN3D
in vec2 a_centroid;
#endif
#ifdef GLOBE
out vec3 v_sphere_pos;
#endif
out vec2 v_pos_a;out vec2 v_pos_b;out vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;
#ifdef TERRAIN3D
float height_terrain3d_offset=get_elevation(a_centroid);float base_terrain3d_offset=height_terrain3d_offset-(base > 0.0 ? 0.0 : 10.0);
#else
float height_terrain3d_offset=0.0;float base_terrain3d_offset=0.0;
#endif
base=max(0.0,base)+base_terrain3d_offset;height=max(0.0,height)+height_terrain3d_offset;float t=mod(normal.x,2.0);float elevation=t > 0.0 ? height : base;vec2 posInTile=a_pos+u_fill_translate;
#ifdef GLOBE
vec3 spherePos=projectToSphere(posInTile,a_pos);vec3 elevatedPos=spherePos*(1.0+elevation/GLOBE_RADIUS);v_sphere_pos=elevatedPos;gl_Position=interpolateProjectionFor3D(posInTile,spherePos,elevation);
#else
gl_Position=u_projection_matrix*vec4(posInTile,elevation,1.0);
#endif
vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,elevation*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),hillshadePrepare:rn(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack);}void main() {vec2 epsilon=1.0/u_dimension;float tileSize=u_dimension.x-2.0;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))*tileSize/pow(2.0,exaggeration+(28.2562-u_zoom));fragColor=clamp(vec4(deriv.x/8.0+0.5,deriv.y/8.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:rn(`uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform float u_exaggeration;uniform vec4 u_accent;uniform int u_method;uniform float u_altitudes[NUM_ILLUMINATION_SOURCES];uniform float u_azimuths[NUM_ILLUMINATION_SOURCES];uniform vec4 u_shadows[NUM_ILLUMINATION_SOURCES];uniform vec4 u_highlights[NUM_ILLUMINATION_SOURCES];
#define PI 3.141592653589793
#define STANDARD 0
#define COMBINED 1
#define IGOR 2
#define MULTIDIRECTIONAL 3
#define BASIC 4
float get_aspect(vec2 deriv){return deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);}void igor_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float aspect=get_aspect(deriv);float azimuth=u_azimuths[0]+PI;float slope_stength=atan(length(deriv))*2.0/PI;float aspect_strength=1.0-abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);float shadow_strength=slope_stength*aspect_strength;float highlight_strength=slope_stength*(1.0-aspect_strength);fragColor=u_shadows[0]*shadow_strength+u_highlights[0]*highlight_strength;}void standard_hillshade(vec2 deriv){float azimuth=u_azimuths[0]+PI;float slope=atan(0.625*length(deriv));float aspect=get_aspect(deriv);float intensity=u_exaggeration;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadows[0],u_highlights[0],shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);fragColor=accent_color*(1.0-shade_color.a)+shade_color;}void basic_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor=u_highlights[0]*(2.0*shade-1.0);}else
{fragColor=u_shadows[0]*(1.0-2.0*shade);}}void multidirectional_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;fragColor=vec4(0,0,0,0);for(int i=0; i < NUM_ILLUMINATION_SOURCES; i++){float cos_alt=cos(u_altitudes[i]);float sin_alt=sin(u_altitudes[i]);float cos_az=-cos(u_azimuths[i]);float sin_az=-sin(u_azimuths[i]);float cang=(sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv));float shade=clamp(cang,0.0,1.0);if(shade > 0.5){fragColor+=u_highlights[i]*(2.0*shade-1.0)/float(NUM_ILLUMINATION_SOURCES);}else
{fragColor+=u_shadows[i]*(1.0-2.0*shade)/float(NUM_ILLUMINATION_SOURCES);}}}void combined_hillshade(vec2 deriv){deriv=deriv*u_exaggeration*2.0;float azimuth=u_azimuths[0]+PI;float cos_az=cos(azimuth);float sin_az=sin(azimuth);float cos_alt=cos(u_altitudes[0]);float sin_alt=sin(u_altitudes[0]);float cang=acos((sin_alt-(deriv.y*cos_az*cos_alt-deriv.x*sin_az*cos_alt))/sqrt(1.0+dot(deriv,deriv)));cang=clamp(cang,0.0,PI/2.0);float shade=cang*atan(length(deriv))*4.0/PI/PI;float highlight=(PI/2.0-cang)*atan(length(deriv))*4.0/PI/PI;fragColor=u_shadows[0]*shade+u_highlights[0]*highlight;}void main() {vec4 pixel=texture(u_image,v_pos);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));vec2 deriv=((pixel.rg*8.0)-4.0)/scaleFactor;if (u_method==BASIC) {basic_hillshade(deriv);} else if (u_method==COMBINED) {combined_hillshade(deriv);} else if (u_method==IGOR) {igor_hillshade(deriv);} else if (u_method==MULTIDIRECTIONAL) {multidirectional_hillshade(deriv);} else if (u_method==STANDARD) {standard_hillshade(deriv);} else {standard_hillshade(deriv);}
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=projectTile(a_pos,a_pos);v_pos=a_pos/8192.0;if (a_pos.y <-32767.5) {v_pos.y=0.0;}if (a_pos.y > 32766.5) {v_pos.y=1.0;}}"),line:rn(`uniform lowp float u_device_pixel_ratio;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp float v_linesofar;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),lineGradient:rn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_width2=vec2(outset,inset);}`),linePattern:rn(`#ifdef GL_ES
precision highp float;
#endif
uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture(u_image,pos_a),texture(u_image,pos_b),u_fade);fragColor=color*alpha*opacity;
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;out vec2 v_normal;out vec2 v_width2;out float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),lineSDF:rn(`uniform lowp float u_device_pixel_ratio;uniform lowp float u_lineatlas_width;uniform sampler2D u_image;uniform float u_mix;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture(u_image,v_tex_a).a;float sdfdist_b=texture(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0/u_device_pixel_ratio)/min(dasharray_from.w,dasharray_to.w);alpha*=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out vec2 v_tex_a;out vec2 v_tex_b;out float v_gamma_scale;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),lineGradientSDF:rn(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform sampler2D u_image_dash;uniform float u_mix;uniform lowp float u_lineatlas_width;in vec2 v_normal;in vec2 v_width2;in vec2 v_tex_a;in vec2 v_tex_b;in float v_gamma_scale;in highp vec2 v_uv;
#ifdef GLOBE
in float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture(u_image,v_uv);float sdfdist_a=texture(u_image_dash,v_tex_a).a;float sdfdist_b=texture(u_image_dash,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);float sdfgamma=(u_lineatlas_width/256.0)/min(dasharray_from.w,dasharray_to.w);float dash_alpha=smoothstep(0.5-sdfgamma/floorwidth,0.5+sdfgamma/floorwidth,sdfdist);fragColor=color*(alpha*dash_alpha*opacity);
#ifdef GLOBE
if (v_depth > 1.0) {discard;}
#endif
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
in vec2 a_pos_normal;in vec4 a_data;in float a_uv_x;in float a_split_index;uniform vec2 u_translation;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;uniform float u_tileratio;uniform float u_crossfade_from;uniform float u_crossfade_to;uniform float u_lineatlas_height;out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec2 v_uv;out vec2 v_tex_a;out vec2 v_tex_b;
#ifdef GLOBE
out float v_depth;
#endif
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define mediump vec4 dasharray_from
#pragma mapbox: define mediump vec4 dasharray_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 dasharray_from
#pragma mapbox: initialize mediump vec4 dasharray_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;float texel_height=1.0/u_image_height;float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float adjustedThickness=projectLineThickness(pos.y);vec4 projected_no_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation);vec4 projected_with_extrude=projectTile(pos+offset2/u_ratio*adjustedThickness+u_translation+dist/u_ratio*adjustedThickness);gl_Position=projected_with_extrude;
#ifdef GLOBE
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef TERRAIN3D
v_gamma_scale=1.0;
#else
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length((projected_with_extrude.xy-projected_no_extrude.xy)/projected_with_extrude.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;
#endif
float u_patternscale_a_x=u_tileratio/dasharray_from.w/u_crossfade_from;float u_patternscale_a_y=-dasharray_from.z/2.0/u_lineatlas_height;float u_patternscale_b_x=u_tileratio/dasharray_to.w/u_crossfade_to;float u_patternscale_b_y=-dasharray_to.z/2.0/u_lineatlas_height;v_tex_a=vec2(a_linesofar*u_patternscale_a_x/floorwidth,normal.y*u_patternscale_a_y+(float(dasharray_from.y)+0.5)/u_lineatlas_height);v_tex_b=vec2(a_linesofar*u_patternscale_b_x/floorwidth,normal.y*u_patternscale_b_y+(float(dasharray_to.y)+0.5)/u_lineatlas_height);v_width2=vec2(outset,inset);}`),raster:rn(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;in vec2 v_pos0;in vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture(u_image0,v_pos0);vec4 color1=texture(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);fragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;uniform vec4 u_coords_top;uniform vec4 u_coords_bottom;in vec2 a_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {vec2 fractionalPos=a_pos/8192.0;vec2 position=mix(mix(u_coords_top.xy,u_coords_top.zw,fractionalPos.x),mix(u_coords_bottom.xy,u_coords_bottom.zw,fractionalPos.x),fractionalPos.y);gl_Position=projectTile(position,position);v_pos0=((fractionalPos-0.5)/u_buffer_scale)+0.5;
#ifdef GLOBE
if (a_pos.y <-32767.5) {v_pos0.y=0.0;}if (a_pos.y > 32766.5) {v_pos0.y=1.0;}
#endif
v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),symbolIcon:rn(`uniform sampler2D u_texture;in vec2 v_tex;in float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;fragColor=texture(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_tex;out float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}gl_Position=finalPos;v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float visibility=calculate_visibility(projectedPoint);v_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));}`),symbolSDF:rn(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;in vec2 v_data0;in vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float inner_edge=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);inner_edge=inner_edge+gamma*gamma_scale;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(inner_edge-gamma_scaled,inner_edge+gamma_scaled,dist);if (u_is_halo) {lowp float halo_edge=(6.0-halo_width/fontScale)/SDF_PX;alpha=min(smoothstep(halo_edge-gamma_scaled,halo_edge+gamma_scaled,dist),1.0-alpha);}fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec4 a_pixeloffset;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_translation;uniform float u_pitched_scale;out vec2 v_data0;out vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),symbolTextAndIcon:rn(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;in vec4 v_data0;in vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;fragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);fragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
fragColor=vec4(1.0);
#endif
}`,`in vec4 a_pos_offset;in vec4 a_data;in vec3 a_projected_pos;in float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;uniform bool u_is_along_line;uniform bool u_is_variable_anchor;uniform vec2 u_translation;uniform float u_pitched_scale;out vec4 v_data0;out vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;float ele=get_elevation(a_pos);highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 translated_a_pos=a_pos+u_translation;vec4 projectedPoint=projectTileWithElevation(translated_a_pos,ele);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=projectTileWithElevation(translated_a_pos+vec2(1,0),ele);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos;if (u_is_along_line || u_is_variable_anchor) {projected_pos=vec4(a_projected_pos.xy,ele,1.0);} else if (u_pitch_with_map) {projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy+u_translation,ele,1.0);} else {projected_pos=u_label_plane_matrix*projectTileWithElevation(a_projected_pos.xy+u_translation,ele);}float z=float(u_pitch_with_map)*projected_pos.z/projected_pos.w;float projectionScaling=1.0;
#ifdef GLOBE
if(u_pitch_with_map && !u_is_along_line) {float anchor_pos_tile_y=(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w,z,1.0)).y;projectionScaling=mix(projectionScaling,1.0/circumferenceRatioAtTileY(anchor_pos_tile_y)*u_pitched_scale,u_projection_transition);}
#endif
vec4 finalPos=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale)*projectionScaling,z,1.0);if(u_pitch_with_map) {finalPos=projectTileWithElevation(finalPos.xy,finalPos.z);}float gamma_scale=finalPos.w;gl_Position=finalPos;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float visibility=calculate_visibility(projectedPoint);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(visibility,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`),terrain:rn("uniform sampler2D u_texture;uniform vec4 u_fog_color;uniform vec4 u_horizon_color;uniform float u_fog_ground_blend;uniform float u_fog_ground_blend_opacity;uniform float u_horizon_fog_blend;uniform bool u_is_globe_mode;in vec2 v_texture_pos;in float v_fog_depth;const float gamma=2.2;vec4 gammaToLinear(vec4 color) {return pow(color,vec4(gamma));}vec4 linearToGamma(vec4 color) {return pow(color,vec4(1.0/gamma));}void main() {vec4 surface_color=texture(u_texture,vec2(v_texture_pos.x,1.0-v_texture_pos.y));if (!u_is_globe_mode && v_fog_depth > u_fog_ground_blend) {vec4 surface_color_linear=gammaToLinear(surface_color);float blend_color=smoothstep(0.0,1.0,max((v_fog_depth-u_horizon_fog_blend)/(1.0-u_horizon_fog_blend),0.0));vec4 fog_horizon_color_linear=mix(gammaToLinear(u_fog_color),gammaToLinear(u_horizon_color),blend_color);float factor_fog=max(v_fog_depth-u_fog_ground_blend,0.0)/(1.0-u_fog_ground_blend);fragColor=linearToGamma(mix(surface_color_linear,fog_horizon_color_linear,pow(factor_fog,2.0)*u_fog_ground_blend_opacity));} else {fragColor=surface_color;}}","in vec3 a_pos3d;uniform mat4 u_fog_matrix;uniform float u_ele_delta;out vec2 v_texture_pos;out float v_fog_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,get_elevation(a_pos3d.xy)-ele_delta);vec4 pos=u_fog_matrix*vec4(a_pos3d.xy,ele,1.0);v_fog_depth=pos.z/pos.w*0.5+0.5;}"),terrainDepth:rn("in float v_depth;const highp vec4 bitSh=vec4(256.*256.*256.,256.*256.,256.,1.);const highp vec4 bitMsk=vec4(0.,vec3(1./256.0));highp vec4 pack(highp float value) {highp vec4 comp=fract(value*bitSh);comp-=comp.xxyz*bitMsk;return comp;}void main() {fragColor=pack(v_depth);}","in vec3 a_pos3d;uniform float u_ele_delta;out float v_depth;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);v_depth=gl_Position.z/gl_Position.w;}"),terrainCoords:rn("precision mediump float;uniform sampler2D u_texture;uniform float u_terrain_coords_id;in vec2 v_texture_pos;void main() {vec4 rgba=texture(u_texture,v_texture_pos);fragColor=vec4(rgba.r,rgba.g,rgba.b,u_terrain_coords_id);}","in vec3 a_pos3d;uniform float u_ele_delta;out vec2 v_texture_pos;void main() {float ele=get_elevation(a_pos3d.xy);float ele_delta=a_pos3d.z==1.0 ? u_ele_delta : 0.0;v_texture_pos=a_pos3d.xy/8192.0;gl_Position=projectTileFor3D(a_pos3d.xy,ele-ele_delta);}"),projectionErrorMeasurement:rn("in vec4 v_output_error_encoded;void main() {fragColor=v_output_error_encoded;}","in vec2 a_pos;uniform highp float u_input;uniform highp float u_output_expected;out vec4 v_output_error_encoded;void main() {float real_output=2.0*atan(exp(PI-(u_input*PI*2.0)))-PI*0.5;float error=real_output-u_output_expected;float abs_error=abs(error)*128.0;v_output_error_encoded.x=min(floor(abs_error*256.0),255.0)/255.0;abs_error-=v_output_error_encoded.x;v_output_error_encoded.y=min(floor(abs_error*65536.0),255.0)/255.0;abs_error-=v_output_error_encoded.x/255.0;v_output_error_encoded.z=min(floor(abs_error*16777216.0),255.0)/255.0;v_output_error_encoded.w=error >=0.0 ? 1.0 : 0.0;gl_Position=vec4(a_pos,0.0,1.0);}"),atmosphere:rn(`#ifdef GL_ES
precision highp float;
#endif
in vec3 view_direction;uniform vec3 u_sun_pos;uniform vec3 u_globe_position;uniform float u_globe_radius;uniform float u_atmosphere_blend;/**Shader use from https:*Made some change to adapt to MapLibre Globe geometry*/const float PI=3.141592653589793;const int iSteps=5;const int jSteps=3;/*radius of the planet*/const float EARTH_RADIUS=6371e3;/*radius of the atmosphere*/const float ATMOS_RADIUS=6471e3;vec2 rsi(vec3 r0,vec3 rd,float sr) {float a=dot(rd,rd);float b=2.0*dot(rd,r0);float c=dot(r0,r0)-(sr*sr);float d=(b*b)-4.0*a*c;if (d < 0.0) return vec2(1e5,-1e5);return vec2((-b-sqrt(d))/(2.0*a),(-b+sqrt(d))/(2.0*a));}vec4 atmosphere(vec3 r,vec3 r0,vec3 pSun,float iSun,float rPlanet,float rAtmos,vec3 kRlh,float kMie,float shRlh,float shMie,float g) {pSun=normalize(pSun);r=normalize(r);vec2 p=rsi(r0,r,rAtmos);if (p.x > p.y) {return vec4(0.0,0.0,0.0,1.0);}if (p.x < 0.0) {p.x=0.0;}vec3 pos=r0+r*p.x;vec2 p2=rsi(r0,r,rPlanet);if (p2.x <=p2.y && p2.x > 0.0) {p.y=min(p.y,p2.x);}float iStepSize=(p.y-p.x)/float(iSteps);float iTime=p.x+iStepSize*0.5;vec3 totalRlh=vec3(0,0,0);vec3 totalMie=vec3(0,0,0);float iOdRlh=0.0;float iOdMie=0.0;float mu=dot(r,pSun);float mumu=mu*mu;float gg=g*g;float pRlh=3.0/(16.0*PI)*(1.0+mumu);float pMie=3.0/(8.0*PI)*((1.0-gg)*(mumu+1.0))/(pow(1.0+gg-2.0*mu*g,1.5)*(2.0+gg));for (int i=0; i < iSteps; i++) {vec3 iPos=r0+r*iTime;float iHeight=length(iPos)-rPlanet;float odStepRlh=exp(-iHeight/shRlh)*iStepSize;float odStepMie=exp(-iHeight/shMie)*iStepSize;iOdRlh+=odStepRlh;iOdMie+=odStepMie;float jStepSize=rsi(iPos,pSun,rAtmos).y/float(jSteps);float jTime=jStepSize*0.5;float jOdRlh=0.0;float jOdMie=0.0;for (int j=0; j < jSteps; j++) {vec3 jPos=iPos+pSun*jTime;float jHeight=length(jPos)-rPlanet;jOdRlh+=exp(-jHeight/shRlh)*jStepSize;jOdMie+=exp(-jHeight/shMie)*jStepSize;jTime+=jStepSize;}vec3 attn=exp(-(kMie*(iOdMie+jOdMie)+kRlh*(iOdRlh+jOdRlh)));totalRlh+=odStepRlh*attn;totalMie+=odStepMie*attn;iTime+=iStepSize;}float opacity=exp(-(length(kRlh)*length(totalRlh)+kMie*length(totalMie)));vec3 color=iSun*(pRlh*kRlh*totalRlh+pMie*kMie*totalMie);return vec4(color,opacity);}void main() {vec3 scale_camera_pos=-u_globe_position*EARTH_RADIUS/u_globe_radius;vec4 color=atmosphere(normalize(view_direction),scale_camera_pos,u_sun_pos,22.0,EARTH_RADIUS,ATMOS_RADIUS,vec3(5.5e-6,13.0e-6,22.4e-6),21e-6,8e3,1.2e3,0.758
);color.rgb=1.0-exp(-1.0*color.rgb);color=pow(color,vec4(1.0/2.2));fragColor=vec4(color.rgb,1.0-color.a)*u_atmosphere_blend;}`,"in vec2 a_pos;uniform mat4 u_inv_proj_matrix;out vec3 view_direction;void main() {view_direction=(u_inv_proj_matrix*vec4(a_pos,0.0,1.0)).xyz;gl_Position=vec4(a_pos,0.0,1.0);}"),sky:rn("uniform vec4 u_sky_color;uniform vec4 u_horizon_color;uniform vec2 u_horizon;uniform vec2 u_horizon_normal;uniform float u_sky_horizon_blend;uniform float u_sky_blend;void main() {float x=gl_FragCoord.x;float y=gl_FragCoord.y;float blend=(y-u_horizon.y)*u_horizon_normal.y+(x-u_horizon.x)*u_horizon_normal.x;if (blend > 0.0) {if (blend < u_sky_horizon_blend) {fragColor=mix(u_sky_color,u_horizon_color,pow(1.0-blend/u_sky_horizon_blend,2.0));} else {fragColor=u_sky_color;}}fragColor=mix(fragColor,vec4(vec3(0.0),0.0),u_sky_blend);}","in vec2 a_pos;void main() {gl_Position=vec4(a_pos,1.0,1.0);}")};function rn(C,a){const u=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,y=a.match(/in ([\w]+) ([\w]+)/g),b=C.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),j=a.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),I=j?j.concat(b):b,F={};return{fragmentSource:C=C.replace(u,((U,Y,re,ce,le)=>(F[le]=!0,Y==="define"?`
#ifndef HAS_UNIFORM_u_${le}
in ${re} ${ce} ${le};
#else
uniform ${re} ${ce} u_${le};
#endif
`:`
#ifdef HAS_UNIFORM_u_${le}
    ${re} ${ce} ${le} = u_${le};
#endif
`))),vertexSource:a=a.replace(u,((U,Y,re,ce,le)=>{const ge=ce==="float"?"vec2":"vec4",be=le.match(/color/)?"color":ge;return F[le]?Y==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${re} ${ge} a_${le};
out ${re} ${ce} ${le};
#else
uniform ${re} ${ce} u_${le};
#endif
`:be==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = a_${le};
#else
    ${re} ${ce} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${le} = unpack_mix_${be}(a_${le}, u_${le}_t);
#else
    ${re} ${ce} ${le} = u_${le};
#endif
`:Y==="define"?`
#ifndef HAS_UNIFORM_u_${le}
uniform lowp float u_${le}_t;
in ${re} ${ge} a_${le};
#else
uniform ${re} ${ce} u_${le};
#endif
`:be==="vec4"?`
#ifndef HAS_UNIFORM_u_${le}
    ${re} ${ce} ${le} = a_${le};
#else
    ${re} ${ce} ${le} = u_${le};
#endif
`:`
#ifndef HAS_UNIFORM_u_${le}
    ${re} ${ce} ${le} = unpack_mix_${be}(a_${le}, u_${le}_t);
#else
    ${re} ${ce} ${le} = u_${le};
#endif
`})),staticAttributes:y,staticUniforms:I}}class Pr{constructor(a,u,y){this.vertexBuffer=a,this.indexBuffer=u,this.segments=y}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.vertexBuffer=null,this.indexBuffer=null,this.segments=null}}var Da=o.aU([{name:"a_pos",type:"Int16",components:2}]);const Ji="#define PROJECTION_MERCATOR",la="mercator";class ii{constructor(){this._cachedMesh=null}get name(){return"mercator"}get useSubdivision(){return!1}get shaderVariantName(){return la}get shaderDefine(){return Ji}get shaderPreludeCode(){return sr.projectionMercator}get vertexShaderPreludeCode(){return sr.projectionMercator.vertexSource}get subdivisionGranularity(){return o.aV.noSubdivision}get useGlobeControls(){return!1}get transitionState(){return 0}get latitudeErrorCorrectionRadians(){return 0}destroy(){}updateGPUdependent(a){}getMeshFromTileID(a,u,y,b,j){if(this._cachedMesh)return this._cachedMesh;const I=new o.aW;I.emplaceBack(0,0),I.emplaceBack(o.a5,0),I.emplaceBack(0,o.a5),I.emplaceBack(o.a5,o.a5);const F=a.createVertexBuffer(I,Da.members),U=o.aX.simpleSegment(0,0,4,2),Y=new o.aY;Y.emplaceBack(1,0,2),Y.emplaceBack(1,2,3);const re=a.createIndexBuffer(Y);return this._cachedMesh=new Pr(F,re,U),this._cachedMesh}recalculate(){}hasTransition(){return!1}setErrorQueryLatitudeDegrees(a){}}class Os{constructor(a=0,u=0,y=0,b=0){if(isNaN(a)||a<0||isNaN(u)||u<0||isNaN(y)||y<0||isNaN(b)||b<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=a,this.bottom=u,this.left=y,this.right=b}interpolate(a,u,y){return u.top!=null&&a.top!=null&&(this.top=o.G.number(a.top,u.top,y)),u.bottom!=null&&a.bottom!=null&&(this.bottom=o.G.number(a.bottom,u.bottom,y)),u.left!=null&&a.left!=null&&(this.left=o.G.number(a.left,u.left,y)),u.right!=null&&a.right!=null&&(this.right=o.G.number(a.right,u.right,y)),this}getCenter(a,u){const y=o.an((this.left+a-this.right)/2,0,a),b=o.an((this.top+u-this.bottom)/2,0,u);return new o.P(y,b)}equals(a){return this.top===a.top&&this.bottom===a.bottom&&this.left===a.left&&this.right===a.right}clone(){return new Os(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}function To(C,a){if(!C.renderWorldCopies||C.lngRange)return;const u=a.lng-C.center.lng;a.lng+=u>180?-360:u<-180?360:0}function tr(C){return Math.max(0,Math.floor(C))}class Qi{constructor(a,u){var y;this.applyConstrain=(b,j)=>this._constrainOverride!==null?this._constrainOverride(b,j):this._callbacks.defaultConstrain(b,j),this._callbacks=a,this._tileSize=512,this._renderWorldCopies=u?.renderWorldCopies===void 0||!!u?.renderWorldCopies,this._minZoom=u?.minZoom||0,this._maxZoom=u?.maxZoom||22,this._minPitch=u?.minPitch==null?0:u?.minPitch,this._maxPitch=u?.maxPitch==null?60:u?.maxPitch,this._constrainOverride=(y=u?.constrainOverride)!==null&&y!==void 0?y:null,this.setMaxBounds(),this._width=0,this._height=0,this._center=new o.V(0,0),this._elevation=0,this._zoom=0,this._tileZoom=tr(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=0,this._fovInRadians=.6435011087932844,this._pitchInRadians=0,this._rollInRadians=0,this._unmodified=!0,this._edgeInsets=new Os,this._minElevationForCurrentTile=0,this._autoCalculateNearFarZ=!0}apply(a,u,y){this._constrainOverride=a.constrainOverride,this._latRange=a.latRange,this._lngRange=a.lngRange,this._width=a.width,this._height=a.height,this._center=a.center,this._elevation=a.elevation,this._minElevationForCurrentTile=a.minElevationForCurrentTile,this._zoom=a.zoom,this._tileZoom=tr(this._zoom),this._scale=o.aq(this._zoom),this._bearingInRadians=a.bearingInRadians,this._fovInRadians=a.fovInRadians,this._pitchInRadians=a.pitchInRadians,this._rollInRadians=a.rollInRadians,this._unmodified=a.unmodified,this._edgeInsets=new Os(a.padding.top,a.padding.bottom,a.padding.left,a.padding.right),this._minZoom=a.minZoom,this._maxZoom=a.maxZoom,this._minPitch=a.minPitch,this._maxPitch=a.maxPitch,this._renderWorldCopies=a.renderWorldCopies,this._cameraToCenterDistance=a.cameraToCenterDistance,this._nearZ=a.nearZ,this._farZ=a.farZ,this._autoCalculateNearFarZ=!y&&a.autoCalculateNearFarZ,u&&this.constrainInternal(),this._calcMatrices()}get pixelsToClipSpaceMatrix(){return this._pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._clipSpaceToPixelsMatrix}get minElevationForCurrentTile(){return this._minElevationForCurrentTile}setMinElevationForCurrentTile(a){this._minElevationForCurrentTile=a}get tileSize(){return this._tileSize}get tileZoom(){return this._tileZoom}get scale(){return this._scale}get width(){return this._width}get height(){return this._height}get bearingInRadians(){return this._bearingInRadians}get lngRange(){return this._lngRange}get latRange(){return this._latRange}get pixelsToGLUnits(){return this._pixelsToGLUnits}get minZoom(){return this._minZoom}setMinZoom(a){this._minZoom!==a&&(this._minZoom=a,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get maxZoom(){return this._maxZoom}setMaxZoom(a){this._maxZoom!==a&&(this._maxZoom=a,this.setZoom(this.applyConstrain(this._center,this.zoom).zoom))}get minPitch(){return this._minPitch}setMinPitch(a){this._minPitch!==a&&(this._minPitch=a,this.setPitch(Math.max(this.pitch,a)))}get maxPitch(){return this._maxPitch}setMaxPitch(a){this._maxPitch!==a&&(this._maxPitch=a,this.setPitch(Math.min(this.pitch,a)))}get renderWorldCopies(){return this._renderWorldCopies}setRenderWorldCopies(a){a===void 0?a=!0:a===null&&(a=!1),this._renderWorldCopies=a}get constrainOverride(){return this._constrainOverride}setConstrainOverride(a){a===void 0&&(a=null),this._constrainOverride!==a&&(this._constrainOverride=a,this.constrainInternal(),this._calcMatrices())}get worldSize(){return this._tileSize*this._scale}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new o.P(this._width,this._height)}get bearing(){return this._bearingInRadians/Math.PI*180}setBearing(a){const u=o.W(a,-180,180)*Math.PI/180;var y,b,j,I,F,U,Y,re,ce;this._bearingInRadians!==u&&(this._unmodified=!1,this._bearingInRadians=u,this._calcMatrices(),this._rotationMatrix=w(),y=this._rotationMatrix,j=-this._bearingInRadians,I=(b=this._rotationMatrix)[0],F=b[1],U=b[2],Y=b[3],re=Math.sin(j),ce=Math.cos(j),y[0]=I*ce+U*re,y[1]=F*ce+Y*re,y[2]=I*-re+U*ce,y[3]=F*-re+Y*ce)}get rotationMatrix(){return this._rotationMatrix}get pitchInRadians(){return this._pitchInRadians}get pitch(){return this._pitchInRadians/Math.PI*180}setPitch(a){const u=o.an(a,this.minPitch,this.maxPitch)/180*Math.PI;this._pitchInRadians!==u&&(this._unmodified=!1,this._pitchInRadians=u,this._calcMatrices())}get rollInRadians(){return this._rollInRadians}get roll(){return this._rollInRadians/Math.PI*180}setRoll(a){const u=a/180*Math.PI;this._rollInRadians!==u&&(this._unmodified=!1,this._rollInRadians=u,this._calcMatrices())}get fovInRadians(){return this._fovInRadians}get fov(){return o.aZ(this._fovInRadians)}setFov(a){a=o.an(a,.1,150),this.fov!==a&&(this._unmodified=!1,this._fovInRadians=o.ap(a),this._calcMatrices())}get zoom(){return this._zoom}setZoom(a){const u=this.applyConstrain(this._center,a).zoom;this._zoom!==u&&(this._unmodified=!1,this._zoom=u,this._tileZoom=Math.max(0,Math.floor(u)),this._scale=o.aq(u),this.constrainInternal(),this._calcMatrices())}get center(){return this._center}setCenter(a){a.lat===this._center.lat&&a.lng===this._center.lng||(this._unmodified=!1,this._center=a,this.constrainInternal(),this._calcMatrices())}get elevation(){return this._elevation}setElevation(a){a!==this._elevation&&(this._elevation=a,this.constrainInternal(),this._calcMatrices())}get padding(){return this._edgeInsets.toJSON()}setPadding(a){this._edgeInsets.equals(a)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,a,1),this._calcMatrices())}get centerPoint(){return this._edgeInsets.getCenter(this._width,this._height)}get pixelsPerMeter(){return this._pixelPerMeter}get unmodified(){return this._unmodified}get cameraToCenterDistance(){return this._cameraToCenterDistance}get nearZ(){return this._nearZ}get farZ(){return this._farZ}get autoCalculateNearFarZ(){return this._autoCalculateNearFarZ}overrideNearFarZ(a,u){this._autoCalculateNearFarZ=!1,this._nearZ=a,this._farZ=u,this._calcMatrices()}clearNearFarZOverride(){this._autoCalculateNearFarZ=!0,this._calcMatrices()}isPaddingEqual(a){return this._edgeInsets.equals(a)}interpolatePadding(a,u,y){this._unmodified=!1,this._edgeInsets.interpolate(a,u,y),this.constrainInternal(),this._calcMatrices()}resize(a,u,y=!0){this._width=a,this._height=u,y&&this.constrainInternal(),this._calcMatrices()}getMaxBounds(){return this._latRange&&this._latRange.length===2&&this._lngRange&&this._lngRange.length===2?new Mn([this._lngRange[0],this._latRange[0]],[this._lngRange[1],this._latRange[1]]):null}setMaxBounds(a){a?(this._lngRange=[a.getWest(),a.getEast()],this._latRange=[a.getSouth(),a.getNorth()],this.constrainInternal()):(this._lngRange=null,this._latRange=[-o.ao,o.ao])}getCameraQueryGeometry(a,u){if(u.length===1)return[u[0],a];{const{minX:y,minY:b,maxX:j,maxY:I}=o.aa.fromPoints(u).extend(a);return[new o.P(y,b),new o.P(j,b),new o.P(j,I),new o.P(y,I),new o.P(y,b)]}}constrainInternal(){if(!this.center||!this._width||!this._height||this._constraining)return;this._constraining=!0;const a=this._unmodified,{center:u,zoom:y}=this.applyConstrain(this.center,this.zoom);this.setCenter(u),this.setZoom(y),this._unmodified=a,this._constraining=!1}_calcMatrices(){if(this._width&&this._height){this._pixelsToGLUnits=[2/this._width,-2/this._height];let a=o.ar(new Float64Array(16));o.Q(a,a,[this._width/2,-this._height/2,1]),o.O(a,a,[1,-1,0]),this._clipSpaceToPixelsMatrix=a,a=o.ar(new Float64Array(16)),o.Q(a,a,[1,-1,1]),o.O(a,a,[-1,-1,0]),o.Q(a,a,[2/this._width,2/this._height,1]),this._pixelsToClipSpaceMatrix=a,this._cameraToCenterDistance=.5/Math.tan(this.fovInRadians/2)*this._height}this._callbacks.calcMatrices()}calculateCenterFromCameraLngLatAlt(a,u,y,b){const j=y!==void 0?y:this.bearing,I=b=b!==void 0?b:this.pitch,{distanceToCenter:F,clampedElevation:U}=this._distanceToCenterFromAltElevationPitch(u,this.elevation,I),{x:Y,y:re}=Bt(I,j),ce=o.a9.fromLngLat(a,u);let le,ge,be=o.a_(1,ce.y),Me=0;do{if(Me+=1,Me>10)break;ge=F/be,le=new o.a9(ce.x+Y*ge,ce.y+re*ge),be=1/le.meterInMercatorCoordinateUnits()}while(Math.abs(F-ge*be)>1e-12);return{center:le.toLngLat(),elevation:U,zoom:o.at(this.height/2/Math.tan(this.fovInRadians/2)/ge/this.tileSize)}}recalculateZoomAndCenter(a){if(this.elevation-a==0)return;const u=1/this.worldSize,y=o.as(1,this.center.lat)*this.worldSize,b=o.a9.fromLngLat(this.center,this.elevation),j=b.x/u,I=b.y/u,F=b.z/u,U=this.pitch,Y=this.bearing,{x:re,y:ce,z:le}=Bt(U,Y),ge=this.cameraToCenterDistance,be=j+ge*-re,Me=I+ge*-ce,Ne=F+ge*le,{distanceToCenter:Ie,clampedElevation:ze}=this._distanceToCenterFromAltElevationPitch(Ne/y,a,U),He=Ie*y,Fe=new o.a9((be+re*He)*u,(Me+ce*He)*u,0).toLngLat(),Ge=o.as(1,Fe.lat),Ye=o.at(this.height/2/Math.tan(this.fovInRadians/2)/Ie/Ge/this.tileSize);this._elevation=ze,this._center=Fe,this.setZoom(Ye)}_distanceToCenterFromAltElevationPitch(a,u,y){const b=-Math.cos(o.ap(y)),j=a-u;let I,F=u;return b*j>=0||Math.abs(b)<.1?(I=1e4,F=a+I*b):I=-j/b,{distanceToCenter:I,clampedElevation:F}}getCameraPoint(){const a=Math.tan(this.pitchInRadians)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new o.P(a*Math.sin(this.rollInRadians),a*Math.cos(this.rollInRadians)))}getCameraAltitude(){return Math.cos(this.pitchInRadians)*this._cameraToCenterDistance/this._pixelPerMeter+this.elevation}getCameraLngLat(){const a=o.as(1,this.center.lat)*this.worldSize;return Ke(this.center,this.elevation,this.pitch,this.bearing,this.cameraToCenterDistance/a).toLngLat()}getMercatorTileCoordinates(a){if(!a)return[0,0,1,1];const u=a.canonical.z>=0?1<<a.canonical.z:Math.pow(2,a.canonical.z);return[a.canonical.x/u,a.canonical.y/u,1/u/o.a5,1/u/o.a5]}}class ca{constructor(a,u){this.min=a,this.max=u,this.center=o.a$([],o.b0([],this.min,this.max),.5)}quadrant(a){const u=[a%2==0,a<2],y=o.b1(this.min),b=o.b1(this.max);for(let j=0;j<u.length;j++)y[j]=u[j]?this.min[j]:this.center[j],b[j]=u[j]?this.center[j]:this.max[j];return b[2]=this.max[2],new ca(y,b)}distanceX(a){return Math.max(Math.min(this.max[0],a[0]),this.min[0])-a[0]}distanceY(a){return Math.max(Math.min(this.max[1],a[1]),this.min[1])-a[1]}intersectsFrustum(a){let u=!0;for(let y=0;y<a.planes.length;y++){const b=this.intersectsPlane(a.planes[y]);if(b===0)return 0;b===1&&(u=!1)}return u?2:a.aabb.min[0]>this.max[0]||a.aabb.min[1]>this.max[1]||a.aabb.min[2]>this.max[2]||a.aabb.max[0]<this.min[0]||a.aabb.max[1]<this.min[1]||a.aabb.max[2]<this.min[2]?0:1}intersectsPlane(a){let u=a[3],y=a[3];for(let b=0;b<3;b++)a[b]>0?(u+=a[b]*this.min[b],y+=a[b]*this.max[b]):(y+=a[b]*this.min[b],u+=a[b]*this.max[b]);return u>=0?2:y<0?0:1}}class fl{distanceToTile2d(a,u,y,b){const j=b.distanceX([a,u]),I=b.distanceY([a,u]);return Math.hypot(j,I)}getWrap(a,u,y){return y}getTileBoundingVolume(a,u,y,b){var j,I;let F=0,U=0;if(b?.terrain){const re=new o.a2(a.z,u,a.z,a.x,a.y),ce=b.terrain.getMinMaxElevation(re);F=(j=ce.minElevation)!==null&&j!==void 0?j:Math.min(0,y),U=(I=ce.maxElevation)!==null&&I!==void 0?I:Math.max(0,y)}const Y=1<<a.z;return new ca([u+a.x/Y,a.y/Y,F],[u+(a.x+1)/Y,(a.y+1)/Y,U])}allowVariableZoom(a,u){const y=a.fov*(Math.abs(Math.cos(a.rollInRadians))*a.height+Math.abs(Math.sin(a.rollInRadians))*a.width)/a.height,b=o.an(78.5-y/2,0,60);return!!u.terrain||a.pitch>b}allowWorldCopies(){return!0}prepareNextFrame(){}}class Oa{constructor(a,u,y){this.points=a,this.planes=u,this.aabb=y}static fromInvProjectionMatrix(a,u=1,y=0,b,j){const I=j?[[6,5,4],[0,1,2],[0,3,7],[2,1,5],[3,2,6],[0,4,5]]:[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]],F=Math.pow(2,y),U=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((le=>(function(ge,be,Me,Ne){const Ie=o.aH([],ge,be),ze=1/Ie[3]/Me*Ne;return o.b6(Ie,Ie,[ze,ze,1/Ie[3],ze])})(le,a,u,F)));b&&(function(le,ge,be,Me){const Ne=Me?4:0,Ie=Me?0:4;let ze=0;const He=[],Fe=[];for(let Ue=0;Ue<4;Ue++){const st=o.b2([],le[Ue+Ie],le[Ue+Ne]),bt=o.b7(st);o.a$(st,st,1/bt),He.push(bt),Fe.push(st)}for(let Ue=0;Ue<4;Ue++){const st=o.b8(le[Ue+Ne],Fe[Ue],be);ze=st!==null&&st>=0?Math.max(ze,st):Math.max(ze,He[Ue])}const Ge=(function(Ue,st){const bt=o.b2([],Ue[st[0]],Ue[st[1]]),yt=o.b2([],Ue[st[2]],Ue[st[1]]),vt=[0,0,0,0];return o.b3(vt,o.b4([],bt,yt)),vt[3]=-o.b5(vt,Ue[st[0]]),vt})(le,ge),Ye=(function(Ue,st){const bt=o.b9(Ue),yt=o.ba([],Ue,1/bt),vt=o.b2([],st,o.a$([],yt,o.b5(st,yt))),xt=o.b9(vt);if(xt>0){const qt=Math.sqrt(1-yt[3]*yt[3]),Gt=o.a$([],yt,-yt[3]),Rt=o.b0([],Gt,o.a$([],vt,qt/xt));return o.bb(st,Rt)}return null})(be,Ge);if(Ye!==null){const Ue=Ye/o.b5(Fe[0],Ge);ze=Math.min(ze,Ue)}for(let Ue=0;Ue<4;Ue++){const st=Math.min(ze,He[Ue]);le[Ue+Ie]=[le[Ue+Ne][0]+Fe[Ue][0]*st,le[Ue+Ne][1]+Fe[Ue][1]*st,le[Ue+Ne][2]+Fe[Ue][2]*st,1]}})(U,I[0],b,j);const Y=I.map((le=>{const ge=o.b2([],U[le[0]],U[le[1]]),be=o.b2([],U[le[2]],U[le[1]]),Me=o.b3([],o.b4([],ge,be)),Ne=-o.b5(Me,U[le[1]]);return Me.concat(Ne)})),re=[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY],ce=[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY];for(const le of U)for(let ge=0;ge<3;ge++)re[ge]=Math.min(re[ge],le[ge]),ce[ge]=Math.max(ce[ge],le[ge]);return new Oa(U,Y,new ca(re,ce))}}class pl{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,u,y){return this._helper.interpolatePadding(a,u,y)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,u,y=!0){this._helper.resize(a,u,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}setConstrainOverride(a){this._helper.setConstrainOverride(a)}overrideNearFarZ(a,u){this._helper.overrideNearFarZ(a,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a,u){}constructor(a){this._posMatrixCache=new Map,this._alignedPosMatrixCache=new Map,this._fogMatrixCacheF32=new Map,this.defaultConstrain=(u,y)=>{y=o.an(+y,this.minZoom,this.maxZoom);const b={center:new o.V(u.lng,u.lat),zoom:y};let j=this._helper._lngRange;if(!this._helper._renderWorldCopies&&j===null){const Fe=179.9999999999;j=[-Fe,Fe]}const I=this.tileSize*o.aq(b.zoom);let F=0,U=I,Y=0,re=I,ce=0,le=0;const{x:ge,y:be}=this.size;if(this._helper._latRange){const Fe=this._helper._latRange;F=o.X(Fe[1])*I,U=o.X(Fe[0])*I,U-F<be&&(ce=be/(U-F))}j&&(Y=o.W(o.Y(j[0])*I,0,I),re=o.W(o.Y(j[1])*I,0,I),re<Y&&(re+=I),re-Y<ge&&(le=ge/(re-Y)));const{x:Me,y:Ne}=at(I,u);let Ie,ze;const He=Math.max(le||0,ce||0);if(He){const Fe=new o.P(le?(re+Y)/2:Me,ce?(U+F)/2:Ne);return b.center=ft(I,Fe).wrap(),b.zoom+=o.at(He),b}if(this._helper._latRange){const Fe=be/2;Ne-Fe<F&&(ze=F+Fe),Ne+Fe>U&&(ze=U-Fe)}if(j){const Fe=(Y+re)/2;let Ge=Me;this._helper._renderWorldCopies&&(Ge=o.W(Me,Fe-I/2,Fe+I/2));const Ye=ge/2;Ge-Ye<Y&&(Ie=Y+Ye),Ge+Ye>re&&(Ie=re-Ye)}if(Ie!==void 0||ze!==void 0){const Fe=new o.P(Ie??Me,ze??Ne);b.center=ft(I,Fe).wrap()}return b},this.applyConstrain=(u,y)=>this._helper.applyConstrain(u,y),this._helper=new Qi({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,y)=>this.defaultConstrain(u,y)},a),this._coveringTilesDetailsProvider=new fl}clone(){const a=new pl;return a.apply(this,!1),a}apply(a,u,y){this._helper.apply(a,u,y)}get cameraPosition(){return this._cameraPosition}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._viewProjMatrix}get inverseProjectionMatrix(){return this._invProjMatrix}get mercatorMatrix(){return this._mercatorMatrix}getVisibleUnwrappedCoordinates(a){const u=[new o.bc(0,a)];if(this._helper._renderWorldCopies){const y=this.screenPointToMercatorCoordinate(new o.P(0,0)),b=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,0)),j=this.screenPointToMercatorCoordinate(new o.P(this._helper._width,this._helper._height)),I=this.screenPointToMercatorCoordinate(new o.P(0,this._helper._height)),F=Math.floor(Math.min(y.x,b.x,j.x,I.x)),U=Math.floor(Math.max(y.x,b.x,j.x,I.x)),Y=1;for(let re=F-Y;re<=U+Y;re++)re!==0&&u.push(new o.bc(re,a))}return u}getCameraFrustum(){return Oa.fromInvProjectionMatrix(this._invViewProjMatrix,this.worldSize)}getClippingPlane(){return null}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){const u=this.screenPointToLocation(this.centerPoint,a),y=a?a.getElevationForLngLatZoom(u,this._helper._tileZoom):0;this._helper.recalculateZoomAndCenter(y)}setLocationAtPoint(a,u){const y=o.as(this.elevation,this.center.lat),b=this.screenPointToMercatorCoordinateAtZ(u,y),j=this.screenPointToMercatorCoordinateAtZ(this.centerPoint,y),I=o.a9.fromLngLat(a),F=new o.a9(I.x-(b.x-j.x),I.y-(b.y-j.y));this.setCenter(F?.toLngLat()),this._helper._renderWorldCopies&&this.setCenter(this.center.wrap())}locationToScreenPoint(a,u){return u?this.coordinatePoint(o.a9.fromLngLat(a),u.getElevationForLngLat(a,this),this._pixelMatrix3D):this.coordinatePoint(o.a9.fromLngLat(a))}screenPointToLocation(a,u){var y;return(y=this.screenPointToMercatorCoordinate(a,u))===null||y===void 0?void 0:y.toLngLat()}screenPointToMercatorCoordinate(a,u){if(u){const y=u.pointCoordinate(a);if(y!=null)return y}return this.screenPointToMercatorCoordinateAtZ(a)}screenPointToMercatorCoordinateAtZ(a,u){const y=u||0,b=[a.x,a.y,0,1],j=[a.x,a.y,1,1];o.aH(b,b,this._pixelMatrixInverse),o.aH(j,j,this._pixelMatrixInverse);const I=b[3],F=j[3],U=b[1]/I,Y=j[1]/F,re=b[2]/I,ce=j[2]/F,le=re===ce?0:(y-re)/(ce-re);return new o.a9(o.G.number(b[0]/I,j[0]/F,le)/this.worldSize,o.G.number(U,Y,le)/this.worldSize,y)}coordinatePoint(a,u=0,y=this._pixelMatrix){const b=[a.x*this.worldSize,a.y*this.worldSize,u,1];return o.aH(b,b,y),new o.P(b[0]/b[3],b[1]/b[3])}getBounds(){const a=Math.max(0,this._helper._height/2-Dt(this));return new Mn().extend(this.screenPointToLocation(new o.P(0,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,a))).extend(this.screenPointToLocation(new o.P(this._helper._width,this._helper._height))).extend(this.screenPointToLocation(new o.P(0,this._helper._height)))}isPointOnMapSurface(a,u){return u?u.pointCoordinate(a)!=null:a.y>this.height/2-Dt(this)}calculatePosMatrix(a,u=!1,y){var b;const j=(b=a.key)!==null&&b!==void 0?b:o.bd(a.wrap,a.canonical.z,a.canonical.z,a.canonical.x,a.canonical.y),I=u?this._alignedPosMatrixCache:this._posMatrixCache;if(I.has(j)){const Y=I.get(j);return y?Y.f32:Y.f64}const F=St(a,this.worldSize);o.S(F,u?this._alignedProjMatrix:this._viewProjMatrix,F);const U={f64:F,f32:new Float32Array(F)};return I.set(j,U),y?U.f32:U.f64}calculateFogMatrix(a){const u=a.key,y=this._fogMatrixCacheF32;if(y.has(u))return y.get(u);const b=St(a,this.worldSize);return o.S(b,this._fogMatrix,b),y.set(u,new Float32Array(b)),y.get(u)}calculateCenterFromCameraLngLatAlt(a,u,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(a,u,y,b)}_calculateNearFarZIfNeeded(a,u,y){if(!this._helper.autoCalculateNearFarZ)return;const b=Math.min(this.elevation,this.minElevationForCurrentTile,this.getCameraAltitude()-100),j=a-b*this._helper._pixelPerMeter/Math.cos(u),I=b<0?j:a,F=Math.PI/2+this.pitchInRadians,U=o.ap(this.fov)*(Math.abs(Math.cos(o.ap(this.roll)))*this.height+Math.abs(Math.sin(o.ap(this.roll)))*this.width)/this.height*(.5+y.y/this.height),Y=Math.sin(U)*I/Math.sin(o.an(Math.PI-F-U,.01,Math.PI-.01)),re=Dt(this),ce=Math.atan(re/this._helper.cameraToCenterDistance),le=o.ap(.75),ge=ce>le?2*ce*(.5+y.y/(2*re)):le,be=Math.sin(ge)*I/Math.sin(o.an(Math.PI-F-ge,.01,Math.PI-.01)),Me=Math.min(Y,be);this._helper._farZ=1.01*(Math.cos(Math.PI/2-u)*Me+I),this._helper._nearZ=this._helper._height/50}_calcMatrices(){if(!this._helper._height)return;const a=this.centerOffset,u=at(this.worldSize,this.center),y=u.x,b=u.y;this._helper._pixelPerMeter=o.as(1,this.center.lat)*this.worldSize;const j=o.ap(Math.min(this.pitch,ut)),I=Math.max(this._helper.cameraToCenterDistance/2,this._helper.cameraToCenterDistance+this._helper._elevation*this._helper._pixelPerMeter/Math.cos(j));let F;this._calculateNearFarZIfNeeded(I,j,a),F=new Float64Array(16),o.be(F,this.fovInRadians,this._helper._width/this._helper._height,this._helper._nearZ,this._helper._farZ),this._invProjMatrix=new Float64Array(16),o.aB(this._invProjMatrix,F),F[8]=2*-a.x/this._helper._width,F[9]=2*a.y/this._helper._height,this._projectionMatrix=o.bf(F),o.Q(F,F,[1,-1,1]),o.O(F,F,[0,0,-this._helper.cameraToCenterDistance]),o.bg(F,F,-this.rollInRadians),o.bh(F,F,this.pitchInRadians),o.bg(F,F,-this.bearingInRadians),o.O(F,F,[-y,-b,0]),this._mercatorMatrix=o.Q([],F,[this.worldSize,this.worldSize,this.worldSize]),o.Q(F,F,[1,1,this._helper._pixelPerMeter]),this._pixelMatrix=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,F),o.O(F,F,[0,0,-this.elevation]),this._viewProjMatrix=F,this._invViewProjMatrix=o.aB([],F);const U=[0,0,-1,1];o.aH(U,U,this._invViewProjMatrix),this._cameraPosition=[U[0]/U[3],U[1]/U[3],U[2]/U[3]],this._fogMatrix=new Float64Array(16),o.be(this._fogMatrix,this.fovInRadians,this.width/this.height,I,this._helper._farZ),this._fogMatrix[8]=2*-a.x/this.width,this._fogMatrix[9]=2*a.y/this.height,o.Q(this._fogMatrix,this._fogMatrix,[1,-1,1]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.cameraToCenterDistance]),o.bg(this._fogMatrix,this._fogMatrix,-this.rollInRadians),o.bh(this._fogMatrix,this._fogMatrix,this.pitchInRadians),o.bg(this._fogMatrix,this._fogMatrix,-this.bearingInRadians),o.O(this._fogMatrix,this._fogMatrix,[-y,-b,0]),o.Q(this._fogMatrix,this._fogMatrix,[1,1,this._helper._pixelPerMeter]),o.O(this._fogMatrix,this._fogMatrix,[0,0,-this.elevation]),this._pixelMatrix3D=o.S(new Float64Array(16),this.clipSpaceToPixelsMatrix,F);const Y=this._helper._width%2/2,re=this._helper._height%2/2,ce=Math.cos(this.bearingInRadians),le=Math.sin(-this.bearingInRadians),ge=y-Math.round(y)+ce*Y+le*re,be=b-Math.round(b)+ce*re+le*Y,Me=new Float64Array(F);if(o.O(Me,Me,[ge>.5?ge-1:ge,be>.5?be-1:be,0]),this._alignedProjMatrix=Me,F=o.aB(new Float64Array(16),this._pixelMatrix),!F)throw new Error("failed to invert matrix");this._pixelMatrixInverse=F,this._clearMatrixCaches()}_clearMatrixCaches(){this._posMatrixCache.clear(),this._alignedPosMatrixCache.clear(),this._fogMatrixCacheF32.clear()}maxPitchScaleFactor(){if(!this._pixelMatrixInverse)return 1;const a=this.screenPointToMercatorCoordinate(new o.P(0,0)),u=[a.x*this.worldSize,a.y*this.worldSize,0,1];return o.aH(u,u,this._pixelMatrix)[3]/this._helper.cameraToCenterDistance}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){const a=o.as(1,this.center.lat)*this.worldSize;return Ke(this.center,this.elevation,this.pitch,this.bearing,this._helper.cameraToCenterDistance/a).toLngLat()}lngLatToCameraDepth(a,u){const y=o.a9.fromLngLat(a),b=[y.x*this.worldSize,y.y*this.worldSize,u,1];return o.aH(b,b,this._viewProjMatrix),b[2]/b[3]}getProjectionData(a){const{overscaledTileID:u,aligned:y,applyTerrainMatrix:b}=a,j=this._helper.getMercatorTileCoordinates(u),I=u?this.calculatePosMatrix(u,y,!0):null;let F;return F=u&&u.terrainRttPosMatrix32f&&b?u.terrainRttPosMatrix32f:I||o.bi(),{mainMatrix:F,tileMercatorCoords:j,clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:F}}isLocationOccluded(a){return!1}getPixelScale(){return 1}getCircleRadiusCorrection(){return 1}getPitchedTextCorrection(a,u,y){return 1}transformLightDirection(a){return o.b1(a)}getRayDirectionFromPixel(a){throw new Error("Not implemented.")}projectTileCoordinates(a,u,y,b){const j=this.calculatePosMatrix(y);let I;b?(I=[a,u,b(a,u),1],o.aH(I,I,j)):(I=[a,u,0,1],Xl(I,I,j));const F=I[3];return{point:new o.P(I[0]/F,I[1]/F),signedDistanceFromCamera:F,isOccluded:!1}}populateCache(a){for(const u of a)this.calculatePosMatrix(u)}getMatrixForModel(a,u){const y=o.a9.fromLngLat(a,u),b=y.meterInMercatorCoordinateUnits(),j=o.bj();return o.O(j,j,[y.x,y.y,y.z]),o.bg(j,j,Math.PI),o.bh(j,j,Math.PI/2),o.Q(j,j,[-b,b,b]),j}getProjectionDataForCustomLayer(a=!0){const u=new o.a2(0,0,0,0,0),y=this.getProjectionData({overscaledTileID:u,applyGlobeMatrix:a}),b=St(u,this.worldSize);o.S(b,this._viewProjMatrix,b),y.tileMercatorCoords=[0,0,1,1];const j=[o.a5,o.a5,this.worldSize/this._helper.pixelsPerMeter],I=o.bk();return o.Q(I,b,j),y.fallbackMatrix=I,y.mainMatrix=I,y}getFastPathSimpleProjectionMatrix(a){return this.calculatePosMatrix(a)}}function eo(){o.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.")}function Nu(C){if(C.useSlerp)if(C.k<1){const a=o.bl(C.startEulerAngles.roll,C.startEulerAngles.pitch,C.startEulerAngles.bearing),u=o.bl(C.endEulerAngles.roll,C.endEulerAngles.pitch,C.endEulerAngles.bearing),y=new Float64Array(4);o.bm(y,a,u,C.k);const b=o.bn(y);C.tr.setRoll(b.roll),C.tr.setPitch(b.pitch),C.tr.setBearing(b.bearing)}else C.tr.setRoll(C.endEulerAngles.roll),C.tr.setPitch(C.endEulerAngles.pitch),C.tr.setBearing(C.endEulerAngles.bearing);else C.tr.setRoll(o.G.number(C.startEulerAngles.roll,C.endEulerAngles.roll,C.k)),C.tr.setPitch(o.G.number(C.startEulerAngles.pitch,C.endEulerAngles.pitch,C.k)),C.tr.setBearing(o.G.number(C.startEulerAngles.bearing,C.endEulerAngles.bearing,C.k))}function Gc(C,a,u,y,b){const j=b.padding,I=at(b.worldSize,u.getNorthWest()),F=at(b.worldSize,u.getNorthEast()),U=at(b.worldSize,u.getSouthEast()),Y=at(b.worldSize,u.getSouthWest()),re=o.ap(-y),ce=I.rotate(re),le=F.rotate(re),ge=U.rotate(re),be=Y.rotate(re),Me=new o.P(Math.max(ce.x,le.x,be.x,ge.x),Math.max(ce.y,le.y,be.y,ge.y)),Ne=new o.P(Math.min(ce.x,le.x,be.x,ge.x),Math.min(ce.y,le.y,be.y,ge.y)),Ie=Me.sub(Ne),ze=(b.width-(j.left+j.right+a.left+a.right))/Ie.x,He=(b.height-(j.top+j.bottom+a.top+a.bottom))/Ie.y;if(He<0||ze<0)return void eo();const Fe=Math.min(o.at(b.scale*Math.min(ze,He)),C.maxZoom),Ge=o.P.convert(C.offset),Ye=new o.P((a.left-a.right)/2,(a.top-a.bottom)/2).rotate(o.ap(y)),Ue=Ge.add(Ye).mult(b.scale/o.aq(Fe));return{center:ft(b.worldSize,I.add(U).div(2).sub(Ue)),zoom:Fe,bearing:y}}class nr{get useGlobeControls(){return!1}handlePanInertia(a,u){const y=a.mag(),b=Math.abs(Dt(u));return{easingOffset:a.mult(Math.min(.75*b/y,1)),easingCenter:u.center}}handleMapControlsRollPitchBearingZoom(a,u){a.bearingDelta&&u.setBearing(u.bearing+a.bearingDelta),a.pitchDelta&&u.setPitch(u.pitch+a.pitchDelta),a.rollDelta&&u.setRoll(u.roll+a.rollDelta),a.zoomDelta&&u.setZoom(u.zoom+a.zoomDelta)}handleMapControlsPan(a,u,y){a.around.distSqr(u.centerPoint)<.01||u.setLocationAtPoint(y,a.around)}cameraForBoxAndBearing(a,u,y,b,j){return Gc(a,u,y,b,j)}handleJumpToCenterZoom(a,u){a.zoom!==(u.zoom!==void 0?+u.zoom:a.zoom)&&a.setZoom(+u.zoom),u.center!==void 0&&a.setCenter(o.V.convert(u.center))}handleEaseTo(a,u){const y=a.zoom,b=a.padding,j={roll:a.roll,pitch:a.pitch,bearing:a.bearing},I={roll:u.roll===void 0?a.roll:u.roll,pitch:u.pitch===void 0?a.pitch:u.pitch,bearing:u.bearing===void 0?a.bearing:u.bearing},F=u.zoom!==void 0,U=!a.isPaddingEqual(u.padding);let Y=!1;const re=F?+u.zoom:a.zoom;let ce=a.centerPoint.add(u.offsetAsPoint);const le=a.screenPointToLocation(ce),{center:ge,zoom:be}=a.applyConstrain(o.V.convert(u.center||le),re??y);To(a,ge);const Me=at(a.worldSize,le),Ne=at(a.worldSize,ge).sub(Me),Ie=o.aq(be-y);return Y=be!==y,{easeFunc:ze=>{if(Y&&a.setZoom(o.G.number(y,be,ze)),o.bo(j,I)||Nu({startEulerAngles:j,endEulerAngles:I,tr:a,k:ze,useSlerp:j.roll!=I.roll}),U&&(a.interpolatePadding(b,u.padding,ze),ce=a.centerPoint.add(u.offsetAsPoint)),u.around)a.setLocationAtPoint(u.around,u.aroundPoint);else{const He=o.aq(a.zoom-y),Fe=be>y?Math.min(2,Ie):Math.max(.5,Ie),Ge=Math.pow(Fe,1-ze),Ye=ft(a.worldSize,Me.add(Ne.mult(ze*Ge)).mult(He));a.setLocationAtPoint(a.renderWorldCopies?Ye.wrap():Ye,ce)}},isZooming:Y,elevationCenter:ge}}handleFlyTo(a,u){const y=u.zoom!==void 0,b=a.zoom,j=a.applyConstrain(o.V.convert(u.center||u.locationAtOffset),y?+u.zoom:b),I=j.center,F=j.zoom;To(a,I);const U=at(a.worldSize,u.locationAtOffset),Y=at(a.worldSize,I).sub(U),re=Y.mag(),ce=o.aq(F-b);let le;if(u.minZoom!==void 0){const ge=Math.min(+u.minZoom,b,F),be=a.applyConstrain(I,ge).zoom;le=o.aq(be-b)}return{easeFunc:(ge,be,Me,Ne)=>{a.setZoom(ge===1?F:b+o.at(be));const Ie=ge===1?I:ft(a.worldSize,U.add(Y.mult(Me)).mult(be));a.setLocationAtPoint(a.renderWorldCopies?Ie.wrap():Ie,Ne)},scaleOfZoom:ce,targetCenter:I,scaleOfMinZoom:le,pixelPathLength:re}}}class yr{constructor(a,u,y){this.blendFunction=a,this.blendColor=u,this.mask=y}}yr.Replace=[1,0],yr.disabled=new yr(yr.Replace,o.bp.transparent,[!1,!1,!1,!1]),yr.unblended=new yr(yr.Replace,o.bp.transparent,[!0,!0,!0,!0]),yr.alphaBlended=new yr([1,771],o.bp.transparent,[!0,!0,!0,!0]);const Vi=2305;class Zn{constructor(a,u,y){this.enable=a,this.mode=u,this.frontFace=y}}Zn.disabled=new Zn(!1,1029,Vi),Zn.backCCW=new Zn(!0,1029,Vi),Zn.frontCCW=new Zn(!0,1028,Vi);class Un{constructor(a,u,y){this.func=a,this.mask=u,this.range=y}}Un.ReadOnly=!1,Un.ReadWrite=!0,Un.disabled=new Un(519,Un.ReadOnly,[0,1]);const Rs=7680;class rr{constructor(a,u,y,b,j,I){this.test=a,this.ref=u,this.mask=y,this.fail=b,this.depthFail=j,this.pass=I}}rr.disabled=new rr({func:519,mask:0},0,0,Rs,Rs,Rs);const Wc=new WeakMap;function Jr(C){var a;if(Wc.has(C))return Wc.get(C);{const u=(a=C.getParameter(C.VERSION))===null||a===void 0?void 0:a.startsWith("WebGL 2.0");return Wc.set(C,u),u}}class Wo{get awaitingQuery(){return!!this._readbackQueue}constructor(a){this._readbackWaitFrames=4,this._measureWaitFrames=6,this._texWidth=1,this._texHeight=1,this._measuredError=0,this._updateCount=0,this._lastReadbackFrame=-1e3,this._readbackQueue=null,this._cachedRenderContext=a;const u=a.context,y=u.gl;this._texFormat=y.RGBA,this._texType=y.UNSIGNED_BYTE;const b=new o.aW;b.emplaceBack(-1,-1),b.emplaceBack(2,-1),b.emplaceBack(-1,2);const j=new o.aY;j.emplaceBack(0,1,2),this._fullscreenTriangle=new Pr(u.createVertexBuffer(b,Da.members),u.createIndexBuffer(j),o.aX.simpleSegment(0,0,b.length,j.length)),this._resultBuffer=new Uint8Array(4),u.activeTexture.set(y.TEXTURE1);const I=y.createTexture();y.bindTexture(y.TEXTURE_2D,I),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_S,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_WRAP_T,y.CLAMP_TO_EDGE),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MIN_FILTER,y.NEAREST),y.texParameteri(y.TEXTURE_2D,y.TEXTURE_MAG_FILTER,y.NEAREST),y.texImage2D(y.TEXTURE_2D,0,this._texFormat,this._texWidth,this._texHeight,0,this._texFormat,this._texType,null),this._fbo=u.createFramebuffer(this._texWidth,this._texHeight,!1,!1),this._fbo.colorAttachment.set(I),Jr(y)&&(this._pbo=y.createBuffer(),y.bindBuffer(y.PIXEL_PACK_BUFFER,this._pbo),y.bufferData(y.PIXEL_PACK_BUFFER,4,y.STREAM_READ),y.bindBuffer(y.PIXEL_PACK_BUFFER,null))}destroy(){const a=this._cachedRenderContext.context.gl;this._fullscreenTriangle.destroy(),this._fbo.destroy(),a.deleteBuffer(this._pbo),this._fullscreenTriangle=null,this._fbo=null,this._pbo=null,this._resultBuffer=null}updateErrorLoop(a,u){const y=this._updateCount;return this._readbackQueue?y>=this._readbackQueue.frameNumberIssued+this._readbackWaitFrames&&this._tryReadback():y>=this._lastReadbackFrame+this._measureWaitFrames&&this._renderErrorTexture(a,u),this._updateCount++,this._measuredError}_bindFramebuffer(){const a=this._cachedRenderContext.context,u=a.gl;a.activeTexture.set(u.TEXTURE1),u.bindTexture(u.TEXTURE_2D,this._fbo.colorAttachment.get()),a.bindFramebuffer.set(this._fbo.framebuffer)}_renderErrorTexture(a,u){const y=this._cachedRenderContext.context,b=y.gl;if(this._bindFramebuffer(),y.viewport.set([0,0,this._texWidth,this._texHeight]),y.clear({color:o.bp.transparent}),this._cachedRenderContext.useProgram("projectionErrorMeasurement").draw(y,b.TRIANGLES,Un.disabled,rr.disabled,yr.unblended,Zn.disabled,((j,I)=>({u_input:j,u_output_expected:I}))(a,u),null,null,"$clipping",this._fullscreenTriangle.vertexBuffer,this._fullscreenTriangle.indexBuffer,this._fullscreenTriangle.segments),this._pbo&&Jr(b)){b.bindBuffer(b.PIXEL_PACK_BUFFER,this._pbo),b.readBuffer(b.COLOR_ATTACHMENT0),b.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,0),b.bindBuffer(b.PIXEL_PACK_BUFFER,null);const j=b.fenceSync(b.SYNC_GPU_COMMANDS_COMPLETE,0);b.flush(),this._readbackQueue={frameNumberIssued:this._updateCount,sync:j}}else this._readbackQueue={frameNumberIssued:this._updateCount,sync:null}}_tryReadback(){const a=this._cachedRenderContext.context.gl;if(this._pbo&&this._readbackQueue&&Jr(a)){const u=a.clientWaitSync(this._readbackQueue.sync,0,0);if(u===a.WAIT_FAILED)return o.w("WebGL2 clientWaitSync failed."),this._readbackQueue=null,void(this._lastReadbackFrame=this._updateCount);if(u===a.TIMEOUT_EXPIRED)return;a.bindBuffer(a.PIXEL_PACK_BUFFER,this._pbo),a.getBufferSubData(a.PIXEL_PACK_BUFFER,0,this._resultBuffer,0,4),a.bindBuffer(a.PIXEL_PACK_BUFFER,null)}else this._bindFramebuffer(),a.readPixels(0,0,this._texWidth,this._texHeight,this._texFormat,this._texType,this._resultBuffer);this._readbackQueue=null,this._measuredError=Wo._parseRGBA8float(this._resultBuffer),this._lastReadbackFrame=this._updateCount}static _parseRGBA8float(a){let u=0;return u+=a[0]/256,u+=a[1]/65536,u+=a[2]/16777216,a[3]<127&&(u=-u),u/128}}const cs=o.a5/128;function ml(C,a){const u=C.granularity!==void 0?Math.max(C.granularity,1):1,y=u+(C.generateBorders?2:0),b=u+(C.extendToNorthPole||C.generateBorders?1:0)+(C.extendToSouthPole||C.generateBorders?1:0),j=y+1,I=b+1,F=C.generateBorders?-1:0,U=C.generateBorders||C.extendToNorthPole?-1:0,Y=u+(C.generateBorders?1:0),re=u+(C.generateBorders||C.extendToSouthPole?1:0),ce=j*I,le=y*b*6,ge=j*I>65536;if(ge&&a==="16bit")throw new Error("Granularity is too large and meshes would not fit inside 16 bit vertex indices.");const be=ge||a==="32bit",Me=new Int16Array(2*ce);let Ne=0;for(let He=U;He<=re;He++)for(let Fe=F;Fe<=Y;Fe++){let Ge=Fe/u*o.a5;Fe===-1&&(Ge=-cs),Fe===u+1&&(Ge=o.a5+cs);let Ye=He/u*o.a5;He===-1&&(Ye=C.extendToNorthPole?o.br:-cs),He===u+1&&(Ye=C.extendToSouthPole?o.bs:o.a5+cs),Me[Ne++]=Ge,Me[Ne++]=Ye}const Ie=be?new Uint32Array(le):new Uint16Array(le);let ze=0;for(let He=0;He<b;He++)for(let Fe=0;Fe<y;Fe++){const Ge=Fe+1+He*j,Ye=Fe+(He+1)*j,Ue=Fe+1+(He+1)*j;Ie[ze++]=Fe+He*j,Ie[ze++]=Ye,Ie[ze++]=Ge,Ie[ze++]=Ge,Ie[ze++]=Ye,Ie[ze++]=Ue}return{vertices:Me.buffer.slice(0),indices:Ie.buffer.slice(0),uses32bitIndices:be}}const Du=new o.aV({fill:new o.bt(128,2),line:new o.bt(512,0),tile:new o.bt(128,32),stencil:new o.bt(128,1),circle:3});class Ra{constructor(){this._tileMeshCache={},this._errorCorrectionUsable=0,this._errorMeasurementLastValue=0,this._errorCorrectionPreviousValue=0,this._errorMeasurementLastChangeTime=-1e3}get name(){return"vertical-perspective"}get transitionState(){return 1}get useSubdivision(){return!0}get shaderVariantName(){return"globe"}get shaderDefine(){return"#define GLOBE"}get shaderPreludeCode(){return sr.projectionGlobe}get vertexShaderPreludeCode(){return sr.projectionMercator.vertexSource}get subdivisionGranularity(){return Du}get useGlobeControls(){return!0}get latitudeErrorCorrectionRadians(){return this._errorCorrectionUsable}destroy(){this._errorMeasurement&&this._errorMeasurement.destroy()}updateGPUdependent(a){this._errorMeasurement||(this._errorMeasurement=new Wo(a));const u=o.X(this._errorQueryLatitudeDegrees),y=2*Math.atan(Math.exp(Math.PI-u*Math.PI*2))-.5*Math.PI,b=this._errorMeasurement.updateErrorLoop(u,y),j=$();b!==this._errorMeasurementLastValue&&(this._errorCorrectionPreviousValue=this._errorCorrectionUsable,this._errorMeasurementLastValue=b,this._errorMeasurementLastChangeTime=j);const I=Math.min(Math.max((j-this._errorMeasurementLastChangeTime)/1e3/.5,0),1);this._errorCorrectionUsable=o.bu(this._errorCorrectionPreviousValue,-this._errorMeasurementLastValue,o.bv(I))}_getMeshKey(a){return`${a.granularity.toString(36)}_${a.generateBorders?"b":""}${a.extendToNorthPole?"n":""}${a.extendToSouthPole?"s":""}`}getMeshFromTileID(a,u,y,b,j){const I=(j==="stencil"?Du.stencil:Du.tile).getGranularityForZoomLevel(u.z);return this._getMesh(a,{granularity:I,generateBorders:y,extendToNorthPole:u.y===0&&b,extendToSouthPole:u.y===(1<<u.z)-1&&b})}_getMesh(a,u){const y=this._getMeshKey(u);if(y in this._tileMeshCache)return this._tileMeshCache[y];const b=(function(j,I){const F=ml(I,"16bit"),U=o.aW.deserialize({arrayBuffer:F.vertices,length:F.vertices.byteLength/2/2}),Y=o.aY.deserialize({arrayBuffer:F.indices,length:F.indices.byteLength/2/3});return new Pr(j.createVertexBuffer(U,Da.members),j.createIndexBuffer(Y),o.aX.simpleSegment(0,0,U.length,Y.length))})(a,u);return this._tileMeshCache[y]=b,b}recalculate(a){}hasTransition(){const a=$();let u=!1;return u=u||(a-this._errorMeasurementLastChangeTime)/1e3<.7,u=u||this._errorMeasurement&&this._errorMeasurement.awaitingQuery,u}setErrorQueryLatitudeDegrees(a){this._errorQueryLatitudeDegrees=a}}const Ph=new o.t({type:new o.D(o.u.projection.type)});class Jl extends o.E{constructor(a){super(),this._transitionable=new o.x(Ph,void 0),this.setProjection(a),this._transitioning=this._transitionable.untransitioned(),this.recalculate(new o.H(0)),this._mercatorProjection=new ii,this._verticalPerspectiveProjection=new Ra}get transitionState(){const a=this.properties.get("type");if(typeof a=="string"&&a==="mercator")return 0;if(typeof a=="string"&&a==="vertical-perspective")return 1;if(a instanceof o.bw){if(a.from==="vertical-perspective"&&a.to==="mercator")return 1-a.transition;if(a.from==="mercator"&&a.to==="vertical-perspective")return a.transition}return 1}get useGlobeRendering(){return this.transitionState>0}get latitudeErrorCorrectionRadians(){return this._verticalPerspectiveProjection.latitudeErrorCorrectionRadians}get currentProjection(){return this.useGlobeRendering?this._verticalPerspectiveProjection:this._mercatorProjection}get name(){return"globe"}get useSubdivision(){return this.currentProjection.useSubdivision}get shaderVariantName(){return this.currentProjection.shaderVariantName}get shaderDefine(){return this.currentProjection.shaderDefine}get shaderPreludeCode(){return this.currentProjection.shaderPreludeCode}get vertexShaderPreludeCode(){return this.currentProjection.vertexShaderPreludeCode}get subdivisionGranularity(){return this.currentProjection.subdivisionGranularity}get useGlobeControls(){return this.transitionState>0}destroy(){this._mercatorProjection.destroy(),this._verticalPerspectiveProjection.destroy()}updateGPUdependent(a){this._mercatorProjection.updateGPUdependent(a),this._verticalPerspectiveProjection.updateGPUdependent(a)}getMeshFromTileID(a,u,y,b,j){return this.currentProjection.getMeshFromTileID(a,u,y,b,j)}setProjection(a){this._transitionable.setValue("type",a?.type||"mercator")}updateTransitions(a){this._transitioning=this._transitionable.transitioned(a,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()||this.currentProjection.hasTransition()}recalculate(a){this.properties=this._transitioning.possiblyEvaluate(a)}setErrorQueryLatitudeDegrees(a){this._verticalPerspectiveProjection.setErrorQueryLatitudeDegrees(a),this._mercatorProjection.setErrorQueryLatitudeDegrees(a)}}function Qr(C){const a=Ls(C.worldSize,C.center.lat);return 2*Math.PI*a}function Po(C,a,u,y,b){const j=1/(1<<b),I=a/o.a5*j+y*j,F=o.bz((C/o.a5*j+u*j)*Math.PI*2+Math.PI,2*Math.PI),U=2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI,Y=Math.cos(U),re=new Float64Array(3);return re[0]=Math.sin(F)*Y,re[1]=Math.sin(U),re[2]=Math.cos(F)*Y,re}function qr(C){return(function(a,u){const y=Math.cos(u),b=new Float64Array(3);return b[0]=Math.sin(a)*y,b[1]=Math.sin(u),b[2]=Math.cos(a)*y,b})(C.lng*Math.PI/180,C.lat*Math.PI/180)}function Ls(C,a){return C/(2*Math.PI)/Math.cos(a*Math.PI/180)}function Ah(C){const a=Math.asin(C[1])/Math.PI*180,u=Math.sqrt(C[0]*C[0]+C[2]*C[2]);if(u>1e-6){const y=C[0]/u,b=Math.acos(C[2]/u),j=(y>0?b:-b)/Math.PI*180;return new o.V(o.W(j,-180,180),a)}return new o.V(0,a)}function gl(C){return Math.cos(C*Math.PI/180)}function ai(C,a){const u=gl(C),y=gl(a);return o.at(y/u)}function Ef(C,a){const u=C.rotate(a.bearingInRadians),y=a.zoom+ai(a.center.lat,0),b=o.bu(1/gl(a.center.lat),1/gl(Math.min(Math.abs(a.center.lat),60)),o.bx(y,7,3,0,1)),j=360/Qr({worldSize:a.worldSize,center:{lat:a.center.lat}});return new o.V(a.center.lng-u.x*j*b,o.an(a.center.lat+u.y*j,-o.ao,o.ao))}function Ch(C){const a=.5*C,u=Math.sin(a),y=Math.cos(a);return Math.log(u+y)-Math.log(y-u)}function Id(C,a,u,y){const b=C.lat+u*y;if(Math.abs(u)>1){const j=(Math.sign(C.lat+u)!==Math.sign(C.lat)?-Math.abs(C.lat):Math.abs(C.lat))*Math.PI/180,I=Math.abs(C.lat+u)*Math.PI/180,F=Ch(j+y*(I-j)),U=Ch(j),Y=Ch(I);return new o.V(C.lng+a*((F-U)/(Y-U)),b)}return new o.V(C.lng+a*y,b)}class Vp{constructor(a){this._cachePrevious=new Map,this._cache=new Map,this._hadAnyChanges=!1,this._boundingVolumeFactory=a}swapBuffers(){if(!this._hadAnyChanges)return;const a=this._cachePrevious;this._cachePrevious=this._cache,this._cache=a,this._cache.clear(),this._hadAnyChanges=!1}getTileBoundingVolume(a,u,y,b){const j=`${a.z}_${a.x}_${a.y}_${b?.terrain?"t":""}`,I=this._cache.get(j);if(I)return I;const F=this._cachePrevious.get(j);if(F)return this._cache.set(j,F),F;const U=this._boundingVolumeFactory(a,u,y,b);return this._cache.set(j,U),this._hadAnyChanges=!0,U}}class yl{constructor(a,u,y,b){this.min=y,this.max=b,this.points=a,this.planes=u}static fromAabb(a,u){const y=[];for(let b=0;b<8;b++)y.push([1&~b?a[0]:u[0],(b>>1&1)==1?u[1]:a[1],(b>>2&1)==1?u[2]:a[2]]);return new yl(y,[[-1,0,0,u[0]],[1,0,0,-a[0]],[0,-1,0,u[1]],[0,1,0,-a[1]],[0,0,-1,u[2]],[0,0,1,-a[2]]],a,u)}static fromCenterSizeAngles(a,u,y){const b=o.bB([],y[0],y[1],y[2]),j=o.bC([],[u[0],0,0],b),I=o.bC([],[0,u[1],0],b),F=o.bC([],[0,0,u[2]],b),U=[...a],Y=[...a];for(let ce=0;ce<8;ce++)for(let le=0;le<3;le++){const ge=a[le]+j[le]*(1&~ce?-1:1)+I[le]*((ce>>1&1)==1?1:-1)+F[le]*((ce>>2&1)==1?1:-1);U[le]=Math.min(U[le],ge),Y[le]=Math.max(Y[le],ge)}const re=[];for(let ce=0;ce<8;ce++){const le=[...a];o.b0(le,le,o.a$([],j,1&~ce?-1:1)),o.b0(le,le,o.a$([],I,(ce>>1&1)==1?1:-1)),o.b0(le,le,o.a$([],F,(ce>>2&1)==1?1:-1)),re.push(le)}return new yl(re,[[...j,-o.b5(j,re[0])],[...I,-o.b5(I,re[0])],[...F,-o.b5(F,re[0])],[-j[0],-j[1],-j[2],-o.b5(j,re[7])],[-I[0],-I[1],-I[2],-o.b5(I,re[7])],[-F[0],-F[1],-F[2],-o.b5(F,re[7])]],U,Y)}intersectsFrustum(a){let u=!0;const y=this.points.length,b=this.planes.length,j=a.planes.length,I=a.points.length;for(let F=0;F<j;F++){const U=a.planes[F];let Y=0;for(let re=0;re<y;re++){const ce=this.points[re];U[0]*ce[0]+U[1]*ce[1]+U[2]*ce[2]+U[3]>=0&&Y++}if(Y===0)return 0;Y<y&&(u=!1)}if(u)return 2;for(let F=0;F<b;F++){const U=this.planes[F];let Y=0;for(let re=0;re<I;re++){const ce=a.points[re];U[0]*ce[0]+U[1]*ce[1]+U[2]*ce[2]+U[3]>=0&&Y++}if(Y===0)return 0}return 1}intersectsPlane(a){const u=this.points.length;let y=0;for(let b=0;b<u;b++){const j=this.points[b];a[0]*j[0]+a[1]*j[1]+a[2]*j[2]+a[3]>=0&&y++}return y===u?2:y===0?0:1}}function Ou(C,a,u){const y=C-a;return y<0?-y:Math.max(0,y-u)}function zs(C,a,u,y,b){const j=C-u;let I;return I=j<0?Math.min(-j,1+j-b):j>1?Math.min(Math.max(j-b,0),1-j):0,Math.max(I,Ou(a,y,b))}class Fs{constructor(){this._boundingVolumeCache=new Vp(this._computeTileBoundingVolume)}prepareNextFrame(){this._boundingVolumeCache.swapBuffers()}distanceToTile2d(a,u,y,b){const j=1<<y.z,I=1/j,F=y.x/j,U=y.y/j;let Y=2;return Y=Math.min(Y,zs(a,u,F,U,I)),Y=Math.min(Y,zs(a,u,F+.5,-U-I,I)),Y=Math.min(Y,zs(a,u,F+.5,2-U-I,I)),Y}getWrap(a,u,y){const b=1<<u.z,j=1/b,I=u.x/b,F=Ou(a.x,I,j),U=Ou(a.x,I-1,j),Y=Ou(a.x,I+1,j),re=Math.min(F,U,Y);return re===Y?1:re===U?-1:0}allowVariableZoom(a,u){return pn(a,u)>4}allowWorldCopies(){return!1}getTileBoundingVolume(a,u,y,b){return this._boundingVolumeCache.getTileBoundingVolume(a,u,y,b)}_computeTileBoundingVolume(a,u,y,b){var j,I;let F=0,U=0;if(b?.terrain){const Y=new o.a2(a.z,u,a.z,a.x,a.y),re=b.terrain.getMinMaxElevation(Y);F=(j=re.minElevation)!==null&&j!==void 0?j:Math.min(0,y),U=(I=re.maxElevation)!==null&&I!==void 0?I:Math.max(0,y)}if(F/=o.bE,U/=o.bE,F+=1,U+=1,a.z<=0)return yl.fromAabb([-U,-U,-U],[U,U,U]);if(a.z===1)return yl.fromAabb([a.x===0?-U:0,a.y===0?0:-U,-U],[a.x===0?0:U,a.y===0?U:0,U]);{const Y=[Po(0,0,a.x,a.y,a.z),Po(o.a5,0,a.x,a.y,a.z),Po(o.a5,o.a5,a.x,a.y,a.z),Po(0,o.a5,a.x,a.y,a.z)],re=[];for(const vt of Y)re.push(o.a$([],vt,U));if(U!==F)for(const vt of Y)re.push(o.a$([],vt,F));a.y===0&&re.push([0,1,0]),a.y===(1<<a.z)-1&&re.push([0,-1,0]);const ce=[1,1,1],le=[-1,-1,-1];for(const vt of re)for(let xt=0;xt<3;xt++)ce[xt]=Math.min(ce[xt],vt[xt]),le[xt]=Math.max(le[xt],vt[xt]);const ge=Po(o.a5/2,o.a5/2,a.x,a.y,a.z),be=o.b4([],[0,1,0],ge);o.b3(be,be);const Me=o.b4([],ge,be);o.b3(Me,Me);const Ne=o.b4([],Y[2],Y[1]);o.b3(Ne,Ne);const Ie=o.b4([],Y[0],Y[3]);o.b3(Ie,Ie),re.push(o.a$([],ge,U)),a.y>=(1<<a.z)/2&&re.push(o.a$([],Po(o.a5/2,0,a.x,a.y,a.z),U)),a.y<(1<<a.z)/2&&re.push(o.a$([],Po(o.a5/2,o.a5,a.x,a.y,a.z),U));const ze=Ru(ge,re),He=Ru(Me,re),Fe=[-ge[0],-ge[1],-ge[2],ze.max],Ge=[ge[0],ge[1],ge[2],-ze.min],Ye=[-Me[0],-Me[1],-Me[2],He.max],Ue=[Me[0],Me[1],Me[2],-He.min],st=[...Ne,0],bt=[...Ie,0],yt=[];return a.y===0?yt.push(o.bD(bt,st,Fe),o.bD(bt,st,Ge)):yt.push(o.bD(Ye,st,Fe),o.bD(Ye,st,Ge),o.bD(Ye,bt,Fe),o.bD(Ye,bt,Ge)),a.y===(1<<a.z)-1?yt.push(o.bD(bt,st,Fe),o.bD(bt,st,Ge)):yt.push(o.bD(Ue,st,Fe),o.bD(Ue,st,Ge),o.bD(Ue,bt,Fe),o.bD(Ue,bt,Ge)),new yl(yt,[Fe,Ge,Ye,Ue,st,bt],ce,le)}}}function Ru(C,a){let u=1/0,y=-1/0;for(const b of a){const j=o.b5(C,b);u=Math.min(u,j),y=Math.max(y,j)}return{min:u,max:y}}class Ao{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,u,y){return this._helper.interpolatePadding(a,u,y)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,u){this._helper.resize(a,u)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}setConstrainOverride(a){this._helper.setConstrainOverride(a)}overrideNearFarZ(a,u){this._helper.overrideNearFarZ(a,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}setTransitionState(a){}constructor(a){this._cachedClippingPlane=o.bF(),this._projectionMatrix=o.bj(),this._globeViewProjMatrix32f=o.bi(),this._globeViewProjMatrixNoCorrection=o.bj(),this._globeViewProjMatrixNoCorrectionInverted=o.bj(),this._globeProjMatrixInverted=o.bj(),this._cameraPosition=o.bA(),this._globeLatitudeErrorCorrectionRadians=0,this.defaultConstrain=(u,y)=>{const b=o.an(u.lat,-o.ao,o.ao),j=o.an(+y,this.minZoom+ai(0,b),this.maxZoom);return{center:new o.V(u.lng,b),zoom:j}},this.applyConstrain=(u,y)=>this._helper.applyConstrain(u,y),this._helper=new Qi({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,y)=>this.defaultConstrain(u,y)},a),this._coveringTilesDetailsProvider=new Fs}clone(){const a=new Ao;return a.apply(this,!1),a}apply(a,u,y){this._globeLatitudeErrorCorrectionRadians=y||0,this._helper.apply(a,u)}get projectionMatrix(){return this._projectionMatrix}get modelViewProjectionMatrix(){return this._globeViewProjMatrixNoCorrection}get inverseProjectionMatrix(){return this._globeProjMatrixInverted}get cameraPosition(){const a=o.bA();return a[0]=this._cameraPosition[0],a[1]=this._cameraPosition[1],a[2]=this._cameraPosition[2],a}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}getProjectionData(a){const{overscaledTileID:u,applyGlobeMatrix:y}=a,b=this._helper.getMercatorTileCoordinates(u);return{mainMatrix:this._globeViewProjMatrix32f,tileMercatorCoords:b,clippingPlane:this._cachedClippingPlane,projectionTransition:y?1:0,fallbackMatrix:this._globeViewProjMatrix32f}}_computeClippingPlane(a){const u=this.pitchInRadians,y=this.cameraToCenterDistance/a,b=Math.sin(u)*y,j=Math.cos(u)*y+1,I=1/Math.sqrt(b*b+j*j)*1;let F=-b,U=j;const Y=Math.sqrt(F*F+U*U);F/=Y,U/=Y;const re=[0,F,U];o.bG(re,re,[0,0,0],-this.bearingInRadians),o.bH(re,re,[0,0,0],-1*this.center.lat*Math.PI/180),o.bI(re,re,[0,0,0],this.center.lng*Math.PI/180);const ce=1/o.b7(re);return o.a$(re,re,ce),[...re,-I*ce]}isLocationOccluded(a){return!this.isSurfacePointVisible(qr(a))}transformLightDirection(a){const u=this._helper._center.lng*Math.PI/180,y=this._helper._center.lat*Math.PI/180,b=Math.cos(y),j=[Math.sin(u)*b,Math.sin(y),Math.cos(u)*b],I=[j[2],0,-j[0]],F=[0,0,0];o.b4(F,I,j),o.b3(I,I),o.b3(F,F);const U=[0,0,0];return o.b3(U,[I[0]*a[0]+F[0]*a[1]+j[0]*a[2],I[1]*a[0]+F[1]*a[1]+j[1]*a[2],I[2]*a[0]+F[2]*a[1]+j[2]*a[2]]),U}getPixelScale(){return 1/Math.cos(this._helper._center.lat*Math.PI/180)}getCircleRadiusCorrection(){return Math.cos(this._helper._center.lat*Math.PI/180)}getPitchedTextCorrection(a,u,y){const b=(function(F,U,Y){const re=1/(1<<Y.z);return new o.a9(F/o.a5*re+Y.x*re,U/o.a5*re+Y.y*re)})(a,u,y.canonical),j=(I=b.y,[o.bz(b.x*Math.PI*2+Math.PI,2*Math.PI),2*Math.atan(Math.exp(Math.PI-I*Math.PI*2))-.5*Math.PI]);var I;return this.getCircleRadiusCorrection()/Math.cos(j[1])}projectTileCoordinates(a,u,y,b){const j=y.canonical,I=Po(a,u,j.x,j.y,j.z),F=1+(b?b(a,u):0)/o.bE,U=[I[0]*F,I[1]*F,I[2]*F,1];o.aH(U,U,this._globeViewProjMatrixNoCorrection);const Y=this._cachedClippingPlane,re=Y[0]*I[0]+Y[1]*I[1]+Y[2]*I[2]+Y[3]<0;return{point:new o.P(U[0]/U[3],U[1]/U[3]),signedDistanceFromCamera:U[3],isOccluded:re}}_calcMatrices(){if(!this._helper._width||!this._helper._height)return;const a=Ls(this.worldSize,this.center.lat),u=o.bk(),y=o.bk();this._helper.autoCalculateNearFarZ&&(this._helper._nearZ=.5,this._helper._farZ=this.cameraToCenterDistance+2*a),o.be(u,this.fovInRadians,this.width/this.height,this._helper._nearZ,this._helper._farZ);const b=this.centerOffset;u[8]=2*-b.x/this._helper._width,u[9]=2*b.y/this._helper._height,this._projectionMatrix=o.bf(u),this._globeProjMatrixInverted=o.bk(),o.aB(this._globeProjMatrixInverted,u),o.O(u,u,[0,0,-this.cameraToCenterDistance]),o.bg(u,u,this.rollInRadians),o.bh(u,u,-this.pitchInRadians),o.bg(u,u,this.bearingInRadians),o.O(u,u,[0,0,-a]);const j=o.bA();j[0]=a,j[1]=a,j[2]=a,o.bh(y,u,this.center.lat*Math.PI/180),o.bJ(y,y,-this.center.lng*Math.PI/180),o.Q(y,y,j),this._globeViewProjMatrixNoCorrection=y,o.bh(u,u,this.center.lat*Math.PI/180-this._globeLatitudeErrorCorrectionRadians),o.bJ(u,u,-this.center.lng*Math.PI/180),o.Q(u,u,j),this._globeViewProjMatrix32f=new Float32Array(u),this._globeViewProjMatrixNoCorrectionInverted=o.bk(),o.aB(this._globeViewProjMatrixNoCorrectionInverted,y);const I=o.bA();this._cameraPosition=o.bA(),this._cameraPosition[2]=this.cameraToCenterDistance/a,o.bG(this._cameraPosition,this._cameraPosition,I,-this.rollInRadians),o.bH(this._cameraPosition,this._cameraPosition,I,this.pitchInRadians),o.bG(this._cameraPosition,this._cameraPosition,I,-this.bearingInRadians),o.b0(this._cameraPosition,this._cameraPosition,[0,0,1]),o.bH(this._cameraPosition,this._cameraPosition,I,-this.center.lat*Math.PI/180),o.bI(this._cameraPosition,this._cameraPosition,I,this.center.lng*Math.PI/180),this._cachedClippingPlane=this._computeClippingPlane(a);const F=o.bf(this._globeViewProjMatrixNoCorrectionInverted);o.Q(F,F,[1,1,-1]),this._cachedFrustum=Oa.fromInvProjectionMatrix(F,1,0,this._cachedClippingPlane,!0)}calculateFogMatrix(a){o.w("calculateFogMatrix is not supported on globe projection.");const u=o.bk();return o.ar(u),u}getVisibleUnwrappedCoordinates(a){return[new o.bc(0,a)]}getCameraFrustum(){return this._cachedFrustum}getClippingPlane(){return this._cachedClippingPlane}getCoveringTilesDetailsProvider(){return this._coveringTilesDetailsProvider}recalculateZoomAndCenter(a){a&&o.w("terrain is not fully supported on vertical perspective projection."),this._helper.recalculateZoomAndCenter(0)}maxPitchScaleFactor(){return 1}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,u){if(!this._globeViewProjMatrixNoCorrection)return 1;const y=qr(a);o.a$(y,y,1+u/o.bE);const b=o.bF();return o.aH(b,[y[0],y[1],y[2],1],this._globeViewProjMatrixNoCorrection),b[2]/b[3]}populateCache(a){}getBounds(){const a=.5*this.width,u=.5*this.height,y=[new o.P(0,0),new o.P(a,0),new o.P(this.width,0),new o.P(this.width,u),new o.P(this.width,this.height),new o.P(a,this.height),new o.P(0,this.height),new o.P(0,u)],b=[];for(const ce of y)b.push(this.unprojectScreenPoint(ce));let j=0,I=0,F=0,U=0;const Y=this.center;for(const ce of b){const le=o.bK(Y.lng,ce.lng),ge=o.bK(Y.lat,ce.lat);le<I&&(I=le),le>j&&(j=le),ge<U&&(U=ge),ge>F&&(F=ge)}const re=[Y.lng+I,Y.lat+U,Y.lng+j,Y.lat+F];return this.isSurfacePointOnScreen([0,1,0])&&(re[3]=90,re[0]=-180,re[2]=180),this.isSurfacePointOnScreen([0,-1,0])&&(re[1]=-90,re[0]=-180,re[2]=180),new Mn(re)}calculateCenterFromCameraLngLatAlt(a,u,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(a,u,y,b)}setLocationAtPoint(a,u){const y=qr(this.unprojectScreenPoint(u)),b=qr(a),j=o.bA();o.bL(j);const I=o.bA();o.bI(I,y,j,-this.center.lng*Math.PI/180),o.bH(I,I,j,this.center.lat*Math.PI/180);const F=b[0]*b[0]+b[2]*b[2],U=I[0]*I[0];if(F<U)return;const Y=Math.sqrt(F-U),re=-Y,ce=o.bM(b[0],b[2],I[0],Y),le=o.bM(b[0],b[2],I[0],re),ge=o.bA();o.bI(ge,b,j,-ce);const be=o.bM(ge[1],ge[2],I[1],I[2]),Me=o.bA();o.bI(Me,b,j,-le);const Ne=o.bM(Me[1],Me[2],I[1],I[2]),Ie=.5*Math.PI,ze=be>=-Ie&&be<=Ie,He=Ne>=-Ie&&Ne<=Ie;let Fe,Ge;if(ze&&He){const bt=this.center.lng*Math.PI/180,yt=this.center.lat*Math.PI/180;o.bN(ce,bt)+o.bN(be,yt)<o.bN(le,bt)+o.bN(Ne,yt)?(Fe=ce,Ge=be):(Fe=le,Ge=Ne)}else if(ze)Fe=ce,Ge=be;else{if(!He)return;Fe=le,Ge=Ne}const Ye=Fe/Math.PI*180,Ue=Ge/Math.PI*180,st=this.center.lat;this.setCenter(new o.V(Ye,o.an(Ue,-90,90))),this.setZoom(this.zoom+ai(st,this.center.lat))}locationToScreenPoint(a,u){const y=qr(a);if(u){const b=u.getElevationForLngLatZoom(a,this._helper._tileZoom);o.a$(y,y,1+b/o.bE)}return this._projectSurfacePointToScreen(y)}_projectSurfacePointToScreen(a){const u=o.bF();return o.aH(u,[...a,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],new o.P((.5*u[0]+.5)*this.width,(.5*-u[1]+.5)*this.height)}screenPointToMercatorCoordinate(a,u){if(u){const y=u.pointCoordinate(a);if(y)return y}return o.a9.fromLngLat(this.unprojectScreenPoint(a))}screenPointToLocation(a,u){var y;return(y=this.screenPointToMercatorCoordinate(a,u))===null||y===void 0?void 0:y.toLngLat()}isPointOnMapSurface(a,u){const y=this._cameraPosition,b=this.getRayDirectionFromPixel(a);return!!this.rayPlanetIntersection(y,b)}getRayDirectionFromPixel(a){const u=o.bF();u[0]=a.x/this.width*2-1,u[1]=-1*(a.y/this.height*2-1),u[2]=1,u[3]=1,o.aH(u,u,this._globeViewProjMatrixNoCorrectionInverted),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3];const y=o.bA();y[0]=u[0]-this._cameraPosition[0],y[1]=u[1]-this._cameraPosition[1],y[2]=u[2]-this._cameraPosition[2];const b=o.bA();return o.b3(b,y),b}isSurfacePointVisible(a){const u=this._cachedClippingPlane;return u[0]*a[0]+u[1]*a[1]+u[2]*a[2]+u[3]>=0}isSurfacePointOnScreen(a){if(!this.isSurfacePointVisible(a))return!1;const u=o.bF();return o.aH(u,[...a,1],this._globeViewProjMatrixNoCorrection),u[0]/=u[3],u[1]/=u[3],u[2]/=u[3],u[0]>-1&&u[0]<1&&u[1]>-1&&u[1]<1&&u[2]>-1&&u[2]<1}rayPlanetIntersection(a,u){const y=o.b5(a,u),b=o.bA(),j=o.bA();o.a$(j,u,y),o.b2(b,a,j);const I=1-o.b5(b,b);if(I<0)return null;const F=o.b5(a,a)-1,U=-y+(y<0?1:-1)*Math.sqrt(I),Y=F/U,re=U;return{tMin:Math.min(Y,re),tMax:Math.max(Y,re)}}unprojectScreenPoint(a){const u=this._cameraPosition,y=this.getRayDirectionFromPixel(a),b=this.rayPlanetIntersection(u,y);if(b){const re=o.bA();o.b0(re,u,[y[0]*b.tMin,y[1]*b.tMin,y[2]*b.tMin]);const ce=o.bA();return o.b3(ce,re),Ah(ce)}const j=this._cachedClippingPlane,I=j[0]*y[0]+j[1]*y[1]+j[2]*y[2],F=-o.bb(j,u)/I,U=o.bA();if(F>0)o.b0(U,u,[y[0]*F,y[1]*F,y[2]*F]);else{const re=o.bA();o.b0(re,u,[2*y[0],2*y[1],2*y[2]]);const ce=o.bb(this._cachedClippingPlane,re);o.b2(U,re,[this._cachedClippingPlane[0]*ce,this._cachedClippingPlane[1]*ce,this._cachedClippingPlane[2]*ce])}const Y=(function(re){const ce=o.bA();return ce[0]=re[0]*-re[3],ce[1]=re[1]*-re[3],ce[2]=re[2]*-re[3],{center:ce,radius:Math.sqrt(1-re[3]*re[3])}})(j);return Ah((function(re,ce,le){const ge=o.bA();o.b2(ge,le,re);const be=o.bA();return o.by(be,re,ge,ce/o.b9(ge)),be})(Y.center,Y.radius,U))}getMatrixForModel(a,u){const y=o.V.convert(a),b=1/o.bE,j=o.bj();return o.bJ(j,j,y.lng/180*Math.PI),o.bh(j,j,-y.lat/180*Math.PI),o.O(j,j,[0,0,1+u/o.bE]),o.bh(j,j,.5*Math.PI),o.Q(j,j,[b,b,b]),j}getProjectionDataForCustomLayer(a=!0){const u=this.getProjectionData({overscaledTileID:new o.a2(0,0,0,0,0),applyGlobeMatrix:a});return u.tileMercatorCoords=[0,0,1,1],u}getFastPathSimpleProjectionMatrix(a){}}class ea{get pixelsToClipSpaceMatrix(){return this._helper.pixelsToClipSpaceMatrix}get clipSpaceToPixelsMatrix(){return this._helper.clipSpaceToPixelsMatrix}get pixelsToGLUnits(){return this._helper.pixelsToGLUnits}get centerOffset(){return this._helper.centerOffset}get size(){return this._helper.size}get rotationMatrix(){return this._helper.rotationMatrix}get centerPoint(){return this._helper.centerPoint}get pixelsPerMeter(){return this._helper.pixelsPerMeter}setMinZoom(a){this._helper.setMinZoom(a)}setMaxZoom(a){this._helper.setMaxZoom(a)}setMinPitch(a){this._helper.setMinPitch(a)}setMaxPitch(a){this._helper.setMaxPitch(a)}setRenderWorldCopies(a){this._helper.setRenderWorldCopies(a)}setBearing(a){this._helper.setBearing(a)}setPitch(a){this._helper.setPitch(a)}setRoll(a){this._helper.setRoll(a)}setFov(a){this._helper.setFov(a)}setZoom(a){this._helper.setZoom(a)}setCenter(a){this._helper.setCenter(a)}setElevation(a){this._helper.setElevation(a)}setMinElevationForCurrentTile(a){this._helper.setMinElevationForCurrentTile(a)}setPadding(a){this._helper.setPadding(a)}interpolatePadding(a,u,y){return this._helper.interpolatePadding(a,u,y)}isPaddingEqual(a){return this._helper.isPaddingEqual(a)}resize(a,u,y=!0){this._helper.resize(a,u,y)}getMaxBounds(){return this._helper.getMaxBounds()}setMaxBounds(a){this._helper.setMaxBounds(a)}setConstrainOverride(a){this._helper.setConstrainOverride(a)}overrideNearFarZ(a,u){this._helper.overrideNearFarZ(a,u)}clearNearFarZOverride(){this._helper.clearNearFarZOverride()}getCameraQueryGeometry(a){return this._helper.getCameraQueryGeometry(this.getCameraPoint(),a)}get tileSize(){return this._helper.tileSize}get tileZoom(){return this._helper.tileZoom}get scale(){return this._helper.scale}get worldSize(){return this._helper.worldSize}get width(){return this._helper.width}get height(){return this._helper.height}get lngRange(){return this._helper.lngRange}get latRange(){return this._helper.latRange}get minZoom(){return this._helper.minZoom}get maxZoom(){return this._helper.maxZoom}get zoom(){return this._helper.zoom}get center(){return this._helper.center}get minPitch(){return this._helper.minPitch}get maxPitch(){return this._helper.maxPitch}get pitch(){return this._helper.pitch}get pitchInRadians(){return this._helper.pitchInRadians}get roll(){return this._helper.roll}get rollInRadians(){return this._helper.rollInRadians}get bearing(){return this._helper.bearing}get bearingInRadians(){return this._helper.bearingInRadians}get fov(){return this._helper.fov}get fovInRadians(){return this._helper.fovInRadians}get elevation(){return this._helper.elevation}get minElevationForCurrentTile(){return this._helper.minElevationForCurrentTile}get padding(){return this._helper.padding}get unmodified(){return this._helper.unmodified}get renderWorldCopies(){return this._helper.renderWorldCopies}get cameraToCenterDistance(){return this._helper.cameraToCenterDistance}get constrainOverride(){return this._helper.constrainOverride}get nearZ(){return this._helper.nearZ}get farZ(){return this._helper.farZ}get autoCalculateNearFarZ(){return this._helper.autoCalculateNearFarZ}get isGlobeRendering(){return this._globeness>0}setTransitionState(a,u){this._globeness=a,this._globeLatitudeErrorCorrectionRadians=u,this._calcMatrices(),this._verticalPerspectiveTransform.getCoveringTilesDetailsProvider().prepareNextFrame(),this._mercatorTransform.getCoveringTilesDetailsProvider().prepareNextFrame()}get currentTransform(){return this.isGlobeRendering?this._verticalPerspectiveTransform:this._mercatorTransform}constructor(a){this._globeLatitudeErrorCorrectionRadians=0,this._globeness=1,this.defaultConstrain=(u,y)=>this.currentTransform.defaultConstrain(u,y),this.applyConstrain=(u,y)=>this._helper.applyConstrain(u,y),this._helper=new Qi({calcMatrices:()=>{this._calcMatrices()},defaultConstrain:(u,y)=>this.defaultConstrain(u,y)},a),this._globeness=1,this._mercatorTransform=new pl,this._verticalPerspectiveTransform=new Ao}clone(){const a=new ea;return a._globeness=this._globeness,a._globeLatitudeErrorCorrectionRadians=this._globeLatitudeErrorCorrectionRadians,a.apply(this,!1),a}apply(a,u){this._helper.apply(a,u),this._mercatorTransform.apply(this,!1),this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians)}get projectionMatrix(){return this.currentTransform.projectionMatrix}get modelViewProjectionMatrix(){return this.currentTransform.modelViewProjectionMatrix}get inverseProjectionMatrix(){return this.currentTransform.inverseProjectionMatrix}get cameraPosition(){return this.currentTransform.cameraPosition}getProjectionData(a){const u=this._mercatorTransform.getProjectionData(a),y=this._verticalPerspectiveTransform.getProjectionData(a);return{mainMatrix:this.isGlobeRendering?y.mainMatrix:u.mainMatrix,clippingPlane:y.clippingPlane,tileMercatorCoords:y.tileMercatorCoords,projectionTransition:a.applyGlobeMatrix?this._globeness:0,fallbackMatrix:u.fallbackMatrix}}isLocationOccluded(a){return this.currentTransform.isLocationOccluded(a)}transformLightDirection(a){return this.currentTransform.transformLightDirection(a)}getPixelScale(){return o.bu(this._mercatorTransform.getPixelScale(),this._verticalPerspectiveTransform.getPixelScale(),this._globeness)}getCircleRadiusCorrection(){return o.bu(this._mercatorTransform.getCircleRadiusCorrection(),this._verticalPerspectiveTransform.getCircleRadiusCorrection(),this._globeness)}getPitchedTextCorrection(a,u,y){const b=this._mercatorTransform.getPitchedTextCorrection(a,u,y),j=this._verticalPerspectiveTransform.getPitchedTextCorrection(a,u,y);return o.bu(b,j,this._globeness)}projectTileCoordinates(a,u,y,b){return this.currentTransform.projectTileCoordinates(a,u,y,b)}_calcMatrices(){this._helper._width&&this._helper._height&&(this._verticalPerspectiveTransform.apply(this,!1,this._globeLatitudeErrorCorrectionRadians),this._helper._nearZ=this._verticalPerspectiveTransform.nearZ,this._helper._farZ=this._verticalPerspectiveTransform.farZ,this._mercatorTransform.apply(this,!0,this.isGlobeRendering),this._helper._nearZ=this._mercatorTransform.nearZ,this._helper._farZ=this._mercatorTransform.farZ)}calculateFogMatrix(a){return this.currentTransform.calculateFogMatrix(a)}getVisibleUnwrappedCoordinates(a){return this.currentTransform.getVisibleUnwrappedCoordinates(a)}getCameraFrustum(){return this.currentTransform.getCameraFrustum()}getClippingPlane(){return this.currentTransform.getClippingPlane()}getCoveringTilesDetailsProvider(){return this.currentTransform.getCoveringTilesDetailsProvider()}recalculateZoomAndCenter(a){this._mercatorTransform.recalculateZoomAndCenter(a),this._verticalPerspectiveTransform.recalculateZoomAndCenter(a)}maxPitchScaleFactor(){return this._mercatorTransform.maxPitchScaleFactor()}getCameraPoint(){return this._helper.getCameraPoint()}getCameraAltitude(){return this._helper.getCameraAltitude()}getCameraLngLat(){return this._helper.getCameraLngLat()}lngLatToCameraDepth(a,u){return this.currentTransform.lngLatToCameraDepth(a,u)}populateCache(a){this._mercatorTransform.populateCache(a),this._verticalPerspectiveTransform.populateCache(a)}getBounds(){return this.currentTransform.getBounds()}calculateCenterFromCameraLngLatAlt(a,u,y,b){return this._helper.calculateCenterFromCameraLngLatAlt(a,u,y,b)}setLocationAtPoint(a,u){if(!this.isGlobeRendering)return this._mercatorTransform.setLocationAtPoint(a,u),void this.apply(this._mercatorTransform,!1);this._verticalPerspectiveTransform.setLocationAtPoint(a,u),this.apply(this._verticalPerspectiveTransform,!1)}locationToScreenPoint(a,u){return this.currentTransform.locationToScreenPoint(a,u)}screenPointToMercatorCoordinate(a,u){return this.currentTransform.screenPointToMercatorCoordinate(a,u)}screenPointToLocation(a,u){return this.currentTransform.screenPointToLocation(a,u)}isPointOnMapSurface(a,u){return this.currentTransform.isPointOnMapSurface(a,u)}getRayDirectionFromPixel(a){return this._verticalPerspectiveTransform.getRayDirectionFromPixel(a)}getMatrixForModel(a,u){return this.currentTransform.getMatrixForModel(a,u)}getProjectionDataForCustomLayer(a=!0){const u=this._mercatorTransform.getProjectionDataForCustomLayer(a);if(!this.isGlobeRendering)return u;const y=this._verticalPerspectiveTransform.getProjectionDataForCustomLayer(a);return y.fallbackMatrix=u.mainMatrix,y}getFastPathSimpleProjectionMatrix(a){return this.currentTransform.getFastPathSimpleProjectionMatrix(a)}}class bi{get useGlobeControls(){return!0}handlePanInertia(a,u){const y=Ef(a,u);return Math.abs(y.lng-u.center.lng)>180&&(y.lng=u.center.lng+179.5*Math.sign(y.lng-u.center.lng)),{easingCenter:y,easingOffset:new o.P(0,0)}}handleMapControlsRollPitchBearingZoom(a,u){const y=a.around,b=u.screenPointToLocation(y);a.bearingDelta&&u.setBearing(u.bearing+a.bearingDelta),a.pitchDelta&&u.setPitch(u.pitch+a.pitchDelta),a.rollDelta&&u.setRoll(u.roll+a.rollDelta);const j=u.zoom;a.zoomDelta&&u.setZoom(u.zoom+a.zoomDelta);const I=u.zoom-j;if(I===0)return;const F=o.bK(u.center.lng,b.lng),U=F/(Math.abs(F/180)+1),Y=o.bK(u.center.lat,b.lat),re=u.getRayDirectionFromPixel(y),ce=u.cameraPosition,le=-1*o.b5(ce,re),ge=o.bA();o.b0(ge,ce,[re[0]*le,re[1]*le,re[2]*le]);const be=o.b7(ge)-1,Me=Math.exp(.5*-Math.max(be-.3,0)),Ne=Ls(u.worldSize,u.center.lat)/Math.min(u.width,u.height),Ie=o.bx(Ne,.9,.5,1,.25),ze=(1-o.aq(-I))*Math.min(Me,Ie),He=u.center.lat,Fe=u.zoom,Ge=new o.V(u.center.lng+U*ze,o.an(u.center.lat+Y*ze,-o.ao,o.ao));u.setLocationAtPoint(b,y);const Ye=u.center,Ue=o.bx(Math.abs(F),45,85,0,1),st=o.bx(Ne,.75,.35,0,1),bt=Math.pow(Math.max(Ue,st),.25),yt=o.bK(Ye.lng,Ge.lng),vt=o.bK(Ye.lat,Ge.lat);u.setCenter(new o.V(Ye.lng+yt*bt,Ye.lat+vt*bt).wrap()),u.setZoom(Fe+ai(He,u.center.lat))}handleMapControlsPan(a,u,y){if(!a.panDelta)return;const b=u.center.lat,j=u.zoom;u.setCenter(Ef(a.panDelta,u).wrap()),u.setZoom(j+ai(b,u.center.lat))}cameraForBoxAndBearing(a,u,y,b,j){const I=Gc(a,u,y,b,j),F=u.left/j.width*2-1,U=(j.width-u.right)/j.width*2-1,Y=u.top/j.height*-2+1,re=(j.height-u.bottom)/j.height*-2+1,ce=o.bK(y.getWest(),y.getEast())<0,le=ce?y.getEast():y.getWest(),ge=ce?y.getWest():y.getEast(),be=Math.max(y.getNorth(),y.getSouth()),Me=Math.min(y.getNorth(),y.getSouth()),Ne=le+.5*o.bK(le,ge),Ie=be+.5*o.bK(be,Me),ze=j.clone();ze.setCenter(I.center),ze.setBearing(I.bearing),ze.setPitch(0),ze.setRoll(0),ze.setZoom(I.zoom);const He=ze.modelViewProjectionMatrix,Fe=[qr(y.getNorthWest()),qr(y.getNorthEast()),qr(y.getSouthWest()),qr(y.getSouthEast()),qr(new o.V(ge,Ie)),qr(new o.V(le,Ie)),qr(new o.V(Ne,be)),qr(new o.V(Ne,Me))],Ge=qr(I.center);let Ye=Number.POSITIVE_INFINITY;for(const Ue of Fe)F<0&&(Ye=bi.getLesserNonNegativeNonNull(Ye,bi.solveVectorScale(Ue,Ge,He,"x",F))),U>0&&(Ye=bi.getLesserNonNegativeNonNull(Ye,bi.solveVectorScale(Ue,Ge,He,"x",U))),Y>0&&(Ye=bi.getLesserNonNegativeNonNull(Ye,bi.solveVectorScale(Ue,Ge,He,"y",Y))),re<0&&(Ye=bi.getLesserNonNegativeNonNull(Ye,bi.solveVectorScale(Ue,Ge,He,"y",re)));if(Number.isFinite(Ye)&&Ye!==0)return I.zoom=ze.zoom+o.at(Ye),I;eo()}handleJumpToCenterZoom(a,u){const y=a.center.lat,b=a.applyConstrain(u.center?o.V.convert(u.center):a.center,a.zoom).center;a.setCenter(b.wrap());const j=u.zoom!==void 0?+u.zoom:a.zoom+ai(y,b.lat);a.zoom!==j&&a.setZoom(j)}handleEaseTo(a,u){const y=a.zoom,b=a.center,j=a.padding,I={roll:a.roll,pitch:a.pitch,bearing:a.bearing},F={roll:u.roll===void 0?a.roll:u.roll,pitch:u.pitch===void 0?a.pitch:u.pitch,bearing:u.bearing===void 0?a.bearing:u.bearing},U=u.zoom!==void 0,Y=!a.isPaddingEqual(u.padding);let re=!1;const ce=u.center?o.V.convert(u.center):b,le=a.applyConstrain(ce,y).center;To(a,le);const ge=a.clone();ge.setCenter(le),ge.setZoom(U?+u.zoom:y+ai(b.lat,ce.lat)),ge.setBearing(u.bearing);const be=new o.P(o.an(a.centerPoint.x+u.offsetAsPoint.x,0,a.width),o.an(a.centerPoint.y+u.offsetAsPoint.y,0,a.height));ge.setLocationAtPoint(le,be);const Me=(u.offset&&u.offsetAsPoint.mag())>0?ge.center:le,Ne=U?+u.zoom:y+ai(b.lat,Me.lat),Ie=y+ai(b.lat,0),ze=Ne+ai(Me.lat,0),He=o.bK(b.lng,Me.lng),Fe=o.bK(b.lat,Me.lat),Ge=o.aq(ze-Ie);return re=Ne!==y,{easeFunc:Ye=>{if(o.bo(I,F)||Nu({startEulerAngles:I,endEulerAngles:F,tr:a,k:Ye,useSlerp:I.roll!=F.roll}),Y&&a.interpolatePadding(j,u.padding,Ye),u.around)o.w("Easing around a point is not supported under globe projection."),a.setLocationAtPoint(u.around,u.aroundPoint);else{const Ue=ze>Ie?Math.min(2,Ge):Math.max(.5,Ge),st=Math.pow(Ue,1-Ye),bt=Id(b,He,Fe,Ye*st);a.setCenter(bt.wrap())}if(re){const Ue=o.G.number(Ie,ze,Ye)+ai(0,a.center.lat);a.setZoom(Ue)}},isZooming:re,elevationCenter:Me}}handleFlyTo(a,u){const y=u.zoom!==void 0,b=a.center,j=a.zoom,I=a.padding,F=!a.isPaddingEqual(u.padding),U=a.applyConstrain(o.V.convert(u.center||u.locationAtOffset),j).center,Y=y?+u.zoom:a.zoom+ai(a.center.lat,U.lat),re=a.clone();re.setCenter(U),re.setZoom(Y),re.setBearing(u.bearing);const ce=new o.P(o.an(a.centerPoint.x+u.offsetAsPoint.x,0,a.width),o.an(a.centerPoint.y+u.offsetAsPoint.y,0,a.height));re.setLocationAtPoint(U,ce);const le=re.center;To(a,le);const ge=(function(Fe,Ge,Ye){const Ue=qr(Ge),st=qr(Ye),bt=o.b5(Ue,st),yt=Math.acos(bt),vt=Qr(Fe);return yt/(2*Math.PI)*vt})(a,b,le),be=j+ai(b.lat,0),Me=Y+ai(le.lat,0),Ne=o.aq(Me-be);let Ie;if(typeof u.minZoom=="number"){const Fe=+u.minZoom+ai(le.lat,0),Ge=Math.min(Fe,be,Me)+ai(0,le.lat),Ye=a.applyConstrain(le,Ge).zoom+ai(le.lat,0);Ie=o.aq(Ye-be)}const ze=o.bK(b.lng,le.lng),He=o.bK(b.lat,le.lat);return{easeFunc:(Fe,Ge,Ye,Ue)=>{const st=Id(b,ze,He,Ye);F&&a.interpolatePadding(I,u.padding,Fe);const bt=Fe===1?le:st;a.setCenter(bt.wrap());const yt=be+o.at(Ge);a.setZoom(Fe===1?Y:yt+ai(0,bt.lat))},scaleOfZoom:Ne,targetCenter:le,scaleOfMinZoom:Ie,pixelPathLength:ge}}static solveVectorScale(a,u,y,b,j){const I=b==="x"?[y[0],y[4],y[8],y[12]]:[y[1],y[5],y[9],y[13]],F=[y[3],y[7],y[11],y[15]],U=a[0]*I[0]+a[1]*I[1]+a[2]*I[2],Y=a[0]*F[0]+a[1]*F[1]+a[2]*F[2],re=u[0]*I[0]+u[1]*I[1]+u[2]*I[2],ce=u[0]*F[0]+u[1]*F[1]+u[2]*F[2];return re+j*Y===U+j*ce||F[3]*(U-re)+I[3]*(ce-Y)+U*ce==re*Y?null:(re+I[3]-j*ce-j*F[3])/(re-U-j*ce+j*Y)}static getLesserNonNegativeNonNull(a,u){return u!==null&&u>=0&&u<a?u:a}}class Eh{constructor(a){this._globe=a,this._mercatorCameraHelper=new nr,this._verticalPerspectiveCameraHelper=new bi}get useGlobeControls(){return this._globe.useGlobeRendering}get currentHelper(){return this.useGlobeControls?this._verticalPerspectiveCameraHelper:this._mercatorCameraHelper}handlePanInertia(a,u){return this.currentHelper.handlePanInertia(a,u)}handleMapControlsRollPitchBearingZoom(a,u){return this.currentHelper.handleMapControlsRollPitchBearingZoom(a,u)}handleMapControlsPan(a,u,y){this.currentHelper.handleMapControlsPan(a,u,y)}cameraForBoxAndBearing(a,u,y,b,j){return this.currentHelper.cameraForBoxAndBearing(a,u,y,b,j)}handleJumpToCenterZoom(a,u){this.currentHelper.handleJumpToCenterZoom(a,u)}handleEaseTo(a,u){return this.currentHelper.handleEaseTo(a,u)}handleFlyTo(a,u){return this.currentHelper.handleFlyTo(a,u)}}const Ql=(C,a)=>o.B(C,a&&a.filter((u=>u.identifier!=="source.canvas"))),ec=o.bO();class Bs extends o.E{constructor(a,u={}){var y,b;super(),this._rtlPluginLoaded=()=>{for(const I in this.tileManagers){const F=this.tileManagers[I].getSource().type;F!=="vector"&&F!=="geojson"||this.tileManagers[I].reload()}},this.map=a,this.dispatcher=new zt(rt(),a._getMapId()),this.dispatcher.registerMessageHandler("GG",((I,F)=>this.getGlyphs(I,F))),this.dispatcher.registerMessageHandler("GI",((I,F)=>this.getImages(I,F))),this.dispatcher.registerMessageHandler("GDA",((I,F)=>this.getDashes(I,F))),this.imageManager=new Ee,this.imageManager.setEventedParent(this);const j=((y=a._container)===null||y===void 0?void 0:y.lang)||typeof document<"u"&&((b=document.documentElement)===null||b===void 0?void 0:b.lang)||void 0;this.glyphManager=new et(a._requestManager,u.localIdeographFontFamily,j),this.lineAtlas=new pt(256,512),this.crossTileSymbolIndex=new $i,this._setInitialValues(),this._resetUpdates(),this.dispatcher.broadcast("SR",o.bP()),ue().on(gi,this._rtlPluginLoaded),this.on("data",(I=>{if(I.dataType!=="source"||I.sourceDataType!=="metadata")return;const F=this.tileManagers[I.sourceId];if(!F)return;const U=F.getSource();if(U&&U.vectorLayerIds)for(const Y in this._layers){const re=this._layers[Y];re.source===U.id&&this._validateLayer(re)}}))}_setInitialValues(){var a;this._spritesImagesIds={},this._layers={},this._order=[],this.tileManagers={},this.zoomHistory=new o.bQ,this._availableImages=[],this._globalState={},this._serializedLayers={},this.stylesheet=null,this.light=null,this.sky=null,this.projection&&(this.projection.destroy(),delete this.projection),this._loaded=!1,this._changed=!1,this._updatedLayers={},this._updatedSources={},this._changedImages={},this._glyphsDidChange=!1,this._updatedPaintProps={},this._layerOrderChanged=!1,this.crossTileSymbolIndex=new(((a=this.crossTileSymbolIndex)===null||a===void 0?void 0:a.constructor)||Object),this.pauseablePlacement=void 0,this.placement=void 0,this.z=0}setGlobalStateProperty(a,u){var y,b,j;this._checkLoaded();const I=u===null?(j=(b=(y=this.stylesheet.state)===null||y===void 0?void 0:y[a])===null||b===void 0?void 0:b.default)!==null&&j!==void 0?j:null:u;if(o.bR(I,this._globalState[a]))return this;this._globalState[a]=I,this._applyGlobalStateChanges([a])}getGlobalState(){return this._globalState}setGlobalState(a){this._checkLoaded();const u=[];for(const y in a)!o.bR(this._globalState[y],a[y].default)&&(u.push(y),this._globalState[y]=a[y].default);this._applyGlobalStateChanges(u)}_applyGlobalStateChanges(a){if(a.length===0)return;const u=new Set,y={};for(const b of a){y[b]=this._globalState[b];for(const j in this._layers){const I=this._layers[j],F=I.getLayoutAffectingGlobalStateRefs(),U=I.getPaintAffectingGlobalStateRefs(),Y=I.getVisibilityAffectingGlobalStateRefs();if(F.has(b)&&u.add(I.source),U.has(b))for(const{name:re,value:ce}of U.get(b))this._updatePaintProperty(I,re,ce);Y?.has(b)&&(I.recalculateVisibility(),this._updateLayer(I))}}this.dispatcher.broadcast("UGS",y);for(const b in this.tileManagers)u.has(b)&&(this._reloadSource(b),this._changed=!0)}loadURL(a,u={},y){this.fire(new o.l("dataloading",{dataType:"style"})),u.validate=typeof u.validate!="boolean"||u.validate;const b=this.map._requestManager.transformRequest(a,"Style");this._loadStyleRequest=new AbortController;const j=this._loadStyleRequest;o.j(b,this._loadStyleRequest).then((I=>{this._loadStyleRequest=null,this._load(I.data,u,y)})).catch((I=>{this._loadStyleRequest=null,I&&!j.signal.aborted&&this.fire(new o.k(I))}))}loadJSON(a,u={},y){this.fire(new o.l("dataloading",{dataType:"style"})),this._frameRequest=new AbortController,z.frameAsync(this._frameRequest,this.map._ownerWindow).then((()=>{this._frameRequest=null,u.validate=u.validate!==!1,this._load(a,u,y)})).catch((()=>{}))}loadEmpty(){this.fire(new o.l("dataloading",{dataType:"style"})),this._load(ec,{validate:!1})}_load(a,u,y){var b,j;let I=u.transformStyle?u.transformStyle(y,a):a;if(!u.validate||!Ql(this,o.C(I))){I=Object.assign({},I),this._loaded=!0,this.stylesheet=I;for(const F in I.sources)this.addSource(F,I.sources[F],{validate:!1});I.sprite?this._loadSprite(I.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(I.glyphs),this._createLayers(),this.light=new Qe(this.stylesheet.light),this._setProjectionInternal(((b=this.stylesheet.projection)===null||b===void 0?void 0:b.type)||"mercator"),this.sky=new nt(this.stylesheet.sky),this.map.setTerrain((j=this.stylesheet.terrain)!==null&&j!==void 0?j:null),this.fire(new o.l("data",{dataType:"style"})),this.fire(new o.l("style.load"))}}_createLayers(){var a,u,y;const b=o.bS(this.stylesheet.layers);this.setGlobalState((a=this.stylesheet.state)!==null&&a!==void 0?a:null),this.dispatcher.broadcast("SL",b),this._order=b.map((j=>j.id)),this._layers={},this._serializedLayers=null;for(const j of b){const I=o.bT(j,this._globalState);if(I.setEventedParent(this,{layer:{id:j.id}}),this._layers[j.id]=I,o.bU(I)&&this.tileManagers[I.source]){const F=(y=(u=j.paint)===null||u===void 0?void 0:u["raster-fade-duration"])!==null&&y!==void 0?y:I.paint.get("raster-fade-duration");this.tileManagers[I.source].setRasterFadeDuration(F)}}}_loadSprite(a,u=!1,y=void 0){this.imageManager.setLoaded(!1);const b=new AbortController;let j;this._spriteRequest=b,(function(I,F,U,Y){return o._(this,void 0,void 0,(function*(){const re=Ae(I),ce=U>1?"@2x":"",le={},ge={};for(const{id:be,url:Me}of re){const Ne=F.transformRequest(_e(Me,ce,".json"),"SpriteJSON");le[be]=o.j(Ne,Y);const Ie=F.transformRequest(_e(Me,ce,".png"),"SpriteImage");ge[be]=de.getImage(Ie,Y)}return yield Promise.all([...Object.values(le),...Object.values(ge)]),(function(be,Me){return o._(this,void 0,void 0,(function*(){const Ne={};for(const Ie in be){Ne[Ie]={};const ze=z.getImageCanvasContext((yield Me[Ie]).data),He=(yield be[Ie]).data;for(const Fe in He){const{width:Ge,height:Ye,x:Ue,y:st,sdf:bt,pixelRatio:yt,stretchX:vt,stretchY:xt,content:qt,textFitWidth:Gt,textFitHeight:Rt}=He[Fe];Ne[Ie][Fe]={data:null,pixelRatio:yt,sdf:bt,stretchX:vt,stretchY:xt,content:qt,textFitWidth:Gt,textFitHeight:Rt,spriteData:{width:Ge,height:Ye,x:Ue,y:st,context:ze}}}}return Ne}))})(le,ge)}))})(a,this.map._requestManager,this.map.getPixelRatio(),this._spriteRequest).then((I=>{if(this._spriteRequest=null,I)for(const F in I){this._spritesImagesIds[F]=[];const U=this._spritesImagesIds[F]?this._spritesImagesIds[F].filter((Y=>!(Y in I))):[];for(const Y of U)this.imageManager.removeImage(Y),this._changedImages[Y]=!0;for(const Y in I[F]){const re=F==="default"?Y:`${F}:${Y}`;this._spritesImagesIds[F].push(re),re in this.imageManager.images?this.imageManager.updateImage(re,I[F][Y],!1):this.imageManager.addImage(re,I[F][Y]),u&&(this._changedImages[re]=!0)}}})).catch((I=>{this._spriteRequest=null,j=I,b.signal.aborted||this.fire(new o.k(j))})).finally((()=>{this.imageManager.setLoaded(!0),this._availableImages=this.imageManager.listImages(),u&&(this._changed=!0),this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"})),y&&y(j)}))}_unloadSprite(){for(const a of Object.values(this._spritesImagesIds).flat())this.imageManager.removeImage(a),this._changedImages[a]=!0;this._spritesImagesIds={},this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}_validateLayer(a){const u=this.tileManagers[a.source];if(!u)return;const y=a.sourceLayer;if(!y)return;const b=u.getSource();(b.type==="geojson"||b.vectorLayerIds&&b.vectorLayerIds.indexOf(y)===-1)&&this.fire(new o.k(new Error(`Source layer "${y}" does not exist on source "${b.id}" as specified by style layer "${a.id}".`)))}loaded(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(const a in this.tileManagers)if(!this.tileManagers[a].loaded())return!1;return!!this.imageManager.isLoaded()}_serializeByIds(a,u=!1){const y=this._serializedAllLayers();if(!a||a.length===0)return Object.values(u?o.bV(y):y);const b=[];for(const j of a)if(y[j]){const I=u?o.bV(y[j]):y[j];b.push(I)}return b}_serializedAllLayers(){let a=this._serializedLayers;if(a)return a;a=this._serializedLayers={};const u=Object.keys(this._layers);for(const y of u){const b=this._layers[y];b.type!=="custom"&&(a[y]=b.serialize())}return a}hasTransitions(){var a,u,y;if(!((a=this.light)===null||a===void 0)&&a.hasTransition()||!((u=this.sky)===null||u===void 0)&&u.hasTransition()||!((y=this.projection)===null||y===void 0)&&y.hasTransition())return!0;for(const b in this.tileManagers)if(this.tileManagers[b].hasTransition())return!0;for(const b in this._layers)if(this._layers[b].hasTransition())return!0;return!1}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading.")}update(a){if(!this._loaded)return;const u=this._changed;if(u){const b=Object.keys(this._updatedLayers),j=Object.keys(this._removedLayers);(b.length||j.length)&&this._updateWorkerLayers(b,j);for(const I in this._updatedSources){const F=this._updatedSources[I];if(F==="reload")this._reloadSource(I);else{if(F!=="clear")throw new Error(`Invalid action ${F}`);this._clearSource(I)}}this._updateTilesForChangedImages(),this._updateTilesForChangedGlyphs();for(const I in this._updatedPaintProps)this._layers[I].updateTransitions(a);this.light.updateTransitions(a),this.sky.updateTransitions(a),this._resetUpdates()}const y={};for(const b in this.tileManagers){const j=this.tileManagers[b];y[b]=j.used,j.used=!1}for(const b of this._order){const j=this._layers[b];j.recalculate(a,this._availableImages),!j.isHidden(a.zoom)&&j.source&&(this.tileManagers[j.source].used=!0)}for(const b in y){const j=this.tileManagers[b];!!y[b]!=!!j.used&&j.fire(new o.l("data",{sourceDataType:"visibility",dataType:"source",sourceId:b}))}this.light.recalculate(a),this.sky.recalculate(a),this.projection.recalculate(a),this.z=a.zoom,u&&this.fire(new o.l("data",{dataType:"style"}))}_updateTilesForChangedImages(){const a=Object.keys(this._changedImages);if(a.length){for(const u in this.tileManagers)this.tileManagers[u].reloadTilesForDependencies(["icons","patterns"],a);this._changedImages={}}}_updateTilesForChangedGlyphs(){if(this._glyphsDidChange){for(const a in this.tileManagers)this.tileManagers[a].reloadTilesForDependencies(["glyphs"],[""]);this._glyphsDidChange=!1}}_updateWorkerLayers(a,u){this.dispatcher.broadcast("UL",{layers:this._serializeByIds(a,!1),removedIds:u})}_resetUpdates(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={},this._glyphsDidChange=!1}setState(a,u={}){var y;this._checkLoaded();const b=this.serialize();if(a=u.transformStyle?u.transformStyle(b,a):a,((y=u.validate)===null||y===void 0||y)&&Ql(this,o.C(a)))return!1;(a=o.bV(a)).layers=o.bS(a.layers);const j=o.bW(b,a),I=this._getOperationsToPerform(j);if(I.unimplemented.length>0)throw new Error(`Unimplemented: ${I.unimplemented.join(", ")}.`);if(I.operations.length===0)return!1;for(const F of I.operations)F();return this.stylesheet=a,this._serializedLayers=null,this.fire(new o.l("style.load",{style:this})),!0}_getOperationsToPerform(a){const u=[],y=[];for(const b of a)switch(b.command){case"setCenter":case"setZoom":case"setBearing":case"setPitch":case"setRoll":continue;case"addLayer":u.push((()=>this.addLayer.apply(this,b.args)));break;case"removeLayer":u.push((()=>this.removeLayer.apply(this,b.args)));break;case"setPaintProperty":u.push((()=>this.setPaintProperty.apply(this,b.args)));break;case"setLayoutProperty":u.push((()=>this.setLayoutProperty.apply(this,b.args)));break;case"setFilter":u.push((()=>this.setFilter.apply(this,b.args)));break;case"addSource":u.push((()=>this.addSource.apply(this,b.args)));break;case"removeSource":u.push((()=>this.removeSource.apply(this,b.args)));break;case"setLayerZoomRange":u.push((()=>this.setLayerZoomRange.apply(this,b.args)));break;case"setLight":u.push((()=>this.setLight.apply(this,b.args)));break;case"setGeoJSONSourceData":u.push((()=>this.setGeoJSONSourceData.apply(this,b.args)));break;case"setGlyphs":u.push((()=>this.setGlyphs.apply(this,b.args)));break;case"setSprite":u.push((()=>this.setSprite.apply(this,b.args)));break;case"setTerrain":u.push((()=>this.map.setTerrain.apply(this,b.args)));break;case"setSky":u.push((()=>this.setSky.apply(this,b.args)));break;case"setProjection":this.setProjection.apply(this,b.args);break;case"setGlobalState":u.push((()=>this.setGlobalState.apply(this,b.args)));break;case"setTransition":u.push((()=>{}));break;default:y.push(b.command)}return{operations:u,unimplemented:y}}addImage(a,u){if(this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" already exists.`)));this.imageManager.addImage(a,u),this._afterImageUpdated(a)}updateImage(a,u){this.imageManager.updateImage(a,u)}getImage(a){return this.imageManager.getImage(a)}removeImage(a){if(!this.getImage(a))return this.fire(new o.k(new Error(`An image named "${a}" does not exist.`)));this.imageManager.removeImage(a),this._afterImageUpdated(a)}_afterImageUpdated(a){this._availableImages=this.imageManager.listImages(),this._changedImages[a]=!0,this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this.imageManager.listImages()}addSource(a,u,y={}){if(this._checkLoaded(),this.tileManagers[a]!==void 0)throw new Error(`Source "${a}" already exists.`);if(!u.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(u).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(u.type)>=0&&this._validate(o.C.source,`sources.${a}`,u,null,y))return;this.map&&this.map._collectResourceTiming&&(u.collectResourceTiming=!0);const b=this.tileManagers[a]=new oa(a,u,this.dispatcher);b.style=this,b.setEventedParent(this,(()=>({isSourceLoaded:b.loaded(),source:b.serialize(),sourceId:a}))),b.onAdd(this.map),this._changed=!0}removeSource(a){if(this._checkLoaded(),this.tileManagers[a]===void 0)throw new Error("There is no source with this ID");for(const y in this._layers)if(this._layers[y].source===a)return this.fire(new o.k(new Error(`Source "${a}" cannot be removed while layer "${y}" is using it.`)));const u=this.tileManagers[a];delete this.tileManagers[a],delete this._updatedSources[a],u.fire(new o.l("data",{sourceDataType:"metadata",dataType:"source",sourceId:a})),u.setEventedParent(null),u.onRemove(this.map),this._changed=!0}setGeoJSONSourceData(a,u){if(this._checkLoaded(),this.tileManagers[a]===void 0)throw new Error(`There is no source with this ID=${a}`);const y=this.tileManagers[a].getSource();if(y.type!=="geojson")throw new Error(`geojsonSource.type is ${y.type}, which is !== 'geojson`);y.setData(u),this._changed=!0}getSource(a){return this.tileManagers[a]&&this.tileManagers[a].getSource()}addLayer(a,u,y={}){this._checkLoaded();const b=a.id;if(this.getLayer(b))return void this.fire(new o.k(new Error(`Layer "${b}" already exists on this map.`)));let j;if(a.type==="custom"){if(Ql(this,o.bX(a)))return;j=o.bT(a,this._globalState)}else{if("source"in a&&typeof a.source=="object"&&(this.addSource(b,a.source),a=o.bV(a),a=o.e(a,{source:b})),this._validate(o.C.layer,`layers.${b}`,a,{arrayIndex:-1},y))return;j=o.bT(a,this._globalState),this._validateLayer(j),j.setEventedParent(this,{layer:{id:b}})}const I=u?this._order.indexOf(u):this._order.length;if(u&&I===-1)this.fire(new o.k(new Error(`Cannot add layer "${b}" before non-existing layer "${u}".`)));else{if(this._order.splice(I,0,b),this._layerOrderChanged=!0,this._layers[b]=j,this._removedLayers[b]&&j.source&&j.type!=="custom"){const F=this._removedLayers[b];delete this._removedLayers[b],F.type!==j.type?this._updatedSources[j.source]="clear":(this._updatedSources[j.source]="reload",this.tileManagers[j.source].pause())}this._updateLayer(j),j.onAdd&&j.onAdd(this.map)}}moveLayer(a,u){if(this._checkLoaded(),this._changed=!0,!this._layers[a])return void this.fire(new o.k(new Error(`The layer '${a}' does not exist in the map's style and cannot be moved.`)));if(a===u)return;const y=this._order.indexOf(a);this._order.splice(y,1);const b=u?this._order.indexOf(u):this._order.length;u&&b===-1?this.fire(new o.k(new Error(`Cannot move layer "${a}" before non-existing layer "${u}".`))):(this._order.splice(b,0,a),this._layerOrderChanged=!0)}removeLayer(a){this._checkLoaded();const u=this._layers[a];if(!u)return void this.fire(new o.k(new Error(`Cannot remove non-existing layer "${a}".`)));u.setEventedParent(null);const y=this._order.indexOf(a);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[a]=u,delete this._layers[a],this._serializedLayers&&delete this._serializedLayers[a],delete this._updatedLayers[a],delete this._updatedPaintProps[a],u.onRemove&&u.onRemove(this.map)}getLayer(a){return this._layers[a]}getLayersOrder(){return[...this._order]}hasLayer(a){return a in this._layers}setLayerZoomRange(a,u,y){this._checkLoaded();const b=this.getLayer(a);b?b.minzoom===u&&b.maxzoom===y||(u!=null&&(b.minzoom=u),y!=null&&(b.maxzoom=y),this._updateLayer(b)):this.fire(new o.k(new Error(`Cannot set the zoom range of non-existing layer "${a}".`)))}setFilter(a,u,y={}){this._checkLoaded();const b=this.getLayer(a);if(b){if(!o.bR(b.filter,u))return u==null?(b.setFilter(void 0),void this._updateLayer(b)):void(this._validate(o.C.filter,`layers.${b.id}.filter`,u,null,y)||(b.setFilter(o.bV(u)),this._updateLayer(b)))}else this.fire(new o.k(new Error(`Cannot filter non-existing layer "${a}".`)))}getFilter(a){return o.bV(this.getLayer(a).filter)}setLayoutProperty(a,u,y,b={}){this._checkLoaded();const j=this.getLayer(a);j?o.bR(j.getLayoutProperty(u),y)||(j.setLayoutProperty(u,y,b),this._updateLayer(j)):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}getLayoutProperty(a,u){const y=this.getLayer(a);if(y)return y.getLayoutProperty(u);this.fire(new o.k(new Error(`Cannot get style of non-existing layer "${a}".`)))}setPaintProperty(a,u,y,b={}){this._checkLoaded();const j=this.getLayer(a);j?o.bR(j.getPaintProperty(u),y)||this._updatePaintProperty(j,u,y,b):this.fire(new o.k(new Error(`Cannot style non-existing layer "${a}".`)))}_updatePaintProperty(a,u,y,b={}){a.setPaintProperty(u,y,b)&&this._updateLayer(a),o.bU(a)&&u==="raster-fade-duration"&&this.tileManagers[a.source].setRasterFadeDuration(y),this._changed=!0,this._updatedPaintProps[a.id]=!0,this._serializedLayers=null}getPaintProperty(a,u){return this.getLayer(a).getPaintProperty(u)}setFeatureState(a,u){this._checkLoaded();const y=a.source,b=a.sourceLayer,j=this.tileManagers[y];if(j===void 0)return void this.fire(new o.k(new Error(`The source '${y}' does not exist in the map's style.`)));const I=j.getSource().type;I==="geojson"&&b?this.fire(new o.k(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||b?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),j.setFeatureState(b,a.id,u)):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}removeFeatureState(a,u){this._checkLoaded();const y=a.source,b=this.tileManagers[y];if(b===void 0)return void this.fire(new o.k(new Error(`The source '${y}' does not exist in the map's style.`)));const j=b.getSource().type,I=j==="vector"?a.sourceLayer:void 0;j!=="vector"||I?u&&typeof a.id!="string"&&typeof a.id!="number"?this.fire(new o.k(new Error("A feature id is required to remove its specific state property."))):b.removeFeatureState(I,a.id,u):this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")))}getFeatureState(a){this._checkLoaded();const u=a.source,y=a.sourceLayer,b=this.tileManagers[u];if(b!==void 0)return b.getSource().type!=="vector"||y?(a.id===void 0&&this.fire(new o.k(new Error("The feature id parameter must be provided."))),b.getFeatureState(y,a.id)):void this.fire(new o.k(new Error("The sourceLayer parameter must be provided for vector source types.")));this.fire(new o.k(new Error(`The source '${u}' does not exist in the map's style.`)))}getTransition(){return o.e({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)}serialize(){if(!this._loaded)return;const a=o.bY(this.tileManagers,(j=>j.serialize())),u=this._serializeByIds(this._order,!0),y=this.map.getTerrain()||void 0,b=this.stylesheet;return o.bZ({version:b.version,name:b.name,metadata:b.metadata,light:b.light,sky:b.sky,center:b.center,zoom:b.zoom,bearing:b.bearing,pitch:b.pitch,sprite:b.sprite,glyphs:b.glyphs,transition:b.transition,projection:b.projection,sources:a,layers:u,terrain:y},(j=>j!==void 0))}_updateLayer(a){this._updatedLayers[a.id]=!0,a.source&&!this._updatedSources[a.source]&&this.tileManagers[a.source].getSource().type!=="raster"&&(this._updatedSources[a.source]="reload",this.tileManagers[a.source].pause()),this._serializedLayers=null,this._changed=!0}_flattenAndSortRenderedFeatures(a){const u=I=>this._layers[I].type==="fill-extrusion",y={},b=[];for(let I=this._order.length-1;I>=0;I--){const F=this._order[I];if(u(F)){y[F]=I;for(const U of a){const Y=U[F];if(Y)for(const re of Y)b.push(re)}}}b.sort(((I,F)=>F.intersectionZ-I.intersectionZ));const j=[];for(let I=this._order.length-1;I>=0;I--){const F=this._order[I];if(u(F))for(let U=b.length-1;U>=0;U--){const Y=b[U].feature;if(y[Y.layer.id]<I)break;j.push(Y),b.pop()}else for(const U of a){const Y=U[F];if(Y)for(const re of Y)j.push(re.feature)}}return j}queryRenderedFeatures(a,u,y){u&&u.filter&&this._validate(o.C.filter,"queryRenderedFeatures.filter",u.filter,null,u);const b={};if(u&&u.layers){if(!(Array.isArray(u.layers)||u.layers instanceof Set))return this.fire(new o.k(new Error("parameters.layers must be an Array or a Set of strings"))),[];for(const Y of u.layers){const re=this._layers[Y];if(!re)return this.fire(new o.k(new Error(`The layer '${Y}' does not exist in the map's style and cannot be queried for features.`))),[];b[re.source]=!0}}const j=[];u.availableImages=this._availableImages;const I=this._serializedAllLayers(),F=u.layers instanceof Set?u.layers:Array.isArray(u.layers)?new Set(u.layers):null,U=Object.assign(Object.assign({},u),{layers:F,globalState:this._globalState});for(const Y in this.tileManagers)u.layers&&!b[Y]||j.push(Rn(this.tileManagers[Y],this._layers,I,a,U,y,this.map.terrain?(re,ce,le)=>this.map.terrain.getElevation(re,ce,le):void 0));return this.placement&&j.push((function(Y,re,ce,le,ge,be,Me){const Ne={},Ie=be.queryRenderedSymbols(le),ze=[];for(const He of Object.keys(Ie).map(Number))ze.push(Me[He]);ze.sort(cn);for(const He of ze){const Fe=He.featureIndex.lookupSymbolFeatures(Ie[He.bucketInstanceId],re,He.bucketIndex,He.sourceLayerIndex,{filterSpec:ge.filter,globalState:ge.globalState},ge.layers,ge.availableImages,Y);for(const Ge in Fe){const Ye=Ne[Ge]=Ne[Ge]||[],Ue=Fe[Ge];Ue.sort(((st,bt)=>{const yt=He.featureSortOrder;if(yt){const vt=yt.indexOf(st.featureIndex);return yt.indexOf(bt.featureIndex)-vt}return bt.featureIndex-st.featureIndex}));for(const st of Ue)Ye.push(st)}}return(function(He,Fe,Ge){for(const Ye in He)for(const Ue of He[Ye])Hn(Ue,Ge[Fe[Ye].source]);return He})(Ne,Y,ce)})(this._layers,I,this.tileManagers,a,U,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(j)}querySourceFeatures(a,u){u?.filter&&this._validate(o.C.filter,"querySourceFeatures.filter",u.filter,null,u);const y=this.tileManagers[a];return y?(function(b,j){const I=b.getRenderableIds().map((Y=>b.getTileByID(Y))),F=[],U={};for(let Y=0;Y<I.length;Y++){const re=I[Y],ce=re.tileID.canonical.key;U[ce]||(U[ce]=!0,re.querySourceFeatures(F,j))}return F})(y,u?Object.assign(Object.assign({},u),{globalState:this._globalState}):{globalState:this._globalState}):[]}getLight(){return this.light.getLight()}setLight(a,u={}){this._checkLoaded();const y=this.light.getLight();let b=!1;for(const I in a)if(!o.bR(a[I],y[I])){b=!0;break}if(!b)return;const j={now:$(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(a,u),this.light.updateTransitions(j)}getProjection(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.projection}setProjection(a){if(this._checkLoaded(),this.stylesheet.projection=a,this.projection){if(this.projection.name===a.type)return;this.projection.destroy(),delete this.projection}this._setProjectionInternal(a.type)}getSky(){var a;return(a=this.stylesheet)===null||a===void 0?void 0:a.sky}setSky(a,u={}){this._checkLoaded();const y=this.getSky();let b=!1;if(!a&&!y)return;if(a&&!y)b=!0;else if(!a&&y)b=!0;else for(const I in a)if(!o.bR(a[I],y[I])){b=!0;break}if(!b)return;const j={now:$(),transition:o.e({duration:300,delay:0},this.stylesheet.transition)};this.stylesheet.sky=a,this.sky.setSky(a,u),this.sky.updateTransitions(j)}_setProjectionInternal(a){const u=(function(y,b){const j={constrainOverride:b};if(Array.isArray(y)){const I=new Jl({type:y});return{projection:I,transform:new ea(j),cameraHelper:new Eh(I)}}switch(y){case"mercator":return{projection:new ii,transform:new pl(j),cameraHelper:new nr};case"globe":{const I=new Jl({type:["interpolate",["linear"],["zoom"],11,"vertical-perspective",12,"mercator"]});return{projection:I,transform:new ea(j),cameraHelper:new Eh(I)}}case"vertical-perspective":return{projection:new Ra,transform:new Ao(j),cameraHelper:new bi};default:return o.w(`Unknown projection name: ${y}. Falling back to mercator projection.`),{projection:new ii,transform:new pl(j),cameraHelper:new nr}}})(a,this.map.transformConstrain);this.projection=u.projection,this.map.migrateProjection(u.transform,u.cameraHelper);for(const y in this.tileManagers)this.tileManagers[y].reload()}_validate(a,u,y,b,j={}){return(!j||j.validate!==!1)&&Ql(this,a.call(o.C,o.e({key:u,style:this.serialize(),value:y,styleSpec:o.u},b)))}_remove(a=!0){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null),ue().off(gi,this._rtlPluginLoaded);for(const u in this._layers)this._layers[u].setEventedParent(null);for(const u in this.tileManagers){const y=this.tileManagers[u];y.setEventedParent(null),y.onRemove(this.map)}this.imageManager.setEventedParent(null),this.setEventedParent(null),a&&this.dispatcher.broadcast("RM",void 0),this.dispatcher.remove(a)}_clearSource(a){this.tileManagers[a].clearTiles()}_reloadSource(a){this.tileManagers[a].resume(),this.tileManagers[a].reload()}_updateSources(a){for(const u in this.tileManagers)this.tileManagers[u].update(a,this.map.terrain)}_generateCollisionBoxes(){for(const a in this.tileManagers)this._reloadSource(a)}_updatePlacement(a,u,y,b,j=!1){let I=!1,F=!1;const U={};for(const Y of this._order){const re=this._layers[Y];if(re.type!=="symbol")continue;if(!U[re.source]){const le=this.tileManagers[re.source];U[re.source]=le.getRenderableIds(!0).map((ge=>le.getTileByID(ge))).sort(((ge,be)=>be.tileID.overscaledZ-ge.tileID.overscaledZ||(ge.tileID.isLessThan(be.tileID)?-1:1)))}const ce=this.crossTileSymbolIndex.addLayer(re,U[re.source],a.center.lng);I=I||ce}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((j=j||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent($(),a.zoom))&&(this.pauseablePlacement=new ls(a,this.map.terrain,this._order,j,u,y,b,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,U),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit($()),F=!0),I&&this.pauseablePlacement.placement.setStale()),F||I)for(const Y of this._order){const re=this._layers[Y];re.type==="symbol"&&this.placement.updateLayerOpacities(re,U[re.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions($())}_releaseSymbolFadeTiles(){for(const a in this.tileManagers)this.tileManagers[a].releaseSymbolFadeTiles()}getImages(a,u){return o._(this,void 0,void 0,(function*(){const y=yield this.imageManager.getImages(u.icons);this._updateTilesForChangedImages();const b=this.tileManagers[u.source];return b&&b.setDependencies(u.tileID.key,u.type,u.icons),y}))}getGlyphs(a,u){return o._(this,void 0,void 0,(function*(){const y=yield this.glyphManager.getGlyphs(u.stacks),b=this.tileManagers[u.source];return b&&b.setDependencies(u.tileID.key,u.type,[""]),y}))}getGlyphsUrl(){return this.stylesheet.glyphs||null}setGlyphs(a,u={}){this._checkLoaded(),a&&this._validate(o.C.glyphs,"glyphs",a,null,u)||(this._glyphsDidChange=!0,this.stylesheet.glyphs=a,this.glyphManager.entries={},this.glyphManager.setURL(a))}getDashes(a,u){return o._(this,void 0,void 0,(function*(){const y={};for(const[b,j]of Object.entries(u.dashes))y[b]=this.lineAtlas.getDash(j.dasharray,j.round);return y}))}addSprite(a,u,y={},b){this._checkLoaded();const j=[{id:a,url:u}],I=[...Ae(this.stylesheet.sprite),...j];this._validate(o.C.sprite,"sprite",I,null,y)||(this.stylesheet.sprite=I,this._loadSprite(j,!0,b))}removeSprite(a){this._checkLoaded();const u=Ae(this.stylesheet.sprite);if(u.find((y=>y.id===a))){if(this._spritesImagesIds[a])for(const y of this._spritesImagesIds[a])this.imageManager.removeImage(y),this._changedImages[y]=!0;u.splice(u.findIndex((y=>y.id===a)),1),this.stylesheet.sprite=u.length>0?u:void 0,delete this._spritesImagesIds[a],this._availableImages=this.imageManager.listImages(),this._changed=!0,this.dispatcher.broadcast("SI",this._availableImages),this.fire(new o.l("data",{dataType:"style"}))}else this.fire(new o.k(new Error(`Sprite "${a}" doesn't exists on this map.`)))}getSprite(){return Ae(this.stylesheet.sprite)}setSprite(a,u={},y){this._checkLoaded(),a&&this._validate(o.C.sprite,"sprite",a,null,u)||(this.stylesheet.sprite=a,a?this._loadSprite(a,!0,y):(this._unloadSprite(),y&&y(null)))}destroy(){this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._loadStyleRequest&&(this._loadStyleRequest.abort(),this._loadStyleRequest=null),this._spriteRequest&&(this._spriteRequest.abort(),this._spriteRequest=null);for(const a in this.tileManagers){const u=this.tileManagers[a];u.setEventedParent(null),u.onRemove(this.map)}this.tileManagers={},this.imageManager&&(this.imageManager.setEventedParent(null),this.imageManager.destroy(),this._availableImages=[],this._spritesImagesIds={}),this.glyphManager&&this.glyphManager.destroy();for(const a in this._layers){const u=this._layers[a];u.setEventedParent(null),u.onRemove&&u.onRemove(this.map)}this._setInitialValues(),this.setEventedParent(null),this.dispatcher.unregisterMessageHandler("GG"),this.dispatcher.unregisterMessageHandler("GI"),this.dispatcher.unregisterMessageHandler("GDA"),this.dispatcher.remove(!0),this._listeners={},this._oneTimeListeners={}}}var Up=o.aU([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);class Nd{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null}bind(a,u,y,b,j,I,F,U,Y){this.context=a;let re=this.boundPaintVertexBuffers.length!==b.length;for(let ce=0;!re&&ce<b.length;ce++)this.boundPaintVertexBuffers[ce]!==b[ce]&&(re=!0);!this.vao||this.boundProgram!==u||this.boundLayoutVertexBuffer!==y||re||this.boundIndexBuffer!==j||this.boundVertexOffset!==I||this.boundDynamicVertexBuffer!==F||this.boundDynamicVertexBuffer2!==U||this.boundDynamicVertexBuffer3!==Y?this.freshBind(u,y,b,j,I,F,U,Y):(a.bindVertexArray.set(this.vao),F&&F.bind(),j&&j.dynamicDraw&&j.bind(),U&&U.bind(),Y&&Y.bind())}freshBind(a,u,y,b,j,I,F,U){const Y=a.numAttributes,re=this.context,ce=re.gl;this.vao&&this.destroy(),this.vao=re.createVertexArray(),re.bindVertexArray.set(this.vao),this.boundProgram=a,this.boundLayoutVertexBuffer=u,this.boundPaintVertexBuffers=y,this.boundIndexBuffer=b,this.boundVertexOffset=j,this.boundDynamicVertexBuffer=I,this.boundDynamicVertexBuffer2=F,this.boundDynamicVertexBuffer3=U,u.enableAttributes(ce,a);for(const le of y)le.enableAttributes(ce,a);I&&I.enableAttributes(ce,a),F&&F.enableAttributes(ce,a),U&&U.enableAttributes(ce,a),u.bind(),u.setVertexAttribPointers(ce,a,j);for(const le of y)le.bind(),le.setVertexAttribPointers(ce,a,j);I&&(I.bind(),I.setVertexAttribPointers(ce,a,j)),b&&b.bind(),F&&(F.bind(),F.setVertexAttribPointers(ce,a,j)),U&&(U.bind(),U.setVertexAttribPointers(ce,a,j)),re.currentNumAttributes=Y}destroy(){this.vao&&(this.context.deleteVertexArray(this.vao),this.vao=null)}}const jf=(C,a,u,y,b)=>({u_texture:0,u_ele_delta:C,u_fog_matrix:a,u_fog_color:u?u.properties.get("fog-color"):o.bp.white,u_fog_ground_blend:u?u.properties.get("fog-ground-blend"):1,u_fog_ground_blend_opacity:b?0:u?u.calculateFogBlendOpacity(y):0,u_horizon_color:u?u.properties.get("horizon-color"):o.bp.white,u_horizon_fog_blend:u?u.properties.get("horizon-fog-blend"):1,u_is_globe_mode:b?1:0}),Hc={mainMatrix:"u_projection_matrix",tileMercatorCoords:"u_projection_tile_mercator_coords",clippingPlane:"u_projection_clipping_plane",projectionTransition:"u_projection_transition",fallbackMatrix:"u_projection_fallback_matrix"};function La(C){const a=[];for(let u=0;u<C.length;u++){if(C[u]===null)continue;const y=C[u].split(" ");a.push(y.pop())}return a}class $s{constructor(a,u,y,b,j,I,F,U,Y=[]){const re=a.gl;this.program=re.createProgram();const ce=La(u.staticAttributes),le=y?y.getBinderAttributes():[],ge=ce.concat(le),be=sr.prelude.staticUniforms?La(sr.prelude.staticUniforms):[],Me=F.staticUniforms?La(F.staticUniforms):[],Ne=u.staticUniforms?La(u.staticUniforms):[],Ie=y?y.getBinderUniforms():[],ze=be.concat(Me).concat(Ne).concat(Ie),He=[];for(const yt of ze)He.indexOf(yt)<0&&He.push(yt);const Fe=y?y.defines():[];Jr(re)&&Fe.unshift("#version 300 es"),j&&Fe.push("#define OVERDRAW_INSPECTOR;"),I&&Fe.push("#define TERRAIN3D;"),U&&Fe.push(U),Y&&Fe.push(...Y);let Ge=Fe.concat(sr.prelude.fragmentSource,F.fragmentSource,u.fragmentSource).join(`
`),Ye=Fe.concat(sr.prelude.vertexSource,F.vertexSource,u.vertexSource).join(`
`);Jr(re)||(Ge=(function(yt){return yt.replace(/\bin\s/g,"varying ").replace("out highp vec4 fragColor;","").replace(/fragColor/g,"gl_FragColor").replace(/texture\(/g,"texture2D(")})(Ge),Ye=(function(yt){return yt.replace(/\bin\s/g,"attribute ").replace(/\bout\s/g,"varying ").replace(/texture\(/g,"texture2D(")})(Ye));const Ue=re.createShader(re.FRAGMENT_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(Ue,Ge),re.compileShader(Ue),!re.getShaderParameter(Ue,re.COMPILE_STATUS))throw new Error(`Could not compile fragment shader: ${re.getShaderInfoLog(Ue)}`);re.attachShader(this.program,Ue);const st=re.createShader(re.VERTEX_SHADER);if(re.isContextLost())return void(this.failedToCreate=!0);if(re.shaderSource(st,Ye),re.compileShader(st),!re.getShaderParameter(st,re.COMPILE_STATUS))throw new Error(`Could not compile vertex shader: ${re.getShaderInfoLog(st)}`);re.attachShader(this.program,st),this.attributes={};const bt={};this.numAttributes=ge.length;for(let yt=0;yt<this.numAttributes;yt++)ge[yt]&&(re.bindAttribLocation(this.program,yt,ge[yt]),this.attributes[ge[yt]]=yt);if(re.linkProgram(this.program),!re.getProgramParameter(this.program,re.LINK_STATUS))throw new Error(`Program failed to link: ${re.getProgramInfoLog(this.program)}`);re.deleteShader(st),re.deleteShader(Ue);for(let yt=0;yt<He.length;yt++){const vt=He[yt];if(vt&&!bt[vt]){const xt=re.getUniformLocation(this.program,vt);xt&&(bt[vt]=xt)}}this.fixedUniforms=b(a,bt),this.terrainUniforms=((yt,vt)=>({u_depth:new o.b_(yt,vt.u_depth),u_terrain:new o.b_(yt,vt.u_terrain),u_terrain_dim:new o.bq(yt,vt.u_terrain_dim),u_terrain_matrix:new o.c0(yt,vt.u_terrain_matrix),u_terrain_unpack:new o.c1(yt,vt.u_terrain_unpack),u_terrain_exaggeration:new o.bq(yt,vt.u_terrain_exaggeration)}))(a,bt),this.projectionUniforms=((yt,vt)=>({u_projection_matrix:new o.c0(yt,vt.u_projection_matrix),u_projection_tile_mercator_coords:new o.c1(yt,vt.u_projection_tile_mercator_coords),u_projection_clipping_plane:new o.c1(yt,vt.u_projection_clipping_plane),u_projection_transition:new o.bq(yt,vt.u_projection_transition),u_projection_fallback_matrix:new o.c0(yt,vt.u_projection_fallback_matrix)}))(a,bt),this.binderUniforms=y?y.getUniforms(a,bt):[]}draw(a,u,y,b,j,I,F,U,Y,re,ce,le,ge,be,Me,Ne,Ie,ze,He){const Fe=a.gl;if(this.failedToCreate)return;if(a.program.set(this.program),a.setDepthMode(y),a.setStencilMode(b),a.setColorMode(j),a.setCullFace(I),U){a.activeTexture.set(Fe.TEXTURE2),Fe.bindTexture(Fe.TEXTURE_2D,U.depthTexture),a.activeTexture.set(Fe.TEXTURE3),Fe.bindTexture(Fe.TEXTURE_2D,U.texture);for(const Ye in this.terrainUniforms)this.terrainUniforms[Ye].set(U[Ye])}if(Y)for(const Ye in Y)this.projectionUniforms[Hc[Ye]].set(Y[Ye]);if(F)for(const Ye in this.fixedUniforms)this.fixedUniforms[Ye].set(F[Ye]);Ne&&Ne.setUniforms(a,this.binderUniforms,be,{zoom:Me});let Ge=0;switch(u){case Fe.LINES:Ge=2;break;case Fe.TRIANGLES:Ge=3;break;case Fe.LINE_STRIP:Ge=1}for(const Ye of ge.get()){const Ue=Ye.vaos||(Ye.vaos={});(Ue[re]||(Ue[re]=new Nd)).bind(a,this,ce,Ne?Ne.getPaintVertexBuffers():[],le,Ye.vertexOffset,Ie,ze,He),Fe.drawElements(u,Ye.primitiveLength*Ge,Fe.UNSIGNED_SHORT,Ye.primitiveOffset*Ge*2)}}}function Zc(C,a,u){const y=1/o.aN(u,1,a.transform.tileZoom),b=Math.pow(2,u.tileID.overscaledZ),j=u.tileSize*Math.pow(2,a.transform.tileZoom)/b,I=j*(u.tileID.canonical.x+u.tileID.wrap*b),F=j*u.tileID.canonical.y;return{u_image:0,u_texsize:u.imageAtlasTexture.size,u_scale:[y,C.fromScale,C.toScale],u_fade:C.t,u_pixel_coord_upper:[I>>16,F>>16],u_pixel_coord_lower:[65535&I,65535&F]}}const Ho=(C,a,u,y)=>{const b=C.style.light,j=b.properties.get("position"),I=[j.x,j.y,j.z],F=o.c4();b.properties.get("anchor")==="viewport"&&o.c5(F,C.transform.bearingInRadians),o.c6(I,I,F);const U=C.transform.transformLightDirection(I),Y=b.properties.get("color");return{u_lightpos:I,u_lightpos_globe:U,u_lightintensity:b.properties.get("intensity"),u_lightcolor:[Y.r,Y.g,Y.b],u_vertical_gradient:+a,u_opacity:u,u_fill_translate:y}},Dd=(C,a,u,y,b,j,I)=>o.e(Ho(C,a,u,y),Zc(j,C,I),{u_height_factor:-Math.pow(2,b.overscaledZ)/I.tileSize/8}),Vs=(C,a,u,y)=>o.e(Zc(a,C,u),{u_fill_translate:y}),jh=(C,a)=>({u_world:C,u_fill_translate:a}),tc=(C,a,u,y,b)=>o.e(Vs(C,a,u,b),{u_world:y}),Od=(C,a,u,y,b)=>{const j=C.transform;let I,F,U=0;if(u.paint.get("circle-pitch-alignment")==="map"){const Y=o.aN(a,1,j.zoom);I=!0,F=[Y,Y],U=Y/(o.a5*Math.pow(2,a.tileID.overscaledZ))*2*Math.PI*b}else I=!1,F=j.pixelsToGLUnits;return{u_camera_to_center_distance:j.cameraToCenterDistance,u_scale_with_map:+(u.paint.get("circle-pitch-scale")==="map"),u_pitch_with_map:+I,u_device_pixel_ratio:C.pixelRatio,u_extrude_scale:F,u_globe_extrude_scale:U,u_translate:y}},Ea=C=>({u_pixel_extrude_scale:[1/C.width,1/C.height]}),Mf=C=>({u_viewport_size:[C.width,C.height]}),us=(C,a=1)=>({u_color:C,u_overlay:0,u_overlay_scale:a}),Us=(C,a,u,y)=>{const b=o.aN(C,1,a)/(o.a5*Math.pow(2,C.tileID.overscaledZ))*2*Math.PI*y;return{u_extrude_scale:o.aN(C,1,a),u_intensity:u,u_globe_extrude_scale:b}},Mh=(C,a,u,y)=>{const b=o.N();o.c7(b,0,C.width,C.height,0,0,1);const j=C.context.gl;return{u_matrix:b,u_world:[j.drawingBufferWidth,j.drawingBufferHeight],u_image:u,u_color_ramp:y,u_opacity:a.paint.get("heatmap-opacity")}},nc=(C,a,u)=>{const y=u.paint.get("hillshade-accent-color");let b;switch(u.paint.get("hillshade-method")){case"basic":b=4;break;case"combined":b=1;break;case"igor":b=2;break;case"multidirectional":b=3;break;default:b=0}const j=u.getIlluminationProperties();for(let I=0;I<j.directionRadians.length;I++)u.paint.get("hillshade-illumination-anchor")==="viewport"&&(j.directionRadians[I]+=C.transform.bearingInRadians);return{u_image:0,u_latrange:to(0,a.tileID),u_exaggeration:u.paint.get("hillshade-exaggeration"),u_altitudes:j.altitudeRadians,u_azimuths:j.directionRadians,u_accent:y,u_method:b,u_highlights:j.highlightColor,u_shadows:j.shadowColor}},Lu=(C,a)=>{const u=a.stride,y=o.N();return o.c7(y,0,o.a5,-o.a5,0,0,1),o.O(y,y,[0,-o.a5,0]),{u_matrix:y,u_image:1,u_dimension:[u,u],u_zoom:C.overscaledZ,u_unpack:a.getUnpackVector()}};function to(C,a){const u=Math.pow(2,a.canonical.z),y=a.canonical.y;return[new o.a9(0,y/u).toLngLat().lat,new o.a9(0,(y+1)/u).toLngLat().lat]}const kf=(C,a,u=0)=>({u_image:0,u_unpack:a.getUnpackVector(),u_dimension:[a.stride,a.stride],u_elevation_stops:1,u_color_stops:4,u_color_ramp_size:u,u_opacity:C.paint.get("color-relief-opacity")}),no=(C,a,u,y)=>{const b=C.transform;return{u_translation:vl(C,a,u),u_ratio:y/o.aN(a,1,b.zoom),u_device_pixel_ratio:C.pixelRatio,u_units_to_pixels:[1/b.pixelsToGLUnits[0],1/b.pixelsToGLUnits[1]]}},If=(C,a,u,y,b)=>o.e(no(C,a,u,y),{u_image:0,u_image_height:b}),Co=(C,a,u,y,b)=>{const j=C.transform,I=za(a,j);return{u_translation:vl(C,a,u),u_texsize:a.imageAtlasTexture.size,u_ratio:y/o.aN(a,1,j.zoom),u_device_pixel_ratio:C.pixelRatio,u_image:0,u_scale:[I,b.fromScale,b.toScale],u_fade:b.t,u_units_to_pixels:[1/j.pixelsToGLUnits[0],1/j.pixelsToGLUnits[1]]}},rc=(C,a,u,y,b)=>{const j=za(a,C.transform);return o.e(no(C,a,u,y),{u_tileratio:j,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image:0,u_mix:b.t,u_lineatlas_width:C.lineAtlas.width,u_lineatlas_height:C.lineAtlas.height})},ic=(C,a,u,y,b,j)=>{const I=za(a,C.transform);return o.e(no(C,a,u,y),{u_image:0,u_image_height:j,u_tileratio:I,u_crossfade_from:b.fromScale,u_crossfade_to:b.toScale,u_image_dash:1,u_mix:b.t,u_lineatlas_width:C.lineAtlas.width,u_lineatlas_height:C.lineAtlas.height})};function za(C,a){return 1/o.aN(C,1,a.tileZoom)}function vl(C,a,u){return o.aO(C.transform,a,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Kc=(C,a,u,y,b)=>{return{u_tl_parent:C,u_scale_parent:a,u_buffer_scale:1,u_fade_t:u.mix,u_opacity:u.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(I=y.paint.get("raster-saturation"),I>0?1-1/(1.001-I):-I),u_contrast_factor:(j=y.paint.get("raster-contrast"),j>0?1/(1-j):1+j),u_spin_weights:Xc(y.paint.get("raster-hue-rotate")),u_coords_top:[b[0].x,b[0].y,b[1].x,b[1].y],u_coords_bottom:[b[3].x,b[3].y,b[2].x,b[2].y]};var j,I};function Xc(C){C*=Math.PI/180;const a=Math.sin(C),u=Math.cos(C);return[(2*u+1)/3,(-Math.sqrt(3)*a-u+1)/3,(Math.sqrt(3)*a-u+1)/3]}const xl=(C,a,u,y,b,j,I,F,U,Y,re,ce,le)=>{const ge=I.transform;return{u_is_size_zoom_constant:+(C==="constant"||C==="source"),u_is_size_feature_constant:+(C==="constant"||C==="camera"),u_size_t:a?a.uSizeT:0,u_size:a?a.uSize:0,u_camera_to_center_distance:ge.cameraToCenterDistance,u_pitch:ge.pitch/360*2*Math.PI,u_rotate_symbol:+u,u_aspect_ratio:ge.width/ge.height,u_fade_change:I.options.fadeDuration?I.symbolFadeChange:1,u_label_plane_matrix:F,u_coord_matrix:U,u_is_text:+re,u_pitch_with_map:+y,u_is_along_line:b,u_is_variable_anchor:j,u_texsize:ce,u_texture:0,u_translation:Y,u_pitched_scale:le}},ac=(C,a,u,y,b,j,I,F,U,Y,re,ce,le,ge)=>{const be=I.transform;return o.e(xl(C,a,u,y,b,j,I,F,U,Y,re,ce,ge),{u_gamma_scale:y?Math.cos(be.pitch*Math.PI/180)*be.cameraToCenterDistance:1,u_device_pixel_ratio:I.pixelRatio,u_is_halo:1})},qs=(C,a,u,y,b,j,I,F,U,Y,re,ce,le)=>o.e(ac(C,a,u,y,b,j,I,F,U,Y,!0,re,0,le),{u_texsize_icon:ce,u_texture_icon:1}),Rd=(C,a)=>({u_opacity:C,u_color:a}),Zo=(C,a,u,y,b)=>o.e((function(j,I,F,U){const Y=F.imageManager.getPattern(j.from.toString()),re=F.imageManager.getPattern(j.to.toString()),{width:ce,height:le}=F.imageManager.getPixelSize(),ge=Math.pow(2,U.tileID.overscaledZ),be=U.tileSize*Math.pow(2,F.transform.tileZoom)/ge,Me=be*(U.tileID.canonical.x+U.tileID.wrap*ge),Ne=be*U.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:Y.tl,u_pattern_br_a:Y.br,u_pattern_tl_b:re.tl,u_pattern_br_b:re.br,u_texsize:[ce,le],u_mix:I.t,u_pattern_size_a:Y.displaySize,u_pattern_size_b:re.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/o.aN(U,1,F.transform.tileZoom),u_pixel_coord_upper:[Me>>16,Ne>>16],u_pixel_coord_lower:[65535&Me,65535&Ne]}})(u,b,a,y),{u_opacity:C}),Gs=(C,a)=>{},Nf={fillExtrusion:(C,a)=>({u_lightpos:new o.c2(C,a.u_lightpos),u_lightpos_globe:new o.c2(C,a.u_lightpos_globe),u_lightintensity:new o.bq(C,a.u_lightintensity),u_lightcolor:new o.c2(C,a.u_lightcolor),u_vertical_gradient:new o.bq(C,a.u_vertical_gradient),u_opacity:new o.bq(C,a.u_opacity),u_fill_translate:new o.c3(C,a.u_fill_translate)}),fillExtrusionPattern:(C,a)=>({u_lightpos:new o.c2(C,a.u_lightpos),u_lightpos_globe:new o.c2(C,a.u_lightpos_globe),u_lightintensity:new o.bq(C,a.u_lightintensity),u_lightcolor:new o.c2(C,a.u_lightcolor),u_vertical_gradient:new o.bq(C,a.u_vertical_gradient),u_height_factor:new o.bq(C,a.u_height_factor),u_opacity:new o.bq(C,a.u_opacity),u_fill_translate:new o.c3(C,a.u_fill_translate),u_image:new o.b_(C,a.u_image),u_texsize:new o.c3(C,a.u_texsize),u_pixel_coord_upper:new o.c3(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(C,a.u_pixel_coord_lower),u_scale:new o.c2(C,a.u_scale),u_fade:new o.bq(C,a.u_fade)}),fill:(C,a)=>({u_fill_translate:new o.c3(C,a.u_fill_translate)}),fillPattern:(C,a)=>({u_image:new o.b_(C,a.u_image),u_texsize:new o.c3(C,a.u_texsize),u_pixel_coord_upper:new o.c3(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(C,a.u_pixel_coord_lower),u_scale:new o.c2(C,a.u_scale),u_fade:new o.bq(C,a.u_fade),u_fill_translate:new o.c3(C,a.u_fill_translate)}),fillOutline:(C,a)=>({u_world:new o.c3(C,a.u_world),u_fill_translate:new o.c3(C,a.u_fill_translate)}),fillOutlinePattern:(C,a)=>({u_world:new o.c3(C,a.u_world),u_image:new o.b_(C,a.u_image),u_texsize:new o.c3(C,a.u_texsize),u_pixel_coord_upper:new o.c3(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(C,a.u_pixel_coord_lower),u_scale:new o.c2(C,a.u_scale),u_fade:new o.bq(C,a.u_fade),u_fill_translate:new o.c3(C,a.u_fill_translate)}),circle:(C,a)=>({u_camera_to_center_distance:new o.bq(C,a.u_camera_to_center_distance),u_scale_with_map:new o.b_(C,a.u_scale_with_map),u_pitch_with_map:new o.b_(C,a.u_pitch_with_map),u_extrude_scale:new o.c3(C,a.u_extrude_scale),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_globe_extrude_scale:new o.bq(C,a.u_globe_extrude_scale),u_translate:new o.c3(C,a.u_translate)}),collisionBox:(C,a)=>({u_pixel_extrude_scale:new o.c3(C,a.u_pixel_extrude_scale)}),collisionCircle:(C,a)=>({u_viewport_size:new o.c3(C,a.u_viewport_size)}),debug:(C,a)=>({u_color:new o.b$(C,a.u_color),u_overlay:new o.b_(C,a.u_overlay),u_overlay_scale:new o.bq(C,a.u_overlay_scale)}),depth:Gs,clippingMask:Gs,heatmap:(C,a)=>({u_extrude_scale:new o.bq(C,a.u_extrude_scale),u_intensity:new o.bq(C,a.u_intensity),u_globe_extrude_scale:new o.bq(C,a.u_globe_extrude_scale)}),heatmapTexture:(C,a)=>({u_matrix:new o.c0(C,a.u_matrix),u_world:new o.c3(C,a.u_world),u_image:new o.b_(C,a.u_image),u_color_ramp:new o.b_(C,a.u_color_ramp),u_opacity:new o.bq(C,a.u_opacity)}),hillshade:(C,a)=>({u_image:new o.b_(C,a.u_image),u_latrange:new o.c3(C,a.u_latrange),u_exaggeration:new o.bq(C,a.u_exaggeration),u_altitudes:new o.c9(C,a.u_altitudes),u_azimuths:new o.c9(C,a.u_azimuths),u_accent:new o.b$(C,a.u_accent),u_method:new o.b_(C,a.u_method),u_shadows:new o.c8(C,a.u_shadows),u_highlights:new o.c8(C,a.u_highlights)}),hillshadePrepare:(C,a)=>({u_matrix:new o.c0(C,a.u_matrix),u_image:new o.b_(C,a.u_image),u_dimension:new o.c3(C,a.u_dimension),u_zoom:new o.bq(C,a.u_zoom),u_unpack:new o.c1(C,a.u_unpack)}),colorRelief:(C,a)=>({u_image:new o.b_(C,a.u_image),u_unpack:new o.c1(C,a.u_unpack),u_dimension:new o.c3(C,a.u_dimension),u_elevation_stops:new o.b_(C,a.u_elevation_stops),u_color_stops:new o.b_(C,a.u_color_stops),u_color_ramp_size:new o.b_(C,a.u_color_ramp_size),u_opacity:new o.bq(C,a.u_opacity)}),line:(C,a)=>({u_translation:new o.c3(C,a.u_translation),u_ratio:new o.bq(C,a.u_ratio),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.c3(C,a.u_units_to_pixels)}),lineGradient:(C,a)=>({u_translation:new o.c3(C,a.u_translation),u_ratio:new o.bq(C,a.u_ratio),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.c3(C,a.u_units_to_pixels),u_image:new o.b_(C,a.u_image),u_image_height:new o.bq(C,a.u_image_height)}),linePattern:(C,a)=>({u_translation:new o.c3(C,a.u_translation),u_texsize:new o.c3(C,a.u_texsize),u_ratio:new o.bq(C,a.u_ratio),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_image:new o.b_(C,a.u_image),u_units_to_pixels:new o.c3(C,a.u_units_to_pixels),u_scale:new o.c2(C,a.u_scale),u_fade:new o.bq(C,a.u_fade)}),lineSDF:(C,a)=>({u_translation:new o.c3(C,a.u_translation),u_ratio:new o.bq(C,a.u_ratio),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.c3(C,a.u_units_to_pixels),u_image:new o.b_(C,a.u_image),u_mix:new o.bq(C,a.u_mix),u_tileratio:new o.bq(C,a.u_tileratio),u_crossfade_from:new o.bq(C,a.u_crossfade_from),u_crossfade_to:new o.bq(C,a.u_crossfade_to),u_lineatlas_width:new o.bq(C,a.u_lineatlas_width),u_lineatlas_height:new o.bq(C,a.u_lineatlas_height)}),lineGradientSDF:(C,a)=>({u_translation:new o.c3(C,a.u_translation),u_ratio:new o.bq(C,a.u_ratio),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_units_to_pixels:new o.c3(C,a.u_units_to_pixels),u_image:new o.b_(C,a.u_image),u_image_height:new o.bq(C,a.u_image_height),u_tileratio:new o.bq(C,a.u_tileratio),u_crossfade_from:new o.bq(C,a.u_crossfade_from),u_crossfade_to:new o.bq(C,a.u_crossfade_to),u_image_dash:new o.b_(C,a.u_image_dash),u_mix:new o.bq(C,a.u_mix),u_lineatlas_width:new o.bq(C,a.u_lineatlas_width),u_lineatlas_height:new o.bq(C,a.u_lineatlas_height)}),raster:(C,a)=>({u_tl_parent:new o.c3(C,a.u_tl_parent),u_scale_parent:new o.bq(C,a.u_scale_parent),u_buffer_scale:new o.bq(C,a.u_buffer_scale),u_fade_t:new o.bq(C,a.u_fade_t),u_opacity:new o.bq(C,a.u_opacity),u_image0:new o.b_(C,a.u_image0),u_image1:new o.b_(C,a.u_image1),u_brightness_low:new o.bq(C,a.u_brightness_low),u_brightness_high:new o.bq(C,a.u_brightness_high),u_saturation_factor:new o.bq(C,a.u_saturation_factor),u_contrast_factor:new o.bq(C,a.u_contrast_factor),u_spin_weights:new o.c2(C,a.u_spin_weights),u_coords_top:new o.c1(C,a.u_coords_top),u_coords_bottom:new o.c1(C,a.u_coords_bottom)}),symbolIcon:(C,a)=>({u_is_size_zoom_constant:new o.b_(C,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(C,a.u_is_size_feature_constant),u_size_t:new o.bq(C,a.u_size_t),u_size:new o.bq(C,a.u_size),u_camera_to_center_distance:new o.bq(C,a.u_camera_to_center_distance),u_pitch:new o.bq(C,a.u_pitch),u_rotate_symbol:new o.b_(C,a.u_rotate_symbol),u_aspect_ratio:new o.bq(C,a.u_aspect_ratio),u_fade_change:new o.bq(C,a.u_fade_change),u_label_plane_matrix:new o.c0(C,a.u_label_plane_matrix),u_coord_matrix:new o.c0(C,a.u_coord_matrix),u_is_text:new o.b_(C,a.u_is_text),u_pitch_with_map:new o.b_(C,a.u_pitch_with_map),u_is_along_line:new o.b_(C,a.u_is_along_line),u_is_variable_anchor:new o.b_(C,a.u_is_variable_anchor),u_texsize:new o.c3(C,a.u_texsize),u_texture:new o.b_(C,a.u_texture),u_translation:new o.c3(C,a.u_translation),u_pitched_scale:new o.bq(C,a.u_pitched_scale)}),symbolSDF:(C,a)=>({u_is_size_zoom_constant:new o.b_(C,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(C,a.u_is_size_feature_constant),u_size_t:new o.bq(C,a.u_size_t),u_size:new o.bq(C,a.u_size),u_camera_to_center_distance:new o.bq(C,a.u_camera_to_center_distance),u_pitch:new o.bq(C,a.u_pitch),u_rotate_symbol:new o.b_(C,a.u_rotate_symbol),u_aspect_ratio:new o.bq(C,a.u_aspect_ratio),u_fade_change:new o.bq(C,a.u_fade_change),u_label_plane_matrix:new o.c0(C,a.u_label_plane_matrix),u_coord_matrix:new o.c0(C,a.u_coord_matrix),u_is_text:new o.b_(C,a.u_is_text),u_pitch_with_map:new o.b_(C,a.u_pitch_with_map),u_is_along_line:new o.b_(C,a.u_is_along_line),u_is_variable_anchor:new o.b_(C,a.u_is_variable_anchor),u_texsize:new o.c3(C,a.u_texsize),u_texture:new o.b_(C,a.u_texture),u_gamma_scale:new o.bq(C,a.u_gamma_scale),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_is_halo:new o.b_(C,a.u_is_halo),u_translation:new o.c3(C,a.u_translation),u_pitched_scale:new o.bq(C,a.u_pitched_scale)}),symbolTextAndIcon:(C,a)=>({u_is_size_zoom_constant:new o.b_(C,a.u_is_size_zoom_constant),u_is_size_feature_constant:new o.b_(C,a.u_is_size_feature_constant),u_size_t:new o.bq(C,a.u_size_t),u_size:new o.bq(C,a.u_size),u_camera_to_center_distance:new o.bq(C,a.u_camera_to_center_distance),u_pitch:new o.bq(C,a.u_pitch),u_rotate_symbol:new o.b_(C,a.u_rotate_symbol),u_aspect_ratio:new o.bq(C,a.u_aspect_ratio),u_fade_change:new o.bq(C,a.u_fade_change),u_label_plane_matrix:new o.c0(C,a.u_label_plane_matrix),u_coord_matrix:new o.c0(C,a.u_coord_matrix),u_is_text:new o.b_(C,a.u_is_text),u_pitch_with_map:new o.b_(C,a.u_pitch_with_map),u_is_along_line:new o.b_(C,a.u_is_along_line),u_is_variable_anchor:new o.b_(C,a.u_is_variable_anchor),u_texsize:new o.c3(C,a.u_texsize),u_texsize_icon:new o.c3(C,a.u_texsize_icon),u_texture:new o.b_(C,a.u_texture),u_texture_icon:new o.b_(C,a.u_texture_icon),u_gamma_scale:new o.bq(C,a.u_gamma_scale),u_device_pixel_ratio:new o.bq(C,a.u_device_pixel_ratio),u_is_halo:new o.b_(C,a.u_is_halo),u_translation:new o.c3(C,a.u_translation),u_pitched_scale:new o.bq(C,a.u_pitched_scale)}),background:(C,a)=>({u_opacity:new o.bq(C,a.u_opacity),u_color:new o.b$(C,a.u_color)}),backgroundPattern:(C,a)=>({u_opacity:new o.bq(C,a.u_opacity),u_image:new o.b_(C,a.u_image),u_pattern_tl_a:new o.c3(C,a.u_pattern_tl_a),u_pattern_br_a:new o.c3(C,a.u_pattern_br_a),u_pattern_tl_b:new o.c3(C,a.u_pattern_tl_b),u_pattern_br_b:new o.c3(C,a.u_pattern_br_b),u_texsize:new o.c3(C,a.u_texsize),u_mix:new o.bq(C,a.u_mix),u_pattern_size_a:new o.c3(C,a.u_pattern_size_a),u_pattern_size_b:new o.c3(C,a.u_pattern_size_b),u_scale_a:new o.bq(C,a.u_scale_a),u_scale_b:new o.bq(C,a.u_scale_b),u_pixel_coord_upper:new o.c3(C,a.u_pixel_coord_upper),u_pixel_coord_lower:new o.c3(C,a.u_pixel_coord_lower),u_tile_units_to_pixels:new o.bq(C,a.u_tile_units_to_pixels)}),terrain:(C,a)=>({u_texture:new o.b_(C,a.u_texture),u_ele_delta:new o.bq(C,a.u_ele_delta),u_fog_matrix:new o.c0(C,a.u_fog_matrix),u_fog_color:new o.b$(C,a.u_fog_color),u_fog_ground_blend:new o.bq(C,a.u_fog_ground_blend),u_fog_ground_blend_opacity:new o.bq(C,a.u_fog_ground_blend_opacity),u_horizon_color:new o.b$(C,a.u_horizon_color),u_horizon_fog_blend:new o.bq(C,a.u_horizon_fog_blend),u_is_globe_mode:new o.bq(C,a.u_is_globe_mode)}),terrainDepth:(C,a)=>({u_ele_delta:new o.bq(C,a.u_ele_delta)}),terrainCoords:(C,a)=>({u_texture:new o.b_(C,a.u_texture),u_terrain_coords_id:new o.bq(C,a.u_terrain_coords_id),u_ele_delta:new o.bq(C,a.u_ele_delta)}),projectionErrorMeasurement:(C,a)=>({u_input:new o.bq(C,a.u_input),u_output_expected:new o.bq(C,a.u_output_expected)}),atmosphere:(C,a)=>({u_sun_pos:new o.c2(C,a.u_sun_pos),u_atmosphere_blend:new o.bq(C,a.u_atmosphere_blend),u_globe_position:new o.c2(C,a.u_globe_position),u_globe_radius:new o.bq(C,a.u_globe_radius),u_inv_proj_matrix:new o.c0(C,a.u_inv_proj_matrix)}),sky:(C,a)=>({u_sky_color:new o.b$(C,a.u_sky_color),u_horizon_color:new o.b$(C,a.u_horizon_color),u_horizon:new o.c3(C,a.u_horizon),u_horizon_normal:new o.c3(C,a.u_horizon_normal),u_sky_horizon_blend:new o.bq(C,a.u_sky_horizon_blend),u_sky_blend:new o.bq(C,a.u_sky_blend)})};class kh{constructor(a,u,y){this.context=a;const b=a.gl;this.buffer=b.createBuffer(),this.dynamicDraw=!!y,this.context.unbindVAO(),a.bindElementBuffer.set(this.buffer),b.bufferData(b.ELEMENT_ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?b.DYNAMIC_DRAW:b.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(a){const u=this.context.gl;if(!this.dynamicDraw)throw new Error("Attempted to update data while not in dynamic mode.");this.context.unbindVAO(),this.bind(),u.bufferSubData(u.ELEMENT_ARRAY_BUFFER,0,a.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}const Ih={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Nh{constructor(a,u,y,b){this.length=u.length,this.attributes=y,this.itemSize=u.bytesPerElement,this.dynamicDraw=b,this.context=a;const j=a.gl;this.buffer=j.createBuffer(),a.bindVertexBuffer.set(this.buffer),j.bufferData(j.ARRAY_BUFFER,u.arrayBuffer,this.dynamicDraw?j.DYNAMIC_DRAW:j.STATIC_DRAW),this.dynamicDraw||delete u.arrayBuffer}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(a){if(a.length!==this.length)throw new Error(`Length of new data is ${a.length}, which doesn't match current length of ${this.length}`);const u=this.context.gl;this.bind(),u.bufferSubData(u.ARRAY_BUFFER,0,a.arrayBuffer)}enableAttributes(a,u){for(let y=0;y<this.attributes.length;y++){const b=u.attributes[this.attributes[y].name];b!==void 0&&a.enableVertexAttribArray(b)}}setVertexAttribPointers(a,u,y){for(let b=0;b<this.attributes.length;b++){const j=this.attributes[b],I=u.attributes[j.name];I!==void 0&&a.vertexAttribPointer(I,j.components,a[Ih[j.type]],!1,this.itemSize,j.offset+this.itemSize*(y||0))}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class vr{constructor(a){this.gl=a.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(a){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class ro extends vr{getDefault(){return o.bp.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.clearColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class oc extends vr{getDefault(){return 1}set(a){(a!==this.current||this.dirty)&&(this.gl.clearDepth(a),this.current=a,this.dirty=!1)}}class Ws extends vr{getDefault(){return 0}set(a){(a!==this.current||this.dirty)&&(this.gl.clearStencil(a),this.current=a,this.dirty=!1)}}class _l extends vr{getDefault(){return[!0,!0,!0,!0]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.colorMask(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ko extends vr{getDefault(){return!0}set(a){(a!==this.current||this.dirty)&&(this.gl.depthMask(a),this.current=a,this.dirty=!1)}}class bl extends vr{getDefault(){return 255}set(a){(a!==this.current||this.dirty)&&(this.gl.stencilMask(a),this.current=a,this.dirty=!1)}}class sc extends vr{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(a){const u=this.current;(a.func!==u.func||a.ref!==u.ref||a.mask!==u.mask||this.dirty)&&(this.gl.stencilFunc(a.func,a.ref,a.mask),this.current=a,this.dirty=!1)}}class Di extends vr{getDefault(){const a=this.gl;return[a.KEEP,a.KEEP,a.KEEP]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||this.dirty)&&(this.gl.stencilOp(a[0],a[1],a[2]),this.current=a,this.dirty=!1)}}class lc extends vr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.STENCIL_TEST):u.disable(u.STENCIL_TEST),this.current=a,this.dirty=!1}}class Hs extends vr{getDefault(){return[0,1]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.depthRange(a[0],a[1]),this.current=a,this.dirty=!1)}}class zu extends vr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.DEPTH_TEST):u.disable(u.DEPTH_TEST),this.current=a,this.dirty=!1}}class Xo extends vr{getDefault(){return this.gl.LESS}set(a){(a!==this.current||this.dirty)&&(this.gl.depthFunc(a),this.current=a,this.dirty=!1)}}class Fu extends vr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.BLEND):u.disable(u.BLEND),this.current=a,this.dirty=!1}}class io extends vr{getDefault(){const a=this.gl;return[a.ONE,a.ZERO]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||this.dirty)&&(this.gl.blendFunc(a[0],a[1]),this.current=a,this.dirty=!1)}}class cc extends vr{getDefault(){return o.bp.transparent}set(a){const u=this.current;(a.r!==u.r||a.g!==u.g||a.b!==u.b||a.a!==u.a||this.dirty)&&(this.gl.blendColor(a.r,a.g,a.b,a.a),this.current=a,this.dirty=!1)}}class Yc extends vr{getDefault(){return this.gl.FUNC_ADD}set(a){(a!==this.current||this.dirty)&&(this.gl.blendEquation(a),this.current=a,this.dirty=!1)}}class uc extends vr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;a?u.enable(u.CULL_FACE):u.disable(u.CULL_FACE),this.current=a,this.dirty=!1}}class dc extends vr{getDefault(){return this.gl.BACK}set(a){(a!==this.current||this.dirty)&&(this.gl.cullFace(a),this.current=a,this.dirty=!1)}}class ua extends vr{getDefault(){return this.gl.CCW}set(a){(a!==this.current||this.dirty)&&(this.gl.frontFace(a),this.current=a,this.dirty=!1)}}class wl extends vr{getDefault(){return null}set(a){(a!==this.current||this.dirty)&&(this.gl.useProgram(a),this.current=a,this.dirty=!1)}}class Jc extends vr{getDefault(){return this.gl.TEXTURE0}set(a){(a!==this.current||this.dirty)&&(this.gl.activeTexture(a),this.current=a,this.dirty=!1)}}class Jn extends vr{getDefault(){const a=this.gl;return[0,0,a.drawingBufferWidth,a.drawingBufferHeight]}set(a){const u=this.current;(a[0]!==u[0]||a[1]!==u[1]||a[2]!==u[2]||a[3]!==u[3]||this.dirty)&&(this.gl.viewport(a[0],a[1],a[2],a[3]),this.current=a,this.dirty=!1)}}class Ld extends vr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindFramebuffer(u.FRAMEBUFFER,a),this.current=a,this.dirty=!1}}class Qc extends vr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindRenderbuffer(u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class Dh extends vr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindTexture(u.TEXTURE_2D,a),this.current=a,this.dirty=!1}}class hc extends vr{getDefault(){return null}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.bindBuffer(u.ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Oh extends vr{getDefault(){return null}set(a){const u=this.gl;u.bindBuffer(u.ELEMENT_ARRAY_BUFFER,a),this.current=a,this.dirty=!1}}class Gr extends vr{getDefault(){return null}set(a){var u;if(a===this.current&&!this.dirty)return;const y=this.gl;Jr(y)?y.bindVertexArray(a):(u=y.getExtension("OES_vertex_array_object"))===null||u===void 0||u.bindVertexArrayOES(a),this.current=a,this.dirty=!1}}class zd extends vr{getDefault(){return 4}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_ALIGNMENT,a),this.current=a,this.dirty=!1}}class Bu extends vr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_PREMULTIPLY_ALPHA_WEBGL,a),this.current=a,this.dirty=!1}}class Sl extends vr{getDefault(){return!1}set(a){if(a===this.current&&!this.dirty)return;const u=this.gl;u.pixelStorei(u.UNPACK_FLIP_Y_WEBGL,a),this.current=a,this.dirty=!1}}class fc extends vr{constructor(a,u){super(a),this.context=a,this.parent=u}getDefault(){return null}}class g extends fc{setDirty(){this.dirty=!0}set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,a,0),this.current=a,this.dirty=!1}}class E extends fc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}class R extends fc{set(a){if(a===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const u=this.gl;u.framebufferRenderbuffer(u.FRAMEBUFFER,u.DEPTH_STENCIL_ATTACHMENT,u.RENDERBUFFER,a),this.current=a,this.dirty=!1}}const J="Framebuffer is not complete";class he{constructor(a,u,y,b,j){this.context=a,this.width=u,this.height=y;const I=a.gl,F=this.framebuffer=I.createFramebuffer();if(this.colorAttachment=new g(a,F),b)this.depthAttachment=j?new R(a,F):new E(a,F);else if(j)throw new Error("Stencil cannot be set without depth");if(I.checkFramebufferStatus(I.FRAMEBUFFER)!==I.FRAMEBUFFER_COMPLETE)throw new Error(J)}destroy(){const a=this.context.gl,u=this.colorAttachment.get();if(u&&a.deleteTexture(u),this.depthAttachment){const y=this.depthAttachment.get();y&&a.deleteRenderbuffer(y)}a.deleteFramebuffer(this.framebuffer)}}class Te{constructor(a){var u,y;if(this.gl=a,this.clearColor=new ro(this),this.clearDepth=new oc(this),this.clearStencil=new Ws(this),this.colorMask=new _l(this),this.depthMask=new Ko(this),this.stencilMask=new bl(this),this.stencilFunc=new sc(this),this.stencilOp=new Di(this),this.stencilTest=new lc(this),this.depthRange=new Hs(this),this.depthTest=new zu(this),this.depthFunc=new Xo(this),this.blend=new Fu(this),this.blendFunc=new io(this),this.blendColor=new cc(this),this.blendEquation=new Yc(this),this.cullFace=new uc(this),this.cullFaceSide=new dc(this),this.frontFace=new ua(this),this.program=new wl(this),this.activeTexture=new Jc(this),this.viewport=new Jn(this),this.bindFramebuffer=new Ld(this),this.bindRenderbuffer=new Qc(this),this.bindTexture=new Dh(this),this.bindVertexBuffer=new hc(this),this.bindElementBuffer=new Oh(this),this.bindVertexArray=new Gr(this),this.pixelStoreUnpack=new zd(this),this.pixelStoreUnpackPremultiplyAlpha=new Bu(this),this.pixelStoreUnpackFlipY=new Sl(this),this.extTextureFilterAnisotropic=a.getExtension("EXT_texture_filter_anisotropic")||a.getExtension("MOZ_EXT_texture_filter_anisotropic")||a.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=a.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.maxTextureSize=a.getParameter(a.MAX_TEXTURE_SIZE),Jr(a)){this.HALF_FLOAT=a.HALF_FLOAT;const b=a.getExtension("EXT_color_buffer_half_float");this.RGBA16F=(u=a.RGBA16F)!==null&&u!==void 0?u:b?.RGBA16F_EXT,this.RGB16F=(y=a.RGB16F)!==null&&y!==void 0?y:b?.RGB16F_EXT,a.getExtension("EXT_color_buffer_float")}else{a.getExtension("EXT_color_buffer_half_float"),a.getExtension("OES_texture_half_float_linear");const b=a.getExtension("OES_texture_half_float");this.HALF_FLOAT=b?.HALF_FLOAT_OES}}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArray.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(a,u){return new kh(this,a,u)}createVertexBuffer(a,u,y){return new Nh(this,a,u,y)}createRenderbuffer(a,u,y){const b=this.gl,j=b.createRenderbuffer();return this.bindRenderbuffer.set(j),b.renderbufferStorage(b.RENDERBUFFER,a,u,y),this.bindRenderbuffer.set(null),j}createFramebuffer(a,u,y,b){return new he(this,a,u,y,b)}clear({color:a,depth:u,stencil:y}){const b=this.gl;let j=0;a&&(j|=b.COLOR_BUFFER_BIT,this.clearColor.set(a),this.colorMask.set([!0,!0,!0,!0])),u!==void 0&&(j|=b.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(u),this.depthMask.set(!0)),y!==void 0&&(j|=b.STENCIL_BUFFER_BIT,this.clearStencil.set(y),this.stencilMask.set(255)),b.clear(j)}setCullFace(a){a.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(a.mode),this.frontFace.set(a.frontFace))}setDepthMode(a){a.func!==this.gl.ALWAYS||a.mask?(this.depthTest.set(!0),this.depthFunc.set(a.func),this.depthMask.set(a.mask),this.depthRange.set(a.range)):this.depthTest.set(!1)}setStencilMode(a){a.test.func!==this.gl.ALWAYS||a.mask?(this.stencilTest.set(!0),this.stencilMask.set(a.mask),this.stencilOp.set([a.fail,a.depthFail,a.pass]),this.stencilFunc.set({func:a.test.func,ref:a.ref,mask:a.test.mask})):this.stencilTest.set(!1)}setColorMode(a){o.bR(a.blendFunction,yr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(a.blendFunction),this.blendColor.set(a.blendColor)),this.colorMask.set(a.mask)}createVertexArray(){var a;return Jr(this.gl)?this.gl.createVertexArray():(a=this.gl.getExtension("OES_vertex_array_object"))===null||a===void 0?void 0:a.createVertexArrayOES()}deleteVertexArray(a){var u;return Jr(this.gl)?this.gl.deleteVertexArray(a):(u=this.gl.getExtension("OES_vertex_array_object"))===null||u===void 0?void 0:u.deleteVertexArrayOES(a)}unbindVAO(){this.bindVertexArray.set(null)}}let Xe;function mt(C,a,u,y,b){const j=C.context,I=C.transform,F=j.gl,U=C.useProgram("collisionBox"),Y=[];let re=0,ce=0;for(let Ie=0;Ie<y.length;Ie++){const ze=y[Ie],He=a.getTile(ze).getBucket(u);if(!He)continue;const Fe=b?He.textCollisionBox:He.iconCollisionBox,Ge=He.collisionCircleArray;Ge.length>0&&(Y.push({circleArray:Ge,circleOffset:ce,coord:ze}),re+=Ge.length/4,ce=re),Fe&&U.draw(j,F.LINES,Un.disabled,rr.disabled,C.colorModeForRenderPass(),Zn.disabled,Ea(C.transform),C.style.map.terrain&&C.style.map.terrain.getTerrainData(ze),I.getProjectionData({overscaledTileID:ze,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),u.id,Fe.layoutVertexBuffer,Fe.indexBuffer,Fe.segments,null,C.transform.zoom,null,null,Fe.collisionVertexBuffer)}if(!b||!Y.length)return;const le=C.useProgram("collisionCircle"),ge=new o.ca;ge.resize(4*re),ge._trim();let be=0;for(const Ie of Y)for(let ze=0;ze<Ie.circleArray.length/4;ze++){const He=4*ze,Fe=Ie.circleArray[He+0],Ge=Ie.circleArray[He+1],Ye=Ie.circleArray[He+2],Ue=Ie.circleArray[He+3];ge.emplace(be++,Fe,Ge,Ye,Ue,0),ge.emplace(be++,Fe,Ge,Ye,Ue,1),ge.emplace(be++,Fe,Ge,Ye,Ue,2),ge.emplace(be++,Fe,Ge,Ye,Ue,3)}(!Xe||Xe.length<2*re)&&(Xe=(function(Ie){const ze=2*Ie,He=new o.cc;He.resize(ze),He._trim();for(let Fe=0;Fe<ze;Fe++){const Ge=6*Fe;He.uint16[Ge+0]=4*Fe+0,He.uint16[Ge+1]=4*Fe+1,He.uint16[Ge+2]=4*Fe+2,He.uint16[Ge+3]=4*Fe+2,He.uint16[Ge+4]=4*Fe+3,He.uint16[Ge+5]=4*Fe+0}return He})(re));const Me=j.createIndexBuffer(Xe,!0),Ne=j.createVertexBuffer(ge,o.cb.members,!0);for(const Ie of Y){const ze=Mf(C.transform);le.draw(j,F.TRIANGLES,Un.disabled,rr.disabled,C.colorModeForRenderPass(),Zn.disabled,ze,C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ie.coord),null,u.id,Ne,Me,o.aX.simpleSegment(0,2*Ie.circleOffset,Ie.circleArray.length,Ie.circleArray.length/2),null,C.transform.zoom,null,null,null)}Ne.destroy(),Me.destroy()}const Pt=o.ar(new Float32Array(16));function Vt(C,a,u,y,b,j){const{horizontalAlign:I,verticalAlign:F}=o.aS(C);return new o.P((-(I-.5)*a/b+y[0])*j,(-(F-.5)*u/b+y[1])*j)}function sn(C,a,u,y,b,j){const I=a.tileAnchorPoint.add(new o.P(a.translation[0],a.translation[1]));if(a.pitchWithMap){let F=y.mult(j);u||(F=F.rotate(-b));const U=I.add(F);return Wn(U.x,U.y,a.pitchedLabelPlaneMatrix,a.getElevation).point}if(u){const F=xr(a.tileAnchorPoint.x+1,a.tileAnchorPoint.y,a).point.sub(C),U=Math.atan(F.y/F.x)+(F.x<0?Math.PI:0);return C.add(y.rotate(U))}return C.add(y)}function On(C,a,u,y,b,j,I,F,U,Y,re,ce){const le=C.text.placedSymbolArray,ge=C.text.dynamicLayoutVertexArray,be=C.icon.dynamicLayoutVertexArray,Me={};ge.clear();for(let Ne=0;Ne<le.length;Ne++){const Ie=le.get(Ne),ze=Ie.hidden||!Ie.crossTileID||C.allowVerticalPlacement&&!Ie.placedOrientation?null:y[Ie.crossTileID];if(ze){const He=new o.P(Ie.anchorX,Ie.anchorY),Fe={getElevation:ce,width:b.width,height:b.height,pitchedLabelPlaneMatrix:j,pitchWithMap:u,transform:b,tileAnchorPoint:He,translation:Y,unwrappedTileID:re},Ge=u?Go(He.x,He.y,Fe):xr(He.x,He.y,Fe),Ye=$c(b.cameraToCenterDistance,Ge.signedDistanceFromCamera);let Ue=o.aA(C.textSizeData,F,Ie)*Ye/o.aM;u&&(Ue*=C.tilePixelRatio/I);const{width:st,height:bt,anchor:yt,textOffset:vt,textBoxScale:xt}=ze,qt=Vt(yt,st,bt,vt,xt,Ue),Gt=b.getPitchedTextCorrection(He.x+Y[0],He.y+Y[1],re),Rt=sn(Ge.point,Fe,a,qt,-b.bearingInRadians,Gt),Yt=C.allowVerticalPlacement&&Ie.placedOrientation===o.az.vertical?Math.PI/2:0;for(let $n=0;$n<Ie.numGlyphs;$n++)o.aG(ge,Rt,Yt);U&&Ie.associatedIconIndex>=0&&(Me[Ie.associatedIconIndex]={shiftedAnchor:Rt,angle:Yt})}else jr(Ie.numGlyphs,ge)}if(U){be.clear();const Ne=C.icon.placedSymbolArray;for(let Ie=0;Ie<Ne.length;Ie++){const ze=Ne.get(Ie);if(ze.hidden)jr(ze.numGlyphs,be);else{const He=Me[Ie];if(He)for(let Fe=0;Fe<ze.numGlyphs;Fe++)o.aG(be,He.shiftedAnchor,He.angle);else jr(ze.numGlyphs,be)}}C.icon.dynamicLayoutVertexBuffer.updateData(be)}C.text.dynamicLayoutVertexBuffer.updateData(ge)}function ir(C,a,u){return u.iconsInText&&a?"symbolTextAndIcon":C?"symbolSDF":"symbolIcon"}function wi(C,a,u,y,b,j,I,F,U,Y,re,ce,le){const ge=C.context,be=ge.gl,Me=C.transform,Ne=F==="map",Ie=U==="map",ze=F!=="viewport"&&u.layout.get("symbol-placement")!=="point",He=Ne&&!Ie&&!ze,Fe=!u.layout.get("symbol-sort-key").isConstant();let Ge=!1;const Ye=C.getDepthModeForSublayer(0,Un.ReadOnly),Ue=u._unevaluatedLayout.hasValue("text-variable-anchor")||u._unevaluatedLayout.hasValue("text-variable-anchor-offset"),st=[],bt=Me.getCircleRadiusCorrection();for(const yt of y){const vt=a.getTile(yt),xt=vt.getBucket(u);if(!xt)continue;const qt=b?xt.text:xt.icon;if(!qt||!qt.segments.get().length||!qt.hasVisibleVertices)continue;const Gt=qt.programConfigurations.get(u.id),Rt=b||xt.sdfIcons,Yt=b?xt.textSizeData:xt.iconSizeData,$n=Ie||Me.pitch!==0,Mr=C.useProgram(ir(Rt,b,xt),Gt),li=o.ay(Yt,Me.zoom),$r=C.style.map.terrain&&C.style.map.terrain.getTerrainData(yt);let ci,Vr,ui,pi,pa=[0,0],Oi=null;if(b)Vr=vt.glyphAtlasTexture,ui=be.LINEAR,ci=vt.glyphAtlasTexture.size,xt.iconsInText&&(pa=vt.imageAtlasTexture.size,Oi=vt.imageAtlasTexture,pi=$n||C.options.rotating||C.options.zooming||Yt.kind==="composite"||Yt.kind==="camera"?be.LINEAR:be.NEAREST);else{const Wr=u.layout.get("icon-size").constantOr(0)!==1||xt.iconsNeedLinear;Vr=vt.imageAtlasTexture,ui=Rt||C.options.rotating||C.options.zooming||Wr||$n?be.LINEAR:be.NEAREST,ci=vt.imageAtlasTexture.size}const Ar=o.aN(vt,1,C.transform.zoom),na=Aa(Ne,C.transform,Ar),Ys=o.N();o.aB(Ys,na);const Il=Ed(Ie,Ne,C.transform,Ar),Js=o.aO(Me,vt,j,I),so=Me.getProjectionData({overscaledTileID:yt,applyGlobeMatrix:!le,applyTerrainMatrix:!0}),xc=Ue&&xt.hasTextData(),Nl=u.layout.get("icon-text-fit")!=="none"&&xc&&xt.hasIconData();if(ze){const Wr=C.style.map.terrain?(Wi,ra)=>C.style.map.terrain.getElevation(yt,Wi,ra):null,Ur=u.layout.get("text-rotation-alignment")==="map";jd(xt,C,b,na,Ys,Ie,Y,Ur,yt.toUnwrapped(),Me.width,Me.height,Js,Wr)}const _c=b&&Ue||Nl,No=ze||_c?Pt:Ie?na:C.transform.clipSpaceToPixelsMatrix,Dl=Rt&&u.paint.get(b?"text-halo-width":"icon-halo-width").constantOr(1)!==0;let xs;xs=Rt?xt.iconsInText?qs(Yt.kind,li,He,Ie,ze,_c,C,No,Il,Js,ci,pa,bt):ac(Yt.kind,li,He,Ie,ze,_c,C,No,Il,Js,b,ci,0,bt):xl(Yt.kind,li,He,Ie,ze,_c,C,No,Il,Js,b,ci,bt);const _s={program:Mr,buffers:qt,uniformValues:xs,projectionData:so,atlasTexture:Vr,atlasTextureIcon:Oi,atlasInterpolation:ui,atlasInterpolationIcon:pi,isSDF:Rt,hasHalo:Dl};if(Fe&&xt.canOverlap){Ge=!0;const Wr=qt.segments.get();for(const Ur of Wr)st.push({segments:new o.aX([Ur]),sortKey:Ur.sortKey,state:_s,terrainData:$r})}else st.push({segments:qt.segments,sortKey:0,state:_s,terrainData:$r})}Ge&&st.sort(((yt,vt)=>yt.sortKey-vt.sortKey));for(const yt of st){const vt=yt.state;if(ge.activeTexture.set(be.TEXTURE0),vt.atlasTexture.bind(vt.atlasInterpolation,be.CLAMP_TO_EDGE),vt.atlasTextureIcon&&(ge.activeTexture.set(be.TEXTURE1),vt.atlasTextureIcon&&vt.atlasTextureIcon.bind(vt.atlasInterpolationIcon,be.CLAMP_TO_EDGE)),vt.isSDF){const xt=vt.uniformValues;vt.hasHalo&&(xt.u_is_halo=1,Si(vt.buffers,yt.segments,u,C,vt.program,Ye,re,ce,xt,vt.projectionData,yt.terrainData)),xt.u_is_halo=0}Si(vt.buffers,yt.segments,u,C,vt.program,Ye,re,ce,vt.uniformValues,vt.projectionData,yt.terrainData)}}function Si(C,a,u,y,b,j,I,F,U,Y,re){const ce=y.context;b.draw(ce,ce.gl.TRIANGLES,j,I,F,Zn.backCCW,U,re,Y,u.id,C.layoutVertexBuffer,C.indexBuffer,a,u.paint,y.transform.zoom,C.programConfigurations.get(u.id),C.dynamicLayoutVertexBuffer,C.opacityVertexBuffer)}function Fa(C,a,u,y,b){const j=C.context,I=j.gl,F=rr.disabled,U=new yr([I.ONE,I.ONE],o.bp.transparent,[!0,!0,!0,!0]),Y=a.getBucket(u);if(!Y)return;const re=y.key;let ce=u.heatmapFbos.get(re);ce||(ce=ds(j,a.tileSize,a.tileSize),u.heatmapFbos.set(re,ce)),j.bindFramebuffer.set(ce.framebuffer),j.viewport.set([0,0,a.tileSize,a.tileSize]),j.clear({color:o.bp.transparent});const le=Y.programConfigurations.get(u.id),ge=C.useProgram("heatmap",le,!b),be=C.transform.getProjectionData({overscaledTileID:a.tileID,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Me=C.style.map.terrain.getTerrainData(y);ge.draw(j,I.TRIANGLES,Un.disabled,F,U,Zn.disabled,Us(a,C.transform.zoom,u.paint.get("heatmap-intensity"),1),Me,be,u.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,u.paint,C.transform.zoom,le)}function ja(C,a,u,y,b){const j=C.context,I=j.gl,F=C.transform;j.setColorMode(C.colorModeForRenderPass());const U=eu(j,a),Y=u.key,re=a.heatmapFbos.get(Y);if(!re)return;j.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,re.colorAttachment.get()),j.activeTexture.set(I.TEXTURE1),U.bind(I.LINEAR,I.CLAMP_TO_EDGE);const ce=F.getProjectionData({overscaledTileID:u,applyTerrainMatrix:b,applyGlobeMatrix:!y});C.useProgram("heatmapTexture").draw(j,I.TRIANGLES,Un.disabled,rr.disabled,C.colorModeForRenderPass(),Zn.disabled,Mh(C,a,0,1),null,ce,a.id,C.rasterBoundsBuffer,C.quadTriangleIndexBuffer,C.rasterBoundsSegments,a.paint,F.zoom),re.destroy(),a.heatmapFbos.delete(Y)}function ds(C,a,u){var y,b;const j=C.gl,I=j.createTexture();j.bindTexture(j.TEXTURE_2D,I),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_S,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_WRAP_T,j.CLAMP_TO_EDGE),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MIN_FILTER,j.LINEAR),j.texParameteri(j.TEXTURE_2D,j.TEXTURE_MAG_FILTER,j.LINEAR);const F=(y=C.HALF_FLOAT)!==null&&y!==void 0?y:j.UNSIGNED_BYTE,U=(b=C.RGBA16F)!==null&&b!==void 0?b:j.RGBA;j.texImage2D(j.TEXTURE_2D,0,U,a,u,0,j.RGBA,F,null);const Y=C.createFramebuffer(a,u,!1,!1);return Y.colorAttachment.set(I),Y}function eu(C,a){return a.colorRampTexture||(a.colorRampTexture=new o.T(C,a.colorRamp,C.gl.RGBA)),a.colorRampTexture}function Zs(C,a,u,y,b,j,I,F){let U=256;if(b.stepInterpolant){const Y=a.getSource().maxzoom,re=I.canonical.z===Y?Math.ceil(1<<C.transform.maxZoom-I.canonical.z):1;U=o.an(o.ce(j.maxLineLength/o.a5*1024*re),256,u.maxTextureSize)}return F.gradient=o.cf({expression:b.gradientExpression(),evaluationKey:"lineProgress",resolution:U,image:F.gradient||void 0,clips:j.lineClipsArray}),F.texture?F.texture.update(F.gradient):F.texture=new o.T(u,F.gradient,y.RGBA),F.version=b.gradientVersion,F.texture}function Rh(C,a,u,y,b){C.activeTexture.set(a.TEXTURE0),u.imageAtlasTexture.bind(a.LINEAR,a.CLAMP_TO_EDGE),y.updatePaintBuffers(b)}function Rr(C,a,u,y,b,j){(b||C.lineAtlas.dirty)&&(a.activeTexture.set(u.TEXTURE0),C.lineAtlas.bind(a)),y.updatePaintBuffers(j)}function da(C,a,u,y,b,j,I){const F=j.gradients[b.id];let U=F.texture;b.gradientVersion!==F.version&&(U=Zs(C,a,u,y,b,j,I,F)),u.activeTexture.set(y.TEXTURE0),U.bind(b.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE)}function Ui(C,a,u,y,b,j,I,F,U){const Y=j.gradients[b.id];let re=Y.texture;b.gradientVersion!==Y.version&&(re=Zs(C,a,u,y,b,j,I,Y)),u.activeTexture.set(y.TEXTURE0),re.bind(b.stepInterpolant?y.NEAREST:y.LINEAR,y.CLAMP_TO_EDGE),u.activeTexture.set(y.TEXTURE1),C.lineAtlas.bind(u),F.updatePaintBuffers(U)}function wr(C,a,u,y,b){if(!u||!y||!y.imageAtlas)return;const j=y.imageAtlas.patternPositions;let I=j[u.to.toString()],F=j[u.from.toString()];if(!I&&F&&(I=F),!F&&I&&(F=I),!I||!F){const U=b.getPaintProperty(a);I=j[U],F=j[U]}I&&F&&C.setConstantPatternPositions(I,F)}function hs(C,a,u,y,b,j,I,F){const U=C.context.gl,Y="fill-pattern",re=u.paint.get(Y),ce=re&&re.constantOr(1),le=u.getCrossfadeParameters();let ge,be,Me,Ne,Ie;const ze=C.transform,He=u.paint.get("fill-translate"),Fe=u.paint.get("fill-translate-anchor");I?(be=ce&&!u.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",ge=U.LINES):(be=ce?"fillPattern":"fill",ge=U.TRIANGLES);const Ge=re.constantOr(null);for(const Ye of y){const Ue=a.getTile(Ye);if(ce&&!Ue.patternsLoaded())continue;const st=Ue.getBucket(u);if(!st)continue;const bt=st.programConfigurations.get(u.id),yt=C.useProgram(be,bt),vt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ye);ce&&(C.context.activeTexture.set(U.TEXTURE0),Ue.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),bt.updatePaintBuffers(le)),wr(bt,Y,Ge,Ue,u);const xt=ze.getProjectionData({overscaledTileID:Ye,applyGlobeMatrix:!F,applyTerrainMatrix:!0}),qt=o.aO(ze,Ue,He,Fe);if(I){Ne=st.indexBuffer2,Ie=st.segments2;const Rt=[U.drawingBufferWidth,U.drawingBufferHeight];Me=be==="fillOutlinePattern"&&ce?tc(C,le,Ue,Rt,qt):jh(Rt,qt)}else Ne=st.indexBuffer,Ie=st.segments,Me=ce?Vs(C,le,Ue,qt):{u_fill_translate:qt};const Gt=C.stencilModeForClipping(Ye);yt.draw(C.context,ge,b,Gt,j,Zn.backCCW,Me,vt,xt,u.id,st.layoutVertexBuffer,Ne,Ie,u.paint,C.transform.zoom,bt)}}function Fd(C,a,u,y,b,j,I,F){const U=C.context,Y=U.gl,re="fill-extrusion-pattern",ce=u.paint.get(re),le=ce.constantOr(1),ge=u.getCrossfadeParameters(),be=u.paint.get("fill-extrusion-opacity"),Me=ce.constantOr(null),Ne=C.transform;for(const Ie of y){const ze=a.getTile(Ie),He=ze.getBucket(u);if(!He)continue;const Fe=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ie),Ge=He.programConfigurations.get(u.id),Ye=C.useProgram(le?"fillExtrusionPattern":"fillExtrusion",Ge);le&&(C.context.activeTexture.set(Y.TEXTURE0),ze.imageAtlasTexture.bind(Y.LINEAR,Y.CLAMP_TO_EDGE),Ge.updatePaintBuffers(ge));const Ue=Ne.getProjectionData({overscaledTileID:Ie,applyGlobeMatrix:!F,applyTerrainMatrix:!0});wr(Ge,re,Me,ze,u);const st=o.aO(Ne,ze,u.paint.get("fill-extrusion-translate"),u.paint.get("fill-extrusion-translate-anchor")),bt=u.paint.get("fill-extrusion-vertical-gradient"),yt=le?Dd(C,bt,be,st,Ie,ge,ze):Ho(C,bt,be,st);Ye.draw(U,U.gl.TRIANGLES,b,j,I,Zn.backCCW,yt,Fe,Ue,u.id,He.layoutVertexBuffer,He.indexBuffer,He.segments,u.paint,C.transform.zoom,Ge,C.style.map.terrain&&He.centroidVertexBuffer)}}function Tl(C,a,u,y,b,j,I,F,U){var Y;const re=C.style.projection,ce=C.context,le=C.transform,ge=ce.gl,be=[`#define NUM_ILLUMINATION_SOURCES ${u.paint.get("hillshade-highlight-color").values.length}`],Me=C.useProgram("hillshade",null,!1,be),Ne=!C.options.moving;for(const Ie of y){const ze=a.getTile(Ie),He=ze.fbo;if(!He)continue;const Fe=re.getMeshFromTileID(ce,Ie.canonical,F,!0,"raster"),Ge=(Y=C.style.map.terrain)===null||Y===void 0?void 0:Y.getTerrainData(Ie);ce.activeTexture.set(ge.TEXTURE0),ge.bindTexture(ge.TEXTURE_2D,He.colorAttachment.get());const Ye=le.getProjectionData({overscaledTileID:Ie,aligned:Ne,applyGlobeMatrix:!U,applyTerrainMatrix:!0});Me.draw(ce,ge.TRIANGLES,j,b[Ie.overscaledZ],I,Zn.backCCW,nc(C,ze,u),Ge,Ye,u.id,Fe.vertexBuffer,Fe.indexBuffer,Fe.segments)}}function Yo(C,a,u,y,b,j,I,F,U){var Y;const re=C.style.projection,ce=C.context,le=C.transform,ge=ce.gl,be=C.useProgram("colorRelief"),Me=!C.options.moving;let Ne=!0,Ie=0;for(const ze of y){const He=a.getTile(ze),Fe=He.dem;if(Ne){const yt=ge.getParameter(ge.MAX_TEXTURE_SIZE),{elevationTexture:vt,colorTexture:xt}=u.getColorRampTextures(ce,yt,Fe.getUnpackVector());ce.activeTexture.set(ge.TEXTURE1),vt.bind(ge.NEAREST,ge.CLAMP_TO_EDGE),ce.activeTexture.set(ge.TEXTURE4),xt.bind(ge.LINEAR,ge.CLAMP_TO_EDGE),Ne=!1,Ie=vt.size[0]}if(!Fe||!Fe.data)continue;const Ge=Fe.stride,Ye=Fe.getPixels();if(ce.activeTexture.set(ge.TEXTURE0),ce.pixelStoreUnpackPremultiplyAlpha.set(!1),He.demTexture=He.demTexture||C.getTileTexture(Ge),He.demTexture){const yt=He.demTexture;yt.update(Ye,{premultiply:!1}),yt.bind(ge.LINEAR,ge.CLAMP_TO_EDGE)}else He.demTexture=new o.T(ce,Ye,ge.RGBA,{premultiply:!1}),He.demTexture.bind(ge.LINEAR,ge.CLAMP_TO_EDGE);const Ue=re.getMeshFromTileID(ce,ze.canonical,F,!0,"raster"),st=(Y=C.style.map.terrain)===null||Y===void 0?void 0:Y.getTerrainData(ze),bt=le.getProjectionData({overscaledTileID:ze,aligned:Me,applyGlobeMatrix:!U,applyTerrainMatrix:!0});be.draw(ce,ge.TRIANGLES,j,b[ze.overscaledZ],I,Zn.backCCW,kf(u,He.dem,Ie),st,bt,u.id,Ue.vertexBuffer,Ue.indexBuffer,Ue.segments)}}const ao=[new o.P(0,0),new o.P(o.a5,0),new o.P(o.a5,o.a5),new o.P(0,o.a5)];function Eo(C,a,u,y,b,j,I,F,U=!1,Y=!1){const re=y[y.length-1].overscaledZ,ce=C.context,le=ce.gl,ge=C.useProgram("raster"),be=C.transform,Me=C.style.projection,Ne=C.colorModeForRenderPass(),Ie=!C.options.moving,ze=u.paint.get("raster-opacity"),He=u.paint.get("raster-resampling"),Fe=u.paint.get("raster-fade-duration"),Ge=!!C.style.map.terrain;for(const Ye of y){const Ue=C.getDepthModeForSublayer(Ye.overscaledZ-re,ze===1?Un.ReadWrite:Un.ReadOnly,le.LESS),st=a.getTile(Ye),bt=He==="nearest"?le.NEAREST:le.LINEAR;ce.activeTexture.set(le.TEXTURE0),st.texture.bind(bt,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),ce.activeTexture.set(le.TEXTURE1);const{parentTile:yt,parentScaleBy:vt,parentTopLeft:xt,fadeValues:qt}=$u(st,a,Fe,Ge);st.fadeOpacity=qt.tileOpacity,yt?(yt.fadeOpacity=qt.parentTileOpacity,yt.texture.bind(bt,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST)):st.texture.bind(bt,le.CLAMP_TO_EDGE,le.LINEAR_MIPMAP_NEAREST),st.texture.useMipmap&&ce.extTextureFilterAnisotropic&&C.transform.pitch>20&&le.texParameterf(le.TEXTURE_2D,ce.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,ce.extTextureFilterAnisotropicMax);const Gt=C.style.map.terrain&&C.style.map.terrain.getTerrainData(Ye),Rt=be.getProjectionData({overscaledTileID:Ye,aligned:Ie,applyGlobeMatrix:!Y,applyTerrainMatrix:!0}),Yt=Kc(xt,vt,qt.fadeMix,u,F),$n=Me.getMeshFromTileID(ce,Ye.canonical,j,I,"raster");ge.draw(ce,le.TRIANGLES,Ue,b?b[Ye.overscaledZ]:rr.disabled,Ne,U?Zn.frontCCW:Zn.backCCW,Yt,Gt,Rt,u.id,$n.vertexBuffer,$n.indexBuffer,$n.segments)}}function $u(C,a,u,y){const b={parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:{tileOpacity:1,parentTileOpacity:1,fadeMix:{opacity:1,mix:0}}};if(u===0||y)return b;if(C.fadingParentID){const j=a.getLoadedTile(C.fadingParentID);if(!j)return b;const I=Math.pow(2,j.tileID.overscaledZ-C.tileID.overscaledZ),F=[C.tileID.canonical.x*I%1,C.tileID.canonical.y*I%1],U=(function(Y,re,ce){const le=$(),ge=(le-re.timeAdded)/ce,be=Y.fadingDirection===Oe.Incoming,Me=o.an((le-Y.timeAdded)/ce,0,1),Ne=o.an(1-ge,0,1),Ie=be?Me:Ne;return{tileOpacity:Ie,parentTileOpacity:be?Ne:Me,fadeMix:{opacity:1,mix:1-Ie}}})(C,j,u);return{parentTile:j,parentScaleBy:I,parentTopLeft:F,fadeValues:U}}if(C.selfFading){const j=(function(I,F){const U=($()-I.timeAdded)/F,Y=o.an(U,0,1);return{tileOpacity:Y,fadeMix:{opacity:Y,mix:0}}})(C,u);return{parentTile:null,parentScaleBy:1,parentTopLeft:[0,0],fadeValues:j}}return b}const Df=new o.bp(1,0,0,1),Vu=new o.bp(0,1,0,1),pc=new o.bp(0,0,1,1),oi=new o.bp(1,0,1,1),Sr=new o.bp(0,1,1,1);function Pl(C,a,u,y){fa(C,0,a+u/2,C.transform.width,u,y)}function ha(C,a,u,y){fa(C,a-u/2,0,u,C.transform.height,y)}function fa(C,a,u,y,b,j){const I=C.context,F=I.gl;F.enable(F.SCISSOR_TEST),F.scissor(a*C.pixelRatio,u*C.pixelRatio,y*C.pixelRatio,b*C.pixelRatio),I.clear({color:j}),F.disable(F.SCISSOR_TEST)}function tu(C,a,u){const y=C.context,b=y.gl,j=C.useProgram("debug"),I=Un.disabled,F=rr.disabled,U=C.colorModeForRenderPass(),Y="$debug",re=C.style.map.terrain&&C.style.map.terrain.getTerrainData(u);y.activeTexture.set(b.TEXTURE0);const ce=a.getTileByID(u.key).latestRawTileData,le=Math.floor((ce&&ce.byteLength||0)/1024),ge=a.getTile(u).tileSize,be=512/Math.min(ge,512)*(u.overscaledZ/C.transform.zoom)*.5;let Me=u.canonical.toString();u.overscaledZ!==u.canonical.z&&(Me+=` => ${u.overscaledZ}`),(function(Ie,ze){Ie.initDebugOverlayCanvas();const He=Ie.debugOverlayCanvas,Fe=Ie.context.gl,Ge=Ie.debugOverlayCanvas.getContext("2d");Ge.clearRect(0,0,He.width,He.height),Ge.shadowColor="white",Ge.shadowBlur=2,Ge.lineWidth=1.5,Ge.strokeStyle="white",Ge.textBaseline="top",Ge.font="bold 36px Open Sans, sans-serif",Ge.fillText(ze,5,5),Ge.strokeText(ze,5,5),Ie.debugOverlayTexture.update(He),Ie.debugOverlayTexture.bind(Fe.LINEAR,Fe.CLAMP_TO_EDGE)})(C,`${Me} ${le}kB`);const Ne=C.transform.getProjectionData({overscaledTileID:u,applyGlobeMatrix:!0,applyTerrainMatrix:!0});j.draw(y,b.TRIANGLES,I,F,yr.alphaBlended,Zn.disabled,us(o.bp.transparent,be),null,Ne,Y,C.debugBuffer,C.quadTriangleIndexBuffer,C.debugSegments),j.draw(y,b.LINE_STRIP,I,F,U,Zn.disabled,us(o.bp.red),re,Ne,Y,C.debugBuffer,C.tileBorderIndexBuffer,C.debugSegments)}function nu(C,a,u,y){const{isRenderingGlobe:b}=y,j=C.context,I=j.gl,F=C.transform,U=C.colorModeForRenderPass(),Y=C.getDepthModeFor3D(),re=C.useProgram("terrain");j.bindFramebuffer.set(null),j.viewport.set([0,0,C.width,C.height]);for(const ce of u){const le=a.getTerrainMesh(ce.tileID),ge=C.renderToTexture.getTexture(ce),be=a.getTerrainData(ce.tileID);j.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,ge.texture);const Me=a.getMeshFrameDelta(F.zoom),Ne=F.calculateFogMatrix(ce.tileID.toUnwrapped()),Ie=jf(Me,Ne,C.style.sky,F.pitch,b),ze=F.getProjectionData({overscaledTileID:ce.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});re.draw(j,I.TRIANGLES,Y,rr.disabled,U,Zn.backCCW,Ie,be,ze,"terrain",le.vertexBuffer,le.indexBuffer,le.segments)}}function Ba(C,a){if(!a.mesh){const u=new o.aW;u.emplaceBack(-1,-1),u.emplaceBack(1,-1),u.emplaceBack(1,1),u.emplaceBack(-1,1);const y=new o.aY;y.emplaceBack(0,1,2),y.emplaceBack(0,2,3),a.mesh=new Pr(C.createVertexBuffer(u,Da.members),C.createIndexBuffer(y),o.aX.simpleSegment(0,0,u.length,y.length))}return a.mesh}class Lh{constructor(a,u){this.context=new Te(a),this.transform=u,this._tileTextures={},this.terrainFacilitator={dirty:!0,matrix:o.ar(new Float64Array(16)),renderTime:0},this.setup(),this.numSublayers=oa.maxOverzooming+oa.maxUnderzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new $i}resize(a,u,y){if(this.width=Math.floor(a*y),this.height=Math.floor(u*y),this.pixelRatio=y,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const b of this.style._order)this.style._layers[b].resize()}setup(){const a=this.context,u=new o.aW;u.emplaceBack(0,0),u.emplaceBack(o.a5,0),u.emplaceBack(0,o.a5),u.emplaceBack(o.a5,o.a5),this.tileExtentBuffer=a.createVertexBuffer(u,Da.members),this.tileExtentSegments=o.aX.simpleSegment(0,0,4,2);const y=new o.aW;y.emplaceBack(0,0),y.emplaceBack(o.a5,0),y.emplaceBack(0,o.a5),y.emplaceBack(o.a5,o.a5),this.debugBuffer=a.createVertexBuffer(y,Da.members),this.debugSegments=o.aX.simpleSegment(0,0,4,5);const b=new o.ch;b.emplaceBack(0,0,0,0),b.emplaceBack(o.a5,0,o.a5,0),b.emplaceBack(0,o.a5,0,o.a5),b.emplaceBack(o.a5,o.a5,o.a5,o.a5),this.rasterBoundsBuffer=a.createVertexBuffer(b,Up.members),this.rasterBoundsSegments=o.aX.simpleSegment(0,0,4,2);const j=new o.aW;j.emplaceBack(0,0),j.emplaceBack(o.a5,0),j.emplaceBack(0,o.a5),j.emplaceBack(o.a5,o.a5),this.rasterBoundsBufferPosOnly=a.createVertexBuffer(j,Da.members),this.rasterBoundsSegmentsPosOnly=o.aX.simpleSegment(0,0,4,5);const I=new o.aW;I.emplaceBack(0,0),I.emplaceBack(1,0),I.emplaceBack(0,1),I.emplaceBack(1,1),this.viewportBuffer=a.createVertexBuffer(I,Da.members),this.viewportSegments=o.aX.simpleSegment(0,0,4,2);const F=new o.ci;F.emplaceBack(0),F.emplaceBack(1),F.emplaceBack(3),F.emplaceBack(2),F.emplaceBack(0),this.tileBorderIndexBuffer=a.createIndexBuffer(F);const U=new o.aY;U.emplaceBack(1,0,2),U.emplaceBack(1,2,3),this.quadTriangleIndexBuffer=a.createIndexBuffer(U);const Y=this.context.gl;this.stencilClearMode=new rr({func:Y.ALWAYS,mask:0},0,255,Y.ZERO,Y.ZERO,Y.ZERO),this.tileExtentMesh=new Pr(this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}clearStencil(){const a=this.context,u=a.gl;this.nextStencilID=1,this.currentStencilSource=void 0;const y=o.N();o.c7(y,0,this.width,this.height,0,0,1),o.Q(y,y,[u.drawingBufferWidth,u.drawingBufferHeight,0]);const b={mainMatrix:y,tileMercatorCoords:[0,0,1,1],clippingPlane:[0,0,0,0],projectionTransition:0,fallbackMatrix:y};this.useProgram("clippingMask",null,!0).draw(a,u.TRIANGLES,Un.disabled,this.stencilClearMode,yr.disabled,Zn.disabled,null,null,b,"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}_renderTileClippingMasks(a,u,y){if(this.currentStencilSource===a.source||!a.isTileClipped()||!u||!u.length)return;this.currentStencilSource=a.source,this.nextStencilID+u.length>256&&this.clearStencil();const b=this.context;b.setColorMode(yr.disabled),b.setDepthMode(Un.disabled);const j={};for(const I of u)j[I.key]=this.nextStencilID++;this._renderTileMasks(j,u,y,!0),this._renderTileMasks(j,u,y,!1),this._tileClippingMaskIDs=j}_renderTileMasks(a,u,y,b){const j=this.context,I=j.gl,F=this.style.projection,U=this.transform,Y=this.useProgram("clippingMask");for(const re of u){const ce=a[re.key],le=this.style.map.terrain&&this.style.map.terrain.getTerrainData(re),ge=F.getMeshFromTileID(this.context,re.canonical,b,!0,"stencil"),be=U.getProjectionData({overscaledTileID:re,applyGlobeMatrix:!y,applyTerrainMatrix:!0});Y.draw(j,I.TRIANGLES,Un.disabled,new rr({func:I.ALWAYS,mask:0},ce,255,I.KEEP,I.KEEP,I.REPLACE),yr.disabled,y?Zn.disabled:Zn.backCCW,null,le,be,"$clipping",ge.vertexBuffer,ge.indexBuffer,ge.segments)}}_renderTilesDepthBuffer(){const a=this.context,u=a.gl,y=this.style.projection,b=this.transform,j=this.useProgram("depth"),I=this.getDepthModeFor3D(),F=er(b,{tileSize:b.tileSize});for(const U of F){const Y=this.style.map.terrain&&this.style.map.terrain.getTerrainData(U),re=y.getMeshFromTileID(this.context,U.canonical,!0,!0,"raster"),ce=b.getProjectionData({overscaledTileID:U,applyGlobeMatrix:!0,applyTerrainMatrix:!0});j.draw(a,u.TRIANGLES,I,rr.disabled,yr.disabled,Zn.backCCW,null,Y,ce,"$clipping",re.vertexBuffer,re.indexBuffer,re.segments)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const a=this.nextStencilID++,u=this.context.gl;return new rr({func:u.NOTEQUAL,mask:255},a,255,u.KEEP,u.KEEP,u.REPLACE)}stencilModeForClipping(a){const u=this.context.gl;return new rr({func:u.EQUAL,mask:255},this._tileClippingMaskIDs[a.key],0,u.KEEP,u.KEEP,u.REPLACE)}getStencilConfigForOverlapAndUpdateStencilID(a){const u=this.context.gl,y=a.sort(((I,F)=>F.overscaledZ-I.overscaledZ)),b=y[y.length-1].overscaledZ,j=y[0].overscaledZ-b+1;if(j>1){this.currentStencilSource=void 0,this.nextStencilID+j>256&&this.clearStencil();const I={};for(let F=0;F<j;F++)I[F+b]=new rr({func:u.GEQUAL,mask:255},F+this.nextStencilID,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID+=j,[I,y]}return[{[b]:rr.disabled},y]}stencilConfigForOverlapTwoPass(a){const u=this.context.gl,y=a.sort(((I,F)=>F.overscaledZ-I.overscaledZ)),b=y[y.length-1].overscaledZ,j=y[0].overscaledZ-b+1;if(this.clearStencil(),j>1){const I={},F={};for(let U=0;U<j;U++)I[U+b]=new rr({func:u.GREATER,mask:255},j+1+U,255,u.KEEP,u.KEEP,u.REPLACE),F[U+b]=new rr({func:u.GREATER,mask:255},1+U,255,u.KEEP,u.KEEP,u.REPLACE);return this.nextStencilID=2*j+1,[I,F,y]}return this.nextStencilID=3,[{[b]:new rr({func:u.GREATER,mask:255},2,255,u.KEEP,u.KEEP,u.REPLACE)},{[b]:new rr({func:u.GREATER,mask:255},1,255,u.KEEP,u.KEEP,u.REPLACE)},y]}colorModeForRenderPass(){const a=this.context.gl;return this._showOverdrawInspector?new yr([a.CONSTANT_COLOR,a.ONE],new o.bp(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?yr.unblended:yr.alphaBlended}getDepthModeForSublayer(a,u,y){if(!this.opaquePassEnabledForLayer())return Un.disabled;const b=1-((1+this.currentLayer)*this.numSublayers+a)*this.depthEpsilon;return new Un(y||this.context.gl.LEQUAL,u,[b,b])}getDepthModeFor3D(){return new Un(this.context.gl.LEQUAL,Un.ReadWrite,this.depthRangeFor3D)}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}render(a,u){var y,b;this.style=a,this.options=u,this.lineAtlas=a.lineAtlas,this.imageManager=a.imageManager,this.glyphManager=a.glyphManager,this.symbolFadeChange=a.placement.symbolFadeChange($()),this.imageManager.beginFrame();const j=this.style._order,I=this.style.tileManagers,F={},U={},Y={},re={isRenderingToTexture:!1,isRenderingGlobe:((y=a.projection)===null||y===void 0?void 0:y.transitionState)>0};for(const le in I){const ge=I[le];ge.used&&ge.prepare(this.context),F[le]=ge.getVisibleCoordinates(!1),U[le]=F[le].slice().reverse(),Y[le]=ge.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(let le=0;le<j.length;le++)if(this.style._layers[j[le]].is3D()){this.opaquePassCutoff=le;break}this.maybeDrawDepthAndCoords(!1),this.renderToTexture&&(this.renderToTexture.prepareForRender(this.style,this.transform.zoom),this.opaquePassCutoff=0),this.renderPass="offscreen";for(const le of j){const ge=this.style._layers[le];if(!ge.hasOffscreenPass()||ge.isHidden(this.transform.zoom))continue;const be=U[ge.source];(ge.type==="custom"||be.length)&&this.renderLayer(this,I[ge.source],ge,be,re)}if((b=this.style.projection)===null||b===void 0||b.updateGPUdependent({context:this.context,useProgram:le=>this.useProgram(le)}),this.context.viewport.set([0,0,this.width,this.height]),this.context.bindFramebuffer.set(null),this.context.clear({color:u.showOverdrawInspector?o.bp.black:o.bp.transparent,depth:1}),this.clearStencil(),this.style.sky&&(function(le,ge){const be=le.context,Me=be.gl,Ne=((Ye,Ue,st)=>{const bt=Math.cos(Ue.rollInRadians),yt=Math.sin(Ue.rollInRadians),vt=Dt(Ue),xt=Ue.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}).projectionTransition;return{u_sky_color:Ye.properties.get("sky-color"),u_horizon_color:Ye.properties.get("horizon-color"),u_horizon:[(Ue.width/2-vt*yt)*st,(Ue.height/2+vt*bt)*st],u_horizon_normal:[-yt,bt],u_sky_horizon_blend:Ye.properties.get("sky-horizon-blend")*Ue.height/2*st,u_sky_blend:xt}})(ge,le.style.map.transform,le.pixelRatio),Ie=new Un(Me.LEQUAL,Un.ReadWrite,[0,1]),ze=rr.disabled,He=le.colorModeForRenderPass(),Fe=le.useProgram("sky"),Ge=Ba(be,ge);Fe.draw(be,Me.TRIANGLES,Ie,ze,He,Zn.disabled,Ne,null,void 0,"sky",Ge.vertexBuffer,Ge.indexBuffer,Ge.segments)})(this,this.style.sky),this._showOverdrawInspector=u.showOverdrawInspector,this.depthRangeFor3D=[0,1-(a._order.length+2)*this.numSublayers*this.depthEpsilon],!this.renderToTexture)for(this.renderPass="opaque",this.currentLayer=j.length-1;this.currentLayer>=0;this.currentLayer--){const le=this.style._layers[j[this.currentLayer]],ge=I[le.source],be=F[le.source];this._renderTileClippingMasks(le,be,!1),this.renderLayer(this,ge,le,be,re)}this.renderPass="translucent";let ce=!1;for(this.currentLayer=0;this.currentLayer<j.length;this.currentLayer++){const le=this.style._layers[j[this.currentLayer]],ge=I[le.source];if(this.renderToTexture&&this.renderToTexture.renderLayer(le,re))continue;this.opaquePassEnabledForLayer()||ce||(ce=!0,re.isRenderingGlobe&&!this.style.map.terrain&&this._renderTilesDepthBuffer());const be=(le.type==="symbol"?Y:U)[le.source];this._renderTileClippingMasks(le,F[le.source],!!this.renderToTexture),this.renderLayer(this,ge,le,be,re)}if(re.isRenderingGlobe&&(function(le,ge,be){const Me=le.context,Ne=Me.gl,Ie=le.useProgram("atmosphere"),ze=new Un(Ne.LEQUAL,Un.ReadOnly,[0,1]),He=le.transform,Fe=(function(xt,qt){const Gt=xt.properties.get("position"),Rt=[-Gt.x,-Gt.y,-Gt.z],Yt=o.ar(new Float64Array(16));return xt.properties.get("anchor")==="map"&&(o.bg(Yt,Yt,qt.rollInRadians),o.bh(Yt,Yt,-qt.pitchInRadians),o.bg(Yt,Yt,qt.bearingInRadians),o.bh(Yt,Yt,qt.center.lat*Math.PI/180),o.bJ(Yt,Yt,-qt.center.lng*Math.PI/180)),o.cg(Rt,Rt,Yt),Rt})(be,le.transform),Ge=He.getProjectionData({overscaledTileID:null,applyGlobeMatrix:!0,applyTerrainMatrix:!0}),Ye=ge.properties.get("atmosphere-blend")*Ge.projectionTransition;if(Ye===0)return;const Ue=Ls(He.worldSize,He.center.lat),st=He.inverseProjectionMatrix,bt=new Float64Array(4);bt[3]=1,o.aH(bt,bt,He.modelViewProjectionMatrix),bt[0]/=bt[3],bt[1]/=bt[3],bt[2]/=bt[3],bt[3]=1,o.aH(bt,bt,st),bt[0]/=bt[3],bt[1]/=bt[3],bt[2]/=bt[3],bt[3]=1;const yt=((xt,qt,Gt,Rt,Yt)=>({u_sun_pos:xt,u_atmosphere_blend:qt,u_globe_position:Gt,u_globe_radius:Rt,u_inv_proj_matrix:Yt}))(Fe,Ye,[bt[0],bt[1],bt[2]],Ue,st),vt=Ba(Me,ge);Ie.draw(Me,Ne.TRIANGLES,ze,rr.disabled,yr.alphaBlended,Zn.disabled,yt,null,null,"atmosphere",vt.vertexBuffer,vt.indexBuffer,vt.segments)})(this,this.style.sky,this.style.light),this.options.showTileBoundaries){const le=(function(ge,be){let Me=null;const Ne=Object.values(ge._layers).flatMap((Fe=>Fe.source&&!Fe.isHidden(be)?[ge.tileManagers[Fe.source]]:[])),Ie=Ne.filter((Fe=>Fe.getSource().type==="vector")),ze=Ne.filter((Fe=>Fe.getSource().type!=="vector")),He=Fe=>{(!Me||Me.getSource().maxzoom<Fe.getSource().maxzoom)&&(Me=Fe)};return Ie.forEach((Fe=>He(Fe))),Me||ze.forEach((Fe=>He(Fe))),Me})(this.style,this.transform.zoom);le&&(function(ge,be,Me){for(let Ne=0;Ne<Me.length;Ne++)tu(ge,be,Me[Ne])})(this,le,le.getVisibleCoordinates())}this.options.showPadding&&(function(le){const ge=le.transform.padding;Pl(le,le.transform.height-(ge.top||0),3,Df),Pl(le,ge.bottom||0,3,Vu),ha(le,ge.left||0,3,pc),ha(le,le.transform.width-(ge.right||0),3,oi);const be=le.transform.centerPoint;(function(Me,Ne,Ie,ze){fa(Me,Ne-1,Ie-10,2,20,ze),fa(Me,Ne-10,Ie-1,20,2,ze)})(le,be.x,le.transform.height-be.y,Sr)})(this),this.context.setDefault()}maybeDrawDepthAndCoords(a){if(!this.style||!this.style.map||!this.style.map.terrain)return;const u=this.terrainFacilitator.matrix,y=this.transform.modelViewProjectionMatrix;let b=this.terrainFacilitator.dirty;b||(b=a?!o.cj(u,y):!o.ck(u,y)),b||(b=this.style.map.terrain.tileManager.anyTilesAfterTime(this.terrainFacilitator.renderTime)),b&&(o.cl(u,y),this.terrainFacilitator.renderTime=Date.now(),this.terrainFacilitator.dirty=!1,(function(j,I){const F=j.context,U=F.gl,Y=j.transform,re=yr.unblended,ce=new Un(U.LEQUAL,Un.ReadWrite,[0,1]),le=I.tileManager.getRenderableTiles(),ge=j.useProgram("terrainDepth");F.bindFramebuffer.set(I.getFramebuffer("depth").framebuffer),F.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),F.clear({color:o.bp.transparent,depth:1});for(const be of le){const Me=I.getTerrainMesh(be.tileID),Ne=I.getTerrainData(be.tileID),Ie=Y.getProjectionData({overscaledTileID:be.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0}),ze={u_ele_delta:I.getMeshFrameDelta(Y.zoom)};ge.draw(F,U.TRIANGLES,ce,rr.disabled,re,Zn.backCCW,ze,Ne,Ie,"terrain",Me.vertexBuffer,Me.indexBuffer,Me.segments)}F.bindFramebuffer.set(null),F.viewport.set([0,0,j.width,j.height])})(this,this.style.map.terrain),(function(j,I){const F=j.context,U=F.gl,Y=j.transform,re=yr.unblended,ce=new Un(U.LEQUAL,Un.ReadWrite,[0,1]),le=I.getCoordsTexture(),ge=I.tileManager.getRenderableTiles(),be=j.useProgram("terrainCoords");F.bindFramebuffer.set(I.getFramebuffer("coords").framebuffer),F.viewport.set([0,0,j.width/devicePixelRatio,j.height/devicePixelRatio]),F.clear({color:o.bp.transparent,depth:1}),I.coordsIndex=[];for(const Me of ge){const Ne=I.getTerrainMesh(Me.tileID),Ie=I.getTerrainData(Me.tileID);F.activeTexture.set(U.TEXTURE0),U.bindTexture(U.TEXTURE_2D,le.texture);const ze={u_terrain_coords_id:(255-I.coordsIndex.length)/255,u_texture:0,u_ele_delta:I.getMeshFrameDelta(Y.zoom)},He=Y.getProjectionData({overscaledTileID:Me.tileID,applyTerrainMatrix:!1,applyGlobeMatrix:!0});be.draw(F,U.TRIANGLES,ce,rr.disabled,re,Zn.backCCW,ze,Ie,He,"terrain",Ne.vertexBuffer,Ne.indexBuffer,Ne.segments),I.coordsIndex.push(Me.tileID.key)}F.bindFramebuffer.set(null),F.viewport.set([0,0,j.width,j.height])})(this,this.style.map.terrain))}renderLayer(a,u,y,b,j){y.isHidden(this.transform.zoom)||(y.type==="background"||y.type==="custom"||(b||[]).length)&&(this.id=y.id,o.cm(y)?(function(I,F,U,Y,re,ce){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:le}=ce,ge=rr.disabled,be=I.colorModeForRenderPass();(U._unevaluatedLayout.hasValue("text-variable-anchor")||U._unevaluatedLayout.hasValue("text-variable-anchor-offset"))&&(function(Me,Ne,Ie,ze,He,Fe,Ge,Ye,Ue){const st=Ne.transform,bt=Ne.style.map.terrain,yt=He==="map",vt=Fe==="map";for(const xt of Me){const qt=ze.getTile(xt),Gt=qt.getBucket(Ie);if(!Gt||!Gt.text||!Gt.text.segments.get().length)continue;const Rt=o.ay(Gt.textSizeData,st.zoom),Yt=o.aN(qt,1,Ne.transform.zoom),$n=Aa(yt,Ne.transform,Yt),Mr=Ie.layout.get("icon-text-fit")!=="none"&&Gt.hasIconData();if(Rt){const li=Math.pow(2,st.zoom-qt.tileID.overscaledZ),$r=bt?(ci,Vr)=>bt.getElevation(xt,ci,Vr):null;On(Gt,yt,vt,Ue,st,$n,li,Rt,Mr,o.aO(st,qt,Ge,Ye),xt.toUnwrapped(),$r)}}})(Y,I,U,F,U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),re),U.paint.get("icon-opacity").constantOr(1)!==0&&wi(I,F,U,Y,!1,U.paint.get("icon-translate"),U.paint.get("icon-translate-anchor"),U.layout.get("icon-rotation-alignment"),U.layout.get("icon-pitch-alignment"),U.layout.get("icon-keep-upright"),ge,be,le),U.paint.get("text-opacity").constantOr(1)!==0&&wi(I,F,U,Y,!0,U.paint.get("text-translate"),U.paint.get("text-translate-anchor"),U.layout.get("text-rotation-alignment"),U.layout.get("text-pitch-alignment"),U.layout.get("text-keep-upright"),ge,be,le),F.map.showCollisionBoxes&&(mt(I,F,U,Y,!0),mt(I,F,U,Y,!1))})(a,u,y,b,this.style.placement.variableOffsets,j):o.cn(y)?(function(I,F,U,Y,re){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,le=U.paint.get("circle-opacity"),ge=U.paint.get("circle-stroke-width"),be=U.paint.get("circle-stroke-opacity"),Me=!U.layout.get("circle-sort-key").isConstant();if(le.constantOr(1)===0&&(ge.constantOr(1)===0||be.constantOr(1)===0))return;const Ne=I.context,Ie=Ne.gl,ze=I.transform,He=I.getDepthModeForSublayer(0,Un.ReadOnly),Fe=rr.disabled,Ge=I.colorModeForRenderPass(),Ye=[],Ue=ze.getCircleRadiusCorrection();for(let st=0;st<Y.length;st++){const bt=Y[st],yt=F.getTile(bt),vt=yt.getBucket(U);if(!vt)continue;const xt=U.paint.get("circle-translate"),qt=U.paint.get("circle-translate-anchor"),Gt=o.aO(ze,yt,xt,qt),Rt=vt.programConfigurations.get(U.id),Yt=I.useProgram("circle",Rt),$n=vt.layoutVertexBuffer,Mr=vt.indexBuffer,li=I.style.map.terrain&&I.style.map.terrain.getTerrainData(bt),$r={programConfiguration:Rt,program:Yt,layoutVertexBuffer:$n,indexBuffer:Mr,uniformValues:Od(I,yt,U,Gt,Ue),terrainData:li,projectionData:ze.getProjectionData({overscaledTileID:bt,applyGlobeMatrix:!ce,applyTerrainMatrix:!0})};if(Me){const ci=vt.segments.get();for(const Vr of ci)Ye.push({segments:new o.aX([Vr]),sortKey:Vr.sortKey,state:$r})}else Ye.push({segments:vt.segments,sortKey:0,state:$r})}Me&&Ye.sort(((st,bt)=>st.sortKey-bt.sortKey));for(const st of Ye){const{programConfiguration:bt,program:yt,layoutVertexBuffer:vt,indexBuffer:xt,uniformValues:qt,terrainData:Gt,projectionData:Rt}=st.state;yt.draw(Ne,Ie.TRIANGLES,He,Fe,Ge,Zn.backCCW,qt,Gt,Rt,U.id,vt,xt,st.segments,U.paint,I.transform.zoom,bt)}})(a,u,y,b,j):o.co(y)?(function(I,F,U,Y,re){if(U.paint.get("heatmap-opacity")===0)return;const ce=I.context,{isRenderingToTexture:le,isRenderingGlobe:ge}=re;if(I.style.map.terrain){for(const be of Y){const Me=F.getTile(be);F.hasRenderableParent(be)||(I.renderPass==="offscreen"?Fa(I,Me,U,be,ge):I.renderPass==="translucent"&&ja(I,U,be,le,ge))}ce.viewport.set([0,0,I.width,I.height])}else I.renderPass==="offscreen"?(function(be,Me,Ne,Ie){const ze=be.context,He=ze.gl,Fe=be.transform,Ge=rr.disabled,Ye=new yr([He.ONE,He.ONE],o.bp.transparent,[!0,!0,!0,!0]);(function(Ue,st,bt){const yt=Ue.gl;Ue.activeTexture.set(yt.TEXTURE1),Ue.viewport.set([0,0,st.width/4,st.height/4]);let vt=bt.heatmapFbos.get(o.cd);vt?(yt.bindTexture(yt.TEXTURE_2D,vt.colorAttachment.get()),Ue.bindFramebuffer.set(vt.framebuffer)):(vt=ds(Ue,st.width/4,st.height/4),bt.heatmapFbos.set(o.cd,vt))})(ze,be,Ne),ze.clear({color:o.bp.transparent});for(let Ue=0;Ue<Ie.length;Ue++){const st=Ie[Ue];if(Me.hasRenderableParent(st))continue;const bt=Me.getTile(st),yt=bt.getBucket(Ne);if(!yt)continue;const vt=yt.programConfigurations.get(Ne.id),xt=be.useProgram("heatmap",vt),qt=Fe.getProjectionData({overscaledTileID:st,applyGlobeMatrix:!0,applyTerrainMatrix:!1}),Gt=Fe.getCircleRadiusCorrection();xt.draw(ze,He.TRIANGLES,Un.disabled,Ge,Ye,Zn.backCCW,Us(bt,Fe.zoom,Ne.paint.get("heatmap-intensity"),Gt),null,qt,Ne.id,yt.layoutVertexBuffer,yt.indexBuffer,yt.segments,Ne.paint,Fe.zoom,vt)}ze.viewport.set([0,0,be.width,be.height])})(I,F,U,Y):I.renderPass==="translucent"&&(function(be,Me){const Ne=be.context,Ie=Ne.gl;Ne.setColorMode(be.colorModeForRenderPass());const ze=Me.heatmapFbos.get(o.cd);ze&&(Ne.activeTexture.set(Ie.TEXTURE0),Ie.bindTexture(Ie.TEXTURE_2D,ze.colorAttachment.get()),Ne.activeTexture.set(Ie.TEXTURE1),eu(Ne,Me).bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE),be.useProgram("heatmapTexture").draw(Ne,Ie.TRIANGLES,Un.disabled,rr.disabled,be.colorModeForRenderPass(),Zn.disabled,Mh(be,Me,0,1),null,null,Me.id,be.viewportBuffer,be.quadTriangleIndexBuffer,be.viewportSegments,Me.paint,be.transform.zoom))})(I,U)})(a,u,y,b,j):o.cp(y)?(function(I,F,U,Y,re){if(I.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,le=U.paint.get("line-opacity"),ge=U.paint.get("line-width");if(le.constantOr(1)===0||ge.constantOr(1)===0)return;const be=I.getDepthModeForSublayer(0,Un.ReadOnly),Me=I.colorModeForRenderPass(),Ne=U.paint.get("line-dasharray"),Ie=Ne.constantOr(1),ze=U.paint.get("line-pattern"),He=ze.constantOr(1),Fe=U.paint.get("line-gradient"),Ge=U.getCrossfadeParameters();let Ye;Ye=He?"linePattern":Ie&&Fe?"lineGradientSDF":Ie?"lineSDF":Fe?"lineGradient":"line";const Ue=I.context,st=Ue.gl,bt=I.transform;let yt=!0;for(const vt of Y){const xt=F.getTile(vt);if(He&&!xt.patternsLoaded())continue;const qt=xt.getBucket(U);if(!qt)continue;const Gt=qt.programConfigurations.get(U.id),Rt=I.context.program.get(),Yt=I.useProgram(Ye,Gt),$n=yt||Yt.program!==Rt,Mr=I.style.map.terrain&&I.style.map.terrain.getTerrainData(vt),li=ze.constantOr(null),$r=Ne&&Ne.constantOr(null);if(li&&xt.imageAtlas){const pa=xt.imageAtlas,Oi=pa.patternPositions[li.to.toString()],Ar=pa.patternPositions[li.from.toString()];Oi&&Ar&&Gt.setConstantPatternPositions(Oi,Ar)}else if($r){const pa=U.layout.get("line-cap")==="round",Oi=I.lineAtlas.getDash($r.to,pa),Ar=I.lineAtlas.getDash($r.from,pa);Gt.setConstantDashPositions(Oi,Ar)}const ci=bt.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!ce,applyTerrainMatrix:!0}),Vr=bt.getPixelScale();let ui;He?(ui=Co(I,xt,U,Vr,Ge),Rh(Ue,st,xt,Gt,Ge)):Ie&&Fe?(ui=ic(I,xt,U,Vr,Ge,qt.lineClipsArray.length),Ui(I,F,Ue,st,U,qt,vt,Gt,Ge)):Ie?(ui=rc(I,xt,U,Vr,Ge),Rr(I,Ue,st,Gt,$n,Ge)):Fe?(ui=If(I,xt,U,Vr,qt.lineClipsArray.length),da(I,F,Ue,st,U,qt,vt)):ui=no(I,xt,U,Vr);const pi=I.stencilModeForClipping(vt);Yt.draw(Ue,st.TRIANGLES,be,pi,Me,Zn.disabled,ui,Mr,ci,U.id,qt.layoutVertexBuffer,qt.indexBuffer,qt.segments,U.paint,I.transform.zoom,Gt,qt.layoutVertexBuffer2),yt=!1}})(a,u,y,b,j):o.cq(y)?(function(I,F,U,Y,re){const ce=U.paint.get("fill-color"),le=U.paint.get("fill-opacity");if(le.constantOr(1)===0)return;const{isRenderingToTexture:ge}=re,be=I.colorModeForRenderPass(),Me=U.paint.get("fill-pattern"),Ne=I.opaquePassEnabledForLayer()&&!Me.constantOr(1)&&ce.constantOr(o.bp.transparent).a===1&&le.constantOr(0)===1?"opaque":"translucent";if(I.renderPass===Ne){const Ie=I.getDepthModeForSublayer(1,I.renderPass==="opaque"?Un.ReadWrite:Un.ReadOnly);hs(I,F,U,Y,Ie,be,!1,ge)}if(I.renderPass==="translucent"&&U.paint.get("fill-antialias")){const Ie=I.getDepthModeForSublayer(U.getPaintProperty("fill-outline-color")?2:0,Un.ReadOnly);hs(I,F,U,Y,Ie,be,!0,ge)}})(a,u,y,b,j):o.cr(y)?(function(I,F,U,Y,re){const ce=U.paint.get("fill-extrusion-opacity");if(ce===0)return;const{isRenderingToTexture:le}=re;if(I.renderPass==="translucent"){const ge=new Un(I.context.gl.LEQUAL,Un.ReadWrite,I.depthRangeFor3D);if(ce!==1||U.paint.get("fill-extrusion-pattern").constantOr(1))Fd(I,F,U,Y,ge,rr.disabled,yr.disabled,le),Fd(I,F,U,Y,ge,I.stencilModeFor3D(),I.colorModeForRenderPass(),le);else{const be=I.colorModeForRenderPass();Fd(I,F,U,Y,ge,rr.disabled,be,le)}}})(a,u,y,b,j):o.cs(y)?(function(I,F,U,Y,re){if(I.renderPass!=="offscreen"&&I.renderPass!=="translucent")return;const{isRenderingToTexture:ce}=re,le=I.context,ge=I.style.projection.useSubdivision,be=I.getDepthModeForSublayer(0,Un.ReadOnly),Me=I.colorModeForRenderPass();if(I.renderPass==="offscreen")(function(Ne,Ie,ze,He,Fe,Ge,Ye){const Ue=Ne.context,st=Ue.gl;for(const bt of ze){const yt=Ie.getTile(bt),vt=yt.dem;if(!vt||!vt.data||!yt.needsHillshadePrepare)continue;const xt=vt.dim,qt=vt.stride,Gt=vt.getPixels();if(Ue.activeTexture.set(st.TEXTURE1),Ue.pixelStoreUnpackPremultiplyAlpha.set(!1),yt.demTexture=yt.demTexture||Ne.getTileTexture(qt),yt.demTexture){const Yt=yt.demTexture;Yt.update(Gt,{premultiply:!1}),Yt.bind(st.NEAREST,st.CLAMP_TO_EDGE)}else yt.demTexture=new o.T(Ue,Gt,st.RGBA,{premultiply:!1}),yt.demTexture.bind(st.NEAREST,st.CLAMP_TO_EDGE);Ue.activeTexture.set(st.TEXTURE0);let Rt=yt.fbo;if(!Rt){const Yt=new o.T(Ue,{width:xt,height:xt,data:null},st.RGBA);Yt.bind(st.LINEAR,st.CLAMP_TO_EDGE),Rt=yt.fbo=Ue.createFramebuffer(xt,xt,!0,!1),Rt.colorAttachment.set(Yt.texture)}Ue.bindFramebuffer.set(Rt.framebuffer),Ue.viewport.set([0,0,xt,xt]),Ne.useProgram("hillshadePrepare").draw(Ue,st.TRIANGLES,Fe,Ge,Ye,Zn.disabled,Lu(yt.tileID,vt),null,null,He.id,Ne.rasterBoundsBuffer,Ne.quadTriangleIndexBuffer,Ne.rasterBoundsSegments),yt.needsHillshadePrepare=!1}})(I,F,Y,U,be,rr.disabled,Me),le.viewport.set([0,0,I.width,I.height]);else if(I.renderPass==="translucent")if(ge){const[Ne,Ie,ze]=I.stencilConfigForOverlapTwoPass(Y);Tl(I,F,U,ze,Ne,be,Me,!1,ce),Tl(I,F,U,ze,Ie,be,Me,!0,ce)}else{const[Ne,Ie]=I.getStencilConfigForOverlapAndUpdateStencilID(Y);Tl(I,F,U,Ie,Ne,be,Me,!1,ce)}})(a,u,y,b,j):o.ct(y)?(function(I,F,U,Y,re){if(I.renderPass!=="translucent"||!Y.length)return;const{isRenderingToTexture:ce}=re,le=I.style.projection.useSubdivision,ge=I.getDepthModeForSublayer(0,Un.ReadOnly),be=I.colorModeForRenderPass();if(le){const[Me,Ne,Ie]=I.stencilConfigForOverlapTwoPass(Y);Yo(I,F,U,Ie,Me,ge,be,!1,ce),Yo(I,F,U,Ie,Ne,ge,be,!0,ce)}else{const[Me,Ne]=I.getStencilConfigForOverlapAndUpdateStencilID(Y);Yo(I,F,U,Ne,Me,ge,be,!1,ce)}})(a,u,y,b,j):o.bU(y)?(function(I,F,U,Y,re){if(I.renderPass!=="translucent"||U.paint.get("raster-opacity")===0||!Y.length)return;const{isRenderingToTexture:ce}=re,le=F.getSource(),ge=I.style.projection.useSubdivision;if(le instanceof _i)Eo(I,F,U,Y,null,!1,!1,le.tileCoords,le.flippedWindingOrder,ce);else if(ge){const[be,Me,Ne]=I.stencilConfigForOverlapTwoPass(Y);Eo(I,F,U,Ne,be,!1,!0,ao,!1,ce),Eo(I,F,U,Ne,Me,!0,!0,ao,!1,ce)}else{const[be,Me]=I.getStencilConfigForOverlapAndUpdateStencilID(Y);Eo(I,F,U,Me,be,!1,!0,ao,!1,ce)}})(a,u,y,b,j):o.cu(y)?(function(I,F,U,Y,re){const ce=U.paint.get("background-color"),le=U.paint.get("background-opacity");if(le===0)return;const{isRenderingToTexture:ge}=re,be=I.context,Me=be.gl,Ne=I.style.projection,Ie=I.transform,ze=Ie.tileSize,He=U.paint.get("background-pattern");if(I.isPatternMissing(He))return;const Fe=!He&&ce.a===1&&le===1&&I.opaquePassEnabledForLayer()?"opaque":"translucent";if(I.renderPass!==Fe)return;const Ge=rr.disabled,Ye=I.getDepthModeForSublayer(0,Fe==="opaque"?Un.ReadWrite:Un.ReadOnly),Ue=I.colorModeForRenderPass(),st=I.useProgram(He?"backgroundPattern":"background"),bt=Y||er(Ie,{tileSize:ze,terrain:I.style.map.terrain});He&&(be.activeTexture.set(Me.TEXTURE0),I.imageManager.bind(I.context));const yt=U.getCrossfadeParameters();for(const vt of bt){const xt=Ie.getProjectionData({overscaledTileID:vt,applyGlobeMatrix:!ge,applyTerrainMatrix:!0}),qt=He?Zo(le,I,He,{tileID:vt,tileSize:ze},yt):Rd(le,ce),Gt=I.style.map.terrain&&I.style.map.terrain.getTerrainData(vt),Rt=Ne.getMeshFromTileID(be,vt.canonical,!1,!0,"raster");st.draw(be,Me.TRIANGLES,Ye,Ge,Ue,Zn.backCCW,qt,Gt,xt,U.id,Rt.vertexBuffer,Rt.indexBuffer,Rt.segments)}})(a,0,y,b,j):o.cv(y)&&(function(I,F,U,Y){const{isRenderingGlobe:re}=Y,ce=I.context,le=U.implementation,ge=I.style.projection,be=I.transform,Me=be.getProjectionDataForCustomLayer(re),Ne={farZ:be.farZ,nearZ:be.nearZ,fov:be.fov*Math.PI/180,modelViewProjectionMatrix:be.modelViewProjectionMatrix,projectionMatrix:be.projectionMatrix,shaderData:{variantName:ge.shaderVariantName,vertexShaderPrelude:`const float PI = 3.141592653589793;
uniform mat4 u_projection_matrix;
${ge.shaderPreludeCode.vertexSource}`,define:ge.shaderDefine},defaultProjectionData:Me},Ie=le.renderingMode?le.renderingMode:"2d";if(I.renderPass==="offscreen"){const ze=le.prerender;ze&&(I.setCustomLayerDefaults(),ce.setColorMode(I.colorModeForRenderPass()),ze.call(le,ce.gl,Ne),ce.setDirty(),I.setBaseState())}else if(I.renderPass==="translucent"){I.setCustomLayerDefaults(),ce.setColorMode(I.colorModeForRenderPass()),ce.setStencilMode(rr.disabled);const ze=Ie==="3d"?I.getDepthModeFor3D():I.getDepthModeForSublayer(0,Un.ReadOnly);ce.setDepthMode(ze),le.render(ce.gl,Ne),ce.setDirty(),I.setBaseState(),ce.bindFramebuffer.set(null)}})(a,0,y,j))}saveTileTexture(a){const u=this._tileTextures[a.size[0]];u?u.push(a):this._tileTextures[a.size[0]]=[a]}getTileTexture(a){const u=this._tileTextures[a];return u&&u.length>0?u.pop():null}isPatternMissing(a){if(!a)return!1;if(!a.from||!a.to)return!0;const u=this.imageManager.getPattern(a.from.toString()),y=this.imageManager.getPattern(a.to.toString());return!u||!y}useProgram(a,u,y=!1,b=[]){this.cache=this.cache||{};const j=!!this.style.map.terrain,I=this.style.projection,F=y?sr.projectionMercator:I.shaderPreludeCode,U=y?Ji:I.shaderDefine,Y=a+(u?u.cacheKey:"")+`/${y?la:I.shaderVariantName}`+(this._showOverdrawInspector?"/overdraw":"")+(j?"/terrain":"")+(b?`/${b.join("/")}`:"");return this.cache[Y]||(this.cache[Y]=new $s(this.context,sr[a],u,Nf[a],this._showOverdrawInspector,j,F,U,b)),this.cache[Y]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const a=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(a.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new o.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))}destroy(){var a,u;if(this._tileTextures){for(const y in this._tileTextures){const b=this._tileTextures[y];if(b)for(const j of b)j.destroy()}this._tileTextures={}}if(this.tileExtentBuffer&&this.tileExtentBuffer.destroy(),this.debugBuffer&&this.debugBuffer.destroy(),this.rasterBoundsBuffer&&this.rasterBoundsBuffer.destroy(),this.rasterBoundsBufferPosOnly&&this.rasterBoundsBufferPosOnly.destroy(),this.viewportBuffer&&this.viewportBuffer.destroy(),this.tileBorderIndexBuffer&&this.tileBorderIndexBuffer.destroy(),this.quadTriangleIndexBuffer&&this.quadTriangleIndexBuffer.destroy(),this.tileExtentMesh&&((a=this.tileExtentMesh.vertexBuffer)===null||a===void 0||a.destroy()),this.tileExtentMesh&&((u=this.tileExtentMesh.indexBuffer)===null||u===void 0||u.destroy()),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this.cache){for(const y in this.cache){const b=this.cache[y];b&&b.program&&this.context.gl.deleteProgram(b.program)}this.cache={}}this.context&&this.context.setDefault()}overLimit(){const{drawingBufferWidth:a,drawingBufferHeight:u}=this.context.gl;return this.width!==a||this.height!==u}}function Of(C,a){let u,y=!1,b=null,j=null;const I=()=>{b=null,y&&(C.apply(j,u),b=setTimeout(I,a),y=!1)};return(...F)=>(y=!0,j=this,u=F,b||I(),b)}class Rf{constructor(a){this._getCurrentHash=()=>{const u=window.location.hash.replace("#","");if(this._hashName){let y;return u.split("&").map((b=>b.split("="))).forEach((b=>{b[0]===this._hashName&&(y=b)})),(y&&y[1]||"").split("/")}return u.split("/")},this._onHashChange=()=>{const u=this._getCurrentHash();if(!this._isValidHash(u))return!1;const y=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(u[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+u[2],+u[1]],zoom:+u[0],bearing:y,pitch:+(u[4]||0)}),!0},this._updateHashUnthrottled=()=>{const u=window.location.href.replace(/(#.*)?$/,this.getHashString());window.history.replaceState(window.history.state,null,u)},this._removeHash=()=>{const u=this._getCurrentHash();if(u.length===0)return;const y=u.join("/");let b=y;b.split("&").length>0&&(b=b.split("&")[0]),this._hashName&&(b=`${this._hashName}=${y}`);let j=window.location.hash.replace(b,"");j.startsWith("#&")?j=j.slice(0,1)+j.slice(2):j==="#"&&(j="");let I=window.location.href.replace(/(#.+)?$/,j);I=I.replace("&&","&"),window.history.replaceState(window.history.state,null,I)},this._updateHash=Of(this._updateHashUnthrottled,300),this._hashName=a&&encodeURIComponent(a)}addTo(a){return this._map=a,addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this}remove(){return removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),this._removeHash(),delete this._map,this}getHashString(a){const u=this._map.getCenter(),y=Math.round(100*this._map.getZoom())/100,b=Math.ceil((y*Math.LN2+Math.log(512/360/.5))/Math.LN10),j=Math.pow(10,b),I=Math.round(u.lng*j)/j,F=Math.round(u.lat*j)/j,U=this._map.getBearing(),Y=this._map.getPitch();let re="";if(re+=a?`/${I}/${F}/${y}`:`${y}/${F}/${I}`,(U||Y)&&(re+="/"+Math.round(10*U)/10),Y&&(re+=`/${Math.round(Y)}`),this._hashName){const ce=this._hashName;let le=!1;const ge=window.location.hash.slice(1).split("&").map((be=>{const Me=be.split("=")[0];return Me===ce?(le=!0,`${Me}=${re}`):be})).filter((be=>be));return le||ge.push(`${ce}=${re}`),`#${ge.join("&")}`}return`#${re}`}_isValidHash(a){if(a.length<3||a.some(isNaN))return!1;try{new o.V(+a[2],+a[1])}catch{return!1}const u=+a[0],y=+(a[3]||0),b=+(a[4]||0);return u>=this._map.getMinZoom()&&u<=this._map.getMaxZoom()&&y>=-180&&y<=180&&b>=this._map.getMinPitch()&&b<=this._map.getMaxPitch()}}const Ks={linearity:.3,easing:o.cw(0,0,.3,1)},qp=o.e({deceleration:2500,maxSpeed:1400},Ks),qi=o.e({deceleration:20,maxSpeed:1400},Ks),jo=o.e({deceleration:1e3,maxSpeed:360},Ks),Lf=o.e({deceleration:1e3,maxSpeed:90},Ks),fs=o.e({deceleration:1e3,maxSpeed:360},Ks);class cv{constructor(a){this._map=a,this.clear()}clear(){this._inertiaBuffer=[]}record(a){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:$(),settings:a})}_drainInertiaBuffer(){const a=this._inertiaBuffer,u=$();for(;a.length>0&&u-a[0].time>160;)a.shift()}_onMoveEnd(a){if(this._drainInertiaBuffer(),this._inertiaBuffer.length<2)return;const u={zoom:0,bearing:0,pitch:0,roll:0,pan:new o.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:j}of this._inertiaBuffer)u.zoom+=j.zoomDelta||0,u.bearing+=j.bearingDelta||0,u.pitch+=j.pitchDelta||0,u.roll+=j.rollDelta||0,j.panDelta&&u.pan._add(j.panDelta),j.around&&(u.around=j.around),j.pinchAround&&(u.pinchAround=j.pinchAround);const y=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,b={};if(u.pan.mag()){const j=Al(u.pan.mag(),y,o.e({},qp,a||{})),I=u.pan.mult(j.amount/u.pan.mag()),F=this._map.cameraHelper.handlePanInertia(I,this._map.transform);b.center=F.easingCenter,b.offset=F.easingOffset,ps(b,j)}if(u.zoom){const j=Al(u.zoom,y,qi),I=o.cx(this._map.transform.zoom+j.amount,this._map.getZoomSnap(),j.amount);b.zoom=I,ps(b,j)}if(u.bearing){const j=Al(u.bearing,y,jo);b.bearing=this._map.transform.bearing+o.an(j.amount,-179,179),ps(b,j)}if(u.pitch){const j=Al(u.pitch,y,Lf);b.pitch=this._map.transform.pitch+j.amount,ps(b,j)}if(u.roll){const j=Al(u.roll,y,fs);b.roll=this._map.transform.roll+o.an(j.amount,-179,179),ps(b,j)}if(b.zoom||b.bearing){const j=u.pinchAround===void 0?u.around:u.pinchAround;b.around=j?this._map.unproject(j):this._map.getCenter()}return this.clear(),o.e(b,{noMoveStart:!0})}}function ps(C,a){(!C.duration||C.duration<a.duration)&&(C.duration=a.duration,C.easing=a.easing)}function Al(C,a,u){const{maxSpeed:y,linearity:b,deceleration:j}=u,I=o.an(C*b/(a/1e3),-y,y),F=Math.abs(I)/(j*b);return{easing:u.easing,duration:1e3*F,amount:I*(F/2)}}class Ti extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,y,b={}){y=y instanceof MouseEvent?y:new MouseEvent(a,y);const j=O.mousePos(u.getCanvas(),y),I=u.unproject(j);super(a,o.e({point:j,lngLat:I,originalEvent:y},b)),this._defaultPrevented=!1,this.target=u}}class ru extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,y){const b=a==="touchend"?y.changedTouches:y.touches,j=O.touchPos(u.getCanvasContainer(),b),I=j.map((U=>u.unproject(U))),F=j.reduce(((U,Y,re,ce)=>U.add(Y.div(ce.length))),new o.P(0,0));super(a,{points:j,point:F,lngLats:I,lngLat:u.unproject(F),originalEvent:y}),this._defaultPrevented=!1}}class zh extends o.l{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(a,u,y){super(a,{originalEvent:y}),this._defaultPrevented=!1}}class ms{constructor(a,u){this._map=a,this._clickTolerance=u.clickTolerance}reset(){delete this._mousedownPos}wheel(a){return this._firePreventable(new zh(a.type,this._map,a))}mousedown(a,u){return this._mousedownPos=u,this._firePreventable(new Ti(a.type,this._map,a))}mouseup(a){this._map.fire(new Ti(a.type,this._map,a))}click(a,u){this._mousedownPos&&this._mousedownPos.dist(u)>=this._clickTolerance||this._map.fire(new Ti(a.type,this._map,a))}dblclick(a){return this._firePreventable(new Ti(a.type,this._map,a))}mouseover(a){this._map.fire(new Ti(a.type,this._map,a))}mouseout(a){this._map.fire(new Ti(a.type,this._map,a))}touchstart(a){return this._firePreventable(new ru(a.type,this._map,a))}touchmove(a){this._map.fire(new ru(a.type,this._map,a))}touchend(a){this._map.fire(new ru(a.type,this._map,a))}touchcancel(a){this._map.fire(new ru(a.type,this._map,a))}_firePreventable(a){if(this._map.fire(a),a.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class gs{constructor(a){this._map=a}reset(){this._delayContextMenu=!1,this._ignoreContextMenu=!0,delete this._contextMenuEvent}mousemove(a){this._map.fire(new Ti(a.type,this._map,a))}mousedown(){this._delayContextMenu=!0,this._ignoreContextMenu=!1}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Ti("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(a){this._delayContextMenu?this._contextMenuEvent=a:this._ignoreContextMenu||this._map.fire(new Ti(a.type,this._map,a)),this._map.listens("contextmenu")&&a.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class ys{constructor(a){this._map=a}get transform(){return this._map._requestedCameraState||this._map.transform}get center(){return{lng:this.transform.center.lng,lat:this.transform.center.lat}}get zoom(){return this.transform.zoom}get pitch(){return this.transform.pitch}get bearing(){return this.transform.bearing}unproject(a){return this.transform.screenPointToLocation(o.P.convert(a),this._map.terrain)}}class Mo{constructor(a,u){this._map=a,this._tr=new ys(a),this._el=a.getCanvasContainer(),this._container=a.getContainer(),this._clickTolerance=u.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(a,u){this.isEnabled()&&a.shiftKey&&a.button===0&&(O.disableDrag(),this._startPos=this._lastPos=u,this._active=!0)}mousemoveWindow(a,u){if(!this._active)return;const y=u;if(this._lastPos.equals(y)||!this._box&&y.dist(this._startPos)<this._clickTolerance)return;const b=this._startPos;this._lastPos=y,this._box||(this._box=O.create("div","maplibregl-boxzoom",this._container),this._container.classList.add("maplibregl-crosshair"),this._fireEvent("boxzoomstart",a));const j=Math.min(b.x,y.x),I=Math.max(b.x,y.x),F=Math.min(b.y,y.y),U=Math.max(b.y,y.y);O.setTransform(this._box,`translate(${j}px,${F}px)`),this._box.style.width=I-j+"px",this._box.style.height=U-F+"px"}mouseupWindow(a,u){if(!this._active||a.button!==0)return;const y=this._startPos,b=u;if(this.reset(),O.suppressClick(),y.x!==b.x||y.y!==b.y)return this._map.fire(new o.l("boxzoomend",{originalEvent:a})),{cameraAnimation:j=>j.fitScreenCoordinates(y,b,this._tr.bearing,{linear:!0})};this._fireEvent("boxzoomcancel",a)}keydown(a){this._active&&a.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",a))}reset(){this._active=!1,this._container.classList.remove("maplibregl-crosshair"),this._box&&(O.remove(this._box),this._box=null),O.enableDrag(),delete this._startPos,delete this._lastPos}_fireEvent(a,u){return this._map.fire(new o.l(a,{originalEvent:u}))}}function ta(C,a){if(C.length!==a.length)throw new Error(`The number of touches and points are not equal - touches ${C.length}, points ${a.length}`);const u={};for(let y=0;y<C.length;y++)u[C[y].identifier]=a[y];return u}class tn{constructor(a){this.reset(),this.numTouches=a.numTouches}reset(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1}touchstart(a,u,y){(this.centroid||y.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=a.timeStamp),y.length===this.numTouches&&(this.centroid=(function(b){const j=new o.P(0,0);for(const I of b)j._add(I);return j.div(b.length)})(u),this.touches=ta(y,u)))}touchmove(a,u,y){if(this.aborted||!this.centroid)return;const b=ta(y,u);for(const j in this.touches){const I=b[j];(!I||I.dist(this.touches[j])>30)&&(this.aborted=!0)}}touchend(a,u,y){if((!this.centroid||a.timeStamp-this.startTime>500)&&(this.aborted=!0),y.length===0){const b=!this.aborted&&this.centroid;if(this.reset(),b)return b}}}class Fh{constructor(a){this.singleTap=new tn(a),this.numTaps=a.numTaps,this.reset()}reset(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()}touchstart(a,u,y){this.singleTap.touchstart(a,u,y)}touchmove(a,u,y){this.singleTap.touchmove(a,u,y)}touchend(a,u,y){const b=this.singleTap.touchend(a,u,y);if(b){const j=a.timeStamp-this.lastTime<500,I=!this.lastTap||this.lastTap.dist(b)<30;if(j&&I||this.reset(),this.count++,this.lastTime=a.timeStamp,this.lastTap=b,this.count===this.numTaps)return this.reset(),b}}}class Bh{constructor(a){this._tr=new ys(a),this._zoomIn=new Fh({numTouches:1,numTaps:2}),this._zoomOut=new Fh({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(a,u,y){this._zoomIn.touchstart(a,u,y),this._zoomOut.touchstart(a,u,y)}touchmove(a,u,y){this._zoomIn.touchmove(a,u,y),this._zoomOut.touchmove(a,u,y)}touchend(a,u,y){const b=this._zoomIn.touchend(a,u,y),j=this._zoomOut.touchend(a,u,y),I=this._tr;return b?(this._active=!0,a.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:o.cx(I.zoom+1,F.getZoomSnap()),around:I.unproject(b)},{originalEvent:a})}):j?(this._active=!0,a.preventDefault(),setTimeout((()=>this.reset()),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:o.cx(I.zoom-1,F.getZoomSnap()),around:I.unproject(j)},{originalEvent:a})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class iu{constructor(a){this._enabled=!!a.enable,this._moveStateManager=a.moveStateManager,this._clickTolerance=a.clickTolerance||1,this._moveFunction=a.move,this._activateOnStart=!!a.activateOnStart,a.assignEvents(this),this.reset()}reset(a){this._active=!1,this._moved=!1,delete this._lastPoint,this._moveStateManager.endMove(a)}_move(...a){const u=this._moveFunction(...a);if(u.bearingDelta||u.pitchDelta||u.rollDelta||u.around||u.panDelta)return this._active=!0,u}dragStart(a,u){this.isEnabled()&&!this._lastPoint&&this._moveStateManager.isValidStartEvent(a)&&(this._moveStateManager.startMove(a),this._lastPoint=Array.isArray(u)?u[0]:u,this._activateOnStart&&this._lastPoint&&(this._active=!0))}dragMove(a,u){if(!this.isEnabled())return;const y=this._lastPoint;if(!y)return;if(a.preventDefault(),!this._moveStateManager.isValidMoveEvent(a))return void this.reset(a);const b=Array.isArray(u)?u[0]:u;return!this._moved&&b.dist(y)<this._clickTolerance?void 0:(this._moved=!0,this._lastPoint=b,this._move(y,b))}dragEnd(a){this.isEnabled()&&this._lastPoint&&this._moveStateManager.isValidEndEvent(a)&&(this._moved&&O.suppressClick(),this.reset(a))}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}getClickTolerance(){return this._clickTolerance}}const Ma=0,ka=2,si={[Ma]:1,[ka]:2};class oo{constructor(a){this._correctEvent=a.checkCorrectEvent}startMove(a){const u=O.mouseButton(a);this._eventButton=u}endMove(a){delete this._eventButton}isValidStartEvent(a){return this._correctEvent(a)}isValidMoveEvent(a){return!(function(u,y){const b=si[y];return u.buttons===void 0||(u.buttons&b)!==b})(a,this._eventButton)}isValidEndEvent(a){return O.mouseButton(a)===this._eventButton}}class zf{constructor(){this._firstTouch=void 0}_isOneFingerTouch(a){return a.targetTouches.length===1}_isSameTouchEvent(a){return a.targetTouches[0].identifier===this._firstTouch}startMove(a){this._firstTouch=a.targetTouches[0].identifier}endMove(a){delete this._firstTouch}isValidStartEvent(a){return this._isOneFingerTouch(a)}isValidMoveEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}isValidEndEvent(a){return this._isOneFingerTouch(a)&&this._isSameTouchEvent(a)}}class Gp{constructor(a=new oo({checkCorrectEvent:()=>!0}),u=new zf){this.mouseMoveStateManager=a,this.oneFingerTouchMoveStateManager=u}_executeRelevantHandler(a,u,y){return a instanceof MouseEvent?u(a):typeof TouchEvent<"u"&&a instanceof TouchEvent?y(a):void 0}startMove(a){this._executeRelevantHandler(a,(u=>this.mouseMoveStateManager.startMove(u)),(u=>this.oneFingerTouchMoveStateManager.startMove(u)))}endMove(a){this._executeRelevantHandler(a,(u=>this.mouseMoveStateManager.endMove(u)),(u=>this.oneFingerTouchMoveStateManager.endMove(u)))}isValidStartEvent(a){return this._executeRelevantHandler(a,(u=>this.mouseMoveStateManager.isValidStartEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidStartEvent(u)))}isValidMoveEvent(a){return this._executeRelevantHandler(a,(u=>this.mouseMoveStateManager.isValidMoveEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidMoveEvent(u)))}isValidEndEvent(a){return this._executeRelevantHandler(a,(u=>this.mouseMoveStateManager.isValidEndEvent(u)),(u=>this.oneFingerTouchMoveStateManager.isValidEndEvent(u)))}}const au=C=>{C.mousedown=C.dragStart,C.mousemoveWindow=C.dragMove,C.mouseup=C.dragEnd,C.contextmenu=a=>{a.preventDefault()}};class Wp{constructor(a,u){this._clickTolerance=a.clickTolerance||1,this._map=u,this.reset()}reset(){this._active=!1,this._touches={},this._sum=new o.P(0,0)}_shouldBePrevented(a){return a<(this._map.cooperativeGestures.isEnabled()?2:1)}touchstart(a,u,y){return this._calculateTransform(a,u,y)}touchmove(a,u,y){if(this._active){if(!this._shouldBePrevented(y.length))return a.preventDefault(),this._calculateTransform(a,u,y);this._map.cooperativeGestures.notifyGestureBlocked("touch_pan",a)}}touchend(a,u,y){this._calculateTransform(a,u,y),this._active&&this._shouldBePrevented(y.length)&&this.reset()}touchcancel(){this.reset()}_calculateTransform(a,u,y){y.length>0&&(this._active=!0);const b=ta(y,u),j=new o.P(0,0),I=new o.P(0,0);let F=0;for(const Y in b){const re=b[Y],ce=this._touches[Y];ce&&(j._add(re),I._add(re.sub(ce)),F++,b[Y]=re)}if(this._touches=b,this._shouldBePrevented(F)||!I.mag())return;const U=I.div(F);return this._sum._add(U),this._sum.mag()<this._clickTolerance?void 0:{around:j.div(F),panDelta:U}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $h{constructor(){this.reset()}reset(){this._active=!1,delete this._firstTwoTouches}touchstart(a,u,y){this._firstTwoTouches||y.length<2||(this._firstTwoTouches=[y[0].identifier,y[1].identifier],this._start([u[0],u[1]]))}touchmove(a,u,y){if(!this._firstTwoTouches)return;a.preventDefault();const[b,j]=this._firstTwoTouches,I=Uu(y,u,b),F=Uu(y,u,j);if(!I||!F)return;const U=this._aroundCenter?null:I.add(F).div(2);return this._move([I,F],U,a)}touchend(a,u,y){if(!this._firstTwoTouches)return;const[b,j]=this._firstTwoTouches,I=Uu(y,u,b),F=Uu(y,u,j);I&&F||(this._active&&O.suppressClick(),this.reset())}touchcancel(){this.reset()}enable(a){this._enabled=!0,this._aroundCenter=!!a&&a.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}}function Uu(C,a,u){for(let y=0;y<C.length;y++)if(C[y].identifier===u)return a[y]}function Hp(C,a){return Math.log(C/a)/Math.LN2}class ou extends $h{reset(){super.reset(),delete this._distance,delete this._startDistance}_start(a){this._startDistance=this._distance=a[0].dist(a[1])}_move(a,u){const y=this._distance;if(this._distance=a[0].dist(a[1]),this._active||!(Math.abs(Hp(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Hp(this._distance,y),pinchAround:u}}}function Ff(C,a){return 180*C.angleWith(a)/Math.PI}class Zp extends $h{reset(){super.reset(),delete this._minDiameter,delete this._startVector,delete this._vector}_start(a){this._startVector=this._vector=a[0].sub(a[1]),this._minDiameter=a[0].dist(a[1])}_move(a,u,y){const b=this._vector;if(this._vector=a[0].sub(a[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Ff(this._vector,b),pinchAround:u}}_isBelowThreshold(a){this._minDiameter=Math.min(this._minDiameter,a.mag());const u=25/(Math.PI*this._minDiameter)*360,y=Ff(a,this._startVector);return Math.abs(y)<u}}function qu(C){return Math.abs(C.y)>Math.abs(C.x)}class Vh extends $h{constructor(a){super(),this._currentTouchCount=0,this._map=a}reset(){super.reset(),this._valid=void 0,delete this._firstMove,delete this._lastPoints}touchstart(a,u,y){super.touchstart(a,u,y),this._currentTouchCount=y.length}_start(a){this._lastPoints=a,qu(a[0].sub(a[1]))&&(this._valid=!1)}_move(a,u,y){if(this._map.cooperativeGestures.isEnabled()&&this._currentTouchCount<3)return;const b=a[0].sub(this._lastPoints[0]),j=a[1].sub(this._lastPoints[1]);return this._valid=this.gestureBeginsVertically(b,j,y.timeStamp),this._valid?(this._lastPoints=a,this._active=!0,{pitchDelta:(b.y+j.y)/2*-.5}):void 0}gestureBeginsVertically(a,u,y){if(this._valid!==void 0)return this._valid;const b=a.mag()>=2,j=u.mag()>=2;if(!b&&!j)return;if(!b||!j)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;const I=a.y>0==u.y>0;return qu(a)&&qu(u)&&I}}const mc={panStep:100,bearingStep:15,pitchStep:10};class Lr{constructor(a){this._tr=new ys(a);const u=mc;this._panStep=u.panStep,this._bearingStep=u.bearingStep,this._pitchStep=u.pitchStep,this._rotationDisabled=!1}reset(){this._active=!1}keydown(a){if(a.altKey||a.ctrlKey||a.metaKey)return;let u=0,y=0,b=0,j=0,I=0;switch(a.keyCode){case 61:case 107:case 171:case 187:u=1;break;case 189:case 109:case 173:u=-1;break;case 37:a.shiftKey?y=-1:(a.preventDefault(),j=-1);break;case 39:a.shiftKey?y=1:(a.preventDefault(),j=1);break;case 38:a.shiftKey?b=1:(a.preventDefault(),I=-1);break;case 40:a.shiftKey?b=-1:(a.preventDefault(),I=1);break;default:return}return this._rotationDisabled&&(y=0,b=0),{cameraAnimation:F=>{const U=this._tr;F.easeTo({duration:300,easeId:"keyboardHandler",easing:Bd,zoom:u?o.cx(U.zoom+u*(a.shiftKey?2:1),F.getZoomSnap()):U.zoom,bearing:U.bearing+y*this._bearingStep,pitch:U.pitch+b*this._pitchStep,offset:[-j*this._panStep,-I*this._panStep],center:U.center},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function Bd(C){return C*(2-C)}const $d=4.000244140625,Gu=1/450;class Wu{constructor(a,u){this._onTimeout=y=>{this._type="wheel",this._delta-=this._lastValue,this._active||this._start(y)},this._map=a,this._tr=new ys(a),this._triggerRenderFrame=u,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Gu}setZoomRate(a){this._defaultZoomRate=a}setWheelZoomRate(a){this._wheelZoomRate=a}isEnabled(){return!!this._enabled}isActive(){return!!this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(a){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!a&&a.around==="center")}disable(){this.isEnabled()&&(this._enabled=!1)}_shouldBePrevented(a){return!!this._map.cooperativeGestures.isEnabled()&&!(a.ctrlKey||this._map.cooperativeGestures.isBypassed(a))}wheel(a){if(!this.isEnabled())return;if(this._shouldBePrevented(a))return void this._map.cooperativeGestures.notifyGestureBlocked("wheel_zoom",a);let u=a.deltaMode===WheelEvent.DOM_DELTA_LINE?40*a.deltaY:a.deltaY;const y=$(),b=y-(this._lastWheelEventTime||0);this._lastWheelEventTime=y,u!==0&&u%$d==0?this._type="wheel":u!==0&&Math.abs(u)<4?this._type="trackpad":b>400?(this._type=null,this._lastValue=u,this._timeout=setTimeout(this._onTimeout,40,a)):this._type||(this._type=Math.abs(b*u)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,u+=this._lastValue)),a.shiftKey&&u&&(u/=4),this._type&&(this._lastWheelEvent=a,this._delta-=u,this._active||this._start(a)),a.preventDefault()}_start(a){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const u=O.mousePos(this._map.getCanvas(),a),y=this._tr;this._aroundPoint=this._aroundCenter?y.transform.locationToScreenPoint(o.V.convert(y.center)):u,this._frameId||(this._frameId=!0,this._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const a=this._tr.transform;if(typeof this._lastExpectedZoom=="number"){const F=a.zoom-this._lastExpectedZoom;typeof this._startZoom=="number"&&(this._startZoom+=F),typeof this._targetZoom=="number"&&(this._targetZoom+=F)}if(this._delta!==0){const F=this._type==="wheel"&&Math.abs(this._delta)>$d?this._wheelZoomRate:this._defaultZoomRate;let U=2/(1+Math.exp(-Math.abs(this._delta*F)));this._delta<0&&U!==0&&(U=1/U);const Y=typeof this._targetZoom!="number"?a.scale:o.aq(this._targetZoom),re=a.applyConstrain(a.getCameraLngLat(),o.at(Y*U)).zoom,ce=this._map.getZoomSnap();if(this._type==="wheel"&&ce>0){const le=o.cx(a.zoom,ce);this._targetZoom=o.cx(re,ce,re-le)}else this._targetZoom=re;this._type==="wheel"&&(this._startZoom=a.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}const u=typeof this._targetZoom!="number"?a.zoom:this._targetZoom,y=this._startZoom,b=this._easing;let j,I=!1;if(this._type==="wheel"&&y&&b){const F=$()-this._lastWheelEventTime,U=Math.min((F+5)/200,1),Y=b(U);j=o.G.number(y,u,Y),U<1?this._frameId||(this._frameId=!0):I=!0}else j=u,I=!0;return this._active=!0,I&&(this._active=!1,this._finishTimeout=setTimeout((()=>{this._zooming=!1,this._triggerRenderFrame(),delete this._targetZoom,delete this._lastExpectedZoom,delete this._finishTimeout}),200)),this._lastExpectedZoom=j,{noInertia:!0,needsRenderFrame:!I,zoomDelta:j-a.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}_smoothOutEasing(a){let u=o.cz;if(this._prevEase){const y=this._prevEase,b=($()-y.start)/y.duration,j=y.easing(b+.01)-y.easing(b),I=.27/Math.sqrt(j*j+1e-4)*.01,F=Math.sqrt(.0729-I*I);u=o.cw(I,F,.25,1)}return this._prevEase={start:$(),duration:a,easing:u},u}reset(){this._active=!1,this._zooming=!1,delete this._targetZoom,delete this._lastExpectedZoom,this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout)}}class su{constructor(a,u){this._clickZoom=a,this._tapZoom=u}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class Bf{constructor(a){this._tr=new ys(a),this.reset()}reset(){this._active=!1}dblclick(a,u){return a.preventDefault(),{cameraAnimation:y=>{y.easeTo({duration:300,zoom:o.cx(this._tr.zoom+(a.shiftKey?-1:1),y.getZoomSnap()),around:this._tr.unproject(u)},{originalEvent:a})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class $f{constructor(){this._tap=new Fh({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,delete this._tapPoint,this._tap.reset()}touchstart(a,u,y){if(!this._swipePoint)if(this._tapTime){const b=u[0],j=a.timeStamp-this._tapTime<500,I=this._tapPoint.dist(b)<30;j&&I?y.length>0&&(this._swipePoint=b,this._swipeTouch=y[0].identifier):this.reset()}else this._tap.touchstart(a,u,y)}touchmove(a,u,y){if(this._tapTime){if(this._swipePoint){if(y[0].identifier!==this._swipeTouch)return;const b=u[0],j=b.y-this._swipePoint.y;return this._swipePoint=b,a.preventDefault(),this._active=!0,{zoomDelta:j/128}}}else this._tap.touchmove(a,u,y)}touchend(a,u,y){if(this._tapTime)this._swipePoint&&y.length===0&&this.reset();else{const b=this._tap.touchend(a,u,y);b&&(this._tapTime=a.timeStamp,this._tapPoint=b)}}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class Vf{constructor(a,u,y){this._el=a,this._mousePan=u,this._touchPan=y}enable(a){this._inertiaOptions=a||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("maplibregl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("maplibregl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class Jo{constructor(a,u,y,b){this._pitchWithRotate=a.pitchWithRotate,this._rollEnabled=a.rollEnabled,this._mouseRotate=u,this._mousePitch=y,this._mouseRoll=b}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable(),this._rollEnabled&&this._mouseRoll.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable(),this._mouseRoll.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())&&(!this._rollEnabled||this._mouseRoll.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()||this._mouseRoll.isActive()}}class Cl{constructor(a,u,y,b){this._el=a,this._touchZoom=u,this._touchRotate=y,this._tapDragZoom=b,this._rotationDisabled=!1,this._enabled=!0}enable(a){this._touchZoom.enable(a),this._rotationDisabled||this._touchRotate.enable(a),this._tapDragZoom.enable(),this._el.classList.add("maplibregl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("maplibregl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}class an{constructor(a,u){this._bypassKey=navigator.userAgent.indexOf("Mac")!==-1?"metaKey":"ctrlKey",this._map=a,this._options=u,this._enabled=!1}isActive(){return!1}reset(){}_setupUI(){if(this._container)return;const a=this._map.getCanvasContainer();a.classList.add("maplibregl-cooperative-gestures"),this._container=O.create("div","maplibregl-cooperative-gesture-screen",a);let u=this._map._getUIString("CooperativeGesturesHandler.WindowsHelpText");this._bypassKey==="metaKey"&&(u=this._map._getUIString("CooperativeGesturesHandler.MacHelpText"));const y=this._map._getUIString("CooperativeGesturesHandler.MobileHelpText"),b=document.createElement("div");b.className="maplibregl-desktop-message",b.textContent=u,this._container.appendChild(b);const j=document.createElement("div");j.className="maplibregl-mobile-message",j.textContent=y,this._container.appendChild(j),this._container.setAttribute("aria-hidden","true")}_destroyUI(){this._container&&(O.remove(this._container),this._map.getCanvasContainer().classList.remove("maplibregl-cooperative-gestures")),delete this._container}enable(){this._setupUI(),this._enabled=!0}disable(){this._enabled=!1,this._destroyUI()}isEnabled(){return this._enabled}isBypassed(a){return a[this._bypassKey]}notifyGestureBlocked(a,u){this._enabled&&(this._map.fire(new o.l("cooperativegestureprevented",{gestureType:a,originalEvent:u})),this._container.classList.add("maplibregl-show"),setTimeout((()=>{this._container.classList.remove("maplibregl-show")}),100))}}const vn=C=>C.zoom||C.drag||C.roll||C.pitch||C.rotate;class Hu extends o.l{}function Uh(C){return C.panDelta&&C.panDelta.mag()||C.zoomDelta||C.bearingDelta||C.pitchDelta||C.rollDelta}class vs{get _ownerDocument(){var a;return((a=this._el)===null||a===void 0?void 0:a.ownerDocument)||document}get _ownerWindow(){var a,u;return((u=(a=this._el)===null||a===void 0?void 0:a.ownerDocument)===null||u===void 0?void 0:u.defaultView)||window}constructor(a,u){this.handleWindowEvent=b=>{this.handleEvent(b,`${b.type}Window`)},this.handleEvent=(b,j)=>{if(b.type==="blur")return void this.stop(!0);this._updatingCamera=!0;const I=b.type==="renderFrame"?void 0:b,F={needsRenderFrame:!1},U={},Y={};for(const{handlerName:le,handler:ge,allowed:be}of this._handlers){if(!ge.isEnabled())continue;let Me;if(this._blockedByActive(Y,be,le))ge.reset();else if(ge[j||b.type]){if(o.cA(b,j||b.type)){const Ne=O.mousePos(this._map.getCanvas(),b);Me=ge[j||b.type](b,Ne)}else if(o.cB(b,j||b.type)){const Ne=this._getMapTouches(b.touches),Ie=O.touchPos(this._map.getCanvas(),Ne);Me=ge[j||b.type](b,Ie,Ne)}else o.cC(j||b.type)||(Me=ge[j||b.type](b));this.mergeHandlerResult(F,U,Me,le,I),Me&&Me.needsRenderFrame&&this._triggerRenderFrame()}(Me||ge.isActive())&&(Y[le]=ge)}const re={};for(const le in this._previousActiveHandlers)Y[le]||(re[le]=I);this._previousActiveHandlers=Y,(Object.keys(re).length||Uh(F))&&(this._changes.push([F,U,re]),this._triggerRenderFrame()),(Object.keys(Y).length||Uh(F))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:ce}=F;ce&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],ce(this._map))},this._map=a,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new cv(a),this._bearingSnap=u.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(u);const y=this._el;this._listeners=[[y,"touchstart",{passive:!0}],[y,"touchmove",{passive:!1}],[y,"touchend",void 0],[y,"touchcancel",void 0],[y,"mousedown",void 0],[y,"mousemove",void 0],[y,"mouseup",void 0],[this._ownerDocument,"mousemove",{capture:!0}],[this._ownerDocument,"mouseup",void 0],[y,"mouseover",void 0],[y,"mouseout",void 0],[y,"dblclick",void 0],[y,"click",void 0],[y,"keydown",{capture:!1}],[y,"keyup",void 0],[y,"wheel",{passive:!1}],[y,"contextmenu",void 0],[this._ownerWindow,"blur",void 0]];for(const[b,j,I]of this._listeners)O.addEventListener(b,j,b===this._ownerDocument?this.handleWindowEvent:this.handleEvent,I)}destroy(){for(const[a,u,y]of this._listeners)O.removeEventListener(a,u,a===this._ownerDocument?this.handleWindowEvent:this.handleEvent,y)}_addDefaultHandlers(a){const u=this._map,y=u.getCanvasContainer();this._add("mapEvent",new ms(u,a));const b=u.boxZoom=new Mo(u,a);this._add("boxZoom",b),a.interactive&&a.boxZoom&&b.enable();const j=u.cooperativeGestures=new an(u,a.cooperativeGestures);this._add("cooperativeGestures",j),a.cooperativeGestures&&j.enable();const I=new Bh(u),F=new Bf(u);u.doubleClickZoom=new su(F,I),this._add("tapZoom",I),this._add("clickZoom",F),a.interactive&&a.doubleClickZoom&&u.doubleClickZoom.enable();const U=new $f;this._add("tapDragZoom",U);const Y=u.touchPitch=new Vh(u);this._add("touchPitch",Y),a.interactive&&a.touchPitch&&u.touchPitch.enable(a.touchPitch);const re=()=>u.project(u.getCenter()),ce=(function({enable:Fe,clickTolerance:Ge,aroundCenter:Ye=!0,minPixelCenterThreshold:Ue=100,rotateDegreesPerPixelMoved:st=.8},bt){const yt=new oo({checkCorrectEvent:vt=>O.mouseButton(vt)===0&&vt.ctrlKey||O.mouseButton(vt)===2&&!vt.ctrlKey});return new iu({clickTolerance:Ge,move:(vt,xt)=>{const qt=bt();if(Ye&&Math.abs(qt.y-vt.y)>Ue)return{bearingDelta:o.cy(new o.P(vt.x,xt.y),xt,qt)};let Gt=(xt.x-vt.x)*st;return Ye&&xt.y<qt.y&&(Gt=-Gt),{bearingDelta:Gt}},moveStateManager:yt,enable:Fe,assignEvents:au})})(a,re),le=(function({enable:Fe,clickTolerance:Ge,pitchDegreesPerPixelMoved:Ye=-.5}){const Ue=new oo({checkCorrectEvent:st=>O.mouseButton(st)===0&&st.ctrlKey||O.mouseButton(st)===2});return new iu({clickTolerance:Ge,move:(st,bt)=>({pitchDelta:(bt.y-st.y)*Ye}),moveStateManager:Ue,enable:Fe,assignEvents:au})})(a),ge=(function({enable:Fe,clickTolerance:Ge,rollDegreesPerPixelMoved:Ye=.3},Ue){const st=new oo({checkCorrectEvent:bt=>O.mouseButton(bt)===2&&bt.ctrlKey});return new iu({clickTolerance:Ge,move:(bt,yt)=>{const vt=Ue();let xt=(yt.x-bt.x)*Ye;return yt.y<vt.y&&(xt=-xt),{rollDelta:xt}},moveStateManager:st,enable:Fe,assignEvents:au})})(a,re);u.dragRotate=new Jo(a,ce,le,ge),this._add("mouseRotate",ce,["mousePitch"]),this._add("mousePitch",le,["mouseRotate","mouseRoll"]),this._add("mouseRoll",ge,["mousePitch"]),a.interactive&&a.dragRotate&&u.dragRotate.enable();const be=(function({enable:Fe,clickTolerance:Ge}){const Ye=new oo({checkCorrectEvent:Ue=>O.mouseButton(Ue)===0&&!Ue.ctrlKey});return new iu({clickTolerance:Ge,move:(Ue,st)=>({around:st,panDelta:st.sub(Ue)}),activateOnStart:!0,moveStateManager:Ye,enable:Fe,assignEvents:au})})(a),Me=new Wp(a,u);u.dragPan=new Vf(y,be,Me),this._add("mousePan",be),this._add("touchPan",Me,["touchZoom","touchRotate"]),a.interactive&&a.dragPan&&u.dragPan.enable(a.dragPan);const Ne=new Zp,Ie=new ou;u.touchZoomRotate=new Cl(y,Ie,Ne,U),this._add("touchRotate",Ne,["touchPan","touchZoom"]),this._add("touchZoom",Ie,["touchPan","touchRotate"]),a.interactive&&a.touchZoomRotate&&u.touchZoomRotate.enable(a.touchZoomRotate),this._add("blockableMapEvent",new gs(u));const ze=u.scrollZoom=new Wu(u,(()=>this._triggerRenderFrame()));this._add("scrollZoom",ze,["mousePan"]),a.interactive&&a.scrollZoom&&u.scrollZoom.enable(a.scrollZoom);const He=u.keyboard=new Lr(u);this._add("keyboard",He),a.interactive&&a.keyboard&&u.keyboard.enable()}_add(a,u,y){this._handlers.push({handlerName:a,handler:u,allowed:y}),this._handlersById[a]=u}stop(a){if(!this._updatingCamera){for(const{handler:u}of this._handlers)u.reset();this._inertia.clear(),this._fireEvents({},{},a),this._changes=[]}}isActive(){for(const{handler:a}of this._handlers)if(a.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!vn(this._eventsInProgress)||this.isZooming()}_blockedByActive(a,u,y){for(const b in a)if(b!==y&&(!u||u.indexOf(b)<0))return!0;return!1}_getMapTouches(a){const u=[];for(const y of a)this._el.contains(y.target)&&u.push(y);return u}mergeHandlerResult(a,u,y,b,j){if(!y)return;o.e(a,y);const I={handlerName:b,originalEvent:y.originalEvent||j};y.zoomDelta!==void 0&&(u.zoom=I),y.panDelta!==void 0&&(u.drag=I),y.rollDelta!==void 0&&(u.roll=I),y.pitchDelta!==void 0&&(u.pitch=I),y.bearingDelta!==void 0&&(u.rotate=I)}_applyChanges(){const a={},u={},y={};for(const[b,j,I]of this._changes)b.panDelta&&(a.panDelta=(a.panDelta||new o.P(0,0))._add(b.panDelta)),b.zoomDelta&&(a.zoomDelta=(a.zoomDelta||0)+b.zoomDelta),b.bearingDelta&&(a.bearingDelta=(a.bearingDelta||0)+b.bearingDelta),b.pitchDelta&&(a.pitchDelta=(a.pitchDelta||0)+b.pitchDelta),b.rollDelta&&(a.rollDelta=(a.rollDelta||0)+b.rollDelta),b.around!==void 0&&(a.around=b.around),b.pinchAround!==void 0&&(a.pinchAround=b.pinchAround),b.noInertia&&(a.noInertia=b.noInertia),o.e(u,j),o.e(y,I);this._updateMapTransform(a,u,y),this._changes=[]}_updateMapTransform(a,u,y){const b=this._map,j=b._getTransformForUpdate(),I=b.terrain;if(!(Uh(a)||I&&this._terrainMovement))return this._fireEvents(u,y,!0);b._stop(!0);let{panDelta:F,zoomDelta:U,bearingDelta:Y,pitchDelta:re,rollDelta:ce,around:le,pinchAround:ge}=a;ge!==void 0&&(le=ge),le=le||b.transform.centerPoint,I&&!j.isPointOnMapSurface(le)&&(le=j.centerPoint);const be={panDelta:F,zoomDelta:U,rollDelta:ce,pitchDelta:re,bearingDelta:Y,around:le};this._map.cameraHelper.useGlobeControls&&!j.isPointOnMapSurface(le)&&(le=j.centerPoint);const Me=le.distSqr(j.centerPoint)<.01?j.center:j.screenPointToLocation(F?le.sub(F):le);this._handleMapControls({terrain:I,tr:j,deltasForHelper:be,preZoomAroundLoc:Me,combinedEventsInProgress:u,panDelta:F}),b._applyUpdatedTransform(j),this._map._update(),a.noInertia||this._inertia.record(a),this._fireEvents(u,y,!0)}_handleMapControls({terrain:a,tr:u,deltasForHelper:y,preZoomAroundLoc:b,combinedEventsInProgress:j,panDelta:I}){const F=this._map.cameraHelper;if(F.handleMapControlsRollPitchBearingZoom(y,u),a)return F.useGlobeControls?(this._terrainMovement||!j.drag&&!j.zoom||(this._terrainMovement=!0,this._map._elevationFreeze=!0),void F.handleMapControlsPan(y,u,b)):this._terrainMovement||!j.drag&&!j.zoom?void(j.drag&&this._terrainMovement&&I?u.setCenter(u.screenPointToLocation(u.centerPoint.sub(I))):F.handleMapControlsPan(y,u,b)):(this._terrainMovement=!0,this._map._elevationFreeze=!0,void F.handleMapControlsPan(y,u,b));F.handleMapControlsPan(y,u,b)}_fireEvents(a,u,y){const b=vn(this._eventsInProgress),j=vn(a),I={};for(const ce in a){const{originalEvent:le}=a[ce];this._eventsInProgress[ce]||(I[`${ce}start`]=le),this._eventsInProgress[ce]=a[ce]}!b&&j&&this._fireEvent("movestart",j.originalEvent);for(const ce in I)this._fireEvent(ce,I[ce]);j&&this._fireEvent("move",j.originalEvent);for(const ce in a){const{originalEvent:le}=a[ce];this._fireEvent(ce,le)}const F={};let U;for(const ce in this._eventsInProgress){const{handlerName:le,originalEvent:ge}=this._eventsInProgress[ce];this._handlersById[le].isActive()||(delete this._eventsInProgress[ce],U=u[le]||ge,F[`${ce}end`]=U)}for(const ce in F)this._fireEvent(ce,F[ce]);const Y=vn(this._eventsInProgress),re=(b||j)&&!Y;if(re&&this._terrainMovement){this._map._elevationFreeze=!1,this._terrainMovement=!1;const ce=this._map._getTransformForUpdate();this._map.getCenterClampedToGround()&&ce.recalculateZoomAndCenter(this._map.terrain),this._map._applyUpdatedTransform(ce)}if(y&&re){this._updatingCamera=!0;const ce=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),le=ge=>ge!==0&&-this._bearingSnap<ge&&ge<this._bearingSnap;!ce||!ce.essential&&z.prefersReducedMotion?(this._map.fire(new o.l("moveend",{originalEvent:U})),le(this._map.getBearing())&&this._map.resetNorth()):(le(ce.bearing||this._map.getBearing())&&(ce.bearing=0),ce.freezeElevation=!0,this._map.easeTo(ce,{originalEvent:U})),this._updatingCamera=!1}}_fireEvent(a,u){this._map.fire(new o.l(a,u?{originalEvent:u}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add((a=>{delete this._frameId,this.handleEvent(new Hu("renderFrame",{timeStamp:a})),this._applyChanges()}))}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}class Ei extends o.E{constructor(a,u,y){super(),this._renderFrameCallback=()=>{const b=Math.min(($()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(b)),b<1&&this._easeFrameId?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},this._moving=!1,this._zooming=!1,this.transform=a,this._bearingSnap=y.bearingSnap,this._zoomSnap=y.zoomSnap,this.cameraHelper=u,this.on("moveend",(()=>{delete this._requestedCameraState}))}migrateProjection(a,u){a.apply(this.transform,!0),this.transform=a,this.cameraHelper=u}getCenter(){return new o.V(this.transform.center.lng,this.transform.center.lat)}setCenter(a,u){return this.jumpTo({center:a},u)}getCenterElevation(){return this.transform.elevation}setCenterElevation(a,u){return this.jumpTo({elevation:a},u),this}getCenterClampedToGround(){return this._centerClampedToGround}setCenterClampedToGround(a){this._centerClampedToGround=a}panBy(a,u,y){return a=o.P.convert(a).mult(-1),this.panTo(this.transform.center,o.e({offset:a},u),y)}panTo(a,u,y){return this.easeTo(o.e({center:a},u),y)}getZoom(){return this.transform.zoom}setZoom(a,u){return this.jumpTo({zoom:a},u),this}zoomTo(a,u,y){return this.easeTo(o.e({zoom:a},u),y)}zoomIn(a,u){return this.zoomTo(o.cx(this.getZoom()+1,this._zoomSnap),a,u),this}zoomOut(a,u){return this.zoomTo(o.cx(this.getZoom()-1,this._zoomSnap),a,u),this}getVerticalFieldOfView(){return this.transform.fov}setVerticalFieldOfView(a,u){return a!=this.transform.fov&&(this.transform.setFov(a),this.fire(new o.l("movestart",u)).fire(new o.l("move",u)).fire(new o.l("moveend",u))),this}getBearing(){return this.transform.bearing}setZoomSnap(a){return this._zoomSnap=a,this}getZoomSnap(){return this._zoomSnap}setBearing(a,u){return this.jumpTo({bearing:a},u),this}getPadding(){return this.transform.padding}setPadding(a,u){return this.jumpTo({padding:a},u),this}rotateTo(a,u,y){return this.easeTo(o.e({bearing:a},u),y)}resetNorth(a,u){return this.rotateTo(0,o.e({duration:1e3},a),u),this}resetNorthPitch(a,u){return this.easeTo(o.e({bearing:0,pitch:0,roll:0,duration:1e3},a),u),this}snapToNorth(a,u){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(a,u):this}getPitch(){return this.transform.pitch}setPitch(a,u){return this.jumpTo({pitch:a},u),this}getRoll(){return this.transform.roll}setRoll(a,u){return this.jumpTo({roll:a},u),this}cameraForBounds(a,u){a=Mn.convert(a).adjustAntiMeridian();const y=u&&u.bearing||0;return this._cameraForBoxAndBearing(a.getNorthWest(),a.getSouthEast(),y,u)}_cameraForBoxAndBearing(a,u,y,b){const j={top:0,bottom:0,right:0,left:0};if(typeof(b=o.e({padding:j,offset:[0,0],maxZoom:this.transform.maxZoom},b)).padding=="number"){const Y=b.padding;b.padding={top:Y,bottom:Y,right:Y,left:Y}}const I=o.e(j,b.padding);b.padding=I;const F=this.transform,U=new Mn(a,u);return this.cameraHelper.cameraForBoxAndBearing(b,I,U,y,F)}fitBounds(a,u,y){return this._fitInternal(this.cameraForBounds(a,u),u,y)}fitScreenCoordinates(a,u,y,b,j){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.screenPointToLocation(o.P.convert(a)),this.transform.screenPointToLocation(o.P.convert(u)),y,b),b,j)}_fitInternal(a,u,y){return a?(delete(u=o.e(a,u)).padding,u.linear?this.easeTo(u,y):this.flyTo(u,y)):this}jumpTo(a,u){this.stop();const y=this._getTransformForUpdate();let b=!1,j=!1,I=!1;const F=y.zoom;this.cameraHelper.handleJumpToCenterZoom(y,a);const U=y.zoom!==F;return"elevation"in a&&y.elevation!==+a.elevation&&y.setElevation(+a.elevation),"bearing"in a&&y.bearing!==+a.bearing&&(b=!0,y.setBearing(+a.bearing)),"pitch"in a&&y.pitch!==+a.pitch&&(j=!0,y.setPitch(+a.pitch)),"roll"in a&&y.roll!==+a.roll&&(I=!0,y.setRoll(+a.roll)),a.padding==null||y.isPaddingEqual(a.padding)||y.setPadding(a.padding),this._applyUpdatedTransform(y),this.fire(new o.l("movestart",u)).fire(new o.l("move",u)),U&&this.fire(new o.l("zoomstart",u)).fire(new o.l("zoom",u)).fire(new o.l("zoomend",u)),b&&this.fire(new o.l("rotatestart",u)).fire(new o.l("rotate",u)).fire(new o.l("rotateend",u)),j&&this.fire(new o.l("pitchstart",u)).fire(new o.l("pitch",u)).fire(new o.l("pitchend",u)),I&&this.fire(new o.l("rollstart",u)).fire(new o.l("roll",u)).fire(new o.l("rollend",u)),this.fire(new o.l("moveend",u))}calculateCameraOptionsFromTo(a,u,y,b=0){const j=o.a9.fromLngLat(a,u),I=o.a9.fromLngLat(y,b),F=I.x-j.x,U=I.y-j.y,Y=I.z-j.z,re=Math.hypot(F,U,Y);if(re===0)throw new Error("Can't calculate camera options with same From and To");const ce=Math.hypot(F,U),le=o.at(this.transform.cameraToCenterDistance/re/this.transform.tileSize),ge=180*Math.atan2(F,-U)/Math.PI;let be=180*Math.acos(ce/re)/Math.PI;return be=Y<0?90-be:90+be,{center:I.toLngLat(),elevation:b,zoom:le,pitch:be,bearing:ge}}calculateCameraOptionsFromCameraLngLatAltRotation(a,u,y,b,j){const I=this.transform.calculateCenterFromCameraLngLatAlt(a,u,y,b);return{center:I.center,elevation:I.elevation,zoom:I.zoom,bearing:y,pitch:b,roll:j}}easeTo(a,u){this._stop(!1,a.easeId),((a=o.e({offset:[0,0],duration:500,easing:o.cz},a)).animate===!1||!a.essential&&z.prefersReducedMotion)&&(a.duration=0);const y=this._getTransformForUpdate(),b=this.getBearing(),j=y.pitch,I=y.roll,F="bearing"in a?this._normalizeBearing(a.bearing,b):b,U="pitch"in a?+a.pitch:j,Y="roll"in a?this._normalizeBearing(a.roll,I):I,re="padding"in a?a.padding:y.padding,ce=o.P.convert(a.offset);let le,ge;a.around&&(le=o.V.convert(a.around),ge=y.locationToScreenPoint(le));const be={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching,rolling:this._rolling},Me=this.cameraHelper.handleEaseTo(y,{bearing:F,pitch:U,roll:Y,padding:re,around:le,aroundPoint:ge,offsetAsPoint:ce,offset:a.offset,zoom:a.zoom,center:a.center});return this._rotating=this._rotating||b!==F,this._pitching=this._pitching||U!==j,this._rolling=this._rolling||Y!==I,this._padding=!y.isPaddingEqual(re),this._zooming=this._zooming||Me.isZooming,this._easeId=a.easeId,this._prepareEase(u,a.noMoveStart,be),this.terrain&&this._prepareElevation(Me.elevationCenter),this._ease((Ne=>{Me.easeFunc(Ne),this.terrain&&!a.freezeElevation&&this._updateElevation(Ne),this._applyUpdatedTransform(y),this._fireMoveEvents(u)}),(Ne=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(u,Ne)}),a),this}_prepareEase(a,u,y={}){this._moving=!0,u||y.moving||this.fire(new o.l("movestart",a)),this._zooming&&!y.zooming&&this.fire(new o.l("zoomstart",a)),this._rotating&&!y.rotating&&this.fire(new o.l("rotatestart",a)),this._pitching&&!y.pitching&&this.fire(new o.l("pitchstart",a)),this._rolling&&!y.rolling&&this.fire(new o.l("rollstart",a))}_prepareElevation(a){this._elevationCenter=a,this._elevationStart=this.transform.elevation,this._elevationTarget=this.terrain.getElevationForLngLatZoom(a,this.transform.tileZoom),this._elevationFreeze=!0}_updateElevation(a){this._elevationStart!==void 0&&this._elevationCenter!==void 0||this._prepareElevation(this.transform.center),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom));const u=this.terrain.getElevationForLngLatZoom(this._elevationCenter,this.transform.tileZoom);if(a<1&&u!==this._elevationTarget){const y=this._elevationTarget-this._elevationStart;this._elevationStart+=a*(y-(u-(y*a+this._elevationStart))/(1-a)),this._elevationTarget=u}this.transform.setElevation(o.G.number(this._elevationStart,this._elevationTarget,a))}_finalizeElevation(){this._elevationFreeze=!1,this.getCenterClampedToGround()&&this.transform.recalculateZoomAndCenter(this.terrain)}_getTransformForUpdate(){return this.transformCameraUpdate||this.terrain?(this._requestedCameraState||(this._requestedCameraState=this.transform.clone()),this._requestedCameraState):this.transform}_elevateCameraIfInsideTerrain(a){if(!this.terrain&&a.elevation>=0&&a.pitch<=90)return{};const u=a.getCameraLngLat(),y=a.getCameraAltitude(),b=this.terrain?this.terrain.getElevationForLngLatZoom(u,a.zoom):0;if(y<b){const j=this.calculateCameraOptionsFromTo(u,b,a.center,a.elevation);return{pitch:j.pitch,zoom:j.zoom}}return{}}_applyUpdatedTransform(a){const u=[];if(u.push((b=>this._elevateCameraIfInsideTerrain(b))),this.transformCameraUpdate&&u.push((b=>this.transformCameraUpdate(b))),!u.length)return;const y=a.clone();for(const b of u){const j=y.clone(),{center:I,zoom:F,roll:U,pitch:Y,bearing:re,elevation:ce}=b(j);I&&j.setCenter(I),ce!==void 0&&j.setElevation(ce),F!==void 0&&j.setZoom(F),U!==void 0&&j.setRoll(U),Y!==void 0&&j.setPitch(Y),re!==void 0&&j.setBearing(re),y.apply(j,!1)}this.transform.apply(y,!1)}_fireMoveEvents(a){this.fire(new o.l("move",a)),this._zooming&&this.fire(new o.l("zoom",a)),this._rotating&&this.fire(new o.l("rotate",a)),this._pitching&&this.fire(new o.l("pitch",a)),this._rolling&&this.fire(new o.l("roll",a))}_afterEase(a,u){if(this._easeId&&u&&this._easeId===u)return;delete this._easeId;const y=this._zooming,b=this._rotating,j=this._pitching,I=this._rolling;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._rolling=!1,this._padding=!1,y&&this.fire(new o.l("zoomend",a)),b&&this.fire(new o.l("rotateend",a)),j&&this.fire(new o.l("pitchend",a)),I&&this.fire(new o.l("rollend",a)),this.fire(new o.l("moveend",a))}flyTo(a,u){if(!a.essential&&z.prefersReducedMotion){const xt=o.U(a,["center","zoom","bearing","pitch","roll","elevation","padding"]);return this.jumpTo(xt,u)}this.stop(),a=o.e({offset:[0,0],speed:1.2,curve:1.42,easing:o.cz},a);const y=this._getTransformForUpdate(),b=y.bearing,j=y.pitch,I=y.roll,F=y.padding,U="bearing"in a?this._normalizeBearing(a.bearing,b):b,Y="pitch"in a?+a.pitch:j,re="roll"in a?this._normalizeBearing(a.roll,I):I,ce="padding"in a?a.padding:y.padding,le=o.P.convert(a.offset);let ge=y.centerPoint.add(le);const be=y.screenPointToLocation(ge),Me=this.cameraHelper.handleFlyTo(y,{bearing:U,pitch:Y,roll:re,padding:ce,locationAtOffset:be,offsetAsPoint:le,center:a.center,minZoom:a.minZoom,zoom:a.zoom});let Ne=a.curve;const Ie=Math.max(y.width,y.height),ze=Ie/Me.scaleOfZoom,He=Me.pixelPathLength;typeof Me.scaleOfMinZoom=="number"&&(Ne=Math.sqrt(Ie/Me.scaleOfMinZoom/He*2));const Fe=Ne*Ne;function Ge(xt){const qt=(ze*ze-Ie*Ie+(xt?-1:1)*Fe*Fe*He*He)/(2*(xt?ze:Ie)*Fe*He);return Math.log(Math.sqrt(qt*qt+1)-qt)}function Ye(xt){return(Math.exp(xt)-Math.exp(-xt))/2}function Ue(xt){return(Math.exp(xt)+Math.exp(-xt))/2}const st=Ge(!1);let bt=function(xt){return Ue(st)/Ue(st+Ne*xt)},yt=function(xt){return Ie*((Ue(st)*(Ye(qt=st+Ne*xt)/Ue(qt))-Ye(st))/Fe)/He;var qt},vt=(Ge(!0)-st)/Ne;if(Math.abs(He)<2e-6||!isFinite(vt)){if(Math.abs(Ie-ze)<1e-6)return this.easeTo(a,u);const xt=ze<Ie?-1:1;vt=Math.abs(Math.log(ze/Ie))/Ne,yt=()=>0,bt=qt=>Math.exp(xt*Ne*qt)}return a.duration="duration"in a?+a.duration:1e3*vt/("screenSpeed"in a?+a.screenSpeed/Ne:+a.speed),a.maxDuration&&a.duration>a.maxDuration&&(a.duration=0),this._zooming=!0,this._rotating=b!==U,this._pitching=Y!==j,this._rolling=re!==I,this._padding=!y.isPaddingEqual(ce),this._prepareEase(u,!1),this.terrain&&this._prepareElevation(Me.targetCenter),this._ease((xt=>{const qt=xt*vt,Gt=1/bt(qt),Rt=yt(qt);this._rotating&&y.setBearing(o.G.number(b,U,xt)),this._pitching&&y.setPitch(o.G.number(j,Y,xt)),this._rolling&&y.setRoll(o.G.number(I,re,xt)),this._padding&&(y.interpolatePadding(F,ce,xt),ge=y.centerPoint.add(le)),Me.easeFunc(xt,Gt,Rt,ge),this.terrain&&!a.freezeElevation&&this._updateElevation(xt),this._applyUpdatedTransform(y),this._fireMoveEvents(u)}),(()=>{this.terrain&&a.freezeElevation&&this._finalizeElevation(),this._afterEase(u)}),a),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_stop(a,u){var y;if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){const b=this._onEaseEnd;delete this._onEaseEnd,b.call(this,u)}return a||(y=this.handlers)===null||y===void 0||y.stop(!1),this}_ease(a,u,y){y.animate===!1||y.duration===0?(a(1),u()):(this._easeStart=$(),this._easeOptions=y,this._onEaseFrame=a,this._onEaseEnd=u,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_normalizeBearing(a,u){a=o.W(a,-180,180);const y=Math.abs(a-u);return Math.abs(a-360-u)<y&&(a-=360),Math.abs(a+360-u)<y&&(a+=360),a}queryTerrainElevation(a){return this.terrain?this.terrain.getElevationForLngLat(o.V.convert(a),this.transform):null}}const ko={compact:!0,customAttribution:'<a href="https://maplibre.org/" target="_blank">MapLibre</a>'};class Uf{constructor(a=ko){this._toggleAttribution=()=>{this._container.classList.contains("maplibregl-compact")&&(this._container.classList.contains("maplibregl-compact-show")?(this._container.setAttribute("open",""),this._container.classList.remove("maplibregl-compact-show")):(this._container.classList.add("maplibregl-compact-show"),this._container.removeAttribute("open")))},this._updateData=u=>{!u||u.sourceDataType!=="metadata"&&u.sourceDataType!=="visibility"&&u.dataType!=="style"&&u.type!=="terrain"||this._updateAttributions()},this._updateCompact=()=>{this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact===!1?this._container.setAttribute("open",""):this._container.classList.contains("maplibregl-compact")||this._container.classList.contains("maplibregl-attrib-empty")||(this._container.setAttribute("open",""),this._container.classList.add("maplibregl-compact","maplibregl-compact-show")):(this._container.setAttribute("open",""),this._container.classList.contains("maplibregl-compact")&&this._container.classList.remove("maplibregl-compact","maplibregl-compact-show"))},this._updateCompactMinimize=()=>{this._container.classList.contains("maplibregl-compact")&&this._container.classList.contains("maplibregl-compact-show")&&this._container.classList.remove("maplibregl-compact-show")},this.options=a}getDefaultPosition(){return"bottom-right"}onAdd(a){return this._map=a,this._compact=this.options.compact,this._container=O.create("details","maplibregl-ctrl maplibregl-ctrl-attrib"),this._compactButton=O.create("summary","maplibregl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=O.create("div","maplibregl-ctrl-attrib-inner",this._container),this._updateAttributions(),this._updateCompact(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("terrain",this._updateData),this._map.on("resize",this._updateCompact),this._map.on("drag",this._updateCompactMinimize),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("terrain",this._updateData),this._map.off("resize",this._updateCompact),this._map.off("drag",this._updateCompactMinimize),this._map=void 0,this._compact=void 0,this._attribHTML=void 0}_setElementTitle(a,u){const y=this._map._getUIString(`AttributionControl.${u}`);a.title=y,a.setAttribute("aria-label",y)}_updateAttributions(){if(!this._map.style)return;let a=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?a=a.concat(this.options.customAttribution.map((b=>typeof b!="string"?"":b))):typeof this.options.customAttribution=="string"&&a.push(this.options.customAttribution)),this._map.style.stylesheet){const b=this._map.style.stylesheet;this.styleOwner=b.owner,this.styleId=b.id}const u=this._map.style.tileManagers;for(const b in u){const j=u[b];if(j.used||j.usedForTerrain){const I=j.getSource();I.attribution&&a.indexOf(I.attribution)<0&&a.push(I.attribution)}}a=a.filter((b=>String(b).trim())),a.sort(((b,j)=>b.length-j.length)),a=a.filter(((b,j)=>{for(let I=j+1;I<a.length;I++)if(a[I].indexOf(b)>=0)return!1;return!0}));const y=a.join(" | ");y!==this._attribHTML&&(this._attribHTML=y,a.length?(this._innerContainer.innerHTML=O.sanitize(y),this._container.classList.remove("maplibregl-attrib-empty")):this._container.classList.add("maplibregl-attrib-empty"),this._updateCompact(),this._editLink=null)}}class El{constructor(a={}){this._updateCompact=()=>{const u=this._container.children;if(u.length){const y=u[0];this._map.getCanvasContainer().offsetWidth<=640||this._compact?this._compact!==!1&&y.classList.add("maplibregl-compact"):y.classList.remove("maplibregl-compact")}},this.options=a}getDefaultPosition(){return"bottom-left"}onAdd(a){this._map=a,this._compact=this.options&&this.options.compact,this._container=O.create("div","maplibregl-ctrl");const u=O.create("a","maplibregl-ctrl-logo");return u.target="_blank",u.rel="noopener nofollow",u.href="https://maplibre.org/",u.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),u.setAttribute("rel","noopener nofollow"),this._container.appendChild(u),this._container.style.display="block",this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){O.remove(this._container),this._map.off("resize",this._updateCompact),this._map=void 0,this._compact=void 0}}class lu{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(a){const u=++this._id;return this._queue.push({callback:a,id:u,cancelled:!1}),u}remove(a){const u=this._currentlyRunning,y=u?this._queue.concat(u):this._queue;for(const b of y)if(b.id===a)return void(b.cancelled=!0)}run(a=0){if(this._currentlyRunning)throw new Error("Attempting to run(), but is already running.");const u=this._currentlyRunning=this._queue;this._queue=[];for(const y of u)if(!y.cancelled&&(y.callback(a),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}var qf=o.aU([{name:"a_pos3d",type:"Int16",components:3}]);class Vd extends o.E{constructor(a){super(),this._lastTilesetChange=$(),this.tileManager=a,this._tiles={},this._renderableTilesKeys=[],this._sourceTileCache={},this.minzoom=0,this.maxzoom=22,this.deltaZoom=1,this.tileSize=a._source.tileSize*2**this.deltaZoom,a.usedForTerrain=!0,a.tileSize=this.tileSize}destruct(){this.tileManager.usedForTerrain=!1,this.tileManager.tileSize=null}getSource(){return this.tileManager._source}update(a,u){this.tileManager.update(a,u),this._renderableTilesKeys=[];const y={};for(const b of er(a,{tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,reparseOverscaled:!1,terrain:u,calculateTileZoom:this.tileManager._source.calculateTileZoom}))y[b.key]=!0,this._renderableTilesKeys.push(b.key),this._tiles[b.key]||(b.terrainRttPosMatrix32f=new Float64Array(16),o.c7(b.terrainRttPosMatrix32f,0,o.a5,o.a5,0,0,1),this._tiles[b.key]=new $e(b,this.tileSize),this._lastTilesetChange=$());for(const b in this._tiles)y[b]||delete this._tiles[b]}freeRtt(a){for(const u in this._tiles){const y=this._tiles[u];(!a||y.tileID.equals(a)||y.tileID.isChildOf(a)||a.isChildOf(y.tileID))&&(y.rtt=[])}}getRenderableTiles(){return this._renderableTilesKeys.map((a=>this.getTileByID(a)))}getTileByID(a){return this._tiles[a]}getTerrainCoords(a,u){return u?this._getTerrainCoordsForTileRanges(a,u):this._getTerrainCoordsForRegularTile(a)}_getTerrainCoordsForRegularTile(a){const u={};for(const y of this._renderableTilesKeys){const b=this._tiles[y].tileID,j=a.clone(),I=o.bk();if(b.canonical.equals(a.canonical))o.c7(I,0,o.a5,o.a5,0,0,1);else if(b.canonical.isChildOf(a.canonical)){const F=b.canonical.z-a.canonical.z,U=b.canonical.x-(b.canonical.x>>F<<F),Y=b.canonical.y-(b.canonical.y>>F<<F),re=o.a5>>F;o.c7(I,0,re,re,0,0,1),o.O(I,I,[-U*re,-Y*re,0])}else{if(!a.canonical.isChildOf(b.canonical))continue;{const F=a.canonical.z-b.canonical.z,U=a.canonical.x-(a.canonical.x>>F<<F),Y=a.canonical.y-(a.canonical.y>>F<<F),re=o.a5>>F;o.c7(I,0,o.a5,o.a5,0,0,1),o.O(I,I,[U*re,Y*re,0]),o.Q(I,I,[1/2**F,1/2**F,0])}}j.terrainRttPosMatrix32f=new Float32Array(I),u[y]=j}return u}_getTerrainCoordsForTileRanges(a,u){const y={};for(const b of this._renderableTilesKeys){const j=this._tiles[b].tileID;if(!this._isWithinTileRanges(j,u))continue;const I=a.clone(),F=o.bk();if(j.canonical.z===a.canonical.z){const U=a.canonical.x-j.canonical.x+a.wrap*(1<<a.canonical.z),Y=a.canonical.y-j.canonical.y;o.c7(F,0,o.a5,o.a5,0,0,1),o.O(F,F,[U*o.a5,Y*o.a5,0])}else if(j.canonical.z>a.canonical.z){const U=j.canonical.z-a.canonical.z,Y=j.canonical.x-(j.canonical.x>>U<<U)+a.wrap*(1<<j.canonical.z),re=j.canonical.y-(j.canonical.y>>U<<U),ce=a.canonical.x-(j.canonical.x>>U),le=a.canonical.y-(j.canonical.y>>U),ge=o.a5>>U;o.c7(F,0,ge,ge,0,0,1),o.O(F,F,[-Y*ge+ce*o.a5,-re*ge+le*o.a5,0])}else{const U=a.canonical.z-j.canonical.z,Y=a.canonical.x-(a.canonical.x>>U<<U)+a.wrap*(1<<a.canonical.z),re=a.canonical.y-(a.canonical.y>>U<<U),ce=(a.canonical.x>>U)-j.canonical.x,le=(a.canonical.y>>U)-j.canonical.y,ge=o.a5<<U;o.c7(F,0,ge,ge,0,0,1),o.O(F,F,[Y*o.a5+ce*ge,re*o.a5+le*ge,0])}I.terrainRttPosMatrix32f=new Float32Array(F),y[b]=I}return y}getSourceTile(a,u){const y=this.tileManager._source;let b=a.overscaledZ-this.deltaZoom;if(b>y.maxzoom&&(b=y.maxzoom),b<y.minzoom)return;this._sourceTileCache[a.key]||(this._sourceTileCache[a.key]=a.scaledTo(b).key);let j=this.findTileInCaches(this._sourceTileCache[a.key]);if(!j?.dem&&u)for(;b>=y.minzoom&&!j?.dem;)j=this.findTileInCaches(a.scaledTo(b--).key);return j}findTileInCaches(a){let u=this.tileManager.getTileByID(a);return u||(u=this.tileManager._outOfViewCache.getByKey(a),u)}anyTilesAfterTime(a=Date.now()){return this._lastTilesetChange>=a}_isWithinTileRanges(a,u){const y=u[a.canonical.z];return!!y&&(a.wrap>y.minWrap||a.wrap<y.maxWrap||a.canonical.x>=y.minTileXWrapped&&a.canonical.x<=y.maxTileXWrapped&&a.canonical.y>=y.minTileY&&a.canonical.y<=y.maxTileY)}}class ei{constructor(a,u,y){this._meshCache={},this.painter=a,this.tileManager=new Vd(u),this.options=y,this.exaggeration=typeof y.exaggeration=="number"?y.exaggeration:1,this.qualityFactor=2,this.meshSize=128,this._demMatrixCache={},this.coordsIndex=[],this._coordsTextureSize=1024}getDEMElevation(a,u,y,b=o.a5){var j;const I=a.normalizeCoordinates(u,y,b);if(!I)return 0;const F=this.getTerrainData(I.tileID),U=(j=F.tile)===null||j===void 0?void 0:j.dem;if(!U)return 0;const Y=o.cD([],[I.x/b*o.a5,I.y/b*o.a5],F.u_terrain_matrix),re=[Y[0]*U.dim,Y[1]*U.dim],ce=Math.floor(re[0]),le=Math.floor(re[1]),ge=re[0]-ce,be=re[1]-le;return U.get(ce,le)*(1-ge)*(1-be)+U.get(ce+1,le)*ge*(1-be)+U.get(ce,le+1)*(1-ge)*be+U.get(ce+1,le+1)*ge*be}getElevationForLngLatZoom(a,u){if(!o.cE(u,a.wrap()))return 0;const{tileID:y,mercatorX:b,mercatorY:j}=this._getOverscaledTileIDFromLngLatZoom(a,u);return this.getElevation(y,b%o.a5,j%o.a5,o.a5)}getElevationForLngLat(a,u){const y=er(u,{maxzoom:this.tileManager.maxzoom,minzoom:this.tileManager.minzoom,tileSize:512,terrain:this});let b=0;for(const j of y)j.canonical.z>b&&(b=Math.min(j.canonical.z,this.tileManager.maxzoom));return this.getElevationForLngLatZoom(a,b)}getElevation(a,u,y,b=o.a5){return this.getDEMElevation(a,u,y,b)*this.exaggeration}getTerrainData(a){if(!this._emptyDemTexture){const b=this.painter.context,j=new o.R({width:1,height:1},new Uint8Array(4));this._emptyDepthTexture=new o.T(b,j,b.gl.RGBA,{premultiply:!1}),this._emptyDemUnpack=[0,0,0,0],this._emptyDemTexture=new o.T(b,new o.R({width:1,height:1}),b.gl.RGBA,{premultiply:!1}),this._emptyDemTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),this._emptyDemMatrix=o.ar([])}const u=this.tileManager.getSourceTile(a,!0);if(u&&u.dem&&(!u.demTexture||u.needsTerrainPrepare)){const b=this.painter.context;u.demTexture=this.painter.getTileTexture(u.dem.stride),u.demTexture?u.demTexture.update(u.dem.getPixels(),{premultiply:!1}):u.demTexture=new o.T(b,u.dem.getPixels(),b.gl.RGBA,{premultiply:!1}),u.demTexture.bind(b.gl.NEAREST,b.gl.CLAMP_TO_EDGE),u.needsTerrainPrepare=!1}const y=u&&u.toString()+u.tileID.key+a.key;if(y&&!this._demMatrixCache[y]){const b=this.tileManager.getSource().maxzoom;let j=a.canonical.z-u.tileID.canonical.z;a.overscaledZ>a.canonical.z&&(a.canonical.z>=b?j=a.canonical.z-b:o.w("cannot calculate elevation if elevation maxzoom > source.maxzoom"));const I=a.canonical.x-(a.canonical.x>>j<<j),F=a.canonical.y-(a.canonical.y>>j<<j),U=o.cF(new Float64Array(16),[1/(o.a5<<j),1/(o.a5<<j),0]);o.O(U,U,[I*o.a5,F*o.a5,0]),this._demMatrixCache[a.key]={matrix:U,coord:a}}return{u_depth:2,u_terrain:3,u_terrain_dim:u&&u.dem&&u.dem.dim||1,u_terrain_matrix:y?this._demMatrixCache[a.key].matrix:this._emptyDemMatrix,u_terrain_unpack:u&&u.dem&&u.dem.getUnpackVector()||this._emptyDemUnpack,u_terrain_exaggeration:this.exaggeration,texture:(u&&u.demTexture||this._emptyDemTexture).texture,depthTexture:(this._fboDepthTexture||this._emptyDepthTexture).texture,tile:u}}getFramebuffer(a){const u=this.painter,y=u.width/devicePixelRatio,b=u.height/devicePixelRatio;return!this._fbo||this._fbo.width===y&&this._fbo.height===b||(this._fbo.destroy(),this._fboCoordsTexture.destroy(),this._fboDepthTexture.destroy(),delete this._fbo,delete this._fboDepthTexture,delete this._fboCoordsTexture),this._fboCoordsTexture||(this._fboCoordsTexture=new o.T(u.context,{width:y,height:b,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboCoordsTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fboDepthTexture||(this._fboDepthTexture=new o.T(u.context,{width:y,height:b,data:null},u.context.gl.RGBA,{premultiply:!1}),this._fboDepthTexture.bind(u.context.gl.NEAREST,u.context.gl.CLAMP_TO_EDGE)),this._fbo||(this._fbo=u.context.createFramebuffer(y,b,!0,!1),this._fbo.depthAttachment.set(u.context.createRenderbuffer(u.context.gl.DEPTH_COMPONENT16,y,b))),this._fbo.colorAttachment.set(a==="coords"?this._fboCoordsTexture.texture:this._fboDepthTexture.texture),this._fbo}getCoordsTexture(){const a=this.painter.context;if(this._coordsTexture)return this._coordsTexture;const u=new Uint8Array(this._coordsTextureSize*this._coordsTextureSize*4);for(let j=0,I=0;j<this._coordsTextureSize;j++)for(let F=0;F<this._coordsTextureSize;F++,I+=4)u[I+0]=255&F,u[I+1]=255&j,u[I+2]=F>>8<<4|j>>8,u[I+3]=0;const y=new o.R({width:this._coordsTextureSize,height:this._coordsTextureSize},new Uint8Array(u.buffer)),b=new o.T(a,y,a.gl.RGBA,{premultiply:!1});return b.bind(a.gl.NEAREST,a.gl.CLAMP_TO_EDGE),this._coordsTexture=b,b}pointCoordinate(a){this.painter.maybeDrawDepthAndCoords(!0);const u=new Uint8Array(4),y=this.painter.context,b=y.gl,j=Math.round(a.x*this.painter.pixelRatio/devicePixelRatio),I=Math.round(a.y*this.painter.pixelRatio/devicePixelRatio),F=Math.round(this.painter.height/devicePixelRatio);y.bindFramebuffer.set(this.getFramebuffer("coords").framebuffer),b.readPixels(j,F-I-1,1,1,b.RGBA,b.UNSIGNED_BYTE,u),y.bindFramebuffer.set(null);const U=u[0]+(u[2]>>4<<8),Y=u[1]+((15&u[2])<<8),re=this.coordsIndex[255-u[3]],ce=re&&this.tileManager.getTileByID(re);if(!ce)return null;const le=this._coordsTextureSize,ge=(1<<ce.tileID.canonical.z)*le;return new o.a9((ce.tileID.canonical.x*le+U)/ge+ce.tileID.wrap,(ce.tileID.canonical.y*le+Y)/ge,this.getElevation(ce.tileID,U,Y,le))}depthAtPoint(a){const u=new Uint8Array(4),y=this.painter.context,b=y.gl;return y.bindFramebuffer.set(this.getFramebuffer("depth").framebuffer),b.readPixels(a.x,this.painter.height/devicePixelRatio-a.y-1,1,1,b.RGBA,b.UNSIGNED_BYTE,u),y.bindFramebuffer.set(null),(u[0]/16777216+u[1]/65536+u[2]/256+u[3])/256}getTerrainMesh(a){var u;const y=((u=this.painter.style.projection)===null||u===void 0?void 0:u.transitionState)>0,b=y&&a.canonical.y===0,j=y&&a.canonical.y===(1<<a.canonical.z)-1,I=`m_${b?"n":""}_${j?"s":""}`;if(this._meshCache[I])return this._meshCache[I];const F=this.painter.context,U=new o.cG,Y=new o.aY,re=this.meshSize,ce=o.a5/re,le=re*re;for(let Ue=0;Ue<=re;Ue++)for(let st=0;st<=re;st++)U.emplaceBack(st*ce,Ue*ce,0);for(let Ue=0;Ue<le;Ue+=re+1)for(let st=0;st<re;st++)Y.emplaceBack(st+Ue,re+st+Ue+1,re+st+Ue+2),Y.emplaceBack(st+Ue,re+st+Ue+2,st+Ue+1);const ge=U.length,be=ge+(re+1),Me=(re+1)*re,Ne=b?o.br:0,Ie=b?0:1,ze=j?o.bs:o.a5,He=j?0:1;for(let Ue=0;Ue<=re;Ue++)U.emplaceBack(Ue*ce,Ne,Ie);for(let Ue=0;Ue<=re;Ue++)U.emplaceBack(Ue*ce,ze,He);for(let Ue=0;Ue<re;Ue++)Y.emplaceBack(Me+Ue,be+Ue,be+Ue+1),Y.emplaceBack(Me+Ue,be+Ue+1,Me+Ue+1),Y.emplaceBack(0+Ue,ge+Ue+1,ge+Ue),Y.emplaceBack(0+Ue,0+Ue+1,ge+Ue+1);const Fe=U.length,Ge=Fe+2*(re+1);for(const Ue of[0,1])for(let st=0;st<=re;st++)for(const bt of[0,1])U.emplaceBack(Ue*o.a5,st*ce,bt);for(let Ue=0;Ue<2*re;Ue+=2)Y.emplaceBack(Fe+Ue,Fe+Ue+1,Fe+Ue+3),Y.emplaceBack(Fe+Ue,Fe+Ue+3,Fe+Ue+2),Y.emplaceBack(Ge+Ue,Ge+Ue+3,Ge+Ue+1),Y.emplaceBack(Ge+Ue,Ge+Ue+2,Ge+Ue+3);const Ye=new Pr(F.createVertexBuffer(U,qf.members),F.createIndexBuffer(Y),o.aX.simpleSegment(0,0,U.length,Y.length));return this._meshCache[I]=Ye,Ye}getMeshFrameDelta(a){return 2*Math.PI*o.bE/Math.pow(2,Math.max(a,0))/5}getMinTileElevationForLngLatZoom(a,u){var y;if(!o.cE(u,a.wrap()))return 0;const{tileID:b}=this._getOverscaledTileIDFromLngLatZoom(a,u);return(y=this.getMinMaxElevation(b).minElevation)!==null&&y!==void 0?y:0}getMinMaxElevation(a){const u=this.getTerrainData(a).tile,y={minElevation:null,maxElevation:null};return u&&u.dem&&(y.minElevation=u.dem.min*this.exaggeration,y.maxElevation=u.dem.max*this.exaggeration),y}_getOverscaledTileIDFromLngLatZoom(a,u){const y=o.a9.fromLngLat(a.wrap()),b=(1<<u)*o.a5,j=y.x*b,I=y.y*b,F=Math.floor(j/o.a5),U=Math.floor(I/o.a5);return{tileID:new o.a2(u,0,u,F,U),mercatorX:j,mercatorY:I}}}class Pi{constructor(a,u,y){this._context=a,this._size=u,this._tileSize=y,this._objects=[],this._recentlyUsed=[],this._stamp=0}destruct(){for(const a of this._objects)a.texture.destroy(),a.fbo.destroy()}_createObject(a){const u=this._context.createFramebuffer(this._tileSize,this._tileSize,!0,!0),y=new o.T(this._context,{width:this._tileSize,height:this._tileSize,data:null},this._context.gl.RGBA);return y.bind(this._context.gl.LINEAR,this._context.gl.CLAMP_TO_EDGE),this._context.extTextureFilterAnisotropic&&this._context.gl.texParameterf(this._context.gl.TEXTURE_2D,this._context.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,this._context.extTextureFilterAnisotropicMax),u.depthAttachment.set(this._context.createRenderbuffer(this._context.gl.DEPTH_STENCIL,this._tileSize,this._tileSize)),u.colorAttachment.set(y.texture),{id:a,fbo:u,texture:y,stamp:-1,inUse:!1}}getObjectForId(a){return this._objects[a]}useObject(a){a.inUse=!0,this._recentlyUsed=this._recentlyUsed.filter((u=>a.id!==u)),this._recentlyUsed.push(a.id)}stampObject(a){a.stamp=++this._stamp}getOrCreateFreeObject(){for(const u of this._recentlyUsed)if(!this._objects[u].inUse)return this._objects[u];if(this._objects.length>=this._size)throw new Error("No free RenderPool available, call freeAllObjects() required!");const a=this._createObject(this._objects.length);return this._objects.push(a),a}freeObject(a){a.inUse=!1}freeAllObjects(){for(const a of this._objects)this.freeObject(a)}isFull(){return!(this._objects.length<this._size)&&this._objects.some((a=>!a.inUse))===!1}}const Xs={background:!0,fill:!0,line:!0,raster:!0,hillshade:!0,"color-relief":!0};class Io{constructor(a,u){this.painter=a,this.terrain=u,this.pool=new Pi(a.context,30,u.tileManager.tileSize*u.qualityFactor)}destruct(){this.pool.destruct()}getTexture(a){return this.pool.getObjectForId(a.rtt[this._stacks.length-1].id).texture}prepareForRender(a,u){var y,b;this._stacks=[],this._prevType=null,this._rttTiles=[],this._renderableTiles=this.terrain.tileManager.getRenderableTiles(),this._renderableLayerIds=a._order.filter((j=>!a._layers[j].isHidden(u))),this._coordsAscending={};for(const j in a.tileManagers){this._coordsAscending[j]={};const I=a.tileManagers[j].getVisibleCoordinates(),F=a.tileManagers[j].getSource(),U=F instanceof _i?F.terrainTileRanges:null;for(const Y of I){const re=this.terrain.tileManager.getTerrainCoords(Y,U);for(const ce in re)this._coordsAscending[j][ce]||(this._coordsAscending[j][ce]=[]),this._coordsAscending[j][ce].push(re[ce])}}this._rttFingerprints={};for(const j of a._order){const I=a._layers[j],F=I.source;if(Xs[I.type]&&!this._rttFingerprints[F]){this._rttFingerprints[F]={};const U=(b=(y=a.tileManagers[F])===null||y===void 0?void 0:y.getState().revision)!==null&&b!==void 0?b:0;for(const Y in this._coordsAscending[F])this._rttFingerprints[F][Y]=`${this._coordsAscending[F][Y].map((re=>re.key)).sort().join()}#${U}`}}for(const j of this._renderableTiles)for(const I in this._rttFingerprints){const F=this._rttFingerprints[I][j.tileID.key];F&&F!==j.rttFingerprint[I]&&(j.rtt=[])}}renderLayer(a,u){if(a.isHidden(this.painter.transform.zoom))return!1;const y=Object.assign(Object.assign({},u),{isRenderingToTexture:!0}),b=a.type,j=this.painter,I=this._renderableLayerIds[this._renderableLayerIds.length-1]===a.id;if(Xs[b]&&(this._prevType&&Xs[this._prevType]||this._stacks.push([]),this._prevType=b,this._stacks[this._stacks.length-1].push(a.id),!I))return!0;if(Xs[this._prevType]||Xs[b]&&I){this._prevType=b;const F=this._stacks.length-1,U=this._stacks[F]||[];for(const Y of this._renderableTiles){if(this.pool.isFull()&&(nu(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects()),this._rttTiles.push(Y),Y.rtt[F]){const ce=this.pool.getObjectForId(Y.rtt[F].id);if(ce.stamp===Y.rtt[F].stamp){this.pool.useObject(ce);continue}}const re=this.pool.getOrCreateFreeObject();this.pool.useObject(re),this.pool.stampObject(re),Y.rtt[F]={id:re.id,stamp:re.stamp},j.context.bindFramebuffer.set(re.fbo.framebuffer),j.context.clear({color:o.bp.transparent,stencil:0}),j.currentStencilSource=void 0;for(let ce=0;ce<U.length;ce++){const le=j.style._layers[U[ce]],ge=le.source?this._coordsAscending[le.source][Y.tileID.key]:[Y.tileID];j.context.viewport.set([0,0,re.fbo.width,re.fbo.height]),j._renderTileClippingMasks(le,ge,!0),j.renderLayer(j,j.style.tileManagers[le.source],le,ge,y),le.source&&(Y.rttFingerprint[le.source]=this._rttFingerprints[le.source][Y.tileID.key])}}return nu(this.painter,this.terrain,this._rttTiles,y),this._rttTiles=[],this.pool.freeAllObjects(),Xs[b]}return!1}}const cu={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"MapLibre logo","Map.Title":"Map","Marker.Title":"Map marker","NavigationControl.ResetBearing":"Drag to rotate map, click to reset north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","Popup.Close":"Close popup","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm","GlobeControl.Enable":"Enable globe","GlobeControl.Disable":"Disable globe","TerrainControl.Enable":"Enable terrain","TerrainControl.Disable":"Disable terrain","CooperativeGesturesHandler.WindowsHelpText":"Use Ctrl + scroll to zoom the map","CooperativeGesturesHandler.MacHelpText":"Use  + scroll to zoom the map","CooperativeGesturesHandler.MobileHelpText":"Use two fingers to move the map"},Zu=_,jl={hash:!1,interactive:!0,bearingSnap:7,zoomSnap:0,attributionControl:ko,maplibreLogo:!1,refreshExpiredTiles:!0,canvasContextAttributes:{antialias:!1,preserveDrawingBuffer:!1,powerPreference:"high-performance",failIfMajorPerformanceCaveat:!1,desynchronized:!1,contextType:void 0},scrollZoom:!0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,trackResize:!0,center:[0,0],elevation:0,zoom:0,bearing:0,pitch:0,roll:0,renderWorldCopies:!0,maxTileCacheSize:null,maxTileCacheZoomLevels:o.c.MAX_TILE_CACHE_ZOOM_LEVELS,transformRequest:null,transformCameraUpdate:null,transformConstrain:null,fadeDuration:300,crossSourceCollisions:!0,clickTolerance:3,localIdeographFontFamily:"sans-serif",pitchWithRotate:!0,rollEnabled:!1,reduceMotion:void 0,validateStyle:!0,maxCanvasSize:[4096,4096],cancelPendingTileRequestsWhileZooming:!0,centerClampedToGround:!0,experimentalZoomLevelsToOverscale:void 0},qh={showCompass:!0,showZoom:!0,visualizePitch:!1,visualizeRoll:!0};class Ml{constructor(a,u,y=!1){this.mousedown=j=>{this.startMove(j,O.mousePos(this.element,j)),O.addEventListener(window,"mousemove",this.mousemove),O.addEventListener(window,"mouseup",this.mouseup)},this.mousemove=j=>{this.move(j,O.mousePos(this.element,j))},this.mouseup=j=>{this._rotatePitchHandler.dragEnd(j),this.offTemp()},this.touchstart=j=>{j.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=O.touchPos(this.element,j.targetTouches)[0],this.startMove(j,this._startPos),O.addEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.addEventListener(window,"touchend",this.touchend))},this.touchmove=j=>{j.targetTouches.length!==1?this.reset():(this._lastPos=O.touchPos(this.element,j.targetTouches)[0],this.move(j,this._lastPos))},this.touchend=j=>{j.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),delete this._startPos,delete this._lastPos,this.offTemp()},this.reset=()=>{this._rotatePitchHandler.reset(),delete this._startPos,delete this._lastPos,this.offTemp()},this._clickTolerance=10,this.element=u;const b=new Gp;this._rotatePitchHandler=new iu({clickTolerance:3,move:(j,I)=>{const F=u.getBoundingClientRect(),U=new o.P((F.bottom-F.top)/2,(F.right-F.left)/2);return{bearingDelta:o.cy(new o.P(j.x,I.y),I,U),pitchDelta:y?-.5*(I.y-j.y):void 0}},moveStateManager:b,enable:!0,assignEvents:()=>{}}),this.map=a,O.addEventListener(u,"mousedown",this.mousedown),O.addEventListener(u,"touchstart",this.touchstart,{passive:!1}),O.addEventListener(u,"touchcancel",this.reset)}startMove(a,u){this._rotatePitchHandler.dragStart(a,u),O.disableDrag()}move(a,u){const y=this.map,{bearingDelta:b,pitchDelta:j}=this._rotatePitchHandler.dragMove(a,u)||{};b&&y.setBearing(y.getBearing()+b),j&&y.setPitch(y.getPitch()+j)}off(){const a=this.element;O.removeEventListener(a,"mousedown",this.mousedown),O.removeEventListener(a,"touchstart",this.touchstart,{passive:!1}),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend),O.removeEventListener(a,"touchcancel",this.reset),this.offTemp()}offTemp(){O.enableDrag(),O.removeEventListener(window,"mousemove",this.mousemove),O.removeEventListener(window,"mouseup",this.mouseup),O.removeEventListener(window,"touchmove",this.touchmove,{passive:!1}),O.removeEventListener(window,"touchend",this.touchend)}}let kl;function Ud(C,a,u,y=!1){if(y||!u.getCoveringTilesDetailsProvider().allowWorldCopies())return C?.wrap();const b=new o.V(C.lng,C.lat);if(C=new o.V(C.lng,C.lat),a){const j=new o.V(C.lng-360,C.lat),I=new o.V(C.lng+360,C.lat),F=u.locationToScreenPoint(C).distSqr(a);u.locationToScreenPoint(j).distSqr(a)<F?C=j:u.locationToScreenPoint(I).distSqr(a)<F&&(C=I)}for(;Math.abs(C.lng-u.center.lng)>180;){const j=u.locationToScreenPoint(C);if(j.x>=0&&j.y>=0&&j.x<=u.width&&j.y<=u.height)break;C.lng>u.center.lng?C.lng-=360:C.lng+=360}return C.lng!==b.lng&&u.isPointOnMapSurface(u.locationToScreenPoint(C))?C:b}const ti={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Ku(C,a,u){const y=C.classList;for(const b in ti)y.remove(`maplibregl-${u}-anchor-${b}`);y.add(`maplibregl-${u}-anchor-${a}`)}class Xu extends o.E{constructor(a){if(super(),this._onClick=u=>{this.fire(new o.l("click",{originalEvent:u}))},this._onKeyPress=u=>{const y=u.code,b=u.charCode||u.keyCode;y!=="Space"&&y!=="Enter"&&b!==32&&b!==13||this.togglePopup()},this._onMapClick=u=>{const y=u.originalEvent.target,b=this._element;this._popup&&(y===b||b.contains(y))&&this.togglePopup()},this._update=u=>{if(!this._map)return;const y=this._map.loaded()&&!this._map.isMoving();(u?.type==="terrain"||u?.type==="render"&&!y)&&this._map.once("render",this._update),this._lngLat=Ud(this._lngLat,this._flatPos,this._map.transform),this._flatPos=this._pos=this._map.project(this._lngLat)._add(this._offset),this._map.terrain&&(this._flatPos=this._map.transform.locationToScreenPoint(this._lngLat)._add(this._offset));let b="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?b=`rotateZ(${this._rotation}deg)`:this._rotationAlignment==="map"&&(b=`rotateZ(${this._rotation-this._map.getBearing()}deg)`);let j="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?j="rotateX(0deg)":this._pitchAlignment==="map"&&(j=`rotateX(${this._map.getPitch()}deg)`),this._subpixelPositioning||u&&u.type!=="moveend"||(this._pos=this._pos.round()),O.setTransform(this._element,`${ti[this._anchor]} translate(${this._pos.x}px, ${this._pos.y}px) ${j} ${b}`),z.frameAsync(new AbortController,this._map._ownerWindow).then((()=>{this._updateOpacity(u&&u.type==="moveend")})).catch((()=>{}))},this._onMove=u=>{if(!this._isDragging){const y=this._clickTolerance||this._map._clickTolerance;this._isDragging=u.point.dist(this._pointerdownPos)>=y}this._isDragging&&(this._pos=u.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new o.l("dragstart"))),this.fire(new o.l("drag")))},this._onUp=()=>{this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new o.l("dragend")),this._state="inactive"},this._addDragHandler=u=>{this._element.contains(u.originalEvent.target)&&(u.preventDefault(),this._positionDelta=u.point.sub(this._pos).add(this._offset),this._pointerdownPos=u.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},this._anchor=a&&a.anchor||"center",this._color=a&&a.color||"#3FB1CE",this._scale=a&&a.scale||1,this._draggable=a&&a.draggable||!1,this._clickTolerance=a&&a.clickTolerance||0,this._subpixelPositioning=a&&a.subpixelPositioning||!1,this._isDragging=!1,this._state="inactive",this._rotation=a&&a.rotation||0,this._rotationAlignment=a&&a.rotationAlignment||"auto",this._pitchAlignment=a&&a.pitchAlignment&&a.pitchAlignment!=="auto"?a.pitchAlignment:this._rotationAlignment,this.setOpacity(a?.opacity,a?.opacityWhenCovered),a&&a.element)this._element=a.element,this._offset=o.P.convert(a&&a.offset||[0,0]);else{this._defaultMarker=!0,this._element=O.create("div");const u=O.createNS("http://www.w3.org/2000/svg","svg"),y=41,b=27;u.setAttributeNS(null,"display","block"),u.setAttributeNS(null,"height",`${y}px`),u.setAttributeNS(null,"width",`${b}px`),u.setAttributeNS(null,"viewBox",`0 0 ${b} ${y}`);const j=O.createNS("http://www.w3.org/2000/svg","g");j.setAttributeNS(null,"stroke","none"),j.setAttributeNS(null,"stroke-width","1"),j.setAttributeNS(null,"fill","none"),j.setAttributeNS(null,"fill-rule","evenodd");const I=O.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"fill-rule","nonzero");const F=O.createNS("http://www.w3.org/2000/svg","g");F.setAttributeNS(null,"transform","translate(3.0, 29.0)"),F.setAttributeNS(null,"fill","#000000");const U=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];for(const Ie of U){const ze=O.createNS("http://www.w3.org/2000/svg","ellipse");ze.setAttributeNS(null,"opacity","0.04"),ze.setAttributeNS(null,"cx","10.5"),ze.setAttributeNS(null,"cy","5.80029008"),ze.setAttributeNS(null,"rx",Ie.rx),ze.setAttributeNS(null,"ry",Ie.ry),F.appendChild(ze)}const Y=O.createNS("http://www.w3.org/2000/svg","g");Y.setAttributeNS(null,"fill",this._color);const re=O.createNS("http://www.w3.org/2000/svg","path");re.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),Y.appendChild(re);const ce=O.createNS("http://www.w3.org/2000/svg","g");ce.setAttributeNS(null,"opacity","0.25"),ce.setAttributeNS(null,"fill","#000000");const le=O.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ce.appendChild(le);const ge=O.createNS("http://www.w3.org/2000/svg","g");ge.setAttributeNS(null,"transform","translate(6.0, 7.0)"),ge.setAttributeNS(null,"fill","#FFFFFF");const be=O.createNS("http://www.w3.org/2000/svg","g");be.setAttributeNS(null,"transform","translate(8.0, 8.0)");const Me=O.createNS("http://www.w3.org/2000/svg","circle");Me.setAttributeNS(null,"fill","#000000"),Me.setAttributeNS(null,"opacity","0.25"),Me.setAttributeNS(null,"cx","5.5"),Me.setAttributeNS(null,"cy","5.5"),Me.setAttributeNS(null,"r","5.4999962");const Ne=O.createNS("http://www.w3.org/2000/svg","circle");Ne.setAttributeNS(null,"fill","#FFFFFF"),Ne.setAttributeNS(null,"cx","5.5"),Ne.setAttributeNS(null,"cy","5.5"),Ne.setAttributeNS(null,"r","5.4999962"),be.appendChild(Me),be.appendChild(Ne),I.appendChild(F),I.appendChild(Y),I.appendChild(ce),I.appendChild(ge),I.appendChild(be),u.appendChild(I),u.setAttributeNS(null,"height",y*this._scale+"px"),u.setAttributeNS(null,"width",b*this._scale+"px"),this._element.appendChild(u),this._offset=o.P.convert(a&&a.offset||[0,-14])}if(this._element.classList.add("maplibregl-marker"),this._element.addEventListener("dragstart",(u=>{u.preventDefault()})),this._element.addEventListener("mousedown",(u=>{u.preventDefault()})),Ku(this._element,this._anchor,"marker"),this._element.addEventListener("click",this._onClick),a&&a.className)for(const u of a.className.split(" "))this._element.classList.add(u);this._popup=null}addTo(a){return this.remove(),this._map=a,this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label",a._getUIString("Marker.Title")),this._element.hasAttribute("role")||this._element.setAttribute("role","button"),a.getCanvasContainer().appendChild(this._element),a.on("move",this._update),a.on("moveend",this._update),a.on("terrain",this._update),a.on("projectiontransition",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this}remove(){return this._opacityTimeout&&(clearTimeout(this._opacityTimeout),delete this._opacityTimeout),this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("terrain",this._update),this._map.off("projectiontransition",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),O.remove(this._element),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(a){return this._lngLat=o.V.convert(a),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this}getElement(){return this._element}setPopup(a){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),a){if(!("offset"in a.options)){const b=Math.abs(13.5)/Math.SQRT2;a.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[b,-1*(38.1-13.5+b)],"bottom-right":[-b,-1*(38.1-13.5+b)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=a,this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this}setSubpixelPositioning(a){return this._subpixelPositioning=a,this}getPopup(){return this._popup}togglePopup(){const a=this._popup;return this._element.style.opacity===this._opacityWhenCovered?this:a?(a.isOpen()?a.remove():(a.setLngLat(this._lngLat),a.addTo(this._map)),this):this}_updateOpacity(a=!1){var u,y;const b=(u=this._map)===null||u===void 0?void 0:u.terrain,j=this._map.transform.isLocationOccluded(this._lngLat);if(!b||j){const ge=j?this._opacityWhenCovered:this._opacity;return void(this._element.style.opacity!==ge&&(this._element.style.opacity=ge))}if(a)this._opacityTimeout=null;else{if(this._opacityTimeout)return;this._opacityTimeout=setTimeout((()=>{this._opacityTimeout=null}),100)}const I=this._map,F=I.terrain.depthAtPoint(this._pos),U=I.terrain.getElevationForLngLat(this._lngLat,I.transform);if(I.transform.lngLatToCameraDepth(this._lngLat,U)-F<.006)return void(this._element.style.opacity=this._opacity);const Y=-this._offset.y/I.transform.pixelsPerMeter,re=Math.sin(I.getPitch()*Math.PI/180)*Y,ce=I.terrain.depthAtPoint(new o.P(this._pos.x,this._pos.y-this._offset.y)),le=I.transform.lngLatToCameraDepth(this._lngLat,U+re)-ce>.006;!((y=this._popup)===null||y===void 0)&&y.isOpen()&&le&&this._popup.remove(),this._element.style.opacity=le?this._opacityWhenCovered:this._opacity}getOffset(){return this._offset}setOffset(a){return this._offset=o.P.convert(a),this._update(),this}addClassName(a){this._element.classList.add(a)}removeClassName(a){this._element.classList.remove(a)}toggleClassName(a){return this._element.classList.toggle(a)}setDraggable(a){return this._draggable=!!a,this._map&&(a?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(a){return this._rotation=a||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(a){return this._rotationAlignment=a||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment}setPitchAlignment(a){return this._pitchAlignment=a&&a!=="auto"?a:this._rotationAlignment,this._update(),this}getPitchAlignment(){return this._pitchAlignment}setOpacity(a,u){return(this._opacity===void 0||a===void 0&&u===void 0)&&(this._opacity="1",this._opacityWhenCovered="0.2"),a!==void 0&&(this._opacity=a),u!==void 0&&(this._opacityWhenCovered=u),this._map&&this._updateOpacity(!0),this}}const Gh={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0};let gc=0,yc=!1;const vc={maxWidth:100,unit:"metric"};function ni(C,a,u){const y=u&&u.maxWidth||100,b=C._container.clientHeight/2,j=C._container.clientWidth/2,I=C.unproject([j-y/2,b]),F=C.unproject([j+y/2,b]),U=Math.round(C.project(F).x-C.project(I).x),Y=Math.min(y,U,C._container.clientWidth),re=I.distanceTo(F);if(u&&u.unit==="imperial"){const ce=3.2808*re;ce>5280?fi(a,Y,ce/5280,C._getUIString("ScaleControl.Miles")):fi(a,Y,ce,C._getUIString("ScaleControl.Feet"))}else u&&u.unit==="nautical"?fi(a,Y,re/1852,C._getUIString("ScaleControl.NauticalMiles")):re>=1e3?fi(a,Y,re/1e3,C._getUIString("ScaleControl.Kilometers")):fi(a,Y,re,C._getUIString("ScaleControl.Meters"))}function fi(C,a,u,y){const b=(function(j){const I=Math.pow(10,`${Math.floor(j)}`.length-1);let F=j/I;return F=F>=10?10:F>=5?5:F>=3?3:F>=2?2:F>=1?1:(function(U){const Y=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*Y)/Y})(F),I*F})(u);C.style.width=a*(b/u)+"px",C.innerHTML=`${b}&nbsp;${y}`}const Gi={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px",subpixelPositioning:!1,locationOccludedOpacity:void 0,padding:void 0},Yu=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function uu(C){if(C){if(typeof C=="number"){const a=Math.round(Math.abs(C)/Math.SQRT2);return{center:new o.P(0,0),top:new o.P(0,C),"top-left":new o.P(a,a),"top-right":new o.P(-a,a),bottom:new o.P(0,-C),"bottom-left":new o.P(a,-a),"bottom-right":new o.P(-a,-a),left:new o.P(C,0),right:new o.P(-C,0)}}if(C instanceof o.P||Array.isArray(C)){const a=o.P.convert(C);return{center:a,top:a,"top-left":a,"top-right":a,bottom:a,"bottom-left":a,"bottom-right":a,left:a,right:a}}return{center:o.P.convert(C.center||[0,0]),top:o.P.convert(C.top||[0,0]),"top-left":o.P.convert(C["top-left"]||[0,0]),"top-right":o.P.convert(C["top-right"]||[0,0]),bottom:o.P.convert(C.bottom||[0,0]),"bottom-left":o.P.convert(C["bottom-left"]||[0,0]),"bottom-right":o.P.convert(C["bottom-right"]||[0,0]),left:o.P.convert(C.left||[0,0]),right:o.P.convert(C.right||[0,0])}}return uu(new o.P(0,0))}const Ju=_;d.AJAXError=o.cJ,d.EXTENT=o.a5,d.Event=o.l,d.Evented=o.E,d.LngLat=o.V,d.MercatorCoordinate=o.a9,d.Point=o.P,d.addProtocol=o.cK,d.config=o.c,d.removeProtocol=o.cL,d.AttributionControl=Uf,d.BoxZoomHandler=Mo,d.CanvasSource=Ta,d.CooperativeGesturesHandler=an,d.DoubleClickZoomHandler=su,d.DragPanHandler=Vf,d.DragRotateHandler=Jo,d.EdgeInsets=Os,d.FullscreenControl=class extends o.E{constructor(C={}){var a;super(),this._onFullscreenChange=()=>{var u;let y=window.document.fullscreenElement||window.document.webkitFullscreenElement;for(;!((u=y?.shadowRoot)===null||u===void 0)&&u.fullscreenElement;)y=y.shadowRoot.fullscreenElement;y===this._container!==this._fullscreen&&this._handleFullscreenChange()},this._onClickFullscreen=()=>{this._isFullscreen()?this._exitFullscreen():this._requestFullscreen()},this._fullscreen=!1,this._pseudo=(a=C.pseudo)!==null&&a!==void 0&&a,C&&C.container&&(C.container instanceof HTMLElement?this._container=C.container:o.w("Full screen control 'container' must be a DOM element.")),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in document&&(this._fullscreenchange="MSFullscreenChange")}onAdd(C){return this._map=C,this._container||(this._container=this._map.getContainer()),this._controlContainer=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),this._controlContainer}onRemove(){O.remove(this._controlContainer),this._map=null,window.document.removeEventListener(this._fullscreenchange,this._onFullscreenChange)}_setupUI(){const C=this._fullscreenButton=O.create("button","maplibregl-ctrl-fullscreen",this._controlContainer);O.create("span","maplibregl-ctrl-icon",C).setAttribute("aria-hidden","true"),C.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),window.document.addEventListener(this._fullscreenchange,this._onFullscreenChange)}_updateTitle(){const C=this._getTitle();this._fullscreenButton.setAttribute("aria-label",C),this._fullscreenButton.title=C}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_handleFullscreenChange(){this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("maplibregl-ctrl-shrink"),this._fullscreenButton.classList.toggle("maplibregl-ctrl-fullscreen"),this._updateTitle(),this._fullscreen?(this.fire(new o.l("fullscreenstart")),this._prevCooperativeGesturesEnabled=this._map.cooperativeGestures.isEnabled(),this._map.cooperativeGestures.disable()):(this.fire(new o.l("fullscreenend")),this._prevCooperativeGesturesEnabled&&this._map.cooperativeGestures.enable())}_exitFullscreen(){this._pseudo?this._togglePseudoFullScreen():window.document.exitFullscreen?window.document.exitFullscreen():window.document.webkitCancelFullScreen?window.document.webkitCancelFullScreen():this._togglePseudoFullScreen()}_requestFullscreen(){this._pseudo?this._togglePseudoFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen?this._container.webkitRequestFullscreen():this._togglePseudoFullScreen()}_togglePseudoFullScreen(){this._container.classList.toggle("maplibregl-pseudo-fullscreen"),this._handleFullscreenChange(),this._map.resize()}},d.GeoJSONSource=wa,d.GeolocateControl=class extends o.E{constructor(C){super(),this._onSuccess=a=>{if(this._map){if(this._isOutOfMapMaxBounds(a))return this._setErrorState(),this.fire(new o.l("outofmaxbounds",a)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=a,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background");break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(a),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(a),this.options.showUserLocation&&this._dotElement.classList.remove("maplibregl-user-location-dot-stale"),this.fire(new o.l("geolocate",a)),this._finish()}},this._updateCamera=a=>{const u=new o.V(a.coords.longitude,a.coords.latitude),y=a.coords.accuracy,b=this._map.getBearing(),j=o.e({bearing:b},this.options.fitBoundsOptions),I=Mn.fromLngLat(u,y);this._map.fitBounds(I,j,{geolocateSource:!0})},this._updateMarker=a=>{if(a){const u=new o.V(a.coords.longitude,a.coords.latitude);this._accuracyCircleMarker.setLngLat(u).addTo(this._map),this._userLocationDotMarker.setLngLat(u).addTo(this._map),this._accuracy=a.coords.accuracy,this._updateCircleRadiusIfNeeded()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},this._onUpdate=()=>{this._updateCircleRadiusIfNeeded()},this._onError=a=>{if(this._map){if(a.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(a.code===3&&yc)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("maplibregl-user-location-dot-stale"),this.fire(new o.l("error",a)),this._finish()}},this._finish=()=>{this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},this._setupUI=()=>{this._map&&(this._container.addEventListener("contextmenu",(a=>a.preventDefault())),this._geolocateButton=O.create("button","maplibregl-ctrl-geolocate",this._container),O.create("span","maplibregl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",this._geolocateButton.disabled=!0)},this._finishSetupUI=a=>{if(this._map){if(a===!1){o.w("Geolocation support is not available so the GeolocateControl will be disabled.");const u=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}else{const u=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.disabled=!1,this._geolocateButton.title=u,this._geolocateButton.setAttribute("aria-label",u)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=O.create("div","maplibregl-user-location-dot"),this._userLocationDotMarker=new Xu({element:this._dotElement}),this._circleElement=O.create("div","maplibregl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Xu({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onUpdate),this._map.on("move",this._onUpdate),this._map.on("rotate",this._onUpdate),this._map.on("pitch",this._onUpdate)),this._geolocateButton.addEventListener("click",(()=>this.trigger())),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(u=>{const y=u?.[0]instanceof ResizeObserverEntry;u.geolocateSource||this._watchState!=="ACTIVE_LOCK"||y||this._map.isZooming()||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this.fire(new o.l("trackuserlocationend")),this.fire(new o.l("userlocationlostfocus")))}))}},this.options=o.e({},Gh,C)}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._setupUI(),(function(){return o._(this,arguments,void 0,(function*(a=!1){if(kl!==void 0&&!a)return kl;if(window.navigator.permissions===void 0)return kl=!!window.navigator.geolocation,kl;try{kl=(yield window.navigator.permissions.query({name:"geolocation"})).state!=="denied"}catch{kl=!!window.navigator.geolocation}return kl}))})().then((a=>this._finishSetupUI(a))),this._container}onRemove(){this._geolocationWatchID!==void 0&&(window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),O.remove(this._container),this._map.off("zoom",this._onUpdate),this._map.off("move",this._onUpdate),this._map.off("rotate",this._onUpdate),this._map.off("pitch",this._onUpdate),this._map=void 0,gc=0,yc=!1}_isOutOfMapMaxBounds(C){const a=this._map.getMaxBounds(),u=C.coords;return a&&(u.longitude<a.getWest()||u.longitude>a.getEast()||u.latitude<a.getSouth()||u.latitude>a.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting");break;case"ACTIVE_ERROR":case"BACKGROUND_ERROR":case"OFF":case void 0:break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}}_updateCircleRadiusIfNeeded(){const C=this._userLocationDotMarker.getLngLat();if(!(this.options.showUserLocation&&this.options.showAccuracyCircle&&this._accuracy&&C))return;const a=this._map.project(C),u=this._map.unproject([a.x+100,a.y]),y=C.distanceTo(u)/100,b=2*this._accuracy/y;this._circleElement.style.width=`${b.toFixed(2)}px`,this._circleElement.style.height=`${b.toFixed(2)}px`}trigger(){if(!this._setup)return o.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new o.l("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":gc--,yc=!1,this._watchState="OFF",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background-error"),this.fire(new o.l("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new o.l("trackuserlocationstart")),this.fire(new o.l("userlocationfocus"));break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-active");break;case"OFF":break;default:throw new Error(`Unexpected watchState ${this._watchState}`)}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let C;this._geolocateButton.classList.add("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),gc++,gc>1?(C={maximumAge:6e5,timeout:0},yc=!0):(C=this.options.positionOptions,yc=!1),this._geolocationWatchID=window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,C)}}else window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0}_clearWatch(){window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("maplibregl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},d.GlobeControl=class{constructor(){this._toggleProjection=()=>{var C;const a=(C=this._map.getProjection())===null||C===void 0?void 0:C.type;this._map.setProjection(a!=="mercator"&&a?{type:"mercator"}:{type:"globe"}),this._updateGlobeIcon()},this._updateGlobeIcon=()=>{var C;this._globeButton.classList.remove("maplibregl-ctrl-globe"),this._globeButton.classList.remove("maplibregl-ctrl-globe-enabled"),((C=this._map.getProjection())===null||C===void 0?void 0:C.type)==="globe"?(this._globeButton.classList.add("maplibregl-ctrl-globe-enabled"),this._globeButton.title=this._map._getUIString("GlobeControl.Disable")):(this._globeButton.classList.add("maplibregl-ctrl-globe"),this._globeButton.title=this._map._getUIString("GlobeControl.Enable"))}}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._globeButton=O.create("button","maplibregl-ctrl-globe",this._container),O.create("span","maplibregl-ctrl-icon",this._globeButton).setAttribute("aria-hidden","true"),this._globeButton.type="button",this._globeButton.addEventListener("click",this._toggleProjection),this._updateGlobeIcon(),this._map.on("styledata",this._updateGlobeIcon),this._map.on("projectiontransition",this._updateGlobeIcon),this._container}onRemove(){O.remove(this._container),this._map.off("styledata",this._updateGlobeIcon),this._map.off("projectiontransition",this._updateGlobeIcon),this._globeButton.removeEventListener("click",this._toggleProjection),this._map=void 0}},d.Hash=Rf,d.ImageSource=_i,d.KeyboardHandler=Lr,d.LngLatBounds=Mn,d.LogoControl=El,d.Map=class extends Ei{get _ownerWindow(){var C,a;return((a=(C=this._container)===null||C===void 0?void 0:C.ownerDocument)===null||a===void 0?void 0:a.defaultView)||window}constructor(C){var a,u;o.cH.mark(o.cI.create);const y=Object.assign(Object.assign(Object.assign({},jl),C),{canvasContextAttributes:Object.assign(Object.assign({},jl.canvasContextAttributes),C.canvasContextAttributes)});if(y.minZoom!=null&&y.maxZoom!=null&&y.minZoom>y.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(y.minPitch!=null&&y.maxPitch!=null&&y.minPitch>y.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(y.minPitch!=null&&y.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(y.maxPitch!=null&&y.maxPitch>180)throw new Error("maxPitch must be less than or equal to 180");const b=new pl,j=new nr;y.minZoom!==void 0&&b.setMinZoom(y.minZoom),y.maxZoom!==void 0&&b.setMaxZoom(y.maxZoom),y.minPitch!==void 0&&b.setMinPitch(y.minPitch),y.maxPitch!==void 0&&b.setMaxPitch(y.maxPitch),y.renderWorldCopies!==void 0&&b.setRenderWorldCopies(y.renderWorldCopies),y.transformConstrain!==null&&b.setConstrainOverride(y.transformConstrain),super(b,j,{bearingSnap:y.bearingSnap,zoomSnap:y.zoomSnap}),this._idleTriggered=!1,this._crossFadingFactor=1,this._renderTaskQueue=new lu,this._controls=[],this._mapId=o.af(),this._lostContextStyle={style:null,images:null},this._contextLost=F=>{if(F.preventDefault(),this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this.painter.destroy(),this._lostContextStyle=this._getStyleAndImages(),this.style){for(const U of Object.values(this.style._layers))if(U.type==="custom"&&console.warn(`Custom layer with id '${U.id}' cannot be restored after WebGL context loss. You will need to re-add it manually after context restoration.`),U._listeners)for(const[Y]of Object.entries(U._listeners))console.warn(`Custom layer with id '${U.id}' had event listeners for event '${Y}' which cannot be restored after WebGL context loss. You will need to re-add them manually after context restoration.`);this.style.destroy(),this.style=null,this.fire(new o.l("webglcontextlost",{originalEvent:F}))}else this.fire(new o.l("webglcontextlost",{originalEvent:F}))},this._contextRestored=F=>{this._lostContextStyle.style&&this.setStyle(this._lostContextStyle.style,{diff:!1}),this._lostContextStyle.images&&(this.style.imageManager.images=this._lostContextStyle.images),this._lostContextStyle={style:null,images:null},this._setupPainter(),this.resize(),this._update(),this._resizeInternal(),this.fire(new o.l("webglcontextrestored",{originalEvent:F}))},this._onMapScroll=F=>{if(F.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},this._onWindowOnline=()=>{this._update()},this._interactive=y.interactive,this._maxTileCacheSize=y.maxTileCacheSize,this._maxTileCacheZoomLevels=y.maxTileCacheZoomLevels,this._canvasContextAttributes=Object.assign({},y.canvasContextAttributes),this._trackResize=y.trackResize===!0,this._bearingSnap=y.bearingSnap,this._zoomSnap=y.zoomSnap,this._centerClampedToGround=y.centerClampedToGround,this._refreshExpiredTiles=y.refreshExpiredTiles===!0,this._fadeDuration=y.fadeDuration,this._crossSourceCollisions=y.crossSourceCollisions===!0,this._collectResourceTiming=y.collectResourceTiming===!0,this._locale=Object.assign(Object.assign({},cu),y.locale),this._clickTolerance=y.clickTolerance,this._overridePixelRatio=y.pixelRatio,this._maxCanvasSize=y.maxCanvasSize,this._zoomLevelsToOverscale=y.experimentalZoomLevelsToOverscale,this.transformCameraUpdate=y.transformCameraUpdate,this.transformConstrain=y.transformConstrain,this.cancelPendingTileRequestsWhileZooming=y.cancelPendingTileRequestsWhileZooming===!0,y.reduceMotion!==void 0&&(z.prefersReducedMotion=y.reduceMotion),this._imageQueueHandle=de.addThrottleControl((()=>this.isMoving())),this._requestManager=new ye(y.transformRequest),this._container=this._resolveContainer(y.container),y.maxBounds&&this.setMaxBounds(y.maxBounds),this._setupContainer(),this._setupPainter(),this.on("move",(()=>this._update(!1))),this.on("moveend",(()=>this._update(!1))),this.on("zoom",(()=>this._update(!0))),this.on("terrain",(()=>{this.painter.terrainFacilitator.dirty=!0,this._update(!0)})),this.once("idle",(()=>{this._idleTriggered=!0})),typeof window<"u"&&(this._ownerWindow.addEventListener("online",this._onWindowOnline,!1),this._setupResizeObserver()),this.handlers=new vs(this,y),this._hash=y.hash&&new Rf(typeof y.hash=="string"&&y.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:y.center,elevation:y.elevation,zoom:y.zoom,bearing:y.bearing,pitch:y.pitch,roll:y.roll}),y.bounds&&(this.resize(),this.fitBounds(y.bounds,o.e({},y.fitBoundsOptions,{duration:0}))));const I=typeof y.style=="string"||((u=(a=y.style)===null||a===void 0?void 0:a.projection)===null||u===void 0?void 0:u.type)!=="globe";this.resize(null,I),this._localIdeographFontFamily=y.localIdeographFontFamily,this._validateStyle=y.validateStyle,y.style&&this.setStyle(y.style,{localIdeographFontFamily:y.localIdeographFontFamily}),y.attributionControl&&this.addControl(new Uf(typeof y.attributionControl=="boolean"?void 0:y.attributionControl)),y.maplibreLogo&&this.addControl(new El,y.logoPosition),this.on("style.load",(()=>{if(I||this._resizeTransform(),this.transform.unmodified){const F=o.U(this.style.stylesheet,["center","zoom","bearing","pitch","roll"]);this.jumpTo(F)}})),this.on("data",(F=>{this._update(F.dataType==="style"),this.fire(new o.l(`${F.dataType}data`,F))})),this.on("dataloading",(F=>{this.fire(new o.l(`${F.dataType}dataloading`,F))})),this.on("dataabort",(F=>{this.fire(new o.l("sourcedataabort",F))}))}_getMapId(){return this._mapId}setGlobalStateProperty(C,a){return this.style.setGlobalStateProperty(C,a),this._update(!0)}getGlobalState(){return this.style.getGlobalState()}addControl(C,a){if(a===void 0&&(a=C.getDefaultPosition?C.getDefaultPosition():"top-right"),!C||!C.onAdd)return this.fire(new o.k(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const u=C.onAdd(this);this._controls.push(C);const y=this._controlPositions[a];return a.indexOf("bottom")!==-1?y.insertBefore(u,y.firstChild):y.appendChild(u),this}removeControl(C){if(!C||!C.onRemove)return this.fire(new o.k(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const a=this._controls.indexOf(C);return a>-1&&this._controls.splice(a,1),C.onRemove(this),this}hasControl(C){return this._controls.indexOf(C)>-1}coveringTiles(C){return er(this.transform,C)}calculateCameraOptionsFromTo(C,a,u,y){return y==null&&this.terrain&&(y=this.terrain.getElevationForLngLat(u,this.transform)),super.calculateCameraOptionsFromTo(C,a,u,y)}resize(C,a=!0){if(this._lostContextStyle.style!==null)return this;this._resizeInternal(a);const u=!this._moving;return u&&(this.stop(),this.fire(new o.l("movestart",C)).fire(new o.l("move",C))),this.fire(new o.l("resize",C)),u&&this.fire(new o.l("moveend",C)),this}_resizeInternal(C=!0){const[a,u]=this._containerDimensions(),y=this._getClampedPixelRatio(a,u);if(this._resizeCanvas(a,u,y),this.painter.resize(a,u,y),this.painter.overLimit()){const b=this.painter.context.gl;this._maxCanvasSize=[b.drawingBufferWidth,b.drawingBufferHeight];const j=this._getClampedPixelRatio(a,u);this._resizeCanvas(a,u,j),this.painter.resize(a,u,j)}this._resizeTransform(C)}_resizeTransform(C=!0){var a;const[u,y]=this._containerDimensions();this.transform.resize(u,y,C),(a=this._requestedCameraState)===null||a===void 0||a.resize(u,y,C)}_getClampedPixelRatio(C,a){const{0:u,1:y}=this._maxCanvasSize,b=this.getPixelRatio(),j=C*b,I=a*b;return Math.min(j>u?u/j:1,I>y?y/I:1)*b}getPixelRatio(){var C;return(C=this._overridePixelRatio)!==null&&C!==void 0?C:devicePixelRatio}setPixelRatio(C){this._overridePixelRatio=C,this.resize()}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()}setMaxBounds(C){return this.transform.setMaxBounds(Mn.convert(C)),this._update()}setMinZoom(C){if((C=C??-2)>=-2&&C<=this.transform.maxZoom){const a=this.transform.zoom,u=this._getTransformForUpdate();return u.setMinZoom(C),this._applyUpdatedTransform(u),this._update(),a!==this.transform.zoom&&this.fire(new o.l("zoomstart")).fire(new o.l("zoom")).fire(new o.l("zoomend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(C){if((C=C??22)>=this.transform.minZoom){const a=this.transform.zoom,u=this._getTransformForUpdate();return u.setMaxZoom(C),this._applyUpdatedTransform(u),this._update(),a!==this.transform.zoom&&this.fire(new o.l("zoomstart")).fire(new o.l("zoom")).fire(new o.l("zoomend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(C){if((C=C??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(C>=0&&C<=this.transform.maxPitch){const a=this.transform.pitch,u=this._getTransformForUpdate();return u.setMinPitch(C),this._applyUpdatedTransform(u),this._update(),a!==this.transform.pitch&&this.fire(new o.l("pitchstart")).fire(new o.l("pitch")).fire(new o.l("pitchend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(C){if((C=C??60)>180)throw new Error("maxPitch must be less than or equal to 180");if(C>=this.transform.minPitch){const a=this.transform.pitch,u=this._getTransformForUpdate();return u.setMaxPitch(C),this._applyUpdatedTransform(u),this._update(),a!==this.transform.pitch&&this.fire(new o.l("pitchstart")).fire(new o.l("pitch")).fire(new o.l("pitchend")).fire(new o.l("movestart")).fire(new o.l("move")).fire(new o.l("moveend")),this}throw new Error("maxPitch must be greater than the current minPitch")}getMaxPitch(){return this.transform.maxPitch}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(C){return this.transform.setRenderWorldCopies(C),this._update()}setTransformConstrain(C){return this.transform.setConstrainOverride(C),this._update()}project(C){return this.transform.locationToScreenPoint(o.V.convert(C),this.style&&this.terrain)}unproject(C){return this.transform.screenPointToLocation(o.P.convert(C),this.terrain)}isMoving(){var C;return this._moving||((C=this.handlers)===null||C===void 0?void 0:C.isMoving())}isZooming(){var C;return this._zooming||((C=this.handlers)===null||C===void 0?void 0:C.isZooming())}isRotating(){var C;return this._rotating||((C=this.handlers)===null||C===void 0?void 0:C.isRotating())}_createDelegatedListener(C,a,u){if(C==="mouseenter"||C==="mouseover"){let y=!1;return{layers:a,listener:u,delegates:{mousemove:j=>{const I=a.filter((U=>this.getLayer(U))),F=I.length!==0?this.queryRenderedFeatures(j.point,{layers:I}):[];F.length?y||(y=!0,u.call(this,new Ti(C,this,j.originalEvent,{features:F}))):y=!1},mouseout:()=>{y=!1}}}}if(C==="mouseleave"||C==="mouseout"){let y=!1;return{layers:a,listener:u,delegates:{mousemove:I=>{const F=a.filter((U=>this.getLayer(U)));(F.length!==0?this.queryRenderedFeatures(I.point,{layers:F}):[]).length?y=!0:y&&(y=!1,u.call(this,new Ti(C,this,I.originalEvent)))},mouseout:I=>{y&&(y=!1,u.call(this,new Ti(C,this,I.originalEvent)))}}}}{const y=b=>{const j=a.filter((F=>this.getLayer(F))),I=j.length!==0?this.queryRenderedFeatures(b.point,{layers:j}):[];I.length&&(b.features=I,u.call(this,b),delete b.features)};return{layers:a,listener:u,delegates:{[C]:y}}}}_saveDelegatedListener(C,a){this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[C]=this._delegatedListeners[C]||[],this._delegatedListeners[C].push(a)}_removeDelegatedListener(C,a,u){if(!this._delegatedListeners||!this._delegatedListeners[C])return;const y=this._delegatedListeners[C];for(let b=0;b<y.length;b++){const j=y[b];if(j.listener===u&&j.layers.length===a.length&&j.layers.every((I=>a.includes(I)))){for(const I in j.delegates)this.off(I,j.delegates[I]);return void y.splice(b,1)}}}on(C,a,u){if(u===void 0)return super.on(C,a);const y=typeof a=="string"?[a]:a,b=this._createDelegatedListener(C,y,u);this._saveDelegatedListener(C,b);for(const j in b.delegates)this.on(j,b.delegates[j]);return{unsubscribe:()=>{this._removeDelegatedListener(C,y,u)}}}once(C,a,u){if(u===void 0)return super.once(C,a);const y=typeof a=="string"?[a]:a,b=this._createDelegatedListener(C,y,u);for(const j in b.delegates){const I=b.delegates[j];b.delegates[j]=(...F)=>{this._removeDelegatedListener(C,y,u),I(...F)}}this._saveDelegatedListener(C,b);for(const j in b.delegates)this.once(j,b.delegates[j]);return this}off(C,a,u){return u===void 0?super.off(C,a):(this._removeDelegatedListener(C,typeof a=="string"?[a]:a,u),this)}queryRenderedFeatures(C,a){if(!this.style)return[];let u;const y=C instanceof o.P||Array.isArray(C),b=y?C:[[0,0],[this.transform.width,this.transform.height]];if(a=a||(y?{}:C)||{},b instanceof o.P||typeof b[0]=="number")u=[o.P.convert(b)];else{const j=o.P.convert(b[0]),I=o.P.convert(b[1]);u=[j,new o.P(I.x,j.y),I,new o.P(j.x,I.y),j]}return this.style.queryRenderedFeatures(u,a,this.transform)}querySourceFeatures(C,a){return this.style.querySourceFeatures(C,a)}setStyle(C,a){return(a=o.e({},{localIdeographFontFamily:this._localIdeographFontFamily,validate:this._validateStyle},a)).diff!==!1&&a.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&C?(this._diffStyle(C,a),this):(this._localIdeographFontFamily=a.localIdeographFontFamily,this._updateStyle(C,a))}setTransformRequest(C){return this._requestManager.setTransformRequest(C),this}_getUIString(C){const a=this._locale[C];if(a==null)throw new Error(`Missing UI string '${C}'`);return a}_updateStyle(C,a){var u,y;if(a.transformStyle&&this.style&&!this.style._loaded)return void this.style.once("style.load",(()=>this._updateStyle(C,a)));const b=this.style&&a.transformStyle?this.style.serialize():void 0;return this.style&&(this.style.setEventedParent(null),this.style._remove(!C)),C?(this.style=new Bs(this,a||{}),this.style.setEventedParent(this,{style:this.style}),typeof C=="string"?this.style.loadURL(C,a,b):this.style.loadJSON(C,a,b),this):((y=(u=this.style)===null||u===void 0?void 0:u.projection)===null||y===void 0||y.destroy(),delete this.style,this)}_lazyInitEmptyStyle(){this.style||(this.style=new Bs(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}_diffStyle(C,a){if(typeof C=="string"){const u=this._requestManager.transformRequest(C,"Style");o.j(u,new AbortController).then((y=>{this._updateDiff(y.data,a)})).catch((y=>{y&&this.fire(new o.k(y))}))}else typeof C=="object"&&this._updateDiff(C,a)}_updateDiff(C,a){try{this.style.setState(C,a)&&this._update(!0)}catch(u){o.w(`Unable to perform style diff: ${u.message||u.error||u}.  Rebuilding the style from scratch.`),this._updateStyle(C,a)}}getStyle(){if(this.style)return this.style.serialize()}_getStyleAndImages(){return this.style?{style:this.style.serialize(),images:this.style.imageManager.cloneImages()}:{style:null,images:{}}}isStyleLoaded(){return this.style?this.style.loaded():o.w("There is no style added to the map.")}addSource(C,a){return this._lazyInitEmptyStyle(),this.style.addSource(C,a),this._update(!0)}isSourceLoaded(C){const a=this.style&&this.style.tileManagers[C];if(a!==void 0)return a.loaded();this.fire(new o.k(new Error(`There is no tile manager with ID '${C}'`)))}setTerrain(C){if(this.style._checkLoaded(),this._terrainDataCallback&&this.style.off("data",this._terrainDataCallback),C){const a=this.style.tileManagers[C.source];if(!a)throw new Error(`cannot load terrain, because there exists no source with ID: ${C.source}`);this.terrain===null&&a.reload();for(const u in this.style._layers){const y=this.style._layers[u];y.type==="hillshade"&&y.source===C.source&&o.w("You are using the same source for a hillshade layer and for 3D terrain. Please consider using two separate sources to improve rendering quality."),y.type==="color-relief"&&y.source===C.source&&o.w("You are using the same source for a color-relief layer and for 3D terrain. Please consider using two separate sources to improve rendering quality.")}this.terrain=new ei(this.painter,a,C),this.painter.renderToTexture=new Io(this.painter,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._terrainDataCallback=u=>{var y;u.dataType==="style"?this.terrain.tileManager.freeRtt():u.dataType==="source"&&u.tile&&(u.sourceId!==C.source||this._elevationFreeze||(this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))),((y=u.source)===null||y===void 0?void 0:y.type)==="image"?this.terrain.tileManager.freeRtt():this.terrain.tileManager.freeRtt(u.tile.tileID))},this.style.on("data",this._terrainDataCallback)}else this.terrain&&this.terrain.tileManager.destruct(),this.terrain=null,this.painter.renderToTexture&&this.painter.renderToTexture.destruct(),this.painter.renderToTexture=null,this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0);return this.fire(new o.l("terrain",{terrain:C})),this}getTerrain(){var C,a;return(a=(C=this.terrain)===null||C===void 0?void 0:C.options)!==null&&a!==void 0?a:null}areTilesLoaded(){const C=this.style&&this.style.tileManagers;for(const a of Object.values(C))if(!a.areTilesLoaded())return!1;return!0}removeSource(C){return this.style.removeSource(C),this._update(!0)}getSource(C){return this.style.getSource(C)}setSourceTileLodParams(C,a,u){if(u){const y=this.getSource(u);if(!y)throw new Error(`There is no source with ID "${u}", cannot set LOD parameters`);y.calculateTileZoom=hn(Math.max(1,C),Math.max(1,a))}else for(const y in this.style.tileManagers)this.style.tileManagers[y].getSource().calculateTileZoom=hn(Math.max(1,C),Math.max(1,a));return this._update(!0),this}refreshTiles(C,a){const u=this.style.tileManagers[C];if(!u)throw new Error(`There is no tile manager with ID "${C}", cannot refresh tile`);a===void 0?u.reload(!0):u.refreshTiles(a.map((y=>new o.ac(y.z,y.x,y.y))))}addImage(C,a,u={}){const{pixelRatio:y=1,sdf:b=!1,stretchX:j,stretchY:I,content:F,textFitWidth:U,textFitHeight:Y}=u;if(this._lazyInitEmptyStyle(),!(a instanceof HTMLImageElement||o.b(a))){if(a.width===void 0||a.height===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));{const{width:re,height:ce,data:le}=a,ge=a;return this.style.addImage(C,{data:new o.R({width:re,height:ce},new Uint8Array(le)),pixelRatio:y,stretchX:j,stretchY:I,content:F,textFitWidth:U,textFitHeight:Y,sdf:b,version:0,userImage:ge}),ge.onAdd&&ge.onAdd(this,C),this}}{const{width:re,height:ce,data:le}=z.getImageData(a);this.style.addImage(C,{data:new o.R({width:re,height:ce},le),pixelRatio:y,stretchX:j,stretchY:I,content:F,textFitWidth:U,textFitHeight:Y,sdf:b,version:0})}}updateImage(C,a){const u=this.style.getImage(C);if(!u)return this.fire(new o.k(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const y=a instanceof HTMLImageElement||o.b(a)?z.getImageData(a):a,{width:b,height:j,data:I}=y;if(b===void 0||j===void 0)return this.fire(new o.k(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(b!==u.data.width||j!==u.data.height)return this.fire(new o.k(new Error("The width and height of the updated image must be that same as the previous version of the image")));const F=!(a instanceof HTMLImageElement||o.b(a));return u.data.replace(I,F),this.style.updateImage(C,u),this}getImage(C){return this.style.getImage(C)}hasImage(C){return C?!!this.style.getImage(C):(this.fire(new o.k(new Error("Missing required image id"))),!1)}removeImage(C){this.style.removeImage(C)}loadImage(C){return de.getImage(this._requestManager.transformRequest(C,"Image"),new AbortController)}listImages(){return this.style.listImages()}addLayer(C,a){return this._lazyInitEmptyStyle(),this.style.addLayer(C,a),this._update(!0)}moveLayer(C,a){return this.style.moveLayer(C,a),this._update(!0)}removeLayer(C){return this.style.removeLayer(C),this._update(!0)}getLayer(C){return this.style.getLayer(C)}getLayersOrder(){return this.style.getLayersOrder()}setLayerZoomRange(C,a,u){return this.style.setLayerZoomRange(C,a,u),this._update(!0)}setFilter(C,a,u={}){return this.style.setFilter(C,a,u),this._update(!0)}getFilter(C){return this.style.getFilter(C)}setPaintProperty(C,a,u,y={}){return this.style.setPaintProperty(C,a,u,y),this._update(!0)}getPaintProperty(C,a){return this.style.getPaintProperty(C,a)}setLayoutProperty(C,a,u,y={}){return this.style.setLayoutProperty(C,a,u,y),this._update(!0)}getLayoutProperty(C,a){return this.style.getLayoutProperty(C,a)}setGlyphs(C,a={}){return this._lazyInitEmptyStyle(),this.style.setGlyphs(C,a),this._update(!0)}getGlyphs(){return this.style.getGlyphsUrl()}addSprite(C,a,u={}){return this._lazyInitEmptyStyle(),this.style.addSprite(C,a,u,(y=>{y||this._update(!0)})),this}removeSprite(C){return this._lazyInitEmptyStyle(),this.style.removeSprite(C),this._update(!0)}getSprite(){return this.style.getSprite()}setSprite(C,a={}){return this._lazyInitEmptyStyle(),this.style.setSprite(C,a,(u=>{u||this._update(!0)})),this}setLight(C,a={}){return this._lazyInitEmptyStyle(),this.style.setLight(C,a),this._update(!0)}getLight(){return this.style.getLight()}setSky(C,a={}){return this._lazyInitEmptyStyle(),this.style.setSky(C,a),this._update(!0)}getSky(){return this.style.getSky()}setFeatureState(C,a){return this.style.setFeatureState(C,a),this._update()}removeFeatureState(C,a){return this.style.removeFeatureState(C,a),this._update()}getFeatureState(C){return this.style.getFeatureState(C)}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}_containerDimensions(){let C=0,a=0;return this._container&&(C=this._container.clientWidth||400,a=this._container.clientHeight||300),[C,a]}_setupResizeObserver(){var C;let a=!1;const u=Of((b=>{this._trackResize&&!this._removed&&(this.resize(b),this.redraw())}),50),y=(C=this._ownerWindow.ResizeObserver)!==null&&C!==void 0?C:ResizeObserver;this._resizeObserver=new y((b=>{a?u(b):a=!0})),this._resizeObserver.observe(this._container)}_resolveContainer(C){if(typeof C=="string"){const a=document.getElementById(C);if(!a)throw new Error(`Container '${C}' not found.`);return a}if(C instanceof HTMLElement||C&&typeof C=="object"&&C.nodeType===1)return C;throw new Error("Invalid type: 'container' must be a String or HTMLElement.")}_setupContainer(){const C=this._container;C.classList.add("maplibregl-map");const a=this._canvasContainer=O.create("div","maplibregl-canvas-container",C);this._interactive&&a.classList.add("maplibregl-interactive"),this._canvas=O.create("canvas","maplibregl-canvas",a),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex",this._interactive?"0":"-1"),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region");const u=this._containerDimensions(),y=this._getClampedPixelRatio(u[0],u[1]);this._resizeCanvas(u[0],u[1],y);const b=this._controlContainer=O.create("div","maplibregl-control-container",C),j=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((I=>{j[I]=O.create("div",`maplibregl-ctrl-${I} `,b)})),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(C,a,u){this._canvas.width=Math.floor(u*C),this._canvas.height=Math.floor(u*a),this._canvas.style.width=`${C}px`,this._canvas.style.height=`${a}px`}_setupPainter(){const C=Object.assign(Object.assign({},this._canvasContextAttributes),{alpha:!0,depth:!0,stencil:!0,premultipliedAlpha:!0});let a=null;this._canvas.addEventListener("webglcontextcreationerror",(y=>{a={requestedAttributes:C},y&&(a.statusMessage=y.statusMessage,a.type=y.type)}),{once:!0});let u=null;if(u=this._canvasContextAttributes.contextType?this._canvas.getContext(this._canvasContextAttributes.contextType,C):this._canvas.getContext("webgl2",C)||this._canvas.getContext("webgl",C),!u){const y="Failed to initialize WebGL";throw a?(a.message=y,new Error(JSON.stringify(a))):new Error(y)}this.painter=new Lh(u,this.transform),X.testSupport(u)}migrateProjection(C,a){super.migrateProjection(C,a),this.painter.transform=C,this.fire(new o.l("projectiontransition",{newProjection:this.style.projection.name}))}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}_update(C){return this.style&&this.style._loaded?(this._styleDirty=this._styleDirty||C,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(C){return this._update(),this._renderTaskQueue.add(C)}_cancelRenderFrame(C){this._renderTaskQueue.remove(C)}_render(C){var a,u,y,b,j;const I=this._idleTriggered?this._fadeDuration:0,F=((a=this.style.projection)===null||a===void 0?void 0:a.transitionState)>0;if(this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(C),this._removed)return;let U=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;const ce=this.transform.zoom,le=$();this.style.zoomHistory.update(ce,le);const ge=new o.H(ce,{now:le,fadeDuration:I,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),be=ge.crossFadingFactor();be===1&&be===this._crossFadingFactor||(U=!0,this._crossFadingFactor=be),this.style.update(ge)}const Y=((u=this.style.projection)===null||u===void 0?void 0:u.transitionState)>0!==F;(y=this.style.projection)===null||y===void 0||y.setErrorQueryLatitudeDegrees(this.transform.center.lat),this.transform.setTransitionState((b=this.style.projection)===null||b===void 0?void 0:b.transitionState,(j=this.style.projection)===null||j===void 0?void 0:j.latitudeErrorCorrectionRadians),this.style&&(this._sourcesDirty||Y)&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this.terrain?(this.terrain.tileManager.update(this.transform,this.terrain),this.transform.setMinElevationForCurrentTile(this.terrain.getMinTileElevationForLngLatZoom(this.transform.center,this.transform.tileZoom)),!this._elevationFreeze&&this._centerClampedToGround&&this.transform.setElevation(this.terrain.getElevationForLngLatZoom(this.transform.center,this.transform.tileZoom))):(this.transform.setMinElevationForCurrentTile(0),this._centerClampedToGround&&this.transform.setElevation(0)),this._placementDirty=this.style&&this.style._updatePlacement(this.transform,this.showCollisionBoxes,I,this._crossSourceCollisions,Y),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:I,showPadding:this.showPadding}),this.fire(new o.l("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,o.cH.mark(o.cI.load),this.fire(new o.l("load"))),this.style&&(this.style.hasTransitions()||U)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles();const re=this._sourcesDirty||this._styleDirty||this._placementDirty;return re||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new o.l("idle")),!this._loaded||this._fullyLoaded||re||(this._fullyLoaded=!0,o.cH.mark(o.cI.fullLoad)),this}redraw(){return this.style&&(this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._render(0)),this}remove(){var C;this._hash&&this._hash.remove();for(const u of this._controls)u.onRemove(this);this._controls=[],this._frameRequest&&(this._frameRequest.abort(),this._frameRequest=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),typeof window<"u"&&this._ownerWindow.removeEventListener("online",this._onWindowOnline,!1),de.removeThrottleControl(this._imageQueueHandle),(C=this._resizeObserver)===null||C===void 0||C.disconnect();const a=this.painter.context.gl.getExtension("WEBGL_lose_context");a?.loseContext&&a.loseContext(),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),O.remove(this._canvasContainer),O.remove(this._controlContainer),this._container.removeEventListener("scroll",this._onMapScroll,!1),this._container.classList.remove("maplibregl-map"),o.cH.remove(),this._removed=!0,this.fire(new o.l("remove"))}triggerRepaint(){this.style&&!this._frameRequest&&(this._frameRequest=new AbortController,z.frame(this._frameRequest,(C=>{o.cH.recordStartOfFrameAt(C),this._frameRequest=null;try{this._render(C)}catch(a){if(!o.Z(a)&&!(function(u){return u.message===J})(a))throw a}}),(()=>{}),this._ownerWindow))}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(C){this._showTileBoundaries!==C&&(this._showTileBoundaries=C,this._update())}get showPadding(){return!!this._showPadding}set showPadding(C){this._showPadding!==C&&(this._showPadding=C,this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(C){this._showCollisionBoxes!==C&&(this._showCollisionBoxes=C,C?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(C){this._showOverdrawInspector!==C&&(this._showOverdrawInspector=C,this._update())}get repaint(){return!!this._repaint}set repaint(C){this._repaint!==C&&(this._repaint=C,this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(C){this._vertices=C,this._update()}get version(){return Zu}getCameraTargetElevation(){return this.transform.elevation}getProjection(){return this.style.getProjection()}setProjection(C){return this._lazyInitEmptyStyle(),this.style.setProjection(C),this._update(!0)}},d.MapMouseEvent=Ti,d.MapTouchEvent=ru,d.MapWheelEvent=zh,d.Marker=Xu,d.NavigationControl=class{constructor(C){this._updateZoomButtons=()=>{const a=this._map.getZoom(),u=a===this._map.getMaxZoom(),y=a===this._map.getMinZoom();this._zoomInButton.disabled=u,this._zoomOutButton.disabled=y,this._zoomInButton.setAttribute("aria-disabled",u.toString()),this._zoomOutButton.setAttribute("aria-disabled",y.toString())},this._rotateCompassArrow=()=>{this._compassIcon.style.transform=this.options.visualizePitch&&this.options.visualizeRoll?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateZ(${-this._map.transform.roll}deg) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(this._map.transform.pitchInRadians),.5)}) rotateX(${this._map.transform.pitch}deg) rotateZ(${-this._map.transform.bearing}deg)`:this.options.visualizeRoll?`rotate(${-this._map.transform.bearing-this._map.transform.roll}deg)`:`rotate(${-this._map.transform.bearing}deg)`},this._setButtonTitle=(a,u)=>{const y=this._map._getUIString(`NavigationControl.${u}`);a.title=y,a.setAttribute("aria-label",y)},this.options=o.e({},qh,C),this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._container.addEventListener("contextmenu",(a=>a.preventDefault())),this.options.showZoom&&(this._zoomInButton=this._createButton("maplibregl-ctrl-zoom-in",(a=>this._map.zoomIn({},{originalEvent:a}))),O.create("span","maplibregl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("maplibregl-ctrl-zoom-out",(a=>this._map.zoomOut({},{originalEvent:a}))),O.create("span","maplibregl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(this._compass=this._createButton("maplibregl-ctrl-compass",(a=>{this.options.visualizePitch?this._map.resetNorthPitch({},{originalEvent:a}):this._map.resetNorth({},{originalEvent:a})})),this._compassIcon=O.create("span","maplibregl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}onAdd(C){return this._map=C,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.on("roll",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Ml(this._map,this._compass,this.options.visualizePitch)),this._container}onRemove(){O.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this.options.visualizeRoll&&this._map.off("roll",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map}_createButton(C,a){const u=O.create("button",C,this._container);return u.type="button",u.addEventListener("click",a),u}},d.Popup=class extends o.E{constructor(C){super(),this._updateOpacity=()=>{this.options.locationOccludedOpacity!==void 0&&(this._container.style.opacity=this._map.transform.isLocationOccluded(this.getLngLat())?`${this.options.locationOccludedOpacity}`:"")},this.remove=()=>(this._content&&O.remove(this._content),this._container&&(O.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),this._map._canvasContainer.classList.remove("maplibregl-track-pointer"),delete this._map,this.fire(new o.l("close"))),this),this._onMouseUp=a=>{this._update(a.point)},this._onMouseMove=a=>{this._update(a.point)},this._onDrag=a=>{this._update(a.point)},this._update=a=>{if(!this._map||!this._lngLat&&!this._trackPointer||!this._content)return;if(!this._container){if(this._container=O.create("div","maplibregl-popup",this._map.getContainer()),this._tip=O.create("div","maplibregl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className)for(const I of this.options.className.split(" "))this._container.classList.add(I);this._closeButton&&this._closeButton.setAttribute("aria-label",this._map._getUIString("Popup.Close")),this._trackPointer&&this._container.classList.add("maplibregl-popup-track-pointer")}if(this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._lngLat=Ud(this._lngLat,this._flatPos,this._map.transform,this._trackPointer),this._trackPointer&&!a)return;const u=this._flatPos=this._pos=this._trackPointer&&a?a:this._map.project(this._lngLat);this._map.terrain&&(this._flatPos=this._trackPointer&&a?a:this._map.transform.locationToScreenPoint(this._lngLat));let y=this.options.anchor;const b=uu(this.options.offset);if(!y){const I=this._container.offsetWidth,F=this._container.offsetHeight,U=(function(re){var ce,le,ge,be;return re?{top:(ce=re.top)!==null&&ce!==void 0?ce:0,right:(le=re.right)!==null&&le!==void 0?le:0,bottom:(ge=re.bottom)!==null&&ge!==void 0?ge:0,left:(be=re.left)!==null&&be!==void 0?be:0}:{top:0,right:0,bottom:0,left:0}})(this.options.padding);let Y;Y=u.y+b.bottom.y<F+U.top?["top"]:u.y>this._map.transform.height-F-U.bottom?["bottom"]:[],u.x<I/2+U.left?Y.push("left"):u.x>this._map.transform.width-I/2-U.right&&Y.push("right"),y=Y.length===0?"bottom":Y.join("-")}let j=u.add(b[y]);this.options.subpixelPositioning||(j=j.round()),O.setTransform(this._container,`${ti[y]} translate(${j.x}px,${j.y}px)`),Ku(this._container,y,"popup"),this._updateOpacity()},this._onClose=()=>{this.remove()},this.options=o.e(Object.create(Gi),C)}addTo(C){return this._map&&this.remove(),this._map=C,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")):this._map.on("move",this._update),this.fire(new o.l("open")),this}isOpen(){return!!this._map}getLngLat(){return this._lngLat}setLngLat(C){return this._lngLat=o.V.convert(C),this._pos=null,this._flatPos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.remove("maplibregl-track-pointer")),this}trackPointer(){return this._trackPointer=!0,this._pos=null,this._flatPos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("maplibregl-popup-track-pointer"),this._map._canvasContainer.classList.add("maplibregl-track-pointer")),this}getElement(){return this._container}setText(C){return this.setDOMContent(document.createTextNode(C))}setHTML(C){const a=document.createDocumentFragment(),u=document.createElement("body");let y;for(u.innerHTML=C;y=u.firstChild,y;)a.appendChild(y);return this.setDOMContent(a)}getMaxWidth(){var C;return(C=this._container)===null||C===void 0?void 0:C.style.maxWidth}setMaxWidth(C){return this.options.maxWidth=C,this._update(),this}setDOMContent(C){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=O.create("div","maplibregl-popup-content",this._container);return this._content.appendChild(C),this._createCloseButton(),this._update(),this._focusFirstElement(),this}addClassName(C){return this._container&&this._container.classList.add(C),this}removeClassName(C){return this._container&&this._container.classList.remove(C),this}setOffset(C){return this.options.offset=C,this._update(),this}toggleClassName(C){if(this._container)return this._container.classList.toggle(C)}setSubpixelPositioning(C){this.options.subpixelPositioning=C}setPadding(C){this.options.padding=C,this._update()}_createCloseButton(){this.options.closeButton&&(this._closeButton=O.create("button","maplibregl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const C=this._container.querySelector(Yu);C&&C.focus()}},d.RasterDEMTileSource=Br,d.RasterTileSource=xi,d.ScaleControl=class{constructor(C){this._onMove=()=>{ni(this._map,this._container,this.options)},this.setUnit=a=>{this.options.unit=a,ni(this._map,this._container,this.options)},this.options=Object.assign(Object.assign({},vc),C)}getDefaultPosition(){return"bottom-left"}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-scale",C.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container}onRemove(){O.remove(this._container),this._map.off("move",this._onMove),this._map=void 0}},d.ScrollZoomHandler=Wu,d.Style=Bs,d.TerrainControl=class{constructor(C){this._toggleTerrain=()=>{this._map.getTerrain()?this._map.setTerrain(null):this._map.setTerrain(this.options),this._updateTerrainIcon()},this._updateTerrainIcon=()=>{this._terrainButton.classList.remove("maplibregl-ctrl-terrain"),this._terrainButton.classList.remove("maplibregl-ctrl-terrain-enabled"),this._map.terrain?(this._terrainButton.classList.add("maplibregl-ctrl-terrain-enabled"),this._terrainButton.title=this._map._getUIString("TerrainControl.Disable")):(this._terrainButton.classList.add("maplibregl-ctrl-terrain"),this._terrainButton.title=this._map._getUIString("TerrainControl.Enable"))},this.options=C}onAdd(C){return this._map=C,this._container=O.create("div","maplibregl-ctrl maplibregl-ctrl-group"),this._terrainButton=O.create("button","maplibregl-ctrl-terrain",this._container),O.create("span","maplibregl-ctrl-icon",this._terrainButton).setAttribute("aria-hidden","true"),this._terrainButton.type="button",this._terrainButton.addEventListener("click",this._toggleTerrain),this._updateTerrainIcon(),this._map.on("terrain",this._updateTerrainIcon),this._container}onRemove(){O.remove(this._container),this._map.off("terrain",this._updateTerrainIcon),this._map=void 0}},d.TwoFingersTouchPitchHandler=Vh,d.TwoFingersTouchRotateHandler=Zp,d.TwoFingersTouchZoomHandler=ou,d.TwoFingersTouchZoomRotateHandler=Cl,d.VectorTileSource=Fr,d.VideoSource=Sa,d.addSourceType=(C,a)=>o._(void 0,void 0,void 0,(function*(){if(Ya(C))throw new Error(`A source type called "${C}" already exists.`);((u,y)=>{Pa[u]=y})(C,a)})),d.clearPrewarmedResources=function(){const C=Tt;C&&(C.isPreloaded()&&C.numActive()===1?(C.release(Ct),Tt=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},d.createTileMesh=ml,d.getMaxParallelImageRequests=function(){return o.c.MAX_PARALLEL_IMAGE_REQUESTS},d.getRTLTextPluginStatus=function(){return ue().getRTLTextPluginStatus()},d.getVersion=function(){return Ju},d.getWorkerCount=function(){return Mt.workerCount},d.getWorkerUrl=function(){return o.c.WORKER_URL},d.importScriptInWorkers=function(C){return Ut().broadcast("IS",C)},d.isTimeFrozen=function(){return q.isFrozen()},d.now=$,d.prewarm=function(){rt().acquire(Ct)},d.restoreNow=function(){q.restoreNow()},d.setMaxParallelImageRequests=function(C){o.c.MAX_PARALLEL_IMAGE_REQUESTS=C},d.setNow=function(C){q.setNow(C)},d.setRTLTextPlugin=function(C,a){return ue().setRTLTextPlugin(C,a)},d.setWorkerCount=function(C){Mt.workerCount=C},d.setWorkerUrl=function(C){o.c.WORKER_URL=C}}));var h=n;return h}))})(ab)),ab.exports}var KY=ZY();const sS=Kr(KY),OD={kupang:{center:[123.53838,-10.20073],zoom:13},indonesia:{center:[118,-2.5],zoom:5}};function XY({is3D:e,markers:t=[],onMarkerClick:n,mapView:r="kupang"}){const s=W.useRef(null),h=W.useRef(null),d=W.useRef([]),o=W.useRef(r);return W.useEffect(()=>{if(!s.current||h.current)return;const _=OD[r];return h.current=new sS.Map({container:s.current,style:"https://basemaps.cartocdn.com/gl/dark-matter-gl-style/style.json",center:_.center,zoom:_.zoom,pitch:e?55:0,bearing:e?-15:0,maxPitch:70}),h.current.addControl(new sS.NavigationControl({showCompass:!0,showZoom:!0}),"bottom-right"),h.current.on("load",()=>{if(!h.current)return;const w=h.current.getStyle();if(w&&w.layers){const P=w.layers.find(N=>N.type==="symbol"&&N.layout&&N.layout["text-field"])?.id;h.current.getSource("openmaptiles");try{h.current.addLayer({id:"3d-buildings",source:"openmaptiles","source-layer":"building",type:"fill-extrusion",minzoom:14,paint:{"fill-extrusion-color":"#0d1b2a","fill-extrusion-height":["interpolate",["linear"],["zoom"],14,0,16,["get","render_height"]],"fill-extrusion-base":["interpolate",["linear"],["zoom"],14,0,16,["get","render_min_height"]],"fill-extrusion-opacity":.7}},P)}catch(N){console.warn("3D buildings layer could not be added:",N)}}}),()=>{h.current&&(h.current.remove(),h.current=null)}},[]),W.useEffect(()=>{h.current&&h.current.easeTo({pitch:e?55:0,bearing:e?-15:0,duration:1500})},[e]),W.useEffect(()=>{if(h.current&&r!==o.current){o.current=r;const _=OD[r];h.current.flyTo({center:_.center,zoom:_.zoom,duration:2e3})}},[r]),W.useEffect(()=>{h.current&&(d.current.forEach(_=>_.remove()),d.current=[],t.forEach(_=>{const w=document.createElement("div");w.className="digital-twin-marker group",w.style.cursor="pointer";let A="",P=28;const N=_.color;if(_.type==="drone")P=40,A=`
          <div style="position:relative;width:${P}px;height:${P}px;display:flex;align-items:center;justify-content:center;">
            <div class="twin-marker-pulse" style="position:absolute;width:${P}px;height:${P}px;border-radius:50%;background:rgba(34,197,94,0.2);"></div>
            <svg width="32" height="32" viewBox="0 0 24 24" fill="none" style="position:relative;z-index:10;">
              <path d="M6 6l12 12M18 6L6 18" stroke="#0f172a" stroke-width="3" stroke-linecap="round"/>
              <circle cx="5" cy="5" r="3" fill="#0f172a" stroke="#22c55e" stroke-width="1.2"/>
              <circle cx="19" cy="5" r="3" fill="#0f172a" stroke="#22c55e" stroke-width="1.2"/>
              <circle cx="5" cy="19" r="3" fill="#0f172a" stroke="#22c55e" stroke-width="1.2"/>
              <circle cx="19" cy="19" r="3" fill="#0f172a" stroke="#22c55e" stroke-width="1.2"/>
              <rect x="9" y="9" width="6" height="6" rx="1.5" fill="#0f172a" stroke="#22c55e" stroke-width="1.5"/>
              <circle cx="12" cy="12" r="1.2" fill="#22c55e"/>
            </svg>
          </div>
        `;else if(_.type==="ais"){const q=_.heading||0;P=24,A=`
          <div style="position:relative;width:${P}px;height:${P}px;display:flex;align-items:center;justify-content:center;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="transform:rotate(${q}deg);filter:drop-shadow(0 1px 3px rgba(0,0,0,0.5));">
              <path d="M12 2L4 22L12 18L20 22L12 2Z" fill="${N}" stroke="rgba(255,255,255,0.6)" stroke-width="1" stroke-linejoin="round"/>
            </svg>
          </div>
        `}else if(_.type==="adsb"){const q=_.heading||0;P=28,A=`
          <div style="position:relative;width:${P}px;height:${P}px;display:flex;align-items:center;justify-content:center;">
            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" style="transform:rotate(${q}deg);filter:drop-shadow(0 1px 3px rgba(0,0,0,0.5));">
              <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z" fill="#facc15" stroke="#1e293b" stroke-width="0.8" stroke-linejoin="round"/>
            </svg>
          </div>
        `}else _.type==="anomaly"?(P=24,A=`
          <div style="position:relative;width:${P}px;height:${P}px;display:flex;align-items:center;justify-content:center;">
            <div class="twin-marker-pulse" style="position:absolute;width:${P}px;height:${P}px;border-radius:50%;background:rgba(239,68,68,0.25);"></div>
            <div style="width:20px;height:20px;background:#ef4444;border:2px solid rgba(255,255,255,0.8);border-radius:50%;display:flex;align-items:center;justify-content:center;color:white;font-weight:bold;font-size:12px;position:relative;z-index:10;">!</div>
          </div>
        `):_.type==="weather"?(P=36,A=`
          <div style="position:relative;width:${P}px;height:${P}px;display:flex;flex-direction:column;align-items:center;justify-content:center;">
            <div style="background:rgba(15,23,42,0.8);border:1px solid rgba(59,130,246,0.4);border-radius:50%;padding:6px;backdrop-filter:blur(4px);">
              <svg width="18" height="18" viewBox="0 0 24 24" fill="none">
                <path d="M20 16.2A4.5 4.5 0 0 0 17.5 8a7 7 0 1 0-11.23 7.6" stroke="#3b82f6" stroke-width="2" stroke-linecap="round"/>
              </svg>
            </div>
            ${_.meta?.temp?`<div style="position:absolute;bottom:-14px;background:rgba(15,23,42,0.85);color:#93c5fd;padding:1px 6px;border-radius:8px;font-size:9px;font-weight:bold;white-space:nowrap;border:1px solid rgba(59,130,246,0.3);">${_.meta.temp}C</div>`:""}
          </div>
        `):A=`
          <div style="width:12px;height:12px;background:${N};border:2px solid rgba(255,255,255,0.6);border-radius:50%;box-shadow:0 0 6px ${N};"></div>
        `;w.innerHTML=`
        <div style="display:flex;flex-direction:column;align-items:center;">
          ${A}
          <div class="twin-marker-label" style="margin-top:2px;background:rgba(0,0,0,0.75);color:white;padding:1px 6px;border-radius:4px;font-size:9px;font-weight:600;white-space:nowrap;opacity:0;transition:opacity 0.2s;pointer-events:none;backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,0.1);">
            ${_.label}
          </div>
        </div>
      `,w.addEventListener("mouseenter",()=>{const q=w.querySelector(".twin-marker-label");q&&(q.style.opacity="1")}),w.addEventListener("mouseleave",()=>{const q=w.querySelector(".twin-marker-label");q&&(q.style.opacity="0")}),n&&w.addEventListener("click",()=>n(_.id));const z=new sS.Marker({element:w,anchor:"center"}).setLngLat([_.position[1],_.position[0]]).addTo(h.current);d.current.push(z)}))},[t,n]),f.jsx("div",{ref:s,style:{width:"100%",height:"100%"}})}const GC="/assets/vessel_detection-CGmvua1T.png",R6="/assets/hull_number-Bm8xQezC.png",WC="/assets/vessel_attribute-82Ac1rdy.png",YY=[{id:1,type:"Vessel Detection",mission:"PSDKP Kupang - Morning Patrol",detected:23,confidence:96,timestamp:"2025-01-20 14:23",drone:"Pyrhos X V1",location:"Kupang Waters",image:GC},{id:2,type:"Hull Number Recognition",mission:"Harbor Gate Inspection - Kupang",detected:18,confidence:92,timestamp:"2025-01-18 14:24",drone:"AR-2 Aerial",location:"Kupang Port",image:R6},{id:3,type:"Vessel Attributes",mission:"Bolok Harbor Security",detected:47,confidence:89,timestamp:"2025-01-19 10:15",drone:"AR-2 Aerial",location:"Bolok, Kupang",image:WC},{id:4,type:"Trash Detection",mission:"Tenau Coastal Monitoring",detected:312,confidence:87,timestamp:"2025-01-19 08:21",drone:"Pyrhos X V1",location:"Tenau Waters",image:GC},{id:5,type:"Event Detection",mission:"NTT Maritime Border Security",detected:"Unauthorized Entry",confidence:94,timestamp:"2025-01-20 16:20",drone:"Pyrhos X V1",location:"Border Zone NTT",image:WC}];function RD(){const[e,t]=W.useState(null),[n,r]=W.useState(new Date),[s,h]=W.useState("kupang"),[d,o]=W.useState(!0),[_,w]=W.useState(!0),[A,P]=W.useState(!1),[N,z]=W.useState(!1),[q,$]=W.useState(!0),[O,X]=W.useState(!1),[K,te]=W.useState(!1),[ne,H]=W.useState(!1),ae=_e=>{const fe=_e.toLowerCase();return fe.includes("cargo")||fe.includes("container")||fe.includes("bulk")?"#22c55e":fe.includes("tanker")?"#ef4444":fe.includes("passenger")||fe.includes("ferry")?"#3b82f6":fe.includes("fishing")?"#f97316":fe.includes("tug")||fe.includes("pilot")?"#06b6d4":fe.includes("yacht")||fe.includes("sailing")?"#d946ef":fe.includes("military")||fe.includes("law")?"#111827":"#9ca3af"},de=W.useMemo(()=>{const _e=[];return aS.forEach(fe=>{_e.push({id:fe.id,position:[fe.position[0],fe.position[1]],type:"drone",label:fe.droneName,color:fe.color||"#22c55e",meta:{battery:fe.telemetry.battery,altitude:fe.telemetry.altitude,mission:fe.mission,droneType:fe.droneType}})}),oS.filter(fe=>fe.location).forEach(fe=>{_e.push({id:fe.id,position:[fe.location.lat,fe.location.lng],type:"anomaly",label:fe.type,color:"#ef4444"})}),d&&sh.forEach(fe=>{_e.push({id:fe.id,position:fe.position,type:"ais",label:fe.name,color:ae(fe.type),heading:fe.heading||fe.course||0,meta:{type:fe.type,speed:fe.speed,length:fe.length||"N/A"}})}),_&&hy.forEach(fe=>{_e.push({id:fe.id,position:fe.position,type:"adsb",label:fe.callsign||fe.name,color:"#facc15",heading:fe.heading||0,meta:{altitude:fe.altitude,speed:fe.speed}})}),N&&ND.forEach(fe=>{_e.push({id:fe.id,position:fe.position,type:"weather",label:fe.description,color:"#3b82f6",meta:{temp:fe.temp,value:fe.value,unit:fe.unit}})}),_e},[d,_,N]);W.useEffect(()=>{const _e=setInterval(()=>r(new Date),1e3);return()=>clearInterval(_e)},[]);const ye=_e=>_e.toLocaleTimeString("en-GB",{hour:"2-digit",minute:"2-digit",second:"2-digit"}),Ae=_e=>_e.toLocaleDateString("en-US",{weekday:"short",month:"short",day:"numeric",year:"numeric"});return f.jsxs("div",{className:"relative w-full h-full overflow-hidden bg-[#0a0e1a]",children:[f.jsx("div",{className:"absolute inset-0 z-0",children:f.jsx(XY,{is3D:q,markers:de,mapView:s,onMarkerClick:_e=>{const fe=oS.find(Ee=>Ee.id===_e);fe&&t(fe)}})}),f.jsx("div",{className:"absolute top-4 left-4 right-4 z-30",children:f.jsxs("div",{className:"dt-glass px-6 py-3 flex items-center justify-between rounded-2xl",children:[f.jsxs("div",{className:"flex items-center gap-6",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-8 h-8 rounded-lg bg-emerald-500/10 border border-emerald-500/20 flex items-center justify-center",children:f.jsx(sf,{className:"w-4 h-4 text-emerald-400"})}),f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("span",{className:"text-xl font-black tracking-tight text-white",children:ye(n)}),f.jsx("span",{className:"text-[10px] font-bold text-emerald-400",children:"WIB"})]}),f.jsx("span",{className:"text-[10px] text-white/40 font-medium",children:Ae(n)})]})]}),f.jsx("div",{className:"w-px h-8 bg-white/10"}),f.jsxs("div",{className:"flex items-center gap-5",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(cx,{className:"w-4 h-4 text-blue-400"}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-bold text-white",children:"28C"}),f.jsx("span",{className:"text-[10px] text-white/40 ml-1",children:"Partly Cloudy"})]})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(lM,{className:"w-4 h-4 text-cyan-400"}),f.jsxs("div",{children:[f.jsx("span",{className:"text-sm font-bold text-white",children:"12.5 kn"}),f.jsx("span",{className:"text-[10px] text-white/40 ml-1",children:"Wave 1.2m"})]})]})]})]}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-emerald-500 animate-pulse"}),f.jsx("span",{className:"text-xs font-bold text-white",children:"SYSTEM ONLINE"})]}),f.jsx("div",{className:"w-px h-6 bg-white/10"}),f.jsx("span",{className:"text-[10px] font-bold text-white/30 uppercase tracking-widest",children:"Digital Twin v2.0"})]})]})}),f.jsxs("div",{className:`absolute left-4 z-20 flex flex-col gap-3 transition-all duration-300 ${K?"top-[80px] bottom-auto":"top-[80px] bottom-16"}`,style:{width:"320px"},children:[f.jsxs("button",{onClick:()=>te(!K),className:"dt-glass-btn self-start px-3 py-1.5 rounded-lg flex items-center gap-2 text-[10px] font-bold text-white/60 hover:text-white uppercase tracking-widest",children:[K?f.jsx(gb,{className:"w-3 h-3"}):f.jsx(OC,{className:"w-3 h-3"}),K?"Expand":"Collapse"]}),!K&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-[#21A68D]",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Missions"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("span",{className:"text-xl font-black text-white",children:xu.totalMissions}),f.jsx(uD,{className:"w-3.5 h-3.5 text-[#21A68D]"})]})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-[#D4E268]",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Detections"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("span",{className:"text-xl font-black text-[#D4E268]",children:xu.totalDetections}),f.jsx(wu,{className:"w-3.5 h-3.5 text-[#D4E268]"})]})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-red-500",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Anomalies"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("span",{className:"text-xl font-black text-red-400",children:xu.totalAnomalies}),f.jsx(_b,{className:"w-3.5 h-3.5 text-red-400"})]})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-blue-500",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Weather"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsxs("span",{className:"text-xl font-black text-white",children:[ND?.[0]?.temp||28,"C"]}),f.jsx(cx,{className:"w-3.5 h-3.5 text-blue-400"})]})]})]}),f.jsxs("div",{className:"dt-glass rounded-xl p-4 flex-none",children:[f.jsxs("h3",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em] mb-3 flex items-center gap-2",children:[f.jsx(yd,{className:"w-3 h-3 text-emerald-400 animate-pulse"}),"Active Operations (",aS.length,")"]}),f.jsx("div",{className:"space-y-2",children:aS.map(_e=>f.jsxs("div",{className:"p-2.5 rounded-lg bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] transition-all",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-1.5 h-1.5 bg-emerald-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-[11px] font-bold text-white",children:_e.droneName})]}),f.jsx(Nn,{className:"text-[8px] bg-[#21A68D]/10 text-[#21A68D] border-none px-1.5 py-0",children:_e.droneType})]}),f.jsx("p",{className:"text-[9px] text-white/40 mb-1.5 truncate",children:_e.mission}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-[9px]",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-white/30",children:"Battery"}),f.jsxs("span",{className:"text-emerald-400 font-bold",children:[_e.telemetry.battery,"%"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-white/30",children:"Alt"}),f.jsxs("span",{className:"text-white font-bold",children:[_e.telemetry.altitude,"m"]})]})]}),f.jsx("div",{className:"mt-1.5 w-full bg-white/5 h-0.5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-emerald-500 transition-all",style:{width:`${_e.telemetry.battery}%`}})})]},_e.id))})]}),f.jsxs("div",{className:"dt-glass rounded-xl p-4 flex-1 overflow-hidden flex flex-col min-h-0",children:[f.jsxs("h3",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em] mb-3 flex items-center gap-2",children:[f.jsx(_b,{className:"w-3 h-3 text-red-400"}),"System Alerts"]}),f.jsx("div",{className:"space-y-2 overflow-y-auto custom-scrollbar flex-1 pr-1",children:oS.slice(0,8).map(_e=>f.jsxs("div",{className:"p-2 rounded-lg bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] transition-all cursor-pointer",onClick:()=>t(_e),children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsx("span",{className:"text-[10px] font-bold text-white",children:_e.type}),f.jsx("span",{className:"text-[8px] text-white/30",children:_e.timestamp?.split(" ")[1]||"NOW"})]}),f.jsx("p",{className:"text-[9px] text-white/40 truncate",children:_e.missionId})]},_e.id))})]})]})]}),f.jsxs("div",{className:`absolute right-4 z-20 flex flex-col gap-3 transition-all duration-300 ${ne?"top-[80px] bottom-auto":"top-[80px] bottom-16"}`,style:{width:"320px"},children:[f.jsxs("button",{onClick:()=>H(!ne),className:"dt-glass-btn self-end px-3 py-1.5 rounded-lg flex items-center gap-2 text-[10px] font-bold text-white/60 hover:text-white uppercase tracking-widest",children:[ne?f.jsx(gb,{className:"w-3 h-3"}):f.jsx(OC,{className:"w-3 h-3"}),ne?"Expand":"Collapse"]}),!ne&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-blue-500",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"AIS Vessels"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("span",{className:"text-xl font-black text-white",children:sh.length}),f.jsx(Au,{className:"w-3.5 h-3.5 text-blue-400"})]})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-yellow-500",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Aircraft"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("span",{className:"text-xl font-black text-white",children:hy.length}),f.jsx(yd,{className:"w-3.5 h-3.5 text-yellow-400"})]})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-[#21A68D]",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Fleet"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsx("span",{className:"text-xl font-black text-white",children:xu.totalDrones}),f.jsx(_u,{className:"w-3.5 h-3.5 text-[#21A68D]"})]})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl border-l-2 border-l-purple-500",children:[f.jsx("p",{className:"text-[9px] font-bold text-white/40 uppercase tracking-widest mb-1",children:"Success"}),f.jsxs("div",{className:"flex items-end justify-between",children:[f.jsxs("span",{className:"text-xl font-black text-white",children:[xu.successRate,"%"]}),f.jsx(xb,{className:"w-3.5 h-3.5 text-purple-400"})]})]})]}),f.jsxs("div",{className:"dt-glass rounded-xl p-4 flex-1 overflow-hidden flex flex-col min-h-0",children:[f.jsxs("h3",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em] mb-3 flex items-center gap-2",children:[f.jsx(Au,{className:"w-3 h-3 text-blue-400"}),"Vessel Traffic (",sh.length,")"]}),f.jsx("div",{className:"space-y-1.5 overflow-y-auto custom-scrollbar flex-1 pr-1",children:sh.map(_e=>f.jsxs("div",{className:"p-2 rounded-lg bg-white/[0.03] border border-white/[0.06] hover:bg-white/[0.06] transition-all",children:[f.jsxs("div",{className:"flex items-center justify-between mb-0.5",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full",style:{background:ae(_e.type)}}),f.jsx("span",{className:"text-[10px] font-bold text-white",children:_e.name})]}),f.jsxs("span",{className:"text-[9px] font-bold text-white/40",children:[_e.speed," kn"]})]}),f.jsxs("div",{className:"flex items-center justify-between text-[9px]",children:[f.jsx("span",{className:"text-white/30",children:_e.type}),f.jsxs(Nn,{className:"text-[7px] bg-white/5 text-white/50 border-none px-1.5 py-0",children:[_e.length||"","m"]})]})]},_e.id))})]}),f.jsxs("div",{className:"dt-glass rounded-xl p-4 flex-none",children:[f.jsxs("h3",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em] mb-3 flex items-center gap-2",children:[f.jsx(wu,{className:"w-3 h-3 text-[#D4E268]"}),"AI Visual Intel"]}),f.jsx("div",{className:"grid grid-cols-2 gap-2",children:YY.slice(0,4).map(_e=>f.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-black/40 border border-white/5 cursor-pointer hover:border-[#D4E268]/40 transition-all relative group",onClick:()=>t(_e),children:[f.jsx("img",{src:_e.image,className:"w-full h-full object-cover opacity-50 group-hover:opacity-80 transition-opacity",alt:""}),f.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 to-transparent flex flex-col justify-end p-1.5",children:[f.jsx("span",{className:"text-[8px] font-bold text-white/80 truncate",children:_e.type}),f.jsxs("span",{className:"text-[7px] text-white/40",children:[_e.confidence,"%"]})]})]},_e.id))})]})]})]}),f.jsx("div",{className:"absolute bottom-4 left-1/2 -translate-x-1/2 z-30",children:f.jsxs("div",{className:"dt-glass px-3 py-2 rounded-2xl flex items-center gap-2",children:[f.jsxs("button",{onClick:()=>h("kupang"),className:`dt-glass-btn px-3 h-9 rounded-xl flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest transition-all ${s==="kupang"?"text-[#21A68D] border-[#21A68D]/30 bg-[#21A68D]/10":"text-white/40"}`,children:[f.jsx(aM,{className:"w-3.5 h-3.5"}),"Kupang"]}),f.jsxs("button",{onClick:()=>h("indonesia"),className:`dt-glass-btn px-3 h-9 rounded-xl flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest transition-all ${s==="indonesia"?"text-[#21A68D] border-[#21A68D]/30 bg-[#21A68D]/10":"text-white/40"}`,children:[f.jsx(kB,{className:"w-3.5 h-3.5"}),"Indonesia"]}),f.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),f.jsx("button",{className:`dt-glass-btn w-9 h-9 rounded-xl flex items-center justify-center transition-all ${d?"text-blue-400 border-blue-400/30 bg-blue-400/10":"text-white/30"}`,onClick:()=>o(!d),title:"AIS Vessels",children:f.jsx(Au,{className:"w-4 h-4"})}),f.jsx("button",{className:`dt-glass-btn w-9 h-9 rounded-xl flex items-center justify-center transition-all ${_?"text-yellow-400 border-yellow-400/30 bg-yellow-400/10":"text-white/30"}`,onClick:()=>w(!_),title:"ADSB Aircraft",children:f.jsx(yd,{className:"w-4 h-4"})}),f.jsx("button",{className:`dt-glass-btn w-9 h-9 rounded-xl flex items-center justify-center transition-all ${N?"text-sky-400 border-sky-400/30 bg-sky-400/10":"text-white/30"}`,onClick:()=>z(!N),title:"Weather",children:f.jsx(cx,{className:"w-4 h-4"})}),f.jsx("div",{className:"w-px h-6 bg-white/10 mx-1"}),f.jsxs("button",{className:`dt-glass-btn px-3 h-9 rounded-xl flex items-center gap-2 text-[10px] font-bold uppercase tracking-widest transition-all ${q?"text-cyan-400 border-cyan-400/30 bg-cyan-400/10":"text-white/30"}`,onClick:()=>$(!q),children:[f.jsx(xb,{className:`w-3.5 h-3.5 transition-transform duration-500 ${q?"rotate-45":""}`}),"3D"]})]})}),!K&&f.jsx("div",{className:"absolute bottom-16 left-[340px] z-20",style:{width:"calc(100% - 700px)",maxWidth:"600px"},children:f.jsxs("div",{className:"dt-glass rounded-xl p-3",children:[f.jsxs("h3",{className:"text-[10px] font-black text-white uppercase tracking-[0.2em] mb-2 flex items-center gap-2",children:[f.jsx(uD,{className:"w-3 h-3 text-[#21A68D]"}),"Recent Missions"]}),f.jsx("div",{className:"flex gap-2 overflow-x-auto custom-scrollbar pb-1",children:rl.slice(0,4).map(_e=>{const fe=_e.status==="completed"?"#22c55e":_e.status==="active"?"#D4E268":"#ef4444";return f.jsxs("div",{className:"flex-none w-[200px] p-2.5 rounded-lg bg-white/[0.03] border border-white/[0.06]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsx("span",{className:"text-[10px] font-bold text-white truncate flex-1",children:_e.name}),f.jsx("div",{className:"w-1.5 h-1.5 rounded-full flex-none ml-2",style:{background:fe}})]}),f.jsxs("p",{className:"text-[8px] text-white/30 mb-1.5",children:[_e.droneType,"  ",_e.location]}),f.jsxs("div",{className:"grid grid-cols-3 gap-1 text-[8px]",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-white/30",children:"Flights"}),f.jsx("p",{className:"text-white font-bold",children:_e.totalFlights})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-white/30",children:"Area"}),f.jsxs("p",{className:"text-white font-bold",children:[_e.coverageArea,"km"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-white/30",children:"Detect"}),f.jsx("p",{className:"text-[#21A68D] font-bold",children:_e.totalDetections})]})]}),f.jsx("div",{className:"mt-1.5 w-full bg-white/5 h-0.5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-[#21A68D] transition-all",style:{width:`${_e.completedFlights/_e.totalFlights*100}%`}})})]},_e.id)})})]})}),f.jsx(ff,{open:!!e,onOpenChange:()=>t(null),children:f.jsx(pf,{className:"max-w-2xl bg-[#0a0e1a]/95 border-white/10 backdrop-blur-xl text-white",children:e&&f.jsxs(f.Fragment,{children:[f.jsxs(Ep,{children:[f.jsx(mf,{className:"text-white",children:e.type}),f.jsx(gf,{className:"text-white/60",children:e.mission||e.missionId})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("div",{className:"relative aspect-video bg-black rounded-xl overflow-hidden border border-white/5",children:f.jsx(XK,{src:e.captureImage||e.image,alt:e.type,className:"w-full h-full object-cover"})}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[f.jsxs("div",{className:"dt-glass p-3 rounded-xl",children:[f.jsx("p",{className:"text-white/40 mb-1",children:"Detected Objects"}),f.jsx("p",{className:"text-xl font-bold text-white",children:e.detected||e.vesselName||e.hullNumber||"N/A"})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl",children:[f.jsx("p",{className:"text-white/40 mb-1",children:"Confidence"}),f.jsxs("p",{className:"text-xl font-bold text-emerald-400",children:[e.confidence,"%"]})]}),e.location&&f.jsxs("div",{className:"dt-glass p-3 rounded-xl",children:[f.jsx("p",{className:"text-white/40 mb-1",children:"Location"}),f.jsx("p",{className:"text-sm text-white",children:e.location})]}),e.timestamp&&f.jsxs("div",{className:"dt-glass p-3 rounded-xl",children:[f.jsx("p",{className:"text-white/40 mb-1",children:"Timestamp"}),f.jsx("p",{className:"text-sm text-white",children:e.timestamp})]}),e.drone&&f.jsxs("div",{className:"dt-glass p-3 rounded-xl",children:[f.jsx("p",{className:"text-white/40 mb-1",children:"Drone"}),f.jsx("p",{className:"text-sm text-white",children:e.drone})]}),f.jsxs("div",{className:"dt-glass p-3 rounded-xl",children:[f.jsx("p",{className:"text-white/40 mb-1",children:"Type"}),f.jsx(Nn,{className:"bg-[#21A68D]/10 text-[#21A68D] border-none",children:e.type})]})]})]})]})})}),f.jsx("style",{children:`
        .dt-glass {
          background: rgba(10, 14, 26, 0.65);
          backdrop-filter: blur(20px);
          -webkit-backdrop-filter: blur(20px);
          border: 1px solid rgba(255, 255, 255, 0.08);
          box-shadow: 0 8px 32px rgba(0, 0, 0, 0.4);
        }
        .dt-glass-btn {
          background: rgba(255, 255, 255, 0.04);
          border: 1px solid rgba(255, 255, 255, 0.08);
          transition: all 0.2s;
        }
        .dt-glass-btn:hover {
          background: rgba(255, 255, 255, 0.08);
          border-color: rgba(255, 255, 255, 0.15);
        }
        .twin-marker-pulse {
          animation: twin-pulse 2s ease-out infinite;
        }
        .twin-marker-label {
          text-shadow: 0 1px 2px rgba(0,0,0,0.8);
        }
        @keyframes twin-pulse {
          0% { transform: scale(0.7); opacity: 0.8; }
          100% { transform: scale(1.6); opacity: 0; }
        }
      `})]})}function nn({className:e,...t}){return f.jsx("div",{"data-slot":"card",className:or("bg-card text-card-foreground flex flex-col gap-6 rounded-xl border",e),...t})}function hh({className:e,...t}){return f.jsx("div",{"data-slot":"card-content",className:or("px-6 [&:last-child]:pb-6",e),...t})}const JY=zB("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-all disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 shrink-0 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-white hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40 dark:bg-destructive/60",outline:"border bg-background text-foreground hover:bg-accent hover:text-accent-foreground dark:bg-input/30 dark:border-input dark:hover:bg-input/50",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground dark:hover:bg-accent/50",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9 rounded-md"}},defaultVariants:{variant:"default",size:"default"}}),en=W.forwardRef(({className:e,variant:t,size:n,asChild:r=!1,...s},h)=>{const d=r?RB:"button";return f.jsx(d,{ref:h,"data-slot":"button",className:or(JY({variant:t,size:n,className:e})),...s})});en.displayName="Button";function xa({className:e,type:t,...n}){return f.jsx("input",{type:t,"data-slot":"input",className:or("file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground dark:bg-input/30 border-input flex h-9 w-full min-w-0 rounded-md border px-3 py-1 text-base bg-input-background transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",e),...n})}var QY=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],eJ=QY.reduce((e,t)=>{const n=cM(`Primitive.${t}`),r=W.forwardRef((s,h)=>{const{asChild:d,...o}=s,_=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(_,{...o,ref:h})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),tJ="Label",L6=W.forwardRef((e,t)=>f.jsx(eJ.label,{...e,ref:t,onMouseDown:n=>{n.target.closest("button, input, select, textarea")||(e.onMouseDown?.(n),!n.defaultPrevented&&n.detail>1&&n.preventDefault())}}));L6.displayName=tJ;var nJ=L6;function mr({className:e,...t}){return f.jsx(nJ,{"data-slot":"label",className:or("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",e),...t})}function m0(e){const t=W.useRef({value:e,previous:e});return W.useMemo(()=>(t.current.value!==e&&(t.current.previous=t.current.value,t.current.value=e),t.current.previous),[e])}function g0(e){const[t,n]=W.useState(void 0);return js(()=>{if(e){n({width:e.offsetWidth,height:e.offsetHeight});const r=new ResizeObserver(s=>{if(!Array.isArray(s)||!s.length)return;const h=s[0];let d,o;if("borderBoxSize"in h){const _=h.borderBoxSize,w=Array.isArray(_)?_[0]:_;d=w.inlineSize,o=w.blockSize}else d=e.offsetWidth,o=e.offsetHeight;n({width:d,height:o})});return r.observe(e,{box:"border-box"}),()=>r.unobserve(e)}else n(void 0)},[e]),t}var X1="Checkbox",[rJ]=Wl(X1),[iJ,yM]=rJ(X1);function aJ(e){const{__scopeCheckbox:t,checked:n,children:r,defaultChecked:s,disabled:h,form:d,name:o,onCheckedChange:_,required:w,value:A="on",internal_do_not_use_render:P}=e,[N,z]=bd({prop:n,defaultProp:s??!1,onChange:_,caller:X1}),[q,$]=W.useState(null),[O,X]=W.useState(null),K=W.useRef(!1),te=q?!!d||!!q.closest("form"):!0,ne={checked:N,disabled:h,setChecked:z,control:q,setControl:$,name:o,form:d,value:A,hasConsumerStoppedPropagationRef:K,required:w,defaultChecked:Ap(s)?!1:s,isFormControl:te,bubbleInput:O,setBubbleInput:X};return f.jsx(iJ,{scope:t,...ne,children:oJ(P)?P(ne):r})}var z6="CheckboxTrigger",F6=W.forwardRef(({__scopeCheckbox:e,onKeyDown:t,onClick:n,...r},s)=>{const{control:h,value:d,disabled:o,checked:_,required:w,setControl:A,setChecked:P,hasConsumerStoppedPropagationRef:N,isFormControl:z,bubbleInput:q}=yM(z6,e),$=gr(s,A),O=W.useRef(_);return W.useEffect(()=>{const X=h?.form;if(X){const K=()=>P(O.current);return X.addEventListener("reset",K),()=>X.removeEventListener("reset",K)}},[h,P]),f.jsx(qn.button,{type:"button",role:"checkbox","aria-checked":Ap(_)?"mixed":_,"aria-required":w,"data-state":G6(_),"data-disabled":o?"":void 0,disabled:o,value:d,...r,ref:$,onKeyDown:dn(t,X=>{X.key==="Enter"&&X.preventDefault()}),onClick:dn(n,X=>{P(K=>Ap(K)?!0:!K),q&&z&&(N.current=X.isPropagationStopped(),N.current||X.stopPropagation())})})});F6.displayName=z6;var B6=W.forwardRef((e,t)=>{const{__scopeCheckbox:n,name:r,checked:s,defaultChecked:h,required:d,disabled:o,value:_,onCheckedChange:w,form:A,...P}=e;return f.jsx(aJ,{__scopeCheckbox:n,checked:s,defaultChecked:h,disabled:o,required:d,onCheckedChange:w,name:r,form:A,value:_,internal_do_not_use_render:({isFormControl:N})=>f.jsxs(f.Fragment,{children:[f.jsx(F6,{...P,ref:t,__scopeCheckbox:n}),N&&f.jsx(q6,{__scopeCheckbox:n})]})})});B6.displayName=X1;var $6="CheckboxIndicator",V6=W.forwardRef((e,t)=>{const{__scopeCheckbox:n,forceMount:r,...s}=e,h=yM($6,n);return f.jsx(Bc,{present:r||Ap(h.checked)||h.checked===!0,children:f.jsx(qn.span,{"data-state":G6(h.checked),"data-disabled":h.disabled?"":void 0,...s,ref:t,style:{pointerEvents:"none",...e.style}})})});V6.displayName=$6;var U6="CheckboxBubbleInput",q6=W.forwardRef(({__scopeCheckbox:e,...t},n)=>{const{control:r,hasConsumerStoppedPropagationRef:s,checked:h,defaultChecked:d,required:o,disabled:_,name:w,value:A,form:P,bubbleInput:N,setBubbleInput:z}=yM(U6,e),q=gr(n,z),$=m0(h),O=g0(r);W.useEffect(()=>{const K=N;if(!K)return;const te=window.HTMLInputElement.prototype,H=Object.getOwnPropertyDescriptor(te,"checked").set,ae=!s.current;if($!==h&&H){const de=new Event("click",{bubbles:ae});K.indeterminate=Ap(h),H.call(K,Ap(h)?!1:h),K.dispatchEvent(de)}},[N,$,h,s]);const X=W.useRef(Ap(h)?!1:h);return f.jsx(qn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:d??X.current,required:o,disabled:_,name:w,value:A,form:P,...t,tabIndex:-1,ref:q,style:{...t.style,...O,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});q6.displayName=U6;function oJ(e){return typeof e=="function"}function Ap(e){return e==="indeterminate"}function G6(e){return Ap(e)?"indeterminate":e?"checked":"unchecked"}function I_({className:e,...t}){return f.jsx(B6,{"data-slot":"checkbox",className:or("peer border bg-input-background dark:bg-input/30 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground dark:data-[state=checked]:bg-primary data-[state=checked]:border-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive size-4 shrink-0 rounded-[4px] border shadow-xs transition-shadow outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(V6,{"data-slot":"checkbox-indicator",className:"flex items-center justify-center text-current transition-none",children:f.jsx(d0,{className:"size-3.5"})})})}function sJ({className:e,...t}){return f.jsx("textarea",{"data-slot":"textarea",className:or("resize-none border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-input-background px-3 py-2 text-base transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),...t})}function LD(e){const t=lJ(e),n=W.forwardRef((r,s)=>{const{children:h,...d}=r,o=W.Children.toArray(h),_=o.find(uJ);if(_){const w=_.props.children,A=o.map(P=>P===_?W.Children.count(w)>1?W.Children.only(null):W.isValidElement(w)?w.props.children:null:P);return f.jsx(t,{...d,ref:s,children:W.isValidElement(w)?W.cloneElement(w,void 0,A):null})}return f.jsx(t,{...d,ref:s,children:h})});return n.displayName=`${e}.Slot`,n}function lJ(e){const t=W.forwardRef((n,r)=>{const{children:s,...h}=n;if(W.isValidElement(s)){const d=hJ(s),o=dJ(h,s.props);return s.type!==W.Fragment&&(o.ref=r?Sf(r,d):d),W.cloneElement(s,o)}return W.Children.count(s)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var cJ=Symbol("radix.slottable");function uJ(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===cJ}function dJ(e,t){const n={...t};for(const r in t){const s=e[r],h=t[r];/^on[A-Z]/.test(r)?s&&h?n[r]=(...o)=>{const _=h(...o);return s(...o),_}:s&&(n[r]=s):r==="style"?n[r]={...s,...h}:r==="className"&&(n[r]=[s,h].filter(Boolean).join(" "))}return{...e,...n}}function hJ(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}function Y1(e){const t=e+"CollectionProvider",[n,r]=Wl(t),[s,h]=n(t,{collectionRef:{current:null},itemMap:new Map}),d=$=>{const{scope:O,children:X}=$,K=je.useRef(null),te=je.useRef(new Map).current;return f.jsx(s,{scope:O,itemMap:te,collectionRef:K,children:X})};d.displayName=t;const o=e+"CollectionSlot",_=LD(o),w=je.forwardRef(($,O)=>{const{scope:X,children:K}=$,te=h(o,X),ne=gr(O,te.collectionRef);return f.jsx(_,{ref:ne,children:K})});w.displayName=o;const A=e+"CollectionItemSlot",P="data-radix-collection-item",N=LD(A),z=je.forwardRef(($,O)=>{const{scope:X,children:K,...te}=$,ne=je.useRef(null),H=gr(O,ne),ae=h(A,X);return je.useEffect(()=>(ae.itemMap.set(ne,{ref:ne,...te}),()=>void ae.itemMap.delete(ne))),f.jsx(N,{[P]:"",ref:H,children:K})});z.displayName=A;function q($){const O=h(e+"CollectionConsumer",$);return je.useCallback(()=>{const K=O.collectionRef.current;if(!K)return[];const te=Array.from(K.querySelectorAll(`[${P}]`));return Array.from(O.itemMap.values()).sort((ae,de)=>te.indexOf(ae.ref.current)-te.indexOf(de.ref.current))},[O.collectionRef,O.itemMap])}return[{Provider:d,Slot:w,ItemSlot:z},q,r]}var fJ=W.createContext(void 0);function Gy(e){const t=W.useContext(fJ);return e||t||"ltr"}var lS="rovingFocusGroup.onEntryFocus",pJ={bubbles:!1,cancelable:!0},y0="RovingFocusGroup",[HC,W6,mJ]=Y1(y0),[gJ,Wy]=Wl(y0,[mJ]),[yJ,vJ]=gJ(y0),H6=W.forwardRef((e,t)=>f.jsx(HC.Provider,{scope:e.__scopeRovingFocusGroup,children:f.jsx(HC.Slot,{scope:e.__scopeRovingFocusGroup,children:f.jsx(xJ,{...e,ref:t})})}));H6.displayName=y0;var xJ=W.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,orientation:r,loop:s=!1,dir:h,currentTabStopId:d,defaultCurrentTabStopId:o,onCurrentTabStopIdChange:_,onEntryFocus:w,preventScrollOnEntryFocus:A=!1,...P}=e,N=W.useRef(null),z=gr(t,N),q=Gy(h),[$,O]=bd({prop:d,defaultProp:o??null,onChange:_,caller:y0}),[X,K]=W.useState(!1),te=vh(w),ne=W6(n),H=W.useRef(!1),[ae,de]=W.useState(0);return W.useEffect(()=>{const ye=N.current;if(ye)return ye.addEventListener(lS,te),()=>ye.removeEventListener(lS,te)},[te]),f.jsx(yJ,{scope:n,orientation:r,dir:q,loop:s,currentTabStopId:$,onItemFocus:W.useCallback(ye=>O(ye),[O]),onItemShiftTab:W.useCallback(()=>K(!0),[]),onFocusableItemAdd:W.useCallback(()=>de(ye=>ye+1),[]),onFocusableItemRemove:W.useCallback(()=>de(ye=>ye-1),[]),children:f.jsx(qn.div,{tabIndex:X||ae===0?-1:0,"data-orientation":r,...P,ref:z,style:{outline:"none",...e.style},onMouseDown:dn(e.onMouseDown,()=>{H.current=!0}),onFocus:dn(e.onFocus,ye=>{const Ae=!H.current;if(ye.target===ye.currentTarget&&Ae&&!X){const _e=new CustomEvent(lS,pJ);if(ye.currentTarget.dispatchEvent(_e),!_e.defaultPrevented){const fe=ne().filter(Ve=>Ve.focusable),Ee=fe.find(Ve=>Ve.active),Be=fe.find(Ve=>Ve.id===$),Je=[Ee,Be,...fe].filter(Boolean).map(Ve=>Ve.ref.current);X6(Je,A)}}H.current=!1}),onBlur:dn(e.onBlur,()=>K(!1))})})}),Z6="RovingFocusGroupItem",K6=W.forwardRef((e,t)=>{const{__scopeRovingFocusGroup:n,focusable:r=!0,active:s=!1,tabStopId:h,children:d,...o}=e,_=vd(),w=h||_,A=vJ(Z6,n),P=A.currentTabStopId===w,N=W6(n),{onFocusableItemAdd:z,onFocusableItemRemove:q,currentTabStopId:$}=A;return W.useEffect(()=>{if(r)return z(),()=>q()},[r,z,q]),f.jsx(HC.ItemSlot,{scope:n,id:w,focusable:r,active:s,children:f.jsx(qn.span,{tabIndex:P?0:-1,"data-orientation":A.orientation,...o,ref:t,onMouseDown:dn(e.onMouseDown,O=>{r?A.onItemFocus(w):O.preventDefault()}),onFocus:dn(e.onFocus,()=>A.onItemFocus(w)),onKeyDown:dn(e.onKeyDown,O=>{if(O.key==="Tab"&&O.shiftKey){A.onItemShiftTab();return}if(O.target!==O.currentTarget)return;const X=wJ(O,A.orientation,A.dir);if(X!==void 0){if(O.metaKey||O.ctrlKey||O.altKey||O.shiftKey)return;O.preventDefault();let te=N().filter(ne=>ne.focusable).map(ne=>ne.ref.current);if(X==="last")te.reverse();else if(X==="prev"||X==="next"){X==="prev"&&te.reverse();const ne=te.indexOf(O.currentTarget);te=A.loop?SJ(te,ne+1):te.slice(ne+1)}setTimeout(()=>X6(te))}}),children:typeof d=="function"?d({isCurrentTabStop:P,hasTabStop:$!=null}):d})})});K6.displayName=Z6;var _J={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function bJ(e,t){return t!=="rtl"?e:e==="ArrowLeft"?"ArrowRight":e==="ArrowRight"?"ArrowLeft":e}function wJ(e,t,n){const r=bJ(e.key,n);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(r))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(r)))return _J[r]}function X6(e,t=!1){const n=document.activeElement;for(const r of e)if(r===n||(r.focus({preventScroll:t}),document.activeElement!==n))return}function SJ(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var vM=H6,xM=K6,_M="Radio",[TJ,Y6]=Wl(_M),[PJ,AJ]=TJ(_M),J6=W.forwardRef((e,t)=>{const{__scopeRadio:n,name:r,checked:s=!1,required:h,disabled:d,value:o="on",onCheck:_,form:w,...A}=e,[P,N]=W.useState(null),z=gr(t,O=>N(O)),q=W.useRef(!1),$=P?w||!!P.closest("form"):!0;return f.jsxs(PJ,{scope:n,checked:s,disabled:d,children:[f.jsx(qn.button,{type:"button",role:"radio","aria-checked":s,"data-state":n8(s),"data-disabled":d?"":void 0,disabled:d,value:o,...A,ref:z,onClick:dn(e.onClick,O=>{s||_?.(),$&&(q.current=O.isPropagationStopped(),q.current||O.stopPropagation())})}),$&&f.jsx(t8,{control:P,bubbles:!q.current,name:r,value:o,checked:s,required:h,disabled:d,form:w,style:{transform:"translateX(-100%)"}})]})});J6.displayName=_M;var Q6="RadioIndicator",e8=W.forwardRef((e,t)=>{const{__scopeRadio:n,forceMount:r,...s}=e,h=AJ(Q6,n);return f.jsx(Bc,{present:r||h.checked,children:f.jsx(qn.span,{"data-state":n8(h.checked),"data-disabled":h.disabled?"":void 0,...s,ref:t})})});e8.displayName=Q6;var CJ="RadioBubbleInput",t8=W.forwardRef(({__scopeRadio:e,control:t,checked:n,bubbles:r=!0,...s},h)=>{const d=W.useRef(null),o=gr(d,h),_=m0(n),w=g0(t);return W.useEffect(()=>{const A=d.current;if(!A)return;const P=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(P,"checked").set;if(_!==n&&z){const q=new Event("click",{bubbles:r});z.call(A,n),A.dispatchEvent(q)}},[_,n,r]),f.jsx(qn.input,{type:"radio","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});t8.displayName=CJ;function n8(e){return e?"checked":"unchecked"}var EJ=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],J1="RadioGroup",[jJ]=Wl(J1,[Wy,Y6]),r8=Wy(),i8=Y6(),[MJ,kJ]=jJ(J1),a8=W.forwardRef((e,t)=>{const{__scopeRadioGroup:n,name:r,defaultValue:s,value:h,required:d=!1,disabled:o=!1,orientation:_,dir:w,loop:A=!0,onValueChange:P,...N}=e,z=r8(n),q=Gy(w),[$,O]=bd({prop:h,defaultProp:s??null,onChange:P,caller:J1});return f.jsx(MJ,{scope:n,name:r,required:d,disabled:o,value:$,onValueChange:O,children:f.jsx(vM,{asChild:!0,...z,orientation:_,dir:q,loop:A,children:f.jsx(qn.div,{role:"radiogroup","aria-required":d,"aria-orientation":_,"data-disabled":o?"":void 0,dir:q,...N,ref:t})})})});a8.displayName=J1;var o8="RadioGroupItem",s8=W.forwardRef((e,t)=>{const{__scopeRadioGroup:n,disabled:r,...s}=e,h=kJ(o8,n),d=h.disabled||r,o=r8(n),_=i8(n),w=W.useRef(null),A=gr(t,w),P=h.value===s.value,N=W.useRef(!1);return W.useEffect(()=>{const z=$=>{EJ.includes($.key)&&(N.current=!0)},q=()=>N.current=!1;return document.addEventListener("keydown",z),document.addEventListener("keyup",q),()=>{document.removeEventListener("keydown",z),document.removeEventListener("keyup",q)}},[]),f.jsx(xM,{asChild:!0,...o,focusable:!d,active:P,children:f.jsx(J6,{disabled:d,required:h.required,checked:P,..._,...s,name:h.name,ref:A,onCheck:()=>h.onValueChange(s.value),onKeyDown:dn(z=>{z.key==="Enter"&&z.preventDefault()}),onFocus:dn(s.onFocus,()=>{N.current&&w.current?.click()})})})});s8.displayName=o8;var IJ="RadioGroupIndicator",l8=W.forwardRef((e,t)=>{const{__scopeRadioGroup:n,...r}=e,s=i8(n);return f.jsx(e8,{...s,...r,ref:t})});l8.displayName=IJ;var NJ=a8,DJ=s8,OJ=l8;function RJ({className:e,...t}){return f.jsx(NJ,{"data-slot":"radio-group",className:or("grid gap-3",e),...t})}function Bv({className:e,...t}){return f.jsx(DJ,{"data-slot":"radio-group-item",className:or("border-input text-primary focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 aspect-square size-4 shrink-0 rounded-full border shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(OJ,{"data-slot":"radio-group-indicator",className:"relative flex items-center justify-center",children:f.jsx(CH,{className:"fill-primary absolute top-1/2 left-1/2 size-2 -translate-x-1/2 -translate-y-1/2"})})})}function Tb(e,[t,n]){return Math.min(n,Math.max(t,e))}const LJ=["top","right","bottom","left"],jp=Math.min,Oc=Math.max,Pb=Math.round,N_=Math.floor,fh=e=>({x:e,y:e}),zJ={left:"right",right:"left",bottom:"top",top:"bottom"},FJ={start:"end",end:"start"};function ZC(e,t,n){return Oc(e,jp(t,n))}function yf(e,t){return typeof e=="function"?e(t):e}function vf(e){return e.split("-")[0]}function Hy(e){return e.split("-")[1]}function bM(e){return e==="x"?"y":"x"}function wM(e){return e==="y"?"height":"width"}const BJ=new Set(["top","bottom"]);function ch(e){return BJ.has(vf(e))?"y":"x"}function SM(e){return bM(ch(e))}function $J(e,t,n){n===void 0&&(n=!1);const r=Hy(e),s=SM(e),h=wM(s);let d=s==="x"?r===(n?"end":"start")?"right":"left":r==="start"?"bottom":"top";return t.reference[h]>t.floating[h]&&(d=Ab(d)),[d,Ab(d)]}function VJ(e){const t=Ab(e);return[KC(e),t,KC(t)]}function KC(e){return e.replace(/start|end/g,t=>FJ[t])}const zD=["left","right"],FD=["right","left"],UJ=["top","bottom"],qJ=["bottom","top"];function GJ(e,t,n){switch(e){case"top":case"bottom":return n?t?FD:zD:t?zD:FD;case"left":case"right":return t?UJ:qJ;default:return[]}}function WJ(e,t,n,r){const s=Hy(e);let h=GJ(vf(e),n==="start",r);return s&&(h=h.map(d=>d+"-"+s),t&&(h=h.concat(h.map(KC)))),h}function Ab(e){return e.replace(/left|right|bottom|top/g,t=>zJ[t])}function HJ(e){return{top:0,right:0,bottom:0,left:0,...e}}function c8(e){return typeof e!="number"?HJ(e):{top:e,right:e,bottom:e,left:e}}function Cb(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function BD(e,t,n){let{reference:r,floating:s}=e;const h=ch(t),d=SM(t),o=wM(d),_=vf(t),w=h==="y",A=r.x+r.width/2-s.width/2,P=r.y+r.height/2-s.height/2,N=r[o]/2-s[o]/2;let z;switch(_){case"top":z={x:A,y:r.y-s.height};break;case"bottom":z={x:A,y:r.y+r.height};break;case"right":z={x:r.x+r.width,y:P};break;case"left":z={x:r.x-s.width,y:P};break;default:z={x:r.x,y:r.y}}switch(Hy(t)){case"start":z[d]-=N*(n&&w?-1:1);break;case"end":z[d]+=N*(n&&w?-1:1);break}return z}async function ZJ(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:h,rects:d,elements:o,strategy:_}=e,{boundary:w="clippingAncestors",rootBoundary:A="viewport",elementContext:P="floating",altBoundary:N=!1,padding:z=0}=yf(t,e),q=c8(z),O=o[N?P==="floating"?"reference":"floating":P],X=Cb(await h.getClippingRect({element:(n=await(h.isElement==null?void 0:h.isElement(O)))==null||n?O:O.contextElement||await(h.getDocumentElement==null?void 0:h.getDocumentElement(o.floating)),boundary:w,rootBoundary:A,strategy:_})),K=P==="floating"?{x:r,y:s,width:d.floating.width,height:d.floating.height}:d.reference,te=await(h.getOffsetParent==null?void 0:h.getOffsetParent(o.floating)),ne=await(h.isElement==null?void 0:h.isElement(te))?await(h.getScale==null?void 0:h.getScale(te))||{x:1,y:1}:{x:1,y:1},H=Cb(h.convertOffsetParentRelativeRectToViewportRelativeRect?await h.convertOffsetParentRelativeRectToViewportRelativeRect({elements:o,rect:K,offsetParent:te,strategy:_}):K);return{top:(X.top-H.top+q.top)/ne.y,bottom:(H.bottom-X.bottom+q.bottom)/ne.y,left:(X.left-H.left+q.left)/ne.x,right:(H.right-X.right+q.right)/ne.x}}const KJ=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:h=[],platform:d}=n,o=h.filter(Boolean),_=await(d.isRTL==null?void 0:d.isRTL(t));let w=await d.getElementRects({reference:e,floating:t,strategy:s}),{x:A,y:P}=BD(w,r,_),N=r,z={},q=0;for(let O=0;O<o.length;O++){var $;const{name:X,fn:K}=o[O],{x:te,y:ne,data:H,reset:ae}=await K({x:A,y:P,initialPlacement:r,placement:N,strategy:s,middlewareData:z,rects:w,platform:{...d,detectOverflow:($=d.detectOverflow)!=null?$:ZJ},elements:{reference:e,floating:t}});A=te??A,P=ne??P,z={...z,[X]:{...z[X],...H}},ae&&q<=50&&(q++,typeof ae=="object"&&(ae.placement&&(N=ae.placement),ae.rects&&(w=ae.rects===!0?await d.getElementRects({reference:e,floating:t,strategy:s}):ae.rects),{x:A,y:P}=BD(w,N,_)),O=-1)}return{x:A,y:P,placement:N,strategy:s,middlewareData:z}},XJ=e=>({name:"arrow",options:e,async fn(t){const{x:n,y:r,placement:s,rects:h,platform:d,elements:o,middlewareData:_}=t,{element:w,padding:A=0}=yf(e,t)||{};if(w==null)return{};const P=c8(A),N={x:n,y:r},z=SM(s),q=wM(z),$=await d.getDimensions(w),O=z==="y",X=O?"top":"left",K=O?"bottom":"right",te=O?"clientHeight":"clientWidth",ne=h.reference[q]+h.reference[z]-N[z]-h.floating[q],H=N[z]-h.reference[z],ae=await(d.getOffsetParent==null?void 0:d.getOffsetParent(w));let de=ae?ae[te]:0;(!de||!await(d.isElement==null?void 0:d.isElement(ae)))&&(de=o.floating[te]||h.floating[q]);const ye=ne/2-H/2,Ae=de/2-$[q]/2-1,_e=jp(P[X],Ae),fe=jp(P[K],Ae),Ee=_e,Be=de-$[q]-fe,De=de/2-$[q]/2+ye,Je=ZC(Ee,De,Be),Ve=!_.arrow&&Hy(s)!=null&&De!==Je&&h.reference[q]/2-(De<Ee?_e:fe)-$[q]/2<0,et=Ve?De<Ee?De-Ee:De-Be:0;return{[z]:N[z]+et,data:{[z]:Je,centerOffset:De-Je-et,...Ve&&{alignmentOffset:et}},reset:Ve}}}),YJ=function(e){return e===void 0&&(e={}),{name:"flip",options:e,async fn(t){var n,r;const{placement:s,middlewareData:h,rects:d,initialPlacement:o,platform:_,elements:w}=t,{mainAxis:A=!0,crossAxis:P=!0,fallbackPlacements:N,fallbackStrategy:z="bestFit",fallbackAxisSideDirection:q="none",flipAlignment:$=!0,...O}=yf(e,t);if((n=h.arrow)!=null&&n.alignmentOffset)return{};const X=vf(s),K=ch(o),te=vf(o)===o,ne=await(_.isRTL==null?void 0:_.isRTL(w.floating)),H=N||(te||!$?[Ab(o)]:VJ(o)),ae=q!=="none";!N&&ae&&H.push(...WJ(o,$,q,ne));const de=[o,...H],ye=await _.detectOverflow(t,O),Ae=[];let _e=((r=h.flip)==null?void 0:r.overflows)||[];if(A&&Ae.push(ye[X]),P){const De=$J(s,d,ne);Ae.push(ye[De[0]],ye[De[1]])}if(_e=[..._e,{placement:s,overflows:Ae}],!Ae.every(De=>De<=0)){var fe,Ee;const De=(((fe=h.flip)==null?void 0:fe.index)||0)+1,Je=de[De];if(Je&&(!(P==="alignment"?K!==ch(Je):!1)||_e.every(Ce=>ch(Ce.placement)===K?Ce.overflows[0]>0:!0)))return{data:{index:De,overflows:_e},reset:{placement:Je}};let Ve=(Ee=_e.filter(et=>et.overflows[0]<=0).sort((et,Ce)=>et.overflows[1]-Ce.overflows[1])[0])==null?void 0:Ee.placement;if(!Ve)switch(z){case"bestFit":{var Be;const et=(Be=_e.filter(Ce=>{if(ae){const We=ch(Ce.placement);return We===K||We==="y"}return!0}).map(Ce=>[Ce.placement,Ce.overflows.filter(We=>We>0).reduce((We,Qe)=>We+Qe,0)]).sort((Ce,We)=>Ce[1]-We[1])[0])==null?void 0:Be[0];et&&(Ve=et);break}case"initialPlacement":Ve=o;break}if(s!==Ve)return{reset:{placement:Ve}}}return{}}}};function $D(e,t){return{top:e.top-t.height,right:e.right-t.width,bottom:e.bottom-t.height,left:e.left-t.width}}function VD(e){return LJ.some(t=>e[t]>=0)}const JJ=function(e){return e===void 0&&(e={}),{name:"hide",options:e,async fn(t){const{rects:n,platform:r}=t,{strategy:s="referenceHidden",...h}=yf(e,t);switch(s){case"referenceHidden":{const d=await r.detectOverflow(t,{...h,elementContext:"reference"}),o=$D(d,n.reference);return{data:{referenceHiddenOffsets:o,referenceHidden:VD(o)}}}case"escaped":{const d=await r.detectOverflow(t,{...h,altBoundary:!0}),o=$D(d,n.floating);return{data:{escapedOffsets:o,escaped:VD(o)}}}default:return{}}}}},u8=new Set(["left","top"]);async function QJ(e,t){const{placement:n,platform:r,elements:s}=e,h=await(r.isRTL==null?void 0:r.isRTL(s.floating)),d=vf(n),o=Hy(n),_=ch(n)==="y",w=u8.has(d)?-1:1,A=h&&_?-1:1,P=yf(t,e);let{mainAxis:N,crossAxis:z,alignmentAxis:q}=typeof P=="number"?{mainAxis:P,crossAxis:0,alignmentAxis:null}:{mainAxis:P.mainAxis||0,crossAxis:P.crossAxis||0,alignmentAxis:P.alignmentAxis};return o&&typeof q=="number"&&(z=o==="end"?q*-1:q),_?{x:z*A,y:N*w}:{x:N*w,y:z*A}}const eQ=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:h,placement:d,middlewareData:o}=t,_=await QJ(t,e);return d===((n=o.offset)==null?void 0:n.placement)&&(r=o.arrow)!=null&&r.alignmentOffset?{}:{x:s+_.x,y:h+_.y,data:{..._,placement:d}}}}},tQ=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s,platform:h}=t,{mainAxis:d=!0,crossAxis:o=!1,limiter:_={fn:X=>{let{x:K,y:te}=X;return{x:K,y:te}}},...w}=yf(e,t),A={x:n,y:r},P=await h.detectOverflow(t,w),N=ch(vf(s)),z=bM(N);let q=A[z],$=A[N];if(d){const X=z==="y"?"top":"left",K=z==="y"?"bottom":"right",te=q+P[X],ne=q-P[K];q=ZC(te,q,ne)}if(o){const X=N==="y"?"top":"left",K=N==="y"?"bottom":"right",te=$+P[X],ne=$-P[K];$=ZC(te,$,ne)}const O=_.fn({...t,[z]:q,[N]:$});return{...O,data:{x:O.x-n,y:O.y-r,enabled:{[z]:d,[N]:o}}}}}},nQ=function(e){return e===void 0&&(e={}),{options:e,fn(t){const{x:n,y:r,placement:s,rects:h,middlewareData:d}=t,{offset:o=0,mainAxis:_=!0,crossAxis:w=!0}=yf(e,t),A={x:n,y:r},P=ch(s),N=bM(P);let z=A[N],q=A[P];const $=yf(o,t),O=typeof $=="number"?{mainAxis:$,crossAxis:0}:{mainAxis:0,crossAxis:0,...$};if(_){const te=N==="y"?"height":"width",ne=h.reference[N]-h.floating[te]+O.mainAxis,H=h.reference[N]+h.reference[te]-O.mainAxis;z<ne?z=ne:z>H&&(z=H)}if(w){var X,K;const te=N==="y"?"width":"height",ne=u8.has(vf(s)),H=h.reference[P]-h.floating[te]+(ne&&((X=d.offset)==null?void 0:X[P])||0)+(ne?0:O.crossAxis),ae=h.reference[P]+h.reference[te]+(ne?0:((K=d.offset)==null?void 0:K[P])||0)-(ne?O.crossAxis:0);q<H?q=H:q>ae&&(q=ae)}return{[N]:z,[P]:q}}}},rQ=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:h,platform:d,elements:o}=t,{apply:_=()=>{},...w}=yf(e,t),A=await d.detectOverflow(t,w),P=vf(s),N=Hy(s),z=ch(s)==="y",{width:q,height:$}=h.floating;let O,X;P==="top"||P==="bottom"?(O=P,X=N===(await(d.isRTL==null?void 0:d.isRTL(o.floating))?"start":"end")?"left":"right"):(X=P,O=N==="end"?"top":"bottom");const K=$-A.top-A.bottom,te=q-A.left-A.right,ne=jp($-A[O],K),H=jp(q-A[X],te),ae=!t.middlewareData.shift;let de=ne,ye=H;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(ye=te),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(de=K),ae&&!N){const _e=Oc(A.left,0),fe=Oc(A.right,0),Ee=Oc(A.top,0),Be=Oc(A.bottom,0);z?ye=q-2*(_e!==0||fe!==0?_e+fe:Oc(A.left,A.right)):de=$-2*(Ee!==0||Be!==0?Ee+Be:Oc(A.top,A.bottom))}await _({...t,availableWidth:ye,availableHeight:de});const Ae=await d.getDimensions(o.floating);return q!==Ae.width||$!==Ae.height?{reset:{rects:!0}}:{}}}};function Q1(){return typeof window<"u"}function Zy(e){return d8(e)?(e.nodeName||"").toLowerCase():"#document"}function Lc(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function wh(e){var t;return(t=(d8(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function d8(e){return Q1()?e instanceof Node||e instanceof Lc(e).Node:!1}function wd(e){return Q1()?e instanceof Element||e instanceof Lc(e).Element:!1}function xh(e){return Q1()?e instanceof HTMLElement||e instanceof Lc(e).HTMLElement:!1}function UD(e){return!Q1()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Lc(e).ShadowRoot}const iQ=new Set(["inline","contents"]);function v0(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=Sd(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!iQ.has(s)}const aQ=new Set(["table","td","th"]);function oQ(e){return aQ.has(Zy(e))}const sQ=[":popover-open",":modal"];function ew(e){return sQ.some(t=>{try{return e.matches(t)}catch{return!1}})}const lQ=["transform","translate","scale","rotate","perspective"],cQ=["transform","translate","scale","rotate","perspective","filter"],uQ=["paint","layout","strict","content"];function TM(e){const t=PM(),n=wd(e)?Sd(e):e;return lQ.some(r=>n[r]?n[r]!=="none":!1)||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||cQ.some(r=>(n.willChange||"").includes(r))||uQ.some(r=>(n.contain||"").includes(r))}function dQ(e){let t=Mp(e);for(;xh(t)&&!fy(t);){if(TM(t))return t;if(ew(t))return null;t=Mp(t)}return null}function PM(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const hQ=new Set(["html","body","#document"]);function fy(e){return hQ.has(Zy(e))}function Sd(e){return Lc(e).getComputedStyle(e)}function tw(e){return wd(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function Mp(e){if(Zy(e)==="html")return e;const t=e.assignedSlot||e.parentNode||UD(e)&&e.host||wh(e);return UD(t)?t.host:t}function h8(e){const t=Mp(e);return fy(t)?e.ownerDocument?e.ownerDocument.body:e.body:xh(t)&&v0(t)?t:h8(t)}function bx(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=h8(e),h=s===((r=e.ownerDocument)==null?void 0:r.body),d=Lc(s);if(h){const o=XC(d);return t.concat(d,d.visualViewport||[],v0(s)?s:[],o&&n?bx(o):[])}return t.concat(s,bx(s,[],n))}function XC(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function f8(e){const t=Sd(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=xh(e),h=s?e.offsetWidth:n,d=s?e.offsetHeight:r,o=Pb(n)!==h||Pb(r)!==d;return o&&(n=h,r=d),{width:n,height:r,$:o}}function AM(e){return wd(e)?e:e.contextElement}function iy(e){const t=AM(e);if(!xh(t))return fh(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:h}=f8(t);let d=(h?Pb(n.width):n.width)/r,o=(h?Pb(n.height):n.height)/s;return(!d||!Number.isFinite(d))&&(d=1),(!o||!Number.isFinite(o))&&(o=1),{x:d,y:o}}const fQ=fh(0);function p8(e){const t=Lc(e);return!PM()||!t.visualViewport?fQ:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function pQ(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Lc(e)?!1:t}function Vm(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),h=AM(e);let d=fh(1);t&&(r?wd(r)&&(d=iy(r)):d=iy(e));const o=pQ(h,n,r)?p8(h):fh(0);let _=(s.left+o.x)/d.x,w=(s.top+o.y)/d.y,A=s.width/d.x,P=s.height/d.y;if(h){const N=Lc(h),z=r&&wd(r)?Lc(r):r;let q=N,$=XC(q);for(;$&&r&&z!==q;){const O=iy($),X=$.getBoundingClientRect(),K=Sd($),te=X.left+($.clientLeft+parseFloat(K.paddingLeft))*O.x,ne=X.top+($.clientTop+parseFloat(K.paddingTop))*O.y;_*=O.x,w*=O.y,A*=O.x,P*=O.y,_+=te,w+=ne,q=Lc($),$=XC(q)}}return Cb({width:A,height:P,x:_,y:w})}function nw(e,t){const n=tw(e).scrollLeft;return t?t.left+n:Vm(wh(e)).left+n}function m8(e,t){const n=e.getBoundingClientRect(),r=n.left+t.scrollLeft-nw(e,n),s=n.top+t.scrollTop;return{x:r,y:s}}function mQ(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const h=s==="fixed",d=wh(r),o=t?ew(t.floating):!1;if(r===d||o&&h)return n;let _={scrollLeft:0,scrollTop:0},w=fh(1);const A=fh(0),P=xh(r);if((P||!P&&!h)&&((Zy(r)!=="body"||v0(d))&&(_=tw(r)),xh(r))){const z=Vm(r);w=iy(r),A.x=z.x+r.clientLeft,A.y=z.y+r.clientTop}const N=d&&!P&&!h?m8(d,_):fh(0);return{width:n.width*w.x,height:n.height*w.y,x:n.x*w.x-_.scrollLeft*w.x+A.x+N.x,y:n.y*w.y-_.scrollTop*w.y+A.y+N.y}}function gQ(e){return Array.from(e.getClientRects())}function yQ(e){const t=wh(e),n=tw(e),r=e.ownerDocument.body,s=Oc(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),h=Oc(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let d=-n.scrollLeft+nw(e);const o=-n.scrollTop;return Sd(r).direction==="rtl"&&(d+=Oc(t.clientWidth,r.clientWidth)-s),{width:s,height:h,x:d,y:o}}const qD=25;function vQ(e,t){const n=Lc(e),r=wh(e),s=n.visualViewport;let h=r.clientWidth,d=r.clientHeight,o=0,_=0;if(s){h=s.width,d=s.height;const A=PM();(!A||A&&t==="fixed")&&(o=s.offsetLeft,_=s.offsetTop)}const w=nw(r);if(w<=0){const A=r.ownerDocument,P=A.body,N=getComputedStyle(P),z=A.compatMode==="CSS1Compat"&&parseFloat(N.marginLeft)+parseFloat(N.marginRight)||0,q=Math.abs(r.clientWidth-P.clientWidth-z);q<=qD&&(h-=q)}else w<=qD&&(h+=w);return{width:h,height:d,x:o,y:_}}const xQ=new Set(["absolute","fixed"]);function _Q(e,t){const n=Vm(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,h=xh(e)?iy(e):fh(1),d=e.clientWidth*h.x,o=e.clientHeight*h.y,_=s*h.x,w=r*h.y;return{width:d,height:o,x:_,y:w}}function GD(e,t,n){let r;if(t==="viewport")r=vQ(e,n);else if(t==="document")r=yQ(wh(e));else if(wd(t))r=_Q(t,n);else{const s=p8(e);r={x:t.x-s.x,y:t.y-s.y,width:t.width,height:t.height}}return Cb(r)}function g8(e,t){const n=Mp(e);return n===t||!wd(n)||fy(n)?!1:Sd(n).position==="fixed"||g8(n,t)}function bQ(e,t){const n=t.get(e);if(n)return n;let r=bx(e,[],!1).filter(o=>wd(o)&&Zy(o)!=="body"),s=null;const h=Sd(e).position==="fixed";let d=h?Mp(e):e;for(;wd(d)&&!fy(d);){const o=Sd(d),_=TM(d);!_&&o.position==="fixed"&&(s=null),(h?!_&&!s:!_&&o.position==="static"&&!!s&&xQ.has(s.position)||v0(d)&&!_&&g8(e,d))?r=r.filter(A=>A!==d):s=o,d=Mp(d)}return t.set(e,r),r}function wQ(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const d=[...n==="clippingAncestors"?ew(t)?[]:bQ(t,this._c):[].concat(n),r],o=d[0],_=d.reduce((w,A)=>{const P=GD(t,A,s);return w.top=Oc(P.top,w.top),w.right=jp(P.right,w.right),w.bottom=jp(P.bottom,w.bottom),w.left=Oc(P.left,w.left),w},GD(t,o,s));return{width:_.right-_.left,height:_.bottom-_.top,x:_.left,y:_.top}}function SQ(e){const{width:t,height:n}=f8(e);return{width:t,height:n}}function TQ(e,t,n){const r=xh(t),s=wh(t),h=n==="fixed",d=Vm(e,!0,h,t);let o={scrollLeft:0,scrollTop:0};const _=fh(0);function w(){_.x=nw(s)}if(r||!r&&!h)if((Zy(t)!=="body"||v0(s))&&(o=tw(t)),r){const z=Vm(t,!0,h,t);_.x=z.x+t.clientLeft,_.y=z.y+t.clientTop}else s&&w();h&&!r&&s&&w();const A=s&&!r&&!h?m8(s,o):fh(0),P=d.left+o.scrollLeft-_.x-A.x,N=d.top+o.scrollTop-_.y-A.y;return{x:P,y:N,width:d.width,height:d.height}}function cS(e){return Sd(e).position==="static"}function WD(e,t){if(!xh(e)||Sd(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return wh(e)===n&&(n=n.ownerDocument.body),n}function y8(e,t){const n=Lc(e);if(ew(e))return n;if(!xh(e)){let s=Mp(e);for(;s&&!fy(s);){if(wd(s)&&!cS(s))return s;s=Mp(s)}return n}let r=WD(e,t);for(;r&&oQ(r)&&cS(r);)r=WD(r,t);return r&&fy(r)&&cS(r)&&!TM(r)?n:r||dQ(e)||n}const PQ=async function(e){const t=this.getOffsetParent||y8,n=this.getDimensions,r=await n(e.floating);return{reference:TQ(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function AQ(e){return Sd(e).direction==="rtl"}const CQ={convertOffsetParentRelativeRectToViewportRelativeRect:mQ,getDocumentElement:wh,getClippingRect:wQ,getOffsetParent:y8,getElementRects:PQ,getClientRects:gQ,getDimensions:SQ,getScale:iy,isElement:wd,isRTL:AQ};function v8(e,t){return e.x===t.x&&e.y===t.y&&e.width===t.width&&e.height===t.height}function EQ(e,t){let n=null,r;const s=wh(e);function h(){var o;clearTimeout(r),(o=n)==null||o.disconnect(),n=null}function d(o,_){o===void 0&&(o=!1),_===void 0&&(_=1),h();const w=e.getBoundingClientRect(),{left:A,top:P,width:N,height:z}=w;if(o||t(),!N||!z)return;const q=N_(P),$=N_(s.clientWidth-(A+N)),O=N_(s.clientHeight-(P+z)),X=N_(A),te={rootMargin:-q+"px "+-$+"px "+-O+"px "+-X+"px",threshold:Oc(0,jp(1,_))||1};let ne=!0;function H(ae){const de=ae[0].intersectionRatio;if(de!==_){if(!ne)return d();de?d(!1,de):r=setTimeout(()=>{d(!1,1e-7)},1e3)}de===1&&!v8(w,e.getBoundingClientRect())&&d(),ne=!1}try{n=new IntersectionObserver(H,{...te,root:s.ownerDocument})}catch{n=new IntersectionObserver(H,te)}n.observe(e)}return d(!0),h}function jQ(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:h=!0,elementResize:d=typeof ResizeObserver=="function",layoutShift:o=typeof IntersectionObserver=="function",animationFrame:_=!1}=r,w=AM(e),A=s||h?[...w?bx(w):[],...bx(t)]:[];A.forEach(X=>{s&&X.addEventListener("scroll",n,{passive:!0}),h&&X.addEventListener("resize",n)});const P=w&&o?EQ(w,n):null;let N=-1,z=null;d&&(z=new ResizeObserver(X=>{let[K]=X;K&&K.target===w&&z&&(z.unobserve(t),cancelAnimationFrame(N),N=requestAnimationFrame(()=>{var te;(te=z)==null||te.observe(t)})),n()}),w&&!_&&z.observe(w),z.observe(t));let q,$=_?Vm(e):null;_&&O();function O(){const X=Vm(e);$&&!v8($,X)&&n(),$=X,q=requestAnimationFrame(O)}return n(),()=>{var X;A.forEach(K=>{s&&K.removeEventListener("scroll",n),h&&K.removeEventListener("resize",n)}),P?.(),(X=z)==null||X.disconnect(),z=null,_&&cancelAnimationFrame(q)}}const MQ=eQ,kQ=tQ,IQ=YJ,NQ=rQ,DQ=JJ,HD=XJ,OQ=nQ,RQ=(e,t,n)=>{const r=new Map,s={platform:CQ,...n},h={...s.platform,_c:r};return KJ(e,t,{...s,platform:h})};var LQ=typeof document<"u",zQ=function(){},ob=LQ?W.useLayoutEffect:zQ;function Eb(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Eb(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const h=s[r];if(!(h==="_owner"&&e.$$typeof)&&!Eb(e[h],t[h]))return!1}return!0}return e!==e&&t!==t}function x8(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function ZD(e,t){const n=x8(e);return Math.round(t*n)/n}function uS(e){const t=W.useRef(e);return ob(()=>{t.current=e}),t}function FQ(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:h,floating:d}={},transform:o=!0,whileElementsMounted:_,open:w}=e,[A,P]=W.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[N,z]=W.useState(r);Eb(N,r)||z(r);const[q,$]=W.useState(null),[O,X]=W.useState(null),K=W.useCallback(Ce=>{Ce!==ae.current&&(ae.current=Ce,$(Ce))},[]),te=W.useCallback(Ce=>{Ce!==de.current&&(de.current=Ce,X(Ce))},[]),ne=h||q,H=d||O,ae=W.useRef(null),de=W.useRef(null),ye=W.useRef(A),Ae=_!=null,_e=uS(_),fe=uS(s),Ee=uS(w),Be=W.useCallback(()=>{if(!ae.current||!de.current)return;const Ce={placement:t,strategy:n,middleware:N};fe.current&&(Ce.platform=fe.current),RQ(ae.current,de.current,Ce).then(We=>{const Qe={...We,isPositioned:Ee.current!==!1};De.current&&!Eb(ye.current,Qe)&&(ye.current=Qe,h0.flushSync(()=>{P(Qe)}))})},[N,t,n,fe,Ee]);ob(()=>{w===!1&&ye.current.isPositioned&&(ye.current.isPositioned=!1,P(Ce=>({...Ce,isPositioned:!1})))},[w]);const De=W.useRef(!1);ob(()=>(De.current=!0,()=>{De.current=!1}),[]),ob(()=>{if(ne&&(ae.current=ne),H&&(de.current=H),ne&&H){if(_e.current)return _e.current(ne,H,Be);Be()}},[ne,H,Be,_e,Ae]);const Je=W.useMemo(()=>({reference:ae,floating:de,setReference:K,setFloating:te}),[K,te]),Ve=W.useMemo(()=>({reference:ne,floating:H}),[ne,H]),et=W.useMemo(()=>{const Ce={position:n,left:0,top:0};if(!Ve.floating)return Ce;const We=ZD(Ve.floating,A.x),Qe=ZD(Ve.floating,A.y);return o?{...Ce,transform:"translate("+We+"px, "+Qe+"px)",...x8(Ve.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:We,top:Qe}},[n,o,Ve.floating,A.x,A.y]);return W.useMemo(()=>({...A,update:Be,refs:Je,elements:Ve,floatingStyles:et}),[A,Be,Je,Ve,et])}const BQ=e=>{function t(n){return{}.hasOwnProperty.call(n,"current")}return{name:"arrow",options:e,fn(n){const{element:r,padding:s}=typeof e=="function"?e(n):e;return r&&t(r)?r.current!=null?HD({element:r.current,padding:s}).fn(n):{}:r?HD({element:r,padding:s}).fn(n):{}}}},$Q=(e,t)=>({...MQ(e),options:[e,t]}),VQ=(e,t)=>({...kQ(e),options:[e,t]}),UQ=(e,t)=>({...OQ(e),options:[e,t]}),qQ=(e,t)=>({...IQ(e),options:[e,t]}),GQ=(e,t)=>({...NQ(e),options:[e,t]}),WQ=(e,t)=>({...DQ(e),options:[e,t]}),HQ=(e,t)=>({...BQ(e),options:[e,t]});var ZQ="Arrow",_8=W.forwardRef((e,t)=>{const{children:n,width:r=10,height:s=5,...h}=e;return f.jsx(qn.svg,{...h,ref:t,width:r,height:s,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:e.asChild?n:f.jsx("polygon",{points:"0,0 30,0 15,10"})})});_8.displayName=ZQ;var KQ=_8,CM="Popper",[b8,Ky]=Wl(CM),[XQ,w8]=b8(CM),S8=e=>{const{__scopePopper:t,children:n}=e,[r,s]=W.useState(null);return f.jsx(XQ,{scope:t,anchor:r,onAnchorChange:s,children:n})};S8.displayName=CM;var T8="PopperAnchor",P8=W.forwardRef((e,t)=>{const{__scopePopper:n,virtualRef:r,...s}=e,h=w8(T8,n),d=W.useRef(null),o=gr(t,d),_=W.useRef(null);return W.useEffect(()=>{const w=_.current;_.current=r?.current||d.current,w!==_.current&&h.onAnchorChange(_.current)}),r?null:f.jsx(qn.div,{...s,ref:o})});P8.displayName=T8;var EM="PopperContent",[YQ,JQ]=b8(EM),A8=W.forwardRef((e,t)=>{const{__scopePopper:n,side:r="bottom",sideOffset:s=0,align:h="center",alignOffset:d=0,arrowPadding:o=0,avoidCollisions:_=!0,collisionBoundary:w=[],collisionPadding:A=0,sticky:P="partial",hideWhenDetached:N=!1,updatePositionStrategy:z="optimized",onPlaced:q,...$}=e,O=w8(EM,n),[X,K]=W.useState(null),te=gr(t,Tt=>K(Tt)),[ne,H]=W.useState(null),ae=g0(ne),de=ae?.width??0,ye=ae?.height??0,Ae=r+(h!=="center"?"-"+h:""),_e=typeof A=="number"?A:{top:0,right:0,bottom:0,left:0,...A},fe=Array.isArray(w)?w:[w],Ee=fe.length>0,Be={padding:_e,boundary:fe.filter(eee),altBoundary:Ee},{refs:De,floatingStyles:Je,placement:Ve,isPositioned:et,middlewareData:Ce}=FQ({strategy:"fixed",placement:Ae,whileElementsMounted:(...Tt)=>jQ(...Tt,{animationFrame:z==="always"}),elements:{reference:O.anchor},middleware:[$Q({mainAxis:s+ye,alignmentAxis:d}),_&&VQ({mainAxis:!0,crossAxis:!1,limiter:P==="partial"?UQ():void 0,...Be}),_&&qQ({...Be}),GQ({...Be,apply:({elements:Tt,rects:Ot,availableWidth:rt,availableHeight:zt})=>{const{width:Ut,height:dt}=Ot.reference,Rn=Tt.floating.style;Rn.setProperty("--radix-popper-available-width",`${rt}px`),Rn.setProperty("--radix-popper-available-height",`${zt}px`),Rn.setProperty("--radix-popper-anchor-width",`${Ut}px`),Rn.setProperty("--radix-popper-anchor-height",`${dt}px`)}}),ne&&HQ({element:ne,padding:o}),tee({arrowWidth:de,arrowHeight:ye}),N&&WQ({strategy:"referenceHidden",...Be})]}),[We,Qe]=j8(Ve),Re=vh(q);js(()=>{et&&Re?.()},[et,Re]);const nt=Ce.arrow?.x,pt=Ce.arrow?.y,Ct=Ce.arrow?.centerOffset!==0,[Mt,Nt]=W.useState();return js(()=>{X&&Nt(window.getComputedStyle(X).zIndex)},[X]),f.jsx("div",{ref:De.setFloating,"data-radix-popper-content-wrapper":"",style:{...Je,transform:et?Je.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Mt,"--radix-popper-transform-origin":[Ce.transformOrigin?.x,Ce.transformOrigin?.y].join(" "),...Ce.hide?.referenceHidden&&{visibility:"hidden",pointerEvents:"none"}},dir:e.dir,children:f.jsx(YQ,{scope:n,placedSide:We,onArrowChange:H,arrowX:nt,arrowY:pt,shouldHideArrow:Ct,children:f.jsx(qn.div,{"data-side":We,"data-align":Qe,...$,ref:te,style:{...$.style,animation:et?void 0:"none"}})})})});A8.displayName=EM;var C8="PopperArrow",QQ={top:"bottom",right:"left",bottom:"top",left:"right"},E8=W.forwardRef(function(t,n){const{__scopePopper:r,...s}=t,h=JQ(C8,r),d=QQ[h.placedSide];return f.jsx("span",{ref:h.onArrowChange,style:{position:"absolute",left:h.arrowX,top:h.arrowY,[d]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[h.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[h.placedSide],visibility:h.shouldHideArrow?"hidden":void 0},children:f.jsx(KQ,{...s,ref:n,style:{...s.style,display:"block"}})})});E8.displayName=C8;function eee(e){return e!==null}var tee=e=>({name:"transformOrigin",options:e,fn(t){const{placement:n,rects:r,middlewareData:s}=t,d=s.arrow?.centerOffset!==0,o=d?0:e.arrowWidth,_=d?0:e.arrowHeight,[w,A]=j8(n),P={start:"0%",center:"50%",end:"100%"}[A],N=(s.arrow?.x??0)+o/2,z=(s.arrow?.y??0)+_/2;let q="",$="";return w==="bottom"?(q=d?P:`${N}px`,$=`${-_}px`):w==="top"?(q=d?P:`${N}px`,$=`${r.floating.height+_}px`):w==="right"?(q=`${-_}px`,$=d?P:`${z}px`):w==="left"&&(q=`${r.floating.width+_}px`,$=d?P:`${z}px`),{data:{x:q,y:$}}}});function j8(e){const[t,n="center"]=e.split("-");return[t,n]}var jM=S8,MM=P8,kM=A8,IM=E8;function nee(e){const t=ree(e),n=W.forwardRef((r,s)=>{const{children:h,...d}=r,o=W.Children.toArray(h),_=o.find(aee);if(_){const w=_.props.children,A=o.map(P=>P===_?W.Children.count(w)>1?W.Children.only(null):W.isValidElement(w)?w.props.children:null:P);return f.jsx(t,{...d,ref:s,children:W.isValidElement(w)?W.cloneElement(w,void 0,A):null})}return f.jsx(t,{...d,ref:s,children:h})});return n.displayName=`${e}.Slot`,n}function ree(e){const t=W.forwardRef((n,r)=>{const{children:s,...h}=n;if(W.isValidElement(s)){const d=see(s),o=oee(h,s.props);return s.type!==W.Fragment&&(o.ref=r?Sf(r,d):d),W.cloneElement(s,o)}return W.Children.count(s)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var iee=Symbol("radix.slottable");function aee(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===iee}function oee(e,t){const n={...t};for(const r in t){const s=e[r],h=t[r];/^on[A-Z]/.test(r)?s&&h?n[r]=(...o)=>{const _=h(...o);return s(...o),_}:s&&(n[r]=s):r==="style"?n[r]={...s,...h}:r==="className"&&(n[r]=[s,h].filter(Boolean).join(" "))}return{...e,...n}}function see(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var M8=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),lee="VisuallyHidden",k8=W.forwardRef((e,t)=>f.jsx(qn.span,{...e,ref:t,style:{...M8,...e.style}}));k8.displayName=lee;var cee=k8,uee=[" ","Enter","ArrowUp","ArrowDown"],dee=[" ","Enter"],Um="Select",[rw,iw,hee]=Y1(Um),[Xy]=Wl(Um,[hee,Ky]),aw=Ky(),[fee,Np]=Xy(Um),[pee,mee]=Xy(Um),I8=e=>{const{__scopeSelect:t,children:n,open:r,defaultOpen:s,onOpenChange:h,value:d,defaultValue:o,onValueChange:_,dir:w,name:A,autoComplete:P,disabled:N,required:z,form:q}=e,$=aw(t),[O,X]=W.useState(null),[K,te]=W.useState(null),[ne,H]=W.useState(!1),ae=Gy(w),[de,ye]=bd({prop:r,defaultProp:s??!1,onChange:h,caller:Um}),[Ae,_e]=bd({prop:d,defaultProp:o,onChange:_,caller:Um}),fe=W.useRef(null),Ee=O?q||!!O.closest("form"):!0,[Be,De]=W.useState(new Set),Je=Array.from(Be).map(Ve=>Ve.props.value).join(";");return f.jsx(jM,{...$,children:f.jsxs(fee,{required:z,scope:t,trigger:O,onTriggerChange:X,valueNode:K,onValueNodeChange:te,valueNodeHasChildren:ne,onValueNodeHasChildrenChange:H,contentId:vd(),value:Ae,onValueChange:_e,open:de,onOpenChange:ye,dir:ae,triggerPointerDownPosRef:fe,disabled:N,children:[f.jsx(rw.Provider,{scope:t,children:f.jsx(pee,{scope:e.__scopeSelect,onNativeOptionAdd:W.useCallback(Ve=>{De(et=>new Set(et).add(Ve))},[]),onNativeOptionRemove:W.useCallback(Ve=>{De(et=>{const Ce=new Set(et);return Ce.delete(Ve),Ce})},[]),children:n})}),Ee?f.jsxs(e$,{"aria-hidden":!0,required:z,tabIndex:-1,name:A,autoComplete:P,value:Ae,onChange:Ve=>_e(Ve.target.value),disabled:N,form:q,children:[Ae===void 0?f.jsx("option",{value:""}):null,Array.from(Be)]},Je):null]})})};I8.displayName=Um;var N8="SelectTrigger",D8=W.forwardRef((e,t)=>{const{__scopeSelect:n,disabled:r=!1,...s}=e,h=aw(n),d=Np(N8,n),o=d.disabled||r,_=gr(t,d.onTriggerChange),w=iw(n),A=W.useRef("touch"),[P,N,z]=n$($=>{const O=w().filter(te=>!te.disabled),X=O.find(te=>te.value===d.value),K=r$(O,$,X);K!==void 0&&d.onValueChange(K.value)}),q=$=>{o||(d.onOpenChange(!0),z()),$&&(d.triggerPointerDownPosRef.current={x:Math.round($.pageX),y:Math.round($.pageY)})};return f.jsx(MM,{asChild:!0,...h,children:f.jsx(qn.button,{type:"button",role:"combobox","aria-controls":d.contentId,"aria-expanded":d.open,"aria-required":d.required,"aria-autocomplete":"none",dir:d.dir,"data-state":d.open?"open":"closed",disabled:o,"data-disabled":o?"":void 0,"data-placeholder":t$(d.value)?"":void 0,...s,ref:_,onClick:dn(s.onClick,$=>{$.currentTarget.focus(),A.current!=="mouse"&&q($)}),onPointerDown:dn(s.onPointerDown,$=>{A.current=$.pointerType;const O=$.target;O.hasPointerCapture($.pointerId)&&O.releasePointerCapture($.pointerId),$.button===0&&$.ctrlKey===!1&&$.pointerType==="mouse"&&(q($),$.preventDefault())}),onKeyDown:dn(s.onKeyDown,$=>{const O=P.current!=="";!($.ctrlKey||$.altKey||$.metaKey)&&$.key.length===1&&N($.key),!(O&&$.key===" ")&&uee.includes($.key)&&(q(),$.preventDefault())})})})});D8.displayName=N8;var O8="SelectValue",R8=W.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,children:h,placeholder:d="",...o}=e,_=Np(O8,n),{onValueNodeHasChildrenChange:w}=_,A=h!==void 0,P=gr(t,_.onValueNodeChange);return js(()=>{w(A)},[w,A]),f.jsx(qn.span,{...o,ref:P,style:{pointerEvents:"none"},children:t$(_.value)?f.jsx(f.Fragment,{children:d}):h})});R8.displayName=O8;var gee="SelectIcon",L8=W.forwardRef((e,t)=>{const{__scopeSelect:n,children:r,...s}=e;return f.jsx(qn.span,{"aria-hidden":!0,...s,ref:t,children:r||""})});L8.displayName=gee;var yee="SelectPortal",z8=e=>f.jsx(p0,{asChild:!0,...e});z8.displayName=yee;var qm="SelectContent",F8=W.forwardRef((e,t)=>{const n=Np(qm,e.__scopeSelect),[r,s]=W.useState();if(js(()=>{s(new DocumentFragment)},[]),!n.open){const h=r;return h?h0.createPortal(f.jsx(B8,{scope:e.__scopeSelect,children:f.jsx(rw.Slot,{scope:e.__scopeSelect,children:f.jsx("div",{children:e.children})})}),h):null}return f.jsx($8,{...e,ref:t})});F8.displayName=qm;var hd=10,[B8,Dp]=Xy(qm),vee="SelectContentImpl",xee=nee("SelectContent.RemoveScroll"),$8=W.forwardRef((e,t)=>{const{__scopeSelect:n,position:r="item-aligned",onCloseAutoFocus:s,onEscapeKeyDown:h,onPointerDownOutside:d,side:o,sideOffset:_,align:w,alignOffset:A,arrowPadding:P,collisionBoundary:N,collisionPadding:z,sticky:q,hideWhenDetached:$,avoidCollisions:O,...X}=e,K=Np(qm,n),[te,ne]=W.useState(null),[H,ae]=W.useState(null),de=gr(t,Tt=>ne(Tt)),[ye,Ae]=W.useState(null),[_e,fe]=W.useState(null),Ee=iw(n),[Be,De]=W.useState(!1),Je=W.useRef(!1);W.useEffect(()=>{if(te)return hM(te)},[te]),dM();const Ve=W.useCallback(Tt=>{const[Ot,...rt]=Ee().map(dt=>dt.ref.current),[zt]=rt.slice(-1),Ut=document.activeElement;for(const dt of Tt)if(dt===Ut||(dt?.scrollIntoView({block:"nearest"}),dt===Ot&&H&&(H.scrollTop=0),dt===zt&&H&&(H.scrollTop=H.scrollHeight),dt?.focus(),document.activeElement!==Ut))return},[Ee,H]),et=W.useCallback(()=>Ve([ye,te]),[Ve,ye,te]);W.useEffect(()=>{Be&&et()},[Be,et]);const{onOpenChange:Ce,triggerPointerDownPosRef:We}=K;W.useEffect(()=>{if(te){let Tt={x:0,y:0};const Ot=zt=>{Tt={x:Math.abs(Math.round(zt.pageX)-(We.current?.x??0)),y:Math.abs(Math.round(zt.pageY)-(We.current?.y??0))}},rt=zt=>{Tt.x<=10&&Tt.y<=10?zt.preventDefault():te.contains(zt.target)||Ce(!1),document.removeEventListener("pointermove",Ot),We.current=null};return We.current!==null&&(document.addEventListener("pointermove",Ot),document.addEventListener("pointerup",rt,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",Ot),document.removeEventListener("pointerup",rt,{capture:!0})}}},[te,Ce,We]),W.useEffect(()=>{const Tt=()=>Ce(!1);return window.addEventListener("blur",Tt),window.addEventListener("resize",Tt),()=>{window.removeEventListener("blur",Tt),window.removeEventListener("resize",Tt)}},[Ce]);const[Qe,Re]=n$(Tt=>{const Ot=Ee().filter(Ut=>!Ut.disabled),rt=Ot.find(Ut=>Ut.ref.current===document.activeElement),zt=r$(Ot,Tt,rt);zt&&setTimeout(()=>zt.ref.current.focus())}),nt=W.useCallback((Tt,Ot,rt)=>{const zt=!Je.current&&!rt;(K.value!==void 0&&K.value===Ot||zt)&&(Ae(Tt),zt&&(Je.current=!0))},[K.value]),pt=W.useCallback(()=>te?.focus(),[te]),Ct=W.useCallback((Tt,Ot,rt)=>{const zt=!Je.current&&!rt;(K.value!==void 0&&K.value===Ot||zt)&&fe(Tt)},[K.value]),Mt=r==="popper"?YC:V8,Nt=Mt===YC?{side:o,sideOffset:_,align:w,alignOffset:A,arrowPadding:P,collisionBoundary:N,collisionPadding:z,sticky:q,hideWhenDetached:$,avoidCollisions:O}:{};return f.jsx(B8,{scope:n,content:te,viewport:H,onViewportChange:ae,itemRefCallback:nt,selectedItem:ye,onItemLeave:pt,itemTextRefCallback:Ct,focusSelectedItem:et,selectedItemText:_e,position:r,isPositioned:Be,searchRef:Qe,children:f.jsx(Z1,{as:xee,allowPinchZoom:!0,children:f.jsx(W1,{asChild:!0,trapped:K.open,onMountAutoFocus:Tt=>{Tt.preventDefault()},onUnmountAutoFocus:dn(s,Tt=>{K.trigger?.focus({preventScroll:!0}),Tt.preventDefault()}),children:f.jsx(f0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:Tt=>Tt.preventDefault(),onDismiss:()=>K.onOpenChange(!1),children:f.jsx(Mt,{role:"listbox",id:K.contentId,"data-state":K.open?"open":"closed",dir:K.dir,onContextMenu:Tt=>Tt.preventDefault(),...X,...Nt,onPlaced:()=>De(!0),ref:de,style:{display:"flex",flexDirection:"column",outline:"none",...X.style},onKeyDown:dn(X.onKeyDown,Tt=>{const Ot=Tt.ctrlKey||Tt.altKey||Tt.metaKey;if(Tt.key==="Tab"&&Tt.preventDefault(),!Ot&&Tt.key.length===1&&Re(Tt.key),["ArrowUp","ArrowDown","Home","End"].includes(Tt.key)){let zt=Ee().filter(Ut=>!Ut.disabled).map(Ut=>Ut.ref.current);if(["ArrowUp","End"].includes(Tt.key)&&(zt=zt.slice().reverse()),["ArrowUp","ArrowDown"].includes(Tt.key)){const Ut=Tt.target,dt=zt.indexOf(Ut);zt=zt.slice(dt+1)}setTimeout(()=>Ve(zt)),Tt.preventDefault()}})})})})})})});$8.displayName=vee;var _ee="SelectItemAlignedPosition",V8=W.forwardRef((e,t)=>{const{__scopeSelect:n,onPlaced:r,...s}=e,h=Np(qm,n),d=Dp(qm,n),[o,_]=W.useState(null),[w,A]=W.useState(null),P=gr(t,de=>A(de)),N=iw(n),z=W.useRef(!1),q=W.useRef(!0),{viewport:$,selectedItem:O,selectedItemText:X,focusSelectedItem:K}=d,te=W.useCallback(()=>{if(h.trigger&&h.valueNode&&o&&w&&$&&O&&X){const de=h.trigger.getBoundingClientRect(),ye=w.getBoundingClientRect(),Ae=h.valueNode.getBoundingClientRect(),_e=X.getBoundingClientRect();if(h.dir!=="rtl"){const Ut=_e.left-ye.left,dt=Ae.left-Ut,Rn=de.left-dt,cn=de.width+Rn,Hn=Math.max(cn,ye.width),Gn=window.innerWidth-hd,Mn=Tb(dt,[hd,Math.max(hd,Gn-Hn)]);o.style.minWidth=cn+"px",o.style.left=Mn+"px"}else{const Ut=ye.right-_e.right,dt=window.innerWidth-Ae.right-Ut,Rn=window.innerWidth-de.right-dt,cn=de.width+Rn,Hn=Math.max(cn,ye.width),Gn=window.innerWidth-hd,Mn=Tb(dt,[hd,Math.max(hd,Gn-Hn)]);o.style.minWidth=cn+"px",o.style.right=Mn+"px"}const fe=N(),Ee=window.innerHeight-hd*2,Be=$.scrollHeight,De=window.getComputedStyle(w),Je=parseInt(De.borderTopWidth,10),Ve=parseInt(De.paddingTop,10),et=parseInt(De.borderBottomWidth,10),Ce=parseInt(De.paddingBottom,10),We=Je+Ve+Be+Ce+et,Qe=Math.min(O.offsetHeight*5,We),Re=window.getComputedStyle($),nt=parseInt(Re.paddingTop,10),pt=parseInt(Re.paddingBottom,10),Ct=de.top+de.height/2-hd,Mt=Ee-Ct,Nt=O.offsetHeight/2,Tt=O.offsetTop+Nt,Ot=Je+Ve+Tt,rt=We-Ot;if(Ot<=Ct){const Ut=fe.length>0&&O===fe[fe.length-1].ref.current;o.style.bottom="0px";const dt=w.clientHeight-$.offsetTop-$.offsetHeight,Rn=Math.max(Mt,Nt+(Ut?pt:0)+dt+et),cn=Ot+Rn;o.style.height=cn+"px"}else{const Ut=fe.length>0&&O===fe[0].ref.current;o.style.top="0px";const Rn=Math.max(Ct,Je+$.offsetTop+(Ut?nt:0)+Nt)+rt;o.style.height=Rn+"px",$.scrollTop=Ot-Ct+$.offsetTop}o.style.margin=`${hd}px 0`,o.style.minHeight=Qe+"px",o.style.maxHeight=Ee+"px",r?.(),requestAnimationFrame(()=>z.current=!0)}},[N,h.trigger,h.valueNode,o,w,$,O,X,h.dir,r]);js(()=>te(),[te]);const[ne,H]=W.useState();js(()=>{w&&H(window.getComputedStyle(w).zIndex)},[w]);const ae=W.useCallback(de=>{de&&q.current===!0&&(te(),K?.(),q.current=!1)},[te,K]);return f.jsx(wee,{scope:n,contentWrapper:o,shouldExpandOnScrollRef:z,onScrollButtonChange:ae,children:f.jsx("div",{ref:_,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ne},children:f.jsx(qn.div,{...s,ref:P,style:{boxSizing:"border-box",maxHeight:"100%",...s.style}})})})});V8.displayName=_ee;var bee="SelectPopperPosition",YC=W.forwardRef((e,t)=>{const{__scopeSelect:n,align:r="start",collisionPadding:s=hd,...h}=e,d=aw(n);return f.jsx(kM,{...d,...h,ref:t,align:r,collisionPadding:s,style:{boxSizing:"border-box",...h.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});YC.displayName=bee;var[wee,NM]=Xy(qm,{}),JC="SelectViewport",U8=W.forwardRef((e,t)=>{const{__scopeSelect:n,nonce:r,...s}=e,h=Dp(JC,n),d=NM(JC,n),o=gr(t,h.onViewportChange),_=W.useRef(0);return f.jsxs(f.Fragment,{children:[f.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:r}),f.jsx(rw.Slot,{scope:n,children:f.jsx(qn.div,{"data-radix-select-viewport":"",role:"presentation",...s,ref:o,style:{position:"relative",flex:1,overflow:"hidden auto",...s.style},onScroll:dn(s.onScroll,w=>{const A=w.currentTarget,{contentWrapper:P,shouldExpandOnScrollRef:N}=d;if(N?.current&&P){const z=Math.abs(_.current-A.scrollTop);if(z>0){const q=window.innerHeight-hd*2,$=parseFloat(P.style.minHeight),O=parseFloat(P.style.height),X=Math.max($,O);if(X<q){const K=X+z,te=Math.min(q,K),ne=K-te;P.style.height=te+"px",P.style.bottom==="0px"&&(A.scrollTop=ne>0?ne:0,P.style.justifyContent="flex-end")}}}_.current=A.scrollTop})})})]})});U8.displayName=JC;var q8="SelectGroup",[See,Tee]=Xy(q8),Pee=W.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=vd();return f.jsx(See,{scope:n,id:s,children:f.jsx(qn.div,{role:"group","aria-labelledby":s,...r,ref:t})})});Pee.displayName=q8;var G8="SelectLabel",Aee=W.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=Tee(G8,n);return f.jsx(qn.div,{id:s.id,...r,ref:t})});Aee.displayName=G8;var jb="SelectItem",[Cee,W8]=Xy(jb),H8=W.forwardRef((e,t)=>{const{__scopeSelect:n,value:r,disabled:s=!1,textValue:h,...d}=e,o=Np(jb,n),_=Dp(jb,n),w=o.value===r,[A,P]=W.useState(h??""),[N,z]=W.useState(!1),q=gr(t,K=>_.itemRefCallback?.(K,r,s)),$=vd(),O=W.useRef("touch"),X=()=>{s||(o.onValueChange(r),o.onOpenChange(!1))};if(r==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return f.jsx(Cee,{scope:n,value:r,disabled:s,textId:$,isSelected:w,onItemTextChange:W.useCallback(K=>{P(te=>te||(K?.textContent??"").trim())},[]),children:f.jsx(rw.ItemSlot,{scope:n,value:r,disabled:s,textValue:A,children:f.jsx(qn.div,{role:"option","aria-labelledby":$,"data-highlighted":N?"":void 0,"aria-selected":w&&N,"data-state":w?"checked":"unchecked","aria-disabled":s||void 0,"data-disabled":s?"":void 0,tabIndex:s?void 0:-1,...d,ref:q,onFocus:dn(d.onFocus,()=>z(!0)),onBlur:dn(d.onBlur,()=>z(!1)),onClick:dn(d.onClick,()=>{O.current!=="mouse"&&X()}),onPointerUp:dn(d.onPointerUp,()=>{O.current==="mouse"&&X()}),onPointerDown:dn(d.onPointerDown,K=>{O.current=K.pointerType}),onPointerMove:dn(d.onPointerMove,K=>{O.current=K.pointerType,s?_.onItemLeave?.():O.current==="mouse"&&K.currentTarget.focus({preventScroll:!0})}),onPointerLeave:dn(d.onPointerLeave,K=>{K.currentTarget===document.activeElement&&_.onItemLeave?.()}),onKeyDown:dn(d.onKeyDown,K=>{_.searchRef?.current!==""&&K.key===" "||(dee.includes(K.key)&&X(),K.key===" "&&K.preventDefault())})})})})});H8.displayName=jb;var tx="SelectItemText",Z8=W.forwardRef((e,t)=>{const{__scopeSelect:n,className:r,style:s,...h}=e,d=Np(tx,n),o=Dp(tx,n),_=W8(tx,n),w=mee(tx,n),[A,P]=W.useState(null),N=gr(t,X=>P(X),_.onItemTextChange,X=>o.itemTextRefCallback?.(X,_.value,_.disabled)),z=A?.textContent,q=W.useMemo(()=>f.jsx("option",{value:_.value,disabled:_.disabled,children:z},_.value),[_.disabled,_.value,z]),{onNativeOptionAdd:$,onNativeOptionRemove:O}=w;return js(()=>($(q),()=>O(q)),[$,O,q]),f.jsxs(f.Fragment,{children:[f.jsx(qn.span,{id:_.textId,...h,ref:N}),_.isSelected&&d.valueNode&&!d.valueNodeHasChildren?h0.createPortal(h.children,d.valueNode):null]})});Z8.displayName=tx;var K8="SelectItemIndicator",X8=W.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return W8(K8,n).isSelected?f.jsx(qn.span,{"aria-hidden":!0,...r,ref:t}):null});X8.displayName=K8;var QC="SelectScrollUpButton",Y8=W.forwardRef((e,t)=>{const n=Dp(QC,e.__scopeSelect),r=NM(QC,e.__scopeSelect),[s,h]=W.useState(!1),d=gr(t,r.onScrollButtonChange);return js(()=>{if(n.viewport&&n.isPositioned){let o=function(){const w=_.scrollTop>0;h(w)};const _=n.viewport;return o(),_.addEventListener("scroll",o),()=>_.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?f.jsx(Q8,{...e,ref:d,onAutoScroll:()=>{const{viewport:o,selectedItem:_}=n;o&&_&&(o.scrollTop=o.scrollTop-_.offsetHeight)}}):null});Y8.displayName=QC;var eE="SelectScrollDownButton",J8=W.forwardRef((e,t)=>{const n=Dp(eE,e.__scopeSelect),r=NM(eE,e.__scopeSelect),[s,h]=W.useState(!1),d=gr(t,r.onScrollButtonChange);return js(()=>{if(n.viewport&&n.isPositioned){let o=function(){const w=_.scrollHeight-_.clientHeight,A=Math.ceil(_.scrollTop)<w;h(A)};const _=n.viewport;return o(),_.addEventListener("scroll",o),()=>_.removeEventListener("scroll",o)}},[n.viewport,n.isPositioned]),s?f.jsx(Q8,{...e,ref:d,onAutoScroll:()=>{const{viewport:o,selectedItem:_}=n;o&&_&&(o.scrollTop=o.scrollTop+_.offsetHeight)}}):null});J8.displayName=eE;var Q8=W.forwardRef((e,t)=>{const{__scopeSelect:n,onAutoScroll:r,...s}=e,h=Dp("SelectScrollButton",n),d=W.useRef(null),o=iw(n),_=W.useCallback(()=>{d.current!==null&&(window.clearInterval(d.current),d.current=null)},[]);return W.useEffect(()=>()=>_(),[_]),js(()=>{o().find(A=>A.ref.current===document.activeElement)?.ref.current?.scrollIntoView({block:"nearest"})},[o]),f.jsx(qn.div,{"aria-hidden":!0,...s,ref:t,style:{flexShrink:0,...s.style},onPointerDown:dn(s.onPointerDown,()=>{d.current===null&&(d.current=window.setInterval(r,50))}),onPointerMove:dn(s.onPointerMove,()=>{h.onItemLeave?.(),d.current===null&&(d.current=window.setInterval(r,50))}),onPointerLeave:dn(s.onPointerLeave,()=>{_()})})}),Eee="SelectSeparator",jee=W.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e;return f.jsx(qn.div,{"aria-hidden":!0,...r,ref:t})});jee.displayName=Eee;var tE="SelectArrow",Mee=W.forwardRef((e,t)=>{const{__scopeSelect:n,...r}=e,s=aw(n),h=Np(tE,n),d=Dp(tE,n);return h.open&&d.position==="popper"?f.jsx(IM,{...s,...r,ref:t}):null});Mee.displayName=tE;var kee="SelectBubbleInput",e$=W.forwardRef(({__scopeSelect:e,value:t,...n},r)=>{const s=W.useRef(null),h=gr(r,s),d=m0(t);return W.useEffect(()=>{const o=s.current;if(!o)return;const _=window.HTMLSelectElement.prototype,A=Object.getOwnPropertyDescriptor(_,"value").set;if(d!==t&&A){const P=new Event("change",{bubbles:!0});A.call(o,t),o.dispatchEvent(P)}},[d,t]),f.jsx(qn.select,{...n,style:{...M8,...n.style},ref:h,defaultValue:t})});e$.displayName=kee;function t$(e){return e===""||e===void 0}function n$(e){const t=vh(e),n=W.useRef(""),r=W.useRef(0),s=W.useCallback(d=>{const o=n.current+d;t(o),(function _(w){n.current=w,window.clearTimeout(r.current),w!==""&&(r.current=window.setTimeout(()=>_(""),1e3))})(o)},[t]),h=W.useCallback(()=>{n.current="",window.clearTimeout(r.current)},[]);return W.useEffect(()=>()=>window.clearTimeout(r.current),[]),[n,s,h]}function r$(e,t,n){const s=t.length>1&&Array.from(t).every(w=>w===t[0])?t[0]:t,h=n?e.indexOf(n):-1;let d=Iee(e,Math.max(h,0));s.length===1&&(d=d.filter(w=>w!==n));const _=d.find(w=>w.textValue.toLowerCase().startsWith(s.toLowerCase()));return _!==n?_:void 0}function Iee(e,t){return e.map((n,r)=>e[(t+r)%e.length])}var Nee=I8,Dee=D8,Oee=R8,Ree=L8,Lee=z8,zee=F8,Fee=U8,Bee=H8,$ee=Z8,Vee=X8,Uee=Y8,qee=J8;function Gm({...e}){return f.jsx(Nee,{"data-slot":"select",...e})}function Wm({...e}){return f.jsx(Oee,{"data-slot":"select-value",...e})}function Hm({className:e,size:t="default",children:n,...r}){return f.jsxs(Dee,{"data-slot":"select-trigger","data-size":t,className:or("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 dark:hover:bg-input/50 flex w-full items-center justify-between gap-2 rounded-md border bg-input-background px-3 py-2 text-sm whitespace-nowrap transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 data-[size=default]:h-9 data-[size=sm]:h-8 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...r,children:[n,f.jsx(Ree,{asChild:!0,children:f.jsx(gb,{className:"size-4 opacity-50"})})]})}function Zm({className:e,children:t,position:n="popper",...r}){return f.jsx(Lee,{children:f.jsxs(zee,{"data-slot":"select-content",className:or("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-(--radix-select-content-available-height) min-w-[8rem] origin-(--radix-select-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border shadow-md",n==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",e),position:n,...r,children:[f.jsx(Gee,{}),f.jsx(Fee,{className:or("p-1",n==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1"),children:t}),f.jsx(Wee,{})]})})}function Ir({className:e,children:t,...n}){return f.jsxs(Bee,{"data-slot":"select-item",className:or("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",e),...n,children:[f.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:f.jsx(Vee,{children:f.jsx(d0,{className:"size-4"})})}),f.jsx($ee,{children:t})]})}function Gee({className:e,...t}){return f.jsx(Uee,{"data-slot":"select-scroll-up-button",className:or("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(OC,{className:"size-4"})})}function Wee({className:e,...t}){return f.jsx(qee,{"data-slot":"select-scroll-down-button",className:or("flex cursor-default items-center justify-center py-1",e),...t,children:f.jsx(gb,{className:"size-4"})})}function Hee(e,t=[]){let n=[];function r(h,d){const o=W.createContext(d);o.displayName=h+"Context";const _=n.length;n=[...n,d];const w=P=>{const{scope:N,children:z,...q}=P,$=N?.[e]?.[_]||o,O=W.useMemo(()=>q,Object.values(q));return f.jsx($.Provider,{value:O,children:z})};w.displayName=h+"Provider";function A(P,N){const z=N?.[e]?.[_]||o,q=W.useContext(z);if(q)return q;if(d!==void 0)return d;throw new Error(`\`${P}\` must be used within \`${h}\``)}return[w,A]}const s=()=>{const h=n.map(d=>W.createContext(d));return function(o){const _=o?.[e]||h;return W.useMemo(()=>({[`__scope${e}`]:{...o,[e]:_}}),[o,_])}};return s.scopeName=e,[r,Zee(s,...t)]}function Zee(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(h){const d=r.reduce((o,{useScope:_,scopeName:w})=>{const P=_(h)[`__scope${w}`];return{...o,...P}},{});return W.useMemo(()=>({[`__scope${t.scopeName}`]:d}),[d])}};return n.scopeName=t.scopeName,n}var Kee=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],i$=Kee.reduce((e,t)=>{const n=cM(`Primitive.${t}`),r=W.forwardRef((s,h)=>{const{asChild:d,...o}=s,_=d?n:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),f.jsx(_,{...o,ref:h})});return r.displayName=`Primitive.${t}`,{...e,[t]:r}},{}),DM="Progress",OM=100,[Xee]=Hee(DM),[Yee,Jee]=Xee(DM),a$=W.forwardRef((e,t)=>{const{__scopeProgress:n,value:r=null,max:s,getValueLabel:h=Qee,...d}=e;(s||s===0)&&!KD(s)&&console.error(ete(`${s}`,"Progress"));const o=KD(s)?s:OM;r!==null&&!XD(r,o)&&console.error(tte(`${r}`,"Progress"));const _=XD(r,o)?r:null,w=Mb(_)?h(_,o):void 0;return f.jsx(Yee,{scope:n,value:_,max:o,children:f.jsx(i$.div,{"aria-valuemax":o,"aria-valuemin":0,"aria-valuenow":Mb(_)?_:void 0,"aria-valuetext":w,role:"progressbar","data-state":l$(_,o),"data-value":_??void 0,"data-max":o,...d,ref:t})})});a$.displayName=DM;var o$="ProgressIndicator",s$=W.forwardRef((e,t)=>{const{__scopeProgress:n,...r}=e,s=Jee(o$,n);return f.jsx(i$.div,{"data-state":l$(s.value,s.max),"data-value":s.value??void 0,"data-max":s.max,...r,ref:t})});s$.displayName=o$;function Qee(e,t){return`${Math.round(e/t*100)}%`}function l$(e,t){return e==null?"indeterminate":e===t?"complete":"loading"}function Mb(e){return typeof e=="number"}function KD(e){return Mb(e)&&!isNaN(e)&&e>0}function XD(e,t){return Mb(e)&&!isNaN(e)&&e<=t&&e>=0}function ete(e,t){return`Invalid prop \`max\` of value \`${e}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${OM}\`.`}function tte(e,t){return`Invalid prop \`value\` of value \`${e}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${OM} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var nte=a$,rte=s$;function qg({className:e,value:t,...n}){return f.jsx(nte,{"data-slot":"progress",className:or("bg-primary/20 relative h-2 w-full overflow-hidden rounded-full",e),...n,children:f.jsx(rte,{"data-slot":"progress-indicator",className:"bg-primary h-full w-full flex-1 transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})})}function ite(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}const ate=e=>{switch(e){case"success":return lte;case"info":return ute;case"warning":return cte;case"error":return dte;default:return null}},ote=Array(12).fill(0),ste=({visible:e,className:t})=>je.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":e},je.createElement("div",{className:"sonner-spinner"},ote.map((n,r)=>je.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${r}`})))),lte=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),cte=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),ute=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),dte=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},je.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),hte=je.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},je.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),je.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),fte=()=>{const[e,t]=je.useState(document.hidden);return je.useEffect(()=>{const n=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",n),()=>window.removeEventListener("visibilitychange",n)},[]),e};let nE=1;class pte{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const n=this.subscribers.indexOf(t);this.subscribers.splice(n,1)}),this.publish=t=>{this.subscribers.forEach(n=>n(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var n;const{message:r,...s}=t,h=typeof t?.id=="number"||((n=t.id)==null?void 0:n.length)>0?t.id:nE++,d=this.toasts.find(_=>_.id===h),o=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(h)&&this.dismissedToasts.delete(h),d?this.toasts=this.toasts.map(_=>_.id===h?(this.publish({..._,...t,id:h,title:r}),{..._,...t,id:h,dismissible:o,title:r}):_):this.addToast({title:r,...s,dismissible:o,id:h}),h},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(n=>n({id:t,dismiss:!0})))):this.toasts.forEach(n=>{this.subscribers.forEach(r=>r({id:n.id,dismiss:!0}))}),t),this.message=(t,n)=>this.create({...n,message:t}),this.error=(t,n)=>this.create({...n,message:t,type:"error"}),this.success=(t,n)=>this.create({...n,type:"success",message:t}),this.info=(t,n)=>this.create({...n,type:"info",message:t}),this.warning=(t,n)=>this.create({...n,type:"warning",message:t}),this.loading=(t,n)=>this.create({...n,type:"loading",message:t}),this.promise=(t,n)=>{if(!n)return;let r;n.loading!==void 0&&(r=this.create({...n,promise:t,type:"loading",message:n.loading,description:typeof n.description!="function"?n.description:void 0}));const s=Promise.resolve(t instanceof Function?t():t);let h=r!==void 0,d;const o=s.then(async w=>{if(d=["resolve",w],je.isValidElement(w))h=!1,this.create({id:r,type:"default",message:w});else if(gte(w)&&!w.ok){h=!1;const P=typeof n.error=="function"?await n.error(`HTTP error! status: ${w.status}`):n.error,N=typeof n.description=="function"?await n.description(`HTTP error! status: ${w.status}`):n.description,q=typeof P=="object"&&!je.isValidElement(P)?P:{message:P};this.create({id:r,type:"error",description:N,...q})}else if(w instanceof Error){h=!1;const P=typeof n.error=="function"?await n.error(w):n.error,N=typeof n.description=="function"?await n.description(w):n.description,q=typeof P=="object"&&!je.isValidElement(P)?P:{message:P};this.create({id:r,type:"error",description:N,...q})}else if(n.success!==void 0){h=!1;const P=typeof n.success=="function"?await n.success(w):n.success,N=typeof n.description=="function"?await n.description(w):n.description,q=typeof P=="object"&&!je.isValidElement(P)?P:{message:P};this.create({id:r,type:"success",description:N,...q})}}).catch(async w=>{if(d=["reject",w],n.error!==void 0){h=!1;const A=typeof n.error=="function"?await n.error(w):n.error,P=typeof n.description=="function"?await n.description(w):n.description,z=typeof A=="object"&&!je.isValidElement(A)?A:{message:A};this.create({id:r,type:"error",description:P,...z})}}).finally(()=>{h&&(this.dismiss(r),r=void 0),n.finally==null||n.finally.call(n)}),_=()=>new Promise((w,A)=>o.then(()=>d[0]==="reject"?A(d[1]):w(d[1])).catch(A));return typeof r!="string"&&typeof r!="number"?{unwrap:_}:Object.assign(r,{unwrap:_})},this.custom=(t,n)=>{const r=n?.id||nE++;return this.create({jsx:t(r),id:r,...n}),r},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const ql=new pte,mte=(e,t)=>{const n=t?.id||nE++;return ql.addToast({title:e,...t,id:n}),n},gte=e=>e&&typeof e=="object"&&"ok"in e&&typeof e.ok=="boolean"&&"status"in e&&typeof e.status=="number",yte=mte,vte=()=>ql.toasts,xte=()=>ql.getActiveToasts(),pp=Object.assign(yte,{success:ql.success,info:ql.info,warning:ql.warning,error:ql.error,custom:ql.custom,message:ql.message,promise:ql.promise,dismiss:ql.dismiss,loading:ql.loading},{getHistory:vte,getToasts:xte});ite("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function D_(e){return e.label!==void 0}const _te=3,bte="24px",wte="16px",YD=4e3,Ste=356,Tte=14,Pte=45,Ate=200;function rh(...e){return e.filter(Boolean).join(" ")}function Cte(e){const[t,n]=e.split("-"),r=[];return t&&r.push(t),n&&r.push(n),r}const Ete=e=>{var t,n,r,s,h,d,o,_,w;const{invert:A,toast:P,unstyled:N,interacting:z,setHeights:q,visibleToasts:$,heights:O,index:X,toasts:K,expanded:te,removeToast:ne,defaultRichColors:H,closeButton:ae,style:de,cancelButtonStyle:ye,actionButtonStyle:Ae,className:_e="",descriptionClassName:fe="",duration:Ee,position:Be,gap:De,expandByDefault:Je,classNames:Ve,icons:et,closeButtonAriaLabel:Ce="Close toast"}=e,[We,Qe]=je.useState(null),[Re,nt]=je.useState(null),[pt,Ct]=je.useState(!1),[Mt,Nt]=je.useState(!1),[Tt,Ot]=je.useState(!1),[rt,zt]=je.useState(!1),[Ut,dt]=je.useState(!1),[Rn,cn]=je.useState(0),[Hn,Gn]=je.useState(0),Mn=je.useRef(P.duration||Ee||YD),Nr=je.useRef(null),Fr=je.useRef(null),xi=X===0,Br=X+1<=$,hr=P.type,ri=P.dismissible!==!1,wa=P.className||"",_i=P.descriptionClassName||"",Sa=je.useMemo(()=>O.findIndex(Bt=>Bt.toastId===P.id)||0,[O,P.id]),Ta=je.useMemo(()=>{var Bt;return(Bt=P.closeButton)!=null?Bt:ae},[P.closeButton,ae]),Pa=je.useMemo(()=>P.duration||Ee||YD,[P.duration,Ee]),Ya=je.useRef(0),gi=je.useRef(0),it=je.useRef(0),ee=je.useRef(null),[ue,ve]=Be.split("-"),Oe=je.useMemo(()=>O.reduce((Bt,gn,on)=>on>=Sa?Bt:Bt+gn.height,0),[O,Sa]),$e=fte(),ct=P.invert||A,ut=hr==="loading";gi.current=je.useMemo(()=>Sa*De+Oe,[Sa,Oe]),je.useEffect(()=>{Mn.current=Pa},[Pa]),je.useEffect(()=>{Ct(!0)},[]),je.useEffect(()=>{const Bt=Fr.current;if(Bt){const gn=Bt.getBoundingClientRect().height;return Gn(gn),q(on=>[{toastId:P.id,height:gn,position:P.position},...on]),()=>q(on=>on.filter(hn=>hn.toastId!==P.id))}},[q,P.id]),je.useLayoutEffect(()=>{if(!pt)return;const Bt=Fr.current,gn=Bt.style.height;Bt.style.height="auto";const on=Bt.getBoundingClientRect().height;Bt.style.height=gn,Gn(on),q(hn=>hn.find(pn=>pn.toastId===P.id)?hn.map(pn=>pn.toastId===P.id?{...pn,height:on}:pn):[{toastId:P.id,height:on,position:P.position},...hn])},[pt,P.title,P.description,q,P.id,P.jsx,P.action,P.cancel]);const at=je.useCallback(()=>{Nt(!0),cn(gi.current),q(Bt=>Bt.filter(gn=>gn.toastId!==P.id)),setTimeout(()=>{ne(P)},Ate)},[P,ne,q,gi]);je.useEffect(()=>{if(P.promise&&hr==="loading"||P.duration===1/0||P.type==="loading")return;let Bt;return te||z||$e?(()=>{if(it.current<Ya.current){const hn=new Date().getTime()-Ya.current;Mn.current=Mn.current-hn}it.current=new Date().getTime()})():(()=>{Mn.current!==1/0&&(Ya.current=new Date().getTime(),Bt=setTimeout(()=>{P.onAutoClose==null||P.onAutoClose.call(P,P),at()},Mn.current))})(),()=>clearTimeout(Bt)},[te,z,P,hr,$e,at]),je.useEffect(()=>{P.delete&&(at(),P.onDismiss==null||P.onDismiss.call(P,P))},[at,P.delete]);function ft(){var Bt;if(et?.loading){var gn;return je.createElement("div",{className:rh(Ve?.loader,P==null||(gn=P.classNames)==null?void 0:gn.loader,"sonner-loader"),"data-visible":hr==="loading"},et.loading)}return je.createElement(ste,{className:rh(Ve?.loader,P==null||(Bt=P.classNames)==null?void 0:Bt.loader),visible:hr==="loading"})}const Dt=P.icon||et?.[hr]||ate(hr);var St,Ke;return je.createElement("li",{tabIndex:0,ref:Fr,className:rh(_e,wa,Ve?.toast,P==null||(t=P.classNames)==null?void 0:t.toast,Ve?.default,Ve?.[hr],P==null||(n=P.classNames)==null?void 0:n[hr]),"data-sonner-toast":"","data-rich-colors":(St=P.richColors)!=null?St:H,"data-styled":!(P.jsx||P.unstyled||N),"data-mounted":pt,"data-promise":!!P.promise,"data-swiped":Ut,"data-removed":Mt,"data-visible":Br,"data-y-position":ue,"data-x-position":ve,"data-index":X,"data-front":xi,"data-swiping":Tt,"data-dismissible":ri,"data-type":hr,"data-invert":ct,"data-swipe-out":rt,"data-swipe-direction":Re,"data-expanded":!!(te||Je&&pt),"data-testid":P.testId,style:{"--index":X,"--toasts-before":X,"--z-index":K.length-X,"--offset":`${Mt?Rn:gi.current}px`,"--initial-height":Je?"auto":`${Hn}px`,...de,...P.style},onDragEnd:()=>{Ot(!1),Qe(null),ee.current=null},onPointerDown:Bt=>{Bt.button!==2&&(ut||!ri||(Nr.current=new Date,cn(gi.current),Bt.target.setPointerCapture(Bt.pointerId),Bt.target.tagName!=="BUTTON"&&(Ot(!0),ee.current={x:Bt.clientX,y:Bt.clientY})))},onPointerUp:()=>{var Bt,gn,on;if(rt||!ri)return;ee.current=null;const hn=Number(((Bt=Fr.current)==null?void 0:Bt.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),bn=Number(((gn=Fr.current)==null?void 0:gn.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),pn=new Date().getTime()-((on=Nr.current)==null?void 0:on.getTime()),er=We==="x"?hn:bn,Cr=Math.abs(er)/pn;if(Math.abs(er)>=Pte||Cr>.11){cn(gi.current),P.onDismiss==null||P.onDismiss.call(P,P),nt(We==="x"?hn>0?"right":"left":bn>0?"down":"up"),at(),zt(!0);return}else{var cr,Dr;(cr=Fr.current)==null||cr.style.setProperty("--swipe-amount-x","0px"),(Dr=Fr.current)==null||Dr.style.setProperty("--swipe-amount-y","0px")}dt(!1),Ot(!1),Qe(null)},onPointerMove:Bt=>{var gn,on,hn;if(!ee.current||!ri||((gn=window.getSelection())==null?void 0:gn.toString().length)>0)return;const pn=Bt.clientY-ee.current.y,er=Bt.clientX-ee.current.x;var Cr;const cr=(Cr=e.swipeDirections)!=null?Cr:Cte(Be);!We&&(Math.abs(er)>1||Math.abs(pn)>1)&&Qe(Math.abs(er)>Math.abs(pn)?"x":"y");let Dr={x:0,y:0};const ur=ht=>1/(1.5+Math.abs(ht)/20);if(We==="y"){if(cr.includes("top")||cr.includes("bottom"))if(cr.includes("top")&&pn<0||cr.includes("bottom")&&pn>0)Dr.y=pn;else{const ht=pn*ur(pn);Dr.y=Math.abs(ht)<Math.abs(pn)?ht:pn}}else if(We==="x"&&(cr.includes("left")||cr.includes("right")))if(cr.includes("left")&&er<0||cr.includes("right")&&er>0)Dr.x=er;else{const ht=er*ur(er);Dr.x=Math.abs(ht)<Math.abs(er)?ht:er}(Math.abs(Dr.x)>0||Math.abs(Dr.y)>0)&&dt(!0),(on=Fr.current)==null||on.style.setProperty("--swipe-amount-x",`${Dr.x}px`),(hn=Fr.current)==null||hn.style.setProperty("--swipe-amount-y",`${Dr.y}px`)}},Ta&&!P.jsx&&hr!=="loading"?je.createElement("button",{"aria-label":Ce,"data-disabled":ut,"data-close-button":!0,onClick:ut||!ri?()=>{}:()=>{at(),P.onDismiss==null||P.onDismiss.call(P,P)},className:rh(Ve?.closeButton,P==null||(r=P.classNames)==null?void 0:r.closeButton)},(Ke=et?.close)!=null?Ke:hte):null,(hr||P.icon||P.promise)&&P.icon!==null&&(et?.[hr]!==null||P.icon)?je.createElement("div",{"data-icon":"",className:rh(Ve?.icon,P==null||(s=P.classNames)==null?void 0:s.icon)},P.promise||P.type==="loading"&&!P.icon?P.icon||ft():null,P.type!=="loading"?Dt:null):null,je.createElement("div",{"data-content":"",className:rh(Ve?.content,P==null||(h=P.classNames)==null?void 0:h.content)},je.createElement("div",{"data-title":"",className:rh(Ve?.title,P==null||(d=P.classNames)==null?void 0:d.title)},P.jsx?P.jsx:typeof P.title=="function"?P.title():P.title),P.description?je.createElement("div",{"data-description":"",className:rh(fe,_i,Ve?.description,P==null||(o=P.classNames)==null?void 0:o.description)},typeof P.description=="function"?P.description():P.description):null),je.isValidElement(P.cancel)?P.cancel:P.cancel&&D_(P.cancel)?je.createElement("button",{"data-button":!0,"data-cancel":!0,style:P.cancelButtonStyle||ye,onClick:Bt=>{D_(P.cancel)&&ri&&(P.cancel.onClick==null||P.cancel.onClick.call(P.cancel,Bt),at())},className:rh(Ve?.cancelButton,P==null||(_=P.classNames)==null?void 0:_.cancelButton)},P.cancel.label):null,je.isValidElement(P.action)?P.action:P.action&&D_(P.action)?je.createElement("button",{"data-button":!0,"data-action":!0,style:P.actionButtonStyle||Ae,onClick:Bt=>{D_(P.action)&&(P.action.onClick==null||P.action.onClick.call(P.action,Bt),!Bt.defaultPrevented&&at())},className:rh(Ve?.actionButton,P==null||(w=P.classNames)==null?void 0:w.actionButton)},P.action.label):null)};function JD(){if(typeof window>"u"||typeof document>"u")return"ltr";const e=document.documentElement.getAttribute("dir");return e==="auto"||!e?window.getComputedStyle(document.documentElement).direction:e}function jte(e,t){const n={};return[e,t].forEach((r,s)=>{const h=s===1,d=h?"--mobile-offset":"--offset",o=h?wte:bte;function _(w){["top","right","bottom","left"].forEach(A=>{n[`${d}-${A}`]=typeof w=="number"?`${w}px`:w})}typeof r=="number"||typeof r=="string"?_(r):typeof r=="object"?["top","right","bottom","left"].forEach(w=>{r[w]===void 0?n[`${d}-${w}`]=o:n[`${d}-${w}`]=typeof r[w]=="number"?`${r[w]}px`:r[w]}):_(o)}),n}const Mte=je.forwardRef(function(t,n){const{id:r,invert:s,position:h="bottom-right",hotkey:d=["altKey","KeyT"],expand:o,closeButton:_,className:w,offset:A,mobileOffset:P,theme:N="light",richColors:z,duration:q,style:$,visibleToasts:O=_te,toastOptions:X,dir:K=JD(),gap:te=Tte,icons:ne,containerAriaLabel:H="Notifications"}=t,[ae,de]=je.useState([]),ye=je.useMemo(()=>r?ae.filter(pt=>pt.toasterId===r):ae.filter(pt=>!pt.toasterId),[ae,r]),Ae=je.useMemo(()=>Array.from(new Set([h].concat(ye.filter(pt=>pt.position).map(pt=>pt.position)))),[ye,h]),[_e,fe]=je.useState([]),[Ee,Be]=je.useState(!1),[De,Je]=je.useState(!1),[Ve,et]=je.useState(N!=="system"?N:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),Ce=je.useRef(null),We=d.join("+").replace(/Key/g,"").replace(/Digit/g,""),Qe=je.useRef(null),Re=je.useRef(!1),nt=je.useCallback(pt=>{de(Ct=>{var Mt;return(Mt=Ct.find(Nt=>Nt.id===pt.id))!=null&&Mt.delete||ql.dismiss(pt.id),Ct.filter(({id:Nt})=>Nt!==pt.id)})},[]);return je.useEffect(()=>ql.subscribe(pt=>{if(pt.dismiss){requestAnimationFrame(()=>{de(Ct=>Ct.map(Mt=>Mt.id===pt.id?{...Mt,delete:!0}:Mt))});return}setTimeout(()=>{YB.flushSync(()=>{de(Ct=>{const Mt=Ct.findIndex(Nt=>Nt.id===pt.id);return Mt!==-1?[...Ct.slice(0,Mt),{...Ct[Mt],...pt},...Ct.slice(Mt+1)]:[pt,...Ct]})})})}),[ae]),je.useEffect(()=>{if(N!=="system"){et(N);return}if(N==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?et("dark"):et("light")),typeof window>"u")return;const pt=window.matchMedia("(prefers-color-scheme: dark)");try{pt.addEventListener("change",({matches:Ct})=>{et(Ct?"dark":"light")})}catch{pt.addListener(({matches:Mt})=>{try{et(Mt?"dark":"light")}catch(Nt){console.error(Nt)}})}},[N]),je.useEffect(()=>{ae.length<=1&&Be(!1)},[ae]),je.useEffect(()=>{const pt=Ct=>{var Mt;if(d.every(Ot=>Ct[Ot]||Ct.code===Ot)){var Tt;Be(!0),(Tt=Ce.current)==null||Tt.focus()}Ct.code==="Escape"&&(document.activeElement===Ce.current||(Mt=Ce.current)!=null&&Mt.contains(document.activeElement))&&Be(!1)};return document.addEventListener("keydown",pt),()=>document.removeEventListener("keydown",pt)},[d]),je.useEffect(()=>{if(Ce.current)return()=>{Qe.current&&(Qe.current.focus({preventScroll:!0}),Qe.current=null,Re.current=!1)}},[Ce.current]),je.createElement("section",{ref:n,"aria-label":`${H} ${We}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Ae.map((pt,Ct)=>{var Mt;const[Nt,Tt]=pt.split("-");return ye.length?je.createElement("ol",{key:pt,dir:K==="auto"?JD():K,tabIndex:-1,ref:Ce,className:w,"data-sonner-toaster":!0,"data-sonner-theme":Ve,"data-y-position":Nt,"data-x-position":Tt,style:{"--front-toast-height":`${((Mt=_e[0])==null?void 0:Mt.height)||0}px`,"--width":`${Ste}px`,"--gap":`${te}px`,...$,...jte(A,P)},onBlur:Ot=>{Re.current&&!Ot.currentTarget.contains(Ot.relatedTarget)&&(Re.current=!1,Qe.current&&(Qe.current.focus({preventScroll:!0}),Qe.current=null))},onFocus:Ot=>{Ot.target instanceof HTMLElement&&Ot.target.dataset.dismissible==="false"||Re.current||(Re.current=!0,Qe.current=Ot.relatedTarget)},onMouseEnter:()=>Be(!0),onMouseMove:()=>Be(!0),onMouseLeave:()=>{De||Be(!1)},onDragEnd:()=>Be(!1),onPointerDown:Ot=>{Ot.target instanceof HTMLElement&&Ot.target.dataset.dismissible==="false"||Je(!0)},onPointerUp:()=>Je(!1)},ye.filter(Ot=>!Ot.position&&Ct===0||Ot.position===pt).map((Ot,rt)=>{var zt,Ut;return je.createElement(Ete,{key:Ot.id,icons:ne,index:rt,toast:Ot,defaultRichColors:z,duration:(zt=X?.duration)!=null?zt:q,className:X?.className,descriptionClassName:X?.descriptionClassName,invert:s,visibleToasts:O,closeButton:(Ut=X?.closeButton)!=null?Ut:_,interacting:De,position:pt,style:X?.style,unstyled:X?.unstyled,classNames:X?.classNames,cancelButtonStyle:X?.cancelButtonStyle,actionButtonStyle:X?.actionButtonStyle,closeButtonAriaLabel:X?.closeButtonAriaLabel,removeToast:nt,toasts:ye.filter(dt=>dt.position==Ot.position),heights:_e.filter(dt=>dt.position==Ot.position),setHeights:fe,expandByDefault:o,gap:te,expanded:Ee,swipeDirections:t.swipeDirections})})):null}))});var nx={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var kte=nx.exports,QD;function Ite(){return QD||(QD=1,(function(e,t){(function(n,r){r(t)})(kte,(function(n){var r="1.9.4";function s(g){var E,R,J,he;for(R=1,J=arguments.length;R<J;R++){he=arguments[R];for(E in he)g[E]=he[E]}return g}var h=Object.create||(function(){function g(){}return function(E){return g.prototype=E,new g}})();function d(g,E){var R=Array.prototype.slice;if(g.bind)return g.bind.apply(g,R.call(arguments,1));var J=R.call(arguments,2);return function(){return g.apply(E,J.length?J.concat(R.call(arguments)):arguments)}}var o=0;function _(g){return"_leaflet_id"in g||(g._leaflet_id=++o),g._leaflet_id}function w(g,E,R){var J,he,Te,Xe;return Xe=function(){J=!1,he&&(Te.apply(R,he),he=!1)},Te=function(){J?he=arguments:(g.apply(R,arguments),setTimeout(Xe,E),J=!0)},Te}function A(g,E,R){var J=E[1],he=E[0],Te=J-he;return g===J&&R?g:((g-he)%Te+Te)%Te+he}function P(){return!1}function N(g,E){if(E===!1)return g;var R=Math.pow(10,E===void 0?6:E);return Math.round(g*R)/R}function z(g){return g.trim?g.trim():g.replace(/^\s+|\s+$/g,"")}function q(g){return z(g).split(/\s+/)}function $(g,E){Object.prototype.hasOwnProperty.call(g,"options")||(g.options=g.options?h(g.options):{});for(var R in E)g.options[R]=E[R];return g.options}function O(g,E,R){var J=[];for(var he in g)J.push(encodeURIComponent(R?he.toUpperCase():he)+"="+encodeURIComponent(g[he]));return(!E||E.indexOf("?")===-1?"?":"&")+J.join("&")}var X=/\{ *([\w_ -]+) *\}/g;function K(g,E){return g.replace(X,function(R,J){var he=E[J];if(he===void 0)throw new Error("No value provided for variable "+R);return typeof he=="function"&&(he=he(E)),he})}var te=Array.isArray||function(g){return Object.prototype.toString.call(g)==="[object Array]"};function ne(g,E){for(var R=0;R<g.length;R++)if(g[R]===E)return R;return-1}var H="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ae(g){return window["webkit"+g]||window["moz"+g]||window["ms"+g]}var de=0;function ye(g){var E=+new Date,R=Math.max(0,16-(E-de));return de=E+R,window.setTimeout(g,R)}var Ae=window.requestAnimationFrame||ae("RequestAnimationFrame")||ye,_e=window.cancelAnimationFrame||ae("CancelAnimationFrame")||ae("CancelRequestAnimationFrame")||function(g){window.clearTimeout(g)};function fe(g,E,R){if(R&&Ae===ye)g.call(E);else return Ae.call(window,d(g,E))}function Ee(g){g&&_e.call(window,g)}var Be={__proto__:null,extend:s,create:h,bind:d,get lastId(){return o},stamp:_,throttle:w,wrapNum:A,falseFn:P,formatNum:N,trim:z,splitWords:q,setOptions:$,getParamString:O,template:K,isArray:te,indexOf:ne,emptyImageUrl:H,requestFn:Ae,cancelFn:_e,requestAnimFrame:fe,cancelAnimFrame:Ee};function De(){}De.extend=function(g){var E=function(){$(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},R=E.__super__=this.prototype,J=h(R);J.constructor=E,E.prototype=J;for(var he in this)Object.prototype.hasOwnProperty.call(this,he)&&he!=="prototype"&&he!=="__super__"&&(E[he]=this[he]);return g.statics&&s(E,g.statics),g.includes&&(Je(g.includes),s.apply(null,[J].concat(g.includes))),s(J,g),delete J.statics,delete J.includes,J.options&&(J.options=R.options?h(R.options):{},s(J.options,g.options)),J._initHooks=[],J.callInitHooks=function(){if(!this._initHooksCalled){R.callInitHooks&&R.callInitHooks.call(this),this._initHooksCalled=!0;for(var Te=0,Xe=J._initHooks.length;Te<Xe;Te++)J._initHooks[Te].call(this)}},E},De.include=function(g){var E=this.prototype.options;return s(this.prototype,g),g.options&&(this.prototype.options=E,this.mergeOptions(g.options)),this},De.mergeOptions=function(g){return s(this.prototype.options,g),this},De.addInitHook=function(g){var E=Array.prototype.slice.call(arguments,1),R=typeof g=="function"?g:function(){this[g].apply(this,E)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(R),this};function Je(g){if(!(typeof L>"u"||!L||!L.Mixin)){g=te(g)?g:[g];for(var E=0;E<g.length;E++)g[E]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var Ve={on:function(g,E,R){if(typeof g=="object")for(var J in g)this._on(J,g[J],E);else{g=q(g);for(var he=0,Te=g.length;he<Te;he++)this._on(g[he],E,R)}return this},off:function(g,E,R){if(!arguments.length)delete this._events;else if(typeof g=="object")for(var J in g)this._off(J,g[J],E);else{g=q(g);for(var he=arguments.length===1,Te=0,Xe=g.length;Te<Xe;Te++)he?this._off(g[Te]):this._off(g[Te],E,R)}return this},_on:function(g,E,R,J){if(typeof E!="function"){console.warn("wrong listener type: "+typeof E);return}if(this._listens(g,E,R)===!1){R===this&&(R=void 0);var he={fn:E,ctx:R};J&&(he.once=!0),this._events=this._events||{},this._events[g]=this._events[g]||[],this._events[g].push(he)}},_off:function(g,E,R){var J,he,Te;if(this._events&&(J=this._events[g],!!J)){if(arguments.length===1){if(this._firingCount)for(he=0,Te=J.length;he<Te;he++)J[he].fn=P;delete this._events[g];return}if(typeof E!="function"){console.warn("wrong listener type: "+typeof E);return}var Xe=this._listens(g,E,R);if(Xe!==!1){var mt=J[Xe];this._firingCount&&(mt.fn=P,this._events[g]=J=J.slice()),J.splice(Xe,1)}}},fire:function(g,E,R){if(!this.listens(g,R))return this;var J=s({},E,{type:g,target:this,sourceTarget:E&&E.sourceTarget||this});if(this._events){var he=this._events[g];if(he){this._firingCount=this._firingCount+1||1;for(var Te=0,Xe=he.length;Te<Xe;Te++){var mt=he[Te],Pt=mt.fn;mt.once&&this.off(g,Pt,mt.ctx),Pt.call(mt.ctx||this,J)}this._firingCount--}}return R&&this._propagateEvent(J),this},listens:function(g,E,R,J){typeof g!="string"&&console.warn('"string" type argument expected');var he=E;typeof E!="function"&&(J=!!E,he=void 0,R=void 0);var Te=this._events&&this._events[g];if(Te&&Te.length&&this._listens(g,he,R)!==!1)return!0;if(J){for(var Xe in this._eventParents)if(this._eventParents[Xe].listens(g,E,R,J))return!0}return!1},_listens:function(g,E,R){if(!this._events)return!1;var J=this._events[g]||[];if(!E)return!!J.length;R===this&&(R=void 0);for(var he=0,Te=J.length;he<Te;he++)if(J[he].fn===E&&J[he].ctx===R)return he;return!1},once:function(g,E,R){if(typeof g=="object")for(var J in g)this._on(J,g[J],E,!0);else{g=q(g);for(var he=0,Te=g.length;he<Te;he++)this._on(g[he],E,R,!0)}return this},addEventParent:function(g){return this._eventParents=this._eventParents||{},this._eventParents[_(g)]=g,this},removeEventParent:function(g){return this._eventParents&&delete this._eventParents[_(g)],this},_propagateEvent:function(g){for(var E in this._eventParents)this._eventParents[E].fire(g.type,s({layer:g.target,propagatedFrom:g.target},g),!0)}};Ve.addEventListener=Ve.on,Ve.removeEventListener=Ve.clearAllEventListeners=Ve.off,Ve.addOneTimeEventListener=Ve.once,Ve.fireEvent=Ve.fire,Ve.hasEventListeners=Ve.listens;var et=De.extend(Ve);function Ce(g,E,R){this.x=R?Math.round(g):g,this.y=R?Math.round(E):E}var We=Math.trunc||function(g){return g>0?Math.floor(g):Math.ceil(g)};Ce.prototype={clone:function(){return new Ce(this.x,this.y)},add:function(g){return this.clone()._add(Qe(g))},_add:function(g){return this.x+=g.x,this.y+=g.y,this},subtract:function(g){return this.clone()._subtract(Qe(g))},_subtract:function(g){return this.x-=g.x,this.y-=g.y,this},divideBy:function(g){return this.clone()._divideBy(g)},_divideBy:function(g){return this.x/=g,this.y/=g,this},multiplyBy:function(g){return this.clone()._multiplyBy(g)},_multiplyBy:function(g){return this.x*=g,this.y*=g,this},scaleBy:function(g){return new Ce(this.x*g.x,this.y*g.y)},unscaleBy:function(g){return new Ce(this.x/g.x,this.y/g.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=We(this.x),this.y=We(this.y),this},distanceTo:function(g){g=Qe(g);var E=g.x-this.x,R=g.y-this.y;return Math.sqrt(E*E+R*R)},equals:function(g){return g=Qe(g),g.x===this.x&&g.y===this.y},contains:function(g){return g=Qe(g),Math.abs(g.x)<=Math.abs(this.x)&&Math.abs(g.y)<=Math.abs(this.y)},toString:function(){return"Point("+N(this.x)+", "+N(this.y)+")"}};function Qe(g,E,R){return g instanceof Ce?g:te(g)?new Ce(g[0],g[1]):g==null?g:typeof g=="object"&&"x"in g&&"y"in g?new Ce(g.x,g.y):new Ce(g,E,R)}function Re(g,E){if(g)for(var R=E?[g,E]:g,J=0,he=R.length;J<he;J++)this.extend(R[J])}Re.prototype={extend:function(g){var E,R;if(!g)return this;if(g instanceof Ce||typeof g[0]=="number"||"x"in g)E=R=Qe(g);else if(g=nt(g),E=g.min,R=g.max,!E||!R)return this;return!this.min&&!this.max?(this.min=E.clone(),this.max=R.clone()):(this.min.x=Math.min(E.x,this.min.x),this.max.x=Math.max(R.x,this.max.x),this.min.y=Math.min(E.y,this.min.y),this.max.y=Math.max(R.y,this.max.y)),this},getCenter:function(g){return Qe((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,g)},getBottomLeft:function(){return Qe(this.min.x,this.max.y)},getTopRight:function(){return Qe(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(g){var E,R;return typeof g[0]=="number"||g instanceof Ce?g=Qe(g):g=nt(g),g instanceof Re?(E=g.min,R=g.max):E=R=g,E.x>=this.min.x&&R.x<=this.max.x&&E.y>=this.min.y&&R.y<=this.max.y},intersects:function(g){g=nt(g);var E=this.min,R=this.max,J=g.min,he=g.max,Te=he.x>=E.x&&J.x<=R.x,Xe=he.y>=E.y&&J.y<=R.y;return Te&&Xe},overlaps:function(g){g=nt(g);var E=this.min,R=this.max,J=g.min,he=g.max,Te=he.x>E.x&&J.x<R.x,Xe=he.y>E.y&&J.y<R.y;return Te&&Xe},isValid:function(){return!!(this.min&&this.max)},pad:function(g){var E=this.min,R=this.max,J=Math.abs(E.x-R.x)*g,he=Math.abs(E.y-R.y)*g;return nt(Qe(E.x-J,E.y-he),Qe(R.x+J,R.y+he))},equals:function(g){return g?(g=nt(g),this.min.equals(g.getTopLeft())&&this.max.equals(g.getBottomRight())):!1}};function nt(g,E){return!g||g instanceof Re?g:new Re(g,E)}function pt(g,E){if(g)for(var R=E?[g,E]:g,J=0,he=R.length;J<he;J++)this.extend(R[J])}pt.prototype={extend:function(g){var E=this._southWest,R=this._northEast,J,he;if(g instanceof Mt)J=g,he=g;else if(g instanceof pt){if(J=g._southWest,he=g._northEast,!J||!he)return this}else return g?this.extend(Nt(g)||Ct(g)):this;return!E&&!R?(this._southWest=new Mt(J.lat,J.lng),this._northEast=new Mt(he.lat,he.lng)):(E.lat=Math.min(J.lat,E.lat),E.lng=Math.min(J.lng,E.lng),R.lat=Math.max(he.lat,R.lat),R.lng=Math.max(he.lng,R.lng)),this},pad:function(g){var E=this._southWest,R=this._northEast,J=Math.abs(E.lat-R.lat)*g,he=Math.abs(E.lng-R.lng)*g;return new pt(new Mt(E.lat-J,E.lng-he),new Mt(R.lat+J,R.lng+he))},getCenter:function(){return new Mt((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Mt(this.getNorth(),this.getWest())},getSouthEast:function(){return new Mt(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(g){typeof g[0]=="number"||g instanceof Mt||"lat"in g?g=Nt(g):g=Ct(g);var E=this._southWest,R=this._northEast,J,he;return g instanceof pt?(J=g.getSouthWest(),he=g.getNorthEast()):J=he=g,J.lat>=E.lat&&he.lat<=R.lat&&J.lng>=E.lng&&he.lng<=R.lng},intersects:function(g){g=Ct(g);var E=this._southWest,R=this._northEast,J=g.getSouthWest(),he=g.getNorthEast(),Te=he.lat>=E.lat&&J.lat<=R.lat,Xe=he.lng>=E.lng&&J.lng<=R.lng;return Te&&Xe},overlaps:function(g){g=Ct(g);var E=this._southWest,R=this._northEast,J=g.getSouthWest(),he=g.getNorthEast(),Te=he.lat>E.lat&&J.lat<R.lat,Xe=he.lng>E.lng&&J.lng<R.lng;return Te&&Xe},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(g,E){return g?(g=Ct(g),this._southWest.equals(g.getSouthWest(),E)&&this._northEast.equals(g.getNorthEast(),E)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Ct(g,E){return g instanceof pt?g:new pt(g,E)}function Mt(g,E,R){if(isNaN(g)||isNaN(E))throw new Error("Invalid LatLng object: ("+g+", "+E+")");this.lat=+g,this.lng=+E,R!==void 0&&(this.alt=+R)}Mt.prototype={equals:function(g,E){if(!g)return!1;g=Nt(g);var R=Math.max(Math.abs(this.lat-g.lat),Math.abs(this.lng-g.lng));return R<=(E===void 0?1e-9:E)},toString:function(g){return"LatLng("+N(this.lat,g)+", "+N(this.lng,g)+")"},distanceTo:function(g){return Ot.distance(this,Nt(g))},wrap:function(){return Ot.wrapLatLng(this)},toBounds:function(g){var E=180*g/40075017,R=E/Math.cos(Math.PI/180*this.lat);return Ct([this.lat-E,this.lng-R],[this.lat+E,this.lng+R])},clone:function(){return new Mt(this.lat,this.lng,this.alt)}};function Nt(g,E,R){return g instanceof Mt?g:te(g)&&typeof g[0]!="object"?g.length===3?new Mt(g[0],g[1],g[2]):g.length===2?new Mt(g[0],g[1]):null:g==null?g:typeof g=="object"&&"lat"in g?new Mt(g.lat,"lng"in g?g.lng:g.lon,g.alt):E===void 0?null:new Mt(g,E,R)}var Tt={latLngToPoint:function(g,E){var R=this.projection.project(g),J=this.scale(E);return this.transformation._transform(R,J)},pointToLatLng:function(g,E){var R=this.scale(E),J=this.transformation.untransform(g,R);return this.projection.unproject(J)},project:function(g){return this.projection.project(g)},unproject:function(g){return this.projection.unproject(g)},scale:function(g){return 256*Math.pow(2,g)},zoom:function(g){return Math.log(g/256)/Math.LN2},getProjectedBounds:function(g){if(this.infinite)return null;var E=this.projection.bounds,R=this.scale(g),J=this.transformation.transform(E.min,R),he=this.transformation.transform(E.max,R);return new Re(J,he)},infinite:!1,wrapLatLng:function(g){var E=this.wrapLng?A(g.lng,this.wrapLng,!0):g.lng,R=this.wrapLat?A(g.lat,this.wrapLat,!0):g.lat,J=g.alt;return new Mt(R,E,J)},wrapLatLngBounds:function(g){var E=g.getCenter(),R=this.wrapLatLng(E),J=E.lat-R.lat,he=E.lng-R.lng;if(J===0&&he===0)return g;var Te=g.getSouthWest(),Xe=g.getNorthEast(),mt=new Mt(Te.lat-J,Te.lng-he),Pt=new Mt(Xe.lat-J,Xe.lng-he);return new pt(mt,Pt)}},Ot=s({},Tt,{wrapLng:[-180,180],R:6371e3,distance:function(g,E){var R=Math.PI/180,J=g.lat*R,he=E.lat*R,Te=Math.sin((E.lat-g.lat)*R/2),Xe=Math.sin((E.lng-g.lng)*R/2),mt=Te*Te+Math.cos(J)*Math.cos(he)*Xe*Xe,Pt=2*Math.atan2(Math.sqrt(mt),Math.sqrt(1-mt));return this.R*Pt}}),rt=6378137,zt={R:rt,MAX_LATITUDE:85.0511287798,project:function(g){var E=Math.PI/180,R=this.MAX_LATITUDE,J=Math.max(Math.min(R,g.lat),-R),he=Math.sin(J*E);return new Ce(this.R*g.lng*E,this.R*Math.log((1+he)/(1-he))/2)},unproject:function(g){var E=180/Math.PI;return new Mt((2*Math.atan(Math.exp(g.y/this.R))-Math.PI/2)*E,g.x*E/this.R)},bounds:(function(){var g=rt*Math.PI;return new Re([-g,-g],[g,g])})()};function Ut(g,E,R,J){if(te(g)){this._a=g[0],this._b=g[1],this._c=g[2],this._d=g[3];return}this._a=g,this._b=E,this._c=R,this._d=J}Ut.prototype={transform:function(g,E){return this._transform(g.clone(),E)},_transform:function(g,E){return E=E||1,g.x=E*(this._a*g.x+this._b),g.y=E*(this._c*g.y+this._d),g},untransform:function(g,E){return E=E||1,new Ce((g.x/E-this._b)/this._a,(g.y/E-this._d)/this._c)}};function dt(g,E,R,J){return new Ut(g,E,R,J)}var Rn=s({},Ot,{code:"EPSG:3857",projection:zt,transformation:(function(){var g=.5/(Math.PI*zt.R);return dt(g,.5,-g,.5)})()}),cn=s({},Rn,{code:"EPSG:900913"});function Hn(g){return document.createElementNS("http://www.w3.org/2000/svg",g)}function Gn(g,E){var R="",J,he,Te,Xe,mt,Pt;for(J=0,Te=g.length;J<Te;J++){for(mt=g[J],he=0,Xe=mt.length;he<Xe;he++)Pt=mt[he],R+=(he?"L":"M")+Pt.x+" "+Pt.y;R+=E?ht.svg?"z":"x":""}return R||"M0 0"}var Mn=document.documentElement.style,Nr="ActiveXObject"in window,Fr=Nr&&!document.addEventListener,xi="msLaunchUri"in navigator&&!("documentMode"in document),Br=ur("webkit"),hr=ur("android"),ri=ur("android 2")||ur("android 3"),wa=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),_i=hr&&ur("Google")&&wa<537&&!("AudioNode"in window),Sa=!!window.opera,Ta=!xi&&ur("chrome"),Pa=ur("gecko")&&!Br&&!Sa&&!Nr,Ya=!Ta&&ur("safari"),gi=ur("phantom"),it="OTransition"in Mn,ee=navigator.platform.indexOf("Win")===0,ue=Nr&&"transition"in Mn,ve="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!ri,Oe="MozPerspective"in Mn,$e=!window.L_DISABLE_3D&&(ue||ve||Oe)&&!it&&!gi,ct=typeof orientation<"u"||ur("mobile"),ut=ct&&Br,at=ct&&ve,ft=!window.PointerEvent&&window.MSPointerEvent,Dt=!!(window.PointerEvent||ft),St="ontouchstart"in window||!!window.TouchEvent,Ke=!window.L_NO_TOUCH&&(St||Dt),Bt=ct&&Sa,gn=ct&&Pa,on=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,hn=(function(){var g=!1;try{var E=Object.defineProperty({},"passive",{get:function(){g=!0}});window.addEventListener("testPassiveEventSupport",P,E),window.removeEventListener("testPassiveEventSupport",P,E)}catch{}return g})(),bn=(function(){return!!document.createElement("canvas").getContext})(),pn=!!(document.createElementNS&&Hn("svg").createSVGRect),er=!!pn&&(function(){var g=document.createElement("div");return g.innerHTML="<svg/>",(g.firstChild&&g.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Cr=!pn&&(function(){try{var g=document.createElement("div");g.innerHTML='<v:shape adj="1"/>';var E=g.firstChild;return E.style.behavior="url(#default#VML)",E&&typeof E.adj=="object"}catch{return!1}})(),cr=navigator.platform.indexOf("Mac")===0,Dr=navigator.platform.indexOf("Linux")===0;function ur(g){return navigator.userAgent.toLowerCase().indexOf(g)>=0}var ht={ie:Nr,ielt9:Fr,edge:xi,webkit:Br,android:hr,android23:ri,androidStock:_i,opera:Sa,chrome:Ta,gecko:Pa,safari:Ya,phantom:gi,opera12:it,win:ee,ie3d:ue,webkit3d:ve,gecko3d:Oe,any3d:$e,mobile:ct,mobileWebkit:ut,mobileWebkit3d:at,msPointer:ft,pointer:Dt,touch:Ke,touchNative:St,mobileOpera:Bt,mobileGecko:gn,retina:on,passiveEvents:hn,canvas:bn,svg:pn,vml:Cr,inlineSvg:er,mac:cr,linux:Dr},fr=ht.msPointer?"MSPointerDown":"pointerdown",Er=ht.msPointer?"MSPointerMove":"pointermove",ul=ht.msPointer?"MSPointerUp":"pointerup",oa=ht.msPointer?"MSPointerCancel":"pointercancel",Ht={touchstart:fr,touchmove:Er,touchend:ul,touchcancel:oa},Tn={touchstart:Xr,touchmove:Ms,touchend:Ms,touchcancel:Ms},In={},Aa=!1;function Ed(g,E,R){return E==="touchstart"&&jd(),Tn[E]?(R=Tn[E].bind(this,R),g.addEventListener(Ht[E],R,!1),R):(console.warn("wrong event specified:",E),P)}function os(g,E,R){if(!Ht[E]){console.warn("wrong event specified:",E);return}g.removeEventListener(Ht[E],R,!1)}function Wn(g){In[g.pointerId]=g}function $c(g){In[g.pointerId]&&(In[g.pointerId]=g)}function Zl(g){delete In[g.pointerId]}function jd(){Aa||(document.addEventListener(fr,Wn,!0),document.addEventListener(Er,$c,!0),document.addEventListener(ul,Zl,!0),document.addEventListener(oa,Zl,!0),Aa=!0)}function Ms(g,E){if(E.pointerType!==(E.MSPOINTER_TYPE_MOUSE||"mouse")){E.touches=[];for(var R in In)E.touches.push(In[R]);E.changedTouches=[E],g(E)}}function Xr(g,E){E.MSPOINTER_TYPE_TOUCH&&E.pointerType===E.MSPOINTER_TYPE_TOUCH&&tr(E),Ms(g,E)}function Vc(g){var E={},R,J;for(J in g)R=g[J],E[J]=R&&R.bind?R.bind(g):R;return g=E,E.type="dblclick",E.detail=2,E.isTrusted=!1,E._simulated=!0,E}var Kl=200;function sa(g,E){g.addEventListener("dblclick",E);var R=0,J;function he(Te){if(Te.detail!==1){J=Te.detail;return}if(!(Te.pointerType==="mouse"||Te.sourceCapabilities&&!Te.sourceCapabilities.firesTouchEvents)){var Xe=ca(Te);if(!(Xe.some(function(Pt){return Pt instanceof HTMLLabelElement&&Pt.attributes.for})&&!Xe.some(function(Pt){return Pt instanceof HTMLInputElement||Pt instanceof HTMLSelectElement}))){var mt=Date.now();mt-R<=Kl?(J++,J===2&&E(Vc(Te))):J=1,R=mt}}}return g.addEventListener("click",he),{dblclick:E,simDblclick:he}}function xr(g,E){g.removeEventListener("dblclick",E.dblclick),g.removeEventListener("click",E.simDblclick)}var Uc=dl(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),Go=dl(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),ks=Go==="webkitTransition"||Go==="OTransition"?Go+"End":"transitionend";function Xi(g){return typeof g=="string"?document.getElementById(g):g}function Ca(g,E){var R=g.style[E]||g.currentStyle&&g.currentStyle[E];if((!R||R==="auto")&&document.defaultView){var J=document.defaultView.getComputedStyle(g,null);R=J?J[E]:null}return R==="auto"?null:R}function Yn(g,E,R){var J=document.createElement(g);return J.className=E||"",R&&R.appendChild(J),J}function jr(g){var E=g.parentNode;E&&E.removeChild(g)}function Xl(g){for(;g.firstChild;)g.removeChild(g.firstChild)}function Or(g){var E=g.parentNode;E&&E.lastChild!==g&&E.appendChild(g)}function ss(g){var E=g.parentNode;E&&E.firstChild!==g&&E.insertBefore(g,E.firstChild)}function Yl(g,E){if(g.classList!==void 0)return g.classList.contains(E);var R=ku(g);return R.length>0&&new RegExp("(^|\\s)"+E+"(\\s|$)").test(R)}function Fn(g,E){if(g.classList!==void 0)for(var R=q(E),J=0,he=R.length;J<he;J++)g.classList.add(R[J]);else if(!Yl(g,E)){var Te=ku(g);Md(g,(Te?Te+" ":"")+E)}}function Yr(g,E){g.classList!==void 0?g.classList.remove(E):Md(g,z((" "+ku(g)+" ").replace(" "+E+" "," ")))}function Md(g,E){g.className.baseVal===void 0?g.className=E:g.className.baseVal=E}function ku(g){return g.correspondingElement&&(g=g.correspondingElement),g.className.baseVal===void 0?g.className:g.className.baseVal}function Yi(g,E){"opacity"in g.style?g.style.opacity=E:"filter"in g.style&&kd(g,E)}function kd(g,E){var R=!1,J="DXImageTransform.Microsoft.Alpha";try{R=g.filters.item(J)}catch{if(E===1)return}E=Math.round(E*100),R?(R.Enabled=E!==100,R.Opacity=E):g.style.filter+=" progid:"+J+"(opacity="+E+")"}function dl(g){for(var E=document.documentElement.style,R=0;R<g.length;R++)if(g[R]in E)return g[R];return!1}function Ja(g,E,R){var J=E||new Ce(0,0);g.style[Uc]=(ht.ie3d?"translate("+J.x+"px,"+J.y+"px)":"translate3d("+J.x+"px,"+J.y+"px,0)")+(R?" scale("+R+")":"")}function yi(g,E){g._leaflet_pos=E,ht.any3d?Ja(g,E):(g.style.left=E.x+"px",g.style.top=E.y+"px")}function Is(g){return g._leaflet_pos||new Ce(0,0)}var pr,Ns,Iu;if("onselectstart"in document)pr=function(){_n(window,"selectstart",tr)},Ns=function(){rn(window,"selectstart",tr)};else{var bo=dl(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);pr=function(){if(bo){var g=document.documentElement.style;Iu=g[bo],g[bo]="none"}},Ns=function(){bo&&(document.documentElement.style[bo]=Iu,Iu=void 0)}}function qc(){_n(window,"dragstart",tr)}function hl(){rn(window,"dragstart",tr)}var wo,ls;function Bn(g){for(;g.tabIndex===-1;)g=g.parentNode;g.style&&(Qa(),wo=g,ls=g.style.outlineStyle,g.style.outlineStyle="none",_n(window,"keydown",Qa))}function Qa(){wo&&(wo.style.outlineStyle=ls,wo=void 0,ls=void 0,rn(window,"keydown",Qa))}function Ds(g){do g=g.parentNode;while((!g.offsetWidth||!g.offsetHeight)&&g!==document.body);return g}function So(g){var E=g.getBoundingClientRect();return{x:E.width/g.offsetWidth||1,y:E.height/g.offsetHeight||1,boundingClientRect:E}}var $i={__proto__:null,TRANSFORM:Uc,TRANSITION:Go,TRANSITION_END:ks,get:Xi,getStyle:Ca,create:Yn,remove:jr,empty:Xl,toFront:Or,toBack:ss,hasClass:Yl,addClass:Fn,removeClass:Yr,setClass:Md,getClass:ku,setOpacity:Yi,testProp:dl,setTransform:Ja,setPosition:yi,getPosition:Is,get disableTextSelection(){return pr},get enableTextSelection(){return Ns},disableImageDrag:qc,enableImageDrag:hl,preventOutline:Bn,restoreOutline:Qa,getSizedParentNode:Ds,getScale:So};function _n(g,E,R,J){if(E&&typeof E=="object")for(var he in E)Ji(g,he,E[he],R);else{E=q(E);for(var Te=0,Xe=E.length;Te<Xe;Te++)Ji(g,E[Te],R,J)}return this}var sr="_leaflet_events";function rn(g,E,R,J){if(arguments.length===1)Pr(g),delete g[sr];else if(E&&typeof E=="object")for(var he in E)la(g,he,E[he],R);else if(E=q(E),arguments.length===2)Pr(g,function(mt){return ne(E,mt)!==-1});else for(var Te=0,Xe=E.length;Te<Xe;Te++)la(g,E[Te],R,J);return this}function Pr(g,E){for(var R in g[sr]){var J=R.split(/\d/)[0];(!E||E(J))&&la(g,J,null,null,R)}}var Da={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Ji(g,E,R,J){var he=E+_(R)+(J?"_"+_(J):"");if(g[sr]&&g[sr][he])return this;var Te=function(mt){return R.call(J||g,mt||window.event)},Xe=Te;!ht.touchNative&&ht.pointer&&E.indexOf("touch")===0?Te=Ed(g,E,Te):ht.touch&&E==="dblclick"?Te=sa(g,Te):"addEventListener"in g?E==="touchstart"||E==="touchmove"||E==="wheel"||E==="mousewheel"?g.addEventListener(Da[E]||E,Te,ht.passiveEvents?{passive:!1}:!1):E==="mouseenter"||E==="mouseleave"?(Te=function(mt){mt=mt||window.event,eo(g,mt)&&Xe(mt)},g.addEventListener(Da[E],Te,!1)):g.addEventListener(E,Xe,!1):g.attachEvent("on"+E,Te),g[sr]=g[sr]||{},g[sr][he]=Te}function la(g,E,R,J,he){he=he||E+_(R)+(J?"_"+_(J):"");var Te=g[sr]&&g[sr][he];if(!Te)return this;!ht.touchNative&&ht.pointer&&E.indexOf("touch")===0?os(g,E,Te):ht.touch&&E==="dblclick"?xr(g,Te):"removeEventListener"in g?g.removeEventListener(Da[E]||E,Te,!1):g.detachEvent("on"+E,Te),g[sr][he]=null}function ii(g){return g.stopPropagation?g.stopPropagation():g.originalEvent?g.originalEvent._stopped=!0:g.cancelBubble=!0,this}function Os(g){return Ji(g,"wheel",ii),this}function To(g){return _n(g,"mousedown touchstart dblclick contextmenu",ii),g._leaflet_disable_click=!0,this}function tr(g){return g.preventDefault?g.preventDefault():g.returnValue=!1,this}function Qi(g){return tr(g),ii(g),this}function ca(g){if(g.composedPath)return g.composedPath();for(var E=[],R=g.target;R;)E.push(R),R=R.parentNode;return E}function fl(g,E){if(!E)return new Ce(g.clientX,g.clientY);var R=So(E),J=R.boundingClientRect;return new Ce((g.clientX-J.left)/R.x-E.clientLeft,(g.clientY-J.top)/R.y-E.clientTop)}var Oa=ht.linux&&ht.chrome?window.devicePixelRatio:ht.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function pl(g){return ht.edge?g.wheelDeltaY/2:g.deltaY&&g.deltaMode===0?-g.deltaY/Oa:g.deltaY&&g.deltaMode===1?-g.deltaY*20:g.deltaY&&g.deltaMode===2?-g.deltaY*60:g.deltaX||g.deltaZ?0:g.wheelDelta?(g.wheelDeltaY||g.wheelDelta)/2:g.detail&&Math.abs(g.detail)<32765?-g.detail*20:g.detail?g.detail/-32765*60:0}function eo(g,E){var R=E.relatedTarget;if(!R)return!0;try{for(;R&&R!==g;)R=R.parentNode}catch{return!1}return R!==g}var Nu={__proto__:null,on:_n,off:rn,stopPropagation:ii,disableScrollPropagation:Os,disableClickPropagation:To,preventDefault:tr,stop:Qi,getPropagationPath:ca,getMousePosition:fl,getWheelDelta:pl,isExternalTarget:eo,addListener:_n,removeListener:rn},Gc=et.extend({run:function(g,E,R,J){this.stop(),this._el=g,this._inProgress=!0,this._duration=R||.25,this._easeOutPower=1/Math.max(J||.5,.2),this._startPos=Is(g),this._offset=E.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=fe(this._animate,this),this._step()},_step:function(g){var E=+new Date-this._startTime,R=this._duration*1e3;E<R?this._runFrame(this._easeOut(E/R),g):(this._runFrame(1),this._complete())},_runFrame:function(g,E){var R=this._startPos.add(this._offset.multiplyBy(g));E&&R._round(),yi(this._el,R),this.fire("step")},_complete:function(){Ee(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(g){return 1-Math.pow(1-g,this._easeOutPower)}}),nr=et.extend({options:{crs:Rn,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(g,E){E=$(this,E),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(g),this._initLayout(),this._onResize=d(this._onResize,this),this._initEvents(),E.maxBounds&&this.setMaxBounds(E.maxBounds),E.zoom!==void 0&&(this._zoom=this._limitZoom(E.zoom)),E.center&&E.zoom!==void 0&&this.setView(Nt(E.center),E.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=Go&&ht.any3d&&!ht.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),_n(this._proxy,ks,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(g,E,R){if(E=E===void 0?this._zoom:this._limitZoom(E),g=this._limitCenter(Nt(g),E,this.options.maxBounds),R=R||{},this._stop(),this._loaded&&!R.reset&&R!==!0){R.animate!==void 0&&(R.zoom=s({animate:R.animate},R.zoom),R.pan=s({animate:R.animate,duration:R.duration},R.pan));var J=this._zoom!==E?this._tryAnimatedZoom&&this._tryAnimatedZoom(g,E,R.zoom):this._tryAnimatedPan(g,R.pan);if(J)return clearTimeout(this._sizeTimer),this}return this._resetView(g,E,R.pan&&R.pan.noMoveStart),this},setZoom:function(g,E){return this._loaded?this.setView(this.getCenter(),g,{zoom:E}):(this._zoom=g,this)},zoomIn:function(g,E){return g=g||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+g,E)},zoomOut:function(g,E){return g=g||(ht.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-g,E)},setZoomAround:function(g,E,R){var J=this.getZoomScale(E),he=this.getSize().divideBy(2),Te=g instanceof Ce?g:this.latLngToContainerPoint(g),Xe=Te.subtract(he).multiplyBy(1-1/J),mt=this.containerPointToLatLng(he.add(Xe));return this.setView(mt,E,{zoom:R})},_getBoundsCenterZoom:function(g,E){E=E||{},g=g.getBounds?g.getBounds():Ct(g);var R=Qe(E.paddingTopLeft||E.padding||[0,0]),J=Qe(E.paddingBottomRight||E.padding||[0,0]),he=this.getBoundsZoom(g,!1,R.add(J));if(he=typeof E.maxZoom=="number"?Math.min(E.maxZoom,he):he,he===1/0)return{center:g.getCenter(),zoom:he};var Te=J.subtract(R).divideBy(2),Xe=this.project(g.getSouthWest(),he),mt=this.project(g.getNorthEast(),he),Pt=this.unproject(Xe.add(mt).divideBy(2).add(Te),he);return{center:Pt,zoom:he}},fitBounds:function(g,E){if(g=Ct(g),!g.isValid())throw new Error("Bounds are not valid.");var R=this._getBoundsCenterZoom(g,E);return this.setView(R.center,R.zoom,E)},fitWorld:function(g){return this.fitBounds([[-90,-180],[90,180]],g)},panTo:function(g,E){return this.setView(g,this._zoom,{pan:E})},panBy:function(g,E){if(g=Qe(g).round(),E=E||{},!g.x&&!g.y)return this.fire("moveend");if(E.animate!==!0&&!this.getSize().contains(g))return this._resetView(this.unproject(this.project(this.getCenter()).add(g)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new Gc,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),E.noMoveStart||this.fire("movestart"),E.animate!==!1){Fn(this._mapPane,"leaflet-pan-anim");var R=this._getMapPanePos().subtract(g).round();this._panAnim.run(this._mapPane,R,E.duration||.25,E.easeLinearity)}else this._rawPanBy(g),this.fire("move").fire("moveend");return this},flyTo:function(g,E,R){if(R=R||{},R.animate===!1||!ht.any3d)return this.setView(g,E,R);this._stop();var J=this.project(this.getCenter()),he=this.project(g),Te=this.getSize(),Xe=this._zoom;g=Nt(g),E=E===void 0?Xe:E;var mt=Math.max(Te.x,Te.y),Pt=mt*this.getZoomScale(Xe,E),Vt=he.distanceTo(J)||1,sn=1.42,On=sn*sn;function ir(wr){var hs=wr?-1:1,Fd=wr?Pt:mt,Tl=Pt*Pt-mt*mt+hs*On*On*Vt*Vt,Yo=2*Fd*On*Vt,ao=Tl/Yo,Eo=Math.sqrt(ao*ao+1)-ao,$u=Eo<1e-9?-18:Math.log(Eo);return $u}function wi(wr){return(Math.exp(wr)-Math.exp(-wr))/2}function Si(wr){return(Math.exp(wr)+Math.exp(-wr))/2}function Fa(wr){return wi(wr)/Si(wr)}var ja=ir(0);function ds(wr){return mt*(Si(ja)/Si(ja+sn*wr))}function eu(wr){return mt*(Si(ja)*Fa(ja+sn*wr)-wi(ja))/On}function Zs(wr){return 1-Math.pow(1-wr,1.5)}var Rh=Date.now(),Rr=(ir(1)-ja)/sn,da=R.duration?1e3*R.duration:1e3*Rr*.8;function Ui(){var wr=(Date.now()-Rh)/da,hs=Zs(wr)*Rr;wr<=1?(this._flyToFrame=fe(Ui,this),this._move(this.unproject(J.add(he.subtract(J).multiplyBy(eu(hs)/Vt)),Xe),this.getScaleZoom(mt/ds(hs),Xe),{flyTo:!0})):this._move(g,E)._moveEnd(!0)}return this._moveStart(!0,R.noMoveStart),Ui.call(this),this},flyToBounds:function(g,E){var R=this._getBoundsCenterZoom(g,E);return this.flyTo(R.center,R.zoom,E)},setMaxBounds:function(g){return g=Ct(g),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),g.isValid()?(this.options.maxBounds=g,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(g){var E=this.options.minZoom;return this.options.minZoom=g,this._loaded&&E!==g&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(g):this},setMaxZoom:function(g){var E=this.options.maxZoom;return this.options.maxZoom=g,this._loaded&&E!==g&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(g):this},panInsideBounds:function(g,E){this._enforcingBounds=!0;var R=this.getCenter(),J=this._limitCenter(R,this._zoom,Ct(g));return R.equals(J)||this.panTo(J,E),this._enforcingBounds=!1,this},panInside:function(g,E){E=E||{};var R=Qe(E.paddingTopLeft||E.padding||[0,0]),J=Qe(E.paddingBottomRight||E.padding||[0,0]),he=this.project(this.getCenter()),Te=this.project(g),Xe=this.getPixelBounds(),mt=nt([Xe.min.add(R),Xe.max.subtract(J)]),Pt=mt.getSize();if(!mt.contains(Te)){this._enforcingBounds=!0;var Vt=Te.subtract(mt.getCenter()),sn=mt.extend(Te).getSize().subtract(Pt);he.x+=Vt.x<0?-sn.x:sn.x,he.y+=Vt.y<0?-sn.y:sn.y,this.panTo(this.unproject(he),E),this._enforcingBounds=!1}return this},invalidateSize:function(g){if(!this._loaded)return this;g=s({animate:!1,pan:!0},g===!0?{animate:!0}:g);var E=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var R=this.getSize(),J=E.divideBy(2).round(),he=R.divideBy(2).round(),Te=J.subtract(he);return!Te.x&&!Te.y?this:(g.animate&&g.pan?this.panBy(Te):(g.pan&&this._rawPanBy(Te),this.fire("move"),g.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(d(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:E,newSize:R}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(g){if(g=this._locateOptions=s({timeout:1e4,watch:!1},g),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var E=d(this._handleGeolocationResponse,this),R=d(this._handleGeolocationError,this);return g.watch?this._locationWatchId=navigator.geolocation.watchPosition(E,R,g):navigator.geolocation.getCurrentPosition(E,R,g),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(g){if(this._container._leaflet_id){var E=g.code,R=g.message||(E===1?"permission denied":E===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:E,message:"Geolocation error: "+R+"."})}},_handleGeolocationResponse:function(g){if(this._container._leaflet_id){var E=g.coords.latitude,R=g.coords.longitude,J=new Mt(E,R),he=J.toBounds(g.coords.accuracy*2),Te=this._locateOptions;if(Te.setView){var Xe=this.getBoundsZoom(he);this.setView(J,Te.maxZoom?Math.min(Xe,Te.maxZoom):Xe)}var mt={latlng:J,bounds:he,timestamp:g.timestamp};for(var Pt in g.coords)typeof g.coords[Pt]=="number"&&(mt[Pt]=g.coords[Pt]);this.fire("locationfound",mt)}},addHandler:function(g,E){if(!E)return this;var R=this[g]=new E(this);return this._handlers.push(R),this.options[g]&&R.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),jr(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(Ee(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var g;for(g in this._layers)this._layers[g].remove();for(g in this._panes)jr(this._panes[g]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(g,E){var R="leaflet-pane"+(g?" leaflet-"+g.replace("Pane","")+"-pane":""),J=Yn("div",R,E||this._mapPane);return g&&(this._panes[g]=J),J},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var g=this.getPixelBounds(),E=this.unproject(g.getBottomLeft()),R=this.unproject(g.getTopRight());return new pt(E,R)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(g,E,R){g=Ct(g),R=Qe(R||[0,0]);var J=this.getZoom()||0,he=this.getMinZoom(),Te=this.getMaxZoom(),Xe=g.getNorthWest(),mt=g.getSouthEast(),Pt=this.getSize().subtract(R),Vt=nt(this.project(mt,J),this.project(Xe,J)).getSize(),sn=ht.any3d?this.options.zoomSnap:1,On=Pt.x/Vt.x,ir=Pt.y/Vt.y,wi=E?Math.max(On,ir):Math.min(On,ir);return J=this.getScaleZoom(wi,J),sn&&(J=Math.round(J/(sn/100))*(sn/100),J=E?Math.ceil(J/sn)*sn:Math.floor(J/sn)*sn),Math.max(he,Math.min(Te,J))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new Ce(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(g,E){var R=this._getTopLeftPoint(g,E);return new Re(R,R.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(g){return this.options.crs.getProjectedBounds(g===void 0?this.getZoom():g)},getPane:function(g){return typeof g=="string"?this._panes[g]:g},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(g,E){var R=this.options.crs;return E=E===void 0?this._zoom:E,R.scale(g)/R.scale(E)},getScaleZoom:function(g,E){var R=this.options.crs;E=E===void 0?this._zoom:E;var J=R.zoom(g*R.scale(E));return isNaN(J)?1/0:J},project:function(g,E){return E=E===void 0?this._zoom:E,this.options.crs.latLngToPoint(Nt(g),E)},unproject:function(g,E){return E=E===void 0?this._zoom:E,this.options.crs.pointToLatLng(Qe(g),E)},layerPointToLatLng:function(g){var E=Qe(g).add(this.getPixelOrigin());return this.unproject(E)},latLngToLayerPoint:function(g){var E=this.project(Nt(g))._round();return E._subtract(this.getPixelOrigin())},wrapLatLng:function(g){return this.options.crs.wrapLatLng(Nt(g))},wrapLatLngBounds:function(g){return this.options.crs.wrapLatLngBounds(Ct(g))},distance:function(g,E){return this.options.crs.distance(Nt(g),Nt(E))},containerPointToLayerPoint:function(g){return Qe(g).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(g){return Qe(g).add(this._getMapPanePos())},containerPointToLatLng:function(g){var E=this.containerPointToLayerPoint(Qe(g));return this.layerPointToLatLng(E)},latLngToContainerPoint:function(g){return this.layerPointToContainerPoint(this.latLngToLayerPoint(Nt(g)))},mouseEventToContainerPoint:function(g){return fl(g,this._container)},mouseEventToLayerPoint:function(g){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(g))},mouseEventToLatLng:function(g){return this.layerPointToLatLng(this.mouseEventToLayerPoint(g))},_initContainer:function(g){var E=this._container=Xi(g);if(E){if(E._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");_n(E,"scroll",this._onScroll,this),this._containerId=_(E)},_initLayout:function(){var g=this._container;this._fadeAnimated=this.options.fadeAnimation&&ht.any3d,Fn(g,"leaflet-container"+(ht.touch?" leaflet-touch":"")+(ht.retina?" leaflet-retina":"")+(ht.ielt9?" leaflet-oldie":"")+(ht.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var E=Ca(g,"position");E!=="absolute"&&E!=="relative"&&E!=="fixed"&&E!=="sticky"&&(g.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var g=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),yi(this._mapPane,new Ce(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Fn(g.markerPane,"leaflet-zoom-hide"),Fn(g.shadowPane,"leaflet-zoom-hide"))},_resetView:function(g,E,R){yi(this._mapPane,new Ce(0,0));var J=!this._loaded;this._loaded=!0,E=this._limitZoom(E),this.fire("viewprereset");var he=this._zoom!==E;this._moveStart(he,R)._move(g,E)._moveEnd(he),this.fire("viewreset"),J&&this.fire("load")},_moveStart:function(g,E){return g&&this.fire("zoomstart"),E||this.fire("movestart"),this},_move:function(g,E,R,J){E===void 0&&(E=this._zoom);var he=this._zoom!==E;return this._zoom=E,this._lastCenter=g,this._pixelOrigin=this._getNewPixelOrigin(g),J?R&&R.pinch&&this.fire("zoom",R):((he||R&&R.pinch)&&this.fire("zoom",R),this.fire("move",R)),this},_moveEnd:function(g){return g&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return Ee(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(g){yi(this._mapPane,this._getMapPanePos().subtract(g))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(g){this._targets={},this._targets[_(this._container)]=this;var E=g?rn:_n;E(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&E(window,"resize",this._onResize,this),ht.any3d&&this.options.transform3DLimit&&(g?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){Ee(this._resizeRequest),this._resizeRequest=fe(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var g=this._getMapPanePos();Math.max(Math.abs(g.x),Math.abs(g.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(g,E){for(var R=[],J,he=E==="mouseout"||E==="mouseover",Te=g.target||g.srcElement,Xe=!1;Te;){if(J=this._targets[_(Te)],J&&(E==="click"||E==="preclick")&&this._draggableMoved(J)){Xe=!0;break}if(J&&J.listens(E,!0)&&(he&&!eo(Te,g)||(R.push(J),he))||Te===this._container)break;Te=Te.parentNode}return!R.length&&!Xe&&!he&&this.listens(E,!0)&&(R=[this]),R},_isClickDisabled:function(g){for(;g&&g!==this._container;){if(g._leaflet_disable_click)return!0;g=g.parentNode}},_handleDOMEvent:function(g){var E=g.target||g.srcElement;if(!(!this._loaded||E._leaflet_disable_events||g.type==="click"&&this._isClickDisabled(E))){var R=g.type;R==="mousedown"&&Bn(E),this._fireDOMEvent(g,R)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(g,E,R){if(g.type==="click"){var J=s({},g);J.type="preclick",this._fireDOMEvent(J,J.type,R)}var he=this._findEventTargets(g,E);if(R){for(var Te=[],Xe=0;Xe<R.length;Xe++)R[Xe].listens(E,!0)&&Te.push(R[Xe]);he=Te.concat(he)}if(he.length){E==="contextmenu"&&tr(g);var mt=he[0],Pt={originalEvent:g};if(g.type!=="keypress"&&g.type!=="keydown"&&g.type!=="keyup"){var Vt=mt.getLatLng&&(!mt._radius||mt._radius<=10);Pt.containerPoint=Vt?this.latLngToContainerPoint(mt.getLatLng()):this.mouseEventToContainerPoint(g),Pt.layerPoint=this.containerPointToLayerPoint(Pt.containerPoint),Pt.latlng=Vt?mt.getLatLng():this.layerPointToLatLng(Pt.layerPoint)}for(Xe=0;Xe<he.length;Xe++)if(he[Xe].fire(E,Pt,!0),Pt.originalEvent._stopped||he[Xe].options.bubblingMouseEvents===!1&&ne(this._mouseEvents,E)!==-1)return}},_draggableMoved:function(g){return g=g.dragging&&g.dragging.enabled()?g:this,g.dragging&&g.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var g=0,E=this._handlers.length;g<E;g++)this._handlers[g].disable()},whenReady:function(g,E){return this._loaded?g.call(E||this,{target:this}):this.on("load",g,E),this},_getMapPanePos:function(){return Is(this._mapPane)||new Ce(0,0)},_moved:function(){var g=this._getMapPanePos();return g&&!g.equals([0,0])},_getTopLeftPoint:function(g,E){var R=g&&E!==void 0?this._getNewPixelOrigin(g,E):this.getPixelOrigin();return R.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(g,E){var R=this.getSize()._divideBy(2);return this.project(g,E)._subtract(R)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(g,E,R){var J=this._getNewPixelOrigin(R,E);return this.project(g,E)._subtract(J)},_latLngBoundsToNewLayerBounds:function(g,E,R){var J=this._getNewPixelOrigin(R,E);return nt([this.project(g.getSouthWest(),E)._subtract(J),this.project(g.getNorthWest(),E)._subtract(J),this.project(g.getSouthEast(),E)._subtract(J),this.project(g.getNorthEast(),E)._subtract(J)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(g){return this.latLngToLayerPoint(g).subtract(this._getCenterLayerPoint())},_limitCenter:function(g,E,R){if(!R)return g;var J=this.project(g,E),he=this.getSize().divideBy(2),Te=new Re(J.subtract(he),J.add(he)),Xe=this._getBoundsOffset(Te,R,E);return Math.abs(Xe.x)<=1&&Math.abs(Xe.y)<=1?g:this.unproject(J.add(Xe),E)},_limitOffset:function(g,E){if(!E)return g;var R=this.getPixelBounds(),J=new Re(R.min.add(g),R.max.add(g));return g.add(this._getBoundsOffset(J,E))},_getBoundsOffset:function(g,E,R){var J=nt(this.project(E.getNorthEast(),R),this.project(E.getSouthWest(),R)),he=J.min.subtract(g.min),Te=J.max.subtract(g.max),Xe=this._rebound(he.x,-Te.x),mt=this._rebound(he.y,-Te.y);return new Ce(Xe,mt)},_rebound:function(g,E){return g+E>0?Math.round(g-E)/2:Math.max(0,Math.ceil(g))-Math.max(0,Math.floor(E))},_limitZoom:function(g){var E=this.getMinZoom(),R=this.getMaxZoom(),J=ht.any3d?this.options.zoomSnap:1;return J&&(g=Math.round(g/J)*J),Math.max(E,Math.min(R,g))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Yr(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(g,E){var R=this._getCenterOffset(g)._trunc();return(E&&E.animate)!==!0&&!this.getSize().contains(R)?!1:(this.panBy(R,E),!0)},_createAnimProxy:function(){var g=this._proxy=Yn("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(g),this.on("zoomanim",function(E){var R=Uc,J=this._proxy.style[R];Ja(this._proxy,this.project(E.center,E.zoom),this.getZoomScale(E.zoom,1)),J===this._proxy.style[R]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){jr(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var g=this.getCenter(),E=this.getZoom();Ja(this._proxy,this.project(g,E),this.getZoomScale(E,1))},_catchTransitionEnd:function(g){this._animatingZoom&&g.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(g,E,R){if(this._animatingZoom)return!0;if(R=R||{},!this._zoomAnimated||R.animate===!1||this._nothingToAnimate()||Math.abs(E-this._zoom)>this.options.zoomAnimationThreshold)return!1;var J=this.getZoomScale(E),he=this._getCenterOffset(g)._divideBy(1-1/J);return R.animate!==!0&&!this.getSize().contains(he)?!1:(fe(function(){this._moveStart(!0,R.noMoveStart||!1)._animateZoom(g,E,!0)},this),!0)},_animateZoom:function(g,E,R,J){this._mapPane&&(R&&(this._animatingZoom=!0,this._animateToCenter=g,this._animateToZoom=E,Fn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:g,zoom:E,noUpdate:J}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(d(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Yr(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function yr(g,E){return new nr(g,E)}var Vi=De.extend({options:{position:"topright"},initialize:function(g){$(this,g)},getPosition:function(){return this.options.position},setPosition:function(g){var E=this._map;return E&&E.removeControl(this),this.options.position=g,E&&E.addControl(this),this},getContainer:function(){return this._container},addTo:function(g){this.remove(),this._map=g;var E=this._container=this.onAdd(g),R=this.getPosition(),J=g._controlCorners[R];return Fn(E,"leaflet-control"),R.indexOf("bottom")!==-1?J.insertBefore(E,J.firstChild):J.appendChild(E),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(jr(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(g){this._map&&g&&g.screenX>0&&g.screenY>0&&this._map.getContainer().focus()}}),Zn=function(g){return new Vi(g)};nr.include({addControl:function(g){return g.addTo(this),this},removeControl:function(g){return g.remove(),this},_initControlPos:function(){var g=this._controlCorners={},E="leaflet-",R=this._controlContainer=Yn("div",E+"control-container",this._container);function J(he,Te){var Xe=E+he+" "+E+Te;g[he+Te]=Yn("div",Xe,R)}J("top","left"),J("top","right"),J("bottom","left"),J("bottom","right")},_clearControlPos:function(){for(var g in this._controlCorners)jr(this._controlCorners[g]);jr(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Un=Vi.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(g,E,R,J){return R<J?-1:J<R?1:0}},initialize:function(g,E,R){$(this,R),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var J in g)this._addLayer(g[J],J);for(J in E)this._addLayer(E[J],J,!0)},onAdd:function(g){this._initLayout(),this._update(),this._map=g,g.on("zoomend",this._checkDisabledLayers,this);for(var E=0;E<this._layers.length;E++)this._layers[E].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(g){return Vi.prototype.addTo.call(this,g),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var g=0;g<this._layers.length;g++)this._layers[g].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(g,E){return this._addLayer(g,E),this._map?this._update():this},addOverlay:function(g,E){return this._addLayer(g,E,!0),this._map?this._update():this},removeLayer:function(g){g.off("add remove",this._onLayerChange,this);var E=this._getLayer(_(g));return E&&this._layers.splice(this._layers.indexOf(E),1),this._map?this._update():this},expand:function(){Fn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var g=this._map.getSize().y-(this._container.offsetTop+50);return g<this._section.clientHeight?(Fn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=g+"px"):Yr(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Yr(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var g="leaflet-control-layers",E=this._container=Yn("div",g),R=this.options.collapsed;E.setAttribute("aria-haspopup",!0),To(E),Os(E);var J=this._section=Yn("section",g+"-list");R&&(this._map.on("click",this.collapse,this),_n(E,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var he=this._layersLink=Yn("a",g+"-toggle",E);he.href="#",he.title="Layers",he.setAttribute("role","button"),_n(he,{keydown:function(Te){Te.keyCode===13&&this._expandSafely()},click:function(Te){tr(Te),this._expandSafely()}},this),R||this.expand(),this._baseLayersList=Yn("div",g+"-base",J),this._separator=Yn("div",g+"-separator",J),this._overlaysList=Yn("div",g+"-overlays",J),E.appendChild(J)},_getLayer:function(g){for(var E=0;E<this._layers.length;E++)if(this._layers[E]&&_(this._layers[E].layer)===g)return this._layers[E]},_addLayer:function(g,E,R){this._map&&g.on("add remove",this._onLayerChange,this),this._layers.push({layer:g,name:E,overlay:R}),this.options.sortLayers&&this._layers.sort(d(function(J,he){return this.options.sortFunction(J.layer,he.layer,J.name,he.name)},this)),this.options.autoZIndex&&g.setZIndex&&(this._lastZIndex++,g.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;Xl(this._baseLayersList),Xl(this._overlaysList),this._layerControlInputs=[];var g,E,R,J,he=0;for(R=0;R<this._layers.length;R++)J=this._layers[R],this._addItem(J),E=E||J.overlay,g=g||!J.overlay,he+=J.overlay?0:1;return this.options.hideSingleBase&&(g=g&&he>1,this._baseLayersList.style.display=g?"":"none"),this._separator.style.display=E&&g?"":"none",this},_onLayerChange:function(g){this._handlingClick||this._update();var E=this._getLayer(_(g.target)),R=E.overlay?g.type==="add"?"overlayadd":"overlayremove":g.type==="add"?"baselayerchange":null;R&&this._map.fire(R,E)},_createRadioElement:function(g,E){var R='<input type="radio" class="leaflet-control-layers-selector" name="'+g+'"'+(E?' checked="checked"':"")+"/>",J=document.createElement("div");return J.innerHTML=R,J.firstChild},_addItem:function(g){var E=document.createElement("label"),R=this._map.hasLayer(g.layer),J;g.overlay?(J=document.createElement("input"),J.type="checkbox",J.className="leaflet-control-layers-selector",J.defaultChecked=R):J=this._createRadioElement("leaflet-base-layers_"+_(this),R),this._layerControlInputs.push(J),J.layerId=_(g.layer),_n(J,"click",this._onInputClick,this);var he=document.createElement("span");he.innerHTML=" "+g.name;var Te=document.createElement("span");E.appendChild(Te),Te.appendChild(J),Te.appendChild(he);var Xe=g.overlay?this._overlaysList:this._baseLayersList;return Xe.appendChild(E),this._checkDisabledLayers(),E},_onInputClick:function(){if(!this._preventClick){var g=this._layerControlInputs,E,R,J=[],he=[];this._handlingClick=!0;for(var Te=g.length-1;Te>=0;Te--)E=g[Te],R=this._getLayer(E.layerId).layer,E.checked?J.push(R):E.checked||he.push(R);for(Te=0;Te<he.length;Te++)this._map.hasLayer(he[Te])&&this._map.removeLayer(he[Te]);for(Te=0;Te<J.length;Te++)this._map.hasLayer(J[Te])||this._map.addLayer(J[Te]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var g=this._layerControlInputs,E,R,J=this._map.getZoom(),he=g.length-1;he>=0;he--)E=g[he],R=this._getLayer(E.layerId).layer,E.disabled=R.options.minZoom!==void 0&&J<R.options.minZoom||R.options.maxZoom!==void 0&&J>R.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var g=this._section;this._preventClick=!0,_n(g,"click",tr),this.expand();var E=this;setTimeout(function(){rn(g,"click",tr),E._preventClick=!1})}}),Rs=function(g,E,R){return new Un(g,E,R)},rr=Vi.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(g){var E="leaflet-control-zoom",R=Yn("div",E+" leaflet-bar"),J=this.options;return this._zoomInButton=this._createButton(J.zoomInText,J.zoomInTitle,E+"-in",R,this._zoomIn),this._zoomOutButton=this._createButton(J.zoomOutText,J.zoomOutTitle,E+"-out",R,this._zoomOut),this._updateDisabled(),g.on("zoomend zoomlevelschange",this._updateDisabled,this),R},onRemove:function(g){g.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(g){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(g.shiftKey?3:1))},_zoomOut:function(g){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(g.shiftKey?3:1))},_createButton:function(g,E,R,J,he){var Te=Yn("a",R,J);return Te.innerHTML=g,Te.href="#",Te.title=E,Te.setAttribute("role","button"),Te.setAttribute("aria-label",E),To(Te),_n(Te,"click",Qi),_n(Te,"click",he,this),_n(Te,"click",this._refocusOnMap,this),Te},_updateDisabled:function(){var g=this._map,E="leaflet-disabled";Yr(this._zoomInButton,E),Yr(this._zoomOutButton,E),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||g._zoom===g.getMinZoom())&&(Fn(this._zoomOutButton,E),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||g._zoom===g.getMaxZoom())&&(Fn(this._zoomInButton,E),this._zoomInButton.setAttribute("aria-disabled","true"))}});nr.mergeOptions({zoomControl:!0}),nr.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new rr,this.addControl(this.zoomControl))});var Wc=function(g){return new rr(g)},Jr=Vi.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(g){var E="leaflet-control-scale",R=Yn("div",E),J=this.options;return this._addScales(J,E+"-line",R),g.on(J.updateWhenIdle?"moveend":"move",this._update,this),g.whenReady(this._update,this),R},onRemove:function(g){g.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(g,E,R){g.metric&&(this._mScale=Yn("div",E,R)),g.imperial&&(this._iScale=Yn("div",E,R))},_update:function(){var g=this._map,E=g.getSize().y/2,R=g.distance(g.containerPointToLatLng([0,E]),g.containerPointToLatLng([this.options.maxWidth,E]));this._updateScales(R)},_updateScales:function(g){this.options.metric&&g&&this._updateMetric(g),this.options.imperial&&g&&this._updateImperial(g)},_updateMetric:function(g){var E=this._getRoundNum(g),R=E<1e3?E+" m":E/1e3+" km";this._updateScale(this._mScale,R,E/g)},_updateImperial:function(g){var E=g*3.2808399,R,J,he;E>5280?(R=E/5280,J=this._getRoundNum(R),this._updateScale(this._iScale,J+" mi",J/R)):(he=this._getRoundNum(E),this._updateScale(this._iScale,he+" ft",he/E))},_updateScale:function(g,E,R){g.style.width=Math.round(this.options.maxWidth*R)+"px",g.innerHTML=E},_getRoundNum:function(g){var E=Math.pow(10,(Math.floor(g)+"").length-1),R=g/E;return R=R>=10?10:R>=5?5:R>=3?3:R>=2?2:1,E*R}}),Wo=function(g){return new Jr(g)},cs='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',ml=Vi.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(ht.inlineSvg?cs+" ":"")+"Leaflet</a>"},initialize:function(g){$(this,g),this._attributions={}},onAdd:function(g){g.attributionControl=this,this._container=Yn("div","leaflet-control-attribution"),To(this._container);for(var E in g._layers)g._layers[E].getAttribution&&this.addAttribution(g._layers[E].getAttribution());return this._update(),g.on("layeradd",this._addAttribution,this),this._container},onRemove:function(g){g.off("layeradd",this._addAttribution,this)},_addAttribution:function(g){g.layer.getAttribution&&(this.addAttribution(g.layer.getAttribution()),g.layer.once("remove",function(){this.removeAttribution(g.layer.getAttribution())},this))},setPrefix:function(g){return this.options.prefix=g,this._update(),this},addAttribution:function(g){return g?(this._attributions[g]||(this._attributions[g]=0),this._attributions[g]++,this._update(),this):this},removeAttribution:function(g){return g?(this._attributions[g]&&(this._attributions[g]--,this._update()),this):this},_update:function(){if(this._map){var g=[];for(var E in this._attributions)this._attributions[E]&&g.push(E);var R=[];this.options.prefix&&R.push(this.options.prefix),g.length&&R.push(g.join(", ")),this._container.innerHTML=R.join(' <span aria-hidden="true">|</span> ')}}});nr.mergeOptions({attributionControl:!0}),nr.addInitHook(function(){this.options.attributionControl&&new ml().addTo(this)});var Du=function(g){return new ml(g)};Vi.Layers=Un,Vi.Zoom=rr,Vi.Scale=Jr,Vi.Attribution=ml,Zn.layers=Rs,Zn.zoom=Wc,Zn.scale=Wo,Zn.attribution=Du;var Ra=De.extend({initialize:function(g){this._map=g},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ra.addTo=function(g,E){return g.addHandler(E,this),this};var Ph={Events:Ve},Jl=ht.touch?"touchstart mousedown":"mousedown",Qr=et.extend({options:{clickTolerance:3},initialize:function(g,E,R,J){$(this,J),this._element=g,this._dragStartTarget=E||g,this._preventOutline=R},enable:function(){this._enabled||(_n(this._dragStartTarget,Jl,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Qr._dragging===this&&this.finishDrag(!0),rn(this._dragStartTarget,Jl,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(g){if(this._enabled&&(this._moved=!1,!Yl(this._element,"leaflet-zoom-anim"))){if(g.touches&&g.touches.length!==1){Qr._dragging===this&&this.finishDrag();return}if(!(Qr._dragging||g.shiftKey||g.which!==1&&g.button!==1&&!g.touches)&&(Qr._dragging=this,this._preventOutline&&Bn(this._element),qc(),pr(),!this._moving)){this.fire("down");var E=g.touches?g.touches[0]:g,R=Ds(this._element);this._startPoint=new Ce(E.clientX,E.clientY),this._startPos=Is(this._element),this._parentScale=So(R);var J=g.type==="mousedown";_n(document,J?"mousemove":"touchmove",this._onMove,this),_n(document,J?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(g){if(this._enabled){if(g.touches&&g.touches.length>1){this._moved=!0;return}var E=g.touches&&g.touches.length===1?g.touches[0]:g,R=new Ce(E.clientX,E.clientY)._subtract(this._startPoint);!R.x&&!R.y||Math.abs(R.x)+Math.abs(R.y)<this.options.clickTolerance||(R.x/=this._parentScale.x,R.y/=this._parentScale.y,tr(g),this._moved||(this.fire("dragstart"),this._moved=!0,Fn(document.body,"leaflet-dragging"),this._lastTarget=g.target||g.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Fn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(R),this._moving=!0,this._lastEvent=g,this._updatePosition())}},_updatePosition:function(){var g={originalEvent:this._lastEvent};this.fire("predrag",g),yi(this._element,this._newPos),this.fire("drag",g)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(g){Yr(document.body,"leaflet-dragging"),this._lastTarget&&(Yr(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),rn(document,"mousemove touchmove",this._onMove,this),rn(document,"mouseup touchend touchcancel",this._onUp,this),hl(),Ns();var E=this._moved&&this._moving;this._moving=!1,Qr._dragging=!1,E&&this.fire("dragend",{noInertia:g,distance:this._newPos.distanceTo(this._startPos)})}});function Po(g,E,R){var J,he=[1,4,2,8],Te,Xe,mt,Pt,Vt,sn,On,ir;for(Te=0,sn=g.length;Te<sn;Te++)g[Te]._code=Fs(g[Te],E);for(mt=0;mt<4;mt++){for(On=he[mt],J=[],Te=0,sn=g.length,Xe=sn-1;Te<sn;Xe=Te++)Pt=g[Te],Vt=g[Xe],Pt._code&On?Vt._code&On||(ir=zs(Vt,Pt,On,E,R),ir._code=Fs(ir,E),J.push(ir)):(Vt._code&On&&(ir=zs(Vt,Pt,On,E,R),ir._code=Fs(ir,E),J.push(ir)),J.push(Pt));g=J}return g}function qr(g,E){var R,J,he,Te,Xe,mt,Pt,Vt,sn;if(!g||g.length===0)throw new Error("latlngs not passed");ea(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var On=Nt([0,0]),ir=Ct(g),wi=ir.getNorthWest().distanceTo(ir.getSouthWest())*ir.getNorthEast().distanceTo(ir.getNorthWest());wi<1700&&(On=Ls(g));var Si=g.length,Fa=[];for(R=0;R<Si;R++){var ja=Nt(g[R]);Fa.push(E.project(Nt([ja.lat-On.lat,ja.lng-On.lng])))}for(mt=Pt=Vt=0,R=0,J=Si-1;R<Si;J=R++)he=Fa[R],Te=Fa[J],Xe=he.y*Te.x-Te.y*he.x,Pt+=(he.x+Te.x)*Xe,Vt+=(he.y+Te.y)*Xe,mt+=Xe*3;mt===0?sn=Fa[0]:sn=[Pt/mt,Vt/mt];var ds=E.unproject(Qe(sn));return Nt([ds.lat+On.lat,ds.lng+On.lng])}function Ls(g){for(var E=0,R=0,J=0,he=0;he<g.length;he++){var Te=Nt(g[he]);E+=Te.lat,R+=Te.lng,J++}return Nt([E/J,R/J])}var Ah={__proto__:null,clipPolygon:Po,polygonCenter:qr,centroid:Ls};function gl(g,E){if(!E||!g.length)return g.slice();var R=E*E;return g=Vp(g,R),g=Ch(g,R),g}function ai(g,E,R){return Math.sqrt(Ao(g,E,R,!0))}function Ef(g,E,R){return Ao(g,E,R)}function Ch(g,E){var R=g.length,J=typeof Uint8Array<"u"?Uint8Array:Array,he=new J(R);he[0]=he[R-1]=1,Id(g,he,E,0,R-1);var Te,Xe=[];for(Te=0;Te<R;Te++)he[Te]&&Xe.push(g[Te]);return Xe}function Id(g,E,R,J,he){var Te=0,Xe,mt,Pt;for(mt=J+1;mt<=he-1;mt++)Pt=Ao(g[mt],g[J],g[he],!0),Pt>Te&&(Xe=mt,Te=Pt);Te>R&&(E[Xe]=1,Id(g,E,R,J,Xe),Id(g,E,R,Xe,he))}function Vp(g,E){for(var R=[g[0]],J=1,he=0,Te=g.length;J<Te;J++)Ru(g[J],g[he])>E&&(R.push(g[J]),he=J);return he<Te-1&&R.push(g[Te-1]),R}var yl;function Ou(g,E,R,J,he){var Te=J?yl:Fs(g,R),Xe=Fs(E,R),mt,Pt,Vt;for(yl=Xe;;){if(!(Te|Xe))return[g,E];if(Te&Xe)return!1;mt=Te||Xe,Pt=zs(g,E,mt,R,he),Vt=Fs(Pt,R),mt===Te?(g=Pt,Te=Vt):(E=Pt,Xe=Vt)}}function zs(g,E,R,J,he){var Te=E.x-g.x,Xe=E.y-g.y,mt=J.min,Pt=J.max,Vt,sn;return R&8?(Vt=g.x+Te*(Pt.y-g.y)/Xe,sn=Pt.y):R&4?(Vt=g.x+Te*(mt.y-g.y)/Xe,sn=mt.y):R&2?(Vt=Pt.x,sn=g.y+Xe*(Pt.x-g.x)/Te):R&1&&(Vt=mt.x,sn=g.y+Xe*(mt.x-g.x)/Te),new Ce(Vt,sn,he)}function Fs(g,E){var R=0;return g.x<E.min.x?R|=1:g.x>E.max.x&&(R|=2),g.y<E.min.y?R|=4:g.y>E.max.y&&(R|=8),R}function Ru(g,E){var R=E.x-g.x,J=E.y-g.y;return R*R+J*J}function Ao(g,E,R,J){var he=E.x,Te=E.y,Xe=R.x-he,mt=R.y-Te,Pt=Xe*Xe+mt*mt,Vt;return Pt>0&&(Vt=((g.x-he)*Xe+(g.y-Te)*mt)/Pt,Vt>1?(he=R.x,Te=R.y):Vt>0&&(he+=Xe*Vt,Te+=mt*Vt)),Xe=g.x-he,mt=g.y-Te,J?Xe*Xe+mt*mt:new Ce(he,Te)}function ea(g){return!te(g[0])||typeof g[0][0]!="object"&&typeof g[0][0]<"u"}function bi(g){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ea(g)}function Eh(g,E){var R,J,he,Te,Xe,mt,Pt,Vt;if(!g||g.length===0)throw new Error("latlngs not passed");ea(g)||(console.warn("latlngs are not flat! Only the first ring will be used"),g=g[0]);var sn=Nt([0,0]),On=Ct(g),ir=On.getNorthWest().distanceTo(On.getSouthWest())*On.getNorthEast().distanceTo(On.getNorthWest());ir<1700&&(sn=Ls(g));var wi=g.length,Si=[];for(R=0;R<wi;R++){var Fa=Nt(g[R]);Si.push(E.project(Nt([Fa.lat-sn.lat,Fa.lng-sn.lng])))}for(R=0,J=0;R<wi-1;R++)J+=Si[R].distanceTo(Si[R+1])/2;if(J===0)Vt=Si[0];else for(R=0,Te=0;R<wi-1;R++)if(Xe=Si[R],mt=Si[R+1],he=Xe.distanceTo(mt),Te+=he,Te>J){Pt=(Te-J)/he,Vt=[mt.x-Pt*(mt.x-Xe.x),mt.y-Pt*(mt.y-Xe.y)];break}var ja=E.unproject(Qe(Vt));return Nt([ja.lat+sn.lat,ja.lng+sn.lng])}var Ql={__proto__:null,simplify:gl,pointToSegmentDistance:ai,closestPointOnSegment:Ef,clipSegment:Ou,_getEdgeIntersection:zs,_getBitCode:Fs,_sqClosestPointOnSegment:Ao,isFlat:ea,_flat:bi,polylineCenter:Eh},ec={project:function(g){return new Ce(g.lng,g.lat)},unproject:function(g){return new Mt(g.y,g.x)},bounds:new Re([-180,-90],[180,90])},Bs={R:6378137,R_MINOR:6356752314245179e-9,bounds:new Re([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(g){var E=Math.PI/180,R=this.R,J=g.lat*E,he=this.R_MINOR/R,Te=Math.sqrt(1-he*he),Xe=Te*Math.sin(J),mt=Math.tan(Math.PI/4-J/2)/Math.pow((1-Xe)/(1+Xe),Te/2);return J=-R*Math.log(Math.max(mt,1e-10)),new Ce(g.lng*E*R,J)},unproject:function(g){for(var E=180/Math.PI,R=this.R,J=this.R_MINOR/R,he=Math.sqrt(1-J*J),Te=Math.exp(-g.y/R),Xe=Math.PI/2-2*Math.atan(Te),mt=0,Pt=.1,Vt;mt<15&&Math.abs(Pt)>1e-7;mt++)Vt=he*Math.sin(Xe),Vt=Math.pow((1-Vt)/(1+Vt),he/2),Pt=Math.PI/2-2*Math.atan(Te*Vt)-Xe,Xe+=Pt;return new Mt(Xe*E,g.x*E/R)}},Up={__proto__:null,LonLat:ec,Mercator:Bs,SphericalMercator:zt},Nd=s({},Ot,{code:"EPSG:3395",projection:Bs,transformation:(function(){var g=.5/(Math.PI*Bs.R);return dt(g,.5,-g,.5)})()}),jf=s({},Ot,{code:"EPSG:4326",projection:ec,transformation:dt(1/180,1,-1/180,.5)}),Hc=s({},Tt,{projection:ec,transformation:dt(1,0,-1,0),scale:function(g){return Math.pow(2,g)},zoom:function(g){return Math.log(g)/Math.LN2},distance:function(g,E){var R=E.lng-g.lng,J=E.lat-g.lat;return Math.sqrt(R*R+J*J)},infinite:!0});Tt.Earth=Ot,Tt.EPSG3395=Nd,Tt.EPSG3857=Rn,Tt.EPSG900913=cn,Tt.EPSG4326=jf,Tt.Simple=Hc;var La=et.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(g){return g.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(g){return g&&g.removeLayer(this),this},getPane:function(g){return this._map.getPane(g?this.options[g]||g:this.options.pane)},addInteractiveTarget:function(g){return this._map._targets[_(g)]=this,this},removeInteractiveTarget:function(g){return delete this._map._targets[_(g)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(g){var E=g.target;if(E.hasLayer(this)){if(this._map=E,this._zoomAnimated=E._zoomAnimated,this.getEvents){var R=this.getEvents();E.on(R,this),this.once("remove",function(){E.off(R,this)},this)}this.onAdd(E),this.fire("add"),E.fire("layeradd",{layer:this})}}});nr.include({addLayer:function(g){if(!g._layerAdd)throw new Error("The provided object is not a Layer.");var E=_(g);return this._layers[E]?this:(this._layers[E]=g,g._mapToAdd=this,g.beforeAdd&&g.beforeAdd(this),this.whenReady(g._layerAdd,g),this)},removeLayer:function(g){var E=_(g);return this._layers[E]?(this._loaded&&g.onRemove(this),delete this._layers[E],this._loaded&&(this.fire("layerremove",{layer:g}),g.fire("remove")),g._map=g._mapToAdd=null,this):this},hasLayer:function(g){return _(g)in this._layers},eachLayer:function(g,E){for(var R in this._layers)g.call(E,this._layers[R]);return this},_addLayers:function(g){g=g?te(g)?g:[g]:[];for(var E=0,R=g.length;E<R;E++)this.addLayer(g[E])},_addZoomLimit:function(g){(!isNaN(g.options.maxZoom)||!isNaN(g.options.minZoom))&&(this._zoomBoundLayers[_(g)]=g,this._updateZoomLevels())},_removeZoomLimit:function(g){var E=_(g);this._zoomBoundLayers[E]&&(delete this._zoomBoundLayers[E],this._updateZoomLevels())},_updateZoomLevels:function(){var g=1/0,E=-1/0,R=this._getZoomSpan();for(var J in this._zoomBoundLayers){var he=this._zoomBoundLayers[J].options;g=he.minZoom===void 0?g:Math.min(g,he.minZoom),E=he.maxZoom===void 0?E:Math.max(E,he.maxZoom)}this._layersMaxZoom=E===-1/0?void 0:E,this._layersMinZoom=g===1/0?void 0:g,R!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var $s=La.extend({initialize:function(g,E){$(this,E),this._layers={};var R,J;if(g)for(R=0,J=g.length;R<J;R++)this.addLayer(g[R])},addLayer:function(g){var E=this.getLayerId(g);return this._layers[E]=g,this._map&&this._map.addLayer(g),this},removeLayer:function(g){var E=g in this._layers?g:this.getLayerId(g);return this._map&&this._layers[E]&&this._map.removeLayer(this._layers[E]),delete this._layers[E],this},hasLayer:function(g){var E=typeof g=="number"?g:this.getLayerId(g);return E in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(g){var E=Array.prototype.slice.call(arguments,1),R,J;for(R in this._layers)J=this._layers[R],J[g]&&J[g].apply(J,E);return this},onAdd:function(g){this.eachLayer(g.addLayer,g)},onRemove:function(g){this.eachLayer(g.removeLayer,g)},eachLayer:function(g,E){for(var R in this._layers)g.call(E,this._layers[R]);return this},getLayer:function(g){return this._layers[g]},getLayers:function(){var g=[];return this.eachLayer(g.push,g),g},setZIndex:function(g){return this.invoke("setZIndex",g)},getLayerId:function(g){return _(g)}}),Zc=function(g,E){return new $s(g,E)},Ho=$s.extend({addLayer:function(g){return this.hasLayer(g)?this:(g.addEventParent(this),$s.prototype.addLayer.call(this,g),this.fire("layeradd",{layer:g}))},removeLayer:function(g){return this.hasLayer(g)?(g in this._layers&&(g=this._layers[g]),g.removeEventParent(this),$s.prototype.removeLayer.call(this,g),this.fire("layerremove",{layer:g})):this},setStyle:function(g){return this.invoke("setStyle",g)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var g=new pt;for(var E in this._layers){var R=this._layers[E];g.extend(R.getBounds?R.getBounds():R.getLatLng())}return g}}),Dd=function(g,E){return new Ho(g,E)},Vs=De.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(g){$(this,g)},createIcon:function(g){return this._createIcon("icon",g)},createShadow:function(g){return this._createIcon("shadow",g)},_createIcon:function(g,E){var R=this._getIconUrl(g);if(!R){if(g==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var J=this._createImg(R,E&&E.tagName==="IMG"?E:null);return this._setIconStyles(J,g),(this.options.crossOrigin||this.options.crossOrigin==="")&&(J.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),J},_setIconStyles:function(g,E){var R=this.options,J=R[E+"Size"];typeof J=="number"&&(J=[J,J]);var he=Qe(J),Te=Qe(E==="shadow"&&R.shadowAnchor||R.iconAnchor||he&&he.divideBy(2,!0));g.className="leaflet-marker-"+E+" "+(R.className||""),Te&&(g.style.marginLeft=-Te.x+"px",g.style.marginTop=-Te.y+"px"),he&&(g.style.width=he.x+"px",g.style.height=he.y+"px")},_createImg:function(g,E){return E=E||document.createElement("img"),E.src=g,E},_getIconUrl:function(g){return ht.retina&&this.options[g+"RetinaUrl"]||this.options[g+"Url"]}});function jh(g){return new Vs(g)}var tc=Vs.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(g){return typeof tc.imagePath!="string"&&(tc.imagePath=this._detectIconPath()),(this.options.imagePath||tc.imagePath)+Vs.prototype._getIconUrl.call(this,g)},_stripUrl:function(g){var E=function(R,J,he){var Te=J.exec(R);return Te&&Te[he]};return g=E(g,/^url\((['"])?(.+)\1\)$/,2),g&&E(g,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var g=Yn("div","leaflet-default-icon-path",document.body),E=Ca(g,"background-image")||Ca(g,"backgroundImage");if(document.body.removeChild(g),E=this._stripUrl(E),E)return E;var R=document.querySelector('link[href$="leaflet.css"]');return R?R.href.substring(0,R.href.length-11-1):""}}),Od=Ra.extend({initialize:function(g){this._marker=g},addHooks:function(){var g=this._marker._icon;this._draggable||(this._draggable=new Qr(g,g,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Fn(g,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Yr(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(g){var E=this._marker,R=E._map,J=this._marker.options.autoPanSpeed,he=this._marker.options.autoPanPadding,Te=Is(E._icon),Xe=R.getPixelBounds(),mt=R.getPixelOrigin(),Pt=nt(Xe.min._subtract(mt).add(he),Xe.max._subtract(mt).subtract(he));if(!Pt.contains(Te)){var Vt=Qe((Math.max(Pt.max.x,Te.x)-Pt.max.x)/(Xe.max.x-Pt.max.x)-(Math.min(Pt.min.x,Te.x)-Pt.min.x)/(Xe.min.x-Pt.min.x),(Math.max(Pt.max.y,Te.y)-Pt.max.y)/(Xe.max.y-Pt.max.y)-(Math.min(Pt.min.y,Te.y)-Pt.min.y)/(Xe.min.y-Pt.min.y)).multiplyBy(J);R.panBy(Vt,{animate:!1}),this._draggable._newPos._add(Vt),this._draggable._startPos._add(Vt),yi(E._icon,this._draggable._newPos),this._onDrag(g),this._panRequest=fe(this._adjustPan.bind(this,g))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(g){this._marker.options.autoPan&&(Ee(this._panRequest),this._panRequest=fe(this._adjustPan.bind(this,g)))},_onDrag:function(g){var E=this._marker,R=E._shadow,J=Is(E._icon),he=E._map.layerPointToLatLng(J);R&&yi(R,J),E._latlng=he,g.latlng=he,g.oldLatLng=this._oldLatLng,E.fire("move",g).fire("drag",g)},_onDragEnd:function(g){Ee(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",g)}}),Ea=La.extend({options:{icon:new tc,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(g,E){$(this,E),this._latlng=Nt(g)},onAdd:function(g){this._zoomAnimated=this._zoomAnimated&&g.options.markerZoomAnimation,this._zoomAnimated&&g.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(g){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&g.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(g){var E=this._latlng;return this._latlng=Nt(g),this.update(),this.fire("move",{oldLatLng:E,latlng:this._latlng})},setZIndexOffset:function(g){return this.options.zIndexOffset=g,this.update()},getIcon:function(){return this.options.icon},setIcon:function(g){return this.options.icon=g,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var g=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(g)}return this},_initIcon:function(){var g=this.options,E="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),R=g.icon.createIcon(this._icon),J=!1;R!==this._icon&&(this._icon&&this._removeIcon(),J=!0,g.title&&(R.title=g.title),R.tagName==="IMG"&&(R.alt=g.alt||"")),Fn(R,E),g.keyboard&&(R.tabIndex="0",R.setAttribute("role","button")),this._icon=R,g.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&_n(R,"focus",this._panOnFocus,this);var he=g.icon.createShadow(this._shadow),Te=!1;he!==this._shadow&&(this._removeShadow(),Te=!0),he&&(Fn(he,E),he.alt=""),this._shadow=he,g.opacity<1&&this._updateOpacity(),J&&this.getPane().appendChild(this._icon),this._initInteraction(),he&&Te&&this.getPane(g.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&rn(this._icon,"focus",this._panOnFocus,this),jr(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&jr(this._shadow),this._shadow=null},_setPos:function(g){this._icon&&yi(this._icon,g),this._shadow&&yi(this._shadow,g),this._zIndex=g.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(g){this._icon&&(this._icon.style.zIndex=this._zIndex+g)},_animateZoom:function(g){var E=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center).round();this._setPos(E)},_initInteraction:function(){if(this.options.interactive&&(Fn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Od)){var g=this.options.draggable;this.dragging&&(g=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Od(this),g&&this.dragging.enable()}},setOpacity:function(g){return this.options.opacity=g,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var g=this.options.opacity;this._icon&&Yi(this._icon,g),this._shadow&&Yi(this._shadow,g)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var g=this._map;if(g){var E=this.options.icon.options,R=E.iconSize?Qe(E.iconSize):Qe(0,0),J=E.iconAnchor?Qe(E.iconAnchor):Qe(0,0);g.panInside(this._latlng,{paddingTopLeft:J,paddingBottomRight:R.subtract(J)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Mf(g,E){return new Ea(g,E)}var us=La.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(g){this._renderer=g.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(g){return $(this,g),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&g&&Object.prototype.hasOwnProperty.call(g,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),Us=us.extend({options:{fill:!0,radius:10},initialize:function(g,E){$(this,E),this._latlng=Nt(g),this._radius=this.options.radius},setLatLng:function(g){var E=this._latlng;return this._latlng=Nt(g),this.redraw(),this.fire("move",{oldLatLng:E,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(g){return this.options.radius=this._radius=g,this.redraw()},getRadius:function(){return this._radius},setStyle:function(g){var E=g&&g.radius||this._radius;return us.prototype.setStyle.call(this,g),this.setRadius(E),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var g=this._radius,E=this._radiusY||g,R=this._clickTolerance(),J=[g+R,E+R];this._pxBounds=new Re(this._point.subtract(J),this._point.add(J))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(g){return g.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Mh(g,E){return new Us(g,E)}var nc=Us.extend({initialize:function(g,E,R){if(typeof E=="number"&&(E=s({},R,{radius:E})),$(this,E),this._latlng=Nt(g),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(g){return this._mRadius=g,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var g=[this._radius,this._radiusY||this._radius];return new pt(this._map.layerPointToLatLng(this._point.subtract(g)),this._map.layerPointToLatLng(this._point.add(g)))},setStyle:us.prototype.setStyle,_project:function(){var g=this._latlng.lng,E=this._latlng.lat,R=this._map,J=R.options.crs;if(J.distance===Ot.distance){var he=Math.PI/180,Te=this._mRadius/Ot.R/he,Xe=R.project([E+Te,g]),mt=R.project([E-Te,g]),Pt=Xe.add(mt).divideBy(2),Vt=R.unproject(Pt).lat,sn=Math.acos((Math.cos(Te*he)-Math.sin(E*he)*Math.sin(Vt*he))/(Math.cos(E*he)*Math.cos(Vt*he)))/he;(isNaN(sn)||sn===0)&&(sn=Te/Math.cos(Math.PI/180*E)),this._point=Pt.subtract(R.getPixelOrigin()),this._radius=isNaN(sn)?0:Pt.x-R.project([Vt,g-sn]).x,this._radiusY=Pt.y-Xe.y}else{var On=J.unproject(J.project(this._latlng).subtract([this._mRadius,0]));this._point=R.latLngToLayerPoint(this._latlng),this._radius=this._point.x-R.latLngToLayerPoint(On).x}this._updateBounds()}});function Lu(g,E,R){return new nc(g,E,R)}var to=us.extend({options:{smoothFactor:1,noClip:!1},initialize:function(g,E){$(this,E),this._setLatLngs(g)},getLatLngs:function(){return this._latlngs},setLatLngs:function(g){return this._setLatLngs(g),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(g){for(var E=1/0,R=null,J=Ao,he,Te,Xe=0,mt=this._parts.length;Xe<mt;Xe++)for(var Pt=this._parts[Xe],Vt=1,sn=Pt.length;Vt<sn;Vt++){he=Pt[Vt-1],Te=Pt[Vt];var On=J(g,he,Te,!0);On<E&&(E=On,R=J(g,he,Te))}return R&&(R.distance=Math.sqrt(E)),R},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Eh(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(g,E){return E=E||this._defaultShape(),g=Nt(g),E.push(g),this._bounds.extend(g),this.redraw()},_setLatLngs:function(g){this._bounds=new pt,this._latlngs=this._convertLatLngs(g)},_defaultShape:function(){return ea(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(g){for(var E=[],R=ea(g),J=0,he=g.length;J<he;J++)R?(E[J]=Nt(g[J]),this._bounds.extend(E[J])):E[J]=this._convertLatLngs(g[J]);return E},_project:function(){var g=new Re;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,g),this._bounds.isValid()&&g.isValid()&&(this._rawPxBounds=g,this._updateBounds())},_updateBounds:function(){var g=this._clickTolerance(),E=new Ce(g,g);this._rawPxBounds&&(this._pxBounds=new Re([this._rawPxBounds.min.subtract(E),this._rawPxBounds.max.add(E)]))},_projectLatlngs:function(g,E,R){var J=g[0]instanceof Mt,he=g.length,Te,Xe;if(J){for(Xe=[],Te=0;Te<he;Te++)Xe[Te]=this._map.latLngToLayerPoint(g[Te]),R.extend(Xe[Te]);E.push(Xe)}else for(Te=0;Te<he;Te++)this._projectLatlngs(g[Te],E,R)},_clipPoints:function(){var g=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}var E=this._parts,R,J,he,Te,Xe,mt,Pt;for(R=0,he=0,Te=this._rings.length;R<Te;R++)for(Pt=this._rings[R],J=0,Xe=Pt.length;J<Xe-1;J++)mt=Ou(Pt[J],Pt[J+1],g,J,!0),mt&&(E[he]=E[he]||[],E[he].push(mt[0]),(mt[1]!==Pt[J+1]||J===Xe-2)&&(E[he].push(mt[1]),he++))}},_simplifyPoints:function(){for(var g=this._parts,E=this.options.smoothFactor,R=0,J=g.length;R<J;R++)g[R]=gl(g[R],E)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(g,E){var R,J,he,Te,Xe,mt,Pt=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(R=0,Te=this._parts.length;R<Te;R++)for(mt=this._parts[R],J=0,Xe=mt.length,he=Xe-1;J<Xe;he=J++)if(!(!E&&J===0)&&ai(g,mt[he],mt[J])<=Pt)return!0;return!1}});function kf(g,E){return new to(g,E)}to._flat=bi;var no=to.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qr(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(g){var E=to.prototype._convertLatLngs.call(this,g),R=E.length;return R>=2&&E[0]instanceof Mt&&E[0].equals(E[R-1])&&E.pop(),E},_setLatLngs:function(g){to.prototype._setLatLngs.call(this,g),ea(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ea(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var g=this._renderer._bounds,E=this.options.weight,R=new Ce(E,E);if(g=new Re(g.min.subtract(R),g.max.add(R)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(g))){if(this.options.noClip){this._parts=this._rings;return}for(var J=0,he=this._rings.length,Te;J<he;J++)Te=Po(this._rings[J],g,!0),Te.length&&this._parts.push(Te)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(g){var E=!1,R,J,he,Te,Xe,mt,Pt,Vt;if(!this._pxBounds||!this._pxBounds.contains(g))return!1;for(Te=0,Pt=this._parts.length;Te<Pt;Te++)for(R=this._parts[Te],Xe=0,Vt=R.length,mt=Vt-1;Xe<Vt;mt=Xe++)J=R[Xe],he=R[mt],J.y>g.y!=he.y>g.y&&g.x<(he.x-J.x)*(g.y-J.y)/(he.y-J.y)+J.x&&(E=!E);return E||to.prototype._containsPoint.call(this,g,!0)}});function If(g,E){return new no(g,E)}var Co=Ho.extend({initialize:function(g,E){$(this,E),this._layers={},g&&this.addData(g)},addData:function(g){var E=te(g)?g:g.features,R,J,he;if(E){for(R=0,J=E.length;R<J;R++)he=E[R],(he.geometries||he.geometry||he.features||he.coordinates)&&this.addData(he);return this}var Te=this.options;if(Te.filter&&!Te.filter(g))return this;var Xe=rc(g,Te);return Xe?(Xe.feature=ac(g),Xe.defaultOptions=Xe.options,this.resetStyle(Xe),Te.onEachFeature&&Te.onEachFeature(g,Xe),this.addLayer(Xe)):this},resetStyle:function(g){return g===void 0?this.eachLayer(this.resetStyle,this):(g.options=s({},g.defaultOptions),this._setLayerStyle(g,this.options.style),this)},setStyle:function(g){return this.eachLayer(function(E){this._setLayerStyle(E,g)},this)},_setLayerStyle:function(g,E){g.setStyle&&(typeof E=="function"&&(E=E(g.feature)),g.setStyle(E))}});function rc(g,E){var R=g.type==="Feature"?g.geometry:g,J=R?R.coordinates:null,he=[],Te=E&&E.pointToLayer,Xe=E&&E.coordsToLatLng||za,mt,Pt,Vt,sn;if(!J&&!R)return null;switch(R.type){case"Point":return mt=Xe(J),ic(Te,g,mt,E);case"MultiPoint":for(Vt=0,sn=J.length;Vt<sn;Vt++)mt=Xe(J[Vt]),he.push(ic(Te,g,mt,E));return new Ho(he);case"LineString":case"MultiLineString":return Pt=vl(J,R.type==="LineString"?0:1,Xe),new to(Pt,E);case"Polygon":case"MultiPolygon":return Pt=vl(J,R.type==="Polygon"?1:2,Xe),new no(Pt,E);case"GeometryCollection":for(Vt=0,sn=R.geometries.length;Vt<sn;Vt++){var On=rc({geometry:R.geometries[Vt],type:"Feature",properties:g.properties},E);On&&he.push(On)}return new Ho(he);case"FeatureCollection":for(Vt=0,sn=R.features.length;Vt<sn;Vt++){var ir=rc(R.features[Vt],E);ir&&he.push(ir)}return new Ho(he);default:throw new Error("Invalid GeoJSON object.")}}function ic(g,E,R,J){return g?g(E,R):new Ea(R,J&&J.markersInheritOptions&&J)}function za(g){return new Mt(g[1],g[0],g[2])}function vl(g,E,R){for(var J=[],he=0,Te=g.length,Xe;he<Te;he++)Xe=E?vl(g[he],E-1,R):(R||za)(g[he]),J.push(Xe);return J}function Kc(g,E){return g=Nt(g),g.alt!==void 0?[N(g.lng,E),N(g.lat,E),N(g.alt,E)]:[N(g.lng,E),N(g.lat,E)]}function Xc(g,E,R,J){for(var he=[],Te=0,Xe=g.length;Te<Xe;Te++)he.push(E?Xc(g[Te],ea(g[Te])?0:E-1,R,J):Kc(g[Te],J));return!E&&R&&he.length>0&&he.push(he[0].slice()),he}function xl(g,E){return g.feature?s({},g.feature,{geometry:E}):ac(E)}function ac(g){return g.type==="Feature"||g.type==="FeatureCollection"?g:{type:"Feature",properties:{},geometry:g}}var qs={toGeoJSON:function(g){return xl(this,{type:"Point",coordinates:Kc(this.getLatLng(),g)})}};Ea.include(qs),nc.include(qs),Us.include(qs),to.include({toGeoJSON:function(g){var E=!ea(this._latlngs),R=Xc(this._latlngs,E?1:0,!1,g);return xl(this,{type:(E?"Multi":"")+"LineString",coordinates:R})}}),no.include({toGeoJSON:function(g){var E=!ea(this._latlngs),R=E&&!ea(this._latlngs[0]),J=Xc(this._latlngs,R?2:E?1:0,!0,g);return E||(J=[J]),xl(this,{type:(R?"Multi":"")+"Polygon",coordinates:J})}}),$s.include({toMultiPoint:function(g){var E=[];return this.eachLayer(function(R){E.push(R.toGeoJSON(g).geometry.coordinates)}),xl(this,{type:"MultiPoint",coordinates:E})},toGeoJSON:function(g){var E=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(E==="MultiPoint")return this.toMultiPoint(g);var R=E==="GeometryCollection",J=[];return this.eachLayer(function(he){if(he.toGeoJSON){var Te=he.toGeoJSON(g);if(R)J.push(Te.geometry);else{var Xe=ac(Te);Xe.type==="FeatureCollection"?J.push.apply(J,Xe.features):J.push(Xe)}}}),R?xl(this,{geometries:J,type:"GeometryCollection"}):{type:"FeatureCollection",features:J}}});function Rd(g,E){return new Co(g,E)}var Zo=Rd,Gs=La.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(g,E,R){this._url=g,this._bounds=Ct(E),$(this,R)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Fn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){jr(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(g){return this.options.opacity=g,this._image&&this._updateOpacity(),this},setStyle:function(g){return g.opacity&&this.setOpacity(g.opacity),this},bringToFront:function(){return this._map&&Or(this._image),this},bringToBack:function(){return this._map&&ss(this._image),this},setUrl:function(g){return this._url=g,this._image&&(this._image.src=g),this},setBounds:function(g){return this._bounds=Ct(g),this._map&&this._reset(),this},getEvents:function(){var g={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var g=this._url.tagName==="IMG",E=this._image=g?this._url:Yn("img");if(Fn(E,"leaflet-image-layer"),this._zoomAnimated&&Fn(E,"leaflet-zoom-animated"),this.options.className&&Fn(E,this.options.className),E.onselectstart=P,E.onmousemove=P,E.onload=d(this.fire,this,"load"),E.onerror=d(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(E.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),g){this._url=E.src;return}E.src=this._url,E.alt=this.options.alt},_animateZoom:function(g){var E=this._map.getZoomScale(g.zoom),R=this._map._latLngBoundsToNewLayerBounds(this._bounds,g.zoom,g.center).min;Ja(this._image,R,E)},_reset:function(){var g=this._image,E=new Re(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),R=E.getSize();yi(g,E.min),g.style.width=R.x+"px",g.style.height=R.y+"px"},_updateOpacity:function(){Yi(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var g=this.options.errorOverlayUrl;g&&this._url!==g&&(this._url=g,this._image.src=g)},getCenter:function(){return this._bounds.getCenter()}}),Nf=function(g,E,R){return new Gs(g,E,R)},kh=Gs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var g=this._url.tagName==="VIDEO",E=this._image=g?this._url:Yn("video");if(Fn(E,"leaflet-image-layer"),this._zoomAnimated&&Fn(E,"leaflet-zoom-animated"),this.options.className&&Fn(E,this.options.className),E.onselectstart=P,E.onmousemove=P,E.onloadeddata=d(this.fire,this,"load"),g){for(var R=E.getElementsByTagName("source"),J=[],he=0;he<R.length;he++)J.push(R[he].src);this._url=R.length>0?J:[E.src];return}te(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(E.style,"objectFit")&&(E.style.objectFit="fill"),E.autoplay=!!this.options.autoplay,E.loop=!!this.options.loop,E.muted=!!this.options.muted,E.playsInline=!!this.options.playsInline;for(var Te=0;Te<this._url.length;Te++){var Xe=Yn("source");Xe.src=this._url[Te],E.appendChild(Xe)}}});function Ih(g,E,R){return new kh(g,E,R)}var Nh=Gs.extend({_initImage:function(){var g=this._image=this._url;Fn(g,"leaflet-image-layer"),this._zoomAnimated&&Fn(g,"leaflet-zoom-animated"),this.options.className&&Fn(g,this.options.className),g.onselectstart=P,g.onmousemove=P}});function vr(g,E,R){return new Nh(g,E,R)}var ro=La.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(g,E){g&&(g instanceof Mt||te(g))?(this._latlng=Nt(g),$(this,E)):($(this,g),this._source=E),this.options.content&&(this._content=this.options.content)},openOn:function(g){return g=arguments.length?g:this._source._map,g.hasLayer(this)||g.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(g){return this._map?this.close():(arguments.length?this._source=g:g=this._source,this._prepareOpen(),this.openOn(g._map)),this},onAdd:function(g){this._zoomAnimated=g._zoomAnimated,this._container||this._initLayout(),g._fadeAnimated&&Yi(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),g._fadeAnimated&&Yi(this._container,1),this.bringToFront(),this.options.interactive&&(Fn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(g){g._fadeAnimated?(Yi(this._container,0),this._removeTimeout=setTimeout(d(jr,void 0,this._container),200)):jr(this._container),this.options.interactive&&(Yr(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(g){return this._latlng=Nt(g),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(g){return this._content=g,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var g={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Or(this._container),this},bringToBack:function(){return this._map&&ss(this._container),this},_prepareOpen:function(g){var E=this._source;if(!E._map)return!1;if(E instanceof Ho){E=null;var R=this._source._layers;for(var J in R)if(R[J]._map){E=R[J];break}if(!E)return!1;this._source=E}if(!g)if(E.getCenter)g=E.getCenter();else if(E.getLatLng)g=E.getLatLng();else if(E.getBounds)g=E.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(g),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var g=this._contentNode,E=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof E=="string")g.innerHTML=E;else{for(;g.hasChildNodes();)g.removeChild(g.firstChild);g.appendChild(E)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var g=this._map.latLngToLayerPoint(this._latlng),E=Qe(this.options.offset),R=this._getAnchor();this._zoomAnimated?yi(this._container,g.add(R)):E=E.add(g).add(R);var J=this._containerBottom=-E.y,he=this._containerLeft=-Math.round(this._containerWidth/2)+E.x;this._container.style.bottom=J+"px",this._container.style.left=he+"px"}},_getAnchor:function(){return[0,0]}});nr.include({_initOverlay:function(g,E,R,J){var he=E;return he instanceof g||(he=new g(J).setContent(E)),R&&he.setLatLng(R),he}}),La.include({_initOverlay:function(g,E,R,J){var he=R;return he instanceof g?($(he,J),he._source=this):(he=E&&!J?E:new g(J,this),he.setContent(R)),he}});var oc=ro.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(g){return g=arguments.length?g:this._source._map,!g.hasLayer(this)&&g._popup&&g._popup.options.autoClose&&g.removeLayer(g._popup),g._popup=this,ro.prototype.openOn.call(this,g)},onAdd:function(g){ro.prototype.onAdd.call(this,g),g.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof us||this._source.on("preclick",ii))},onRemove:function(g){ro.prototype.onRemove.call(this,g),g.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof us||this._source.off("preclick",ii))},getEvents:function(){var g=ro.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(g.preclick=this.close),this.options.keepInView&&(g.moveend=this._adjustPan),g},_initLayout:function(){var g="leaflet-popup",E=this._container=Yn("div",g+" "+(this.options.className||"")+" leaflet-zoom-animated"),R=this._wrapper=Yn("div",g+"-content-wrapper",E);if(this._contentNode=Yn("div",g+"-content",R),To(E),Os(this._contentNode),_n(E,"contextmenu",ii),this._tipContainer=Yn("div",g+"-tip-container",E),this._tip=Yn("div",g+"-tip",this._tipContainer),this.options.closeButton){var J=this._closeButton=Yn("a",g+"-close-button",E);J.setAttribute("role","button"),J.setAttribute("aria-label","Close popup"),J.href="#close",J.innerHTML='<span aria-hidden="true">&#215;</span>',_n(J,"click",function(he){tr(he),this.close()},this)}},_updateLayout:function(){var g=this._contentNode,E=g.style;E.width="",E.whiteSpace="nowrap";var R=g.offsetWidth;R=Math.min(R,this.options.maxWidth),R=Math.max(R,this.options.minWidth),E.width=R+1+"px",E.whiteSpace="",E.height="";var J=g.offsetHeight,he=this.options.maxHeight,Te="leaflet-popup-scrolled";he&&J>he?(E.height=he+"px",Fn(g,Te)):Yr(g,Te),this._containerWidth=this._container.offsetWidth},_animateZoom:function(g){var E=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center),R=this._getAnchor();yi(this._container,E.add(R))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var g=this._map,E=parseInt(Ca(this._container,"marginBottom"),10)||0,R=this._container.offsetHeight+E,J=this._containerWidth,he=new Ce(this._containerLeft,-R-this._containerBottom);he._add(Is(this._container));var Te=g.layerPointToContainerPoint(he),Xe=Qe(this.options.autoPanPadding),mt=Qe(this.options.autoPanPaddingTopLeft||Xe),Pt=Qe(this.options.autoPanPaddingBottomRight||Xe),Vt=g.getSize(),sn=0,On=0;Te.x+J+Pt.x>Vt.x&&(sn=Te.x+J-Vt.x+Pt.x),Te.x-sn-mt.x<0&&(sn=Te.x-mt.x),Te.y+R+Pt.y>Vt.y&&(On=Te.y+R-Vt.y+Pt.y),Te.y-On-mt.y<0&&(On=Te.y-mt.y),(sn||On)&&(this.options.keepInView&&(this._autopanning=!0),g.fire("autopanstart").panBy([sn,On]))}},_getAnchor:function(){return Qe(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Ws=function(g,E){return new oc(g,E)};nr.mergeOptions({closePopupOnClick:!0}),nr.include({openPopup:function(g,E,R){return this._initOverlay(oc,g,E,R).openOn(this),this},closePopup:function(g){return g=arguments.length?g:this._popup,g&&g.close(),this}}),La.include({bindPopup:function(g,E){return this._popup=this._initOverlay(oc,this._popup,g,E),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(g){return this._popup&&(this instanceof Ho||(this._popup._source=this),this._popup._prepareOpen(g||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(g){return this._popup&&this._popup.setContent(g),this},getPopup:function(){return this._popup},_openPopup:function(g){if(!(!this._popup||!this._map)){Qi(g);var E=g.layer||g.target;if(this._popup._source===E&&!(E instanceof us)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(g.latlng);return}this._popup._source=E,this.openPopup(g.latlng)}},_movePopup:function(g){this._popup.setLatLng(g.latlng)},_onKeyPress:function(g){g.originalEvent.keyCode===13&&this._openPopup(g)}});var _l=ro.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(g){ro.prototype.onAdd.call(this,g),this.setOpacity(this.options.opacity),g.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(g){ro.prototype.onRemove.call(this,g),g.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var g=ro.prototype.getEvents.call(this);return this.options.permanent||(g.preclick=this.close),g},_initLayout:function(){var g="leaflet-tooltip",E=g+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Yn("div",E),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+_(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(g){var E,R,J=this._map,he=this._container,Te=J.latLngToContainerPoint(J.getCenter()),Xe=J.layerPointToContainerPoint(g),mt=this.options.direction,Pt=he.offsetWidth,Vt=he.offsetHeight,sn=Qe(this.options.offset),On=this._getAnchor();mt==="top"?(E=Pt/2,R=Vt):mt==="bottom"?(E=Pt/2,R=0):mt==="center"?(E=Pt/2,R=Vt/2):mt==="right"?(E=0,R=Vt/2):mt==="left"?(E=Pt,R=Vt/2):Xe.x<Te.x?(mt="right",E=0,R=Vt/2):(mt="left",E=Pt+(sn.x+On.x)*2,R=Vt/2),g=g.subtract(Qe(E,R,!0)).add(sn).add(On),Yr(he,"leaflet-tooltip-right"),Yr(he,"leaflet-tooltip-left"),Yr(he,"leaflet-tooltip-top"),Yr(he,"leaflet-tooltip-bottom"),Fn(he,"leaflet-tooltip-"+mt),yi(he,g)},_updatePosition:function(){var g=this._map.latLngToLayerPoint(this._latlng);this._setPosition(g)},setOpacity:function(g){this.options.opacity=g,this._container&&Yi(this._container,g)},_animateZoom:function(g){var E=this._map._latLngToNewLayerPoint(this._latlng,g.zoom,g.center);this._setPosition(E)},_getAnchor:function(){return Qe(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Ko=function(g,E){return new _l(g,E)};nr.include({openTooltip:function(g,E,R){return this._initOverlay(_l,g,E,R).openOn(this),this},closeTooltip:function(g){return g.close(),this}}),La.include({bindTooltip:function(g,E){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(_l,this._tooltip,g,E),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(g){if(!(!g&&this._tooltipHandlersAdded)){var E=g?"off":"on",R={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?R.add=this._openTooltip:(R.mouseover=this._openTooltip,R.mouseout=this.closeTooltip,R.click=this._openTooltip,this._map?this._addFocusListeners():R.add=this._addFocusListeners),this._tooltip.options.sticky&&(R.mousemove=this._moveTooltip),this[E](R),this._tooltipHandlersAdded=!g}},openTooltip:function(g){return this._tooltip&&(this instanceof Ho||(this._tooltip._source=this),this._tooltip._prepareOpen(g)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(g){return this._tooltip&&this._tooltip.setContent(g),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(g){var E=typeof g.getElement=="function"&&g.getElement();E&&(_n(E,"focus",function(){this._tooltip._source=g,this.openTooltip()},this),_n(E,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(g){var E=typeof g.getElement=="function"&&g.getElement();E&&E.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(g){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var E=this;this._map.once("moveend",function(){E._openOnceFlag=!1,E._openTooltip(g)});return}this._tooltip._source=g.layer||g.target,this.openTooltip(this._tooltip.options.sticky?g.latlng:void 0)}},_moveTooltip:function(g){var E=g.latlng,R,J;this._tooltip.options.sticky&&g.originalEvent&&(R=this._map.mouseEventToContainerPoint(g.originalEvent),J=this._map.containerPointToLayerPoint(R),E=this._map.layerPointToLatLng(J)),this._tooltip.setLatLng(E)}});var bl=Vs.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(g){var E=g&&g.tagName==="DIV"?g:document.createElement("div"),R=this.options;if(R.html instanceof Element?(Xl(E),E.appendChild(R.html)):E.innerHTML=R.html!==!1?R.html:"",R.bgPos){var J=Qe(R.bgPos);E.style.backgroundPosition=-J.x+"px "+-J.y+"px"}return this._setIconStyles(E,"icon"),E},createShadow:function(){return null}});function sc(g){return new bl(g)}Vs.Default=tc;var Di=La.extend({options:{tileSize:256,opacity:1,updateWhenIdle:ht.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(g){$(this,g)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(g){g._addZoomLimit(this)},onRemove:function(g){this._removeAllTiles(),jr(this._container),g._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Or(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ss(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(g){return this.options.opacity=g,this._updateOpacity(),this},setZIndex:function(g){return this.options.zIndex=g,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var g=this._clampZoom(this._map.getZoom());g!==this._tileZoom&&(this._tileZoom=g,this._updateLevels()),this._update()}return this},getEvents:function(){var g={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=w(this._onMoveEnd,this.options.updateInterval,this)),g.move=this._onMove),this._zoomAnimated&&(g.zoomanim=this._animateZoom),g},createTile:function(){return document.createElement("div")},getTileSize:function(){var g=this.options.tileSize;return g instanceof Ce?g:new Ce(g,g)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(g){for(var E=this.getPane().children,R=-g(-1/0,1/0),J=0,he=E.length,Te;J<he;J++)Te=E[J].style.zIndex,E[J]!==this._container&&Te&&(R=g(R,+Te));isFinite(R)&&(this.options.zIndex=R+g(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!ht.ielt9){Yi(this._container,this.options.opacity);var g=+new Date,E=!1,R=!1;for(var J in this._tiles){var he=this._tiles[J];if(!(!he.current||!he.loaded)){var Te=Math.min(1,(g-he.loaded)/200);Yi(he.el,Te),Te<1?E=!0:(he.active?R=!0:this._onOpaqueTile(he),he.active=!0)}}R&&!this._noPrune&&this._pruneTiles(),E&&(Ee(this._fadeFrame),this._fadeFrame=fe(this._updateOpacity,this))}},_onOpaqueTile:P,_initContainer:function(){this._container||(this._container=Yn("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var g=this._tileZoom,E=this.options.maxZoom;if(g!==void 0){for(var R in this._levels)R=Number(R),this._levels[R].el.children.length||R===g?(this._levels[R].el.style.zIndex=E-Math.abs(g-R),this._onUpdateLevel(R)):(jr(this._levels[R].el),this._removeTilesAtZoom(R),this._onRemoveLevel(R),delete this._levels[R]);var J=this._levels[g],he=this._map;return J||(J=this._levels[g]={},J.el=Yn("div","leaflet-tile-container leaflet-zoom-animated",this._container),J.el.style.zIndex=E,J.origin=he.project(he.unproject(he.getPixelOrigin()),g).round(),J.zoom=g,this._setZoomTransform(J,he.getCenter(),he.getZoom()),P(J.el.offsetWidth),this._onCreateLevel(J)),this._level=J,J}},_onUpdateLevel:P,_onRemoveLevel:P,_onCreateLevel:P,_pruneTiles:function(){if(this._map){var g,E,R=this._map.getZoom();if(R>this.options.maxZoom||R<this.options.minZoom){this._removeAllTiles();return}for(g in this._tiles)E=this._tiles[g],E.retain=E.current;for(g in this._tiles)if(E=this._tiles[g],E.current&&!E.active){var J=E.coords;this._retainParent(J.x,J.y,J.z,J.z-5)||this._retainChildren(J.x,J.y,J.z,J.z+2)}for(g in this._tiles)this._tiles[g].retain||this._removeTile(g)}},_removeTilesAtZoom:function(g){for(var E in this._tiles)this._tiles[E].coords.z===g&&this._removeTile(E)},_removeAllTiles:function(){for(var g in this._tiles)this._removeTile(g)},_invalidateAll:function(){for(var g in this._levels)jr(this._levels[g].el),this._onRemoveLevel(Number(g)),delete this._levels[g];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(g,E,R,J){var he=Math.floor(g/2),Te=Math.floor(E/2),Xe=R-1,mt=new Ce(+he,+Te);mt.z=+Xe;var Pt=this._tileCoordsToKey(mt),Vt=this._tiles[Pt];return Vt&&Vt.active?(Vt.retain=!0,!0):(Vt&&Vt.loaded&&(Vt.retain=!0),Xe>J?this._retainParent(he,Te,Xe,J):!1)},_retainChildren:function(g,E,R,J){for(var he=2*g;he<2*g+2;he++)for(var Te=2*E;Te<2*E+2;Te++){var Xe=new Ce(he,Te);Xe.z=R+1;var mt=this._tileCoordsToKey(Xe),Pt=this._tiles[mt];if(Pt&&Pt.active){Pt.retain=!0;continue}else Pt&&Pt.loaded&&(Pt.retain=!0);R+1<J&&this._retainChildren(he,Te,R+1,J)}},_resetView:function(g){var E=g&&(g.pinch||g.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),E,E)},_animateZoom:function(g){this._setView(g.center,g.zoom,!0,g.noUpdate)},_clampZoom:function(g){var E=this.options;return E.minNativeZoom!==void 0&&g<E.minNativeZoom?E.minNativeZoom:E.maxNativeZoom!==void 0&&E.maxNativeZoom<g?E.maxNativeZoom:g},_setView:function(g,E,R,J){var he=Math.round(E);this.options.maxZoom!==void 0&&he>this.options.maxZoom||this.options.minZoom!==void 0&&he<this.options.minZoom?he=void 0:he=this._clampZoom(he);var Te=this.options.updateWhenZooming&&he!==this._tileZoom;(!J||Te)&&(this._tileZoom=he,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),he!==void 0&&this._update(g),R||this._pruneTiles(),this._noPrune=!!R),this._setZoomTransforms(g,E)},_setZoomTransforms:function(g,E){for(var R in this._levels)this._setZoomTransform(this._levels[R],g,E)},_setZoomTransform:function(g,E,R){var J=this._map.getZoomScale(R,g.zoom),he=g.origin.multiplyBy(J).subtract(this._map._getNewPixelOrigin(E,R)).round();ht.any3d?Ja(g.el,he,J):yi(g.el,he)},_resetGrid:function(){var g=this._map,E=g.options.crs,R=this._tileSize=this.getTileSize(),J=this._tileZoom,he=this._map.getPixelWorldBounds(this._tileZoom);he&&(this._globalTileRange=this._pxBoundsToTileRange(he)),this._wrapX=E.wrapLng&&!this.options.noWrap&&[Math.floor(g.project([0,E.wrapLng[0]],J).x/R.x),Math.ceil(g.project([0,E.wrapLng[1]],J).x/R.y)],this._wrapY=E.wrapLat&&!this.options.noWrap&&[Math.floor(g.project([E.wrapLat[0],0],J).y/R.x),Math.ceil(g.project([E.wrapLat[1],0],J).y/R.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(g){var E=this._map,R=E._animatingZoom?Math.max(E._animateToZoom,E.getZoom()):E.getZoom(),J=E.getZoomScale(R,this._tileZoom),he=E.project(g,this._tileZoom).floor(),Te=E.getSize().divideBy(J*2);return new Re(he.subtract(Te),he.add(Te))},_update:function(g){var E=this._map;if(E){var R=this._clampZoom(E.getZoom());if(g===void 0&&(g=E.getCenter()),this._tileZoom!==void 0){var J=this._getTiledPixelBounds(g),he=this._pxBoundsToTileRange(J),Te=he.getCenter(),Xe=[],mt=this.options.keepBuffer,Pt=new Re(he.getBottomLeft().subtract([mt,-mt]),he.getTopRight().add([mt,-mt]));if(!(isFinite(he.min.x)&&isFinite(he.min.y)&&isFinite(he.max.x)&&isFinite(he.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Vt in this._tiles){var sn=this._tiles[Vt].coords;(sn.z!==this._tileZoom||!Pt.contains(new Ce(sn.x,sn.y)))&&(this._tiles[Vt].current=!1)}if(Math.abs(R-this._tileZoom)>1){this._setView(g,R);return}for(var On=he.min.y;On<=he.max.y;On++)for(var ir=he.min.x;ir<=he.max.x;ir++){var wi=new Ce(ir,On);if(wi.z=this._tileZoom,!!this._isValidTile(wi)){var Si=this._tiles[this._tileCoordsToKey(wi)];Si?Si.current=!0:Xe.push(wi)}}if(Xe.sort(function(ja,ds){return ja.distanceTo(Te)-ds.distanceTo(Te)}),Xe.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Fa=document.createDocumentFragment();for(ir=0;ir<Xe.length;ir++)this._addTile(Xe[ir],Fa);this._level.el.appendChild(Fa)}}}},_isValidTile:function(g){var E=this._map.options.crs;if(!E.infinite){var R=this._globalTileRange;if(!E.wrapLng&&(g.x<R.min.x||g.x>R.max.x)||!E.wrapLat&&(g.y<R.min.y||g.y>R.max.y))return!1}if(!this.options.bounds)return!0;var J=this._tileCoordsToBounds(g);return Ct(this.options.bounds).overlaps(J)},_keyToBounds:function(g){return this._tileCoordsToBounds(this._keyToTileCoords(g))},_tileCoordsToNwSe:function(g){var E=this._map,R=this.getTileSize(),J=g.scaleBy(R),he=J.add(R),Te=E.unproject(J,g.z),Xe=E.unproject(he,g.z);return[Te,Xe]},_tileCoordsToBounds:function(g){var E=this._tileCoordsToNwSe(g),R=new pt(E[0],E[1]);return this.options.noWrap||(R=this._map.wrapLatLngBounds(R)),R},_tileCoordsToKey:function(g){return g.x+":"+g.y+":"+g.z},_keyToTileCoords:function(g){var E=g.split(":"),R=new Ce(+E[0],+E[1]);return R.z=+E[2],R},_removeTile:function(g){var E=this._tiles[g];E&&(jr(E.el),delete this._tiles[g],this.fire("tileunload",{tile:E.el,coords:this._keyToTileCoords(g)}))},_initTile:function(g){Fn(g,"leaflet-tile");var E=this.getTileSize();g.style.width=E.x+"px",g.style.height=E.y+"px",g.onselectstart=P,g.onmousemove=P,ht.ielt9&&this.options.opacity<1&&Yi(g,this.options.opacity)},_addTile:function(g,E){var R=this._getTilePos(g),J=this._tileCoordsToKey(g),he=this.createTile(this._wrapCoords(g),d(this._tileReady,this,g));this._initTile(he),this.createTile.length<2&&fe(d(this._tileReady,this,g,null,he)),yi(he,R),this._tiles[J]={el:he,coords:g,current:!0},E.appendChild(he),this.fire("tileloadstart",{tile:he,coords:g})},_tileReady:function(g,E,R){E&&this.fire("tileerror",{error:E,tile:R,coords:g});var J=this._tileCoordsToKey(g);R=this._tiles[J],R&&(R.loaded=+new Date,this._map._fadeAnimated?(Yi(R.el,0),Ee(this._fadeFrame),this._fadeFrame=fe(this._updateOpacity,this)):(R.active=!0,this._pruneTiles()),E||(Fn(R.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:R.el,coords:g})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),ht.ielt9||!this._map._fadeAnimated?fe(this._pruneTiles,this):setTimeout(d(this._pruneTiles,this),250)))},_getTilePos:function(g){return g.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(g){var E=new Ce(this._wrapX?A(g.x,this._wrapX):g.x,this._wrapY?A(g.y,this._wrapY):g.y);return E.z=g.z,E},_pxBoundsToTileRange:function(g){var E=this.getTileSize();return new Re(g.min.unscaleBy(E).floor(),g.max.unscaleBy(E).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var g in this._tiles)if(!this._tiles[g].loaded)return!1;return!0}});function lc(g){return new Di(g)}var Hs=Di.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(g,E){this._url=g,E=$(this,E),E.detectRetina&&ht.retina&&E.maxZoom>0?(E.tileSize=Math.floor(E.tileSize/2),E.zoomReverse?(E.zoomOffset--,E.minZoom=Math.min(E.maxZoom,E.minZoom+1)):(E.zoomOffset++,E.maxZoom=Math.max(E.minZoom,E.maxZoom-1)),E.minZoom=Math.max(0,E.minZoom)):E.zoomReverse?E.minZoom=Math.min(E.maxZoom,E.minZoom):E.maxZoom=Math.max(E.minZoom,E.maxZoom),typeof E.subdomains=="string"&&(E.subdomains=E.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(g,E){return this._url===g&&E===void 0&&(E=!0),this._url=g,E||this.redraw(),this},createTile:function(g,E){var R=document.createElement("img");return _n(R,"load",d(this._tileOnLoad,this,E,R)),_n(R,"error",d(this._tileOnError,this,E,R)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(R.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(R.referrerPolicy=this.options.referrerPolicy),R.alt="",R.src=this.getTileUrl(g),R},getTileUrl:function(g){var E={r:ht.retina?"@2x":"",s:this._getSubdomain(g),x:g.x,y:g.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var R=this._globalTileRange.max.y-g.y;this.options.tms&&(E.y=R),E["-y"]=R}return K(this._url,s(E,this.options))},_tileOnLoad:function(g,E){ht.ielt9?setTimeout(d(g,this,null,E),0):g(null,E)},_tileOnError:function(g,E,R){var J=this.options.errorTileUrl;J&&E.getAttribute("src")!==J&&(E.src=J),g(R,E)},_onTileRemove:function(g){g.tile.onload=null},_getZoomForUrl:function(){var g=this._tileZoom,E=this.options.maxZoom,R=this.options.zoomReverse,J=this.options.zoomOffset;return R&&(g=E-g),g+J},_getSubdomain:function(g){var E=Math.abs(g.x+g.y)%this.options.subdomains.length;return this.options.subdomains[E]},_abortLoading:function(){var g,E;for(g in this._tiles)if(this._tiles[g].coords.z!==this._tileZoom&&(E=this._tiles[g].el,E.onload=P,E.onerror=P,!E.complete)){E.src=H;var R=this._tiles[g].coords;jr(E),delete this._tiles[g],this.fire("tileabort",{tile:E,coords:R})}},_removeTile:function(g){var E=this._tiles[g];if(E)return E.el.setAttribute("src",H),Di.prototype._removeTile.call(this,g)},_tileReady:function(g,E,R){if(!(!this._map||R&&R.getAttribute("src")===H))return Di.prototype._tileReady.call(this,g,E,R)}});function zu(g,E){return new Hs(g,E)}var Xo=Hs.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(g,E){this._url=g;var R=s({},this.defaultWmsParams);for(var J in E)J in this.options||(R[J]=E[J]);E=$(this,E);var he=E.detectRetina&&ht.retina?2:1,Te=this.getTileSize();R.width=Te.x*he,R.height=Te.y*he,this.wmsParams=R},onAdd:function(g){this._crs=this.options.crs||g.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var E=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[E]=this._crs.code,Hs.prototype.onAdd.call(this,g)},getTileUrl:function(g){var E=this._tileCoordsToNwSe(g),R=this._crs,J=nt(R.project(E[0]),R.project(E[1])),he=J.min,Te=J.max,Xe=(this._wmsVersion>=1.3&&this._crs===jf?[he.y,he.x,Te.y,Te.x]:[he.x,he.y,Te.x,Te.y]).join(","),mt=Hs.prototype.getTileUrl.call(this,g);return mt+O(this.wmsParams,mt,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+Xe},setParams:function(g,E){return s(this.wmsParams,g),E||this.redraw(),this}});function Fu(g,E){return new Xo(g,E)}Hs.WMS=Xo,zu.wms=Fu;var io=La.extend({options:{padding:.1},initialize:function(g){$(this,g),_(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Fn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var g={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(g.zoomanim=this._onAnimZoom),g},_onAnimZoom:function(g){this._updateTransform(g.center,g.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(g,E){var R=this._map.getZoomScale(E,this._zoom),J=this._map.getSize().multiplyBy(.5+this.options.padding),he=this._map.project(this._center,E),Te=J.multiplyBy(-R).add(he).subtract(this._map._getNewPixelOrigin(g,E));ht.any3d?Ja(this._container,Te,R):yi(this._container,Te)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var g in this._layers)this._layers[g]._reset()},_onZoomEnd:function(){for(var g in this._layers)this._layers[g]._project()},_updatePaths:function(){for(var g in this._layers)this._layers[g]._update()},_update:function(){var g=this.options.padding,E=this._map.getSize(),R=this._map.containerPointToLayerPoint(E.multiplyBy(-g)).round();this._bounds=new Re(R,R.add(E.multiplyBy(1+g*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),cc=io.extend({options:{tolerance:0},getEvents:function(){var g=io.prototype.getEvents.call(this);return g.viewprereset=this._onViewPreReset,g},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){io.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var g=this._container=document.createElement("canvas");_n(g,"mousemove",this._onMouseMove,this),_n(g,"click dblclick mousedown mouseup contextmenu",this._onClick,this),_n(g,"mouseout",this._handleMouseOut,this),g._leaflet_disable_events=!0,this._ctx=g.getContext("2d")},_destroyContainer:function(){Ee(this._redrawRequest),delete this._ctx,jr(this._container),rn(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var g;this._redrawBounds=null;for(var E in this._layers)g=this._layers[E],g._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){io.prototype._update.call(this);var g=this._bounds,E=this._container,R=g.getSize(),J=ht.retina?2:1;yi(E,g.min),E.width=J*R.x,E.height=J*R.y,E.style.width=R.x+"px",E.style.height=R.y+"px",ht.retina&&this._ctx.scale(2,2),this._ctx.translate(-g.min.x,-g.min.y),this.fire("update")}},_reset:function(){io.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(g){this._updateDashArray(g),this._layers[_(g)]=g;var E=g._order={layer:g,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=E),this._drawLast=E,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(g){this._requestRedraw(g)},_removePath:function(g){var E=g._order,R=E.next,J=E.prev;R?R.prev=J:this._drawLast=J,J?J.next=R:this._drawFirst=R,delete g._order,delete this._layers[_(g)],this._requestRedraw(g)},_updatePath:function(g){this._extendRedrawBounds(g),g._project(),g._update(),this._requestRedraw(g)},_updateStyle:function(g){this._updateDashArray(g),this._requestRedraw(g)},_updateDashArray:function(g){if(typeof g.options.dashArray=="string"){var E=g.options.dashArray.split(/[, ]+/),R=[],J,he;for(he=0;he<E.length;he++){if(J=Number(E[he]),isNaN(J))return;R.push(J)}g.options._dashArray=R}else g.options._dashArray=g.options.dashArray},_requestRedraw:function(g){this._map&&(this._extendRedrawBounds(g),this._redrawRequest=this._redrawRequest||fe(this._redraw,this))},_extendRedrawBounds:function(g){if(g._pxBounds){var E=(g.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new Re,this._redrawBounds.extend(g._pxBounds.min.subtract([E,E])),this._redrawBounds.extend(g._pxBounds.max.add([E,E]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var g=this._redrawBounds;if(g){var E=g.getSize();this._ctx.clearRect(g.min.x,g.min.y,E.x,E.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var g,E=this._redrawBounds;if(this._ctx.save(),E){var R=E.getSize();this._ctx.beginPath(),this._ctx.rect(E.min.x,E.min.y,R.x,R.y),this._ctx.clip()}this._drawing=!0;for(var J=this._drawFirst;J;J=J.next)g=J.layer,(!E||g._pxBounds&&g._pxBounds.intersects(E))&&g._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(g,E){if(this._drawing){var R,J,he,Te,Xe=g._parts,mt=Xe.length,Pt=this._ctx;if(mt){for(Pt.beginPath(),R=0;R<mt;R++){for(J=0,he=Xe[R].length;J<he;J++)Te=Xe[R][J],Pt[J?"lineTo":"moveTo"](Te.x,Te.y);E&&Pt.closePath()}this._fillStroke(Pt,g)}}},_updateCircle:function(g){if(!(!this._drawing||g._empty())){var E=g._point,R=this._ctx,J=Math.max(Math.round(g._radius),1),he=(Math.max(Math.round(g._radiusY),1)||J)/J;he!==1&&(R.save(),R.scale(1,he)),R.beginPath(),R.arc(E.x,E.y/he,J,0,Math.PI*2,!1),he!==1&&R.restore(),this._fillStroke(R,g)}},_fillStroke:function(g,E){var R=E.options;R.fill&&(g.globalAlpha=R.fillOpacity,g.fillStyle=R.fillColor||R.color,g.fill(R.fillRule||"evenodd")),R.stroke&&R.weight!==0&&(g.setLineDash&&g.setLineDash(E.options&&E.options._dashArray||[]),g.globalAlpha=R.opacity,g.lineWidth=R.weight,g.strokeStyle=R.color,g.lineCap=R.lineCap,g.lineJoin=R.lineJoin,g.stroke())},_onClick:function(g){for(var E=this._map.mouseEventToLayerPoint(g),R,J,he=this._drawFirst;he;he=he.next)R=he.layer,R.options.interactive&&R._containsPoint(E)&&(!(g.type==="click"||g.type==="preclick")||!this._map._draggableMoved(R))&&(J=R);this._fireEvent(J?[J]:!1,g)},_onMouseMove:function(g){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var E=this._map.mouseEventToLayerPoint(g);this._handleMouseHover(g,E)}},_handleMouseOut:function(g){var E=this._hoveredLayer;E&&(Yr(this._container,"leaflet-interactive"),this._fireEvent([E],g,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(g,E){if(!this._mouseHoverThrottled){for(var R,J,he=this._drawFirst;he;he=he.next)R=he.layer,R.options.interactive&&R._containsPoint(E)&&(J=R);J!==this._hoveredLayer&&(this._handleMouseOut(g),J&&(Fn(this._container,"leaflet-interactive"),this._fireEvent([J],g,"mouseover"),this._hoveredLayer=J)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,g),this._mouseHoverThrottled=!0,setTimeout(d(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(g,E,R){this._map._fireDOMEvent(E,R||E.type,g)},_bringToFront:function(g){var E=g._order;if(E){var R=E.next,J=E.prev;if(R)R.prev=J;else return;J?J.next=R:R&&(this._drawFirst=R),E.prev=this._drawLast,this._drawLast.next=E,E.next=null,this._drawLast=E,this._requestRedraw(g)}},_bringToBack:function(g){var E=g._order;if(E){var R=E.next,J=E.prev;if(J)J.next=R;else return;R?R.prev=J:J&&(this._drawLast=J),E.prev=null,E.next=this._drawFirst,this._drawFirst.prev=E,this._drawFirst=E,this._requestRedraw(g)}}});function Yc(g){return ht.canvas?new cc(g):null}var uc=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(g){return document.createElement("<lvml:"+g+' class="lvml">')}}catch{}return function(g){return document.createElement("<"+g+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),dc={_initContainer:function(){this._container=Yn("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(io.prototype._update.call(this),this.fire("update"))},_initPath:function(g){var E=g._container=uc("shape");Fn(E,"leaflet-vml-shape "+(this.options.className||"")),E.coordsize="1 1",g._path=uc("path"),E.appendChild(g._path),this._updateStyle(g),this._layers[_(g)]=g},_addPath:function(g){var E=g._container;this._container.appendChild(E),g.options.interactive&&g.addInteractiveTarget(E)},_removePath:function(g){var E=g._container;jr(E),g.removeInteractiveTarget(E),delete this._layers[_(g)]},_updateStyle:function(g){var E=g._stroke,R=g._fill,J=g.options,he=g._container;he.stroked=!!J.stroke,he.filled=!!J.fill,J.stroke?(E||(E=g._stroke=uc("stroke")),he.appendChild(E),E.weight=J.weight+"px",E.color=J.color,E.opacity=J.opacity,J.dashArray?E.dashStyle=te(J.dashArray)?J.dashArray.join(" "):J.dashArray.replace(/( *, *)/g," "):E.dashStyle="",E.endcap=J.lineCap.replace("butt","flat"),E.joinstyle=J.lineJoin):E&&(he.removeChild(E),g._stroke=null),J.fill?(R||(R=g._fill=uc("fill")),he.appendChild(R),R.color=J.fillColor||J.color,R.opacity=J.fillOpacity):R&&(he.removeChild(R),g._fill=null)},_updateCircle:function(g){var E=g._point.round(),R=Math.round(g._radius),J=Math.round(g._radiusY||R);this._setPath(g,g._empty()?"M0 0":"AL "+E.x+","+E.y+" "+R+","+J+" 0,"+65535*360)},_setPath:function(g,E){g._path.v=E},_bringToFront:function(g){Or(g._container)},_bringToBack:function(g){ss(g._container)}},ua=ht.vml?uc:Hn,wl=io.extend({_initContainer:function(){this._container=ua("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=ua("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){jr(this._container),rn(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){io.prototype._update.call(this);var g=this._bounds,E=g.getSize(),R=this._container;(!this._svgSize||!this._svgSize.equals(E))&&(this._svgSize=E,R.setAttribute("width",E.x),R.setAttribute("height",E.y)),yi(R,g.min),R.setAttribute("viewBox",[g.min.x,g.min.y,E.x,E.y].join(" ")),this.fire("update")}},_initPath:function(g){var E=g._path=ua("path");g.options.className&&Fn(E,g.options.className),g.options.interactive&&Fn(E,"leaflet-interactive"),this._updateStyle(g),this._layers[_(g)]=g},_addPath:function(g){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(g._path),g.addInteractiveTarget(g._path)},_removePath:function(g){jr(g._path),g.removeInteractiveTarget(g._path),delete this._layers[_(g)]},_updatePath:function(g){g._project(),g._update()},_updateStyle:function(g){var E=g._path,R=g.options;E&&(R.stroke?(E.setAttribute("stroke",R.color),E.setAttribute("stroke-opacity",R.opacity),E.setAttribute("stroke-width",R.weight),E.setAttribute("stroke-linecap",R.lineCap),E.setAttribute("stroke-linejoin",R.lineJoin),R.dashArray?E.setAttribute("stroke-dasharray",R.dashArray):E.removeAttribute("stroke-dasharray"),R.dashOffset?E.setAttribute("stroke-dashoffset",R.dashOffset):E.removeAttribute("stroke-dashoffset")):E.setAttribute("stroke","none"),R.fill?(E.setAttribute("fill",R.fillColor||R.color),E.setAttribute("fill-opacity",R.fillOpacity),E.setAttribute("fill-rule",R.fillRule||"evenodd")):E.setAttribute("fill","none"))},_updatePoly:function(g,E){this._setPath(g,Gn(g._parts,E))},_updateCircle:function(g){var E=g._point,R=Math.max(Math.round(g._radius),1),J=Math.max(Math.round(g._radiusY),1)||R,he="a"+R+","+J+" 0 1,0 ",Te=g._empty()?"M0 0":"M"+(E.x-R)+","+E.y+he+R*2+",0 "+he+-R*2+",0 ";this._setPath(g,Te)},_setPath:function(g,E){g._path.setAttribute("d",E)},_bringToFront:function(g){Or(g._path)},_bringToBack:function(g){ss(g._path)}});ht.vml&&wl.include(dc);function Jc(g){return ht.svg||ht.vml?new wl(g):null}nr.include({getRenderer:function(g){var E=g.options.renderer||this._getPaneRenderer(g.options.pane)||this.options.renderer||this._renderer;return E||(E=this._renderer=this._createRenderer()),this.hasLayer(E)||this.addLayer(E),E},_getPaneRenderer:function(g){if(g==="overlayPane"||g===void 0)return!1;var E=this._paneRenderers[g];return E===void 0&&(E=this._createRenderer({pane:g}),this._paneRenderers[g]=E),E},_createRenderer:function(g){return this.options.preferCanvas&&Yc(g)||Jc(g)}});var Jn=no.extend({initialize:function(g,E){no.prototype.initialize.call(this,this._boundsToLatLngs(g),E)},setBounds:function(g){return this.setLatLngs(this._boundsToLatLngs(g))},_boundsToLatLngs:function(g){return g=Ct(g),[g.getSouthWest(),g.getNorthWest(),g.getNorthEast(),g.getSouthEast()]}});function Ld(g,E){return new Jn(g,E)}wl.create=ua,wl.pointsToPath=Gn,Co.geometryToLayer=rc,Co.coordsToLatLng=za,Co.coordsToLatLngs=vl,Co.latLngToCoords=Kc,Co.latLngsToCoords=Xc,Co.getFeature=xl,Co.asFeature=ac,nr.mergeOptions({boxZoom:!0});var Qc=Ra.extend({initialize:function(g){this._map=g,this._container=g._container,this._pane=g._panes.overlayPane,this._resetStateTimeout=0,g.on("unload",this._destroy,this)},addHooks:function(){_n(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){rn(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){jr(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(g){if(!g.shiftKey||g.which!==1&&g.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),pr(),qc(),this._startPoint=this._map.mouseEventToContainerPoint(g),_n(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(g){this._moved||(this._moved=!0,this._box=Yn("div","leaflet-zoom-box",this._container),Fn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(g);var E=new Re(this._point,this._startPoint),R=E.getSize();yi(this._box,E.min),this._box.style.width=R.x+"px",this._box.style.height=R.y+"px"},_finish:function(){this._moved&&(jr(this._box),Yr(this._container,"leaflet-crosshair")),Ns(),hl(),rn(document,{contextmenu:Qi,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(g){if(!(g.which!==1&&g.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(d(this._resetState,this),0);var E=new pt(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(E).fire("boxzoomend",{boxZoomBounds:E})}},_onKeyDown:function(g){g.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});nr.addInitHook("addHandler","boxZoom",Qc),nr.mergeOptions({doubleClickZoom:!0});var Dh=Ra.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(g){var E=this._map,R=E.getZoom(),J=E.options.zoomDelta,he=g.originalEvent.shiftKey?R-J:R+J;E.options.doubleClickZoom==="center"?E.setZoom(he):E.setZoomAround(g.containerPoint,he)}});nr.addInitHook("addHandler","doubleClickZoom",Dh),nr.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var hc=Ra.extend({addHooks:function(){if(!this._draggable){var g=this._map;this._draggable=new Qr(g._mapPane,g._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),g.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),g.on("zoomend",this._onZoomEnd,this),g.whenReady(this._onZoomEnd,this))}Fn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Yr(this._map._container,"leaflet-grab"),Yr(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var g=this._map;if(g._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var E=Ct(this._map.options.maxBounds);this._offsetLimit=nt(this._map.latLngToContainerPoint(E.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(E.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;g.fire("movestart").fire("dragstart"),g.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(g){if(this._map.options.inertia){var E=this._lastTime=+new Date,R=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(R),this._times.push(E),this._prunePositions(E)}this._map.fire("move",g).fire("drag",g)},_prunePositions:function(g){for(;this._positions.length>1&&g-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var g=this._map.getSize().divideBy(2),E=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=E.subtract(g).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(g,E){return g-(g-E)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var g=this._draggable._newPos.subtract(this._draggable._startPos),E=this._offsetLimit;g.x<E.min.x&&(g.x=this._viscousLimit(g.x,E.min.x)),g.y<E.min.y&&(g.y=this._viscousLimit(g.y,E.min.y)),g.x>E.max.x&&(g.x=this._viscousLimit(g.x,E.max.x)),g.y>E.max.y&&(g.y=this._viscousLimit(g.y,E.max.y)),this._draggable._newPos=this._draggable._startPos.add(g)}},_onPreDragWrap:function(){var g=this._worldWidth,E=Math.round(g/2),R=this._initialWorldOffset,J=this._draggable._newPos.x,he=(J-E+R)%g+E-R,Te=(J+E+R)%g-E-R,Xe=Math.abs(he+R)<Math.abs(Te+R)?he:Te;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=Xe},_onDragEnd:function(g){var E=this._map,R=E.options,J=!R.inertia||g.noInertia||this._times.length<2;if(E.fire("dragend",g),J)E.fire("moveend");else{this._prunePositions(+new Date);var he=this._lastPos.subtract(this._positions[0]),Te=(this._lastTime-this._times[0])/1e3,Xe=R.easeLinearity,mt=he.multiplyBy(Xe/Te),Pt=mt.distanceTo([0,0]),Vt=Math.min(R.inertiaMaxSpeed,Pt),sn=mt.multiplyBy(Vt/Pt),On=Vt/(R.inertiaDeceleration*Xe),ir=sn.multiplyBy(-On/2).round();!ir.x&&!ir.y?E.fire("moveend"):(ir=E._limitOffset(ir,E.options.maxBounds),fe(function(){E.panBy(ir,{duration:On,easeLinearity:Xe,noMoveStart:!0,animate:!0})}))}}});nr.addInitHook("addHandler","dragging",hc),nr.mergeOptions({keyboard:!0,keyboardPanDelta:80});var Oh=Ra.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(g){this._map=g,this._setPanDelta(g.options.keyboardPanDelta),this._setZoomDelta(g.options.zoomDelta)},addHooks:function(){var g=this._map._container;g.tabIndex<=0&&(g.tabIndex="0"),_n(g,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),rn(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var g=document.body,E=document.documentElement,R=g.scrollTop||E.scrollTop,J=g.scrollLeft||E.scrollLeft;this._map._container.focus(),window.scrollTo(J,R)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(g){var E=this._panKeys={},R=this.keyCodes,J,he;for(J=0,he=R.left.length;J<he;J++)E[R.left[J]]=[-1*g,0];for(J=0,he=R.right.length;J<he;J++)E[R.right[J]]=[g,0];for(J=0,he=R.down.length;J<he;J++)E[R.down[J]]=[0,g];for(J=0,he=R.up.length;J<he;J++)E[R.up[J]]=[0,-1*g]},_setZoomDelta:function(g){var E=this._zoomKeys={},R=this.keyCodes,J,he;for(J=0,he=R.zoomIn.length;J<he;J++)E[R.zoomIn[J]]=g;for(J=0,he=R.zoomOut.length;J<he;J++)E[R.zoomOut[J]]=-g},_addHooks:function(){_n(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){rn(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(g){if(!(g.altKey||g.ctrlKey||g.metaKey)){var E=g.keyCode,R=this._map,J;if(E in this._panKeys){if(!R._panAnim||!R._panAnim._inProgress)if(J=this._panKeys[E],g.shiftKey&&(J=Qe(J).multiplyBy(3)),R.options.maxBounds&&(J=R._limitOffset(Qe(J),R.options.maxBounds)),R.options.worldCopyJump){var he=R.wrapLatLng(R.unproject(R.project(R.getCenter()).add(J)));R.panTo(he)}else R.panBy(J)}else if(E in this._zoomKeys)R.setZoom(R.getZoom()+(g.shiftKey?3:1)*this._zoomKeys[E]);else if(E===27&&R._popup&&R._popup.options.closeOnEscapeKey)R.closePopup();else return;Qi(g)}}});nr.addInitHook("addHandler","keyboard",Oh),nr.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Gr=Ra.extend({addHooks:function(){_n(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){rn(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(g){var E=pl(g),R=this._map.options.wheelDebounceTime;this._delta+=E,this._lastMousePos=this._map.mouseEventToContainerPoint(g),this._startTime||(this._startTime=+new Date);var J=Math.max(R-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(d(this._performZoom,this),J),Qi(g)},_performZoom:function(){var g=this._map,E=g.getZoom(),R=this._map.options.zoomSnap||0;g._stop();var J=this._delta/(this._map.options.wheelPxPerZoomLevel*4),he=4*Math.log(2/(1+Math.exp(-Math.abs(J))))/Math.LN2,Te=R?Math.ceil(he/R)*R:he,Xe=g._limitZoom(E+(this._delta>0?Te:-Te))-E;this._delta=0,this._startTime=null,Xe&&(g.options.scrollWheelZoom==="center"?g.setZoom(E+Xe):g.setZoomAround(this._lastMousePos,E+Xe))}});nr.addInitHook("addHandler","scrollWheelZoom",Gr);var zd=600;nr.mergeOptions({tapHold:ht.touchNative&&ht.safari&&ht.mobile,tapTolerance:15});var Bu=Ra.extend({addHooks:function(){_n(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){rn(this._map._container,"touchstart",this._onDown,this)},_onDown:function(g){if(clearTimeout(this._holdTimeout),g.touches.length===1){var E=g.touches[0];this._startPos=this._newPos=new Ce(E.clientX,E.clientY),this._holdTimeout=setTimeout(d(function(){this._cancel(),this._isTapValid()&&(_n(document,"touchend",tr),_n(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",E))},this),zd),_n(document,"touchend touchcancel contextmenu",this._cancel,this),_n(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function g(){rn(document,"touchend",tr),rn(document,"touchend touchcancel",g)},_cancel:function(){clearTimeout(this._holdTimeout),rn(document,"touchend touchcancel contextmenu",this._cancel,this),rn(document,"touchmove",this._onMove,this)},_onMove:function(g){var E=g.touches[0];this._newPos=new Ce(E.clientX,E.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(g,E){var R=new MouseEvent(g,{bubbles:!0,cancelable:!0,view:window,screenX:E.screenX,screenY:E.screenY,clientX:E.clientX,clientY:E.clientY});R._simulated=!0,E.target.dispatchEvent(R)}});nr.addInitHook("addHandler","tapHold",Bu),nr.mergeOptions({touchZoom:ht.touch,bounceAtZoomLimits:!0});var Sl=Ra.extend({addHooks:function(){Fn(this._map._container,"leaflet-touch-zoom"),_n(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Yr(this._map._container,"leaflet-touch-zoom"),rn(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(g){var E=this._map;if(!(!g.touches||g.touches.length!==2||E._animatingZoom||this._zooming)){var R=E.mouseEventToContainerPoint(g.touches[0]),J=E.mouseEventToContainerPoint(g.touches[1]);this._centerPoint=E.getSize()._divideBy(2),this._startLatLng=E.containerPointToLatLng(this._centerPoint),E.options.touchZoom!=="center"&&(this._pinchStartLatLng=E.containerPointToLatLng(R.add(J)._divideBy(2))),this._startDist=R.distanceTo(J),this._startZoom=E.getZoom(),this._moved=!1,this._zooming=!0,E._stop(),_n(document,"touchmove",this._onTouchMove,this),_n(document,"touchend touchcancel",this._onTouchEnd,this),tr(g)}},_onTouchMove:function(g){if(!(!g.touches||g.touches.length!==2||!this._zooming)){var E=this._map,R=E.mouseEventToContainerPoint(g.touches[0]),J=E.mouseEventToContainerPoint(g.touches[1]),he=R.distanceTo(J)/this._startDist;if(this._zoom=E.getScaleZoom(he,this._startZoom),!E.options.bounceAtZoomLimits&&(this._zoom<E.getMinZoom()&&he<1||this._zoom>E.getMaxZoom()&&he>1)&&(this._zoom=E._limitZoom(this._zoom)),E.options.touchZoom==="center"){if(this._center=this._startLatLng,he===1)return}else{var Te=R._add(J)._divideBy(2)._subtract(this._centerPoint);if(he===1&&Te.x===0&&Te.y===0)return;this._center=E.unproject(E.project(this._pinchStartLatLng,this._zoom).subtract(Te),this._zoom)}this._moved||(E._moveStart(!0,!1),this._moved=!0),Ee(this._animRequest);var Xe=d(E._move,E,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=fe(Xe,this,!0),tr(g)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,Ee(this._animRequest),rn(document,"touchmove",this._onTouchMove,this),rn(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});nr.addInitHook("addHandler","touchZoom",Sl),nr.BoxZoom=Qc,nr.DoubleClickZoom=Dh,nr.Drag=hc,nr.Keyboard=Oh,nr.ScrollWheelZoom=Gr,nr.TapHold=Bu,nr.TouchZoom=Sl,n.Bounds=Re,n.Browser=ht,n.CRS=Tt,n.Canvas=cc,n.Circle=nc,n.CircleMarker=Us,n.Class=De,n.Control=Vi,n.DivIcon=bl,n.DivOverlay=ro,n.DomEvent=Nu,n.DomUtil=$i,n.Draggable=Qr,n.Evented=et,n.FeatureGroup=Ho,n.GeoJSON=Co,n.GridLayer=Di,n.Handler=Ra,n.Icon=Vs,n.ImageOverlay=Gs,n.LatLng=Mt,n.LatLngBounds=pt,n.Layer=La,n.LayerGroup=$s,n.LineUtil=Ql,n.Map=nr,n.Marker=Ea,n.Mixin=Ph,n.Path=us,n.Point=Ce,n.PolyUtil=Ah,n.Polygon=no,n.Polyline=to,n.Popup=oc,n.PosAnimation=Gc,n.Projection=Up,n.Rectangle=Jn,n.Renderer=io,n.SVG=wl,n.SVGOverlay=Nh,n.TileLayer=Hs,n.Tooltip=_l,n.Transformation=Ut,n.Util=Be,n.VideoOverlay=kh,n.bind=d,n.bounds=nt,n.canvas=Yc,n.circle=Lu,n.circleMarker=Mh,n.control=Zn,n.divIcon=sc,n.extend=s,n.featureGroup=Dd,n.geoJSON=Rd,n.geoJson=Zo,n.gridLayer=lc,n.icon=jh,n.imageOverlay=Nf,n.latLng=Nt,n.latLngBounds=Ct,n.layerGroup=Zc,n.map=yr,n.marker=Mf,n.point=Qe,n.polygon=If,n.polyline=kf,n.popup=Ws,n.rectangle=Ld,n.setOptions=$,n.stamp=_,n.svg=Jc,n.svgOverlay=vr,n.tileLayer=zu,n.tooltip=Ko,n.transformation=dt,n.version=r,n.videoOverlay=Ih;var fc=window.L;n.noConflict=function(){return window.L=fc,this},window.L=n}))})(nx,nx.exports)),nx.exports}var Nte=Ite();const zn=Kr(Nte);function c$({center:e=[-6.2088,106.8456],zoom:t=13,className:n="",onAreaDrawn:r,aisMarkers:s,adsbMarkers:h,showAIS:d=!1,showADSB:o=!1,showENC:_=!1,height:w="500px"}){const A=W.useRef(null),P=W.useRef(null),[N,z]=W.useState(!1),q=W.useRef(null),$=W.useRef(null),O=W.useRef([]),X=W.useRef(null),K=W.useRef([]);W.useEffect(()=>{if(P.current){if(!A.current){A.current=zn.map(P.current,{zoomControl:!1,attributionControl:!0}).setView(e,t),zn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:"&copy; OpenStreetMap contributors",className:"map-tiles"}).addTo(A.current),q.current=new zn.FeatureGroup,q.current.addTo(A.current),zn.control.zoom({position:"bottomright"}).addTo(A.current);const ne=zn.GridLayer.extend({createTile:function(ae){const de=document.createElement("canvas"),ye=de.getContext("2d"),Ae=this.getTileSize();if(de.width=Ae.x,de.height=Ae.y,ye){ye.strokeStyle="#21A68D",ye.lineWidth=1,ye.globalAlpha=.2;for(let _e=0;_e<=Ae.x;_e+=Ae.x/4)ye.beginPath(),ye.moveTo(_e,0),ye.lineTo(_e,Ae.y),ye.stroke();for(let _e=0;_e<=Ae.y;_e+=Ae.y/4)ye.beginPath(),ye.moveTo(0,_e),ye.lineTo(Ae.x,_e),ye.stroke()}return de}});new ne({opacity:1,zIndex:400}).addTo(A.current),z(!0)}return()=>{A.current&&(A.current.remove(),A.current=null)}}},[]);const te=W.useRef(null);return W.useEffect(()=>{if(!A.current)return;const ne=A.current;_&&!te.current?te.current=zn.tileLayer("https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",{attribution:"&copy; OpenSeaMap contributors",opacity:.8}).addTo(ne):!_&&te.current&&(ne.removeLayer(te.current),te.current=null)},[_,N]),W.useEffect(()=>{if(!A.current)return;const ne=A.current,H=ae=>{if($.current!=="polygon")return;K.current.push(ae.latlng);const de=zn.circleMarker(ae.latlng,{radius:5,fillColor:"#21A68D",color:"#21A68D",weight:2,fillOpacity:1}).addTo(ne);O.current.push(de),X.current&&ne.removeLayer(X.current),K.current.length>1&&(X.current=zn.polyline(K.current,{color:"#21A68D",weight:2,dashArray:"5, 5"}).addTo(ne))};return ne.on("click",H),window.leafletDrawMap={startPolygon:()=>{$.current="polygon",K.current=[],O.current=[]},finishPolygon:()=>{if(K.current.length>=3){O.current.forEach(_e=>ne.removeLayer(_e)),X.current&&ne.removeLayer(X.current);const ae=zn.polygon(K.current,{color:"#21A68D",fillColor:"#21A68D",fillOpacity:.2,weight:2});q.current&&q.current.addLayer(ae);const de=ae.getBounds(),ye=K.current.map(_e=>({lat:_e.lat,lng:_e.lng})),Ae=`Area: ${K.current.length} points - Bounds: ${de.getSouth().toFixed(4)},${de.getWest().toFixed(4)} to ${de.getNorth().toFixed(4)},${de.getEast().toFixed(4)}`;r&&r(ye,Ae)}$.current=null,K.current=[],O.current=[]},drawRectangle:()=>{const ae=ne.getCenter(),de=ne.getBounds(),ye=(de.getNorth()-de.getSouth())*.1,Ae=(de.getEast()-de.getWest())*.1,_e=[[ae.lat-ye,ae.lng-Ae],[ae.lat+ye,ae.lng+Ae]],fe=zn.rectangle(_e,{color:"#21A68D",fillColor:"#21A68D",fillOpacity:.2,weight:2});q.current&&q.current.addLayer(fe);const Ee=fe.getBounds(),Be=[{lat:Ee.getSouth(),lng:Ee.getWest()},{lat:Ee.getNorth(),lng:Ee.getWest()},{lat:Ee.getNorth(),lng:Ee.getEast()},{lat:Ee.getSouth(),lng:Ee.getEast()}],De=`Rectangle Area - Bounds: ${Ee.getSouth().toFixed(4)},${Ee.getWest().toFixed(4)} to ${Ee.getNorth().toFixed(4)},${Ee.getEast().toFixed(4)}`;r&&r(Be,De)},clear:()=>{q.current&&q.current.clearLayers(),O.current.forEach(ae=>ne.removeLayer(ae)),X.current&&ne.removeLayer(X.current),O.current=[],K.current=[],$.current=null}},()=>{ne.off("click",H),delete window.leafletDrawMap}},[r,N]),W.useEffect(()=>{if(!A.current||!s||!d)return;const ne=A.current;ne.eachLayer(H=>{H instanceof zn.Marker&&H.options.icon&&H.options.icon.options?.className?.includes("ais-icon")&&ne.removeLayer(H)}),s.forEach(H=>{const ae=zn.divIcon({className:"ais-icon",html:`<div style="background-color: #21A68D; color: white; border-radius: 50%; width: 10px; height: 10px; display: flex; align-items: center; justify-content: center; font-size: 8px;">${H.speed.toFixed(1)}</div>`,iconSize:[10,10],iconAnchor:[5,5]});zn.marker(H.position,{icon:ae}).addTo(ne).bindPopup(`<b>${H.name}</b><br>Type: ${H.type}<br>Speed: ${H.speed.toFixed(1)} knots`)})},[s,d,N]),W.useEffect(()=>{if(!A.current||!h||!o)return;const ne=A.current;ne.eachLayer(H=>{H instanceof zn.Marker&&H.options.icon&&H.options.icon.options?.className?.includes("adsb-icon")&&ne.removeLayer(H)}),h.forEach(H=>{const ae=zn.divIcon({className:"adsb-icon",html:`<div style="background-color: #21A68D; color: white; border-radius: 50%; width: 10px; height: 10px; display: flex; align-items: center; justify-content: center; font-size: 8px;">${H.speed.toFixed(1)}</div>`,iconSize:[10,10],iconAnchor:[5,5]});zn.marker(H.position,{icon:ae}).addTo(ne).bindPopup(`<b>${H.name}</b><br>Altitude: ${H.altitude.toFixed(0)} ft<br>Speed: ${H.speed.toFixed(1)} knots<br>Heading: ${H.heading.toFixed(0)}`)})},[h,o,N]),f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:P,className:n,style:{height:w,width:"100%"}}),f.jsx("style",{children:`
        .map-tiles {
          filter: brightness(0.6) contrast(1.2) saturate(0.8);
        }

        .leaflet-control-zoom {
          border: none !important;
        }

        .leaflet-control-zoom a {
          background: rgba(26, 31, 46, 0.9) !important;
          backdrop-filter: blur(8px);
          color: white !important;
          border: 1px solid rgba(255,255,255,0.1) !important;
          width: 32px !important;
          height: 32px !important;
          line-height: 32px !important;
          font-size: 18px !important;
        }

        .leaflet-control-zoom a:hover {
          background: #21A68D !important;
          border-color: #21A68D !important;
        }

        .leaflet-control-attribution {
          background: rgba(26, 31, 46, 0.8) !important;
          color: rgba(255,255,255,0.6) !important;
          font-size: 10px !important;
        }

        .leaflet-control-attribution a {
          color: #21A68D !important;
        }

        .ais-icon {
          border-radius: 50%;
          width: 10px;
          height: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 8px;
          color: white;
          background-color: #21A68D;
        }

        .adsb-icon {
          border-radius: 50%;
          width: 10px;
          height: 10px;
          display: flex;
          align-items: center;
          justify-content: center;
          font-size: 8px;
          color: white;
          background-color: #21A68D;
        }
      `})]})}function eO({center:e=[-6.2088,106.8456],zoom:t=13,className:n="",coordinates:r=[]}){const s=W.useRef(null),h=W.useRef(null),d=W.useRef(null);return W.useEffect(()=>{if(h.current){if(!s.current){s.current=zn.map(h.current,{zoomControl:!1,attributionControl:!1,dragging:!1,scrollWheelZoom:!1,doubleClickZoom:!1,touchZoom:!1}).setView(e,t),zn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{className:"map-tiles"}).addTo(s.current);const o=zn.GridLayer.extend({createTile:function(w){const A=document.createElement("canvas"),P=A.getContext("2d"),N=this.getTileSize();if(A.width=N.x,A.height=N.y,P){P.strokeStyle="#21A68D",P.lineWidth=1,P.globalAlpha=.15;for(let z=0;z<=N.x;z+=N.x/4)P.beginPath(),P.moveTo(z,0),P.lineTo(z,N.y),P.stroke();for(let z=0;z<=N.y;z+=N.y/4)P.beginPath(),P.moveTo(0,z),P.lineTo(N.x,z),P.stroke()}return A}});new o({opacity:1,zIndex:400}).addTo(s.current)}return()=>{s.current&&(s.current.remove(),s.current=null)}}},[]),W.useEffect(()=>{if(s.current&&(d.current&&(s.current.removeLayer(d.current),d.current=null),r&&r.length>0)){const o=r.map(w=>[w.lat,w.lng]);d.current=zn.polygon(o,{color:"#21A68D",fillColor:"#21A68D",fillOpacity:.2,weight:2}).addTo(s.current);const _=d.current.getBounds();s.current.fitBounds(_,{padding:[10,10]})}},[r]),f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:h,className:n,style:{height:"150px",width:"100%"}}),f.jsx("style",{children:`
        .map-tiles {
          filter: brightness(0.6) contrast(1.2) saturate(0.8);
        }
      `})]})}const RM=W.createContext({});function LM(e){const t=W.useRef(null);return t.current===null&&(t.current=e()),t.current}const u$=typeof window<"u",d$=u$?W.useLayoutEffect:W.useEffect,ow=W.createContext(null);function zM(e,t){e.indexOf(t)===-1&&e.push(t)}function kb(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const _h=(e,t,n)=>n>t?t:n<e?e:n;let FM=()=>{};const xf={},h$=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function f$(e){return typeof e=="object"&&e!==null}const p$=e=>/^0[^.\s]+$/u.test(e);function BM(e){let t;return()=>(t===void 0&&(t=e()),t)}const Cu=e=>e,Dte=(e,t)=>n=>t(e(n)),x0=(...e)=>e.reduce(Dte),wx=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class $M{constructor(){this.subscriptions=[]}add(t){return zM(this.subscriptions,t),()=>kb(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let h=0;h<s;h++){const d=this.subscriptions[h];d&&d(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const xd=e=>e*1e3,Tu=e=>e/1e3;function m$(e,t){return t?e*(1e3/t):0}const g$=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Ote=1e-7,Rte=12;function Lte(e,t,n,r,s){let h,d,o=0;do d=t+(n-t)/2,h=g$(d,r,s)-e,h>0?n=d:t=d;while(Math.abs(h)>Ote&&++o<Rte);return d}function _0(e,t,n,r){if(e===t&&n===r)return Cu;const s=h=>Lte(h,0,1,e,n);return h=>h===0||h===1?h:g$(s(h),t,r)}const y$=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,v$=e=>t=>1-e(1-t),x$=_0(.33,1.53,.69,.99),VM=v$(x$),_$=y$(VM),b$=e=>(e*=2)<1?.5*VM(e):.5*(2-Math.pow(2,-10*(e-1))),UM=e=>1-Math.sin(Math.acos(e)),w$=v$(UM),S$=y$(UM),zte=_0(.42,0,1,1),Fte=_0(0,0,.58,1),T$=_0(.42,0,.58,1),Bte=e=>Array.isArray(e)&&typeof e[0]!="number",P$=e=>Array.isArray(e)&&typeof e[0]=="number",$te={linear:Cu,easeIn:zte,easeInOut:T$,easeOut:Fte,circIn:UM,circInOut:S$,circOut:w$,backIn:VM,backInOut:_$,backOut:x$,anticipate:b$},Vte=e=>typeof e=="string",tO=e=>{if(P$(e)){FM(e.length===4);const[t,n,r,s]=e;return _0(t,n,r,s)}else if(Vte(e))return $te[e];return e},O_=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function Ute(e,t){let n=new Set,r=new Set,s=!1,h=!1;const d=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function _(A){d.has(A)&&(w.schedule(A),e()),A(o)}const w={schedule:(A,P=!1,N=!1)=>{const q=N&&s?n:r;return P&&d.add(A),q.has(A)||q.add(A),A},cancel:A=>{r.delete(A),d.delete(A)},process:A=>{if(o=A,s){h=!0;return}s=!0,[n,r]=[r,n],n.forEach(_),n.clear(),s=!1,h&&(h=!1,w.process(A))}};return w}const qte=40;function A$(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},h=()=>n=!0,d=O_.reduce((te,ne)=>(te[ne]=Ute(h),te),{}),{setup:o,read:_,resolveKeyframes:w,preUpdate:A,update:P,preRender:N,render:z,postRender:q}=d,$=()=>{const te=xf.useManualTiming?s.timestamp:performance.now();n=!1,xf.useManualTiming||(s.delta=r?1e3/60:Math.max(Math.min(te-s.timestamp,qte),1)),s.timestamp=te,s.isProcessing=!0,o.process(s),_.process(s),w.process(s),A.process(s),P.process(s),N.process(s),z.process(s),q.process(s),s.isProcessing=!1,n&&t&&(r=!1,e($))},O=()=>{n=!0,r=!0,s.isProcessing||e($)};return{schedule:O_.reduce((te,ne)=>{const H=d[ne];return te[ne]=(ae,de=!1,ye=!1)=>(n||O(),H.schedule(ae,de,ye)),te},{}),cancel:te=>{for(let ne=0;ne<O_.length;ne++)d[O_[ne]].cancel(te)},state:s,steps:d}}const{schedule:Ii,cancel:kp,state:as,steps:dS}=A$(typeof requestAnimationFrame<"u"?requestAnimationFrame:Cu,!0);let sb;function Gte(){sb=void 0}const il={now:()=>(sb===void 0&&il.set(as.isProcessing||xf.useManualTiming?as.timestamp:performance.now()),sb),set:e=>{sb=e,queueMicrotask(Gte)}},C$=e=>t=>typeof t=="string"&&t.startsWith(e),E$=C$("--"),Wte=C$("var(--"),qM=e=>Wte(e)?Hte.test(e.split("/*")[0].trim()):!1,Hte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu;function nO(e){return typeof e!="string"?!1:e.split("/*")[0].includes("var(--")}const Yy={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Sx={...Yy,transform:e=>_h(0,1,e)},R_={...Yy,default:1},ux=e=>Math.round(e*1e5)/1e5,GM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Zte(e){return e==null}const Kte=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WM=(e,t)=>n=>!!(typeof n=="string"&&Kte.test(n)&&n.startsWith(e)||t&&!Zte(n)&&Object.prototype.hasOwnProperty.call(n,t)),j$=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,h,d,o]=r.match(GM);return{[e]:parseFloat(s),[t]:parseFloat(h),[n]:parseFloat(d),alpha:o!==void 0?parseFloat(o):1}},Xte=e=>_h(0,255,e),hS={...Yy,transform:e=>Math.round(Xte(e))},Em={test:WM("rgb","red"),parse:j$("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+hS.transform(e)+", "+hS.transform(t)+", "+hS.transform(n)+", "+ux(Sx.transform(r))+")"};function Yte(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const rE={test:WM("#"),parse:Yte,transform:Em.transform},b0=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),mp=b0("deg"),ph=b0("%"),jn=b0("px"),Jte=b0("vh"),Qte=b0("vw"),rO={...ph,parse:e=>ph.parse(e)/100,transform:e=>ph.transform(e*100)},Hg={test:WM("hsl","hue"),parse:j$("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ph.transform(ux(t))+", "+ph.transform(ux(n))+", "+ux(Sx.transform(r))+")"},Ka={test:e=>Em.test(e)||rE.test(e)||Hg.test(e),parse:e=>Em.test(e)?Em.parse(e):Hg.test(e)?Hg.parse(e):rE.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Em.transform(e):Hg.transform(e),getAnimatableNone:e=>{const t=Ka.parse(e);return t.alpha=0,Ka.transform(t)}},ene=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function tne(e){return isNaN(e)&&typeof e=="string"&&(e.match(GM)?.length||0)+(e.match(ene)?.length||0)>0}const M$="number",k$="color",nne="var",rne="var(",iO="${}",ine=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Tx(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let h=0;const o=t.replace(ine,_=>(Ka.test(_)?(r.color.push(h),s.push(k$),n.push(Ka.parse(_))):_.startsWith(rne)?(r.var.push(h),s.push(nne),n.push(_)):(r.number.push(h),s.push(M$),n.push(parseFloat(_))),++h,iO)).split(iO);return{values:n,split:o,indexes:r,types:s}}function I$(e){return Tx(e).values}function N$(e){const{split:t,types:n}=Tx(e),r=t.length;return s=>{let h="";for(let d=0;d<r;d++)if(h+=t[d],s[d]!==void 0){const o=n[d];o===M$?h+=ux(s[d]):o===k$?h+=Ka.transform(s[d]):h+=s[d]}return h}}const ane=e=>typeof e=="number"?0:Ka.test(e)?Ka.getAnimatableNone(e):e;function one(e){const t=I$(e);return N$(e)(t.map(ane))}const Ip={test:tne,parse:I$,createTransformer:N$,getAnimatableNone:one};function fS(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function sne({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,h=0,d=0;if(!t)s=h=d=n;else{const o=n<.5?n*(1+t):n+t-n*t,_=2*n-o;s=fS(_,o,e+1/3),h=fS(_,o,e),d=fS(_,o,e-1/3)}return{red:Math.round(s*255),green:Math.round(h*255),blue:Math.round(d*255),alpha:r}}function Ib(e,t){return n=>n>0?t:e}const aa=(e,t,n)=>e+(t-e)*n,pS=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},lne=[rE,Em,Hg],cne=e=>lne.find(t=>t.test(e));function aO(e){const t=cne(e);if(!t)return!1;let n=t.parse(e);return t===Hg&&(n=sne(n)),n}const oO=(e,t)=>{const n=aO(e),r=aO(t);if(!n||!r)return Ib(e,t);const s={...n};return h=>(s.red=pS(n.red,r.red,h),s.green=pS(n.green,r.green,h),s.blue=pS(n.blue,r.blue,h),s.alpha=aa(n.alpha,r.alpha,h),Em.transform(s))},iE=new Set(["none","hidden"]);function une(e,t){return iE.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function dne(e,t){return n=>aa(e,t,n)}function HM(e){return typeof e=="number"?dne:typeof e=="string"?qM(e)?Ib:Ka.test(e)?oO:pne:Array.isArray(e)?D$:typeof e=="object"?Ka.test(e)?oO:hne:Ib}function D$(e,t){const n=[...e],r=n.length,s=e.map((h,d)=>HM(h)(h,t[d]));return h=>{for(let d=0;d<r;d++)n[d]=s[d](h);return n}}function hne(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=HM(e[s])(e[s],t[s]));return s=>{for(const h in r)n[h]=r[h](s);return n}}function fne(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const h=t.types[s],d=e.indexes[h][r[h]],o=e.values[d]??0;n[s]=o,r[h]++}return n}const pne=(e,t)=>{const n=Ip.createTransformer(t),r=Tx(e),s=Tx(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?iE.has(e)&&!s.values.length||iE.has(t)&&!r.values.length?une(e,t):x0(D$(fne(r,s),s.values),n):Ib(e,t)};function O$(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?aa(e,t,n):HM(e)(e,t)}const mne=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Ii.update(t,n),stop:()=>kp(t),now:()=>as.isProcessing?as.timestamp:il.now()}},R$=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let h=0;h<s;h++)r+=Math.round(e(h/(s-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Nb=2e4;function ZM(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Nb;)t+=n,r=e.next(t);return t>=Nb?1/0:t}function gne(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(ZM(r),Nb);return{type:"keyframes",ease:h=>r.next(s*h).value/t,duration:Tu(s)}}const yne=5;function L$(e,t,n){const r=Math.max(t-yne,0);return m$(n-e(r),t-r)}const _a={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},mS=.001;function vne({duration:e=_a.duration,bounce:t=_a.bounce,velocity:n=_a.velocity,mass:r=_a.mass}){let s,h,d=1-t;d=_h(_a.minDamping,_a.maxDamping,d),e=_h(_a.minDuration,_a.maxDuration,Tu(e)),d<1?(s=w=>{const A=w*d,P=A*e,N=A-n,z=aE(w,d),q=Math.exp(-P);return mS-N/z*q},h=w=>{const P=w*d*e,N=P*n+n,z=Math.pow(d,2)*Math.pow(w,2)*e,q=Math.exp(-P),$=aE(Math.pow(w,2),d);return(-s(w)+mS>0?-1:1)*((N-z)*q)/$}):(s=w=>{const A=Math.exp(-w*e),P=(w-n)*e+1;return-mS+A*P},h=w=>{const A=Math.exp(-w*e),P=(n-w)*(e*e);return A*P});const o=5/e,_=_ne(s,h,o);if(e=xd(e),isNaN(_))return{stiffness:_a.stiffness,damping:_a.damping,duration:e};{const w=Math.pow(_,2)*r;return{stiffness:w,damping:d*2*Math.sqrt(r*w),duration:e}}}const xne=12;function _ne(e,t,n){let r=n;for(let s=1;s<xne;s++)r=r-e(r)/t(r);return r}function aE(e,t){return e*Math.sqrt(1-t*t)}const bne=["duration","bounce"],wne=["stiffness","damping","mass"];function sO(e,t){return t.some(n=>e[n]!==void 0)}function Sne(e){let t={velocity:_a.velocity,stiffness:_a.stiffness,damping:_a.damping,mass:_a.mass,isResolvedFromDuration:!1,...e};if(!sO(e,wne)&&sO(e,bne))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,h=2*_h(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:_a.mass,stiffness:s,damping:h}}else{const n=vne(e);t={...t,...n,mass:_a.mass},t.isResolvedFromDuration=!0}return t}function Db(e=_a.visualDuration,t=_a.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const h=n.keyframes[0],d=n.keyframes[n.keyframes.length-1],o={done:!1,value:h},{stiffness:_,damping:w,mass:A,duration:P,velocity:N,isResolvedFromDuration:z}=Sne({...n,velocity:-Tu(n.velocity||0)}),q=N||0,$=w/(2*Math.sqrt(_*A)),O=d-h,X=Tu(Math.sqrt(_/A)),K=Math.abs(O)<5;r||(r=K?_a.restSpeed.granular:_a.restSpeed.default),s||(s=K?_a.restDelta.granular:_a.restDelta.default);let te;if($<1){const H=aE(X,$);te=ae=>{const de=Math.exp(-$*X*ae);return d-de*((q+$*X*O)/H*Math.sin(H*ae)+O*Math.cos(H*ae))}}else if($===1)te=H=>d-Math.exp(-X*H)*(O+(q+X*O)*H);else{const H=X*Math.sqrt($*$-1);te=ae=>{const de=Math.exp(-$*X*ae),ye=Math.min(H*ae,300);return d-de*((q+$*X*O)*Math.sinh(ye)+H*O*Math.cosh(ye))/H}}const ne={calculatedDuration:z&&P||null,next:H=>{const ae=te(H);if(z)o.done=H>=P;else{let de=H===0?q:0;$<1&&(de=H===0?xd(q):L$(te,H,ae));const ye=Math.abs(de)<=r,Ae=Math.abs(d-ae)<=s;o.done=ye&&Ae}return o.value=o.done?d:ae,o},toString:()=>{const H=Math.min(ZM(ne),Nb),ae=R$(de=>ne.next(H*de).value,H,30);return H+"ms "+ae},toTransition:()=>{}};return ne}Db.applyToOptions=e=>{const t=gne(e,100,Db);return e.ease=t.ease,e.duration=xd(t.duration),e.type="keyframes",e};function oE({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:h=500,modifyTarget:d,min:o,max:_,restDelta:w=.5,restSpeed:A}){const P=e[0],N={done:!1,value:P},z=ye=>o!==void 0&&ye<o||_!==void 0&&ye>_,q=ye=>o===void 0?_:_===void 0||Math.abs(o-ye)<Math.abs(_-ye)?o:_;let $=n*t;const O=P+$,X=d===void 0?O:d(O);X!==O&&($=X-P);const K=ye=>-$*Math.exp(-ye/r),te=ye=>X+K(ye),ne=ye=>{const Ae=K(ye),_e=te(ye);N.done=Math.abs(Ae)<=w,N.value=N.done?X:_e};let H,ae;const de=ye=>{z(N.value)&&(H=ye,ae=Db({keyframes:[N.value,q(N.value)],velocity:L$(te,ye,N.value),damping:s,stiffness:h,restDelta:w,restSpeed:A}))};return de(0),{calculatedDuration:null,next:ye=>{let Ae=!1;return!ae&&H===void 0&&(Ae=!0,ne(ye),de(ye)),H!==void 0&&ye>=H?ae.next(ye-H):(!Ae&&ne(ye),N)}}}function Tne(e,t,n){const r=[],s=n||xf.mix||O$,h=e.length-1;for(let d=0;d<h;d++){let o=s(e[d],e[d+1]);if(t){const _=Array.isArray(t)?t[d]||Cu:t;o=x0(_,o)}r.push(o)}return r}function Pne(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const h=e.length;if(FM(h===t.length),h===1)return()=>t[0];if(h===2&&t[0]===t[1])return()=>t[1];const d=e[0]===e[1];e[0]>e[h-1]&&(e=[...e].reverse(),t=[...t].reverse());const o=Tne(t,r,s),_=o.length,w=A=>{if(d&&A<e[0])return t[0];let P=0;if(_>1)for(;P<e.length-2&&!(A<e[P+1]);P++);const N=wx(e[P],e[P+1],A);return o[P](N)};return n?A=>w(_h(e[0],e[h-1],A)):w}function Ane(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=wx(0,t,r);e.push(aa(n,1,s))}}function Cne(e){const t=[0];return Ane(t,e.length-1),t}function Ene(e,t){return e.map(n=>n*t)}function jne(e,t){return e.map(()=>t||T$).splice(0,e.length-1)}function dx({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Bte(r)?r.map(tO):tO(r),h={done:!1,value:t[0]},d=Ene(n&&n.length===t.length?n:Cne(t),e),o=Pne(d,t,{ease:Array.isArray(s)?s:jne(t,s)});return{calculatedDuration:e,next:_=>(h.value=o(_),h.done=_>=e,h)}}const Mne=e=>e!==null;function KM(e,{repeat:t,repeatType:n="loop"},r,s=1){const h=e.filter(Mne),o=s<0||t&&n!=="loop"&&t%2===1?0:h.length-1;return!o||r===void 0?h[o]:r}const kne={decay:oE,inertia:oE,tween:dx,keyframes:dx,spring:Db};function z$(e){typeof e.type=="string"&&(e.type=kne[e.type])}class XM{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const Ine=e=>e/100;class YM extends XM{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==il.now()&&this.tick(il.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;z$(t);const{type:n=dx,repeat:r=0,repeatDelay:s=0,repeatType:h,velocity:d=0}=t;let{keyframes:o}=t;const _=n||dx;_!==dx&&typeof o[0]!="number"&&(this.mixKeyframes=x0(Ine,O$(o[0],o[1])),o=[0,100]);const w=_({...t,keyframes:o});h==="mirror"&&(this.mirroredGenerator=_({...t,keyframes:[...o].reverse(),velocity:-d})),w.calculatedDuration===null&&(w.calculatedDuration=ZM(w));const{calculatedDuration:A}=w;this.calculatedDuration=A,this.resolvedDuration=A+s,this.totalDuration=this.resolvedDuration*(r+1)-s,this.generator=w}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:s,mixKeyframes:h,mirroredGenerator:d,resolvedDuration:o,calculatedDuration:_}=this;if(this.startTime===null)return r.next(0);const{delay:w=0,keyframes:A,repeat:P,repeatType:N,repeatDelay:z,type:q,onUpdate:$,finalKeyframe:O}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-s/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const X=this.currentTime-w*(this.playbackSpeed>=0?1:-1),K=this.playbackSpeed>=0?X<0:X>s;this.currentTime=Math.max(X,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=s);let te=this.currentTime,ne=r;if(P){const ye=Math.min(this.currentTime,s)/o;let Ae=Math.floor(ye),_e=ye%1;!_e&&ye>=1&&(_e=1),_e===1&&Ae--,Ae=Math.min(Ae,P+1),!!(Ae%2)&&(N==="reverse"?(_e=1-_e,z&&(_e-=z/o)):N==="mirror"&&(ne=d)),te=_h(0,1,_e)*o}const H=K?{done:!1,value:A[0]}:ne.next(te);h&&(H.value=h(H.value));let{done:ae}=H;!K&&_!==null&&(ae=this.playbackSpeed>=0?this.currentTime>=s:this.currentTime<=0);const de=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&ae);return de&&q!==oE&&(H.value=KM(A,this.options,O,this.speed)),$&&$(H.value),de&&this.finish(),H}then(t,n){return this.finished.then(t,n)}get duration(){return Tu(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Tu(t)}get time(){return Tu(this.currentTime)}set time(t){t=xd(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(il.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Tu(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=mne,startTime:n}=this.options;this.driver||(this.driver=t(s=>this.tick(s))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(il.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function Nne(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const jm=e=>e*180/Math.PI,sE=e=>{const t=jm(Math.atan2(e[1],e[0]));return lE(t)},Dne={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:sE,rotateZ:sE,skewX:e=>jm(Math.atan(e[1])),skewY:e=>jm(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},lE=e=>(e=e%360,e<0&&(e+=360),e),lO=sE,cO=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),uO=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),One={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:cO,scaleY:uO,scale:e=>(cO(e)+uO(e))/2,rotateX:e=>lE(jm(Math.atan2(e[6],e[5]))),rotateY:e=>lE(jm(Math.atan2(-e[2],e[0]))),rotateZ:lO,rotate:lO,skewX:e=>jm(Math.atan(e[4])),skewY:e=>jm(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function cE(e){return e.includes("scale")?1:0}function uE(e,t){if(!e||e==="none")return cE(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=One,s=n;else{const o=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Dne,s=o}if(!s)return cE(t);const h=r[t],d=s[1].split(",").map(Lne);return typeof h=="function"?h(d):d[h]}const Rne=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return uE(n,t)};function Lne(e){return parseFloat(e.trim())}const Jy=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Qy=new Set(Jy),dO=e=>e===Yy||e===jn,zne=new Set(["x","y","z"]),Fne=Jy.filter(e=>!zne.has(e));function Bne(e){const t=[];return Fne.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const bp={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>uE(t,"x"),y:(e,{transform:t})=>uE(t,"y")};bp.translateX=bp.x;bp.translateY=bp.y;const Om=new Set;let dE=!1,hE=!1,fE=!1;function F$(){if(hE){const e=Array.from(Om).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=Bne(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([h,d])=>{r.getValue(h)?.set(d)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}hE=!1,dE=!1,Om.forEach(e=>e.complete(fE)),Om.clear()}function B$(){Om.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(hE=!0)})}function $ne(){fE=!0,B$(),F$(),fE=!1}class JM{constructor(t,n,r,s,h,d=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=h,this.isAsync=d}scheduleResolve(){this.state="scheduled",this.isAsync?(Om.add(this),dE||(dE=!0,Ii.read(B$),Ii.resolveKeyframes(F$))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;if(t[0]===null){const h=s?.get(),d=t[t.length-1];if(h!==void 0)t[0]=h;else if(r&&n){const o=r.readValue(n,d);o!=null&&(t[0]=o)}t[0]===void 0&&(t[0]=d),s&&h===void 0&&s.set(t[0])}Nne(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Om.delete(this)}cancel(){this.state==="scheduled"&&(Om.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Vne=e=>e.startsWith("--");function Une(e,t,n){Vne(t)?e.style.setProperty(t,n):e.style[t]=n}const qne=BM(()=>window.ScrollTimeline!==void 0),Gne={};function Wne(e,t){const n=BM(e);return()=>Gne[t]??n()}const $$=Wne(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),rx=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,hO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:rx([0,.65,.55,1]),circOut:rx([.55,0,1,.45]),backIn:rx([.31,.01,.66,-.59]),backOut:rx([.33,1.53,.69,.99])};function V$(e,t){if(e)return typeof e=="function"?$$()?R$(e,t):"ease-out":P$(e)?rx(e):Array.isArray(e)?e.map(n=>V$(n,t)||hO.easeOut):hO[e]}function Hne(e,t,n,{delay:r=0,duration:s=300,repeat:h=0,repeatType:d="loop",ease:o="easeOut",times:_}={},w=void 0){const A={[t]:n};_&&(A.offset=_);const P=V$(o,s);Array.isArray(P)&&(A.easing=P);const N={delay:r,duration:s,easing:Array.isArray(P)?"linear":P,fill:"both",iterations:h+1,direction:d==="reverse"?"alternate":"normal"};return w&&(N.pseudoElement=w),e.animate(A,N)}function U$(e){return typeof e=="function"&&"applyToOptions"in e}function Zne({type:e,...t}){return U$(e)&&$$()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class q$ extends XM{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,this.manualStartTime=null,!t)return;const{element:n,name:r,keyframes:s,pseudoElement:h,allowFlatten:d=!1,finalKeyframe:o,onComplete:_}=t;this.isPseudoElement=!!h,this.allowFlatten=d,this.options=t,FM(typeof t.type!="string");const w=Zne(t);this.animation=Hne(n,r,s,w,h),w.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!h){const A=KM(s,this.options,o,this.speed);this.updateMotionValue?this.updateMotionValue(A):Une(n,r,A),this.animation.cancel()}_?.(),this.notifyFinished()}}play(){this.isStopped||(this.manualStartTime=null,this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){const t=this.options?.element;!this.isPseudoElement&&t?.isConnected&&this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Tu(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Tu(t)}get time(){return Tu(Number(this.animation.currentTime)||0)}set time(t){this.manualStartTime=null,this.finishedTime=null,this.animation.currentTime=xd(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return this.manualStartTime??Number(this.animation.startTime)}set startTime(t){this.manualStartTime=this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&qne()?(this.animation.timeline=t,Cu):n(this)}}const G$={anticipate:b$,backInOut:_$,circInOut:S$};function Kne(e){return e in G$}function Xne(e){typeof e.ease=="string"&&Kne(e.ease)&&(e.ease=G$[e.ease])}const gS=10;class Yne extends q${constructor(t){Xne(t),z$(t),super(t),t.startTime!==void 0&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:s,element:h,...d}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const o=new YM({...d,autoplay:!1}),_=Math.max(gS,il.now()-this.startTime),w=_h(0,gS,_-gS);n.setWithVelocity(o.sample(Math.max(0,_-w)).value,o.sample(_).value,w),o.stop()}}const fO=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Ip.test(e)||e==="0")&&!e.startsWith("url("));function Jne(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function Qne(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const h=e[e.length-1],d=fO(s,t),o=fO(h,t);return!d||!o?!1:Jne(e)||(n==="spring"||U$(n))&&r}function pE(e){e.duration=0,e.type="keyframes"}const ere=new Set(["opacity","clipPath","filter","transform"]),tre=BM(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function nre(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:s,damping:h,type:d}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:_,transformTemplate:w}=t.owner.getProps();return tre()&&n&&ere.has(n)&&(n!=="transform"||!w)&&!_&&!r&&s!=="mirror"&&h!==0&&d!=="inertia"}const rre=40;class ire extends XM{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:h=0,repeatType:d="loop",keyframes:o,name:_,motionValue:w,element:A,...P}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=il.now();const N={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:h,repeatType:d,name:_,motionValue:w,element:A,...P},z=A?.KeyframeResolver||JM;this.keyframeResolver=new z(o,(q,$,O)=>this.onKeyframesResolved(q,$,N,!O),_,w,A),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,s){this.keyframeResolver=void 0;const{name:h,type:d,velocity:o,delay:_,isHandoff:w,onUpdate:A}=r;this.resolvedAt=il.now(),Qne(t,h,d,o)||((xf.instantAnimations||!_)&&A?.(KM(t,r,n)),t[0]=t[t.length-1],pE(r),r.repeat=0);const N={startTime:s?this.resolvedAt?this.resolvedAt-this.createdAt>rre?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},z=!w&&nre(N),q=N.motionValue?.owner?.current,$=z?new Yne({...N,element:q}):new YM(N);$.finished.then(()=>{this.notifyFinished()}).catch(Cu),this.pendingTimeline&&(this.stopTimeline=$.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=$}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),$ne()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}function W$(e,t,n,r=0,s=1){const h=Array.from(e).sort((w,A)=>w.sortNodePosition(A)).indexOf(t),d=e.size,o=(d-1)*r;return typeof n=="function"?n(h,d):s===1?h*r:o-h*r}const are=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function ore(e){const t=are.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function H$(e,t,n=1){const[r,s]=ore(e);if(!r)return;const h=window.getComputedStyle(t).getPropertyValue(r);if(h){const d=h.trim();return h$(d)?parseFloat(d):d}return qM(s)?H$(s,t,n+1):s}const sre={type:"spring",stiffness:500,damping:25,restSpeed:10},lre=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),cre={type:"keyframes",duration:.8},ure={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},dre=(e,{keyframes:t})=>t.length>2?cre:Qy.has(e)?e.startsWith("scale")?lre(t[1]):sre:ure,hre=e=>e!==null;function fre(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(hre),h=t&&n!=="loop"&&t%2===1?0:s.length-1;return s[h]}function Z$(e,t){if(e?.inherit&&t){const{inherit:n,...r}=e;return{...t,...r}}return e}function QM(e,t){const n=e?.[t]??e?.default??e;return n!==e?Z$(n,e):n}function pre({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:h,repeatType:d,repeatDelay:o,from:_,elapsed:w,...A}){return!!Object.keys(A).length}const ek=(e,t,n,r={},s,h)=>d=>{const o=QM(r,e)||{},_=o.delay||r.delay||0;let{elapsed:w=0}=r;w=w-xd(_);const A={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...o,delay:-w,onUpdate:N=>{t.set(N),o.onUpdate&&o.onUpdate(N)},onComplete:()=>{d(),o.onComplete&&o.onComplete()},name:e,motionValue:t,element:h?void 0:s};pre(o)||Object.assign(A,dre(e,A)),A.duration&&(A.duration=xd(A.duration)),A.repeatDelay&&(A.repeatDelay=xd(A.repeatDelay)),A.from!==void 0&&(A.keyframes[0]=A.from);let P=!1;if((A.type===!1||A.duration===0&&!A.repeatDelay)&&(pE(A),A.delay===0&&(P=!0)),(xf.instantAnimations||xf.skipAnimations||s?.shouldSkipAnimations)&&(P=!0,pE(A),A.delay=0),A.allowFlatten=!o.type&&!o.ease,P&&!h&&t.get()!==void 0){const N=fre(A.keyframes,o);if(N!==void 0){Ii.update(()=>{A.onUpdate(N),A.onComplete()});return}}return o.isSync?new YM(A):new ire(A)};function pO(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function tk(e,t,n,r){if(typeof t=="function"){const[s,h]=pO(r);t=t(n!==void 0?n:e.custom,s,h)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,h]=pO(r);t=t(n!==void 0?n:e.custom,s,h)}return t}function ay(e,t,n){const r=e.getProps();return tk(r,t,n!==void 0?n:r.custom,e)}const K$=new Set(["width","height","top","left","right","bottom",...Jy]),mO=30,mre=e=>!isNaN(parseFloat(e));class gre{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const s=il.now();if(this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const h of this.dependents)h.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=il.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=mre(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new $M);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ii.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=il.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>mO)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,mO);return m$(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function py(e,t){return new gre(e,t)}const mE=e=>Array.isArray(e);function yre(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,py(n))}function vre(e){return mE(e)?e[e.length-1]||0:e}function xre(e,t){const n=ay(e,t);let{transitionEnd:r={},transition:s={},...h}=n||{};h={...h,...r};for(const d in h){const o=vre(h[d]);yre(e,d,o)}}const Es=e=>!!(e&&e.getVelocity);function _re(e){return!!(Es(e)&&e.add)}function gE(e,t){const n=e.getValue("willChange");if(_re(n))return n.add(t);if(!n&&xf.WillChange){const r=new xf.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function nk(e){return e.replace(/([A-Z])/g,t=>`-${t.toLowerCase()}`)}const bre="framerAppearId",X$="data-"+nk(bre);function Y$(e){return e.props[X$]}function wre({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function J$(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:h,transitionEnd:d,...o}=t;const _=e.getDefaultTransition();h=h?Z$(h,_):_;const w=h?.reduceMotion;r&&(h=r);const A=[],P=s&&e.animationState&&e.animationState.getState()[s];for(const N in o){const z=e.getValue(N,e.latestValues[N]??null),q=o[N];if(q===void 0||P&&wre(P,N))continue;const $={delay:n,...QM(h||{},N)},O=z.get();if(O!==void 0&&!z.isAnimating&&!Array.isArray(q)&&q===O&&!$.velocity)continue;let X=!1;if(window.MotionHandoffAnimation){const ne=Y$(e);if(ne){const H=window.MotionHandoffAnimation(ne,N,Ii);H!==null&&($.startTime=H,X=!0)}}gE(e,N);const K=w??e.shouldReduceMotion;z.start(ek(N,z,q,K&&K$.has(N)?{type:!1}:$,e,X));const te=z.animation;te&&A.push(te)}if(d){const N=()=>Ii.update(()=>{d&&xre(e,d)});A.length?Promise.all(A).then(N):N()}return A}function yE(e,t,n={}){const r=ay(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const h=r?()=>Promise.all(J$(e,r,n)):()=>Promise.resolve(),d=e.variantChildren&&e.variantChildren.size?(_=0)=>{const{delayChildren:w=0,staggerChildren:A,staggerDirection:P}=s;return Sre(e,t,_,w,A,P,n)}:()=>Promise.resolve(),{when:o}=s;if(o){const[_,w]=o==="beforeChildren"?[h,d]:[d,h];return _().then(()=>w())}else return Promise.all([h(),d(n.delay)])}function Sre(e,t,n=0,r=0,s=0,h=1,d){const o=[];for(const _ of e.variantChildren)_.notify("AnimationStart",t),o.push(yE(_,t,{...d,delay:n+(typeof r=="function"?0:r)+W$(e.variantChildren,_,r,s,h)}).then(()=>_.notify("AnimationComplete",t)));return Promise.all(o)}function Tre(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(h=>yE(e,h,n));r=Promise.all(s)}else if(typeof t=="string")r=yE(e,t,n);else{const s=typeof t=="function"?ay(e,t,n.custom):t;r=Promise.all(J$(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}const Pre={test:e=>e==="auto",parse:e=>e},Q$=e=>t=>t.test(e),eV=[Yy,jn,ph,mp,Qte,Jte,Pre],gO=e=>eV.find(Q$(e));function Are(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||p$(e):!0}const Cre=new Set(["brightness","contrast","saturate","opacity"]);function Ere(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(GM)||[];if(!r)return e;const s=n.replace(r,"");let h=Cre.has(t)?1:0;return r!==n&&(h*=100),t+"("+h+s+")"}const jre=/\b([a-z-]*)\(.*?\)/gu,vE={...Ip,getAnimatableNone:e=>{const t=e.match(jre);return t?t.map(Ere).join(" "):e}},yO={...Yy,transform:Math.round},Mre={rotate:mp,rotateX:mp,rotateY:mp,rotateZ:mp,scale:R_,scaleX:R_,scaleY:R_,scaleZ:R_,skew:mp,skewX:mp,skewY:mp,distance:jn,translateX:jn,translateY:jn,translateZ:jn,x:jn,y:jn,z:jn,perspective:jn,transformPerspective:jn,opacity:Sx,originX:rO,originY:rO,originZ:jn},rk={borderWidth:jn,borderTopWidth:jn,borderRightWidth:jn,borderBottomWidth:jn,borderLeftWidth:jn,borderRadius:jn,borderTopLeftRadius:jn,borderTopRightRadius:jn,borderBottomRightRadius:jn,borderBottomLeftRadius:jn,width:jn,maxWidth:jn,height:jn,maxHeight:jn,top:jn,right:jn,bottom:jn,left:jn,inset:jn,insetBlock:jn,insetBlockStart:jn,insetBlockEnd:jn,insetInline:jn,insetInlineStart:jn,insetInlineEnd:jn,padding:jn,paddingTop:jn,paddingRight:jn,paddingBottom:jn,paddingLeft:jn,paddingBlock:jn,paddingBlockStart:jn,paddingBlockEnd:jn,paddingInline:jn,paddingInlineStart:jn,paddingInlineEnd:jn,margin:jn,marginTop:jn,marginRight:jn,marginBottom:jn,marginLeft:jn,marginBlock:jn,marginBlockStart:jn,marginBlockEnd:jn,marginInline:jn,marginInlineStart:jn,marginInlineEnd:jn,fontSize:jn,backgroundPositionX:jn,backgroundPositionY:jn,...Mre,zIndex:yO,fillOpacity:Sx,strokeOpacity:Sx,numOctaves:yO},kre={...rk,color:Ka,backgroundColor:Ka,outlineColor:Ka,fill:Ka,stroke:Ka,borderColor:Ka,borderTopColor:Ka,borderRightColor:Ka,borderBottomColor:Ka,borderLeftColor:Ka,filter:vE,WebkitFilter:vE},tV=e=>kre[e];function nV(e,t){let n=tV(e);return n!==vE&&(n=Ip),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Ire=new Set(["auto","none","0"]);function Nre(e,t,n){let r=0,s;for(;r<e.length&&!s;){const h=e[r];typeof h=="string"&&!Ire.has(h)&&Tx(h).values.length&&(s=e[r]),r++}if(s&&n)for(const h of t)e[h]=nV(n,s)}class Dre extends JM{constructor(t,n,r,s,h){super(t,n,r,s,h,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let A=0;A<t.length;A++){let P=t[A];if(typeof P=="string"&&(P=P.trim(),qM(P))){const N=H$(P,n.current);N!==void 0&&(t[A]=N),A===t.length-1&&(this.finalKeyframe=P)}}if(this.resolveNoneKeyframes(),!K$.has(r)||t.length!==2)return;const[s,h]=t,d=gO(s),o=gO(h),_=nO(s),w=nO(h);if(_!==w&&bp[r]){this.needsMeasurement=!0;return}if(d!==o)if(dO(d)&&dO(o))for(let A=0;A<t.length;A++){const P=t[A];typeof P=="string"&&(t[A]=parseFloat(P))}else bp[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)(t[s]===null||Are(t[s]))&&r.push(s);r.length&&Nre(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=bp[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const h=r.length-1,d=r[h];r[h]=bp[n](t.measureViewportBox(),window.getComputedStyle(t.current)),d!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=d),this.removedTransforms?.length&&this.removedTransforms.forEach(([o,_])=>{t.getValue(o).set(_)}),this.resolveNoneKeyframes()}}const Ore=new Set(["opacity","clipPath","filter","transform"]);function rV(e,t,n){if(e==null)return[];if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const s=n?.[e]??r.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e).filter(r=>r!=null)}const iV=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function xE(e){return f$(e)&&"offsetHeight"in e}const{schedule:ik}=A$(queueMicrotask,!1),fd={x:!1,y:!1};function aV(){return fd.x||fd.y}function Rre(e){return e==="x"||e==="y"?fd[e]?null:(fd[e]=!0,()=>{fd[e]=!1}):fd.x||fd.y?null:(fd.x=fd.y=!0,()=>{fd.x=fd.y=!1})}function oV(e,t){const n=rV(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function Lre(e){return!(e.pointerType==="touch"||aV())}function zre(e,t,n={}){const[r,s,h]=oV(e,n);return r.forEach(d=>{let o=!1,_=!1,w;const A=()=>{d.removeEventListener("pointerleave",q)},P=O=>{w&&(w(O),w=void 0),A()},N=O=>{o=!1,window.removeEventListener("pointerup",N),window.removeEventListener("pointercancel",N),_&&(_=!1,P(O))},z=()=>{o=!0,window.addEventListener("pointerup",N,s),window.addEventListener("pointercancel",N,s)},q=O=>{if(O.pointerType!=="touch"){if(o){_=!0;return}P(O)}},$=O=>{if(!Lre(O))return;_=!1;const X=t(d,O);typeof X=="function"&&(w=X,d.addEventListener("pointerleave",q,s))};d.addEventListener("pointerenter",$,s),d.addEventListener("pointerdown",z,s)}),h}const sV=(e,t)=>t?e===t?!0:sV(e,t.parentElement):!1,ak=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Fre=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Bre(e){return Fre.has(e.tagName)||e.isContentEditable===!0}const $re=new Set(["INPUT","SELECT","TEXTAREA"]);function Vre(e){return $re.has(e.tagName)||e.isContentEditable===!0}const lb=new WeakSet;function vO(e){return t=>{t.key==="Enter"&&e(t)}}function yS(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Ure=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=vO(()=>{if(lb.has(n))return;yS(n,"down");const s=vO(()=>{yS(n,"up")}),h=()=>yS(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",h,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function xO(e){return ak(e)&&!aV()}const _O=new WeakSet;function qre(e,t,n={}){const[r,s,h]=oV(e,n),d=o=>{const _=o.currentTarget;if(!xO(o)||_O.has(o))return;lb.add(_),n.stopPropagation&&_O.add(o);const w=t(_,o),A=(z,q)=>{window.removeEventListener("pointerup",P),window.removeEventListener("pointercancel",N),lb.has(_)&&lb.delete(_),xO(z)&&typeof w=="function"&&w(z,{success:q})},P=z=>{A(z,_===window||_===document||n.useGlobalTarget||sV(_,z.target))},N=z=>{A(z,!1)};window.addEventListener("pointerup",P,s),window.addEventListener("pointercancel",N,s)};return r.forEach(o=>{(n.useGlobalTarget?window:o).addEventListener("pointerdown",d,s),xE(o)&&(o.addEventListener("focus",w=>Ure(w,s)),!Bre(o)&&!o.hasAttribute("tabindex")&&(o.tabIndex=0))}),h}function ok(e){return f$(e)&&"ownerSVGElement"in e}const cb=new WeakMap;let ub;const lV=(e,t,n)=>(r,s)=>s&&s[0]?s[0][e+"Size"]:ok(r)&&"getBBox"in r?r.getBBox()[t]:r[n],Gre=lV("inline","width","offsetWidth"),Wre=lV("block","height","offsetHeight");function Hre({target:e,borderBoxSize:t}){cb.get(e)?.forEach(n=>{n(e,{get width(){return Gre(e,t)},get height(){return Wre(e,t)}})})}function Zre(e){e.forEach(Hre)}function Kre(){typeof ResizeObserver>"u"||(ub=new ResizeObserver(Zre))}function Xre(e,t){ub||Kre();const n=rV(e);return n.forEach(r=>{let s=cb.get(r);s||(s=new Set,cb.set(r,s)),s.add(t),ub?.observe(r)}),()=>{n.forEach(r=>{const s=cb.get(r);s?.delete(t),s?.size||ub?.unobserve(r)})}}const db=new Set;let Zg;function Yre(){Zg=()=>{const e={get width(){return window.innerWidth},get height(){return window.innerHeight}};db.forEach(t=>t(e))},window.addEventListener("resize",Zg)}function Jre(e){return db.add(e),Zg||Yre(),()=>{db.delete(e),!db.size&&typeof Zg=="function"&&(window.removeEventListener("resize",Zg),Zg=void 0)}}function bO(e,t){return typeof e=="function"?Jre(e):Xre(e,t)}function Qre(e){return ok(e)&&e.tagName==="svg"}const eie=[...eV,Ka,Ip],tie=e=>eie.find(Q$(e)),wO=()=>({translate:0,scale:1,origin:0,originPoint:0}),Kg=()=>({x:wO(),y:wO()}),SO=()=>({min:0,max:0}),yo=()=>({x:SO(),y:SO()}),nie=new WeakMap;function sw(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Px(e){return typeof e=="string"||Array.isArray(e)}const sk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],lk=["initial",...sk];function lw(e){return sw(e.animate)||lk.some(t=>Px(e[t]))}function cV(e){return!!(lw(e)||e.variants)}function rie(e,t,n){for(const r in t){const s=t[r],h=n[r];if(Es(s))e.addValue(r,s);else if(Es(h))e.addValue(r,py(s,{owner:e}));else if(h!==s)if(e.hasValue(r)){const d=e.getValue(r);d.liveStyle===!0?d.jump(s):d.hasAnimated||d.set(s)}else{const d=e.getStaticValue(r);e.addValue(r,py(d!==void 0?d:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const _E={current:null},uV={current:!1},iie=typeof window<"u";function aie(){if(uV.current=!0,!!iie)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>_E.current=e.matches;e.addEventListener("change",t),t()}else _E.current=!1}const TO=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];let Ob={};function dV(e){Ob=e}function oie(){return Ob}class sie{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,skipAnimations:h,blockInitialAnimation:d,visualState:o},_={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.shouldSkipAnimations=!1,this.values=new Map,this.KeyframeResolver=JM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.hasBeenMounted=!1,this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const z=il.now();this.renderScheduledAt<z&&(this.renderScheduledAt=z,Ii.render(this.render,!1,!0))};const{latestValues:w,renderState:A}=o;this.latestValues=w,this.baseTarget={...w},this.initialValues=n.initial?{...w}:{},this.renderState=A,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.skipAnimationsConfig=h,this.options=_,this.blockInitialAnimation=!!d,this.isControllingVariants=lw(n),this.isVariantNode=cV(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:P,...N}=this.scrapeMotionValuesFromProps(n,{},this);for(const z in N){const q=N[z];w[z]!==void 0&&Es(q)&&q.set(w[z])}}mount(t){if(this.hasBeenMounted)for(const n in this.initialValues)this.values.get(n)?.jump(this.initialValues[n]),this.latestValues[n]=this.initialValues[n];this.current=t,nie.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),this.reducedMotionConfig==="never"?this.shouldReduceMotion=!1:this.reducedMotionConfig==="always"?this.shouldReduceMotion=!0:(uV.current||aie(),this.shouldReduceMotion=_E.current),this.shouldSkipAnimations=this.skipAnimationsConfig??!1,this.parent?.addChild(this),this.update(this.props,this.presenceContext),this.hasBeenMounted=!0}unmount(){this.projection&&this.projection.unmount(),kp(this.notifyUpdate),kp(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){if(this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)(),n.accelerate&&Ore.has(t)&&this.current instanceof HTMLElement){const{factory:d,keyframes:o,times:_,ease:w,duration:A}=n.accelerate,P=new q$({element:this.current,name:t,keyframes:o,times:_,ease:w,duration:xd(A)}),N=d(P);this.valueSubscriptions.set(t,()=>{N(),P.cancel()});return}const r=Qy.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",d=>{this.latestValues[t]=d,this.props.onUpdate&&Ii.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let h;typeof window<"u"&&window.MotionCheckAppearSync&&(h=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),h&&h(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Ob){const n=Ob[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const h=this.features[t];h.isMounted?h.update():(h.mount(),h.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):yo()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<TO.length;r++){const s=TO[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const h="on"+s,d=t[h];d&&(this.propEventSubscriptions[s]=this.on(s,d))}this.prevMotionValues=rie(this,this.scrapeMotionValuesFromProps(t,this.prevProps||{},this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=py(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(h$(r)||p$(r))?r=parseFloat(r):!tie(r)&&Ip.test(n)&&(r=nV(t,n)),this.setBaseTarget(t,Es(r)?r.get():r)),Es(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const h=tk(this.props,n,this.presenceContext?.custom);h&&(r=h[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!Es(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new $M),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){ik.render(this.render)}}class hV extends sie{constructor(){super(...arguments),this.KeyframeResolver=Dre}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){const r=t.style;return r?r[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;Es(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}class Op{constructor(t){this.isMounted=!1,this.node=t}update(){}}function fV({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function lie({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function cie(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function vS(e){return e===void 0||e===1}function bE({scale:e,scaleX:t,scaleY:n}){return!vS(e)||!vS(t)||!vS(n)}function wm(e){return bE(e)||pV(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function pV(e){return PO(e.x)||PO(e.y)}function PO(e){return e&&e!=="0%"}function Rb(e,t,n){const r=e-n,s=t*r;return n+s}function AO(e,t,n,r,s){return s!==void 0&&(e=Rb(e,s,r)),Rb(e,n,r)+t}function wE(e,t=0,n=1,r,s){e.min=AO(e.min,t,n,r,s),e.max=AO(e.max,t,n,r,s)}function mV(e,{x:t,y:n}){wE(e.x,t.translate,t.scale,t.originPoint),wE(e.y,n.translate,n.scale,n.originPoint)}const CO=.999999999999,EO=1.0000000000001;function uie(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let h,d;for(let o=0;o<s;o++){h=n[o],d=h.projectionDelta;const{visualElement:_}=h.options;_&&_.props.style&&_.props.style.display==="contents"||(r&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Yg(e,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),d&&(t.x*=d.x.scale,t.y*=d.y.scale,mV(e,d)),r&&wm(h.latestValues)&&Yg(e,h.latestValues))}t.x<EO&&t.x>CO&&(t.x=1),t.y<EO&&t.y>CO&&(t.y=1)}function Xg(e,t){e.min=e.min+t,e.max=e.max+t}function jO(e,t,n,r,s=.5){const h=aa(e.min,e.max,s);wE(e,t,n,h,r)}function Yg(e,t){jO(e.x,t.x,t.scaleX,t.scale,t.originX),jO(e.y,t.y,t.scaleY,t.scale,t.originY)}function gV(e,t){return fV(cie(e.getBoundingClientRect(),t))}function die(e,t,n){const r=gV(e,n),{scroll:s}=t;return s&&(Xg(r.x,s.offset.x),Xg(r.y,s.offset.y)),r}const hie={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},fie=Jy.length;function pie(e,t,n){let r="",s=!0;for(let h=0;h<fie;h++){const d=Jy[h],o=e[d];if(o===void 0)continue;let _=!0;if(typeof o=="number")_=o===(d.startsWith("scale")?1:0);else{const w=parseFloat(o);_=d.startsWith("scale")?w===1:w===0}if(!_||n){const w=iV(o,rk[d]);if(!_){s=!1;const A=hie[d]||d;r+=`${A}(${w}) `}n&&(t[d]=w)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function ck(e,t,n){const{style:r,vars:s,transformOrigin:h}=e;let d=!1,o=!1;for(const _ in t){const w=t[_];if(Qy.has(_)){d=!0;continue}else if(E$(_)){s[_]=w;continue}else{const A=iV(w,rk[_]);_.startsWith("origin")?(o=!0,h[_]=A):r[_]=A}}if(t.transform||(d||n?r.transform=pie(t,e.transform,n):r.transform&&(r.transform="none")),o){const{originX:_="50%",originY:w="50%",originZ:A=0}=h;r.transformOrigin=`${_} ${w} ${A}`}}function yV(e,{style:t,vars:n},r,s){const h=e.style;let d;for(d in t)h[d]=t[d];s?.applyProjectionStyles(h,r);for(d in n)h.setProperty(d,n[d])}function MO(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const $v={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(jn.test(e))e=parseFloat(e);else return e;const n=MO(e,t.target.x),r=MO(e,t.target.y);return`${n}% ${r}%`}},mie={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Ip.parse(e);if(s.length>5)return r;const h=Ip.createTransformer(e),d=typeof s[0]!="number"?1:0,o=n.x.scale*t.x,_=n.y.scale*t.y;s[0+d]/=o,s[1+d]/=_;const w=aa(o,_,.5);return typeof s[2+d]=="number"&&(s[2+d]/=w),typeof s[3+d]=="number"&&(s[3+d]/=w),h(s)}},SE={borderRadius:{...$v,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:$v,borderTopRightRadius:$v,borderBottomLeftRadius:$v,borderBottomRightRadius:$v,boxShadow:mie};function vV(e,{layout:t,layoutId:n}){return Qy.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!SE[e]||e==="opacity")}function uk(e,t,n){const r=e.style,s=t?.style,h={};if(!r)return h;for(const d in r)(Es(r[d])||s&&Es(s[d])||vV(d,e)||n?.getValue(d)?.liveStyle!==void 0)&&(h[d]=r[d]);return h}function gie(e){return window.getComputedStyle(e)}class yie extends hV{constructor(){super(...arguments),this.type="html",this.renderInstance=yV}readValueFromInstance(t,n){if(Qy.has(n))return this.projection?.isProjecting?cE(n):Rne(t,n);{const r=gie(t),s=(E$(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return gV(t,n)}build(t,n,r){ck(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return uk(t,n,r)}}const vie={offset:"stroke-dashoffset",array:"stroke-dasharray"},xie={offset:"strokeDashoffset",array:"strokeDasharray"};function _ie(e,t,n=1,r=0,s=!0){e.pathLength=1;const h=s?vie:xie;e[h.offset]=`${-r}`,e[h.array]=`${t} ${n}`}const bie=["offsetDistance","offsetPath","offsetRotate","offsetAnchor"];function xV(e,{attrX:t,attrY:n,attrScale:r,pathLength:s,pathSpacing:h=1,pathOffset:d=0,...o},_,w,A){if(ck(e,o,w),_){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:P,style:N}=e;P.transform&&(N.transform=P.transform,delete P.transform),(N.transform||P.transformOrigin)&&(N.transformOrigin=P.transformOrigin??"50% 50%",delete P.transformOrigin),N.transform&&(N.transformBox=A?.transformBox??"fill-box",delete P.transformBox);for(const z of bie)P[z]!==void 0&&(N[z]=P[z],delete P[z]);t!==void 0&&(P.x=t),n!==void 0&&(P.y=n),r!==void 0&&(P.scale=r),s!==void 0&&_ie(P,s,h,d,!1)}const _V=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]),bV=e=>typeof e=="string"&&e.toLowerCase()==="svg";function wie(e,t,n,r){yV(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(_V.has(s)?s:nk(s),t.attrs[s])}function wV(e,t,n){const r=uk(e,t,n);for(const s in e)if(Es(e[s])||Es(t[s])){const h=Jy.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[h]=e[s]}return r}class Sie extends hV{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=yo}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Qy.has(n)){const r=tV(n);return r&&r.default||0}return n=_V.has(n)?n:nk(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return wV(t,n,r)}build(t,n,r){xV(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,s){wie(t,n,r,s)}mount(t){this.isSVGTag=bV(t.tagName),super.mount(t)}}const Tie=lk.length;function SV(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?SV(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Tie;n++){const r=lk[n],s=e.props[r];(Px(s)||s===!1)&&(t[r]=s)}return t}function TV(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Pie=[...sk].reverse(),Aie=sk.length;function Cie(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Tre(e,n,r)))}function Eie(e){let t=Cie(e),n=kO(),r=!0;const s=_=>(w,A)=>{const P=ay(e,A,_==="exit"?e.presenceContext?.custom:void 0);if(P){const{transition:N,transitionEnd:z,...q}=P;w={...w,...q,...z}}return w};function h(_){t=_(e)}function d(_){const{props:w}=e,A=SV(e.parent)||{},P=[],N=new Set;let z={},q=1/0;for(let O=0;O<Aie;O++){const X=Pie[O],K=n[X],te=w[X]!==void 0?w[X]:A[X],ne=Px(te),H=X===_?K.isActive:null;H===!1&&(q=O);let ae=te===A[X]&&te!==w[X]&&ne;if(ae&&r&&e.manuallyAnimateOnMount&&(ae=!1),K.protectedKeys={...z},!K.isActive&&H===null||!te&&!K.prevProp||sw(te)||typeof te=="boolean")continue;if(X==="exit"&&K.isActive&&H!==!0){K.prevResolvedValues&&(z={...z,...K.prevResolvedValues});continue}const de=jie(K.prevProp,te);let ye=de||X===_&&K.isActive&&!ae&&ne||O>q&&ne,Ae=!1;const _e=Array.isArray(te)?te:[te];let fe=_e.reduce(s(X),{});H===!1&&(fe={});const{prevResolvedValues:Ee={}}=K,Be={...Ee,...fe},De=et=>{ye=!0,N.has(et)&&(Ae=!0,N.delete(et)),K.needsAnimating[et]=!0;const Ce=e.getValue(et);Ce&&(Ce.liveStyle=!1)};for(const et in Be){const Ce=fe[et],We=Ee[et];if(z.hasOwnProperty(et))continue;let Qe=!1;mE(Ce)&&mE(We)?Qe=!TV(Ce,We):Qe=Ce!==We,Qe?Ce!=null?De(et):N.add(et):Ce!==void 0&&N.has(et)?De(et):K.protectedKeys[et]=!0}K.prevProp=te,K.prevResolvedValues=fe,K.isActive&&(z={...z,...fe}),r&&e.blockInitialAnimation&&(ye=!1);const Je=ae&&de;ye&&(!Je||Ae)&&P.push(..._e.map(et=>{const Ce={type:X};if(typeof et=="string"&&r&&!Je&&e.manuallyAnimateOnMount&&e.parent){const{parent:We}=e,Qe=ay(We,et);if(We.enteringChildren&&Qe){const{delayChildren:Re}=Qe.transition||{};Ce.delay=W$(We.enteringChildren,e,Re)}}return{animation:et,options:Ce}}))}if(N.size){const O={};if(typeof w.initial!="boolean"){const X=ay(e,Array.isArray(w.initial)?w.initial[0]:w.initial);X&&X.transition&&(O.transition=X.transition)}N.forEach(X=>{const K=e.getBaseTarget(X),te=e.getValue(X);te&&(te.liveStyle=!0),O[X]=K??null}),P.push({animation:O})}let $=!!P.length;return r&&(w.initial===!1||w.initial===w.animate)&&!e.manuallyAnimateOnMount&&($=!1),r=!1,$?t(P):Promise.resolve()}function o(_,w){if(n[_].isActive===w)return Promise.resolve();e.variantChildren?.forEach(P=>P.animationState?.setActive(_,w)),n[_].isActive=w;const A=d(_);for(const P in n)n[P].protectedKeys={};return A}return{animateChanges:d,setActive:o,setAnimateFunction:h,getState:()=>n,reset:()=>{n=kO()}}}function jie(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!TV(t,e):!1}function gm(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function kO(){return{animate:gm(!0),whileInView:gm(),whileHover:gm(),whileTap:gm(),whileDrag:gm(),whileFocus:gm(),exit:gm()}}function IO(e,t){e.min=t.min,e.max=t.max}function ud(e,t){IO(e.x,t.x),IO(e.y,t.y)}function NO(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}const PV=1e-4,Mie=1-PV,kie=1+PV,AV=.01,Iie=0-AV,Nie=0+AV;function al(e){return e.max-e.min}function Die(e,t,n){return Math.abs(e-t)<=n}function DO(e,t,n,r=.5){e.origin=r,e.originPoint=aa(t.min,t.max,e.origin),e.scale=al(n)/al(t),e.translate=aa(n.min,n.max,e.origin)-e.originPoint,(e.scale>=Mie&&e.scale<=kie||isNaN(e.scale))&&(e.scale=1),(e.translate>=Iie&&e.translate<=Nie||isNaN(e.translate))&&(e.translate=0)}function hx(e,t,n,r){DO(e.x,t.x,n.x,r?r.originX:void 0),DO(e.y,t.y,n.y,r?r.originY:void 0)}function OO(e,t,n){e.min=n.min+t.min,e.max=e.min+al(t)}function Oie(e,t,n){OO(e.x,t.x,n.x),OO(e.y,t.y,n.y)}function RO(e,t,n){e.min=t.min-n.min,e.max=e.min+al(t)}function Lb(e,t,n){RO(e.x,t.x,n.x),RO(e.y,t.y,n.y)}function LO(e,t,n,r,s){return e-=t,e=Rb(e,1/n,r),s!==void 0&&(e=Rb(e,1/s,r)),e}function Rie(e,t=0,n=1,r=.5,s,h=e,d=e){if(ph.test(t)&&(t=parseFloat(t),t=aa(d.min,d.max,t/100)-d.min),typeof t!="number")return;let o=aa(h.min,h.max,r);e===h&&(o-=t),e.min=LO(e.min,t,n,o,s),e.max=LO(e.max,t,n,o,s)}function zO(e,t,[n,r,s],h,d){Rie(e,t[n],t[r],t[s],t.scale,h,d)}const Lie=["x","scaleX","originX"],zie=["y","scaleY","originY"];function FO(e,t,n,r){zO(e.x,t,Lie,n?n.x:void 0,r?r.x:void 0),zO(e.y,t,zie,n?n.y:void 0,r?r.y:void 0)}function BO(e){return e.translate===0&&e.scale===1}function CV(e){return BO(e.x)&&BO(e.y)}function $O(e,t){return e.min===t.min&&e.max===t.max}function Fie(e,t){return $O(e.x,t.x)&&$O(e.y,t.y)}function VO(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function EV(e,t){return VO(e.x,t.x)&&VO(e.y,t.y)}function UO(e){return al(e.x)/al(e.y)}function qO(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}function ah(e){return[e("x"),e("y")]}function Bie(e,t,n){let r="";const s=e.x.translate/t.x,h=e.y.translate/t.y,d=n?.z||0;if((s||h||d)&&(r=`translate3d(${s}px, ${h}px, ${d}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:w,rotate:A,rotateX:P,rotateY:N,skewX:z,skewY:q}=n;w&&(r=`perspective(${w}px) ${r}`),A&&(r+=`rotate(${A}deg) `),P&&(r+=`rotateX(${P}deg) `),N&&(r+=`rotateY(${N}deg) `),z&&(r+=`skewX(${z}deg) `),q&&(r+=`skewY(${q}deg) `)}const o=e.x.scale*t.x,_=e.y.scale*t.y;return(o!==1||_!==1)&&(r+=`scale(${o}, ${_})`),r||"none"}const jV=["TopLeft","TopRight","BottomLeft","BottomRight"],$ie=jV.length,GO=e=>typeof e=="string"?parseFloat(e):e,WO=e=>typeof e=="number"||jn.test(e);function Vie(e,t,n,r,s,h){s?(e.opacity=aa(0,n.opacity??1,Uie(r)),e.opacityExit=aa(t.opacity??1,0,qie(r))):h&&(e.opacity=aa(t.opacity??1,n.opacity??1,r));for(let d=0;d<$ie;d++){const o=`border${jV[d]}Radius`;let _=HO(t,o),w=HO(n,o);if(_===void 0&&w===void 0)continue;_||(_=0),w||(w=0),_===0||w===0||WO(_)===WO(w)?(e[o]=Math.max(aa(GO(_),GO(w),r),0),(ph.test(w)||ph.test(_))&&(e[o]+="%")):e[o]=w}(t.rotate||n.rotate)&&(e.rotate=aa(t.rotate||0,n.rotate||0,r))}function HO(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Uie=MV(0,.5,w$),qie=MV(.5,.95,Cu);function MV(e,t,n){return r=>r<e?0:r>t?1:n(wx(e,t,r))}function Gie(e,t,n){const r=Es(e)?e:py(e);return r.start(ek("",r,t,n)),r.animation}function Ax(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}const Wie=(e,t)=>e.depth-t.depth;class Hie{constructor(){this.children=[],this.isDirty=!1}add(t){zM(this.children,t),this.isDirty=!0}remove(t){kb(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(Wie),this.isDirty=!1,this.children.forEach(t)}}function Zie(e,t){const n=il.now(),r=({timestamp:s})=>{const h=s-n;h>=t&&(kp(r),e(h-t))};return Ii.setup(r,!0),()=>kp(r)}function hb(e){return Es(e)?e.get():e}class Kie{constructor(){this.members=[]}add(t){zM(this.members,t);for(let n=this.members.length-1;n>=0;n--){const r=this.members[n];if(r===t||r===this.lead||r===this.prevLead)continue;const s=r.instance;s&&s.isConnected===!1&&r.isPresent!==!1&&!r.snapshot&&kb(this.members,r)}t.scheduleRender()}remove(t){if(kb(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const h=this.members[s],d=h.instance;if(h.isPresent!==!1&&(!d||d.isConnected!==!1)){r=h;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender();const s=r.options.layoutDependency,h=t.options.layoutDependency;if(!(s!==void 0&&h!==void 0&&s===h)){const _=r.instance;_&&_.isConnected===!1&&!r.snapshot||(t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0))}const{crossfade:o}=t.options;o===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}const fb={hasAnimatedSinceResize:!0,hasEverUpdated:!1},xS=["","X","Y","Z"],Xie=1e3;let Yie=0;function _S(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function kV(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Y$(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:h}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ii,!(s||h))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&kV(r)}function IV({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(d={},o=t?.()){this.id=Yie++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.layoutVersion=0,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(eae),this.nodes.forEach(iae),this.nodes.forEach(aae),this.nodes.forEach(tae)},this.resolvedRelativeTargetAt=0,this.linkedParentVersion=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=d,this.root=o?o.root||o:this,this.path=o?[...o.path,o]:[],this.parent=o,this.depth=o?o.depth+1:0;for(let _=0;_<this.path.length;_++)this.path[_].shouldResetTransform=!0;this.root===this&&(this.nodes=new Hie)}addEventListener(d,o){return this.eventHandlers.has(d)||this.eventHandlers.set(d,new $M),this.eventHandlers.get(d).add(o)}notifyListeners(d,...o){const _=this.eventHandlers.get(d);_&&_.notify(...o)}hasListeners(d){return this.eventHandlers.has(d)}mount(d){if(this.instance)return;this.isSVG=ok(d)&&!Qre(d),this.instance=d;const{layoutId:o,layout:_,visualElement:w}=this.options;if(w&&!w.current&&w.mount(d),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(_||o)&&(this.isLayoutDirty=!0),e){let A,P=0;const N=()=>this.root.updateBlockedByResize=!1;Ii.read(()=>{P=window.innerWidth}),e(d,()=>{const z=window.innerWidth;z!==P&&(P=z,this.root.updateBlockedByResize=!0,A&&A(),A=Zie(N,250),fb.hasAnimatedSinceResize&&(fb.hasAnimatedSinceResize=!1,this.nodes.forEach(XO)))})}o&&this.root.registerSharedNode(o,this),this.options.animate!==!1&&w&&(o||_)&&this.addEventListener("didUpdate",({delta:A,hasLayoutChanged:P,hasRelativeLayoutChanged:N,layout:z})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const q=this.options.transition||w.getDefaultTransition()||uae,{onLayoutAnimationStart:$,onLayoutAnimationComplete:O}=w.getProps(),X=!this.targetLayout||!EV(this.targetLayout,z),K=!P&&N;if(this.options.layoutRoot||this.resumeFrom||K||P&&(X||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const te={...QM(q,"layout"),onPlay:$,onComplete:O};(w.shouldReduceMotion||this.options.layoutRoot)&&(te.delay=0,te.type=!1),this.startAnimation(te),this.setAnimationOrigin(A,K)}else P||XO(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=z})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const d=this.getStack();d&&d.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),kp(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(oae),this.animationId++)}getTransformTemplate(){const{visualElement:d}=this.options;return d&&d.getProps().transformTemplate}willUpdate(d=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&kV(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let A=0;A<this.path.length;A++){const P=this.path[A];P.shouldResetTransform=!0,P.updateScroll("snapshot"),P.options.layoutRoot&&P.willUpdate(!1)}const{layoutId:o,layout:_}=this.options;if(o===void 0&&!_)return;const w=this.getTransformTemplate();this.prevTransformTemplateValue=w?w(this.latestValues,""):void 0,this.updateSnapshot(),d&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(ZO);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(KO);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(rae),this.nodes.forEach(Jie),this.nodes.forEach(Qie)):this.nodes.forEach(KO),this.clearAllSnapshots();const o=il.now();as.delta=_h(0,1e3/60,o-as.timestamp),as.timestamp=o,as.isProcessing=!0,dS.update.process(as),dS.preRender.process(as),dS.render.process(as),as.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,ik.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(nae),this.sharedNodes.forEach(sae)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ii.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ii.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!al(this.snapshot.measuredBox.x)&&!al(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let _=0;_<this.path.length;_++)this.path[_].updateScroll();const d=this.layout;this.layout=this.measure(!1),this.layoutVersion++,this.layoutCorrected=yo(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:o}=this.options;o&&o.notify("LayoutMeasure",this.layout.layoutBox,d?d.layoutBox:void 0)}updateScroll(d="measure"){let o=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===d&&(o=!1),o&&this.instance){const _=r(this.instance);this.scroll={animationId:this.root.animationId,phase:d,isRoot:_,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:_}}}resetTransform(){if(!s)return;const d=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,o=this.projectionDelta&&!CV(this.projectionDelta),_=this.getTransformTemplate(),w=_?_(this.latestValues,""):void 0,A=w!==this.prevTransformTemplateValue;d&&this.instance&&(o||wm(this.latestValues)||A)&&(s(this.instance,w),this.shouldResetTransform=!1,this.scheduleRender())}measure(d=!0){const o=this.measurePageBox();let _=this.removeElementScroll(o);return d&&(_=this.removeTransform(_)),dae(_),{animationId:this.root.animationId,measuredBox:o,layoutBox:_,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:d}=this.options;if(!d)return yo();const o=d.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(hae))){const{scroll:w}=this.root;w&&(Xg(o.x,w.offset.x),Xg(o.y,w.offset.y))}return o}removeElementScroll(d){const o=yo();if(ud(o,d),this.scroll?.wasRoot)return o;for(let _=0;_<this.path.length;_++){const w=this.path[_],{scroll:A,options:P}=w;w!==this.root&&A&&P.layoutScroll&&(A.wasRoot&&ud(o,d),Xg(o.x,A.offset.x),Xg(o.y,A.offset.y))}return o}applyTransform(d,o=!1){const _=yo();ud(_,d);for(let w=0;w<this.path.length;w++){const A=this.path[w];!o&&A.options.layoutScroll&&A.scroll&&A!==A.root&&Yg(_,{x:-A.scroll.offset.x,y:-A.scroll.offset.y}),wm(A.latestValues)&&Yg(_,A.latestValues)}return wm(this.latestValues)&&Yg(_,this.latestValues),_}removeTransform(d){const o=yo();ud(o,d);for(let _=0;_<this.path.length;_++){const w=this.path[_];if(!w.instance||!wm(w.latestValues))continue;bE(w.latestValues)&&w.updateSnapshot();const A=yo(),P=w.measurePageBox();ud(A,P),FO(o,w.latestValues,w.snapshot?w.snapshot.layoutBox:void 0,A)}return wm(this.latestValues)&&FO(o,this.latestValues),o}setTargetDelta(d){this.targetDelta=d,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(d){this.options={...this.options,...d,crossfade:d.crossfade!==void 0?d.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==as.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(d=!1){const o=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=o.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=o.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=o.isSharedProjectionDirty);const _=!!this.resumingFrom||this!==o;if(!(d||_&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:A,layoutId:P}=this.options;if(!this.layout||!(A||P))return;this.resolvedRelativeTargetAt=as.timestamp;const N=this.getClosestProjectingParent();N&&this.linkedParentVersion!==N.layoutVersion&&!N.options.layoutRoot&&this.removeRelativeTarget(),!this.targetDelta&&!this.relativeTarget&&(N&&N.layout?this.createRelativeTarget(N,this.layout.layoutBox,N.layout.layoutBox):this.removeRelativeTarget()),!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=yo(),this.targetWithTransforms=yo()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Oie(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ud(this.target,this.layout.layoutBox),mV(this.target,this.targetDelta)):ud(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget&&(this.attemptToResolveRelativeTarget=!1,N&&!!N.resumingFrom==!!this.resumingFrom&&!N.options.layoutScroll&&N.target&&this.animationProgress!==1?this.createRelativeTarget(N,this.target,N.target):this.relativeParent=this.relativeTarget=void 0))}getClosestProjectingParent(){if(!(!this.parent||bE(this.parent.latestValues)||pV(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}createRelativeTarget(d,o,_){this.relativeParent=d,this.linkedParentVersion=d.layoutVersion,this.forceRelativeParentToResolveTarget(),this.relativeTarget=yo(),this.relativeTargetOrigin=yo(),Lb(this.relativeTargetOrigin,o,_),ud(this.relativeTarget,this.relativeTargetOrigin)}removeRelativeTarget(){this.relativeParent=this.relativeTarget=void 0}calcProjection(){const d=this.getLead(),o=!!this.resumingFrom||this!==d;let _=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(_=!1),o&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(_=!1),this.resolvedRelativeTargetAt===as.timestamp&&(_=!1),_)return;const{layout:w,layoutId:A}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(w||A))return;ud(this.layoutCorrected,this.layout.layoutBox);const P=this.treeScale.x,N=this.treeScale.y;uie(this.layoutCorrected,this.treeScale,this.path,o),d.layout&&!d.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(d.target=d.layout.layoutBox,d.targetWithTransforms=yo());const{target:z}=d;if(!z){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(NO(this.prevProjectionDelta.x,this.projectionDelta.x),NO(this.prevProjectionDelta.y,this.projectionDelta.y)),hx(this.projectionDelta,this.layoutCorrected,z,this.latestValues),(this.treeScale.x!==P||this.treeScale.y!==N||!qO(this.projectionDelta.x,this.prevProjectionDelta.x)||!qO(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",z))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(d=!0){if(this.options.visualElement?.scheduleRender(),d){const o=this.getStack();o&&o.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Kg(),this.projectionDelta=Kg(),this.projectionDeltaWithTransform=Kg()}setAnimationOrigin(d,o=!1){const _=this.snapshot,w=_?_.latestValues:{},A={...this.latestValues},P=Kg();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!o;const N=yo(),z=_?_.source:void 0,q=this.layout?this.layout.source:void 0,$=z!==q,O=this.getStack(),X=!O||O.members.length<=1,K=!!($&&!X&&this.options.crossfade===!0&&!this.path.some(cae));this.animationProgress=0;let te;this.mixTargetDelta=ne=>{const H=ne/1e3;YO(P.x,d.x,H),YO(P.y,d.y,H),this.setTargetDelta(P),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Lb(N,this.layout.layoutBox,this.relativeParent.layout.layoutBox),lae(this.relativeTarget,this.relativeTargetOrigin,N,H),te&&Fie(this.relativeTarget,te)&&(this.isProjectionDirty=!1),te||(te=yo()),ud(te,this.relativeTarget)),$&&(this.animationValues=A,Vie(A,w,this.latestValues,H,K,X)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=H},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(d){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(kp(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ii.update(()=>{fb.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=py(0)),this.currentAnimation=Gie(this.motionValue,[0,1e3],{...d,velocity:0,isSync:!0,onUpdate:o=>{this.mixTargetDelta(o),d.onUpdate&&d.onUpdate(o)},onStop:()=>{},onComplete:()=>{d.onComplete&&d.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const d=this.getStack();d&&d.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(Xie),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const d=this.getLead();let{targetWithTransforms:o,target:_,layout:w,latestValues:A}=d;if(!(!o||!_||!w)){if(this!==d&&this.layout&&w&&NV(this.options.animationType,this.layout.layoutBox,w.layoutBox)){_=this.target||yo();const P=al(this.layout.layoutBox.x);_.x.min=d.target.x.min,_.x.max=_.x.min+P;const N=al(this.layout.layoutBox.y);_.y.min=d.target.y.min,_.y.max=_.y.min+N}ud(o,_),Yg(o,A),hx(this.projectionDeltaWithTransform,this.layoutCorrected,o,A)}}registerSharedNode(d,o){this.sharedNodes.has(d)||this.sharedNodes.set(d,new Kie),this.sharedNodes.get(d).add(o);const w=o.options.initialPromotionConfig;o.promote({transition:w?w.transition:void 0,preserveFollowOpacity:w&&w.shouldPreserveFollowOpacity?w.shouldPreserveFollowOpacity(o):void 0})}isLead(){const d=this.getStack();return d?d.lead===this:!0}getLead(){const{layoutId:d}=this.options;return d?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:d}=this.options;return d?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:d}=this.options;if(d)return this.root.sharedNodes.get(d)}promote({needsReset:d,transition:o,preserveFollowOpacity:_}={}){const w=this.getStack();w&&w.promote(this,_),d&&(this.projectionDelta=void 0,this.needsReset=!0),o&&this.setOptions({transition:o})}relegate(){const d=this.getStack();return d?d.relegate(this):!1}resetSkewAndRotation(){const{visualElement:d}=this.options;if(!d)return;let o=!1;const{latestValues:_}=d;if((_.z||_.rotate||_.rotateX||_.rotateY||_.rotateZ||_.skewX||_.skewY)&&(o=!0),!o)return;const w={};_.z&&_S("z",d,w,this.animationValues);for(let A=0;A<xS.length;A++)_S(`rotate${xS[A]}`,d,w,this.animationValues),_S(`skew${xS[A]}`,d,w,this.animationValues);d.render();for(const A in w)d.setStaticValue(A,w[A]),this.animationValues&&(this.animationValues[A]=w[A]);d.scheduleRender()}applyProjectionStyles(d,o){if(!this.instance||this.isSVG)return;if(!this.isVisible){d.visibility="hidden";return}const _=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,d.visibility="",d.opacity="",d.pointerEvents=hb(o?.pointerEvents)||"",d.transform=_?_(this.latestValues,""):"none";return}const w=this.getLead();if(!this.projectionDelta||!this.layout||!w.target){this.options.layoutId&&(d.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,d.pointerEvents=hb(o?.pointerEvents)||""),this.hasProjected&&!wm(this.latestValues)&&(d.transform=_?_({},""):"none",this.hasProjected=!1);return}d.visibility="";const A=w.animationValues||w.latestValues;this.applyTransformsToTarget();let P=Bie(this.projectionDeltaWithTransform,this.treeScale,A);_&&(P=_(A,P)),d.transform=P;const{x:N,y:z}=this.projectionDelta;d.transformOrigin=`${N.origin*100}% ${z.origin*100}% 0`,w.animationValues?d.opacity=w===this?A.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:A.opacityExit:d.opacity=w===this?A.opacity!==void 0?A.opacity:"":A.opacityExit!==void 0?A.opacityExit:0;for(const q in SE){if(A[q]===void 0)continue;const{correct:$,applyTo:O,isCSSVariable:X}=SE[q],K=P==="none"?A[q]:$(A[q],w);if(O){const te=O.length;for(let ne=0;ne<te;ne++)d[O[ne]]=K}else X?this.options.visualElement.renderState.vars[q]=K:d[q]=K}this.options.layoutId&&(d.pointerEvents=w===this?hb(o?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(d=>d.currentAnimation?.stop()),this.root.nodes.forEach(ZO),this.root.sharedNodes.clear()}}}function Jie(e){e.updateLayout()}function Qie(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:s}=e.options,h=t.source!==e.layout.source;s==="size"?ah(A=>{const P=h?t.measuredBox[A]:t.layoutBox[A],N=al(P);P.min=n[A].min,P.max=P.min+N}):NV(s,t.layoutBox,n)&&ah(A=>{const P=h?t.measuredBox[A]:t.layoutBox[A],N=al(n[A]);P.max=P.min+N,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[A].max=e.relativeTarget[A].min+N)});const d=Kg();hx(d,n,t.layoutBox);const o=Kg();h?hx(o,e.applyTransform(r,!0),t.measuredBox):hx(o,n,t.layoutBox);const _=!CV(d);let w=!1;if(!e.resumeFrom){const A=e.getClosestProjectingParent();if(A&&!A.resumeFrom){const{snapshot:P,layout:N}=A;if(P&&N){const z=yo();Lb(z,t.layoutBox,P.layoutBox);const q=yo();Lb(q,n,N.layoutBox),EV(z,q)||(w=!0),A.options.layoutRoot&&(e.relativeTarget=q,e.relativeTargetOrigin=z,e.relativeParent=A)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:o,layoutDelta:d,hasLayoutChanged:_,hasRelativeLayoutChanged:w})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function eae(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function tae(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function nae(e){e.clearSnapshot()}function ZO(e){e.clearMeasurements()}function KO(e){e.isLayoutDirty=!1}function rae(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function XO(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function iae(e){e.resolveTargetDelta()}function aae(e){e.calcProjection()}function oae(e){e.resetSkewAndRotation()}function sae(e){e.removeLeadSnapshot()}function YO(e,t,n){e.translate=aa(t.translate,0,n),e.scale=aa(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function JO(e,t,n,r){e.min=aa(t.min,n.min,r),e.max=aa(t.max,n.max,r)}function lae(e,t,n,r){JO(e.x,t.x,n.x,r),JO(e.y,t.y,n.y,r)}function cae(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const uae={duration:.45,ease:[.4,0,.1,1]},QO=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),eR=QO("applewebkit/")&&!QO("chrome/")?Math.round:Cu;function tR(e){e.min=eR(e.min),e.max=eR(e.max)}function dae(e){tR(e.x),tR(e.y)}function NV(e,t,n){return e==="position"||e==="preserve-aspect"&&!Die(UO(t),UO(n),.2)}function hae(e){return e!==e.root&&e.scroll?.wasRoot}const fae=IV({attachResizeListener:(e,t)=>Ax(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body?.scrollLeft||0,y:document.documentElement.scrollTop||document.body?.scrollTop||0}),checkIsScrollRoot:()=>!0}),bS={current:void 0},DV=IV({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!bS.current){const e=new fae({});e.mount(window),e.setOptions({layoutScroll:!0}),bS.current=e}return bS.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),dk=W.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function nR(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function pae(...e){return t=>{let n=!1;const r=e.map(s=>{const h=nR(s,t);return!n&&typeof h=="function"&&(n=!0),h});if(n)return()=>{for(let s=0;s<r.length;s++){const h=r[s];typeof h=="function"?h():nR(e[s],null)}}}}function mae(...e){return W.useCallback(pae(...e),e)}class gae extends W.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent&&this.props.pop!==!1){const r=n.offsetParent,s=xE(r)&&r.offsetWidth||0,h=xE(r)&&r.offsetHeight||0,d=this.props.sizeRef.current;d.height=n.offsetHeight||0,d.width=n.offsetWidth||0,d.top=n.offsetTop,d.left=n.offsetLeft,d.right=s-d.width-d.left,d.bottom=h-d.height-d.top}return null}componentDidUpdate(){}render(){return this.props.children}}function yae({children:e,isPresent:t,anchorX:n,anchorY:r,root:s,pop:h}){const d=W.useId(),o=W.useRef(null),_=W.useRef({width:0,height:0,top:0,left:0,right:0,bottom:0}),{nonce:w}=W.useContext(dk),A=e.props?.ref??e?.ref,P=mae(o,A);return W.useInsertionEffect(()=>{const{width:N,height:z,top:q,left:$,right:O,bottom:X}=_.current;if(t||h===!1||!o.current||!N||!z)return;const K=n==="left"?`left: ${$}`:`right: ${O}`,te=r==="bottom"?`bottom: ${X}`:`top: ${q}`;o.current.dataset.motionPopId=d;const ne=document.createElement("style");w&&(ne.nonce=w);const H=s??document.head;return H.appendChild(ne),ne.sheet&&ne.sheet.insertRule(`
          [data-motion-pop-id="${d}"] {
            position: absolute !important;
            width: ${N}px !important;
            height: ${z}px !important;
            ${K}px !important;
            ${te}px !important;
          }
        `),()=>{H.contains(ne)&&H.removeChild(ne)}},[t]),f.jsx(gae,{isPresent:t,childRef:o,sizeRef:_,pop:h,children:h===!1?e:W.cloneElement(e,{ref:P})})}const vae=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:h,mode:d,anchorX:o,anchorY:_,root:w})=>{const A=LM(xae),P=W.useId();let N=!0,z=W.useMemo(()=>(N=!1,{id:P,initial:t,isPresent:n,custom:s,onExitComplete:q=>{A.set(q,!0);for(const $ of A.values())if(!$)return;r&&r()},register:q=>(A.set(q,!1),()=>A.delete(q))}),[n,A,r]);return h&&N&&(z={...z}),W.useMemo(()=>{A.forEach((q,$)=>A.set($,!1))},[n]),W.useEffect(()=>{!n&&!A.size&&r&&r()},[n]),e=f.jsx(yae,{pop:d==="popLayout",isPresent:n,anchorX:o,anchorY:_,root:w,children:e}),f.jsx(ow.Provider,{value:z,children:e})};function xae(){return new Map}function OV(e=!0){const t=W.useContext(ow);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,h=W.useId();W.useEffect(()=>{if(e)return s(h)},[e]);const d=W.useCallback(()=>e&&r&&r(h),[h,r,e]);return!n&&r?[!1,d]:[!0]}const L_=e=>e.key||"";function rR(e){const t=[];return W.Children.forEach(e,n=>{W.isValidElement(n)&&t.push(n)}),t}const iR=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:h="sync",propagate:d=!1,anchorX:o="left",anchorY:_="top",root:w})=>{const[A,P]=OV(d),N=W.useMemo(()=>rR(e),[e]),z=d&&!A?[]:N.map(L_),q=W.useRef(!0),$=W.useRef(N),O=LM(()=>new Map),X=W.useRef(new Set),[K,te]=W.useState(N),[ne,H]=W.useState(N);d$(()=>{q.current=!1,$.current=N;for(let ye=0;ye<ne.length;ye++){const Ae=L_(ne[ye]);z.includes(Ae)?(O.delete(Ae),X.current.delete(Ae)):O.get(Ae)!==!0&&O.set(Ae,!1)}},[ne,z.length,z.join("-")]);const ae=[];if(N!==K){let ye=[...N];for(let Ae=0;Ae<ne.length;Ae++){const _e=ne[Ae],fe=L_(_e);z.includes(fe)||(ye.splice(Ae,0,_e),ae.push(_e))}return h==="wait"&&ae.length&&(ye=ae),H(rR(ye)),te(N),null}const{forceRender:de}=W.useContext(RM);return f.jsx(f.Fragment,{children:ne.map(ye=>{const Ae=L_(ye),_e=d&&!A?!1:N===ne||z.includes(Ae),fe=()=>{if(X.current.has(Ae))return;if(X.current.add(Ae),O.has(Ae))O.set(Ae,!0);else return;let Ee=!0;O.forEach(Be=>{Be||(Ee=!1)}),Ee&&(de?.(),H($.current),d&&P?.(),r&&r())};return f.jsx(vae,{isPresent:_e,initial:!q.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:h,root:w,onExitComplete:_e?void 0:fe,anchorX:o,anchorY:_,children:ye},Ae)})})},RV=W.createContext({strict:!1}),aR={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]};let oR=!1;function _ae(){if(oR)return;const e={};for(const t in aR)e[t]={isEnabled:n=>aR[t].some(r=>!!n[r])};dV(e),oR=!0}function LV(){return _ae(),oie()}function bae(e){const t=LV();for(const n in e)t[n]={...t[n],...e[n]};dV(t)}const wae=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","propagate","ignoreStrict","viewport"]);function zb(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||wae.has(e)}let zV=e=>!zb(e);function Sae(e){typeof e=="function"&&(zV=t=>t.startsWith("on")?!zb(t):e(t))}try{Sae(require("@emotion/is-prop-valid").default)}catch{}function Tae(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(zV(s)||n===!0&&zb(s)||!t&&!zb(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}const cw=W.createContext({});function Pae(e,t){if(lw(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Px(n)?n:void 0,animate:Px(r)?r:void 0}}return e.inherit!==!1?t:{}}function Aae(e){const{initial:t,animate:n}=Pae(e,W.useContext(cw));return W.useMemo(()=>({initial:t,animate:n}),[sR(t),sR(n)])}function sR(e){return Array.isArray(e)?e.join(" "):e}const hk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function FV(e,t,n){for(const r in t)!Es(t[r])&&!vV(r,n)&&(e[r]=t[r])}function Cae({transformTemplate:e},t){return W.useMemo(()=>{const n=hk();return ck(n,t,e),Object.assign({},n.vars,n.style)},[t])}function Eae(e,t){const n=e.style||{},r={};return FV(r,n,e),Object.assign(r,Cae(e,t)),r}function jae(e,t){const n={},r=Eae(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const BV=()=>({...hk(),attrs:{}});function Mae(e,t,n,r){const s=W.useMemo(()=>{const h=BV();return xV(h,t,bV(r),e.transformTemplate,e.style),{...h.attrs,style:{...h.style}}},[t]);if(e.style){const h={};FV(h,e.style,e),s.style={...h,...s.style}}return s}const kae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function fk(e){return typeof e!="string"||e.includes("-")?!1:!!(kae.indexOf(e)>-1||/[A-Z]/u.test(e))}function Iae(e,t,n,{latestValues:r},s,h=!1,d){const _=(d??fk(e)?Mae:jae)(t,r,s,e),w=Tae(t,typeof e=="string",h),A=e!==W.Fragment?{...w,..._,ref:n}:{},{children:P}=t,N=W.useMemo(()=>Es(P)?P.get():P,[P]);return W.createElement(e,{...A,children:N})}function Nae({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,s){return{latestValues:Dae(n,r,s,e),renderState:t()}}function Dae(e,t,n,r){const s={},h=r(e,{});for(const N in h)s[N]=hb(h[N]);let{initial:d,animate:o}=e;const _=lw(e),w=cV(e);t&&w&&!_&&e.inherit!==!1&&(d===void 0&&(d=t.initial),o===void 0&&(o=t.animate));let A=n?n.initial===!1:!1;A=A||d===!1;const P=A?o:d;if(P&&typeof P!="boolean"&&!sw(P)){const N=Array.isArray(P)?P:[P];for(let z=0;z<N.length;z++){const q=tk(e,N[z]);if(q){const{transitionEnd:$,transition:O,...X}=q;for(const K in X){let te=X[K];if(Array.isArray(te)){const ne=A?te.length-1:0;te=te[ne]}te!==null&&(s[K]=te)}for(const K in $)s[K]=$[K]}}}return s}const $V=e=>(t,n)=>{const r=W.useContext(cw),s=W.useContext(ow),h=()=>Nae(e,t,r,s);return n?h():LM(h)},Oae=$V({scrapeMotionValuesFromProps:uk,createRenderState:hk}),Rae=$V({scrapeMotionValuesFromProps:wV,createRenderState:BV}),Lae=Symbol.for("motionComponentSymbol");function zae(e,t,n){const r=W.useRef(n);W.useInsertionEffect(()=>{r.current=n});const s=W.useRef(null);return W.useCallback(h=>{h&&e.onMount?.(h),t&&(h?t.mount(h):t.unmount());const d=r.current;if(typeof d=="function")if(h){const o=d(h);typeof o=="function"&&(s.current=o)}else s.current?(s.current(),s.current=null):d(h);else d&&(d.current=h)},[t])}const VV=W.createContext({});function Gg(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function Fae(e,t,n,r,s,h){const{visualElement:d}=W.useContext(cw),o=W.useContext(RV),_=W.useContext(ow),w=W.useContext(dk),A=w.reducedMotion,P=w.skipAnimations,N=W.useRef(null),z=W.useRef(!1);r=r||o.renderer,!N.current&&r&&(N.current=r(e,{visualState:t,parent:d,props:n,presenceContext:_,blockInitialAnimation:_?_.initial===!1:!1,reducedMotionConfig:A,skipAnimations:P,isSVG:h}),z.current&&N.current&&(N.current.manuallyAnimateOnMount=!0));const q=N.current,$=W.useContext(VV);q&&!q.projection&&s&&(q.type==="html"||q.type==="svg")&&Bae(N.current,n,s,$);const O=W.useRef(!1);W.useInsertionEffect(()=>{q&&O.current&&q.update(n,_)});const X=n[X$],K=W.useRef(!!X&&!window.MotionHandoffIsComplete?.(X)&&window.MotionHasOptimisedAnimation?.(X));return d$(()=>{z.current=!0,q&&(O.current=!0,window.MotionIsMounted=!0,q.updateFeatures(),q.scheduleRenderMicrotask(),K.current&&q.animationState&&q.animationState.animateChanges())}),W.useEffect(()=>{q&&(!K.current&&q.animationState&&q.animationState.animateChanges(),K.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(X)}),K.current=!1),q.enteringChildren=void 0)}),q}function Bae(e,t,n,r){const{layoutId:s,layout:h,drag:d,dragConstraints:o,layoutScroll:_,layoutRoot:w,layoutCrossfade:A}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:UV(e.parent)),e.projection.setOptions({layoutId:s,layout:h,alwaysMeasureLayout:!!d||o&&Gg(o),visualElement:e,animationType:typeof h=="string"?h:"both",initialPromotionConfig:r,crossfade:A,layoutScroll:_,layoutRoot:w})}function UV(e){if(e)return e.options.allowProjection!==!1?e.projection:UV(e.parent)}function wS(e,{forwardMotionProps:t=!1,type:n}={},r,s){r&&bae(r);const h=n?n==="svg":fk(e),d=h?Rae:Oae;function o(w,A){let P;const N={...W.useContext(dk),...w,layoutId:$ae(w)},{isStatic:z}=N,q=Aae(w),$=d(w,z);if(!z&&u$){Vae();const O=Uae(N);P=O.MeasureLayout,q.visualElement=Fae(e,$,N,s,O.ProjectionNode,h)}return f.jsxs(cw.Provider,{value:q,children:[P&&q.visualElement?f.jsx(P,{visualElement:q.visualElement,...N}):null,Iae(e,w,zae($,q.visualElement,A),$,z,t,h)]})}o.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const _=W.forwardRef(o);return _[Lae]=e,_}function $ae({layoutId:e}){const t=W.useContext(RM).id;return t&&e!==void 0?t+"-"+e:e}function Vae(e,t){W.useContext(RV).strict}function Uae(e){const t=LV(),{drag:n,layout:r}=t;if(!n&&!r)return{};const s={...n,...r};return{MeasureLayout:n?.isEnabled(e)||r?.isEnabled(e)?s.MeasureLayout:void 0,ProjectionNode:s.ProjectionNode}}function qae(e,t){if(typeof Proxy>"u")return wS;const n=new Map,r=(h,d)=>wS(h,d,e,t),s=(h,d)=>r(h,d);return new Proxy(s,{get:(h,d)=>d==="create"?r:(n.has(d)||n.set(d,wS(d,void 0,e,t)),n.get(d))})}const Gae=(e,t)=>t.isSVG??fk(e)?new Sie(t):new yie(t,{allowProjection:e!==W.Fragment});class Wae extends Op{constructor(t){super(t),t.animationState||(t.animationState=Eie(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();sw(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let Hae=0;class Zae extends Op{constructor(){super(...arguments),this.id=Hae++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const Kae={animation:{Feature:Wae},exit:{Feature:Zae}};function w0(e){return{point:{x:e.pageX,y:e.pageY}}}const Xae=e=>t=>ak(t)&&e(t,w0(t));function fx(e,t,n,r){return Ax(e,t,Xae(n),r)}const qV=({current:e})=>e?e.ownerDocument.defaultView:null,lR=(e,t)=>Math.abs(e-t);function Yae(e,t){const n=lR(e.x,t.x),r=lR(e.y,t.y);return Math.sqrt(n**2+r**2)}const cR=new Set(["auto","scroll"]);class GV{constructor(t,n,{transformPagePoint:r,contextWindow:s=window,dragSnapToOrigin:h=!1,distanceThreshold:d=3,element:o}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.scrollPositions=new Map,this.removeScrollListeners=null,this.onElementScroll=z=>{this.handleScroll(z.target)},this.onWindowScroll=()=>{this.handleScroll(window)},this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const z=TS(this.lastMoveEventInfo,this.history),q=this.startEvent!==null,$=Yae(z.offset,{x:0,y:0})>=this.distanceThreshold;if(!q&&!$)return;const{point:O}=z,{timestamp:X}=as;this.history.push({...O,timestamp:X});const{onStart:K,onMove:te}=this.handlers;q||(K&&K(this.lastMoveEvent,z),this.startEvent=this.lastMoveEvent),te&&te(this.lastMoveEvent,z)},this.handlePointerMove=(z,q)=>{this.lastMoveEvent=z,this.lastMoveEventInfo=SS(q,this.transformPagePoint),Ii.update(this.updatePoint,!0)},this.handlePointerUp=(z,q)=>{this.end();const{onEnd:$,onSessionEnd:O,resumeAnimation:X}=this.handlers;if((this.dragSnapToOrigin||!this.startEvent)&&X&&X(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const K=TS(z.type==="pointercancel"?this.lastMoveEventInfo:SS(q,this.transformPagePoint),this.history);this.startEvent&&$&&$(z,K),O&&O(z,K)},!ak(t))return;this.dragSnapToOrigin=h,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=d,this.contextWindow=s||window;const _=w0(t),w=SS(_,this.transformPagePoint),{point:A}=w,{timestamp:P}=as;this.history=[{...A,timestamp:P}];const{onSessionStart:N}=n;N&&N(t,TS(w,this.history)),this.removeListeners=x0(fx(this.contextWindow,"pointermove",this.handlePointerMove),fx(this.contextWindow,"pointerup",this.handlePointerUp),fx(this.contextWindow,"pointercancel",this.handlePointerUp)),o&&this.startScrollTracking(o)}startScrollTracking(t){let n=t.parentElement;for(;n;){const r=getComputedStyle(n);(cR.has(r.overflowX)||cR.has(r.overflowY))&&this.scrollPositions.set(n,{x:n.scrollLeft,y:n.scrollTop}),n=n.parentElement}this.scrollPositions.set(window,{x:window.scrollX,y:window.scrollY}),window.addEventListener("scroll",this.onElementScroll,{capture:!0,passive:!0}),window.addEventListener("scroll",this.onWindowScroll,{passive:!0}),this.removeScrollListeners=()=>{window.removeEventListener("scroll",this.onElementScroll,{capture:!0}),window.removeEventListener("scroll",this.onWindowScroll)}}handleScroll(t){const n=this.scrollPositions.get(t);if(!n)return;const r=t===window,s=r?{x:window.scrollX,y:window.scrollY}:{x:t.scrollLeft,y:t.scrollTop},h={x:s.x-n.x,y:s.y-n.y};h.x===0&&h.y===0||(r?this.lastMoveEventInfo&&(this.lastMoveEventInfo.point.x+=h.x,this.lastMoveEventInfo.point.y+=h.y):this.history.length>0&&(this.history[0].x-=h.x,this.history[0].y-=h.y),this.scrollPositions.set(t,s),Ii.update(this.updatePoint,!0))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),this.removeScrollListeners&&this.removeScrollListeners(),this.scrollPositions.clear(),kp(this.updatePoint)}}function SS(e,t){return t?{point:t(e.point)}:e}function uR(e,t){return{x:e.x-t.x,y:e.y-t.y}}function TS({point:e},t){return{point:e,delta:uR(e,WV(t)),offset:uR(e,Jae(t)),velocity:Qae(t,.1)}}function Jae(e){return e[0]}function WV(e){return e[e.length-1]}function Qae(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=WV(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>xd(t)));)n--;if(!r)return{x:0,y:0};r===e[0]&&e.length>2&&s.timestamp-r.timestamp>xd(t)*2&&(r=e[1]);const h=Tu(s.timestamp-r.timestamp);if(h===0)return{x:0,y:0};const d={x:(s.x-r.x)/h,y:(s.y-r.y)/h};return d.x===1/0&&(d.x=0),d.y===1/0&&(d.y=0),d}function eoe(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?aa(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?aa(n,e,r.max):Math.min(e,n)),e}function dR(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function toe(e,{top:t,left:n,bottom:r,right:s}){return{x:dR(e.x,n,s),y:dR(e.y,t,r)}}function hR(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function noe(e,t){return{x:hR(e.x,t.x),y:hR(e.y,t.y)}}function roe(e,t){let n=.5;const r=al(e),s=al(t);return s>r?n=wx(t.min,t.max-r,e.min):r>s&&(n=wx(e.min,e.max-s,t.min)),_h(0,1,n)}function ioe(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const TE=.35;function aoe(e=TE){return e===!1?e=0:e===!0&&(e=TE),{x:fR(e,"left","right"),y:fR(e,"top","bottom")}}function fR(e,t,n){return{min:pR(e,t),max:pR(e,n)}}function pR(e,t){return typeof e=="number"?e:e[t]||0}const ooe=new WeakMap;class soe{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=yo(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:s}=this.visualElement;if(s&&s.isPresent===!1)return;const h=P=>{n&&this.snapToCursor(w0(P).point),this.stopAnimation()},d=(P,N)=>{const{drag:z,dragPropagation:q,onDragStart:$}=this.getProps();if(z&&!q&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Rre(z),!this.openDragLock))return;this.latestPointerEvent=P,this.latestPanInfo=N,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ah(X=>{let K=this.getAxisMotionValue(X).get()||0;if(ph.test(K)){const{projection:te}=this.visualElement;if(te&&te.layout){const ne=te.layout.layoutBox[X];ne&&(K=al(ne)*(parseFloat(K)/100))}}this.originPoint[X]=K}),$&&Ii.update(()=>$(P,N),!1,!0),gE(this.visualElement,"transform");const{animationState:O}=this.visualElement;O&&O.setActive("whileDrag",!0)},o=(P,N)=>{this.latestPointerEvent=P,this.latestPanInfo=N;const{dragPropagation:z,dragDirectionLock:q,onDirectionLock:$,onDrag:O}=this.getProps();if(!z&&!this.openDragLock)return;const{offset:X}=N;if(q&&this.currentDirection===null){this.currentDirection=coe(X),this.currentDirection!==null&&$&&$(this.currentDirection);return}this.updateAxis("x",N.point,X),this.updateAxis("y",N.point,X),this.visualElement.render(),O&&Ii.update(()=>O(P,N),!1,!0)},_=(P,N)=>{this.latestPointerEvent=P,this.latestPanInfo=N,this.stop(P,N),this.latestPointerEvent=null,this.latestPanInfo=null},w=()=>{const{dragSnapToOrigin:P}=this.getProps();(P||this.constraints)&&this.startAnimation({x:0,y:0})},{dragSnapToOrigin:A}=this.getProps();this.panSession=new GV(t,{onSessionStart:h,onStart:d,onMove:o,onSessionEnd:_,resumeAnimation:w},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:A,distanceThreshold:r,contextWindow:qV(this.visualElement),element:this.visualElement.current})}stop(t,n){const r=t||this.latestPointerEvent,s=n||this.latestPanInfo,h=this.isDragging;if(this.cancel(),!h||!s||!r)return;const{velocity:d}=s;this.startAnimation(d);const{onDragEnd:o}=this.getProps();o&&Ii.postRender(()=>o(r,s))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.endPanSession();const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}endPanSession(){this.panSession&&this.panSession.end(),this.panSession=void 0}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!z_(t,s,this.currentDirection))return;const h=this.getAxisMotionValue(t);let d=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(d=eoe(d,this.constraints[t],this.elastic[t])),h.set(d)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,s=this.constraints;t&&Gg(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=toe(r.layoutBox,t):this.constraints=!1,this.elastic=aoe(n),s!==this.constraints&&!Gg(t)&&r&&this.constraints&&!this.hasMutatedConstraints&&ah(h=>{this.constraints!==!1&&this.getAxisMotionValue(h)&&(this.constraints[h]=ioe(r.layoutBox[h],this.constraints[h]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Gg(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const h=die(r,s.root,this.visualElement.getTransformPagePoint());let d=noe(s.layout.layoutBox,h);if(n){const o=n(lie(d));this.hasMutatedConstraints=!!o,o&&(d=fV(o))}return d}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:h,dragSnapToOrigin:d,onDragTransitionEnd:o}=this.getProps(),_=this.constraints||{},w=ah(A=>{if(!z_(A,n,this.currentDirection))return;let P=_&&_[A]||{};d&&(P={min:0,max:0});const N=s?200:1e6,z=s?40:1e7,q={type:"inertia",velocity:r?t[A]:0,bounceStiffness:N,bounceDamping:z,timeConstant:750,restDelta:1,restSpeed:10,...h,...P};return this.startAxisValueAnimation(A,q)});return Promise.all(w).then(o)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return gE(this.visualElement,t),r.start(ek(t,r,0,n,this.visualElement,!1))}stopAnimation(){ah(t=>this.getAxisMotionValue(t).stop())}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ah(n=>{const{drag:r}=this.getProps();if(!z_(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,h=this.getAxisMotionValue(n);if(s&&s.layout){const{min:d,max:o}=s.layout.layoutBox[n],_=h.get()||0;h.set(t[n]-aa(d,o,.5)+_)}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Gg(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};ah(d=>{const o=this.getAxisMotionValue(d);if(o&&this.constraints!==!1){const _=o.get();s[d]=roe({min:_,max:_},this.constraints[d])}});const{transformTemplate:h}=this.visualElement.getProps();this.visualElement.current.style.transform=h?h({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.constraints=!1,this.resolveConstraints(),ah(d=>{if(!z_(d,t,null))return;const o=this.getAxisMotionValue(d),{min:_,max:w}=this.constraints[d];o.set(aa(_,w,s[d]))}),this.visualElement.render()}addListeners(){if(!this.visualElement.current)return;ooe.set(this.visualElement,this);const t=this.visualElement.current,n=fx(t,"pointerdown",w=>{const{drag:A,dragListener:P=!0}=this.getProps(),N=w.target,z=N!==t&&Vre(N);A&&P&&!z&&this.start(w)});let r;const s=()=>{const{dragConstraints:w}=this.getProps();Gg(w)&&w.current&&(this.constraints=this.resolveRefConstraints(),r||(r=loe(t,w.current,()=>this.scalePositionWithinConstraints())))},{projection:h}=this.visualElement,d=h.addEventListener("measure",s);h&&!h.layout&&(h.root&&h.root.updateScroll(),h.updateLayout()),Ii.read(s);const o=Ax(window,"resize",()=>this.scalePositionWithinConstraints()),_=h.addEventListener("didUpdate",(({delta:w,hasLayoutChanged:A})=>{this.isDragging&&A&&(ah(P=>{const N=this.getAxisMotionValue(P);N&&(this.originPoint[P]+=w[P].translate,N.set(N.get()+w[P].translate))}),this.visualElement.render())}));return()=>{o(),n(),d(),_&&_(),r&&r()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:h=!1,dragElastic:d=TE,dragMomentum:o=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:h,dragElastic:d,dragMomentum:o}}}function mR(e){let t=!0;return()=>{if(t){t=!1;return}e()}}function loe(e,t,n){const r=bO(e,mR(n)),s=bO(t,mR(n));return()=>{r(),s()}}function z_(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function coe(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class uoe extends Op{constructor(t){super(t),this.removeGroupControls=Cu,this.removeListeners=Cu,this.controls=new soe(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Cu}update(){const{dragControls:t}=this.node.getProps(),{dragControls:n}=this.node.prevProps||{};t!==n&&(this.removeGroupControls(),t&&(this.removeGroupControls=t.subscribe(this.controls)))}unmount(){this.removeGroupControls(),this.removeListeners(),this.controls.isDragging||this.controls.endPanSession()}}const PS=e=>(t,n)=>{e&&Ii.update(()=>e(t,n),!1,!0)};class doe extends Op{constructor(){super(...arguments),this.removePointerDownListener=Cu}onPointerDown(t){this.session=new GV(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:qV(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:PS(t),onStart:PS(n),onMove:PS(r),onEnd:(h,d)=>{delete this.session,s&&Ii.postRender(()=>s(h,d))}}}mount(){this.removePointerDownListener=fx(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}let AS=!1;class hoe extends W.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:h}=t;h&&(n.group&&n.group.add(h),r&&r.register&&s&&r.register(h),AS&&h.root.didUpdate(),h.addEventListener("animationComplete",()=>{this.safeToRemove()}),h.setOptions({...h.options,layoutDependency:this.props.layoutDependency,onExitComplete:()=>this.safeToRemove()})),fb.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:h}=this.props,{projection:d}=r;return d&&(d.isPresent=h,t.layoutDependency!==n&&d.setOptions({...d.options,layoutDependency:n}),AS=!0,s||t.layoutDependency!==n||n===void 0||t.isPresent!==h?d.willUpdate():this.safeToRemove(),t.isPresent!==h&&(h?d.promote():d.relegate()||Ii.postRender(()=>{const o=d.getStack();(!o||!o.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),ik.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;AS=!0,s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function HV(e){const[t,n]=OV(),r=W.useContext(RM);return f.jsx(hoe,{...e,layoutGroup:r,switchLayoutGroup:W.useContext(VV),isPresent:t,safeToRemove:n})}const foe={pan:{Feature:doe},drag:{Feature:uoe,ProjectionNode:DV,MeasureLayout:HV}};function gR(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,h=r[s];h&&Ii.postRender(()=>h(t,w0(t)))}class poe extends Op{mount(){const{current:t}=this.node;t&&(this.unmount=zre(t,(n,r)=>(gR(this.node,r,"Start"),s=>gR(this.node,s,"End"))))}unmount(){}}class moe extends Op{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=x0(Ax(this.node.current,"focus",()=>this.onFocus()),Ax(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function yR(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),h=r[s];h&&Ii.postRender(()=>h(t,w0(t)))}class goe extends Op{mount(){const{current:t}=this.node;if(!t)return;const{globalTapTarget:n,propagate:r}=this.node.props;this.unmount=qre(t,(s,h)=>(yR(this.node,h,"Start"),(d,{success:o})=>yR(this.node,d,o?"End":"Cancel")),{useGlobalTarget:n,stopPropagation:r?.tap===!1})}unmount(){}}const PE=new WeakMap,CS=new WeakMap,yoe=e=>{const t=PE.get(e.target);t&&t(e)},voe=e=>{e.forEach(yoe)};function xoe({root:e,...t}){const n=e||document;CS.has(n)||CS.set(n,{});const r=CS.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(voe,{root:e,...t})),r[s]}function _oe(e,t,n){const r=xoe(t);return PE.set(e,n),r.observe(e),()=>{PE.delete(e),r.unobserve(e)}}const boe={some:0,all:1};class woe extends Op{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:h}=t,d={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:boe[s]},o=_=>{const{isIntersecting:w}=_;if(this.isInView===w||(this.isInView=w,h&&!w&&this.hasEnteredView))return;w&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",w);const{onViewportEnter:A,onViewportLeave:P}=this.node.getProps(),N=w?A:P;N&&N(_)};return _oe(this.node.current,d,o)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(Soe(t,n))&&this.startObserver()}unmount(){}}function Soe({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const Toe={inView:{Feature:woe},tap:{Feature:goe},focus:{Feature:moe},hover:{Feature:poe}},Poe={layout:{ProjectionNode:DV,MeasureLayout:HV}},Aoe={...Kae,...Toe,...foe,...Poe},Ps=qae(Aoe,Gae);function Coe({center:e=[-10.1735,123.525],zoom:t=14,drones:n=[],aisMarkers:r=[],adsbMarkers:s=[],encMarkers:h=[],geofences:d=[],anomalies:o=[],showAIS:_=!0,showADSB:w=!0,showENC:A=!1,className:P="",onDroneClick:N}){const z=W.useRef(null),q=W.useRef(null),$=W.useRef([]),O=W.useRef([]),X=W.useRef(null);return W.useEffect(()=>{if(!q.current||z.current)return;z.current=zn.map(q.current,{zoomControl:!1,attributionControl:!0}).setView(e,t),zn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:20,className:"map-tiles"}).addTo(z.current);const K=zn.GridLayer.extend({createTile:function(te){const ne=document.createElement("canvas"),H=ne.getContext("2d"),ae=this.getTileSize();return ne.width=ae.x,ne.height=ae.y,H&&(H.strokeStyle="#21A68D",H.lineWidth=.5,H.globalAlpha=.1,H.strokeRect(0,0,ae.x,ae.y)),ne}});return new K({zIndex:400}).addTo(z.current),zn.control.zoom({position:"bottomright"}).addTo(z.current),()=>{z.current&&(z.current.remove(),z.current=null)}},[]),W.useEffect(()=>{z.current&&z.current.setView(e,t,{animate:!0})},[e,t]),W.useEffect(()=>{z.current&&(A?X.current||(X.current=zn.tileLayer("https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",{opacity:.8,zIndex:500}).addTo(z.current)):X.current&&(z.current.removeLayer(X.current),X.current=null))},[A]),W.useEffect(()=>{z.current&&($.current.forEach(K=>K.remove()),$.current=[],O.current.forEach(K=>K.remove()),O.current=[],n.forEach(K=>{const te=zn.divIcon({className:"custom-drone-marker",html:`
            <div style="position: relative; width: 44px; height: 44px; display: flex; align-items: center; justify-content: center;">
              <div class="drone-pulse" style="position: absolute; width: 44px; height: 44px; border-radius: 50%; background: rgba(33, 166, 141, 0.2); animation: pulse-ring 2s infinite;"></div>
              <svg width="32" height="32" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative; z-index: 10;">
                <path d="M6 6l12 12M18 6L6 18" stroke="#1e293b" stroke-width="3" stroke-linecap="round"/>
                <circle cx="5" cy="5" r="3" fill="#1e293b" stroke="white" stroke-width="1"/>
                <circle cx="19" cy="5" r="3" fill="#1e293b" stroke="white" stroke-width="1"/>
                <circle cx="5" cy="19" r="3" fill="#1e293b" stroke="white" stroke-width="1"/>
                <circle cx="19" cy="19" r="3" fill="#1e293b" stroke="white" stroke-width="1"/>
                <rect x="9" y="9" width="6" height="6" rx="1" fill="#1e293b" stroke="white" stroke-width="1"/>
                <circle cx="12" cy="12" r="1.5" fill="#22c55e"/>
              </svg>
            </div>
        `,iconSize:[44,44],iconAnchor:[22,22]}),ne=zn.marker(K.position,{icon:te}).addTo(z.current).on("click",()=>N?.(K.id)).bindPopup(`<b>${K.name}</b><br/>Status: ${K.status}`);$.current.push(ne)}),_&&r.forEach(K=>{let te="#9ca3af";const ne=(K.type||"").toLowerCase();ne.includes("cargo")||ne.includes("container")?te="#22c55e":ne.includes("tanker")?te="#ef4444":ne.includes("passenger")||ne.includes("ferry")?te="#3b82f6":ne.includes("fishing")?te="#f97316":ne.includes("tug")||ne.includes("pilot")?te="#06b6d4":ne.includes("yacht")||ne.includes("sailing")?te="#d946ef":ne.includes("military")&&(te="#111827");const H=K.heading||K.course||0,ae=zn.divIcon({className:"custom-ais-marker",html:`
            <div style="transform: rotate(${H}deg); width: 20px; height: 20px; display: flex; align-items: center; justify-content: center;">
              <svg width="20" height="20" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M12 2L4 22L12 18L20 22L12 2Z" fill="${te}" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
              </svg>
            </div>
          `,iconSize:[20,20],iconAnchor:[10,10]}),de=zn.marker(K.position,{icon:ae}).addTo(z.current).bindPopup(`
          <div style="font-family: sans-serif; padding: 4px;">
            <div style="font-weight: bold; color: ${te};">${K.name}</div>
            <div style="font-size: 11px; margin-top: 2px;">
              ${K.type} | ${K.speed} kn
            </div>
          </div>
        `);$.current.push(de)}),w&&s.forEach(K=>{const te=K.heading||0,ne=zn.divIcon({className:"custom-adsb-marker",html:`
            <div style="transform: rotate(${te}deg); width: 28px; height: 28px; display: flex; align-items: center; justify-content: center;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z" fill="#facc15" stroke="#1e293b" stroke-width="1" stroke-linejoin="round"/>
              </svg>
            </div>
          `,iconSize:[28,28],iconAnchor:[14,14]}),H=zn.marker(K.position,{icon:ne}).addTo(z.current).bindPopup(`
          <div style="font-family: sans-serif; padding: 4px;">
            <div style="font-weight: bold; color: #b45309;">${K.callsign||K.name}</div>
            <div style="font-size: 11px; margin-top: 2px;">
              Alt: ${K.altitude.toLocaleString()}ft | ${K.speed}kn
            </div>
          </div>
        `);$.current.push(H)}),A&&h.forEach(K=>{const ne={red:"#ef4444",green:"#22c55e",yellow:"#fde047",white:"#ffffff",blue:"#3b82f6",magenta:"#d946ef"}[K.color]||K.color;let H="";K.type==="depth"?H=`<text x="12" y="16" text-anchor="middle" fill="#64748b" font-size="12" font-weight="600" style="font-family: monospace;">${K.name}</text>`:K.type==="rock"?H='<path d="M12 4v16M4 12h16M6.5 6.5l11 11M17.5 6.5l-11 11" stroke="#1e293b" stroke-width="1.5"/><circle cx="12" cy="12" r="2" fill="#1e293b"/>':K.type==="buoy"?H=`<path d="M12 4L17 18H7L12 4Z" fill="${ne}" fill-opacity="0.4" stroke="${ne}" stroke-width="2"/><circle cx="12" cy="18" r="2" fill="${ne}"/>`:K.type==="beacon"?H='<rect x="10" y="6" width="4" height="14" fill="#1e293b" fill-opacity="0.3" stroke="#1e293b" stroke-width="1.5"/><path d="M8 20h8" stroke="#1e293b" stroke-width="2"/><rect x="9" y="4" width="6" height="2" fill="#1e293b"/>':H=`<circle cx="12" cy="12" r="5" fill="${ne}" stroke="white" stroke-width="1.5"/>`;const ae=zn.divIcon({className:"custom-enc-marker",html:`
            <div style="position: relative; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                ${H}
              </svg>
            </div>
          `,iconSize:[24,24],iconAnchor:[12,12]}),de=zn.marker(K.position,{icon:ae}).addTo(z.current).bindPopup(`
          <div style="font-family: sans-serif; padding: 4px;">
            <div style="font-weight: bold; color: #334155;">${K.name}</div>
            <div style="font-size: 11px; color: #64748b;">${K.type.toUpperCase()}</div>
          </div>
        `);$.current.push(de)}),d.forEach(K=>{const te=zn.rectangle(K.bounds,{color:K.color,weight:2,fillOpacity:.1,dashArray:K.dashed?"8, 8":void 0}).addTo(z.current);O.current.push(te)}),o.forEach(K=>{const te=zn.divIcon({className:"custom-anomaly-marker",html:'<div style="width:24px; height:24px; background:#ef4444; border:2px solid white; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:14px; box-shadow: 0 0 10px rgba(239, 68, 68, 0.5);">!</div>',iconSize:[24,24],iconAnchor:[12,12]}),ne=zn.marker(K.position,{icon:te}).addTo(z.current).bindPopup("<b>Alert: AI Anomaly Detected</b>");$.current.push(ne)}))},[n,r,s,h,d,o,_,w,A]),f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:q,className:P,style:{height:"100%",width:"100%",background:"#1a1f2e"}}),f.jsx("style",{children:`
        @keyframes pulse-ring {
          0% { transform: scale(0.6); opacity: 0.8; }
          100% { transform: scale(1.2); opacity: 0; }
        }
        .map-tiles { filter: brightness(0.6) contrast(1.2) saturate(0.8); }
      `})]})}function Eoe({children:e}){return f.jsx("span",{style:{position:"absolute",border:0,width:"1px",height:"1px",padding:0,margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"},children:e})}function ZV({mapView:e,onMapViewChange:t,aisCount:n,nonAisCount:r,activeUavCount:s,anomaliesCount:h,showAIS:d,showADSB:o,showENC:_,showWeather:w,onToggleAIS:A,onToggleADSB:P,onToggleENC:N,onToggleWeather:z,showViewToggle:q=!0,showLegend:$=!0,showLayers:O=!0}){const[X,K]=W.useState(!1);return f.jsxs(f.Fragment,{children:[q&&f.jsxs("div",{className:"absolute top-4 left-4 z-[1000] flex flex-col gap-2",children:[f.jsxs("button",{onClick:()=>t("kupang"),className:`flex items-center gap-2 px-3 py-2 rounded-lg backdrop-blur-md transition-all border ${e==="kupang"?"bg-[#21A68D] text-white border-[#21A68D] shadow-lg shadow-[#21A68D]/20":"bg-white/90 text-gray-700 border-gray-200 hover:bg-white hover:border-gray-300"}`,children:[f.jsx(aM,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm font-medium",children:"PSDKP Kupang"})]}),f.jsxs("button",{onClick:()=>t("indonesia"),className:`flex items-center gap-2 px-3 py-2 rounded-lg backdrop-blur-md transition-all border ${e==="indonesia"?"bg-[#21A68D] text-white border-[#21A68D] shadow-lg shadow-[#21A68D]/20":"bg-white/90 text-gray-700 border-gray-200 hover:bg-white hover:border-gray-300"}`,title:"View Indonesia",children:[f.jsx(kB,{className:"w-4 h-4"}),f.jsx("span",{className:"text-sm font-medium",children:"Indonesia"})]})]}),O&&f.jsx("div",{className:"absolute top-4 right-4 z-[1000]",children:f.jsx("button",{className:"p-2.5 rounded-lg bg-white/90 backdrop-blur-md text-gray-700 border border-gray-200 hover:bg-white transition-all shadow-md",onClick:()=>K(!X),children:f.jsx(zC,{className:"w-5 h-5"})})}),O&&X&&f.jsxs("div",{className:"absolute top-16 right-4 z-[1000] bg-white/95 backdrop-blur-md rounded-lg p-4 shadow-xl border border-gray-200 min-w-[200px]",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3 border-b border-gray-100 pb-2",children:[f.jsx("h3",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider",children:"Map Layers"}),f.jsx("button",{className:"p-1 rounded-full hover:bg-gray-100 transition-colors",onClick:()=>K(!1),children:f.jsx(G1,{className:"w-3.5 h-3.5 text-gray-400"})})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx("button",{className:"w-full flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-all text-left",onClick:A,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all ${d?"bg-blue-500 shadow-sm shadow-blue-500/50":"bg-gray-200"}`,children:d?f.jsx(wu,{className:"w-3 h-3 text-white"}):f.jsx(T_,{className:"w-3 h-3 text-gray-400"})}),f.jsx("span",{className:`text-sm font-medium transition-colors ${d?"text-gray-900":"text-gray-400"}`,children:"AIS Vessels"})]})}),f.jsx("button",{className:"w-full flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-all text-left",onClick:P,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all ${o?"bg-purple-500 shadow-sm shadow-purple-500/50":"bg-gray-200"}`,children:o?f.jsx(wu,{className:"w-3 h-3 text-white"}):f.jsx(T_,{className:"w-3 h-3 text-gray-400"})}),f.jsx("span",{className:`text-sm font-medium transition-colors ${o?"text-gray-900":"text-gray-400"}`,children:"Aircraft"})]})}),f.jsx("button",{className:"w-full flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-all text-left",onClick:N,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all ${_?"bg-[#21A68D] shadow-sm shadow-[#21A68D]/50":"bg-gray-200"}`,children:_?f.jsx(wu,{className:"w-3 h-3 text-white"}):f.jsx(T_,{className:"w-3 h-3 text-gray-400"})}),f.jsx("span",{className:`text-sm font-medium transition-colors ${_?"text-gray-900":"text-gray-400"}`,children:"Nautical Charts"})]})}),f.jsx("button",{className:"w-full flex items-center justify-between p-2 rounded-lg hover:bg-gray-50 transition-all text-left",onClick:z,children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center transition-all ${w?"bg-orange-500 shadow-sm shadow-orange-500/50":"bg-gray-200"}`,children:w?f.jsx(cx,{className:"w-3 h-3 text-white"}):f.jsx(T_,{className:"w-3 h-3 text-gray-400"})}),f.jsx("span",{className:`text-sm font-medium transition-colors ${w?"text-gray-900":"text-gray-400"}`,children:"Weather Layer"})]})})]})]}),$&&f.jsxs("div",{className:"absolute bottom-8 left-4 z-[1000] bg-white/95 backdrop-blur-md rounded-lg p-4 shadow-xl border border-gray-200",style:{minWidth:"180px"},children:[f.jsx("h3",{className:"text-[10px] font-bold text-gray-400 uppercase tracking-wider mb-3 border-b border-gray-100 pb-2",children:"Map Legend"}),f.jsxs("div",{className:"mb-3",children:[f.jsx("p",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-2",children:"Vessels"}),f.jsx("div",{className:"space-y-1.5",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500"}),f.jsx("span",{className:"text-xs text-gray-600",children:"AIS"})]}),f.jsx("span",{className:"text-xs font-semibold text-gray-900",children:n})]})})]}),f.jsxs("div",{className:"mb-3",children:[f.jsx("p",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-2",children:"Fleet"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(yd,{className:"w-3 h-3 text-[#21A68D]"}),f.jsx("span",{className:"text-xs text-gray-600",children:"Active Assets"})]}),f.jsx("span",{className:"text-xs font-semibold text-gray-900",children:s})]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-2",children:"Events"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full bg-red-500 animate-pulse"}),f.jsx("span",{className:"text-xs text-gray-600",children:"Anomalies"})]}),f.jsx("span",{className:"text-xs font-semibold text-red-600",children:h})]})]}),f.jsxs("div",{className:"mt-3 pt-2 border-t border-gray-100",children:[f.jsx("p",{className:"text-[9px] font-semibold text-gray-500 uppercase mb-2",children:"Weather"}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(cx,{className:"w-3 h-3 text-blue-400"}),f.jsx("span",{className:"text-xs text-gray-600",children:"Local Conditions"})]}),f.jsx("span",{className:"text-xs font-semibold text-gray-900",children:"Active"})]})]})]})]})}const vR=[{id:"OP-2024-001",droneName:"Pyrhos X V1",droneType:"UAV",pilot:"Sarah Chen",status:"active",mission:"Port Surveillance",videoId:"yz8nAELG0JY",location:{lat:-10.1735,lng:123.525},telemetry:{altitude:127,speed:12.3,battery:78,distance:2.4,signal:95,satellites:14,droneHeight:150,temperature:32,windSpeed:8.5,heading:145,voltage:24.3,current:12.5,latitude:-10.195,longitude:123.545,flightTime:"00:23:45",isLanding:!1},aiDetections:[{id:"DET-001",type:"Vessel Detection & Recognition",vesselName:"MV OCEANIC SPIRIT",vesselType:"Container Ship",count:1,confidence:96,timestamp:"14:23:45",captureImage:GC,aisData:{mmsi:"477123456",imo:"IMO9234567",callSign:"VRXY2",speed:8.5,course:145,length:294,width:32,draft:12.5,destination:"Jakarta Port",eta:"2025-01-20 16:00"}},{id:"DET-002",type:"Vessel Hull Number Recognition",vesselName:"HAPAG-LLOYD EXPRESS",hullNumber:"HAPAG-LLOYD",count:1,confidence:92,timestamp:"14:24:12",captureImage:R6,aisData:{mmsi:"477567890",imo:"IMO9456789",callSign:"VRHL4",speed:12.8,course:90,length:334,width:48,draft:14.5,destination:"Rotterdam",eta:"2025-02-05 18:00"}},{id:"DET-003",type:"Vessel Attribute Detection",attributes:["Sailboat","Yacht","White Hull","Black Hull","Mast","Navigation Equipment"],count:6,confidence:89,timestamp:"14:24:38",captureImage:WC}]}],joe=e=>{switch(e){case"active":return"#22c55e";case"warning":return"#D4E268";case"critical":return"#ef4444";default:return"#71717a"}},Vv=e=>e>50?"#22c55e":e>20?"#D4E268":"#ef4444",F_=e=>e>80?"#22c55e":e>50?"#D4E268":"#ef4444";function KV({onEndFlightComplete:e}){const[t,n]=W.useState(vR[0]),[r,s]=W.useState(vR),[h,d]=W.useState(!0),[o,_]=W.useState(!0),[w,A]=W.useState(!1),[P,N]=W.useState(!1),[z,q]=W.useState("kupang"),[$,O]=W.useState(!0),[X,K]=W.useState(0),[te,ne]=W.useState(!1),[H,ae]=W.useState(!1),[de,ye]=W.useState(null),[Ae,_e]=W.useState(!1);W.useEffect(()=>{const De=setInterval(()=>{s(Je=>Je.map(Ve=>({...Ve,telemetry:{...Ve.telemetry,altitude:Math.max(50,Ve.telemetry.altitude+(Math.random()-.5)*5),speed:Math.max(5,Ve.telemetry.speed+(Math.random()-.5)*2),battery:Math.max(0,Ve.telemetry.battery-Math.random()*.1),signal:Math.min(100,Math.max(60,Ve.telemetry.signal+(Math.random()-.5)*3)),distance:Math.max(0,Ve.telemetry.distance+(Math.random()-.5)*.1)}})))},2e3);return()=>clearInterval(De)},[]),W.useEffect(()=>{const De=r.find(Je=>Je.id===t.id);De&&n(De)},[r]),W.useEffect(()=>{const De=setTimeout(()=>{K(Je=>Je+1),window.dispatchEvent(new Event("resize"))},350);return()=>clearTimeout(De)},[$]),W.useEffect(()=>{r.forEach(De=>{De.telemetry.altitude<2&&De.status==="active"&&!Ae&&(_e(!0),ye(De),ae(!0))})},[r,Ae]);const fe=()=>{ye(t),_e(!1),ae(!0)},Ee=()=>{if(de){if(console.log(" End Flight Confirmed - Starting process..."),console.log("Drone to end:",de.name),s(De=>De.filter(Je=>Je.id!==de.id)),t.id===de.id&&r.length>1){const De=r.find(Je=>Je.id!==de.id);De&&n(De)}ae(!1),ye(null),_e(!1),console.log(" Dialog closed, about to call navigation callback..."),console.log("Callback exists?",!!e),e?(console.log(" Calling onEndFlightComplete in 300ms..."),setTimeout(()=>{console.log(" Navigating to Mission History NOW!"),e()},300)):console.log(" WARNING: onEndFlightComplete callback not provided!")}},Be=()=>{ae(!1),ye(null),_e(!1)};return f.jsxs("div",{className:"h-screen flex flex-col bg-background",children:[f.jsx("div",{className:"p-2 md:p-3 border-b border-border flex-shrink-0",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-sm md:text-base text-[rgb(255,255,255)] mb-0",children:"Live Operations"}),f.jsx("p",{className:"text-muted-foreground text-[10px] md:text-xs",children:"Real-time drone monitoring"})]}),f.jsxs(Nn,{className:"bg-[#22c55e] text-white px-2 py-0.5 text-[10px]",children:[f.jsx("div",{className:"w-1.5 h-1.5 bg-white rounded-full mr-1.5 animate-pulse"}),r.filter(De=>De.status==="active").length," Active"]})]})}),f.jsx(ff,{open:te,onOpenChange:ne,children:f.jsxs(pf,{className:"max-w-[95vw] max-h-[95vh] w-full h-full p-0 bg-black border-[#21A68D]",children:[f.jsxs(Eoe,{children:[f.jsx(mf,{children:"Live Video Stream Fullscreen"}),f.jsxs(gf,{children:["Fullscreen view of live drone video feed from ",t.droneName," with real-time telemetry overlay"]})]}),f.jsxs("div",{className:"relative w-full h-full flex flex-col",children:[f.jsxs("div",{className:"absolute top-0 left-0 right-0 z-10 flex items-center justify-between p-4 bg-gradient-to-b from-black/80 to-transparent",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs("div",{className:"flex items-center gap-1 bg-black/60 px-3 py-1.5 rounded",children:[f.jsx("div",{className:"w-2 h-2 bg-[#ef4444] rounded-full animate-pulse"}),f.jsx("span",{className:"text-white text-sm font-semibold",children:"LIVE"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-white font-semibold",children:t.droneName}),f.jsx("p",{className:"text-white/60 text-sm",children:t.mission})]})]}),f.jsx(en,{size:"sm",variant:"ghost",className:"bg-black/40 hover:bg-black/60 text-white",onClick:()=>ne(!1),children:f.jsx(G1,{className:"w-5 h-5"})})]}),f.jsx("div",{className:"flex-1 flex items-center justify-center bg-black overflow-hidden relative",children:f.jsx("iframe",{src:`https://www.youtube.com/embed/${t.videoId}?autoplay=1&mute=0&loop=1&playlist=${t.videoId}&controls=1&showinfo=0&rel=0`,className:"absolute inset-0 w-full h-full scale-[1.3] md:scale-[1.1]",allow:"autoplay; encrypted-media",allowFullScreen:!0,style:{border:"none"}})}),f.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/90 via-black/70 to-transparent p-4 pb-10",children:f.jsxs("div",{className:"grid grid-cols-4 md:grid-cols-8 gap-4 max-w-7xl mx-auto",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"ALTITUDE"}),f.jsxs("span",{className:"text-white font-bold",children:[Math.round(t.telemetry.altitude),"m"]})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"SPEED"}),f.jsxs("span",{className:"text-white font-bold",children:[t.telemetry.speed.toFixed(1)," m/s"]})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"BATTERY"}),f.jsxs("span",{className:"font-bold",style:{color:Vv(t.telemetry.battery)},children:[Math.round(t.telemetry.battery),"%"]})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"SIGNAL"}),f.jsxs("span",{className:"font-bold",style:{color:F_(t.telemetry.signal)},children:[Math.round(t.telemetry.signal),"%"]})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"HEADING"}),f.jsxs("span",{className:"text-white font-bold",children:[Math.round(t.telemetry.heading),""]})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"SATELLITES"}),f.jsx("span",{className:"text-white font-bold",children:t.telemetry.satellites})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"FLIGHT TIME"}),f.jsx("span",{className:"text-white font-bold font-mono",children:t.telemetry.flightTime})]}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-white/60 text-[10px]",children:"DISTANCE"}),f.jsxs("span",{className:"text-white font-bold",children:[t.telemetry.distance.toFixed(1)," km"]})]})]})})]})]})}),f.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[f.jsxs("div",{className:"flex-1 relative",children:[f.jsx(Coe,{center:[-10.1735,123.525],zoom:14,drones:r.map(De=>({id:De.id,position:[De.location.lat,De.location.lng],name:De.droneName,status:De.status,color:joe(De.status)})),aisMarkers:h?sh:[],adsbMarkers:o?hy:[],encMarkers:w?kY:[],geofences:IY,showAIS:h,showADSB:o,showENC:w,onDroneClick:De=>{const Je=r.find(Ve=>Ve.id===De);Je&&n(Je)},className:"w-full h-full"}),f.jsx(ZV,{mapView:z,onMapViewChange:q,aisCount:h?sh.length:0,nonAisCount:0,activeUavCount:r.filter(De=>De.status==="active").length,anomaliesCount:0,showAIS:h,showADSB:o,showENC:w,showWeather:P,onToggleAIS:()=>d(!h),onToggleADSB:()=>_(!o),onToggleENC:()=>A(!w),onToggleWeather:()=>N(!P),showViewToggle:!1,showLegend:!1})]}),f.jsxs(Ps.div,{className:"border-l border-border flex flex-col overflow-hidden bg-[#0a0e1a] relative",initial:!1,animate:{width:$?384:48},transition:{duration:.3,ease:"easeInOut"},children:[f.jsx(en,{size:"sm",variant:"ghost",onClick:()=>O(!$),className:"absolute top-2 left-2 z-10 bg-[#21A68D]/20 hover:bg-[#21A68D]/40 text-white",children:$?f.jsx(Wg,{className:"w-4 h-4"}):f.jsx(AB,{className:"w-4 h-4"})}),f.jsx(iR,{children:$&&f.jsxs(Ps.div,{className:"flex-1 flex flex-col overflow-hidden",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[f.jsxs("div",{className:"p-3 border-b border-border flex-shrink-0",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("h3",{className:"text-xs font-semibold",style:{color:"#21A68D"},children:"Live Stream"}),f.jsx(en,{size:"sm",variant:"ghost",className:"h-5 w-5 p-0",onClick:()=>ne(!0),children:f.jsx(lZ,{className:"w-3.5 h-3.5",style:{color:"#21A68D"}})})]}),f.jsxs("div",{className:"relative aspect-video bg-black rounded-lg overflow-hidden border-2 border-[#21A68D]",children:[f.jsx("iframe",{src:`https://www.youtube.com/embed/${t.videoId}?autoplay=1&mute=1&loop=1&playlist=${t.videoId}&controls=0&showinfo=0&rel=0`,className:"w-full h-full",allow:"autoplay; encrypted-media",allowFullScreen:!0,style:{border:"none"}}),f.jsxs("div",{className:"absolute top-2 left-2 flex items-center gap-1 bg-black/60 px-2 py-1 rounded",children:[f.jsx("div",{className:"w-2 h-2 bg-red-500 rounded-full animate-pulse"}),f.jsx("span",{className:"text-white text-xs",children:"LIVE"})]})]})]}),f.jsxs("div",{className:"flex-1 flex flex-col min-h-0",children:[f.jsx("div",{className:"p-3 pb-1.5 flex-shrink-0",children:f.jsx("h3",{className:"text-xs font-semibold",style:{color:"#0F4C75"},children:"AI Detection Results"})}),f.jsx("div",{className:"flex-1 overflow-y-auto px-3 pb-3",children:t.aiDetections.length>0?f.jsx("div",{className:"space-y-3",children:t.aiDetections.map((De,Je)=>f.jsx(Ps.div,{initial:{opacity:0,y:20},animate:{opacity:1,y:0},transition:{delay:Je*.1},children:f.jsxs(nn,{className:"overflow-hidden bg-background/50 border-[#21A68D]",children:[f.jsxs("div",{className:"p-2 bg-[#21A68D]/10 border-b border-[#21A68D]/30",children:[f.jsxs("div",{className:"flex items-center justify-between mb-1",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(Au,{className:"w-3.5 h-3.5",style:{color:"#21A68D"}}),f.jsx("span",{className:"text-[10px] font-semibold",children:De.type})]}),f.jsxs(Nn,{variant:"outline",className:"text-xs",style:{borderColor:"#22c55e",color:"#22c55e"},children:[De.confidence,"%"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-xs text-muted-foreground",children:[f.jsx(sf,{className:"w-3 h-3"}),f.jsx("span",{children:De.timestamp})]})]}),f.jsxs("div",{className:"relative aspect-video bg-black",children:[f.jsx("img",{src:De.captureImage,alt:"Detection capture",className:"w-full h-full object-cover"}),f.jsx("div",{className:"absolute top-2 right-2 bg-black/70 px-2 py-1 rounded text-xs",children:f.jsx("span",{className:"text-[#21A68D]",children:"AI DETECTED"})})]}),f.jsxs("div",{className:"p-2 space-y-1.5",children:[De.type==="Vessel Detection & Recognition"&&De.aisData&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsx("span",{className:"text-muted-foreground",children:"Vessel Name"}),f.jsx("span",{className:"font-semibold",style:{color:"#21A68D"},children:De.vesselName})]}),f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsx("span",{className:"text-muted-foreground",children:"Type"}),f.jsx("span",{children:De.vesselType})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(yd,{className:"w-3 h-3",style:{color:"#0F4C75"}}),f.jsx("span",{className:"text-xs font-semibold",style:{color:"#0F4C75"},children:"AIS Data Correlation"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-1.5 text-[10px]",children:[f.jsxs("div",{className:"p-1 px-1.5 rounded bg-muted/30",children:[f.jsx("p",{className:"text-white/40 text-[9px]",children:"MMSI"}),f.jsx("p",{className:"font-mono text-white/80",children:De.aisData.mmsi})]}),f.jsxs("div",{className:"p-1 px-1.5 rounded bg-muted/30",children:[f.jsx("p",{className:"text-white/40 text-[9px]",children:"IMO"}),f.jsx("p",{className:"font-mono text-white/80",children:De.aisData.imo})]}),f.jsxs("div",{className:"p-1 px-1.5 rounded bg-muted/30",children:[f.jsx("p",{className:"text-white/40 text-[9px]",children:"Speed"}),f.jsxs("p",{className:"text-white/80",children:[De.aisData.speed," kn"]})]}),f.jsxs("div",{className:"p-1 px-1.5 rounded bg-muted/30",children:[f.jsx("p",{className:"text-white/40 text-[9px]",children:"Course"}),f.jsxs("p",{className:"text-white/80",children:[De.aisData.course,""]})]}),f.jsxs("div",{className:"p-1 px-1.5 rounded bg-muted/30",children:[f.jsx("p",{className:"text-white/40 text-[9px]",children:"Length"}),f.jsxs("p",{className:"text-white/80",children:[De.aisData.length,"m"]})]}),f.jsxs("div",{className:"p-1 px-1.5 rounded bg-muted/30",children:[f.jsx("p",{className:"text-white/40 text-[9px]",children:"Draft"}),f.jsxs("p",{className:"text-white/80",children:[De.aisData.draft,"m"]})]})]}),f.jsxs("div",{className:"mt-2 p-2 rounded bg-[#0F4C75]/10 border border-[#0F4C75]/30",children:[f.jsxs("div",{className:"flex items-center justify-between text-xs",children:[f.jsx("span",{className:"text-muted-foreground",children:"Destination"}),f.jsx("span",{className:"font-semibold",children:De.aisData.destination})]}),f.jsxs("div",{className:"flex items-center justify-between text-xs mt-1",children:[f.jsx("span",{className:"text-muted-foreground",children:"ETA"}),f.jsx("span",{children:De.aisData.eta})]})]})]})]}),De.type==="Vessel Hull Number Recognition"&&De.aisData&&f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"p-3 rounded bg-[#21A68D]/10 border border-[#21A68D]",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Recognized Hull Number"}),f.jsx("p",{className:"text-lg font-bold font-mono",style:{color:"#21A68D"},children:De.hullNumber})]}),f.jsxs("div",{className:"mt-3 pt-3 border-t border-border",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(yd,{className:"w-3 h-3",style:{color:"#0F4C75"}}),f.jsx("span",{className:"text-xs font-semibold",style:{color:"#0F4C75"},children:"AIS Verification"}),f.jsx(Nn,{variant:"outline",className:"ml-auto text-[10px]",style:{borderColor:"#22c55e",color:"#22c55e"},children:"MATCHED"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[f.jsxs("div",{className:"p-2 rounded bg-muted/30",children:[f.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Call Sign"}),f.jsx("p",{className:"font-mono",children:De.aisData.callSign})]}),f.jsxs("div",{className:"p-2 rounded bg-muted/30",children:[f.jsx("p",{className:"text-muted-foreground text-[10px]",children:"Speed"}),f.jsxs("p",{children:[De.aisData.speed," kn"]})]})]})]})]}),De.type==="Vessel Attribute Detection"&&De.attributes&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("p",{className:"text-xs text-muted-foreground",children:"Detected Attributes:"}),f.jsx("div",{className:"flex flex-wrap gap-1",children:De.attributes.map((Ve,et)=>f.jsx(Nn,{variant:"outline",className:"text-[10px]",style:{borderColor:"#21A68D",color:"#21A68D"},children:Ve},et))})]}),f.jsx("div",{className:"w-full bg-muted rounded-full h-1.5 mt-2",children:f.jsx("div",{className:"h-1.5 rounded-full bg-[#22c55e]",style:{width:`${De.confidence}%`}})})]})]})},De.id))}):f.jsx(nn,{className:"p-4 bg-background/50 border-dashed",children:f.jsx("p",{className:"text-sm text-muted-foreground text-center",children:"No AI detections available"})})})]})]})}),f.jsx(iR,{children:!$&&f.jsxs(Ps.div,{className:"flex-1 flex flex-col items-center justify-center gap-6 py-8",initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.2},children:[f.jsxs("div",{className:"flex flex-col items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded bg-[#21A68D]/20 flex items-center justify-center",children:f.jsx(_u,{className:"w-4 h-4",style:{color:"#21A68D"}})}),f.jsx("span",{className:"text-[10px] text-white/60 writing-mode-vertical",children:"LIVE"})]}),f.jsxs("div",{className:"flex flex-col items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded bg-[#0F4C75]/20 flex items-center justify-center",children:f.jsx(wu,{className:"w-4 h-4",style:{color:"#0F4C75"}})}),f.jsx("span",{className:"text-[10px] text-white/60 writing-mode-vertical",children:"AI"})]})]})})]})]}),f.jsx(ff,{open:H,onOpenChange:ae,children:f.jsxs(pf,{className:"max-w-md",children:[f.jsxs(Ep,{children:[f.jsx(mf,{className:"flex items-center gap-2",children:Ae?f.jsxs(f.Fragment,{children:[f.jsx(of,{className:"w-5 h-5",style:{color:"#D4E268"}}),f.jsx("span",{children:"Landing Detected"})]}):f.jsxs(f.Fragment,{children:[f.jsx(vb,{className:"w-5 h-5",style:{color:"#ef4444"}}),f.jsx("span",{children:"End Flight"})]})}),f.jsx(gf,{children:Ae?`${de?.droneName} has landed (altitude: ${de?.telemetry.altitude.toFixed(1)}m). Would you like to end this flight?`:`Are you sure you want to end the flight for ${de?.droneName}? This will stop recording and save telemetry data.`})]}),de&&f.jsxs("div",{className:"space-y-4",children:[f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h4",{className:"text-sm mb-3",style:{color:"#21A68D"},children:"Flight Summary"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Drone"}),f.jsx("p",{children:de.droneName})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Pilot"}),f.jsx("p",{children:de.pilot})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Mission"}),f.jsx("p",{className:"text-xs",children:de.mission})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Flight Time"}),f.jsx("p",{style:{color:"#21A68D"},children:de.telemetry.flightTime})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Battery"}),f.jsxs("p",{style:{color:Vv(de.telemetry.battery)},children:[Math.round(de.telemetry.battery),"%"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Altitude"}),f.jsxs("p",{children:[Math.round(de.telemetry.altitude),"m"]})]})]})]}),Ae&&f.jsx(nn,{className:"p-3 bg-[#D4E268]/10 border border-[#D4E268]/30",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(of,{className:"w-4 h-4 flex-shrink-0",style:{color:"#D4E268"}}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Auto-detected landing. Altitude is below 2 meters threshold."})]})}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(en,{variant:"outline",className:"flex-1",onClick:Be,children:"Cancel"}),f.jsxs(en,{className:"flex-1",style:{backgroundColor:"#ef4444"},onClick:Ee,children:[f.jsx(nb,{className:"w-4 h-4 mr-2"}),"Confirm End Flight"]})]})]})]})}),f.jsx("div",{className:"h-[84px] border-t-2 border-[#21A68D] bg-gradient-to-b from-[#0a0e1a] to-[#050810] flex-shrink-0",children:f.jsxs("div",{className:"h-full px-3 py-1",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[10px] text-white/60",children:"ACTIVE DRONE"}),f.jsx("span",{className:"text-sm font-bold text-white",style:{color:"#21A68D"},children:t.droneName})]}),f.jsx("div",{className:"h-6 w-px bg-border"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[10px] text-white/60",children:"MISSION"}),f.jsx("span",{className:"text-[11px] text-white",children:t.mission})]}),f.jsx("div",{className:"h-6 w-px bg-border"}),f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-[10px] text-white/60",children:"PILOT"}),f.jsx("span",{className:"text-xs text-white",children:t.pilot})]})]}),t.telemetry.flightTime&&f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs("div",{className:"flex items-center gap-1.5 px-2 py-0.5 rounded-lg bg-[#21A68D]/10 border border-[#21A68D]",children:[f.jsx(sf,{className:"w-3 h-3",style:{color:"#21A68D"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"TIME"}),f.jsx("span",{className:"text-white text-xs font-mono font-bold",children:t.telemetry.flightTime})]})}),!t.telemetry.isLanding&&f.jsxs(en,{size:"sm",className:"h-7 px-3 text-xs",style:{backgroundColor:"#ef4444"},onClick:fe,children:[f.jsx(vb,{className:"w-2.5 h-2.5 mr-1"}),"End Flight"]})]}),f.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[f.jsxs(Ps.div,{className:"col-span-2 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.1},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(cH,{className:"w-3 h-3",style:{color:Vv(t.telemetry.battery)}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"BATTERY"})]}),f.jsxs("span",{className:"text-base font-bold",style:{color:Vv(t.telemetry.battery)},children:[Math.round(t.telemetry.battery),"%"]}),f.jsx("div",{className:"w-full bg-muted/30 rounded-full h-1 mt-0.5",children:f.jsx(Ps.div,{className:"h-1 rounded-full",initial:{width:0},animate:{width:`${t.telemetry.battery}%`},transition:{duration:.5},style:{backgroundColor:Vv(t.telemetry.battery)}})})]}),f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.15},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(q1,{className:"w-3 h-3",style:{color:"#21A68D"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"ALT"})]}),f.jsx("span",{className:"text-base font-bold text-white",children:Math.round(t.telemetry.altitude)}),f.jsx("span",{className:"text-[10px] text-white/60",children:"m"})]}),f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.2},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(QH,{className:"w-3 h-3",style:{color:"#0F4C75"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"SPD"})]}),f.jsx("span",{className:"text-base font-bold text-white",children:t.telemetry.speed.toFixed(1)}),f.jsx("span",{className:"text-[10px] text-white/60",children:"m/s"})]}),f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.25},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(xb,{className:"w-3 h-3",style:{color:"#8b5cf6"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"DIST"})]}),f.jsx("span",{className:"text-sm font-bold text-white",children:t.telemetry.distance.toFixed(1)}),f.jsx("span",{className:"text-[10px] text-white/60",children:"km"})]}),f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.3},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(yd,{className:"w-3 h-3",style:{color:F_(t.telemetry.signal)}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"SIG"})]}),f.jsxs("span",{className:"text-sm font-bold",style:{color:F_(t.telemetry.signal)},children:[Math.round(t.telemetry.signal),"%"]}),f.jsx("div",{className:"w-full bg-muted/30 rounded-full h-1 mt-0.5",children:f.jsx(Ps.div,{className:"h-1 rounded-full",initial:{width:0},animate:{width:`${t.telemetry.signal}%`},transition:{duration:.5},style:{backgroundColor:F_(t.telemetry.signal)}})})]}),f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.35},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(DB,{className:"w-3 h-3",style:{color:"#22c55e"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"GPS"})]}),f.jsx("span",{className:"text-sm font-bold text-white",children:t.telemetry.satellites}),f.jsx("span",{className:"text-[10px] text-white/60",children:"sats"})]}),t.telemetry.windSpeed&&f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.4},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(lM,{className:"w-3 h-3",style:{color:"#3b82f6"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"WND"})]}),f.jsx("span",{className:"text-sm font-bold text-white",children:t.telemetry.windSpeed}),f.jsx("span",{className:"text-[10px] text-white/60",children:"m/s"})]}),t.telemetry.heading&&f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.45},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(EB,{className:"w-3 h-3",style:{color:"#D4E268"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"HDG"})]}),f.jsx("span",{className:"text-sm font-bold text-white",children:Math.round(t.telemetry.heading)}),f.jsx("span",{className:"text-[10px] text-white/60",children:"deg"})]}),t.telemetry.voltage&&f.jsxs(Ps.div,{className:"col-span-1 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.5},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(YZ,{className:"w-3 h-3",style:{color:"#f59e0b"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"VOLT"})]}),f.jsx("span",{className:"text-sm font-bold text-white",children:t.telemetry.voltage}),f.jsx("span",{className:"text-[10px] text-white/60",children:"V"})]}),t.telemetry.latitude&&t.telemetry.longitude&&f.jsxs(Ps.div,{className:"col-span-2 flex flex-col",initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:.55},children:[f.jsxs("div",{className:"flex items-center gap-1 mb-0.5",children:[f.jsx(yb,{className:"w-3 h-3",style:{color:"#21A68D"}}),f.jsx("span",{className:"text-[10px] text-white/60",children:"COORDS"})]}),f.jsxs("span",{className:"text-xs font-mono text-white",children:[t.telemetry.latitude.toFixed(4),", ",t.telemetry.longitude.toFixed(4)]})]})]})]})})]})}const B_=[{id:"1",name:"John Anderson",role:"Pilot",status:"available"},{id:"2",name:"Sarah Williams",role:"Camera Operator",status:"available"},{id:"3",name:"Mike Chen",role:"Navigator",status:"assigned"},{id:"4",name:"Emily Davis",role:"Pilot",status:"available"},{id:"5",name:"David Brown",role:"Technical Specialist",status:"busy"}],ym=[{id:"1",name:"Pyrhos X V1",type:"UAV",battery:100,status:"available"},{id:"2",name:"AR-2 Aerial",type:"UAV",battery:85,status:"available"},{id:"3",name:"AquaScan Alpha",type:"AUV",battery:92,status:"available"},{id:"4",name:"DeepSeeker Pro",type:"AUV",battery:78,status:"available"}],xR=[{id:"propellers",label:"Propeller Condition",critical:!0},{id:"camera",label:"Camera Lens Cleanliness",critical:!0},{id:"battery",label:"Battery Connections",critical:!0},{id:"gimbal",label:"Gimbal Movement",critical:!0},{id:"sensors",label:"Sensor Calibration",critical:!1},{id:"body",label:"Body Integrity Check",critical:!1},{id:"gps",label:"GPS Module Status",critical:!0},{id:"motors",label:"Motor Temperatures",critical:!1}],Moe=[{id:"propellers",label:"Propeller Condition",critical:!0},{id:"camera",label:"Camera Lens Cleanliness",critical:!0},{id:"battery",label:"Battery Connections",critical:!0},{id:"gimbal",label:"Gimbal Movement",critical:!0},{id:"sensors",label:"Sensor Calibration",critical:!1},{id:"body",label:"Body Integrity Check",critical:!1},{id:"gps",label:"GPS Module Status",critical:!0},{id:"motors",label:"Motor Temperatures",critical:!1}],koe=[{id:"hull",label:"Hull Integrity Check",critical:!0},{id:"sonar",label:"Sonar System Test",critical:!0},{id:"battery",label:"Battery Connections",critical:!0},{id:"thrusters",label:"Thruster Functionality",critical:!0},{id:"depth",label:"Depth Sensor Calibration",critical:!1},{id:"seals",label:"Waterproof Seals Inspection",critical:!0},{id:"navigation",label:"Navigation System Check",critical:!0},{id:"communication",label:"Communication System Test",critical:!1}];function Ioe({onMissionLaunch:e}){const[t,n]=W.useState("mission-list"),[r,s]=W.useState(1),[h,d]=W.useState(""),[o,_]=W.useState(0),[w,A]=W.useState(!1),[P,N]=W.useState([{id:1,name:"Frame Extraction & Alignment",status:"pending"},{id:2,name:"Vessel Detection & Tracking",status:"pending"},{id:3,name:"Telemetry Interpolation",status:"pending"},{id:4,name:"Anomaly Scoring",status:"pending"},{id:5,name:"Report Generation",status:"pending"}]),z=()=>{if(!H)return;A(!0),_(0),N(ue=>ue.map(ve=>({...ve,status:"pending"})));const ee=setInterval(()=>{_(ue=>{const ve=ue+1;return ve===1&&N(Oe=>Oe.map($e=>$e.id===1?{...$e,status:"processing"}:$e)),ve===20&&N(Oe=>Oe.map($e=>$e.id===1?{...$e,status:"completed"}:$e.id===2?{...$e,status:"processing"}:$e)),ve===50&&N(Oe=>Oe.map($e=>$e.id===2?{...$e,status:"completed"}:$e.id===3?{...$e,status:"processing"}:$e)),ve===70&&N(Oe=>Oe.map($e=>$e.id===3?{...$e,status:"completed"}:$e.id===4?{...$e,status:"processing"}:$e)),ve===90&&N(Oe=>Oe.map($e=>$e.id===4?{...$e,status:"completed"}:$e.id===5?{...$e,status:"processing"}:$e)),ve>=100?(clearInterval(ee),N(Oe=>Oe.map($e=>({...$e,status:"completed"}))),A(!1),pp.success("Analysis Complete",{description:"Mission report and detections are now available in History."}),100):ve})},100)},q=[{id:"live-mission-1",name:"Port Surveillance - Morning Patrol",area:"Tanjung Priok Port Zone",category:"Port Surveillance",duration:"1",description:"Active surveillance mission monitoring port activities and vessel movements",status:"live",createdAt:"2026-01-23T08:00:00",assignedTeam:["1","2"],assignedDevice:"1"},{id:"1",name:"Downtown Infrastructure Scan",area:"Sector 5, Grid A-12",category:"Infrastructure Assessment",duration:"2",description:"Comprehensive infrastructure assessment of downtown area",status:"pending",createdAt:"2026-01-20T08:30:00",assignedTeam:["1","2"],assignedDevice:"1"},{id:"2",name:"Coastal Surveillance",area:"Beach Zone B",category:"Environmental Monitoring",duration:"3",description:"Monitor coastal activities and environmental conditions",status:"pending",createdAt:"2026-01-20T09:15:00",assignedTeam:["4"],assignedDevice:"3"}],[$,O]=W.useState(()=>Su("mariview_new_flight_missions",q));W.useEffect(()=>{lh("mariview_new_flight_missions",$)},[$]);const[X,K]=W.useState(null),[te,ne]=W.useState({name:"",area:"",category:"",duration:"",description:""}),[H,ae]=W.useState(null),[de,ye]=W.useState([]),[Ae,_e]=W.useState(""),[fe,Ee]=W.useState({}),[Be,De]=W.useState(!1),[Je,Ve]=W.useState([]),[et,Ce]=W.useState(!0),[We,Qe]=W.useState(!0),[Re,nt]=W.useState(!1),[pt,Ct]=W.useState(!1),[Mt,Nt]=W.useState(!1),[Tt,Ot]=W.useState("");xR.filter(ee=>ee.critical).every(ee=>fe[ee.id]);const rt=()=>H&&ym.find(ue=>ue.id===H.assignedDevice)?.type||null,Ut=(()=>{const ee=rt();return ee==="UAV"?Moe:ee==="AUV"?koe:xR})(),dt=Ut.filter(ee=>ee.critical).every(ee=>fe[ee.id]),Rn=W.useRef(null),[cn,Hn]=W.useState(null),[Gn,Mn]=W.useState([]),[Nr,Fr]=W.useState([]);W.useEffect(()=>{if(t==="create-mission"&&r===1&&Rn.current){const ee=Rn.current,ue=ee.getContext("2d");if(!ue)return;ue.clearRect(0,0,ee.width,ee.height),ue.strokeStyle="#333",ue.lineWidth=1;for(let ve=0;ve<ee.width;ve+=50)ue.beginPath(),ue.moveTo(ve,0),ue.lineTo(ve,ee.height),ue.stroke();for(let ve=0;ve<ee.height;ve+=50)ue.beginPath(),ue.moveTo(0,ve),ue.lineTo(ee.width,ve),ue.stroke();Nr.forEach(ve=>{ve.length>0&&(ue.fillStyle="rgba(33, 166, 141, 0.2)",ue.strokeStyle="#21A68D",ue.lineWidth=2,ue.beginPath(),ue.moveTo(ve[0].x,ve[0].y),ve.forEach(Oe=>ue.lineTo(Oe.x,Oe.y)),ue.closePath(),ue.fill(),ue.stroke())}),cn==="polygon"&&Gn.length>0&&(ue.strokeStyle="#21A68D",ue.lineWidth=2,ue.setLineDash([5,5]),ue.beginPath(),ue.moveTo(Gn[0].x,Gn[0].y),Gn.forEach(ve=>ue.lineTo(ve.x,ve.y)),ue.stroke(),ue.setLineDash([]),Gn.forEach(ve=>{ue.fillStyle="#21A68D",ue.beginPath(),ue.arc(ve.x,ve.y,5,0,Math.PI*2),ue.fill()}))}},[t,r,Gn,Nr,cn]);const xi=()=>{const ee={id:Date.now().toString(),name:te.name,area:te.area,category:te.category,duration:te.duration,description:te.description,status:"pending",createdAt:new Date().toISOString(),assignedTeam:de,assignedDevice:Ae,coordinates:Je.length>0?Je:void 0};O([...$,ee]),ri(),n("mission-list")},Br=()=>{X&&(O($.map(ee=>ee.id===X.id?{...ee,...te,assignedTeam:de,assignedDevice:Ae,coordinates:Je.length>0?Je:ee.coordinates}:ee)),ri(),K(null),n("mission-list"))},hr=ee=>{O($.filter(ue=>ue.id!==ee))},ri=()=>{ne({name:"",area:"",category:"",duration:"",description:""}),ye([]),_e(""),s(1),Fr([]),Mn([]),Hn(null),Nt(!1),Ot("")},wa=ee=>{K(ee),ne({name:ee.name,area:ee.area,category:ee.category,duration:ee.duration,description:ee.description}),ye(ee.assignedTeam),_e(ee.assignedDevice),s(1),n("create-mission")},_i=ee=>{ae(ee),ye(ee.assignedTeam),n("accept-mission")},Sa=ee=>{ae(ee),ye(ee.assignedTeam),n("live-mission-summary")},Ta=()=>{n("pre-check")},Pa=()=>{H&&(O($.map(ee=>ee.id===H.id?{...ee,status:"live",assignedTeam:de}:ee)),ae({...H,status:"live"}),n("live-mission-summary")),e&&e()},Ya=te.name&&te.area,gi=de.length>0,it=Ae!=="";return f.jsxs("div",{className:`p-4 md:p-6 w-full ${["live-mission-detail","post-analysis"].includes(t)?"!p-0":""}`,children:[!["live-mission-detail","post-analysis"].includes(t)&&f.jsxs("div",{className:"mb-6",children:[f.jsxs("h1",{className:"text-2xl md:text-3xl text-[rgb(255,255,255)]",children:[["mission-list","event-detection"].includes(t)&&"Mission Management",t==="create-mission"&&(X?"Edit Mission":"Create New Mission"),t==="accept-mission"&&"Mission Details",t==="pre-check"&&"Pre-Flight Check",t==="ai-model-selection"&&"AI Model Selection",t==="pre-check-summary"&&"Pre-Flight Check Summary",t==="live-mission-summary"&&"Live Mission Summary"]}),f.jsxs("p",{className:"text-muted-foreground text-sm md:text-base",children:[["mission-list","event-detection"].includes(t)&&"Manage and deploy drone missions",t==="create-mission"&&r===1&&"Configure mission parameters",t==="create-mission"&&r===2&&"Select team members for mission",t==="create-mission"&&r===3&&"Choose drone for deployment",t==="accept-mission"&&"Review and accept mission assignment",t==="pre-check"&&"Complete pre-flight inspection checklist",t==="ai-model-selection"&&"Select AI detection models for this mission",t==="pre-check-summary"&&"Review inspection results before launch",t==="live-mission-summary"&&"Review mission status and progress"]})]}),!["live-mission-detail","post-analysis"].includes(t)&&f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsxs(en,{onClick:()=>{ri(),K(null),n("create-mission")},className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white",children:[f.jsx(yZ,{className:"w-4 h-4 mr-2"}),"Create Mission"]}),f.jsxs(en,{variant:t==="mission-list"?"default":"outline",className:`transition-all duration-300 hover:scale-105 active:scale-95 shadow-sm hover:shadow-md ${t==="mission-list"?"bg-[#0F4C75] hover:bg-[#0d3d5e] text-white border-[#0F4C75]":"border-[#0F4C75] text-[#0F4C75] hover:bg-[#0F4C75]/10"}`,onClick:()=>n("mission-list"),children:[f.jsx(IB,{className:"w-4 h-4 mr-2"}),"Mission List"]}),f.jsxs(en,{variant:t==="event-detection"?"default":"outline",className:`transition-all duration-300 hover:scale-105 active:scale-95 shadow-sm hover:shadow-md ${t==="event-detection"?"bg-[#0F4C75] hover:bg-[#0d3d5e] text-white border-[#0F4C75]":"border-[#0F4C75] text-[#0F4C75] hover:bg-[#0F4C75]/10"}`,onClick:()=>n("event-detection"),children:[f.jsx(_u,{className:"w-4 h-4 mr-2"}),"Event Detection"]}),f.jsxs(en,{variant:t==="post-analysis"?"default":"outline",className:`transition-all duration-300 hover:scale-105 active:scale-95 shadow-sm hover:shadow-md ${t==="post-analysis"?"bg-[#0F4C75] hover:bg-[#0d3d5e] text-white border-[#0F4C75]":"border-[#0F4C75] text-[#0F4C75] hover:bg-[#0F4C75]/10"}`,onClick:()=>n("post-analysis"),children:[f.jsx(lx,{className:"w-4 h-4 mr-2"}),"Post Analysis"]})]}),t==="mission-list"&&f.jsx("div",{className:"space-y-6",children:f.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 xl:grid-cols-3 gap-4",children:$.map(ee=>f.jsxs(nn,{className:"p-5 bg-card border-border hover:border-[#21A68D] transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx("h3",{className:"text-lg",children:ee.name}),ee.status==="live"&&f.jsxs("div",{className:"flex items-center gap-1 bg-[#22c55e]/20 border border-[#22c55e] px-2 py-0.5 rounded",children:[f.jsx("div",{className:"w-2 h-2 bg-[#22c55e] rounded-full animate-pulse"}),f.jsx("span",{className:"text-xs font-bold text-[#22c55e]",children:"LIVE"})]})]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:ee.area})]}),ee.status!=="live"&&f.jsx(Nn,{variant:"outline",className:ee.status==="pending"?"border-[#D4E268] text-[#D4E268]":ee.status==="accepted"?"border-[#0F4C75] text-[#0F4C75]":"border-[#21A68D] text-[#21A68D]",children:ee.status})]}),ee.coordinates&&ee.coordinates.length>0&&f.jsx("div",{className:"mb-4 rounded-lg overflow-hidden border border-border",children:f.jsx(eO,{coordinates:ee.coordinates})}),f.jsxs("div",{className:"space-y-2 text-sm mb-4",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Category:"}),f.jsx("span",{children:ee.category})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),f.jsxs("span",{children:[ee.duration," days"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Team:"}),f.jsxs("span",{children:[ee.assignedTeam.length," members"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Drone:"}),f.jsx("span",{children:ym.find(ue=>ue.id===ee.assignedDevice)?.name||"Not assigned"})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Created:"}),f.jsx("span",{children:new Date(ee.createdAt).toLocaleDateString()})]})]}),f.jsxs("div",{className:"flex gap-2",children:[ee.status!=="live"&&f.jsx(en,{size:"sm",onClick:()=>_i(ee),className:"flex-1 bg-[#21A68D] hover:bg-[#1a8a72] text-white",children:"Accept Mission"}),ee.status==="live"&&f.jsx(en,{size:"sm",onClick:()=>Sa(ee),className:"flex-1 bg-[#22c55e]/20 text-[#22c55e] hover:bg-[#22c55e]/30",children:"Mission In Progress"}),f.jsx(en,{size:"sm",variant:"outline",onClick:()=>wa(ee),disabled:ee.status==="live",children:f.jsx(Cm,{className:"w-4 h-4"})}),f.jsx(en,{size:"sm",variant:"outline",onClick:()=>hr(ee.id),disabled:ee.status==="live",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white disabled:opacity-50 disabled:cursor-not-allowed",children:f.jsx(_p,{className:"w-4 h-4"})})]})]},ee.id))})}),t==="create-mission"&&f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"flex items-center justify-between w-full max-w-4xl",children:[{num:1,label:"Mission Info"},{num:2,label:"Assign Team"},{num:3,label:"Assign Device"}].map((ee,ue)=>f.jsxs("div",{className:"flex items-center flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center border-2 transition-all ${r>ee.num?"bg-[#21A68D] border-[#21A68D] text-white":r===ee.num?"border-[#21A68D] text-[#21A68D]":"border-muted text-muted-foreground"}`,children:r>ee.num?f.jsx(Ul,{className:"w-5 h-5"}):ee.num}),f.jsx("div",{className:"hidden sm:block",children:f.jsx("p",{className:`text-sm ${r>=ee.num?"text-foreground":"text-muted-foreground"}`,children:ee.label})})]}),ue<2&&f.jsx("div",{className:`flex-1 h-0.5 mx-4 ${r>ee.num?"bg-[#21A68D]":"bg-muted"}`})]},ee.num))}),r===1&&f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"Mission Parameters"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Define the basic mission configuration"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{htmlFor:"mission-name",children:"Mission Name *"}),f.jsx(xa,{id:"mission-name",placeholder:"e.g., Downtown Infrastructure Scan",value:te.name,onChange:ee=>ne({...te,name:ee.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{htmlFor:"duration",children:"Mission Duration (days)"}),f.jsx(xa,{id:"duration",type:"number",placeholder:"e.g., 3",value:te.duration,onChange:ee=>ne({...te,duration:ee.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{htmlFor:"category",children:"Mission Category"}),f.jsxs(Gm,{value:Mt?"New Category":te.category,onValueChange:ee=>{ee==="New Category"?(Nt(!0),ne({...te,category:""})):(Nt(!1),Ot(""),ne({...te,category:ee}))},children:[f.jsx(Hm,{id:"category",className:"bg-input",children:f.jsx(Wm,{placeholder:"Select category"})}),f.jsxs(Zm,{className:"z-[10000]",children:[f.jsx(Ir,{value:"Infrastructure Assessment",children:"Infrastructure Assessment"}),f.jsx(Ir,{value:"Environmental Monitoring",children:"Environmental Monitoring"}),f.jsx(Ir,{value:"Search and Rescue",children:"Search and Rescue"}),f.jsx(Ir,{value:"Agriculture Survey",children:"Agriculture Survey"}),f.jsx(Ir,{value:"Security Patrol",children:"Security Patrol"}),f.jsx(Ir,{value:"Mapping and Survey",children:"Mapping and Survey"}),f.jsx(Ir,{value:"Emergency Response",children:"Emergency Response"}),f.jsx(Ir,{value:"New Category",children:"+ New Category"})]})]})]}),Mt?f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{htmlFor:"custom-category",children:"Enter New Category Name *"}),f.jsx(xa,{id:"custom-category",placeholder:"e.g., Disaster Relief",value:Tt,onChange:ee=>{Ot(ee.target.value),ne({...te,category:ee.target.value})},className:"bg-input"})]}):f.jsx("div",{className:"space-y-2"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs(mr,{children:[f.jsx(yb,{className:"w-4 h-4 inline mr-2"}),"Draw Mission Area on Map"]}),f.jsxs("div",{className:"flex gap-2 mb-2",children:[f.jsxs(en,{type:"button",size:"sm",variant:cn==="polygon"?"default":"outline",onClick:()=>{cn==="polygon"?(window.leafletDrawMap?.finishPolygon(),Hn(null)):(window.leafletDrawMap?.startPolygon(),Hn("polygon"))},className:cn==="polygon"?"bg-[#21A68D] hover:bg-[#1a8a72]":"",children:[f.jsx(NB,{className:"w-4 h-4 mr-2"}),cn==="polygon"?"Finish Polygon":"Draw Polygon"]}),f.jsxs(en,{type:"button",size:"sm",variant:"outline",onClick:()=>window.leafletDrawMap?.drawRectangle(),disabled:cn==="polygon",children:[f.jsx(vb,{className:"w-4 h-4 mr-2"}),"Draw Rectangle"]}),f.jsxs(en,{type:"button",size:"sm",variant:"outline",onClick:()=>{window.leafletDrawMap?.clear(),ne(ee=>({...ee,area:""}))},className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",children:[f.jsx(VH,{className:"w-4 h-4 mr-2"}),"Clear"]})]}),f.jsxs("div",{className:"relative",children:[f.jsx(c$,{center:[-10.20073,123.53838],zoom:13,className:"rounded-lg border-2 border-border overflow-hidden",onAreaDrawn:(ee,ue)=>{ne(ve=>({...ve,area:ue})),Ve(ee)},aisMarkers:sh||[],adsbMarkers:hy||[],showAIS:et,showADSB:We,showENC:Re,height:"600px"}),f.jsx(ZV,{mapView:"kupang",onMapViewChange:()=>{},aisCount:(sh||[]).length,nonAisCount:0,activeUavCount:0,anomaliesCount:0,showAIS:et,showADSB:We,showENC:Re,showWeather:pt,onToggleAIS:()=>Ce(!et),onToggleADSB:()=>Qe(!We),onToggleENC:()=>nt(!Re),onToggleWeather:()=>Ct(!pt),showViewToggle:!1,showLegend:!1,showLayers:!1})]}),f.jsx("p",{className:"text-xs text-muted-foreground",children:cn==="polygon"?'Click on the map to add points. Click "Finish Polygon" when done (minimum 3 points).':"Use the drawing tools above to define your mission area on the map."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{htmlFor:"description",children:"Mission Description"}),f.jsx(sJ,{id:"description",placeholder:"Describe the mission objectives and any special requirements...",value:te.description,onChange:ee=>ne({...te,description:ee.target.value}),className:"bg-input min-h-24"})]}),!Ya&&f.jsx("div",{className:"p-3 rounded-lg border",style:{borderColor:"#D4E268",backgroundColor:"rgba(212, 226, 104, 0.1)"},children:f.jsx("p",{className:"text-sm",style:{color:"#D4E268"},children:" Please fill in Mission Name and draw an area on the canvas to continue"})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>{ri(),n("mission-list")},children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Cancel"]}),f.jsxs(en,{onClick:()=>s(2),disabled:!Ya,className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white",children:["Next: Assign Team",f.jsx(Wg,{className:"w-4 h-4 ml-2"})]})]})]})}),r===2&&f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"Assign Team Members"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Select team members for this mission"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:B_.map(ee=>{const ue=de.includes(ee.id);return f.jsxs(nn,{className:`p-4 cursor-pointer transition-all ${ue?"border-[#21A68D] border-2":"border-border"} ${ee.status==="busy"?"opacity-50":""}`,onClick:()=>{ee.status!=="busy"&&ye(ue?de.filter(ve=>ve!==ee.id):[...de,ee.id])},children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-[#21A68D] flex items-center justify-center text-white",children:ee.name.split(" ").map(ve=>ve[0]).join("")}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:ee.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:ee.role})]}),ue&&f.jsx(Ul,{className:"w-5 h-5 text-[#21A68D]"})]}),f.jsx(Nn,{variant:"outline",className:`mt-3 ${ee.status==="available"?"border-green-500 text-green-500":ee.status==="assigned"?"border-[#0F4C75] text-[#0F4C75]":"border-red-500 text-red-500"}`,children:ee.status})]},ee.id)})}),!gi&&f.jsx("div",{className:"p-3 rounded-lg border",style:{borderColor:"#D4E268",backgroundColor:"rgba(212, 226, 104, 0.1)"},children:f.jsx("p",{className:"text-sm",style:{color:"#D4E268"},children:" Please select at least one team member to continue"})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>s(1),children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back"]}),f.jsxs(en,{disabled:!gi,className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white",onClick:()=>s(3),children:["Next: Assign Device",f.jsx(Wg,{className:"w-4 h-4 ml-2"})]})]})]})}),r===3&&f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"Assign Drone"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Select a drone for this mission"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-4",children:ym.map(ee=>{const ue=Ae===ee.id,ve=ee.status==="maintenance"||ee.battery<20;return f.jsxs(nn,{className:`p-4 cursor-pointer transition-all ${ue?"border-[#21A68D] border-2":"border-border"} ${ve?"opacity-50 cursor-not-allowed":""}`,onClick:()=>{ve||_e(ee.id)},children:[f.jsxs("div",{className:"flex justify-between items-start mb-3",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium mb-1",children:ee.name}),f.jsx(Nn,{variant:"outline",className:"text-xs",children:ee.type})]}),ue&&f.jsx(Ul,{className:"w-5 h-5 text-[#21A68D]"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Battery:"}),f.jsxs("span",{className:ee.battery<30?"text-red-500":"text-green-500",children:[ee.battery,"%"]})]}),f.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:f.jsx("div",{className:`h-2 rounded-full ${ee.battery<30?"bg-red-500":ee.battery<60?"bg-yellow-500":"bg-green-500"}`,style:{width:`${ee.battery}%`}})}),f.jsx(Nn,{variant:"outline",className:`${ee.status==="available"?"border-green-500 text-green-500":ee.status==="assigned"?"border-[#0F4C75] text-[#0F4C75]":"border-red-500 text-red-500"}`,children:ee.status})]})]},ee.id)})}),!it&&f.jsx("div",{className:"p-3 rounded-lg border",style:{borderColor:"#D4E268",backgroundColor:"rgba(212, 226, 104, 0.1)"},children:f.jsx("p",{className:"text-sm",style:{color:"#D4E268"},children:" Please select a drone to continue"})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>s(2),children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back"]}),f.jsxs(en,{disabled:!it,className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white",onClick:X?Br:xi,children:[f.jsx(Ul,{className:"w-4 h-4 mr-2"}),X?"Update Mission":"Create Mission"]})]})]})})]}),t==="accept-mission"&&H&&f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"p-4 rounded-lg bg-[#21A68D]/10 border border-[#21A68D]",children:[f.jsx("h2",{className:"text-xl mb-2",children:H.name}),f.jsx("p",{className:"text-muted-foreground",children:H.description})]}),H.coordinates&&H.coordinates.length>0&&f.jsxs("div",{className:"space-y-2",children:[f.jsx("h3",{className:"text-sm",style:{color:"#21A68D"},children:"Mission Area"}),f.jsx("div",{className:"rounded-lg overflow-hidden border border-border",children:f.jsx(eO,{coordinates:H.coordinates})})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-sm",style:{color:"#21A68D"},children:"Mission Parameters"}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Area:"}),f.jsx("span",{children:H.area})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Category:"}),f.jsx("span",{children:H.category})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Duration:"}),f.jsxs("span",{children:[H.duration," days"]})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Drone:"}),f.jsx("span",{children:ym.find(ee=>ee.id===H.assignedDevice)?.name})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Created:"}),f.jsx("span",{children:new Date(H.createdAt).toLocaleString()})]})]})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsx("h3",{className:"text-sm",style:{color:"#0F4C75"},children:"Assignment Status"}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"p-3 rounded-lg bg-muted/30 flex items-center justify-between",children:[f.jsx("span",{className:"text-sm",children:"Team Members"}),f.jsxs(ff,{open:Be,onOpenChange:De,children:[f.jsx(gM,{asChild:!0,children:f.jsxs(en,{size:"sm",variant:"outline",children:[f.jsx(hD,{className:"w-4 h-4 mr-1"}),"Edit Team"]})}),f.jsxs(pf,{className:"bg-card border-border",children:[f.jsxs(Ep,{children:[f.jsx(mf,{children:"Edit Team Assignment"}),f.jsx(gf,{children:"Select team members for this mission"})]}),f.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:B_.map(ee=>{const ue=de.includes(ee.id);return f.jsx(nn,{className:`p-3 cursor-pointer ${ue?"border-[#21A68D]":""}`,onClick:()=>{ee.status!=="busy"&&ye(ue?de.filter(ve=>ve!==ee.id):[...de,ee.id])},children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-8 h-8 rounded-full bg-[#21A68D] flex items-center justify-center text-white text-xs",children:ee.name.split(" ").map(ve=>ve[0]).join("")}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"text-sm font-medium",children:ee.name}),f.jsx("p",{className:"text-xs text-muted-foreground",children:ee.role})]}),ue&&f.jsx(Ul,{className:"w-4 h-4 text-[#21A68D]"})]})},ee.id)})}),f.jsx(en,{onClick:()=>De(!1),className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white",children:"Confirm"})]})]})]}),f.jsx("div",{className:"p-3 rounded-lg bg-muted/30",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("span",{className:"text-sm text-muted-foreground block mb-2",children:[de.length," members assigned:"]}),de.map(ee=>{const ue=B_.find(ve=>ve.id===ee);return ue?f.jsxs("div",{className:"text-sm flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-[#21A68D] flex items-center justify-center text-white text-xs",children:ue.name.split(" ").map(ve=>ve[0]).join("")}),f.jsx("span",{children:ue.name}),f.jsxs("span",{className:"text-muted-foreground",children:["(",ue.role,")"]})]},ee):null})]})})]})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>n("mission-list"),children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back to List"]}),f.jsxs(en,{onClick:Ta,className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white",children:[f.jsx(Z2,{className:"w-4 h-4 mr-2"}),"Proceed to Pre-Check"]})]})]})}),t==="pre-check"&&f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"space-y-6",children:[f.jsx("div",{className:"p-4 rounded-lg bg-[#0F4C75]/10 border border-[#0F4C75]",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(of,{className:"w-5 h-5 text-[#0F4C75]"}),f.jsx("p",{className:"text-sm",children:"Complete all critical checks before launching the mission"})]})}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:Ut.map(ee=>f.jsx(nn,{className:`p-4 ${fe[ee.id]?"border-[#21A68D]":"border-border"}`,children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(I_,{id:ee.id,checked:fe[ee.id]||!1,onCheckedChange:ue=>Ee({...fe,[ee.id]:!!ue}),className:"mt-1"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("label",{htmlFor:ee.id,className:"text-sm cursor-pointer flex items-center gap-2",children:[ee.label,ee.critical&&f.jsx(Nn,{variant:"outline",className:"text-xs",style:{borderColor:"#ef4444",color:"#ef4444"},children:"Critical"})]}),fe[ee.id]&&f.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[" Verified at ",new Date().toLocaleTimeString()]})]})]})},ee.id))}),!dt&&f.jsx("div",{className:"p-4 rounded-lg border",style:{borderColor:"#D4E268",backgroundColor:"rgba(212, 226, 104, 0.1)"},children:f.jsx("p",{className:"text-sm",style:{color:"#D4E268"},children:" All critical checks must be completed before continuing"})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>n("accept-mission"),children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back to Mission"]}),f.jsxs(en,{onClick:()=>n("ai-model-selection"),disabled:!dt,className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white disabled:bg-gray-600 disabled:cursor-not-allowed",children:["Continue to AI Selection",f.jsx(Wg,{className:"w-4 h-4 ml-2"})]})]})]})}),t==="ai-model-selection"&&H&&f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-[#21A68D]/20 flex items-center justify-center",children:f.jsx(DC,{className:"w-6 h-6 text-[#21A68D]"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl",children:"AI Detection Model"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Select one AI model to use during this mission"})]})]}),f.jsxs(RJ,{value:h,onValueChange:d,className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(mr,{htmlFor:"vessel-detection",className:"cursor-pointer h-full",children:f.jsx(nn,{className:`p-5 h-full cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-[#21A68D]/10 hover:border-[#21A68D]/50 border-2 ${h==="vessel-detection"?"border-[#21A68D] bg-[#21A68D]/5 shadow-md shadow-[#21A68D]/20":"border-border bg-card/40"}`,children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx(Bv,{value:"vessel-detection",id:"vessel-detection",className:"mt-1 border-[#21A68D] text-[#21A68D]"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Au,{className:"w-5 h-5",style:{color:"#21A68D"}}),f.jsx("h3",{className:"font-bold text-white",children:"Vessel Detection & Recognition"})]}),f.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Detect and identify vessels in the surveillance area with intelligent classification"}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(Nn,{variant:"secondary",className:"bg-[#21A68D]/10 text-[#21A68D] border-none text-[10px] font-bold",children:"REAL-TIME"}),f.jsx(Nn,{variant:"secondary",className:"bg-[#21A68D]/10 text-[#21A68D] border-none text-[10px] font-bold",children:"CLASSIFICATION"})]})]})]})})}),f.jsx(mr,{htmlFor:"hull-recognition",className:"cursor-pointer h-full",children:f.jsx(nn,{className:`p-5 h-full cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-[#3b82f6]/10 hover:border-[#3b82f6]/50 border-2 ${h==="hull-recognition"?"border-[#3b82f6] bg-[#3b82f6]/5 shadow-md shadow-[#3b82f6]/20":"border-border bg-card/40"}`,children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx(Bv,{value:"hull-recognition",id:"hull-recognition",className:"mt-1 border-[#3b82f6] text-[#3b82f6]"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(NC,{className:"w-5 h-5",style:{color:"#3b82f6"}}),f.jsx("h3",{className:"font-bold text-white",children:"Vessel Hull Number Recognition"})]}),f.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Optical Character Recognition (OCR) for precise vessel hull identification numbers"}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(Nn,{variant:"secondary",className:"bg-[#3b82f6]/10 text-[#3b82f6] border-none text-[10px] font-bold",children:"OCR ENGINE"}),f.jsx(Nn,{variant:"secondary",className:"bg-[#3b82f6]/10 text-[#3b82f6] border-none text-[10px] font-bold",children:"IDENTIFICATION"})]})]})]})})}),f.jsx(mr,{htmlFor:"vessel-attribute",className:"cursor-pointer h-full",children:f.jsx(nn,{className:`p-5 h-full cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-[#0F4C75]/10 hover:border-[#0F4C75]/50 border-2 ${h==="vessel-attribute"?"border-[#0F4C75] bg-[#0F4C75]/5 shadow-md shadow-[#0F4C75]/20":"border-border bg-card/40"}`,children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx(Bv,{value:"vessel-attribute",id:"vessel-attribute",className:"mt-1 border-[#0F4C75] text-[#0F4C75]"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(Z2,{className:"w-5 h-5",style:{color:"#0F4C75"}}),f.jsx("h3",{className:"font-bold text-white",children:"Vessel Attribute Detection"})]}),f.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Analyze vessel attributes including size, type, and detailed operational status"}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(Nn,{variant:"secondary",className:"bg-[#0F4C75]/10 text-[#0F4C75] border-none text-[10px] font-bold",children:"ANALYSIS"}),f.jsx(Nn,{variant:"secondary",className:"bg-[#0F4C75]/10 text-[#0F4C75] border-none text-[10px] font-bold",children:"METADATA"})]})]})]})})}),f.jsx(mr,{htmlFor:"debris-detection",className:"cursor-pointer h-full",children:f.jsx(nn,{className:`p-5 h-full cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-[#D4E268]/10 hover:border-[#D4E268]/50 border-2 ${h==="debris-detection"?"border-[#D4E268] bg-[#D4E268]/5 shadow-md shadow-[#D4E268]/20":"border-border bg-card/40"}`,children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx(Bv,{value:"debris-detection",id:"debris-detection",className:"mt-1 border-[#D4E268] text-[#D4E268]"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(of,{className:"w-5 h-5",style:{color:"#D4E268"}}),f.jsx("h3",{className:"font-bold text-white",children:"Marine Debris Detection"})]}),f.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Identify and track marine debris, waste, and pollution in monitored coastal areas"}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(Nn,{variant:"secondary",className:"bg-[#D4E268]/10 text-[#D4E268] border-none text-[10px] font-bold",children:"ECO-GUARD"}),f.jsx(Nn,{variant:"secondary",className:"bg-[#D4E268]/10 text-[#D4E268] border-none text-[10px] font-bold",children:"DETECTION"})]})]})]})})}),f.jsx(mr,{htmlFor:"event-detection",className:"cursor-pointer h-full md:col-span-2",children:f.jsx(nn,{className:`p-5 h-full cursor-pointer transition-all duration-300 hover:shadow-lg hover:shadow-[#3b82f6]/10 hover:border-[#3b82f6]/50 border-2 ${h==="event-detection"?"border-[#3b82f6] bg-[#3b82f6]/5 shadow-md shadow-[#3b82f6]/20":"border-border bg-card/40"}`,children:f.jsxs("div",{className:"flex items-start gap-4",children:[f.jsx(Bv,{value:"event-detection",id:"event-detection",className:"mt-1 border-[#3b82f6] text-[#3b82f6]"}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[f.jsx(_u,{className:"w-5 h-5",style:{color:"#3b82f6"}}),f.jsx("h3",{className:"font-bold text-white",children:"Event Detection & Behavioral Analysis"})]}),f.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:"Detect specific security events like illegal fishing, unauthorized docking, or suspicious behavior"}),f.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[f.jsx(Nn,{variant:"secondary",className:"bg-[#3b82f6]/10 text-[#3b82f6] border-none text-[10px] font-bold",children:"BEHAVIORAL"}),f.jsx(Nn,{variant:"secondary",className:"bg-[#3b82f6]/10 text-[#3b82f6] border-none text-[10px] font-bold",children:"SECURITY"})]})]})]})})})]}),h&&f.jsx("div",{className:"p-4 rounded-lg bg-[#21A68D]/10 border border-[#21A68D]/30",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Ul,{className:"w-5 h-5 text-[#21A68D] mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-medium text-[#21A68D]",children:"AI Model Selected"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"The selected model will run continuously during the mission and provide real-time detection results"})]})]})}),f.jsxs("div",{className:"flex justify-between pt-4",children:[f.jsxs(en,{variant:"outline",onClick:()=>n("pre-check"),className:"border-border hover:bg-accent",children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back to Pre-Check"]}),f.jsxs(en,{onClick:()=>n("pre-check-summary"),disabled:!h,className:"bg-[#21A68D] hover:bg-[#1a8a72] text-white disabled:bg-gray-600 disabled:cursor-not-allowed",children:["Continue to Summary",f.jsx(Wg,{className:"w-4 h-4 ml-2"})]})]})]})}),t==="pre-check-summary"&&H&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-[#21A68D]/20 flex items-center justify-center",children:f.jsx(Ul,{className:"w-6 h-6 text-[#21A68D]"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl",children:"Pre-Flight Check Completed"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"All critical systems verified and ready for launch"})]})]}),f.jsxs("div",{className:"p-4 rounded-lg bg-[#21A68D]/10 border border-[#21A68D]",children:[f.jsx("h3",{className:"font-medium mb-2",children:H.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:H.description})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("h3",{className:"flex items-center gap-2 mb-4",style:{color:"#21A68D"},children:[f.jsx(Ul,{className:"w-5 h-5"}),"Completed Checks"]}),f.jsx("div",{className:"space-y-2",children:Ut.filter(ee=>fe[ee.id]).map(ee=>f.jsxs("div",{className:"flex items-center gap-2 p-2 rounded bg-muted/30",children:[f.jsx(Ul,{className:"w-4 h-4 text-green-500"}),f.jsx("span",{className:"text-sm flex-1",children:ee.label}),ee.critical&&f.jsx(Nn,{variant:"outline",className:"text-xs border-[#21A68D] text-[#21A68D]",children:"Critical"})]},ee.id))})]}),f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("h3",{className:"flex items-center gap-2 mb-4",style:{color:"#0F4C75"},children:[f.jsx(uy,{className:"w-5 h-5"}),"Mission Configuration"]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Drone"}),f.jsx("p",{className:"font-medium",children:ym.find(ee=>ee.id===H.assignedDevice)?.name}),f.jsx(Nn,{variant:"outline",className:"mt-1",style:{borderColor:"#21A68D",color:"#21A68D"},children:ym.find(ee=>ee.id===H.assignedDevice)?.type})]}),f.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Team Members"}),f.jsxs("p",{className:"font-medium",children:[de.length," members assigned"]})]}),f.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Mission Area"}),f.jsx("p",{className:"font-medium",children:H.area})]}),f.jsxs("div",{className:"p-3 rounded-lg bg-muted/30",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Duration"}),f.jsxs("p",{className:"font-medium",children:[H.duration," days"]})]})]})]})]}),h&&f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("h3",{className:"flex items-center gap-2 mb-4",style:{color:"#21A68D"},children:[f.jsx(DC,{className:"w-5 h-5"}),"AI Detection Model"]}),f.jsxs("div",{className:"space-y-3",children:[h==="vessel-detection"&&f.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-[#21A68D]/10 border border-[#21A68D]/30",children:[f.jsx(Au,{className:"w-6 h-6 text-[#21A68D] flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"Vessel Detection & Recognition"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Real-time vessel detection and classification"})]})]}),h==="hull-recognition"&&f.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-[#3b82f6]/10 border border-[#3b82f6]/30",children:[f.jsx(NC,{className:"w-6 h-6 text-[#3b82f6] flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"Vessel Hull Number Recognition"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"OCR for hull identification numbers"})]})]}),h==="vessel-attribute"&&f.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-[#0F4C75]/10 border border-[#0F4C75]/30",children:[f.jsx(Z2,{className:"w-6 h-6 text-[#0F4C75] flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"Vessel Attribute Detection"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyze vessel attributes and status"})]})]}),h==="debris-detection"&&f.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-[#D4E268]/10 border border-[#D4E268]/30",children:[f.jsx(of,{className:"w-6 h-6 text-[#D4E268] flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"Marine Debris Detection"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Environmental monitoring and pollution detection"})]})]}),h==="event-detection"&&f.jsxs("div",{className:"flex items-center gap-3 p-4 rounded-lg bg-[#3b82f6]/10 border border-[#3b82f6]/30",children:[f.jsx(_u,{className:"w-6 h-6 text-[#3b82f6] flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium",children:"Event Detection & Behavior Analysis"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Autonomous security event identification and alerting"})]})]})]})]}),f.jsx(nn,{className:"p-6 bg-card border-border",children:f.jsxs("div",{className:"flex items-start gap-3 mb-4",children:[f.jsx(of,{className:"w-5 h-5 text-[#D4E268] mt-0.5"}),f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium mb-1",children:"Ready for Launch"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:'All pre-flight checks have been completed successfully. The drone is ready for mission deployment. Click "Launch Mission" to begin operations.'})]})]})}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>n("ai-model-selection"),children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back to AI Selection"]}),f.jsxs(en,{onClick:Pa,className:"bg-[#22c55e] hover:bg-[#22c55e]/90 text-white",children:[f.jsx(Ul,{className:"w-4 h-4 mr-2"}),"Launch Mission"]})]})]}),t==="live-mission-summary"&&H&&f.jsxs("div",{className:"space-y-6",children:[f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsx("div",{className:"flex items-start justify-between mb-4",children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("h2",{className:"text-2xl",children:H.name}),f.jsxs("div",{className:"flex items-center gap-1 bg-[#22c55e]/20 border border-[#22c55e] px-3 py-1 rounded",children:[f.jsx("div",{className:"w-2.5 h-2.5 bg-[#22c55e] rounded-full animate-pulse"}),f.jsx("span",{className:"text-sm font-bold text-[#22c55e]",children:"LIVE"})]})]}),f.jsx("p",{className:"text-muted-foreground",children:H.description})]})}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mt-6",children:[f.jsxs(nn,{className:"p-4 bg-muted/30 border-border",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Mission Time"}),f.jsxs("p",{className:"text-xl font-semibold",style:{color:"#21A68D"},children:[Math.floor((new Date().getTime()-new Date(H.createdAt).getTime())/1e3/60)," min"]})]}),f.jsxs(nn,{className:"p-4 bg-muted/30 border-border",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Category"}),f.jsx("p",{className:"text-sm font-semibold",children:H.category})]}),f.jsxs(nn,{className:"p-4 bg-muted/30 border-border",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Area"}),f.jsx("p",{className:"text-sm font-semibold",children:H.area})]}),f.jsxs(nn,{className:"p-4 bg-muted/30 border-border",children:[f.jsx("p",{className:"text-xs text-muted-foreground mb-1",children:"Status"}),f.jsx("p",{className:"text-sm font-semibold text-[#22c55e]",children:"Active"})]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("h3",{className:"flex items-center gap-2 mb-4",style:{color:"#21A68D"},children:[f.jsx(hD,{className:"w-5 h-5"}),"Team Members"]}),f.jsx("div",{className:"space-y-3",children:de.map(ee=>{const ue=B_.find(ve=>ve.id===ee);return ue?f.jsxs("div",{className:"flex items-center gap-3 p-3 rounded-lg bg-muted/30",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-[#21A68D] flex items-center justify-center text-white",children:ue.name.split(" ").map(ve=>ve[0]).join("")}),f.jsxs("div",{className:"flex-1",children:[f.jsx("p",{className:"font-medium",children:ue.name}),f.jsx("p",{className:"text-sm text-muted-foreground",children:ue.role})]}),f.jsx(Nn,{variant:"outline",className:"border-green-500 text-green-500",children:"Active"})]},ee):null})})]}),f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("h3",{className:"flex items-center gap-2 mb-4",style:{color:"#0F4C75"},children:[f.jsx(yd,{className:"w-5 h-5"}),"Drone Information"]}),(()=>{const ee=ym.find(ue=>ue.id===H.assignedDevice);return ee?f.jsx("div",{className:"space-y-4",children:f.jsxs("div",{className:"p-4 rounded-lg bg-muted/30",children:[f.jsxs("div",{className:"flex items-center justify-between mb-3",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"font-medium text-lg",children:ee.name}),f.jsx(Nn,{variant:"outline",className:"mt-1",children:ee.type})]}),f.jsx(Nn,{variant:"outline",className:"border-green-500 text-green-500",children:"Operating"})]}),f.jsxs("div",{className:"space-y-3 mt-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-muted-foreground",children:"Battery Level:"}),f.jsxs("span",{className:"text-green-500 font-medium",children:[ee.battery,"%"]})]}),f.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:f.jsx("div",{className:"h-2 rounded-full bg-green-500",style:{width:`${ee.battery}%`}})})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Signal Strength:"}),f.jsx("span",{className:"text-green-500 font-medium",children:"95%"})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Altitude:"}),f.jsx("span",{className:"font-medium",children:"127m"})]}),f.jsxs("div",{className:"flex justify-between text-sm",children:[f.jsx("span",{className:"text-muted-foreground",children:"Speed:"}),f.jsx("span",{className:"font-medium",children:"12.3 km/h"})]})]})]})}):null})()]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{variant:"outline",onClick:()=>n("mission-list"),children:[f.jsx(tf,{className:"w-4 h-4 mr-2"}),"Back to List"]}),f.jsxs(en,{onClick:()=>n("live-mission-detail"),className:"bg-[#22c55e] hover:bg-[#22c55e]/90 text-white",children:[f.jsx(yd,{className:"w-4 h-4 mr-2"}),"View Live Operations"]})]})]}),t==="live-mission-detail"&&H&&f.jsxs("div",{className:"h-full flex flex-col",children:[f.jsxs("div",{className:"px-4 md:px-6 pt-4 pb-3 border-b border-border bg-card",children:[f.jsx("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between gap-3",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(en,{variant:"outline",size:"sm",onClick:()=>n("live-mission-summary"),className:"gap-2 shrink-0",children:[f.jsx(tf,{className:"w-4 h-4"}),"Back"]}),f.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[f.jsx("h2",{className:"text-lg font-medium",children:H.name}),f.jsxs("div",{className:"flex items-center gap-1 bg-[#22c55e]/20 border border-[#22c55e] px-2 py-0.5 rounded",children:[f.jsx("div",{className:"w-2 h-2 bg-[#22c55e] rounded-full animate-pulse"}),f.jsx("span",{className:"text-xs font-bold text-[#22c55e]",children:"LIVE"})]})]})]})}),f.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:H.description})]}),f.jsx("div",{className:"flex-1 overflow-hidden",children:f.jsx(KV,{})})]}),t==="post-analysis"&&f.jsxs("div",{className:"space-y-6 pb-20",children:[f.jsx("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:f.jsxs("div",{children:[f.jsxs("h2",{className:"text-2xl font-bold text-white flex items-center gap-2",children:[f.jsx(lx,{className:"w-6 h-6 text-[#21A68D]"}),"Mission Post-Analysis"]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Upload flight media and telemetry for AI processing and reporting"})]})}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[f.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[f.jsxs(nn,{className:"p-6 bg-[#0f172a]/60 backdrop-blur-xl border-white/10 shadow-2xl",children:[f.jsx("h3",{className:"text-sm font-bold text-[#21A68D] uppercase tracking-widest mb-4",children:"1. Mission Context"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{className:"text-xs text-muted-foreground uppercase font-bold",children:"Select Completed Mission"}),f.jsxs(Gm,{value:H?.id||"",onValueChange:ee=>ae($.find(ue=>ue.id===ee)||null),children:[f.jsx(Hm,{className:"bg-white/5 border-white/10 text-white h-12",children:f.jsx(Wm,{placeholder:"Choose a mission..."})}),f.jsx(Zm,{className:"bg-[#0f172a] border-white/10",children:$.filter(ee=>ee.status==="completed"||ee.status==="pending").map(ee=>f.jsx(Ir,{value:ee.id,className:"text-white hover:bg-[#21A68D]/10",children:ee.name},ee.id))})]}),f.jsx("p",{className:"text-[10px] text-muted-foreground italic",children:"Target mission for analysis synchronization"})]}),H&&f.jsxs("div",{className:"p-3 rounded-xl bg-white/5 border border-white/10 space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsx("span",{className:"text-muted-foreground",children:"Category:"}),f.jsx("span",{className:"text-white font-medium",children:H.category})]}),f.jsxs("div",{className:"flex justify-between text-xs",children:[f.jsx("span",{className:"text-muted-foreground",children:"Created:"}),f.jsx("span",{className:"text-white font-medium",children:new Date(H.createdAt).toLocaleDateString()})]})]})]})]}),f.jsxs(nn,{className:"p-6 bg-[#0f172a]/60 backdrop-blur-xl border-white/10 shadow-2xl",children:[f.jsx("h3",{className:"text-sm font-bold text-[#21A68D] uppercase tracking-widest mb-4",children:"3. Analysis Configuration"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between p-3 rounded-xl bg-white/5 border border-white/10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(jB,{className:"w-5 h-5 text-blue-400"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-white",children:"AI Engine v2.4"}),f.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Optimal Processing"})]})]}),f.jsx(Nn,{className:"bg-blue-500/20 text-blue-400 border-none",children:"Active"})]}),f.jsxs("div",{className:"space-y-3 pt-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(I_,{id:"opt-detection",checked:!0}),f.jsx("label",{htmlFor:"opt-detection",className:"text-xs text-white",children:"Object Detection (Vessels/Vehicles)"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(I_,{id:"opt-ocr"}),f.jsx("label",{htmlFor:"opt-ocr",className:"text-xs text-white",children:"Hull/Number Recognition"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(I_,{id:"opt-telemetry",checked:!0}),f.jsx("label",{htmlFor:"opt-telemetry",className:"text-xs text-white",children:"Telemetry Interpolation"})]})]}),f.jsxs(en,{className:"w-full h-12 mt-4 bg-[#21A68D] hover:bg-[#1a8a72] text-white font-bold",disabled:!H||w,onClick:z,children:[f.jsx(_u,{className:"w-4 h-4 mr-2"}),"Run Mission Analysis"]})]})]})]}),f.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[f.jsxs(nn,{className:"p-8 bg-[#0f172a]/60 backdrop-blur-xl border-white/10 shadow-2xl",children:[f.jsx("h3",{className:"text-sm font-bold text-[#21A68D] uppercase tracking-widest mb-6",children:"2. Data Ingestion"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsxs(mr,{className:"text-xs text-muted-foreground uppercase font-bold flex items-center gap-2",children:[f.jsx(MB,{className:"w-4 h-4 text-[#D4E268]"}),"Flight Recording (MP4/MOV)"]}),f.jsxs("div",{className:"group relative h-48 rounded-2xl border-2 border-dashed border-white/10 hover:border-[#21A68D]/50 hover:bg-[#21A68D]/5 transition-all flex flex-col items-center justify-center p-6 text-center cursor-pointer",onClick:()=>document.getElementById("video-upload")?.click(),children:[f.jsx("input",{id:"video-upload",type:"file",accept:"video/*",className:"hidden"}),f.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:f.jsx(dy,{className:"w-6 h-6 text-muted-foreground"})}),f.jsx("p",{className:"text-sm font-medium text-white",children:"Drop video file here"}),f.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Maximum file size: 2GB"})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs(mr,{className:"text-xs text-muted-foreground uppercase font-bold flex items-center gap-2",children:[f.jsx(RC,{className:"w-4 h-4 text-blue-400"}),"Telemetry Log (CSV/JSON/LOG)"]}),f.jsxs("div",{className:"group relative h-48 rounded-2xl border-2 border-dashed border-white/10 hover:border-[#21A68D]/50 hover:bg-[#21A68D]/5 transition-all flex flex-col items-center justify-center p-6 text-center cursor-pointer",onClick:()=>document.getElementById("log-upload")?.click(),children:[f.jsx("input",{id:"log-upload",type:"file",accept:".csv,.json,.log",className:"hidden"}),f.jsx("div",{className:"w-12 h-12 rounded-full bg-white/5 flex items-center justify-center mb-4 group-hover:scale-110 transition-transform",children:f.jsx(dy,{className:"w-6 h-6 text-muted-foreground"})}),f.jsx("p",{className:"text-sm font-medium text-white",children:"Drop telemetry file here"}),f.jsx("p",{className:"text-[10px] text-muted-foreground mt-1",children:"Exported from GCS or Drone Local Storage"})]})]})]}),f.jsxs("div",{className:"mt-8 p-4 rounded-xl bg-muted/20 border border-white/5 flex items-start gap-3",children:[f.jsx(of,{className:"w-5 h-5 text-[#D4E268] mt-0.5 flex-shrink-0"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs font-bold text-white mb-1",children:"Processing Note"}),f.jsx("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:"For accurate AI analysis, please ensure the mission timestamps in the video match the telemetry logs. The system will attempt to auto-sync using the mission takeoff event metadata."})]})]})]}),f.jsxs(nn,{className:`p-6 bg-[#0f172a]/60 backdrop-blur-xl border-white/10 shadow-2xl border-t-2 transition-all duration-500 ${w?"border-t-blue-500":"border-t-[#21A68D]"}`,children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsx("h3",{className:"text-sm font-bold text-white uppercase tracking-widest",children:"Processing Queue"}),f.jsx(Nn,{className:w?"bg-blue-500/20 text-blue-400 animate-pulse":"bg-[#21A68D]/10 text-[#21A68D]",children:w?"Analyzing...":o===100?"Analysis Complete":"Ready to start"})]}),f.jsxs("div",{className:"space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex justify-between text-xs mb-1",children:[f.jsx("span",{className:"text-muted-foreground",children:"AI Inference Pipeline"}),f.jsxs("span",{className:"text-white font-bold",children:[o,"%"]})]}),f.jsx(qg,{value:o,className:"h-2 bg-white/5"})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-3",children:P.map(ee=>f.jsxs("div",{className:`p-3 rounded-lg border flex flex-col gap-2 transition-all duration-300 ${ee.status==="completed"?"bg-[#21A68D]/10 border-[#21A68D]/30":ee.status==="processing"?"bg-blue-500/10 border-blue-500/30":"bg-white/5 border-white/5 opacity-50"}`,children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-[9px] font-bold text-white uppercase truncate pr-1",children:ee.name}),ee.status==="completed"?f.jsx(d0,{className:"w-3 h-3 text-[#21A68D]"}):ee.status==="processing"?f.jsx("div",{className:"w-2 h-2 rounded-full bg-blue-500 animate-ping"}):f.jsx("div",{className:"w-2 h-2 rounded-full bg-muted"})]}),f.jsx("div",{className:"text-[8px] text-muted-foreground uppercase font-bold",children:ee.status})]},ee.id))})]})]})]})]})]}),t==="event-detection"&&f.jsx("div",{className:"space-y-6",children:f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx(_u,{className:"w-6 h-6 text-[#3b82f6]"}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-semibold",children:"Event Detection Log"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Behavioral anomalies and security event history"})]})]}),f.jsx("div",{className:"space-y-4",children:[{id:1,type:"Illegal Fishing",location:"Zone A-12",time:"10:24 AM",confidence:"94%"},{id:2,type:"Unauthorized Docking",location:"East Pier",time:"09:15 AM",confidence:"88%"},{id:3,type:"Border Intrusion",location:"Northern Edge",time:"Yesterday",confidence:"91%"}].map(ee=>f.jsxs("div",{className:"p-4 rounded-lg bg-muted/30 border border-border flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"p-2 rounded bg-[#3b82f6]/10 text-[#3b82f6]",children:f.jsx(of,{className:"w-5 h-5"})}),f.jsxs("div",{children:[f.jsx("p",{className:"font-medium text-sm",children:ee.type}),f.jsxs("p",{className:"text-xs text-muted-foreground",children:[ee.location,"  ",ee.time]})]})]}),f.jsxs(Nn,{variant:"outline",className:"text-[#3b82f6] border-[#3b82f6]",children:[ee.confidence," Match"]})]},ee.id))})]})})]})}var uw="Tabs",[Noe]=Wl(uw,[Wy]),XV=Wy(),[Doe,pk]=Noe(uw),YV=W.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,onValueChange:s,defaultValue:h,orientation:d="horizontal",dir:o,activationMode:_="automatic",...w}=e,A=Gy(o),[P,N]=bd({prop:r,onChange:s,defaultProp:h??"",caller:uw});return f.jsx(Doe,{scope:n,baseId:vd(),value:P,onValueChange:N,orientation:d,dir:A,activationMode:_,children:f.jsx(qn.div,{dir:A,"data-orientation":d,...w,ref:t})})});YV.displayName=uw;var JV="TabsList",QV=W.forwardRef((e,t)=>{const{__scopeTabs:n,loop:r=!0,...s}=e,h=pk(JV,n),d=XV(n);return f.jsx(vM,{asChild:!0,...d,orientation:h.orientation,dir:h.dir,loop:r,children:f.jsx(qn.div,{role:"tablist","aria-orientation":h.orientation,...s,ref:t})})});QV.displayName=JV;var eU="TabsTrigger",tU=W.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,disabled:s=!1,...h}=e,d=pk(eU,n),o=XV(n),_=iU(d.baseId,r),w=aU(d.baseId,r),A=r===d.value;return f.jsx(xM,{asChild:!0,...o,focusable:!s,active:A,children:f.jsx(qn.button,{type:"button",role:"tab","aria-selected":A,"aria-controls":w,"data-state":A?"active":"inactive","data-disabled":s?"":void 0,disabled:s,id:_,...h,ref:t,onMouseDown:dn(e.onMouseDown,P=>{!s&&P.button===0&&P.ctrlKey===!1?d.onValueChange(r):P.preventDefault()}),onKeyDown:dn(e.onKeyDown,P=>{[" ","Enter"].includes(P.key)&&d.onValueChange(r)}),onFocus:dn(e.onFocus,()=>{const P=d.activationMode!=="manual";!A&&!s&&P&&d.onValueChange(r)})})})});tU.displayName=eU;var nU="TabsContent",rU=W.forwardRef((e,t)=>{const{__scopeTabs:n,value:r,forceMount:s,children:h,...d}=e,o=pk(nU,n),_=iU(o.baseId,r),w=aU(o.baseId,r),A=r===o.value,P=W.useRef(A);return W.useEffect(()=>{const N=requestAnimationFrame(()=>P.current=!1);return()=>cancelAnimationFrame(N)},[]),f.jsx(Bc,{present:s||A,children:({present:N})=>f.jsx(qn.div,{"data-state":A?"active":"inactive","data-orientation":o.orientation,role:"tabpanel","aria-labelledby":_,hidden:!N,id:w,tabIndex:0,...d,ref:t,style:{...e.style,animationDuration:P.current?"0s":void 0},children:N&&h})})});rU.displayName=nU;function iU(e,t){return`${e}-trigger-${t}`}function aU(e,t){return`${e}-content-${t}`}var Ooe=YV,Roe=QV,Loe=tU,zoe=rU;function oU({className:e,...t}){return f.jsx(Ooe,{"data-slot":"tabs",className:or("flex flex-col gap-2",e),...t})}function sU({className:e,...t}){return f.jsx(Roe,{"data-slot":"tabs-list",className:or("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center rounded-xl p-[3px] flex",e),...t})}function wp({className:e,...t}){return f.jsx(Loe,{"data-slot":"tabs-trigger",className:or("data-[state=active]:bg-card dark:data-[state=active]:text-foreground focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring dark:data-[state=active]:border-input dark:data-[state=active]:bg-input/30 text-foreground dark:text-muted-foreground inline-flex h-[calc(100%-1px)] flex-1 items-center justify-center gap-1.5 rounded-xl border border-transparent px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow] focus-visible:ring-[3px] focus-visible:outline-1 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),...t})}function Sp({className:e,...t}){return f.jsx(zoe,{"data-slot":"tabs-content",className:or("flex-1 outline-none",e),...t})}function Fb({...e}){return f.jsx(A6,{"data-slot":"sheet",...e})}function Foe({...e}){return f.jsx(C6,{"data-slot":"sheet-trigger",...e})}function Boe({...e}){return f.jsx(E6,{"data-slot":"sheet-portal",...e})}const lU=W.forwardRef(({className:e,...t},n)=>f.jsx(j6,{ref:n,"data-slot":"sheet-overlay",className:or("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",e),...t}));lU.displayName="SheetOverlay";function Bb({className:e,children:t,side:n="right",...r}){return f.jsxs(Boe,{children:[f.jsx(lU,{}),f.jsxs(M6,{"data-slot":"sheet-content",className:or("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out fixed z-50 flex flex-col gap-4 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500",n==="right"&&"data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right inset-y-0 right-0 h-full w-3/4 border-l sm:max-w-sm",n==="left"&&"data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left inset-y-0 left-0 h-full w-3/4 border-r sm:max-w-sm",n==="top"&&"data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top inset-x-0 top-0 h-auto border-b",n==="bottom"&&"data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom inset-x-0 bottom-0 h-auto border-t",e),...r,children:[t,f.jsxs(N6,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-secondary absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none",children:[f.jsx(G1,{className:"size-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]})]})}function AE({className:e,...t}){return f.jsx("div",{"data-slot":"sheet-header",className:or("flex flex-col gap-1.5 p-4",e),...t})}function CE({className:e,...t}){return f.jsx(k6,{"data-slot":"sheet-title",className:or("text-foreground font-semibold",e),...t})}function EE({className:e,...t}){return f.jsx(I6,{"data-slot":"sheet-description",className:or("text-muted-foreground text-sm",e),...t})}const $oe=[{id:"UAV-001",name:"Pyrhos X V1",type:"Aerial Quadcopter",battery:100,status:"available",flightHours:245,totalFlights:89,location:"Hangar A",serial:"PXV1-2024-001"},{id:"UAV-002",name:"Pyrhos X V2",type:"Aerial Quadcopter",battery:85,status:"in-flight",flightHours:189,totalFlights:67,location:"Active Mission",serial:"PXV2-2024-002"},{id:"UAV-003",name:"AR-2 Aerial",type:"Tactical Drone",battery:95,status:"available",flightHours:156,totalFlights:54,location:"Hangar B",serial:"AR2-2024-003"},{id:"UAV-004",name:"Ephyros Alpha",type:"High Altitude",battery:78,status:"charging",flightHours:312,totalFlights:102,location:"Charging Station",serial:"EPA-2024-004"}],Voe=[{id:"AUV-001",name:"AquaScan Alpha",type:"Survey AUV",battery:92,status:"available",diveHours:123,totalDives:34,location:"Dock A",serial:"ASA-2024-001",maxDepth:500},{id:"AUV-002",name:"DeepSeeker Pro",type:"Deep Sea AUV",battery:78,status:"maintenance",diveHours:289,totalDives:56,location:"Maintenance Bay",serial:"DSP-2024-002",maxDepth:1e3},{id:"AUV-003",name:"OceanExplorer",type:"Research AUV",battery:88,status:"available",diveHours:167,totalDives:42,location:"Dock B",serial:"OEX-2024-003",maxDepth:750}],Uoe=[{id:"VEH-001",name:"Mobile Command Unit",type:"Command Vehicle",fuel:85,status:"available",mileage:12500,location:"Base Garage",plate:"B 1234 XYZ"},{id:"VEH-002",name:"Field Support Truck",type:"Support Vehicle",fuel:92,status:"in-use",mileage:8900,location:"Tanjung Priok",plate:"B 5678 ABC"},{id:"VEH-003",name:"Equipment Transport",type:"Cargo Van",fuel:67,status:"available",mileage:15300,location:"Base Garage",plate:"B 9012 DEF"}],qoe=[{id:"BAT-001",name:"LiPo Battery 6S",type:"Battery",quantity:24,status:"available",capacity:"22000mAh",voltage:"22.2V",cycles:45},{id:"BAT-002",name:"LiPo Battery 4S",type:"Battery",quantity:18,status:"available",capacity:"16000mAh",voltage:"14.8V",cycles:67},{id:"CAM-001",name:"Gimbal Camera 4K",type:"Camera",quantity:6,status:"available",resolution:"4K 60fps",sensor:"CMOS"},{id:"PRO-001",name:"Carbon Fiber Propeller Set",type:"Propeller",quantity:32,status:"available",size:"15 inch",material:"Carbon Fiber"},{id:"SNS-001",name:"Thermal Imaging Sensor",type:"Sensor",quantity:4,status:"available",range:"640x512",sensitivity:"50mK"},{id:"CHG-001",name:"Fast Charger Station",type:"Charger",quantity:8,status:"available",output:"500W",ports:"4 ports"}],ih=e=>{switch(e.toLowerCase()){case"available":return"#22c55e";case"in-flight":case"in-use":return"#21A68D";case"maintenance":return"#D4E268";case"charging":return"#3b82f6";default:return"#6b7280"}},Uv=e=>e>=80?"#22c55e":e>=50?"#D4E268":"#ef4444";function Goe(){const[e,t]=W.useState(""),[n,r]=W.useState(null),[s,h]=W.useState(()=>Su("mariview_assets_uav",$oe)),[d,o]=W.useState(()=>Su("mariview_assets_auv",Voe)),[_,w]=W.useState(()=>Su("mariview_assets_vehicle",Uoe)),[A,P]=W.useState(()=>Su("mariview_assets_accessory",qoe));W.useEffect(()=>{lh("mariview_assets_uav",s)},[s]),W.useEffect(()=>{lh("mariview_assets_auv",d)},[d]),W.useEffect(()=>{lh("mariview_assets_vehicle",_)},[_]),W.useEffect(()=>{lh("mariview_assets_accessory",A)},[A]);const[N,z]=W.useState(!1),[q,$]=W.useState(!1),[O,X]=W.useState("uav"),[K,te]=W.useState(null),[ne,H]=W.useState({name:"",type:"",status:"available",battery:100,location:"",serial:""}),ae=()=>{const Ee={id:`${O.toUpperCase()}-${String(Date.now()).slice(-3)}`,...ne};O==="uav"?h([...s,Ee]):O==="auv"?o([...d,Ee]):O==="vehicles"?w([..._,Ee]):P([...A,Ee]),z(!1),_e()},de=()=>{K&&(O==="uav"?h(s.map(fe=>fe.id===K.id?{...fe,...ne}:fe)):O==="auv"?o(d.map(fe=>fe.id===K.id?{...fe,...ne}:fe)):O==="vehicles"?w(_.map(fe=>fe.id===K.id?{...fe,...ne}:fe)):P(A.map(fe=>fe.id===K.id?{...fe,...ne}:fe))),$(!1),te(null),_e()},ye=(fe,Ee)=>{confirm("Are you sure you want to delete this asset?")&&(Ee==="uav"?h(s.filter(Be=>Be.id!==fe)):Ee==="auv"?o(d.filter(Be=>Be.id!==fe)):Ee==="vehicle"?w(_.filter(Be=>Be.id!==fe)):P(A.filter(Be=>Be.id!==fe)))},Ae=(fe,Ee)=>{te(fe),X(Ee),H({name:fe.name,type:fe.type,status:fe.status,battery:fe.battery||100,location:fe.location,serial:fe.serial||""}),$(!0)},_e=()=>{H({name:"",type:"",status:"available",battery:100,location:"",serial:""})};return f.jsxs("div",{className:"p-4 md:p-6",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl md:text-3xl text-[rgb(255,255,255)]",children:"Asset Management"}),f.jsx("p",{className:"text-muted-foreground text-sm md:text-base",children:"Comprehensive fleet and equipment tracking"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[f.jsx(nn,{className:"p-4 bg-card border-[#21A68D]",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#21A68D]/20 flex items-center justify-center",children:f.jsx(uy,{className:"w-5 h-5",style:{color:"#21A68D"}})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"UAV"}),f.jsx("p",{className:"text-2xl mt-1",children:s.length})]})]})}),f.jsx(nn,{className:"p-4 bg-card border-[#0F4C75]",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#0F4C75]/20 flex items-center justify-center",children:f.jsx(Au,{className:"w-5 h-5",style:{color:"#0F4C75"}})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"AUV"}),f.jsx("p",{className:"text-2xl mt-1",children:d.length})]})]})}),f.jsx(nn,{className:"p-4 bg-card border-[#D4E268]",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#D4E268]/20 flex items-center justify-center",children:f.jsx(sD,{className:"w-5 h-5",style:{color:"#D4E268"}})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Vehicles"}),f.jsx("p",{className:"text-2xl mt-1",children:_.length})]})]})}),f.jsx(nn,{className:"p-4 bg-card border-[#8b5cf6]",children:f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-[#8b5cf6]/20 flex items-center justify-center",children:f.jsx(FC,{className:"w-5 h-5",style:{color:"#8b5cf6"}})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm text-muted-foreground",children:"Accessories"}),f.jsx("p",{className:"text-2xl mt-1",children:A.length})]})]})})]}),f.jsx(nn,{className:"p-4 bg-card border-border mb-6",children:f.jsxs("div",{className:"relative",children:[f.jsx(BC,{className:"absolute left-3 top-1/2 -translate-y-1/2 w-4 h-4 text-muted-foreground"}),f.jsx(xa,{placeholder:"Search assets by ID, name, or type...",value:e,onChange:fe=>t(fe.target.value),className:"pl-10 bg-input"})]})}),f.jsxs(oU,{defaultValue:"uav",className:"w-full",children:[f.jsxs(sU,{className:"grid w-full grid-cols-4 mb-6",children:[f.jsxs(wp,{value:"uav",className:"data-[state=active]:bg-[#21A68D]",children:[f.jsx(uy,{className:"w-4 h-4 mr-2"}),"UAV"]}),f.jsxs(wp,{value:"auv",className:"data-[state=active]:bg-[#0F4C75]",children:[f.jsx(Au,{className:"w-4 h-4 mr-2"}),"AUV"]}),f.jsxs(wp,{value:"vehicles",className:"data-[state=active]:bg-[#D4E268]",children:[f.jsx(sD,{className:"w-4 h-4 mr-2"}),"Vehicles"]}),f.jsxs(wp,{value:"accessories",className:"data-[state=active]:bg-[#8b5cf6]",children:[f.jsx(FC,{className:"w-4 h-4 mr-2"}),"Accessories"]})]}),f.jsx(Sp,{value:"uav",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:s.filter(fe=>fe.id.toLowerCase().includes(e.toLowerCase())||fe.name.toLowerCase().includes(e.toLowerCase())).map(fe=>f.jsxs(nn,{className:"p-5 bg-card border-border hover:border-[#21A68D] transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium mb-1",children:fe.name}),f.jsx("p",{className:"text-xs text-muted-foreground",children:fe.type}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:fe.id})]}),f.jsx(Nn,{variant:"outline",style:{borderColor:ih(fe.status),color:ih(fe.status)},children:fe.status})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[f.jsx("span",{className:"text-muted-foreground",children:"Battery"}),f.jsxs("span",{style:{color:Uv(fe.battery)},children:[fe.battery,"%"]})]}),f.jsx(qg,{value:fe.battery,className:"h-2"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Flight Hours"}),f.jsxs("p",{className:"font-medium",children:[fe.flightHours,"h"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Flights"}),f.jsx("p",{className:"font-medium",children:fe.totalFlights})]})]}),f.jsx("div",{className:"text-xs",children:f.jsxs("p",{className:"text-muted-foreground",children:["Location: ",fe.location]})})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>r({...fe,category:"uav"}),children:f.jsx(wu,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>Ae(fe,"uav"),children:f.jsx(Cm,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1 border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>ye(fe.id,"uav"),children:f.jsx(_p,{className:"w-4 h-4"})})]})]},fe.id))})}),f.jsx(Sp,{value:"auv",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:d.filter(fe=>fe.id.toLowerCase().includes(e.toLowerCase())||fe.name.toLowerCase().includes(e.toLowerCase())).map(fe=>f.jsxs(nn,{className:"p-5 bg-card border-border hover:border-[#0F4C75] transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium mb-1",children:fe.name}),f.jsx("p",{className:"text-xs text-muted-foreground",children:fe.type}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:fe.id})]}),f.jsx(Nn,{variant:"outline",style:{borderColor:ih(fe.status),color:ih(fe.status)},children:fe.status})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[f.jsx("span",{className:"text-muted-foreground",children:"Battery"}),f.jsxs("span",{style:{color:Uv(fe.battery)},children:[fe.battery,"%"]})]}),f.jsx(qg,{value:fe.battery,className:"h-2"})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Dive Hours"}),f.jsxs("p",{className:"font-medium",children:[fe.diveHours,"h"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Total Dives"}),f.jsx("p",{className:"font-medium",children:fe.totalDives})]})]}),f.jsxs("div",{className:"text-xs",children:[f.jsxs("p",{className:"text-muted-foreground",children:["Max Depth: ",fe.maxDepth,"m"]}),f.jsxs("p",{className:"text-muted-foreground",children:["Location: ",fe.location]})]})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>r({...fe,category:"auv"}),children:f.jsx(wu,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>Ae(fe,"auv"),children:f.jsx(Cm,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1 border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>ye(fe.id,"auv"),children:f.jsx(_p,{className:"w-4 h-4"})})]})]},fe.id))})}),f.jsx(Sp,{value:"vehicles",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:_.filter(fe=>fe.id.toLowerCase().includes(e.toLowerCase())||fe.name.toLowerCase().includes(e.toLowerCase())).map(fe=>f.jsxs(nn,{className:"p-5 bg-card border-border hover:border-[#D4E268] transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium mb-1",children:fe.name}),f.jsx("p",{className:"text-xs text-muted-foreground",children:fe.type}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:fe.plate})]}),f.jsx(Nn,{variant:"outline",style:{borderColor:ih(fe.status),color:ih(fe.status)},children:fe.status})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[f.jsx("span",{className:"text-muted-foreground",children:"Fuel Level"}),f.jsxs("span",{style:{color:Uv(fe.fuel)},children:[fe.fuel,"%"]})]}),f.jsx(qg,{value:fe.fuel,className:"h-2"})]}),f.jsx("div",{className:"text-sm",children:f.jsxs("div",{className:"flex justify-between mb-1",children:[f.jsx("p",{className:"text-muted-foreground text-xs",children:"Mileage"}),f.jsxs("p",{className:"font-medium",children:[fe.mileage.toLocaleString()," km"]})]})}),f.jsx("div",{className:"text-xs",children:f.jsxs("p",{className:"text-muted-foreground",children:["Location: ",fe.location]})})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>r({...fe,category:"vehicle"}),children:f.jsx(wu,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>Ae(fe,"vehicles"),children:f.jsx(Cm,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1 border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>ye(fe.id,"vehicle"),children:f.jsx(_p,{className:"w-4 h-4"})})]})]},fe.id))})}),f.jsx(Sp,{value:"accessories",children:f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:A.filter(fe=>fe.id.toLowerCase().includes(e.toLowerCase())||fe.name.toLowerCase().includes(e.toLowerCase())).map(fe=>f.jsxs(nn,{className:"p-5 bg-card border-border hover:border-[#8b5cf6] transition-all",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"font-medium mb-1",children:fe.name}),f.jsx("p",{className:"text-xs text-muted-foreground",children:fe.type}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:fe.id})]}),f.jsxs(Nn,{variant:"outline",style:{borderColor:ih(fe.status),color:ih(fe.status)},children:["Stock: ",fe.quantity]})]}),f.jsxs("div",{className:"space-y-2 text-sm",children:[fe.capacity&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),f.jsx("span",{children:fe.capacity})]}),fe.voltage&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Voltage:"}),f.jsx("span",{children:fe.voltage})]}),fe.cycles&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Avg Cycles:"}),f.jsx("span",{children:fe.cycles})]}),fe.resolution&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Resolution:"}),f.jsx("span",{children:fe.resolution})]}),fe.size&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Size:"}),f.jsx("span",{children:fe.size})]}),fe.output&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Output:"}),f.jsx("span",{children:fe.output})]})]}),f.jsxs("div",{className:"flex gap-2 mt-4",children:[f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>r({...fe,category:"accessory"}),children:f.jsx(wu,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1",onClick:()=>Ae(fe,"accessories"),children:f.jsx(Cm,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"flex-1 border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>ye(fe.id,"accessory"),children:f.jsx(_p,{className:"w-4 h-4"})})]})]},fe.id))})})]}),f.jsx(Fb,{open:!!n,onOpenChange:()=>r(null),children:f.jsx(Bb,{className:"w-full sm:w-[600px] sm:max-w-[600px] overflow-y-auto",children:n&&f.jsxs(f.Fragment,{children:[f.jsxs(AE,{children:[f.jsxs(CE,{className:"flex items-center gap-3",children:[f.jsx("span",{style:{color:"#21A68D"},children:n.name}),f.jsx(Nn,{variant:"outline",style:{borderColor:ih(n.status),color:ih(n.status)},children:n.status})]}),f.jsxs(EE,{children:[n.type," - ",n.id]})]}),f.jsxs("div",{className:"mt-6 space-y-6",children:[f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",style:{color:"#21A68D"},children:"Specifications"}),f.jsxs("div",{className:"space-y-2 text-sm",children:[f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"ID:"}),f.jsx("span",{children:n.id})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Name:"}),f.jsx("span",{children:n.name})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Type:"}),f.jsx("span",{children:n.type})]}),n.serial&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Serial:"}),f.jsx("span",{children:n.serial})]}),n.plate&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Plate Number:"}),f.jsx("span",{children:n.plate})]}),n.quantity!==void 0&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Quantity:"}),f.jsxs("span",{children:[n.quantity," units"]})]})]})]}),(n.battery!==void 0||n.fuel!==void 0)&&f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",style:{color:"#0F4C75"},children:"Performance Metrics"}),f.jsxs("div",{className:"space-y-4",children:[n.battery!==void 0&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-muted-foreground",children:"Battery Level"}),f.jsxs("span",{style:{color:Uv(n.battery)},children:[n.battery,"%"]})]}),f.jsx(qg,{value:n.battery,className:"h-2"})]}),n.fuel!==void 0&&f.jsxs("div",{children:[f.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-muted-foreground",children:"Fuel Level"}),f.jsxs("span",{style:{color:Uv(n.fuel)},children:[n.fuel,"%"]})]}),f.jsx(qg,{value:n.fuel,className:"h-2"})]}),n.flightHours!==void 0&&f.jsx("div",{children:f.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-muted-foreground",children:"Total Flight Hours"}),f.jsxs("span",{children:[n.flightHours,"h"]})]})}),n.diveHours!==void 0&&f.jsx("div",{children:f.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-muted-foreground",children:"Total Dive Hours"}),f.jsxs("span",{children:[n.diveHours,"h"]})]})}),n.mileage!==void 0&&f.jsx("div",{children:f.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[f.jsx("span",{className:"text-muted-foreground",children:"Mileage"}),f.jsxs("span",{children:[n.mileage.toLocaleString()," km"]})]})})]})]}),f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",children:"Additional Information"}),f.jsxs("div",{className:"space-y-2 text-sm",children:[n.maxDepth&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Max Depth:"}),f.jsxs("span",{children:[n.maxDepth,"m"]})]}),n.capacity&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Capacity:"}),f.jsx("span",{children:n.capacity})]}),n.resolution&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Resolution:"}),f.jsx("span",{children:n.resolution})]}),n.material&&f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Material:"}),f.jsx("span",{children:n.material})]}),f.jsxs("div",{className:"flex justify-between",children:[f.jsx("span",{className:"text-muted-foreground",children:"Location:"}),f.jsx("span",{children:n.location})]})]})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsxs(en,{className:"flex-1 bg-[#21A68D] hover:bg-[#1a8a72]",children:[f.jsx(ZZ,{className:"w-4 h-4 mr-2"}),"Schedule Service"]}),f.jsx(en,{variant:"outline",className:"flex-1",children:"Export Report"})]})]})]})})}),f.jsx(ff,{open:N,onOpenChange:z,children:f.jsxs(pf,{className:"w-full sm:w-[600px] sm:max-w-[600px] overflow-y-auto",children:[f.jsxs(Ep,{children:[f.jsx(mf,{children:"Add New Asset"}),f.jsx(gf,{children:"Add a new asset to the inventory."})]}),f.jsxs("div",{className:"mt-6 space-y-6",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Name"}),f.jsx(xa,{type:"text",value:ne.name,onChange:fe=>H({...ne,name:fe.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Type"}),f.jsx(xa,{type:"text",value:ne.type,onChange:fe=>H({...ne,type:fe.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Status"}),f.jsxs(Gm,{value:ne.status,onValueChange:fe=>H({...ne,status:fe}),children:[f.jsx(Hm,{className:"bg-input",children:f.jsx(Wm,{placeholder:"Select status",children:ne.status})}),f.jsxs(Zm,{children:[f.jsx(Ir,{value:"available",children:"Available"}),f.jsx(Ir,{value:"in-flight",children:"In-Flight"}),f.jsx(Ir,{value:"in-use",children:"In-Use"}),f.jsx(Ir,{value:"maintenance",children:"Maintenance"}),f.jsx(Ir,{value:"charging",children:"Charging"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Battery Level"}),f.jsx(xa,{type:"number",value:ne.battery,onChange:fe=>H({...ne,battery:parseInt(fe.target.value)}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Location"}),f.jsx(xa,{type:"text",value:ne.location,onChange:fe=>H({...ne,location:fe.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Serial Number"}),f.jsx(xa,{type:"text",value:ne.serial,onChange:fe=>H({...ne,serial:fe.target.value}),className:"bg-input"})]})]}),f.jsx(gM,{className:"hidden"}),f.jsxs("div",{className:"mt-6 flex gap-3",children:[f.jsx(en,{size:"sm",variant:"outline",className:"w-full",onClick:()=>z(!1),children:"Cancel"}),f.jsx(en,{size:"sm",className:"w-full bg-[#21A68D] hover:bg-[#1a8a72]",onClick:ae,children:"Add Asset"})]})]})}),f.jsx(ff,{open:q,onOpenChange:$,children:f.jsxs(pf,{className:"w-full sm:w-[600px] sm:max-w-[600px]",children:[f.jsxs(Ep,{children:[f.jsx(mf,{children:"Edit Asset"}),f.jsx(gf,{children:"Edit the asset details."})]}),f.jsxs("div",{className:"mt-6 space-y-4 max-h-[60vh] overflow-y-auto",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Name"}),f.jsx(xa,{type:"text",value:ne.name,onChange:fe=>H({...ne,name:fe.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Type"}),f.jsx(xa,{type:"text",value:ne.type,onChange:fe=>H({...ne,type:fe.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Status"}),f.jsxs(Gm,{value:ne.status,onValueChange:fe=>H({...ne,status:fe}),children:[f.jsx(Hm,{className:"bg-input",children:f.jsx(Wm,{placeholder:"Select status",children:ne.status})}),f.jsxs(Zm,{children:[f.jsx(Ir,{value:"available",children:"Available"}),f.jsx(Ir,{value:"in-flight",children:"In-Flight"}),f.jsx(Ir,{value:"in-use",children:"In-Use"}),f.jsx(Ir,{value:"maintenance",children:"Maintenance"}),f.jsx(Ir,{value:"charging",children:"Charging"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Battery Level"}),f.jsx(xa,{type:"number",value:ne.battery,onChange:fe=>H({...ne,battery:parseInt(fe.target.value)||0}),className:"bg-input",min:"0",max:"100"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Location"}),f.jsx(xa,{type:"text",value:ne.location,onChange:fe=>H({...ne,location:fe.target.value}),className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Serial Number"}),f.jsx(xa,{type:"text",value:ne.serial,onChange:fe=>H({...ne,serial:fe.target.value}),className:"bg-input"})]})]}),f.jsxs("div",{className:"mt-6 flex gap-3",children:[f.jsx(en,{variant:"outline",className:"flex-1",onClick:()=>$(!1),children:"Cancel"}),f.jsx(en,{className:"flex-1 bg-[#21A68D] hover:bg-[#1a8a72]",onClick:de,children:"Save Changes"})]})]})})]})}var ES,_R;function Hl(){if(_R)return ES;_R=1;var e=Array.isArray;return ES=e,ES}var jS,bR;function cU(){if(bR)return jS;bR=1;var e=typeof w_=="object"&&w_&&w_.Object===Object&&w_;return jS=e,jS}var MS,wR;function Sh(){if(wR)return MS;wR=1;var e=cU(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return MS=n,MS}var kS,SR;function S0(){if(SR)return kS;SR=1;var e=Sh(),t=e.Symbol;return kS=t,kS}var IS,TR;function Woe(){if(TR)return IS;TR=1;var e=S0(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,s=e?e.toStringTag:void 0;function h(d){var o=n.call(d,s),_=d[s];try{d[s]=void 0;var w=!0}catch{}var A=r.call(d);return w&&(o?d[s]=_:delete d[s]),A}return IS=h,IS}var NS,PR;function Hoe(){if(PR)return NS;PR=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return NS=n,NS}var DS,AR;function Tf(){if(AR)return DS;AR=1;var e=S0(),t=Woe(),n=Hoe(),r="[object Null]",s="[object Undefined]",h=e?e.toStringTag:void 0;function d(o){return o==null?o===void 0?s:r:h&&h in Object(o)?t(o):n(o)}return DS=d,DS}var OS,CR;function Pf(){if(CR)return OS;CR=1;function e(t){return t!=null&&typeof t=="object"}return OS=e,OS}var RS,ER;function ev(){if(ER)return RS;ER=1;var e=Tf(),t=Pf(),n="[object Symbol]";function r(s){return typeof s=="symbol"||t(s)&&e(s)==n}return RS=r,RS}var LS,jR;function mk(){if(jR)return LS;jR=1;var e=Hl(),t=ev(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function s(h,d){if(e(h))return!1;var o=typeof h;return o=="number"||o=="symbol"||o=="boolean"||h==null||t(h)?!0:r.test(h)||!n.test(h)||d!=null&&h in Object(d)}return LS=s,LS}var zS,MR;function Rp(){if(MR)return zS;MR=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return zS=e,zS}var FS,kR;function gk(){if(kR)return FS;kR=1;var e=Tf(),t=Rp(),n="[object AsyncFunction]",r="[object Function]",s="[object GeneratorFunction]",h="[object Proxy]";function d(o){if(!t(o))return!1;var _=e(o);return _==r||_==s||_==n||_==h}return FS=d,FS}var BS,IR;function Zoe(){if(IR)return BS;IR=1;var e=Sh(),t=e["__core-js_shared__"];return BS=t,BS}var $S,NR;function Koe(){if(NR)return $S;NR=1;var e=Zoe(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return $S=n,$S}var VS,DR;function uU(){if(DR)return VS;DR=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return VS=n,VS}var US,OR;function Xoe(){if(OR)return US;OR=1;var e=gk(),t=Koe(),n=Rp(),r=uU(),s=/[\\^$.*+?()[\]{}|]/g,h=/^\[object .+?Constructor\]$/,d=Function.prototype,o=Object.prototype,_=d.toString,w=o.hasOwnProperty,A=RegExp("^"+_.call(w).replace(s,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function P(N){if(!n(N)||t(N))return!1;var z=e(N)?A:h;return z.test(r(N))}return US=P,US}var qS,RR;function Yoe(){if(RR)return qS;RR=1;function e(t,n){return t?.[n]}return qS=e,qS}var GS,LR;function ng(){if(LR)return GS;LR=1;var e=Xoe(),t=Yoe();function n(r,s){var h=t(r,s);return e(h)?h:void 0}return GS=n,GS}var WS,zR;function dw(){if(zR)return WS;zR=1;var e=ng(),t=e(Object,"create");return WS=t,WS}var HS,FR;function Joe(){if(FR)return HS;FR=1;var e=dw();function t(){this.__data__=e?e(null):{},this.size=0}return HS=t,HS}var ZS,BR;function Qoe(){if(BR)return ZS;BR=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return ZS=e,ZS}var KS,$R;function ese(){if($R)return KS;$R=1;var e=dw(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function s(h){var d=this.__data__;if(e){var o=d[h];return o===t?void 0:o}return r.call(d,h)?d[h]:void 0}return KS=s,KS}var XS,VR;function tse(){if(VR)return XS;VR=1;var e=dw(),t=Object.prototype,n=t.hasOwnProperty;function r(s){var h=this.__data__;return e?h[s]!==void 0:n.call(h,s)}return XS=r,XS}var YS,UR;function nse(){if(UR)return YS;UR=1;var e=dw(),t="__lodash_hash_undefined__";function n(r,s){var h=this.__data__;return this.size+=this.has(r)?0:1,h[r]=e&&s===void 0?t:s,this}return YS=n,YS}var JS,qR;function rse(){if(qR)return JS;qR=1;var e=Joe(),t=Qoe(),n=ese(),r=tse(),s=nse();function h(d){var o=-1,_=d==null?0:d.length;for(this.clear();++o<_;){var w=d[o];this.set(w[0],w[1])}}return h.prototype.clear=e,h.prototype.delete=t,h.prototype.get=n,h.prototype.has=r,h.prototype.set=s,JS=h,JS}var QS,GR;function ise(){if(GR)return QS;GR=1;function e(){this.__data__=[],this.size=0}return QS=e,QS}var eT,WR;function yk(){if(WR)return eT;WR=1;function e(t,n){return t===n||t!==t&&n!==n}return eT=e,eT}var tT,HR;function hw(){if(HR)return tT;HR=1;var e=yk();function t(n,r){for(var s=n.length;s--;)if(e(n[s][0],r))return s;return-1}return tT=t,tT}var nT,ZR;function ase(){if(ZR)return nT;ZR=1;var e=hw(),t=Array.prototype,n=t.splice;function r(s){var h=this.__data__,d=e(h,s);if(d<0)return!1;var o=h.length-1;return d==o?h.pop():n.call(h,d,1),--this.size,!0}return nT=r,nT}var rT,KR;function ose(){if(KR)return rT;KR=1;var e=hw();function t(n){var r=this.__data__,s=e(r,n);return s<0?void 0:r[s][1]}return rT=t,rT}var iT,XR;function sse(){if(XR)return iT;XR=1;var e=hw();function t(n){return e(this.__data__,n)>-1}return iT=t,iT}var aT,YR;function lse(){if(YR)return aT;YR=1;var e=hw();function t(n,r){var s=this.__data__,h=e(s,n);return h<0?(++this.size,s.push([n,r])):s[h][1]=r,this}return aT=t,aT}var oT,JR;function fw(){if(JR)return oT;JR=1;var e=ise(),t=ase(),n=ose(),r=sse(),s=lse();function h(d){var o=-1,_=d==null?0:d.length;for(this.clear();++o<_;){var w=d[o];this.set(w[0],w[1])}}return h.prototype.clear=e,h.prototype.delete=t,h.prototype.get=n,h.prototype.has=r,h.prototype.set=s,oT=h,oT}var sT,QR;function vk(){if(QR)return sT;QR=1;var e=ng(),t=Sh(),n=e(t,"Map");return sT=n,sT}var lT,e5;function cse(){if(e5)return lT;e5=1;var e=rse(),t=fw(),n=vk();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return lT=r,lT}var cT,t5;function use(){if(t5)return cT;t5=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return cT=e,cT}var uT,n5;function pw(){if(n5)return uT;n5=1;var e=use();function t(n,r){var s=n.__data__;return e(r)?s[typeof r=="string"?"string":"hash"]:s.map}return uT=t,uT}var dT,r5;function dse(){if(r5)return dT;r5=1;var e=pw();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return dT=t,dT}var hT,i5;function hse(){if(i5)return hT;i5=1;var e=pw();function t(n){return e(this,n).get(n)}return hT=t,hT}var fT,a5;function fse(){if(a5)return fT;a5=1;var e=pw();function t(n){return e(this,n).has(n)}return fT=t,fT}var pT,o5;function pse(){if(o5)return pT;o5=1;var e=pw();function t(n,r){var s=e(this,n),h=s.size;return s.set(n,r),this.size+=s.size==h?0:1,this}return pT=t,pT}var mT,s5;function xk(){if(s5)return mT;s5=1;var e=cse(),t=dse(),n=hse(),r=fse(),s=pse();function h(d){var o=-1,_=d==null?0:d.length;for(this.clear();++o<_;){var w=d[o];this.set(w[0],w[1])}}return h.prototype.clear=e,h.prototype.delete=t,h.prototype.get=n,h.prototype.has=r,h.prototype.set=s,mT=h,mT}var gT,l5;function dU(){if(l5)return gT;l5=1;var e=xk(),t="Expected a function";function n(r,s){if(typeof r!="function"||s!=null&&typeof s!="function")throw new TypeError(t);var h=function(){var d=arguments,o=s?s.apply(this,d):d[0],_=h.cache;if(_.has(o))return _.get(o);var w=r.apply(this,d);return h.cache=_.set(o,w)||_,w};return h.cache=new(n.Cache||e),h}return n.Cache=e,gT=n,gT}var yT,c5;function mse(){if(c5)return yT;c5=1;var e=dU(),t=500;function n(r){var s=e(r,function(d){return h.size===t&&h.clear(),d}),h=s.cache;return s}return yT=n,yT}var vT,u5;function gse(){if(u5)return vT;u5=1;var e=mse(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(s){var h=[];return s.charCodeAt(0)===46&&h.push(""),s.replace(t,function(d,o,_,w){h.push(_?w.replace(n,"$1"):o||d)}),h});return vT=r,vT}var xT,d5;function _k(){if(d5)return xT;d5=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,h=Array(s);++r<s;)h[r]=n(t[r],r,t);return h}return xT=e,xT}var _T,h5;function yse(){if(h5)return _T;h5=1;var e=S0(),t=_k(),n=Hl(),r=ev(),s=e?e.prototype:void 0,h=s?s.toString:void 0;function d(o){if(typeof o=="string")return o;if(n(o))return t(o,d)+"";if(r(o))return h?h.call(o):"";var _=o+"";return _=="0"&&1/o==-1/0?"-0":_}return _T=d,_T}var bT,f5;function hU(){if(f5)return bT;f5=1;var e=yse();function t(n){return n==null?"":e(n)}return bT=t,bT}var wT,p5;function fU(){if(p5)return wT;p5=1;var e=Hl(),t=mk(),n=gse(),r=hU();function s(h,d){return e(h)?h:t(h,d)?[h]:n(r(h))}return wT=s,wT}var ST,m5;function mw(){if(m5)return ST;m5=1;var e=ev();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return ST=t,ST}var TT,g5;function bk(){if(g5)return TT;g5=1;var e=fU(),t=mw();function n(r,s){s=e(s,r);for(var h=0,d=s.length;r!=null&&h<d;)r=r[t(s[h++])];return h&&h==d?r:void 0}return TT=n,TT}var PT,y5;function pU(){if(y5)return PT;y5=1;var e=bk();function t(n,r,s){var h=n==null?void 0:e(n,r);return h===void 0?s:h}return PT=t,PT}var vse=pU();const zc=Kr(vse);var AT,v5;function xse(){if(v5)return AT;v5=1;function e(t){return t==null}return AT=e,AT}var _se=xse();const lr=Kr(_se);var CT,x5;function bse(){if(x5)return CT;x5=1;var e=Tf(),t=Hl(),n=Pf(),r="[object String]";function s(h){return typeof h=="string"||!t(h)&&n(h)&&e(h)==r}return CT=s,CT}var wse=bse();const Km=Kr(wse);var Sse=gk();const Xn=Kr(Sse);var Tse=Rp();const tv=Kr(Tse);var ET={exports:{}},di={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5;function Pse(){if(_5)return di;_5=1;var e=Symbol.for("react.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),h=Symbol.for("react.provider"),d=Symbol.for("react.context"),o=Symbol.for("react.server_context"),_=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),A=Symbol.for("react.suspense_list"),P=Symbol.for("react.memo"),N=Symbol.for("react.lazy"),z=Symbol.for("react.offscreen"),q;q=Symbol.for("react.module.reference");function $(O){if(typeof O=="object"&&O!==null){var X=O.$$typeof;switch(X){case e:switch(O=O.type,O){case n:case s:case r:case w:case A:return O;default:switch(O=O&&O.$$typeof,O){case o:case d:case _:case N:case P:case h:return O;default:return X}}case t:return X}}}return di.ContextConsumer=d,di.ContextProvider=h,di.Element=e,di.ForwardRef=_,di.Fragment=n,di.Lazy=N,di.Memo=P,di.Portal=t,di.Profiler=s,di.StrictMode=r,di.Suspense=w,di.SuspenseList=A,di.isAsyncMode=function(){return!1},di.isConcurrentMode=function(){return!1},di.isContextConsumer=function(O){return $(O)===d},di.isContextProvider=function(O){return $(O)===h},di.isElement=function(O){return typeof O=="object"&&O!==null&&O.$$typeof===e},di.isForwardRef=function(O){return $(O)===_},di.isFragment=function(O){return $(O)===n},di.isLazy=function(O){return $(O)===N},di.isMemo=function(O){return $(O)===P},di.isPortal=function(O){return $(O)===t},di.isProfiler=function(O){return $(O)===s},di.isStrictMode=function(O){return $(O)===r},di.isSuspense=function(O){return $(O)===w},di.isSuspenseList=function(O){return $(O)===A},di.isValidElementType=function(O){return typeof O=="string"||typeof O=="function"||O===n||O===s||O===r||O===w||O===A||O===z||typeof O=="object"&&O!==null&&(O.$$typeof===N||O.$$typeof===P||O.$$typeof===h||O.$$typeof===d||O.$$typeof===_||O.$$typeof===q||O.getModuleId!==void 0)},di.typeOf=$,di}var b5;function Ase(){return b5||(b5=1,ET.exports=Pse()),ET.exports}var Cse=Ase(),jT,w5;function mU(){if(w5)return jT;w5=1;var e=Tf(),t=Pf(),n="[object Number]";function r(s){return typeof s=="number"||t(s)&&e(s)==n}return jT=r,jT}var MT,S5;function Ese(){if(S5)return MT;S5=1;var e=mU();function t(n){return e(n)&&n!=+n}return MT=t,MT}var jse=Ese();const nv=Kr(jse);var Mse=mU();const kse=Kr(Mse);var ol=function(t){return t===0?0:t>0?1:-1},Mm=function(t){return Km(t)&&t.indexOf("%")===t.length-1},Qt=function(t){return kse(t)&&!nv(t)},Ise=function(t){return lr(t)},xo=function(t){return Qt(t)||Km(t)},Nse=0,rg=function(t){var n=++Nse;return"".concat(t||"").concat(n)},sl=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,s=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!Qt(t)&&!Km(t))return r;var h;if(Mm(t)){var d=t.indexOf("%");h=n*parseFloat(t.slice(0,d))/100}else h=+t;return nv(h)&&(h=r),s&&h>n&&(h=n),h},xp=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},Dse=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,r={},s=0;s<n;s++)if(!r[t[s]])r[t[s]]=!0;else return!0;return!1},vo=function(t,n){return Qt(t)&&Qt(n)?function(r){return t+r*(n-t)}:function(){return n}};function $b(e,t,n){return!e||!e.length?null:e.find(function(r){return r&&(typeof t=="function"?t(r):zc(r,t))===n})}var Ose=function(t,n){return Qt(t)&&Qt(n)?t-n:Km(t)&&Km(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function oy(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var r in t)if({}.hasOwnProperty.call(t,r)&&!{}.hasOwnProperty.call(e,r))return!1;return!0}function jE(e){"@babel/helpers - typeof";return jE=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jE(e)}var Rse=["viewBox","children"],Lse=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],T5=["points","pathLength"],kT={svg:Rse,polygon:T5,polyline:T5},wk=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Vb=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var r=t;if(W.isValidElement(t)&&(r=t.props),!tv(r))return null;var s={};return Object.keys(r).forEach(function(h){wk.includes(h)&&(s[h]=n||function(d){return r[h](r,d)})}),s},zse=function(t,n,r){return function(s){return t(n,r,s),null}},Xm=function(t,n,r){if(!tv(t)||jE(t)!=="object")return null;var s=null;return Object.keys(t).forEach(function(h){var d=t[h];wk.includes(h)&&typeof d=="function"&&(s||(s={}),s[h]=zse(d,n,r))}),s},Fse=["children"],Bse=["children"];function P5(e,t){if(e==null)return{};var n=$se(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function $se(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function ME(e){"@babel/helpers - typeof";return ME=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ME(e)}var A5={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},df=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},C5=null,IT=null,Sk=function e(t){if(t===C5&&Array.isArray(IT))return IT;var n=[];return W.Children.forEach(t,function(r){lr(r)||(Cse.isFragment(r)?n=n.concat(e(r.props.children)):n.push(r))}),IT=n,C5=t,n};function Fc(e,t){var n=[],r=[];return Array.isArray(t)?r=t.map(function(s){return df(s)}):r=[df(t)],Sk(e).forEach(function(s){var h=zc(s,"type.displayName")||zc(s,"type.name");r.indexOf(h)!==-1&&n.push(s)}),n}function Nc(e,t){var n=Fc(e,t);return n&&n[0]}var E5=function(t){if(!t||!t.props)return!1;var n=t.props,r=n.width,s=n.height;return!(!Qt(r)||r<=0||!Qt(s)||s<=0)},Vse=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],Use=function(t){return t&&t.type&&Km(t.type)&&Vse.indexOf(t.type)>=0},gU=function(t){return t&&ME(t)==="object"&&"clipDot"in t},qse=function(t,n,r,s){var h,d=(h=kT?.[s])!==null&&h!==void 0?h:[];return n.startsWith("data-")||!Xn(t)&&(s&&d.includes(n)||Lse.includes(n))||r&&wk.includes(n)},Dn=function(t,n,r){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(W.isValidElement(t)&&(s=t.props),!tv(s))return null;var h={};return Object.keys(s).forEach(function(d){var o;qse((o=s)===null||o===void 0?void 0:o[d],d,n,r)&&(h[d]=s[d])}),h},kE=function e(t,n){if(t===n)return!0;var r=W.Children.count(t);if(r!==W.Children.count(n))return!1;if(r===0)return!0;if(r===1)return j5(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var s=0;s<r;s++){var h=t[s],d=n[s];if(Array.isArray(h)||Array.isArray(d)){if(!e(h,d))return!1}else if(!j5(h,d))return!1}return!0},j5=function(t,n){if(lr(t)&&lr(n))return!0;if(!lr(t)&&!lr(n)){var r=t.props||{},s=r.children,h=P5(r,Fse),d=n.props||{},o=d.children,_=P5(d,Bse);return s&&o?oy(h,_)&&kE(s,o):!s&&!o?oy(h,_):!1}return!1},M5=function(t,n){var r=[],s={};return Sk(t).forEach(function(h,d){if(Use(h))r.push(h);else if(h){var o=df(h.type),_=n[o]||{},w=_.handler,A=_.once;if(w&&(!A||!s[o])){var P=w(h,o,d);r.push(P),s[o]=!0}}}),r},Gse=function(t){var n=t&&t.type;return n&&A5[n]?A5[n]:null},Wse=function(t,n){return Sk(n).indexOf(t)},Hse=["children","width","height","viewBox","className","style","title","desc"];function IE(){return IE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},IE.apply(this,arguments)}function Zse(e,t){if(e==null)return{};var n=Kse(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Kse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function NE(e){var t=e.children,n=e.width,r=e.height,s=e.viewBox,h=e.className,d=e.style,o=e.title,_=e.desc,w=Zse(e,Hse),A=s||{width:n,height:r,x:0,y:0},P=dr("recharts-surface",h);return je.createElement("svg",IE({},Dn(w,!0,"svg"),{className:P,width:n,height:r,style:d,viewBox:"".concat(A.x," ").concat(A.y," ").concat(A.width," ").concat(A.height)}),je.createElement("title",null,o),je.createElement("desc",null,_),t)}var Xse=["children","className"];function DE(){return DE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},DE.apply(this,arguments)}function Yse(e,t){if(e==null)return{};var n=Jse(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Jse(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Tr=je.forwardRef(function(e,t){var n=e.children,r=e.className,s=Yse(e,Xse),h=dr("recharts-layer",r);return je.createElement("g",DE({className:h},Dn(s,!0),{ref:t}),n)}),_d=function(t,n){for(var r=arguments.length,s=new Array(r>2?r-2:0),h=2;h<r;h++)s[h-2]=arguments[h]},NT,k5;function Qse(){if(k5)return NT;k5=1;function e(t,n,r){var s=-1,h=t.length;n<0&&(n=-n>h?0:h+n),r=r>h?h:r,r<0&&(r+=h),h=n>r?0:r-n>>>0,n>>>=0;for(var d=Array(h);++s<h;)d[s]=t[s+n];return d}return NT=e,NT}var DT,I5;function ele(){if(I5)return DT;I5=1;var e=Qse();function t(n,r,s){var h=n.length;return s=s===void 0?h:s,!r&&s>=h?n:e(n,r,s)}return DT=t,DT}var OT,N5;function yU(){if(N5)return OT;N5=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=t+n+r,h="\\ufe0e\\ufe0f",d="\\u200d",o=RegExp("["+d+e+s+h+"]");function _(w){return o.test(w)}return OT=_,OT}var RT,D5;function tle(){if(D5)return RT;D5=1;function e(t){return t.split("")}return RT=e,RT}var LT,O5;function nle(){if(O5)return LT;O5=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",s=t+n+r,h="\\ufe0e\\ufe0f",d="["+e+"]",o="["+s+"]",_="\\ud83c[\\udffb-\\udfff]",w="(?:"+o+"|"+_+")",A="[^"+e+"]",P="(?:\\ud83c[\\udde6-\\uddff]){2}",N="[\\ud800-\\udbff][\\udc00-\\udfff]",z="\\u200d",q=w+"?",$="["+h+"]?",O="(?:"+z+"(?:"+[A,P,N].join("|")+")"+$+q+")*",X=$+q+O,K="(?:"+[A+o+"?",o,P,N,d].join("|")+")",te=RegExp(_+"(?="+_+")|"+K+X,"g");function ne(H){return H.match(te)||[]}return LT=ne,LT}var zT,R5;function rle(){if(R5)return zT;R5=1;var e=tle(),t=yU(),n=nle();function r(s){return t(s)?n(s):e(s)}return zT=r,zT}var FT,L5;function ile(){if(L5)return FT;L5=1;var e=ele(),t=yU(),n=rle(),r=hU();function s(h){return function(d){d=r(d);var o=t(d)?n(d):void 0,_=o?o[0]:d.charAt(0),w=o?e(o,1).join(""):d.slice(1);return _[h]()+w}}return FT=s,FT}var BT,z5;function ale(){if(z5)return BT;z5=1;var e=ile(),t=e("toUpperCase");return BT=t,BT}var ole=ale();const gw=Kr(ole);function ki(e){return function(){return e}}const vU=Math.cos,Ub=Math.sin,Cd=Math.sqrt,qb=Math.PI,yw=2*qb,OE=Math.PI,RE=2*OE,Sm=1e-6,sle=RE-Sm;function xU(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function lle(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return xU;const n=10**t;return function(r){this._+=r[0];for(let s=1,h=r.length;s<h;++s)this._+=Math.round(arguments[s]*n)/n+r[s]}}class cle{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?xU:lle(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,r,s){this._append`Q${+t},${+n},${this._x1=+r},${this._y1=+s}`}bezierCurveTo(t,n,r,s,h,d){this._append`C${+t},${+n},${+r},${+s},${this._x1=+h},${this._y1=+d}`}arcTo(t,n,r,s,h){if(t=+t,n=+n,r=+r,s=+s,h=+h,h<0)throw new Error(`negative radius: ${h}`);let d=this._x1,o=this._y1,_=r-t,w=s-n,A=d-t,P=o-n,N=A*A+P*P;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(N>Sm)if(!(Math.abs(P*_-w*A)>Sm)||!h)this._append`L${this._x1=t},${this._y1=n}`;else{let z=r-d,q=s-o,$=_*_+w*w,O=z*z+q*q,X=Math.sqrt($),K=Math.sqrt(N),te=h*Math.tan((OE-Math.acos(($+N-O)/(2*X*K)))/2),ne=te/K,H=te/X;Math.abs(ne-1)>Sm&&this._append`L${t+ne*A},${n+ne*P}`,this._append`A${h},${h},0,0,${+(P*z>A*q)},${this._x1=t+H*_},${this._y1=n+H*w}`}}arc(t,n,r,s,h,d){if(t=+t,n=+n,r=+r,d=!!d,r<0)throw new Error(`negative radius: ${r}`);let o=r*Math.cos(s),_=r*Math.sin(s),w=t+o,A=n+_,P=1^d,N=d?s-h:h-s;this._x1===null?this._append`M${w},${A}`:(Math.abs(this._x1-w)>Sm||Math.abs(this._y1-A)>Sm)&&this._append`L${w},${A}`,r&&(N<0&&(N=N%RE+RE),N>sle?this._append`A${r},${r},0,1,${P},${t-o},${n-_}A${r},${r},0,1,${P},${this._x1=w},${this._y1=A}`:N>Sm&&this._append`A${r},${r},0,${+(N>=OE)},${P},${this._x1=t+r*Math.cos(h)},${this._y1=n+r*Math.sin(h)}`)}rect(t,n,r,s){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${r=+r}v${+s}h${-r}Z`}toString(){return this._}}function Tk(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const r=Math.floor(n);if(!(r>=0))throw new RangeError(`invalid digits: ${n}`);t=r}return e},()=>new cle(t)}function Pk(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _U(e){this._context=e}_U.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function vw(e){return new _U(e)}function bU(e){return e[0]}function wU(e){return e[1]}function SU(e,t){var n=ki(!0),r=null,s=vw,h=null,d=Tk(o);e=typeof e=="function"?e:e===void 0?bU:ki(e),t=typeof t=="function"?t:t===void 0?wU:ki(t);function o(_){var w,A=(_=Pk(_)).length,P,N=!1,z;for(r==null&&(h=s(z=d())),w=0;w<=A;++w)!(w<A&&n(P=_[w],w,_))===N&&((N=!N)?h.lineStart():h.lineEnd()),N&&h.point(+e(P,w,_),+t(P,w,_));if(z)return h=null,z+""||null}return o.x=function(_){return arguments.length?(e=typeof _=="function"?_:ki(+_),o):e},o.y=function(_){return arguments.length?(t=typeof _=="function"?_:ki(+_),o):t},o.defined=function(_){return arguments.length?(n=typeof _=="function"?_:ki(!!_),o):n},o.curve=function(_){return arguments.length?(s=_,r!=null&&(h=s(r)),o):s},o.context=function(_){return arguments.length?(_==null?r=h=null:h=s(r=_),o):r},o}function $_(e,t,n){var r=null,s=ki(!0),h=null,d=vw,o=null,_=Tk(w);e=typeof e=="function"?e:e===void 0?bU:ki(+e),t=typeof t=="function"?t:ki(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?wU:ki(+n);function w(P){var N,z,q,$=(P=Pk(P)).length,O,X=!1,K,te=new Array($),ne=new Array($);for(h==null&&(o=d(K=_())),N=0;N<=$;++N){if(!(N<$&&s(O=P[N],N,P))===X)if(X=!X)z=N,o.areaStart(),o.lineStart();else{for(o.lineEnd(),o.lineStart(),q=N-1;q>=z;--q)o.point(te[q],ne[q]);o.lineEnd(),o.areaEnd()}X&&(te[N]=+e(O,N,P),ne[N]=+t(O,N,P),o.point(r?+r(O,N,P):te[N],n?+n(O,N,P):ne[N]))}if(K)return o=null,K+""||null}function A(){return SU().defined(s).curve(d).context(h)}return w.x=function(P){return arguments.length?(e=typeof P=="function"?P:ki(+P),r=null,w):e},w.x0=function(P){return arguments.length?(e=typeof P=="function"?P:ki(+P),w):e},w.x1=function(P){return arguments.length?(r=P==null?null:typeof P=="function"?P:ki(+P),w):r},w.y=function(P){return arguments.length?(t=typeof P=="function"?P:ki(+P),n=null,w):t},w.y0=function(P){return arguments.length?(t=typeof P=="function"?P:ki(+P),w):t},w.y1=function(P){return arguments.length?(n=P==null?null:typeof P=="function"?P:ki(+P),w):n},w.lineX0=w.lineY0=function(){return A().x(e).y(t)},w.lineY1=function(){return A().x(e).y(n)},w.lineX1=function(){return A().x(r).y(t)},w.defined=function(P){return arguments.length?(s=typeof P=="function"?P:ki(!!P),w):s},w.curve=function(P){return arguments.length?(d=P,h!=null&&(o=d(h)),w):d},w.context=function(P){return arguments.length?(P==null?h=o=null:o=d(h=P),w):h},w}class TU{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function ule(e){return new TU(e,!0)}function dle(e){return new TU(e,!1)}const Ak={draw(e,t){const n=Cd(t/qb);e.moveTo(n,0),e.arc(0,0,n,0,yw)}},hle={draw(e,t){const n=Cd(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},PU=Cd(1/3),fle=PU*2,ple={draw(e,t){const n=Cd(t/fle),r=n*PU;e.moveTo(0,-n),e.lineTo(r,0),e.lineTo(0,n),e.lineTo(-r,0),e.closePath()}},mle={draw(e,t){const n=Cd(t),r=-n/2;e.rect(r,r,n,n)}},gle=.8908130915292852,AU=Ub(qb/10)/Ub(7*qb/10),yle=Ub(yw/10)*AU,vle=-vU(yw/10)*AU,xle={draw(e,t){const n=Cd(t*gle),r=yle*n,s=vle*n;e.moveTo(0,-n),e.lineTo(r,s);for(let h=1;h<5;++h){const d=yw*h/5,o=vU(d),_=Ub(d);e.lineTo(_*n,-o*n),e.lineTo(o*r-_*s,_*r+o*s)}e.closePath()}},$T=Cd(3),_le={draw(e,t){const n=-Cd(t/($T*3));e.moveTo(0,n*2),e.lineTo(-$T*n,-n),e.lineTo($T*n,-n),e.closePath()}},gu=-.5,yu=Cd(3)/2,LE=1/Cd(12),ble=(LE/2+1)*3,wle={draw(e,t){const n=Cd(t/ble),r=n/2,s=n*LE,h=r,d=n*LE+n,o=-h,_=d;e.moveTo(r,s),e.lineTo(h,d),e.lineTo(o,_),e.lineTo(gu*r-yu*s,yu*r+gu*s),e.lineTo(gu*h-yu*d,yu*h+gu*d),e.lineTo(gu*o-yu*_,yu*o+gu*_),e.lineTo(gu*r+yu*s,gu*s-yu*r),e.lineTo(gu*h+yu*d,gu*d-yu*h),e.lineTo(gu*o+yu*_,gu*_-yu*o),e.closePath()}};function Sle(e,t){let n=null,r=Tk(s);e=typeof e=="function"?e:ki(e||Ak),t=typeof t=="function"?t:ki(t===void 0?64:+t);function s(){let h;if(n||(n=h=r()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),h)return n=null,h+""||null}return s.type=function(h){return arguments.length?(e=typeof h=="function"?h:ki(h),s):e},s.size=function(h){return arguments.length?(t=typeof h=="function"?h:ki(+h),s):t},s.context=function(h){return arguments.length?(n=h??null,s):n},s}function Gb(){}function Wb(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function CU(e){this._context=e}CU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wb(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Tle(e){return new CU(e)}function EU(e){this._context=e}EU.prototype={areaStart:Gb,areaEnd:Gb,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:Wb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ple(e){return new EU(e)}function jU(e){this._context=e}jU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,r=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Wb(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function Ale(e){return new jU(e)}function MU(e){this._context=e}MU.prototype={areaStart:Gb,areaEnd:Gb,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function Cle(e){return new MU(e)}function F5(e){return e<0?-1:1}function B5(e,t,n){var r=e._x1-e._x0,s=t-e._x1,h=(e._y1-e._y0)/(r||s<0&&-0),d=(n-e._y1)/(s||r<0&&-0),o=(h*s+d*r)/(r+s);return(F5(h)+F5(d))*Math.min(Math.abs(h),Math.abs(d),.5*Math.abs(o))||0}function $5(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function VT(e,t,n){var r=e._x0,s=e._y0,h=e._x1,d=e._y1,o=(h-r)/3;e._context.bezierCurveTo(r+o,s+o*t,h-o,d-o*n,h,d)}function Hb(e){this._context=e}Hb.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:VT(this,this._t0,$5(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,VT(this,$5(this,n=B5(this,e,t)),n);break;default:VT(this,this._t0,n=B5(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function kU(e){this._context=new IU(e)}(kU.prototype=Object.create(Hb.prototype)).point=function(e,t){Hb.prototype.point.call(this,t,e)};function IU(e){this._context=e}IU.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,r,s,h){this._context.bezierCurveTo(t,e,r,n,h,s)}};function Ele(e){return new Hb(e)}function jle(e){return new kU(e)}function NU(e){this._context=e}NU.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var r=V5(e),s=V5(t),h=0,d=1;d<n;++h,++d)this._context.bezierCurveTo(r[0][h],s[0][h],r[1][h],s[1][h],e[d],t[d]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function V5(e){var t,n=e.length-1,r,s=new Array(n),h=new Array(n),d=new Array(n);for(s[0]=0,h[0]=2,d[0]=e[0]+2*e[1],t=1;t<n-1;++t)s[t]=1,h[t]=4,d[t]=4*e[t]+2*e[t+1];for(s[n-1]=2,h[n-1]=7,d[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)r=s[t]/h[t-1],h[t]-=r,d[t]-=r*d[t-1];for(s[n-1]=d[n-1]/h[n-1],t=n-2;t>=0;--t)s[t]=(d[t]-s[t+1])/h[t];for(h[n-1]=(e[n]+s[n-1])/2,t=0;t<n-1;++t)h[t]=2*e[t+1]-s[t+1];return[s,h]}function Mle(e){return new NU(e)}function xw(e,t){this._context=e,this._t=t}xw.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function kle(e){return new xw(e,.5)}function Ile(e){return new xw(e,0)}function Nle(e){return new xw(e,1)}function my(e,t){if((d=e.length)>1)for(var n=1,r,s,h=e[t[0]],d,o=h.length;n<d;++n)for(s=h,h=e[t[n]],r=0;r<o;++r)h[r][1]+=h[r][0]=isNaN(s[r][1])?s[r][0]:s[r][1]}function zE(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function Dle(e,t){return e[t]}function Ole(e){const t=[];return t.key=e,t}function Rle(){var e=ki([]),t=zE,n=my,r=Dle;function s(h){var d=Array.from(e.apply(this,arguments),Ole),o,_=d.length,w=-1,A;for(const P of h)for(o=0,++w;o<_;++o)(d[o][w]=[0,+r(P,d[o].key,w,h)]).data=P;for(o=0,A=Pk(t(d));o<_;++o)d[A[o]].index=o;return n(d,A),d}return s.keys=function(h){return arguments.length?(e=typeof h=="function"?h:ki(Array.from(h)),s):e},s.value=function(h){return arguments.length?(r=typeof h=="function"?h:ki(+h),s):r},s.order=function(h){return arguments.length?(t=h==null?zE:typeof h=="function"?h:ki(Array.from(h)),s):t},s.offset=function(h){return arguments.length?(n=h??my,s):n},s}function Lle(e,t){if((r=e.length)>0){for(var n,r,s=0,h=e[0].length,d;s<h;++s){for(d=n=0;n<r;++n)d+=e[n][s][1]||0;if(d)for(n=0;n<r;++n)e[n][s][1]/=d}my(e,t)}}function zle(e,t){if((s=e.length)>0){for(var n=0,r=e[t[0]],s,h=r.length;n<h;++n){for(var d=0,o=0;d<s;++d)o+=e[d][n][1]||0;r[n][1]+=r[n][0]=-o/2}my(e,t)}}function Fle(e,t){if(!(!((d=e.length)>0)||!((h=(s=e[t[0]]).length)>0))){for(var n=0,r=1,s,h,d;r<h;++r){for(var o=0,_=0,w=0;o<d;++o){for(var A=e[t[o]],P=A[r][1]||0,N=A[r-1][1]||0,z=(P-N)/2,q=0;q<o;++q){var $=e[t[q]],O=$[r][1]||0,X=$[r-1][1]||0;z+=O-X}_+=P,w+=z*P}s[r-1][1]+=s[r-1][0]=n,_&&(n-=w/_)}s[r-1][1]+=s[r-1][0]=n,my(e,t)}}function Cx(e){"@babel/helpers - typeof";return Cx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cx(e)}var Ble=["type","size","sizeType"];function FE(){return FE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FE.apply(this,arguments)}function U5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function q5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?U5(Object(n),!0).forEach(function(r){$le(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):U5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function $le(e,t,n){return t=Vle(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vle(e){var t=Ule(e,"string");return Cx(t)=="symbol"?t:t+""}function Ule(e,t){if(Cx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function qle(e,t){if(e==null)return{};var n=Gle(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Gle(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var DU={symbolCircle:Ak,symbolCross:hle,symbolDiamond:ple,symbolSquare:mle,symbolStar:xle,symbolTriangle:_le,symbolWye:wle},Wle=Math.PI/180,Hle=function(t){var n="symbol".concat(gw(t));return DU[n]||Ak},Zle=function(t,n,r){if(n==="area")return t;switch(r){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var s=18*Wle;return 1.25*t*t*(Math.tan(s)-Math.tan(s*2)*Math.pow(Math.tan(s),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},Kle=function(t,n){DU["symbol".concat(gw(t))]=n},Ck=function(t){var n=t.type,r=n===void 0?"circle":n,s=t.size,h=s===void 0?64:s,d=t.sizeType,o=d===void 0?"area":d,_=qle(t,Ble),w=q5(q5({},_),{},{type:r,size:h,sizeType:o}),A=function(){var O=Hle(r),X=Sle().type(O).size(Zle(h,o,r));return X()},P=w.className,N=w.cx,z=w.cy,q=Dn(w,!0);return N===+N&&z===+z&&h===+h?je.createElement("path",FE({},q,{className:dr("recharts-symbols",P),transform:"translate(".concat(N,", ").concat(z,")"),d:A()})):null};Ck.registerSymbol=Kle;function gy(e){"@babel/helpers - typeof";return gy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gy(e)}function BE(){return BE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},BE.apply(this,arguments)}function G5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Xle(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?G5(Object(n),!0).forEach(function(r){Ex(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):G5(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yle(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jle(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,RU(r.key),r)}}function Qle(e,t,n){return t&&Jle(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ece(e,t,n){return t=Zb(t),tce(e,OU()?Reflect.construct(t,n||[],Zb(e).constructor):t.apply(e,n))}function tce(e,t){if(t&&(gy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return nce(e)}function nce(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OU=function(){return!!e})()}function Zb(e){return Zb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Zb(e)}function rce(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$E(e,t)}function $E(e,t){return $E=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$E(e,t)}function Ex(e,t,n){return t=RU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RU(e){var t=ice(e,"string");return gy(t)=="symbol"?t:t+""}function ice(e,t){if(gy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(gy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var vu=32,Ek=(function(e){function t(){return Yle(this,t),ece(this,t,arguments)}return rce(t,e),Qle(t,[{key:"renderIcon",value:function(r){var s=this.props.inactiveColor,h=vu/2,d=vu/6,o=vu/3,_=r.inactive?s:r.color;if(r.type==="plainline")return je.createElement("line",{strokeWidth:4,fill:"none",stroke:_,strokeDasharray:r.payload.strokeDasharray,x1:0,y1:h,x2:vu,y2:h,className:"recharts-legend-icon"});if(r.type==="line")return je.createElement("path",{strokeWidth:4,fill:"none",stroke:_,d:"M0,".concat(h,"h").concat(o,`
            A`).concat(d,",").concat(d,",0,1,1,").concat(2*o,",").concat(h,`
            H`).concat(vu,"M").concat(2*o,",").concat(h,`
            A`).concat(d,",").concat(d,",0,1,1,").concat(o,",").concat(h),className:"recharts-legend-icon"});if(r.type==="rect")return je.createElement("path",{stroke:"none",fill:_,d:"M0,".concat(vu/8,"h").concat(vu,"v").concat(vu*3/4,"h").concat(-vu,"z"),className:"recharts-legend-icon"});if(je.isValidElement(r.legendIcon)){var w=Xle({},r);return delete w.legendIcon,je.cloneElement(r.legendIcon,w)}return je.createElement(Ck,{fill:_,cx:h,cy:h,size:vu,sizeType:"diameter",type:r.type})}},{key:"renderItems",value:function(){var r=this,s=this.props,h=s.payload,d=s.iconSize,o=s.layout,_=s.formatter,w=s.inactiveColor,A={x:0,y:0,width:vu,height:vu},P={display:o==="horizontal"?"inline-block":"block",marginRight:10},N={display:"inline-block",verticalAlign:"middle",marginRight:4};return h.map(function(z,q){var $=z.formatter||_,O=dr(Ex(Ex({"recharts-legend-item":!0},"legend-item-".concat(q),!0),"inactive",z.inactive));if(z.type==="none")return null;var X=Xn(z.value)?null:z.value;_d(!Xn(z.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var K=z.inactive?w:z.color;return je.createElement("li",BE({className:O,style:P,key:"legend-item-".concat(q)},Xm(r.props,z,q)),je.createElement(NE,{width:d,height:d,viewBox:A,style:N},r.renderIcon(z)),je.createElement("span",{className:"recharts-legend-item-text",style:{color:K}},$?$(X,z,q):X))})}},{key:"render",value:function(){var r=this.props,s=r.payload,h=r.layout,d=r.align;if(!s||!s.length)return null;var o={padding:0,margin:0,textAlign:h==="horizontal"?d:"left"};return je.createElement("ul",{className:"recharts-default-legend",style:o},this.renderItems())}}])})(W.PureComponent);Ex(Ek,"displayName","Legend");Ex(Ek,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var UT,W5;function ace(){if(W5)return UT;W5=1;var e=fw();function t(){this.__data__=new e,this.size=0}return UT=t,UT}var qT,H5;function oce(){if(H5)return qT;H5=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return qT=e,qT}var GT,Z5;function sce(){if(Z5)return GT;Z5=1;function e(t){return this.__data__.get(t)}return GT=e,GT}var WT,K5;function lce(){if(K5)return WT;K5=1;function e(t){return this.__data__.has(t)}return WT=e,WT}var HT,X5;function cce(){if(X5)return HT;X5=1;var e=fw(),t=vk(),n=xk(),r=200;function s(h,d){var o=this.__data__;if(o instanceof e){var _=o.__data__;if(!t||_.length<r-1)return _.push([h,d]),this.size=++o.size,this;o=this.__data__=new n(_)}return o.set(h,d),this.size=o.size,this}return HT=s,HT}var ZT,Y5;function LU(){if(Y5)return ZT;Y5=1;var e=fw(),t=ace(),n=oce(),r=sce(),s=lce(),h=cce();function d(o){var _=this.__data__=new e(o);this.size=_.size}return d.prototype.clear=t,d.prototype.delete=n,d.prototype.get=r,d.prototype.has=s,d.prototype.set=h,ZT=d,ZT}var KT,J5;function uce(){if(J5)return KT;J5=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return KT=t,KT}var XT,Q5;function dce(){if(Q5)return XT;Q5=1;function e(t){return this.__data__.has(t)}return XT=e,XT}var YT,eL;function zU(){if(eL)return YT;eL=1;var e=xk(),t=uce(),n=dce();function r(s){var h=-1,d=s==null?0:s.length;for(this.__data__=new e;++h<d;)this.add(s[h])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,YT=r,YT}var JT,tL;function FU(){if(tL)return JT;tL=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(n(t[r],r,t))return!0;return!1}return JT=e,JT}var QT,nL;function BU(){if(nL)return QT;nL=1;function e(t,n){return t.has(n)}return QT=e,QT}var eP,rL;function $U(){if(rL)return eP;rL=1;var e=zU(),t=FU(),n=BU(),r=1,s=2;function h(d,o,_,w,A,P){var N=_&r,z=d.length,q=o.length;if(z!=q&&!(N&&q>z))return!1;var $=P.get(d),O=P.get(o);if($&&O)return $==o&&O==d;var X=-1,K=!0,te=_&s?new e:void 0;for(P.set(d,o),P.set(o,d);++X<z;){var ne=d[X],H=o[X];if(w)var ae=N?w(H,ne,X,o,d,P):w(ne,H,X,d,o,P);if(ae!==void 0){if(ae)continue;K=!1;break}if(te){if(!t(o,function(de,ye){if(!n(te,ye)&&(ne===de||A(ne,de,_,w,P)))return te.push(ye)})){K=!1;break}}else if(!(ne===H||A(ne,H,_,w,P))){K=!1;break}}return P.delete(d),P.delete(o),K}return eP=h,eP}var tP,iL;function hce(){if(iL)return tP;iL=1;var e=Sh(),t=e.Uint8Array;return tP=t,tP}var nP,aL;function fce(){if(aL)return nP;aL=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s,h){r[++n]=[h,s]}),r}return nP=e,nP}var rP,oL;function jk(){if(oL)return rP;oL=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(s){r[++n]=s}),r}return rP=e,rP}var iP,sL;function pce(){if(sL)return iP;sL=1;var e=S0(),t=hce(),n=yk(),r=$U(),s=fce(),h=jk(),d=1,o=2,_="[object Boolean]",w="[object Date]",A="[object Error]",P="[object Map]",N="[object Number]",z="[object RegExp]",q="[object Set]",$="[object String]",O="[object Symbol]",X="[object ArrayBuffer]",K="[object DataView]",te=e?e.prototype:void 0,ne=te?te.valueOf:void 0;function H(ae,de,ye,Ae,_e,fe,Ee){switch(ye){case K:if(ae.byteLength!=de.byteLength||ae.byteOffset!=de.byteOffset)return!1;ae=ae.buffer,de=de.buffer;case X:return!(ae.byteLength!=de.byteLength||!fe(new t(ae),new t(de)));case _:case w:case N:return n(+ae,+de);case A:return ae.name==de.name&&ae.message==de.message;case z:case $:return ae==de+"";case P:var Be=s;case q:var De=Ae&d;if(Be||(Be=h),ae.size!=de.size&&!De)return!1;var Je=Ee.get(ae);if(Je)return Je==de;Ae|=o,Ee.set(ae,de);var Ve=r(Be(ae),Be(de),Ae,_e,fe,Ee);return Ee.delete(ae),Ve;case O:if(ne)return ne.call(ae)==ne.call(de)}return!1}return iP=H,iP}var aP,lL;function VU(){if(lL)return aP;lL=1;function e(t,n){for(var r=-1,s=n.length,h=t.length;++r<s;)t[h+r]=n[r];return t}return aP=e,aP}var oP,cL;function mce(){if(cL)return oP;cL=1;var e=VU(),t=Hl();function n(r,s,h){var d=s(r);return t(r)?d:e(d,h(r))}return oP=n,oP}var sP,uL;function gce(){if(uL)return sP;uL=1;function e(t,n){for(var r=-1,s=t==null?0:t.length,h=0,d=[];++r<s;){var o=t[r];n(o,r,t)&&(d[h++]=o)}return d}return sP=e,sP}var lP,dL;function yce(){if(dL)return lP;dL=1;function e(){return[]}return lP=e,lP}var cP,hL;function vce(){if(hL)return cP;hL=1;var e=gce(),t=yce(),n=Object.prototype,r=n.propertyIsEnumerable,s=Object.getOwnPropertySymbols,h=s?function(d){return d==null?[]:(d=Object(d),e(s(d),function(o){return r.call(d,o)}))}:t;return cP=h,cP}var uP,fL;function xce(){if(fL)return uP;fL=1;function e(t,n){for(var r=-1,s=Array(t);++r<t;)s[r]=n(r);return s}return uP=e,uP}var dP,pL;function _ce(){if(pL)return dP;pL=1;var e=Tf(),t=Pf(),n="[object Arguments]";function r(s){return t(s)&&e(s)==n}return dP=r,dP}var hP,mL;function Mk(){if(mL)return hP;mL=1;var e=_ce(),t=Pf(),n=Object.prototype,r=n.hasOwnProperty,s=n.propertyIsEnumerable,h=e((function(){return arguments})())?e:function(d){return t(d)&&r.call(d,"callee")&&!s.call(d,"callee")};return hP=h,hP}var ix={exports:{}},fP,gL;function bce(){if(gL)return fP;gL=1;function e(){return!1}return fP=e,fP}ix.exports;var yL;function UU(){return yL||(yL=1,(function(e,t){var n=Sh(),r=bce(),s=t&&!t.nodeType&&t,h=s&&!0&&e&&!e.nodeType&&e,d=h&&h.exports===s,o=d?n.Buffer:void 0,_=o?o.isBuffer:void 0,w=_||r;e.exports=w})(ix,ix.exports)),ix.exports}var pP,vL;function kk(){if(vL)return pP;vL=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,s){var h=typeof r;return s=s??e,!!s&&(h=="number"||h!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<s}return pP=n,pP}var mP,xL;function Ik(){if(xL)return mP;xL=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return mP=t,mP}var gP,_L;function wce(){if(_L)return gP;_L=1;var e=Tf(),t=Ik(),n=Pf(),r="[object Arguments]",s="[object Array]",h="[object Boolean]",d="[object Date]",o="[object Error]",_="[object Function]",w="[object Map]",A="[object Number]",P="[object Object]",N="[object RegExp]",z="[object Set]",q="[object String]",$="[object WeakMap]",O="[object ArrayBuffer]",X="[object DataView]",K="[object Float32Array]",te="[object Float64Array]",ne="[object Int8Array]",H="[object Int16Array]",ae="[object Int32Array]",de="[object Uint8Array]",ye="[object Uint8ClampedArray]",Ae="[object Uint16Array]",_e="[object Uint32Array]",fe={};fe[K]=fe[te]=fe[ne]=fe[H]=fe[ae]=fe[de]=fe[ye]=fe[Ae]=fe[_e]=!0,fe[r]=fe[s]=fe[O]=fe[h]=fe[X]=fe[d]=fe[o]=fe[_]=fe[w]=fe[A]=fe[P]=fe[N]=fe[z]=fe[q]=fe[$]=!1;function Ee(Be){return n(Be)&&t(Be.length)&&!!fe[e(Be)]}return gP=Ee,gP}var yP,bL;function qU(){if(bL)return yP;bL=1;function e(t){return function(n){return t(n)}}return yP=e,yP}var ax={exports:{}};ax.exports;var wL;function Sce(){return wL||(wL=1,(function(e,t){var n=cU(),r=t&&!t.nodeType&&t,s=r&&!0&&e&&!e.nodeType&&e,h=s&&s.exports===r,d=h&&n.process,o=(function(){try{var _=s&&s.require&&s.require("util").types;return _||d&&d.binding&&d.binding("util")}catch{}})();e.exports=o})(ax,ax.exports)),ax.exports}var vP,SL;function GU(){if(SL)return vP;SL=1;var e=wce(),t=qU(),n=Sce(),r=n&&n.isTypedArray,s=r?t(r):e;return vP=s,vP}var xP,TL;function Tce(){if(TL)return xP;TL=1;var e=xce(),t=Mk(),n=Hl(),r=UU(),s=kk(),h=GU(),d=Object.prototype,o=d.hasOwnProperty;function _(w,A){var P=n(w),N=!P&&t(w),z=!P&&!N&&r(w),q=!P&&!N&&!z&&h(w),$=P||N||z||q,O=$?e(w.length,String):[],X=O.length;for(var K in w)(A||o.call(w,K))&&!($&&(K=="length"||z&&(K=="offset"||K=="parent")||q&&(K=="buffer"||K=="byteLength"||K=="byteOffset")||s(K,X)))&&O.push(K);return O}return xP=_,xP}var _P,PL;function Pce(){if(PL)return _P;PL=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,s=typeof r=="function"&&r.prototype||e;return n===s}return _P=t,_P}var bP,AL;function WU(){if(AL)return bP;AL=1;function e(t,n){return function(r){return t(n(r))}}return bP=e,bP}var wP,CL;function Ace(){if(CL)return wP;CL=1;var e=WU(),t=e(Object.keys,Object);return wP=t,wP}var SP,EL;function Cce(){if(EL)return SP;EL=1;var e=Pce(),t=Ace(),n=Object.prototype,r=n.hasOwnProperty;function s(h){if(!e(h))return t(h);var d=[];for(var o in Object(h))r.call(h,o)&&o!="constructor"&&d.push(o);return d}return SP=s,SP}var TP,jL;function T0(){if(jL)return TP;jL=1;var e=gk(),t=Ik();function n(r){return r!=null&&t(r.length)&&!e(r)}return TP=n,TP}var PP,ML;function _w(){if(ML)return PP;ML=1;var e=Tce(),t=Cce(),n=T0();function r(s){return n(s)?e(s):t(s)}return PP=r,PP}var AP,kL;function Ece(){if(kL)return AP;kL=1;var e=mce(),t=vce(),n=_w();function r(s){return e(s,n,t)}return AP=r,AP}var CP,IL;function jce(){if(IL)return CP;IL=1;var e=Ece(),t=1,n=Object.prototype,r=n.hasOwnProperty;function s(h,d,o,_,w,A){var P=o&t,N=e(h),z=N.length,q=e(d),$=q.length;if(z!=$&&!P)return!1;for(var O=z;O--;){var X=N[O];if(!(P?X in d:r.call(d,X)))return!1}var K=A.get(h),te=A.get(d);if(K&&te)return K==d&&te==h;var ne=!0;A.set(h,d),A.set(d,h);for(var H=P;++O<z;){X=N[O];var ae=h[X],de=d[X];if(_)var ye=P?_(de,ae,X,d,h,A):_(ae,de,X,h,d,A);if(!(ye===void 0?ae===de||w(ae,de,o,_,A):ye)){ne=!1;break}H||(H=X=="constructor")}if(ne&&!H){var Ae=h.constructor,_e=d.constructor;Ae!=_e&&"constructor"in h&&"constructor"in d&&!(typeof Ae=="function"&&Ae instanceof Ae&&typeof _e=="function"&&_e instanceof _e)&&(ne=!1)}return A.delete(h),A.delete(d),ne}return CP=s,CP}var EP,NL;function Mce(){if(NL)return EP;NL=1;var e=ng(),t=Sh(),n=e(t,"DataView");return EP=n,EP}var jP,DL;function kce(){if(DL)return jP;DL=1;var e=ng(),t=Sh(),n=e(t,"Promise");return jP=n,jP}var MP,OL;function HU(){if(OL)return MP;OL=1;var e=ng(),t=Sh(),n=e(t,"Set");return MP=n,MP}var kP,RL;function Ice(){if(RL)return kP;RL=1;var e=ng(),t=Sh(),n=e(t,"WeakMap");return kP=n,kP}var IP,LL;function Nce(){if(LL)return IP;LL=1;var e=Mce(),t=vk(),n=kce(),r=HU(),s=Ice(),h=Tf(),d=uU(),o="[object Map]",_="[object Object]",w="[object Promise]",A="[object Set]",P="[object WeakMap]",N="[object DataView]",z=d(e),q=d(t),$=d(n),O=d(r),X=d(s),K=h;return(e&&K(new e(new ArrayBuffer(1)))!=N||t&&K(new t)!=o||n&&K(n.resolve())!=w||r&&K(new r)!=A||s&&K(new s)!=P)&&(K=function(te){var ne=h(te),H=ne==_?te.constructor:void 0,ae=H?d(H):"";if(ae)switch(ae){case z:return N;case q:return o;case $:return w;case O:return A;case X:return P}return ne}),IP=K,IP}var NP,zL;function Dce(){if(zL)return NP;zL=1;var e=LU(),t=$U(),n=pce(),r=jce(),s=Nce(),h=Hl(),d=UU(),o=GU(),_=1,w="[object Arguments]",A="[object Array]",P="[object Object]",N=Object.prototype,z=N.hasOwnProperty;function q($,O,X,K,te,ne){var H=h($),ae=h(O),de=H?A:s($),ye=ae?A:s(O);de=de==w?P:de,ye=ye==w?P:ye;var Ae=de==P,_e=ye==P,fe=de==ye;if(fe&&d($)){if(!d(O))return!1;H=!0,Ae=!1}if(fe&&!Ae)return ne||(ne=new e),H||o($)?t($,O,X,K,te,ne):n($,O,de,X,K,te,ne);if(!(X&_)){var Ee=Ae&&z.call($,"__wrapped__"),Be=_e&&z.call(O,"__wrapped__");if(Ee||Be){var De=Ee?$.value():$,Je=Be?O.value():O;return ne||(ne=new e),te(De,Je,X,K,ne)}}return fe?(ne||(ne=new e),r($,O,X,K,te,ne)):!1}return NP=q,NP}var DP,FL;function Nk(){if(FL)return DP;FL=1;var e=Dce(),t=Pf();function n(r,s,h,d,o){return r===s?!0:r==null||s==null||!t(r)&&!t(s)?r!==r&&s!==s:e(r,s,h,d,n,o)}return DP=n,DP}var OP,BL;function Oce(){if(BL)return OP;BL=1;var e=LU(),t=Nk(),n=1,r=2;function s(h,d,o,_){var w=o.length,A=w,P=!_;if(h==null)return!A;for(h=Object(h);w--;){var N=o[w];if(P&&N[2]?N[1]!==h[N[0]]:!(N[0]in h))return!1}for(;++w<A;){N=o[w];var z=N[0],q=h[z],$=N[1];if(P&&N[2]){if(q===void 0&&!(z in h))return!1}else{var O=new e;if(_)var X=_(q,$,z,h,d,O);if(!(X===void 0?t($,q,n|r,_,O):X))return!1}}return!0}return OP=s,OP}var RP,$L;function ZU(){if($L)return RP;$L=1;var e=Rp();function t(n){return n===n&&!e(n)}return RP=t,RP}var LP,VL;function Rce(){if(VL)return LP;VL=1;var e=ZU(),t=_w();function n(r){for(var s=t(r),h=s.length;h--;){var d=s[h],o=r[d];s[h]=[d,o,e(o)]}return s}return LP=n,LP}var zP,UL;function KU(){if(UL)return zP;UL=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return zP=e,zP}var FP,qL;function Lce(){if(qL)return FP;qL=1;var e=Oce(),t=Rce(),n=KU();function r(s){var h=t(s);return h.length==1&&h[0][2]?n(h[0][0],h[0][1]):function(d){return d===s||e(d,s,h)}}return FP=r,FP}var BP,GL;function zce(){if(GL)return BP;GL=1;function e(t,n){return t!=null&&n in Object(t)}return BP=e,BP}var $P,WL;function Fce(){if(WL)return $P;WL=1;var e=fU(),t=Mk(),n=Hl(),r=kk(),s=Ik(),h=mw();function d(o,_,w){_=e(_,o);for(var A=-1,P=_.length,N=!1;++A<P;){var z=h(_[A]);if(!(N=o!=null&&w(o,z)))break;o=o[z]}return N||++A!=P?N:(P=o==null?0:o.length,!!P&&s(P)&&r(z,P)&&(n(o)||t(o)))}return $P=d,$P}var VP,HL;function Bce(){if(HL)return VP;HL=1;var e=zce(),t=Fce();function n(r,s){return r!=null&&t(r,s,e)}return VP=n,VP}var UP,ZL;function $ce(){if(ZL)return UP;ZL=1;var e=Nk(),t=pU(),n=Bce(),r=mk(),s=ZU(),h=KU(),d=mw(),o=1,_=2;function w(A,P){return r(A)&&s(P)?h(d(A),P):function(N){var z=t(N,A);return z===void 0&&z===P?n(N,A):e(P,z,o|_)}}return UP=w,UP}var qP,KL;function rv(){if(KL)return qP;KL=1;function e(t){return t}return qP=e,qP}var GP,XL;function Vce(){if(XL)return GP;XL=1;function e(t){return function(n){return n?.[t]}}return GP=e,GP}var WP,YL;function Uce(){if(YL)return WP;YL=1;var e=bk();function t(n){return function(r){return e(r,n)}}return WP=t,WP}var HP,JL;function qce(){if(JL)return HP;JL=1;var e=Vce(),t=Uce(),n=mk(),r=mw();function s(h){return n(h)?e(r(h)):t(h)}return HP=s,HP}var ZP,QL;function Th(){if(QL)return ZP;QL=1;var e=Lce(),t=$ce(),n=rv(),r=Hl(),s=qce();function h(d){return typeof d=="function"?d:d==null?n:typeof d=="object"?r(d)?t(d[0],d[1]):e(d):s(d)}return ZP=h,ZP}var KP,e3;function XU(){if(e3)return KP;e3=1;function e(t,n,r,s){for(var h=t.length,d=r+(s?1:-1);s?d--:++d<h;)if(n(t[d],d,t))return d;return-1}return KP=e,KP}var XP,t3;function Gce(){if(t3)return XP;t3=1;function e(t){return t!==t}return XP=e,XP}var YP,n3;function Wce(){if(n3)return YP;n3=1;function e(t,n,r){for(var s=r-1,h=t.length;++s<h;)if(t[s]===n)return s;return-1}return YP=e,YP}var JP,r3;function Hce(){if(r3)return JP;r3=1;var e=XU(),t=Gce(),n=Wce();function r(s,h,d){return h===h?n(s,h,d):e(s,t,d)}return JP=r,JP}var QP,i3;function Zce(){if(i3)return QP;i3=1;var e=Hce();function t(n,r){var s=n==null?0:n.length;return!!s&&e(n,r,0)>-1}return QP=t,QP}var eA,a3;function Kce(){if(a3)return eA;a3=1;function e(t,n,r){for(var s=-1,h=t==null?0:t.length;++s<h;)if(r(n,t[s]))return!0;return!1}return eA=e,eA}var tA,o3;function Xce(){if(o3)return tA;o3=1;function e(){}return tA=e,tA}var nA,s3;function Yce(){if(s3)return nA;s3=1;var e=HU(),t=Xce(),n=jk(),r=1/0,s=e&&1/n(new e([,-0]))[1]==r?function(h){return new e(h)}:t;return nA=s,nA}var rA,l3;function Jce(){if(l3)return rA;l3=1;var e=zU(),t=Zce(),n=Kce(),r=BU(),s=Yce(),h=jk(),d=200;function o(_,w,A){var P=-1,N=t,z=_.length,q=!0,$=[],O=$;if(A)q=!1,N=n;else if(z>=d){var X=w?null:s(_);if(X)return h(X);q=!1,N=r,O=new e}else O=w?[]:$;e:for(;++P<z;){var K=_[P],te=w?w(K):K;if(K=A||K!==0?K:0,q&&te===te){for(var ne=O.length;ne--;)if(O[ne]===te)continue e;w&&O.push(te),$.push(K)}else N(O,te,A)||(O!==$&&O.push(te),$.push(K))}return $}return rA=o,rA}var iA,c3;function Qce(){if(c3)return iA;c3=1;var e=Th(),t=Jce();function n(r,s){return r&&r.length?t(r,e(s,2)):[]}return iA=n,iA}var eue=Qce();const u3=Kr(eue);function YU(e,t,n){return t===!0?u3(e,n):Xn(t)?u3(e,t):e}function yy(e){"@babel/helpers - typeof";return yy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yy(e)}var tue=["ref"];function d3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function rf(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d3(Object(n),!0).forEach(function(r){bw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h3(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,QU(r.key),r)}}function rue(e,t,n){return t&&h3(e.prototype,t),n&&h3(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function iue(e,t,n){return t=Kb(t),aue(e,JU()?Reflect.construct(t,n||[],Kb(e).constructor):t.apply(e,n))}function aue(e,t){if(t&&(yy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return oue(e)}function oue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function JU(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(JU=function(){return!!e})()}function Kb(e){return Kb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kb(e)}function sue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&VE(e,t)}function VE(e,t){return VE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},VE(e,t)}function bw(e,t,n){return t=QU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function QU(e){var t=lue(e,"string");return yy(t)=="symbol"?t:t+""}function lue(e,t){if(yy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(yy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function cue(e,t){if(e==null)return{};var n=uue(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function uue(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function due(e){return e.value}function hue(e,t){if(je.isValidElement(e))return je.cloneElement(e,t);if(typeof e=="function")return je.createElement(e,t);t.ref;var n=cue(t,tue);return je.createElement(Ek,n)}var f3=1,sy=(function(e){function t(){var n;nue(this,t);for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];return n=iue(this,t,[].concat(s)),bw(n,"lastBoundingBox",{width:-1,height:-1}),n}return sue(t,e),rue(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();return r.height=this.wrapperNode.offsetHeight,r.width=this.wrapperNode.offsetWidth,r}return null}},{key:"updateBBox",value:function(){var r=this.props.onBBoxUpdate,s=this.getBBox();s?(Math.abs(s.width-this.lastBoundingBox.width)>f3||Math.abs(s.height-this.lastBoundingBox.height)>f3)&&(this.lastBoundingBox.width=s.width,this.lastBoundingBox.height=s.height,r&&r(s)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,r&&r(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?rf({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(r){var s=this.props,h=s.layout,d=s.align,o=s.verticalAlign,_=s.margin,w=s.chartWidth,A=s.chartHeight,P,N;if(!r||(r.left===void 0||r.left===null)&&(r.right===void 0||r.right===null))if(d==="center"&&h==="vertical"){var z=this.getBBoxSnapshot();P={left:((w||0)-z.width)/2}}else P=d==="right"?{right:_&&_.right||0}:{left:_&&_.left||0};if(!r||(r.top===void 0||r.top===null)&&(r.bottom===void 0||r.bottom===null))if(o==="middle"){var q=this.getBBoxSnapshot();N={top:((A||0)-q.height)/2}}else N=o==="bottom"?{bottom:_&&_.bottom||0}:{top:_&&_.top||0};return rf(rf({},P),N)}},{key:"render",value:function(){var r=this,s=this.props,h=s.content,d=s.width,o=s.height,_=s.wrapperStyle,w=s.payloadUniqBy,A=s.payload,P=rf(rf({position:"absolute",width:d||"auto",height:o||"auto"},this.getDefaultPosition(_)),_);return je.createElement("div",{className:"recharts-legend-wrapper",style:P,ref:function(z){r.wrapperNode=z}},hue(h,rf(rf({},this.props),{},{payload:YU(A,w,due)})))}}],[{key:"getWithHeight",value:function(r,s){var h=rf(rf({},this.defaultProps),r.props),d=h.layout;return d==="vertical"&&Qt(r.props.height)?{height:r.props.height}:d==="horizontal"?{width:r.props.width||s}:null}}])})(W.PureComponent);bw(sy,"displayName","Legend");bw(sy,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var aA,p3;function fue(){if(p3)return aA;p3=1;var e=S0(),t=Mk(),n=Hl(),r=e?e.isConcatSpreadable:void 0;function s(h){return n(h)||t(h)||!!(r&&h&&h[r])}return aA=s,aA}var oA,m3;function e7(){if(m3)return oA;m3=1;var e=VU(),t=fue();function n(r,s,h,d,o){var _=-1,w=r.length;for(h||(h=t),o||(o=[]);++_<w;){var A=r[_];s>0&&h(A)?s>1?n(A,s-1,h,d,o):e(o,A):d||(o[o.length]=A)}return o}return oA=n,oA}var sA,g3;function pue(){if(g3)return sA;g3=1;function e(t){return function(n,r,s){for(var h=-1,d=Object(n),o=s(n),_=o.length;_--;){var w=o[t?_:++h];if(r(d[w],w,d)===!1)break}return n}}return sA=e,sA}var lA,y3;function mue(){if(y3)return lA;y3=1;var e=pue(),t=e();return lA=t,lA}var cA,v3;function t7(){if(v3)return cA;v3=1;var e=mue(),t=_w();function n(r,s){return r&&e(r,s,t)}return cA=n,cA}var uA,x3;function gue(){if(x3)return uA;x3=1;var e=T0();function t(n,r){return function(s,h){if(s==null)return s;if(!e(s))return n(s,h);for(var d=s.length,o=r?d:-1,_=Object(s);(r?o--:++o<d)&&h(_[o],o,_)!==!1;);return s}}return uA=t,uA}var dA,_3;function Dk(){if(_3)return dA;_3=1;var e=t7(),t=gue(),n=t(e);return dA=n,dA}var hA,b3;function n7(){if(b3)return hA;b3=1;var e=Dk(),t=T0();function n(r,s){var h=-1,d=t(r)?Array(r.length):[];return e(r,function(o,_,w){d[++h]=s(o,_,w)}),d}return hA=n,hA}var fA,w3;function yue(){if(w3)return fA;w3=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return fA=e,fA}var pA,S3;function vue(){if(S3)return pA;S3=1;var e=ev();function t(n,r){if(n!==r){var s=n!==void 0,h=n===null,d=n===n,o=e(n),_=r!==void 0,w=r===null,A=r===r,P=e(r);if(!w&&!P&&!o&&n>r||o&&_&&A&&!w&&!P||h&&_&&A||!s&&A||!d)return 1;if(!h&&!o&&!P&&n<r||P&&s&&d&&!h&&!o||w&&s&&d||!_&&d||!A)return-1}return 0}return pA=t,pA}var mA,T3;function xue(){if(T3)return mA;T3=1;var e=vue();function t(n,r,s){for(var h=-1,d=n.criteria,o=r.criteria,_=d.length,w=s.length;++h<_;){var A=e(d[h],o[h]);if(A){if(h>=w)return A;var P=s[h];return A*(P=="desc"?-1:1)}}return n.index-r.index}return mA=t,mA}var gA,P3;function _ue(){if(P3)return gA;P3=1;var e=_k(),t=bk(),n=Th(),r=n7(),s=yue(),h=qU(),d=xue(),o=rv(),_=Hl();function w(A,P,N){P.length?P=e(P,function($){return _($)?function(O){return t(O,$.length===1?$[0]:$)}:$}):P=[o];var z=-1;P=e(P,h(n));var q=r(A,function($,O,X){var K=e(P,function(te){return te($)});return{criteria:K,index:++z,value:$}});return s(q,function($,O){return d($,O,N)})}return gA=w,gA}var yA,A3;function bue(){if(A3)return yA;A3=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return yA=e,yA}var vA,C3;function wue(){if(C3)return vA;C3=1;var e=bue(),t=Math.max;function n(r,s,h){return s=t(s===void 0?r.length-1:s,0),function(){for(var d=arguments,o=-1,_=t(d.length-s,0),w=Array(_);++o<_;)w[o]=d[s+o];o=-1;for(var A=Array(s+1);++o<s;)A[o]=d[o];return A[s]=h(w),e(r,this,A)}}return vA=n,vA}var xA,E3;function Sue(){if(E3)return xA;E3=1;function e(t){return function(){return t}}return xA=e,xA}var _A,j3;function r7(){if(j3)return _A;j3=1;var e=ng(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return _A=t,_A}var bA,M3;function Tue(){if(M3)return bA;M3=1;var e=Sue(),t=r7(),n=rv(),r=t?function(s,h){return t(s,"toString",{configurable:!0,enumerable:!1,value:e(h),writable:!0})}:n;return bA=r,bA}var wA,k3;function Pue(){if(k3)return wA;k3=1;var e=800,t=16,n=Date.now;function r(s){var h=0,d=0;return function(){var o=n(),_=t-(o-d);if(d=o,_>0){if(++h>=e)return arguments[0]}else h=0;return s.apply(void 0,arguments)}}return wA=r,wA}var SA,I3;function Aue(){if(I3)return SA;I3=1;var e=Tue(),t=Pue(),n=t(e);return SA=n,SA}var TA,N3;function Cue(){if(N3)return TA;N3=1;var e=rv(),t=wue(),n=Aue();function r(s,h){return n(t(s,h,e),s+"")}return TA=r,TA}var PA,D3;function ww(){if(D3)return PA;D3=1;var e=yk(),t=T0(),n=kk(),r=Rp();function s(h,d,o){if(!r(o))return!1;var _=typeof d;return(_=="number"?t(o)&&n(d,o.length):_=="string"&&d in o)?e(o[d],h):!1}return PA=s,PA}var AA,O3;function Eue(){if(O3)return AA;O3=1;var e=e7(),t=_ue(),n=Cue(),r=ww(),s=n(function(h,d){if(h==null)return[];var o=d.length;return o>1&&r(h,d[0],d[1])?d=[]:o>2&&r(d[0],d[1],d[2])&&(d=[d[0]]),t(h,e(d,1),[])});return AA=s,AA}var jue=Eue();const Ok=Kr(jue);function jx(e){"@babel/helpers - typeof";return jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},jx(e)}function UE(){return UE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UE.apply(this,arguments)}function Mue(e,t){return Due(e)||Nue(e,t)||Iue(e,t)||kue()}function kue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iue(e,t){if(e){if(typeof e=="string")return R3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return R3(e,t)}}function R3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Nue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function Due(e){if(Array.isArray(e))return e}function L3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function CA(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?L3(Object(n),!0).forEach(function(r){Oue(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):L3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Oue(e,t,n){return t=Rue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rue(e){var t=Lue(e,"string");return jx(t)=="symbol"?t:t+""}function Lue(e,t){if(jx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function zue(e){return Array.isArray(e)&&xo(e[0])&&xo(e[1])?e.join(" ~ "):e}var Fue=function(t){var n=t.separator,r=n===void 0?" : ":n,s=t.contentStyle,h=s===void 0?{}:s,d=t.itemStyle,o=d===void 0?{}:d,_=t.labelStyle,w=_===void 0?{}:_,A=t.payload,P=t.formatter,N=t.itemSorter,z=t.wrapperClassName,q=t.labelClassName,$=t.label,O=t.labelFormatter,X=t.accessibilityLayer,K=X===void 0?!1:X,te=function(){if(A&&A.length){var Ee={padding:0,margin:0},Be=(N?Ok(A,N):A).map(function(De,Je){if(De.type==="none")return null;var Ve=CA({display:"block",paddingTop:4,paddingBottom:4,color:De.color||"#000"},o),et=De.formatter||P||zue,Ce=De.value,We=De.name,Qe=Ce,Re=We;if(et&&Qe!=null&&Re!=null){var nt=et(Ce,We,De,Je,A);if(Array.isArray(nt)){var pt=Mue(nt,2);Qe=pt[0],Re=pt[1]}else Qe=nt}return je.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(Je),style:Ve},xo(Re)?je.createElement("span",{className:"recharts-tooltip-item-name"},Re):null,xo(Re)?je.createElement("span",{className:"recharts-tooltip-item-separator"},r):null,je.createElement("span",{className:"recharts-tooltip-item-value"},Qe),je.createElement("span",{className:"recharts-tooltip-item-unit"},De.unit||""))});return je.createElement("ul",{className:"recharts-tooltip-item-list",style:Ee},Be)}return null},ne=CA({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},h),H=CA({margin:0},w),ae=!lr($),de=ae?$:"",ye=dr("recharts-default-tooltip",z),Ae=dr("recharts-tooltip-label",q);ae&&O&&A!==void 0&&A!==null&&(de=O($,A));var _e=K?{role:"status","aria-live":"assertive"}:{};return je.createElement("div",UE({className:ye,style:ne},_e),je.createElement("p",{className:Ae,style:H},je.isValidElement(de)?de:"".concat(de)),te())};function Mx(e){"@babel/helpers - typeof";return Mx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Mx(e)}function V_(e,t,n){return t=Bue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bue(e){var t=$ue(e,"string");return Mx(t)=="symbol"?t:t+""}function $ue(e,t){if(Mx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Mx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qv="recharts-tooltip-wrapper",Vue={visibility:"hidden"};function Uue(e){var t=e.coordinate,n=e.translateX,r=e.translateY;return dr(qv,V_(V_(V_(V_({},"".concat(qv,"-right"),Qt(n)&&t&&Qt(t.x)&&n>=t.x),"".concat(qv,"-left"),Qt(n)&&t&&Qt(t.x)&&n<t.x),"".concat(qv,"-bottom"),Qt(r)&&t&&Qt(t.y)&&r>=t.y),"".concat(qv,"-top"),Qt(r)&&t&&Qt(t.y)&&r<t.y))}function z3(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.key,s=e.offsetTopLeft,h=e.position,d=e.reverseDirection,o=e.tooltipDimension,_=e.viewBox,w=e.viewBoxDimension;if(h&&Qt(h[r]))return h[r];var A=n[r]-o-s,P=n[r]+s;if(t[r])return d[r]?A:P;if(d[r]){var N=A,z=_[r];return N<z?Math.max(P,_[r]):Math.max(A,_[r])}var q=P+o,$=_[r]+w;return q>$?Math.max(A,_[r]):Math.max(P,_[r])}function que(e){var t=e.translateX,n=e.translateY,r=e.useTranslate3d;return{transform:r?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function Gue(e){var t=e.allowEscapeViewBox,n=e.coordinate,r=e.offsetTopLeft,s=e.position,h=e.reverseDirection,d=e.tooltipBox,o=e.useTranslate3d,_=e.viewBox,w,A,P;return d.height>0&&d.width>0&&n?(A=z3({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:r,position:s,reverseDirection:h,tooltipDimension:d.width,viewBox:_,viewBoxDimension:_.width}),P=z3({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:r,position:s,reverseDirection:h,tooltipDimension:d.height,viewBox:_,viewBoxDimension:_.height}),w=que({translateX:A,translateY:P,useTranslate3d:o})):w=Vue,{cssProperties:w,cssClasses:Uue({translateX:A,translateY:P,coordinate:n})}}function vy(e){"@babel/helpers - typeof";return vy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vy(e)}function F3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function B3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?F3(Object(n),!0).forEach(function(r){GE(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):F3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Wue(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Hue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a7(r.key),r)}}function Zue(e,t,n){return t&&Hue(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Kue(e,t,n){return t=Xb(t),Xue(e,i7()?Reflect.construct(t,n||[],Xb(e).constructor):t.apply(e,n))}function Xue(e,t){if(t&&(vy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Yue(e)}function Yue(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i7=function(){return!!e})()}function Xb(e){return Xb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Xb(e)}function Jue(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qE(e,t)}function qE(e,t){return qE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qE(e,t)}function GE(e,t,n){return t=a7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a7(e){var t=Que(e,"string");return vy(t)=="symbol"?t:t+""}function Que(e,t){if(vy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(vy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $3=1,ede=(function(e){function t(){var n;Wue(this,t);for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];return n=Kue(this,t,[].concat(s)),GE(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),GE(n,"handleKeyDown",function(d){if(d.key==="Escape"){var o,_,w,A;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(o=(_=n.props.coordinate)===null||_===void 0?void 0:_.x)!==null&&o!==void 0?o:0,y:(w=(A=n.props.coordinate)===null||A===void 0?void 0:A.y)!==null&&w!==void 0?w:0}})}}),n}return Jue(t,e),Zue(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var r=this.wrapperNode.getBoundingClientRect();(Math.abs(r.width-this.state.lastBoundingBox.width)>$3||Math.abs(r.height-this.state.lastBoundingBox.height)>$3)&&this.setState({lastBoundingBox:{width:r.width,height:r.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var r,s;this.props.active&&this.updateBBox(),this.state.dismissed&&(((r=this.props.coordinate)===null||r===void 0?void 0:r.x)!==this.state.dismissedAtCoordinate.x||((s=this.props.coordinate)===null||s===void 0?void 0:s.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var r=this,s=this.props,h=s.active,d=s.allowEscapeViewBox,o=s.animationDuration,_=s.animationEasing,w=s.children,A=s.coordinate,P=s.hasPayload,N=s.isAnimationActive,z=s.offset,q=s.position,$=s.reverseDirection,O=s.useTranslate3d,X=s.viewBox,K=s.wrapperStyle,te=Gue({allowEscapeViewBox:d,coordinate:A,offsetTopLeft:z,position:q,reverseDirection:$,tooltipBox:this.state.lastBoundingBox,useTranslate3d:O,viewBox:X}),ne=te.cssClasses,H=te.cssProperties,ae=B3(B3({transition:N&&h?"transform ".concat(o,"ms ").concat(_):void 0},H),{},{pointerEvents:"none",visibility:!this.state.dismissed&&h&&P?"visible":"hidden",position:"absolute",top:0,left:0},K);return je.createElement("div",{tabIndex:-1,className:ne,style:ae,ref:function(ye){r.wrapperNode=ye}},w)}}])})(W.PureComponent),tde=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},Lp={isSsr:tde()};function xy(e){"@babel/helpers - typeof";return xy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xy(e)}function V3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function U3(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V3(Object(n),!0).forEach(function(r){Rk(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function nde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rde(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s7(r.key),r)}}function ide(e,t,n){return t&&rde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ade(e,t,n){return t=Yb(t),ode(e,o7()?Reflect.construct(t,n||[],Yb(e).constructor):t.apply(e,n))}function ode(e,t){if(t&&(xy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return sde(e)}function sde(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o7=function(){return!!e})()}function Yb(e){return Yb=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Yb(e)}function lde(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&WE(e,t)}function WE(e,t){return WE=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},WE(e,t)}function Rk(e,t,n){return t=s7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s7(e){var t=cde(e,"string");return xy(t)=="symbol"?t:t+""}function cde(e,t){if(xy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(xy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ude(e){return e.dataKey}function dde(e,t){return je.isValidElement(e)?je.cloneElement(e,t):typeof e=="function"?je.createElement(e,t):je.createElement(Fue,t)}var Dc=(function(e){function t(){return nde(this,t),ade(this,t,arguments)}return lde(t,e),ide(t,[{key:"render",value:function(){var r=this,s=this.props,h=s.active,d=s.allowEscapeViewBox,o=s.animationDuration,_=s.animationEasing,w=s.content,A=s.coordinate,P=s.filterNull,N=s.isAnimationActive,z=s.offset,q=s.payload,$=s.payloadUniqBy,O=s.position,X=s.reverseDirection,K=s.useTranslate3d,te=s.viewBox,ne=s.wrapperStyle,H=q??[];P&&H.length&&(H=YU(q.filter(function(de){return de.value!=null&&(de.hide!==!0||r.props.includeHidden)}),$,ude));var ae=H.length>0;return je.createElement(ede,{allowEscapeViewBox:d,animationDuration:o,animationEasing:_,isAnimationActive:N,active:h,coordinate:A,hasPayload:ae,offset:z,position:O,reverseDirection:X,useTranslate3d:K,viewBox:te,wrapperStyle:ne},dde(w,U3(U3({},this.props),{},{payload:H})))}}])})(W.PureComponent);Rk(Dc,"displayName","Tooltip");Rk(Dc,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!Lp.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var EA,q3;function hde(){if(q3)return EA;q3=1;var e=Sh(),t=function(){return e.Date.now()};return EA=t,EA}var jA,G3;function fde(){if(G3)return jA;G3=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return jA=t,jA}var MA,W3;function pde(){if(W3)return MA;W3=1;var e=fde(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return MA=n,MA}var kA,H3;function l7(){if(H3)return kA;H3=1;var e=pde(),t=Rp(),n=ev(),r=NaN,s=/^[-+]0x[0-9a-f]+$/i,h=/^0b[01]+$/i,d=/^0o[0-7]+$/i,o=parseInt;function _(w){if(typeof w=="number")return w;if(n(w))return r;if(t(w)){var A=typeof w.valueOf=="function"?w.valueOf():w;w=t(A)?A+"":A}if(typeof w!="string")return w===0?w:+w;w=e(w);var P=h.test(w);return P||d.test(w)?o(w.slice(2),P?2:8):s.test(w)?r:+w}return kA=_,kA}var IA,Z3;function mde(){if(Z3)return IA;Z3=1;var e=Rp(),t=hde(),n=l7(),r="Expected a function",s=Math.max,h=Math.min;function d(o,_,w){var A,P,N,z,q,$,O=0,X=!1,K=!1,te=!0;if(typeof o!="function")throw new TypeError(r);_=n(_)||0,e(w)&&(X=!!w.leading,K="maxWait"in w,N=K?s(n(w.maxWait)||0,_):N,te="trailing"in w?!!w.trailing:te);function ne(Be){var De=A,Je=P;return A=P=void 0,O=Be,z=o.apply(Je,De),z}function H(Be){return O=Be,q=setTimeout(ye,_),X?ne(Be):z}function ae(Be){var De=Be-$,Je=Be-O,Ve=_-De;return K?h(Ve,N-Je):Ve}function de(Be){var De=Be-$,Je=Be-O;return $===void 0||De>=_||De<0||K&&Je>=N}function ye(){var Be=t();if(de(Be))return Ae(Be);q=setTimeout(ye,ae(Be))}function Ae(Be){return q=void 0,te&&A?ne(Be):(A=P=void 0,z)}function _e(){q!==void 0&&clearTimeout(q),O=0,A=$=P=q=void 0}function fe(){return q===void 0?z:Ae(t())}function Ee(){var Be=t(),De=de(Be);if(A=arguments,P=this,$=Be,De){if(q===void 0)return H($);if(K)return clearTimeout(q),q=setTimeout(ye,_),ne($)}return q===void 0&&(q=setTimeout(ye,_)),z}return Ee.cancel=_e,Ee.flush=fe,Ee}return IA=d,IA}var NA,K3;function gde(){if(K3)return NA;K3=1;var e=mde(),t=Rp(),n="Expected a function";function r(s,h,d){var o=!0,_=!0;if(typeof s!="function")throw new TypeError(n);return t(d)&&(o="leading"in d?!!d.leading:o,_="trailing"in d?!!d.trailing:_),e(s,h,{leading:o,maxWait:h,trailing:_})}return NA=r,NA}var yde=gde();const c7=Kr(yde);function kx(e){"@babel/helpers - typeof";return kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kx(e)}function X3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function U_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?X3(Object(n),!0).forEach(function(r){vde(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):X3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vde(e,t,n){return t=xde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function xde(e){var t=_de(e,"string");return kx(t)=="symbol"?t:t+""}function _de(e,t){if(kx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(kx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bde(e,t){return Pde(e)||Tde(e,t)||Sde(e,t)||wde()}function wde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Sde(e,t){if(e){if(typeof e=="string")return Y3(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Y3(e,t)}}function Y3(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function Pde(e){if(Array.isArray(e))return e}var q_=W.forwardRef(function(e,t){var n=e.aspect,r=e.initialDimension,s=r===void 0?{width:-1,height:-1}:r,h=e.width,d=h===void 0?"100%":h,o=e.height,_=o===void 0?"100%":o,w=e.minWidth,A=w===void 0?0:w,P=e.minHeight,N=e.maxHeight,z=e.children,q=e.debounce,$=q===void 0?0:q,O=e.id,X=e.className,K=e.onResize,te=e.style,ne=te===void 0?{}:te,H=W.useRef(null),ae=W.useRef();ae.current=K,W.useImperativeHandle(t,function(){return Object.defineProperty(H.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),H.current},configurable:!0})});var de=W.useState({containerWidth:s.width,containerHeight:s.height}),ye=bde(de,2),Ae=ye[0],_e=ye[1],fe=W.useCallback(function(Be,De){_e(function(Je){var Ve=Math.round(Be),et=Math.round(De);return Je.containerWidth===Ve&&Je.containerHeight===et?Je:{containerWidth:Ve,containerHeight:et}})},[]);W.useEffect(function(){var Be=function(We){var Qe,Re=We[0].contentRect,nt=Re.width,pt=Re.height;fe(nt,pt),(Qe=ae.current)===null||Qe===void 0||Qe.call(ae,nt,pt)};$>0&&(Be=c7(Be,$,{trailing:!0,leading:!1}));var De=new ResizeObserver(Be),Je=H.current.getBoundingClientRect(),Ve=Je.width,et=Je.height;return fe(Ve,et),De.observe(H.current),function(){De.disconnect()}},[fe,$]);var Ee=W.useMemo(function(){var Be=Ae.containerWidth,De=Ae.containerHeight;if(Be<0||De<0)return null;_d(Mm(d)||Mm(_),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,d,_),_d(!n||n>0,"The aspect(%s) must be greater than zero.",n);var Je=Mm(d)?Be:d,Ve=Mm(_)?De:_;n&&n>0&&(Je?Ve=Je/n:Ve&&(Je=Ve*n),N&&Ve>N&&(Ve=N)),_d(Je>0||Ve>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,Je,Ve,d,_,A,P,n);var et=!Array.isArray(z)&&df(z.type).endsWith("Chart");return je.Children.map(z,function(Ce){return je.isValidElement(Ce)?W.cloneElement(Ce,U_({width:Je,height:Ve},et?{style:U_({height:"100%",width:"100%",maxHeight:Ve,maxWidth:Je},Ce.props.style)}:{})):Ce})},[n,z,_,N,P,A,Ae,d]);return je.createElement("div",{id:O?"".concat(O):void 0,className:dr("recharts-responsive-container",X),style:U_(U_({},ne),{},{width:d,height:_,minWidth:A,minHeight:P,maxHeight:N}),ref:H},Ee)}),Sw=function(t){return null};Sw.displayName="Cell";function Ix(e){"@babel/helpers - typeof";return Ix=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ix(e)}function J3(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function HE(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J3(Object(n),!0).forEach(function(r){Ade(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J3(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Ade(e,t,n){return t=Cde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cde(e){var t=Ede(e,"string");return Ix(t)=="symbol"?t:t+""}function Ede(e,t){if(Ix(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ix(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Fg={widthCache:{},cacheCount:0},jde=2e3,Mde={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},Q3="recharts_measurement_span";function kde(e){var t=HE({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var px=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||Lp.isSsr)return{width:0,height:0};var r=kde(n),s=JSON.stringify({text:t,copyStyle:r});if(Fg.widthCache[s])return Fg.widthCache[s];try{var h=document.getElementById(Q3);h||(h=document.createElement("span"),h.setAttribute("id",Q3),h.setAttribute("aria-hidden","true"),document.body.appendChild(h));var d=HE(HE({},Mde),r);Object.assign(h.style,d),h.textContent="".concat(t);var o=h.getBoundingClientRect(),_={width:o.width,height:o.height};return Fg.widthCache[s]=_,++Fg.cacheCount>jde&&(Fg.cacheCount=0,Fg.widthCache={}),_}catch{return{width:0,height:0}}},Ide=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Nx(e){"@babel/helpers - typeof";return Nx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Nx(e)}function Jb(e,t){return Rde(e)||Ode(e,t)||Dde(e,t)||Nde()}function Nde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Dde(e,t){if(e){if(typeof e=="string")return e4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return e4(e,t)}}function e4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ode(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;_=!1}else for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function Rde(e){if(Array.isArray(e))return e}function Lde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t4(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Fde(r.key),r)}}function zde(e,t,n){return t&&t4(e.prototype,t),n&&t4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Fde(e){var t=Bde(e,"string");return Nx(t)=="symbol"?t:t+""}function Bde(e,t){if(Nx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Nx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var n4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,r4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,$de=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Vde=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,u7={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Ude=Object.keys(u7),Jg="NaN";function qde(e,t){return e*u7[t]}var G_=(function(){function e(t,n){Lde(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!$de.test(n)&&(this.num=NaN,this.unit=""),Ude.includes(n)&&(this.num=qde(t,n),this.unit="px")}return zde(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var r,s=(r=Vde.exec(n))!==null&&r!==void 0?r:[],h=Jb(s,3),d=h[1],o=h[2];return new e(parseFloat(d),o??"")}}])})();function d7(e){if(e.includes(Jg))return Jg;for(var t=e;t.includes("*")||t.includes("/");){var n,r=(n=n4.exec(t))!==null&&n!==void 0?n:[],s=Jb(r,4),h=s[1],d=s[2],o=s[3],_=G_.parse(h??""),w=G_.parse(o??""),A=d==="*"?_.multiply(w):_.divide(w);if(A.isNaN())return Jg;t=t.replace(n4,A.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var P,N=(P=r4.exec(t))!==null&&P!==void 0?P:[],z=Jb(N,4),q=z[1],$=z[2],O=z[3],X=G_.parse(q??""),K=G_.parse(O??""),te=$==="+"?X.add(K):X.subtract(K);if(te.isNaN())return Jg;t=t.replace(r4,te.toString())}return t}var i4=/\(([^()]*)\)/;function Gde(e){for(var t=e;t.includes("(");){var n=i4.exec(t),r=Jb(n,2),s=r[1];t=t.replace(i4,d7(s))}return t}function Wde(e){var t=e.replace(/\s+/g,"");return t=Gde(t),t=d7(t),t}function Hde(e){try{return Wde(e)}catch{return Jg}}function DA(e){var t=Hde(e.slice(5,-1));return t===Jg?"":t}var Zde=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Kde=["dx","dy","angle","className","breakAll"];function ZE(){return ZE=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZE.apply(this,arguments)}function a4(e,t){if(e==null)return{};var n=Xde(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Xde(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function o4(e,t){return ehe(e)||Qde(e,t)||Jde(e,t)||Yde()}function Yde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jde(e,t){if(e){if(typeof e=="string")return s4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return s4(e,t)}}function s4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Qde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;_=!1}else for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function ehe(e){if(Array.isArray(e))return e}var h7=/[ \f\n\r\t\v\u2028\u2029]+/,f7=function(t){var n=t.children,r=t.breakAll,s=t.style;try{var h=[];lr(n)||(r?h=n.toString().split(""):h=n.toString().split(h7));var d=h.map(function(_){return{word:_,width:px(_,s).width}}),o=r?0:px("",s).width;return{wordsWithComputedWidth:d,spaceWidth:o}}catch{return null}},the=function(t,n,r,s,h){var d=t.maxLines,o=t.children,_=t.style,w=t.breakAll,A=Qt(d),P=o,N=function(){var Je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return Je.reduce(function(Ve,et){var Ce=et.word,We=et.width,Qe=Ve[Ve.length-1];if(Qe&&(s==null||h||Qe.width+We+r<Number(s)))Qe.words.push(Ce),Qe.width+=We+r;else{var Re={words:[Ce],width:We};Ve.push(Re)}return Ve},[])},z=N(n),q=function(Je){return Je.reduce(function(Ve,et){return Ve.width>et.width?Ve:et})};if(!A)return z;for(var $="",O=function(Je){var Ve=P.slice(0,Je),et=f7({breakAll:w,style:_,children:Ve+$}).wordsWithComputedWidth,Ce=N(et),We=Ce.length>d||q(Ce).width>Number(s);return[We,Ce]},X=0,K=P.length-1,te=0,ne;X<=K&&te<=P.length-1;){var H=Math.floor((X+K)/2),ae=H-1,de=O(ae),ye=o4(de,2),Ae=ye[0],_e=ye[1],fe=O(H),Ee=o4(fe,1),Be=Ee[0];if(!Ae&&!Be&&(X=H+1),Ae&&Be&&(K=H-1),!Ae&&Be){ne=_e;break}te++}return ne||z},l4=function(t){var n=lr(t)?[]:t.toString().split(h7);return[{words:n}]},nhe=function(t){var n=t.width,r=t.scaleToFit,s=t.children,h=t.style,d=t.breakAll,o=t.maxLines;if((n||r)&&!Lp.isSsr){var _,w,A=f7({breakAll:d,children:s,style:h});if(A){var P=A.wordsWithComputedWidth,N=A.spaceWidth;_=P,w=N}else return l4(s);return the({breakAll:d,children:s,maxLines:o,style:h},_,w,n,r)}return l4(s)},c4="#808080",Ym=function(t){var n=t.x,r=n===void 0?0:n,s=t.y,h=s===void 0?0:s,d=t.lineHeight,o=d===void 0?"1em":d,_=t.capHeight,w=_===void 0?"0.71em":_,A=t.scaleToFit,P=A===void 0?!1:A,N=t.textAnchor,z=N===void 0?"start":N,q=t.verticalAnchor,$=q===void 0?"end":q,O=t.fill,X=O===void 0?c4:O,K=a4(t,Zde),te=W.useMemo(function(){return nhe({breakAll:K.breakAll,children:K.children,maxLines:K.maxLines,scaleToFit:P,style:K.style,width:K.width})},[K.breakAll,K.children,K.maxLines,P,K.style,K.width]),ne=K.dx,H=K.dy,ae=K.angle,de=K.className,ye=K.breakAll,Ae=a4(K,Kde);if(!xo(r)||!xo(h))return null;var _e=r+(Qt(ne)?ne:0),fe=h+(Qt(H)?H:0),Ee;switch($){case"start":Ee=DA("calc(".concat(w,")"));break;case"middle":Ee=DA("calc(".concat((te.length-1)/2," * -").concat(o," + (").concat(w," / 2))"));break;default:Ee=DA("calc(".concat(te.length-1," * -").concat(o,")"));break}var Be=[];if(P){var De=te[0].width,Je=K.width;Be.push("scale(".concat((Qt(Je)?Je/De:1)/De,")"))}return ae&&Be.push("rotate(".concat(ae,", ").concat(_e,", ").concat(fe,")")),Be.length&&(Ae.transform=Be.join(" ")),je.createElement("text",ZE({},Dn(Ae,!0),{x:_e,y:fe,className:dr("recharts-text",de),textAnchor:z,fill:X.includes("url")?c4:X}),te.map(function(Ve,et){var Ce=Ve.words.join(ye?"":" ");return je.createElement("tspan",{x:_e,dy:et===0?Ee:o,key:"".concat(Ce,"-").concat(et)},Ce)}))};function Cp(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function rhe(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Lk(e){let t,n,r;e.length!==2?(t=Cp,n=(o,_)=>Cp(e(o),_),r=(o,_)=>e(o)-_):(t=e===Cp||e===rhe?e:ihe,n=e,r=e);function s(o,_,w=0,A=o.length){if(w<A){if(t(_,_)!==0)return A;do{const P=w+A>>>1;n(o[P],_)<0?w=P+1:A=P}while(w<A)}return w}function h(o,_,w=0,A=o.length){if(w<A){if(t(_,_)!==0)return A;do{const P=w+A>>>1;n(o[P],_)<=0?w=P+1:A=P}while(w<A)}return w}function d(o,_,w=0,A=o.length){const P=s(o,_,w,A-1);return P>w&&r(o[P-1],_)>-r(o[P],_)?P-1:P}return{left:s,center:d,right:h}}function ihe(){return 0}function p7(e){return e===null?NaN:+e}function*ahe(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const ohe=Lk(Cp),P0=ohe.right;Lk(p7).center;class u4 extends Map{constructor(t,n=che){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,s]of t)this.set(r,s)}get(t){return super.get(d4(this,t))}has(t){return super.has(d4(this,t))}set(t,n){return super.set(she(this,t),n)}delete(t){return super.delete(lhe(this,t))}}function d4({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function she({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function lhe({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function che(e){return e!==null&&typeof e=="object"?e.valueOf():e}function uhe(e=Cp){if(e===Cp)return m7;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const r=e(t,n);return r||r===0?r:(e(n,n)===0)-(e(t,t)===0)}}function m7(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const dhe=Math.sqrt(50),hhe=Math.sqrt(10),fhe=Math.sqrt(2);function Qb(e,t,n){const r=(t-e)/Math.max(0,n),s=Math.floor(Math.log10(r)),h=r/Math.pow(10,s),d=h>=dhe?10:h>=hhe?5:h>=fhe?2:1;let o,_,w;return s<0?(w=Math.pow(10,-s)/d,o=Math.round(e*w),_=Math.round(t*w),o/w<e&&++o,_/w>t&&--_,w=-w):(w=Math.pow(10,s)*d,o=Math.round(e/w),_=Math.round(t/w),o*w<e&&++o,_*w>t&&--_),_<o&&.5<=n&&n<2?Qb(e,t,n*2):[o,_,w]}function KE(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[s,h,d]=r?Qb(t,e,n):Qb(e,t,n);if(!(h>=s))return[];const o=h-s+1,_=new Array(o);if(r)if(d<0)for(let w=0;w<o;++w)_[w]=(h-w)/-d;else for(let w=0;w<o;++w)_[w]=(h-w)*d;else if(d<0)for(let w=0;w<o;++w)_[w]=(s+w)/-d;else for(let w=0;w<o;++w)_[w]=(s+w)*d;return _}function XE(e,t,n){return t=+t,e=+e,n=+n,Qb(e,t,n)[2]}function YE(e,t,n){t=+t,e=+e,n=+n;const r=t<e,s=r?XE(t,e,n):XE(e,t,n);return(r?-1:1)*(s<0?1/-s:s)}function h4(e,t){let n;for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);return n}function f4(e,t){let n;for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);return n}function g7(e,t,n=0,r=1/0,s){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),r=Math.floor(Math.min(e.length-1,r)),!(n<=t&&t<=r))return e;for(s=s===void 0?m7:uhe(s);r>n;){if(r-n>600){const _=r-n+1,w=t-n+1,A=Math.log(_),P=.5*Math.exp(2*A/3),N=.5*Math.sqrt(A*P*(_-P)/_)*(w-_/2<0?-1:1),z=Math.max(n,Math.floor(t-w*P/_+N)),q=Math.min(r,Math.floor(t+(_-w)*P/_+N));g7(e,t,z,q,s)}const h=e[t];let d=n,o=r;for(Gv(e,n,t),s(e[r],h)>0&&Gv(e,n,r);d<o;){for(Gv(e,d,o),++d,--o;s(e[d],h)<0;)++d;for(;s(e[o],h)>0;)--o}s(e[n],h)===0?Gv(e,n,o):(++o,Gv(e,o,r)),o<=t&&(n=o+1),t<=o&&(r=o-1)}return e}function Gv(e,t,n){const r=e[t];e[t]=e[n],e[n]=r}function phe(e,t,n){if(e=Float64Array.from(ahe(e)),!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return f4(e);if(t>=1)return h4(e);var r,s=(r-1)*t,h=Math.floor(s),d=h4(g7(e,h).subarray(0,h+1)),o=f4(e.subarray(h+1));return d+(o-d)*(s-h)}}function mhe(e,t,n=p7){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,s=(r-1)*t,h=Math.floor(s),d=+n(e[h],h,e),o=+n(e[h+1],h+1,e);return d+(o-d)*(s-h)}}function ghe(e,t,n){e=+e,t=+t,n=(s=arguments.length)<2?(t=e,e=0,1):s<3?1:+n;for(var r=-1,s=Math.max(0,Math.ceil((t-e)/n))|0,h=new Array(s);++r<s;)h[r]=e+r*n;return h}function Mu(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Af(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const JE=Symbol("implicit");function zk(){var e=new u4,t=[],n=[],r=JE;function s(h){let d=e.get(h);if(d===void 0){if(r!==JE)return r;e.set(h,d=t.push(h)-1)}return n[d%n.length]}return s.domain=function(h){if(!arguments.length)return t.slice();t=[],e=new u4;for(const d of h)e.has(d)||e.set(d,t.push(d)-1);return s},s.range=function(h){return arguments.length?(n=Array.from(h),s):n.slice()},s.unknown=function(h){return arguments.length?(r=h,s):r},s.copy=function(){return zk(t,n).unknown(r)},Mu.apply(s,arguments),s}function Dx(){var e=zk().unknown(void 0),t=e.domain,n=e.range,r=0,s=1,h,d,o=!1,_=0,w=0,A=.5;delete e.unknown;function P(){var N=t().length,z=s<r,q=z?s:r,$=z?r:s;h=($-q)/Math.max(1,N-_+w*2),o&&(h=Math.floor(h)),q+=($-q-h*(N-_))*A,d=h*(1-_),o&&(q=Math.round(q),d=Math.round(d));var O=ghe(N).map(function(X){return q+h*X});return n(z?O.reverse():O)}return e.domain=function(N){return arguments.length?(t(N),P()):t()},e.range=function(N){return arguments.length?([r,s]=N,r=+r,s=+s,P()):[r,s]},e.rangeRound=function(N){return[r,s]=N,r=+r,s=+s,o=!0,P()},e.bandwidth=function(){return d},e.step=function(){return h},e.round=function(N){return arguments.length?(o=!!N,P()):o},e.padding=function(N){return arguments.length?(_=Math.min(1,w=+N),P()):_},e.paddingInner=function(N){return arguments.length?(_=Math.min(1,N),P()):_},e.paddingOuter=function(N){return arguments.length?(w=+N,P()):w},e.align=function(N){return arguments.length?(A=Math.max(0,Math.min(1,N)),P()):A},e.copy=function(){return Dx(t(),[r,s]).round(o).paddingInner(_).paddingOuter(w).align(A)},Mu.apply(P(),arguments)}function y7(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return y7(t())},e}function mx(){return y7(Dx.apply(null,arguments).paddingInner(1))}function Fk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function v7(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function A0(){}var Ox=.7,e1=1/Ox,ly="\\s*([+-]?\\d+)\\s*",Rx="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",mh="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",yhe=/^#([0-9a-f]{3,8})$/,vhe=new RegExp(`^rgb\\(${ly},${ly},${ly}\\)$`),xhe=new RegExp(`^rgb\\(${mh},${mh},${mh}\\)$`),_he=new RegExp(`^rgba\\(${ly},${ly},${ly},${Rx}\\)$`),bhe=new RegExp(`^rgba\\(${mh},${mh},${mh},${Rx}\\)$`),whe=new RegExp(`^hsl\\(${Rx},${mh},${mh}\\)$`),She=new RegExp(`^hsla\\(${Rx},${mh},${mh},${Rx}\\)$`),p4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fk(A0,Lx,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:m4,formatHex:m4,formatHex8:The,formatHsl:Phe,formatRgb:g4,toString:g4});function m4(){return this.rgb().formatHex()}function The(){return this.rgb().formatHex8()}function Phe(){return x7(this).formatHsl()}function g4(){return this.rgb().formatRgb()}function Lx(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=yhe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?y4(t):n===3?new Gl(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?W_(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?W_(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=vhe.exec(e))?new Gl(t[1],t[2],t[3],1):(t=xhe.exec(e))?new Gl(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=_he.exec(e))?W_(t[1],t[2],t[3],t[4]):(t=bhe.exec(e))?W_(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=whe.exec(e))?_4(t[1],t[2]/100,t[3]/100,1):(t=She.exec(e))?_4(t[1],t[2]/100,t[3]/100,t[4]):p4.hasOwnProperty(e)?y4(p4[e]):e==="transparent"?new Gl(NaN,NaN,NaN,0):null}function y4(e){return new Gl(e>>16&255,e>>8&255,e&255,1)}function W_(e,t,n,r){return r<=0&&(e=t=n=NaN),new Gl(e,t,n,r)}function Ahe(e){return e instanceof A0||(e=Lx(e)),e?(e=e.rgb(),new Gl(e.r,e.g,e.b,e.opacity)):new Gl}function QE(e,t,n,r){return arguments.length===1?Ahe(e):new Gl(e,t,n,r??1)}function Gl(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}Fk(Gl,QE,v7(A0,{brighter(e){return e=e==null?e1:Math.pow(e1,e),new Gl(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ox:Math.pow(Ox,e),new Gl(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Gl(Rm(this.r),Rm(this.g),Rm(this.b),t1(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:v4,formatHex:v4,formatHex8:Che,formatRgb:x4,toString:x4}));function v4(){return`#${km(this.r)}${km(this.g)}${km(this.b)}`}function Che(){return`#${km(this.r)}${km(this.g)}${km(this.b)}${km((isNaN(this.opacity)?1:this.opacity)*255)}`}function x4(){const e=t1(this.opacity);return`${e===1?"rgb(":"rgba("}${Rm(this.r)}, ${Rm(this.g)}, ${Rm(this.b)}${e===1?")":`, ${e})`}`}function t1(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Rm(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function km(e){return e=Rm(e),(e<16?"0":"")+e.toString(16)}function _4(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new gd(e,t,n,r)}function x7(e){if(e instanceof gd)return new gd(e.h,e.s,e.l,e.opacity);if(e instanceof A0||(e=Lx(e)),!e)return new gd;if(e instanceof gd)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,s=Math.min(t,n,r),h=Math.max(t,n,r),d=NaN,o=h-s,_=(h+s)/2;return o?(t===h?d=(n-r)/o+(n<r)*6:n===h?d=(r-t)/o+2:d=(t-n)/o+4,o/=_<.5?h+s:2-h-s,d*=60):o=_>0&&_<1?0:d,new gd(d,o,_,e.opacity)}function Ehe(e,t,n,r){return arguments.length===1?x7(e):new gd(e,t,n,r??1)}function gd(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}Fk(gd,Ehe,v7(A0,{brighter(e){return e=e==null?e1:Math.pow(e1,e),new gd(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ox:Math.pow(Ox,e),new gd(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,s=2*n-r;return new Gl(OA(e>=240?e-240:e+120,s,r),OA(e,s,r),OA(e<120?e+240:e-120,s,r),this.opacity)},clamp(){return new gd(b4(this.h),H_(this.s),H_(this.l),t1(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=t1(this.opacity);return`${e===1?"hsl(":"hsla("}${b4(this.h)}, ${H_(this.s)*100}%, ${H_(this.l)*100}%${e===1?")":`, ${e})`}`}}));function b4(e){return e=(e||0)%360,e<0?e+360:e}function H_(e){return Math.max(0,Math.min(1,e||0))}function OA(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const Bk=e=>()=>e;function jhe(e,t){return function(n){return e+n*t}}function Mhe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function khe(e){return(e=+e)==1?_7:function(t,n){return n-t?Mhe(t,n,e):Bk(isNaN(t)?n:t)}}function _7(e,t){var n=t-e;return n?jhe(e,n):Bk(isNaN(e)?t:e)}const w4=(function e(t){var n=khe(t);function r(s,h){var d=n((s=QE(s)).r,(h=QE(h)).r),o=n(s.g,h.g),_=n(s.b,h.b),w=_7(s.opacity,h.opacity);return function(A){return s.r=d(A),s.g=o(A),s.b=_(A),s.opacity=w(A),s+""}}return r.gamma=e,r})(1);function Ihe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),s;return function(h){for(s=0;s<n;++s)r[s]=e[s]*(1-h)+t[s]*h;return r}}function Nhe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Dhe(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,s=new Array(r),h=new Array(n),d;for(d=0;d<r;++d)s[d]=iv(e[d],t[d]);for(;d<n;++d)h[d]=t[d];return function(o){for(d=0;d<r;++d)h[d]=s[d](o);return h}}function Ohe(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function n1(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Rhe(e,t){var n={},r={},s;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(s in t)s in e?n[s]=iv(e[s],t[s]):r[s]=t[s];return function(h){for(s in n)r[s]=n[s](h);return r}}var ej=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,RA=new RegExp(ej.source,"g");function Lhe(e){return function(){return e}}function zhe(e){return function(t){return e(t)+""}}function Fhe(e,t){var n=ej.lastIndex=RA.lastIndex=0,r,s,h,d=-1,o=[],_=[];for(e=e+"",t=t+"";(r=ej.exec(e))&&(s=RA.exec(t));)(h=s.index)>n&&(h=t.slice(n,h),o[d]?o[d]+=h:o[++d]=h),(r=r[0])===(s=s[0])?o[d]?o[d]+=s:o[++d]=s:(o[++d]=null,_.push({i:d,x:n1(r,s)})),n=RA.lastIndex;return n<t.length&&(h=t.slice(n),o[d]?o[d]+=h:o[++d]=h),o.length<2?_[0]?zhe(_[0].x):Lhe(t):(t=_.length,function(w){for(var A=0,P;A<t;++A)o[(P=_[A]).i]=P.x(w);return o.join("")})}function iv(e,t){var n=typeof t,r;return t==null||n==="boolean"?Bk(t):(n==="number"?n1:n==="string"?(r=Lx(t))?(t=r,w4):Fhe:t instanceof Lx?w4:t instanceof Date?Ohe:Nhe(t)?Ihe:Array.isArray(t)?Dhe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Rhe:n1)(e,t)}function $k(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function Bhe(e,t){t===void 0&&(t=e,e=iv);for(var n=0,r=t.length-1,s=t[0],h=new Array(r<0?0:r);n<r;)h[n]=e(s,s=t[++n]);return function(d){var o=Math.max(0,Math.min(r-1,Math.floor(d*=r)));return h[o](d-o)}}function $he(e){return function(){return e}}function r1(e){return+e}var S4=[0,1];function ll(e){return e}function tj(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:$he(isNaN(t)?NaN:.5)}function Vhe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Uhe(e,t,n){var r=e[0],s=e[1],h=t[0],d=t[1];return s<r?(r=tj(s,r),h=n(d,h)):(r=tj(r,s),h=n(h,d)),function(o){return h(r(o))}}function qhe(e,t,n){var r=Math.min(e.length,t.length)-1,s=new Array(r),h=new Array(r),d=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++d<r;)s[d]=tj(e[d],e[d+1]),h[d]=n(t[d],t[d+1]);return function(o){var _=P0(e,o,1,r)-1;return h[_](s[_](o))}}function C0(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Tw(){var e=S4,t=S4,n=iv,r,s,h,d=ll,o,_,w;function A(){var N=Math.min(e.length,t.length);return d!==ll&&(d=Vhe(e[0],e[N-1])),o=N>2?qhe:Uhe,_=w=null,P}function P(N){return N==null||isNaN(N=+N)?h:(_||(_=o(e.map(r),t,n)))(r(d(N)))}return P.invert=function(N){return d(s((w||(w=o(t,e.map(r),n1)))(N)))},P.domain=function(N){return arguments.length?(e=Array.from(N,r1),A()):e.slice()},P.range=function(N){return arguments.length?(t=Array.from(N),A()):t.slice()},P.rangeRound=function(N){return t=Array.from(N),n=$k,A()},P.clamp=function(N){return arguments.length?(d=N?!0:ll,A()):d!==ll},P.interpolate=function(N){return arguments.length?(n=N,A()):n},P.unknown=function(N){return arguments.length?(h=N,P):h},function(N,z){return r=N,s=z,A()}}function Vk(){return Tw()(ll,ll)}function Ghe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function i1(e,t){if(!isFinite(e)||e===0)return null;var n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"),r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function _y(e){return e=i1(Math.abs(e)),e?e[1]:NaN}function Whe(e,t){return function(n,r){for(var s=n.length,h=[],d=0,o=e[0],_=0;s>0&&o>0&&(_+o+1>r&&(o=Math.max(1,r-_)),h.push(n.substring(s-=o,s+o)),!((_+=o+1)>r));)o=e[d=(d+1)%e.length];return h.reverse().join(t)}}function Hhe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Zhe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function zx(e){if(!(t=Zhe.exec(e)))throw new Error("invalid format: "+e);var t;return new Uk({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}zx.prototype=Uk.prototype;function Uk(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}Uk.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Khe(e){e:for(var t=e.length,n=1,r=-1,s;n<t;++n)switch(e[n]){case".":r=s=n;break;case"0":r===0&&(r=n),s=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(s+1):e}var a1;function Xhe(e,t){var n=i1(e,t);if(!n)return a1=void 0,e.toPrecision(t);var r=n[0],s=n[1],h=s-(a1=Math.max(-8,Math.min(8,Math.floor(s/3)))*3)+1,d=r.length;return h===d?r:h>d?r+new Array(h-d+1).join("0"):h>0?r.slice(0,h)+"."+r.slice(h):"0."+new Array(1-h).join("0")+i1(e,Math.max(0,t+h-1))[0]}function T4(e,t){var n=i1(e,t);if(!n)return e+"";var r=n[0],s=n[1];return s<0?"0."+new Array(-s).join("0")+r:r.length>s+1?r.slice(0,s+1)+"."+r.slice(s+1):r+new Array(s-r.length+2).join("0")}const P4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Ghe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>T4(e*100,t),r:T4,s:Xhe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function A4(e){return e}var C4=Array.prototype.map,E4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Yhe(e){var t=e.grouping===void 0||e.thousands===void 0?A4:Whe(C4.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",s=e.decimal===void 0?".":e.decimal+"",h=e.numerals===void 0?A4:Hhe(C4.call(e.numerals,String)),d=e.percent===void 0?"%":e.percent+"",o=e.minus===void 0?"":e.minus+"",_=e.nan===void 0?"NaN":e.nan+"";function w(P,N){P=zx(P);var z=P.fill,q=P.align,$=P.sign,O=P.symbol,X=P.zero,K=P.width,te=P.comma,ne=P.precision,H=P.trim,ae=P.type;ae==="n"?(te=!0,ae="g"):P4[ae]||(ne===void 0&&(ne=12),H=!0,ae="g"),(X||z==="0"&&q==="=")&&(X=!0,z="0",q="=");var de=(N&&N.prefix!==void 0?N.prefix:"")+(O==="$"?n:O==="#"&&/[boxX]/.test(ae)?"0"+ae.toLowerCase():""),ye=(O==="$"?r:/[%p]/.test(ae)?d:"")+(N&&N.suffix!==void 0?N.suffix:""),Ae=P4[ae],_e=/[defgprs%]/.test(ae);ne=ne===void 0?6:/[gprs]/.test(ae)?Math.max(1,Math.min(21,ne)):Math.max(0,Math.min(20,ne));function fe(Ee){var Be=de,De=ye,Je,Ve,et;if(ae==="c")De=Ae(Ee)+De,Ee="";else{Ee=+Ee;var Ce=Ee<0||1/Ee<0;if(Ee=isNaN(Ee)?_:Ae(Math.abs(Ee),ne),H&&(Ee=Khe(Ee)),Ce&&+Ee==0&&$!=="+"&&(Ce=!1),Be=(Ce?$==="("?$:o:$==="-"||$==="("?"":$)+Be,De=(ae==="s"&&!isNaN(Ee)&&a1!==void 0?E4[8+a1/3]:"")+De+(Ce&&$==="("?")":""),_e){for(Je=-1,Ve=Ee.length;++Je<Ve;)if(et=Ee.charCodeAt(Je),48>et||et>57){De=(et===46?s+Ee.slice(Je+1):Ee.slice(Je))+De,Ee=Ee.slice(0,Je);break}}}te&&!X&&(Ee=t(Ee,1/0));var We=Be.length+Ee.length+De.length,Qe=We<K?new Array(K-We+1).join(z):"";switch(te&&X&&(Ee=t(Qe+Ee,Qe.length?K-De.length:1/0),Qe=""),q){case"<":Ee=Be+Ee+De+Qe;break;case"=":Ee=Be+Qe+Ee+De;break;case"^":Ee=Qe.slice(0,We=Qe.length>>1)+Be+Ee+De+Qe.slice(We);break;default:Ee=Qe+Be+Ee+De;break}return h(Ee)}return fe.toString=function(){return P+""},fe}function A(P,N){var z=Math.max(-8,Math.min(8,Math.floor(_y(N)/3)))*3,q=Math.pow(10,-z),$=w((P=zx(P),P.type="f",P),{suffix:E4[8+z/3]});return function(O){return $(q*O)}}return{format:w,formatPrefix:A}}var Z_,qk,b7;Jhe({thousands:",",grouping:[3],currency:["$",""]});function Jhe(e){return Z_=Yhe(e),qk=Z_.format,b7=Z_.formatPrefix,Z_}function Qhe(e){return Math.max(0,-_y(Math.abs(e)))}function efe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(_y(t)/3)))*3-_y(Math.abs(e)))}function tfe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,_y(t)-_y(e))+1}function w7(e,t,n,r){var s=YE(e,t,n),h;switch(r=zx(r??",f"),r.type){case"s":{var d=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(h=efe(s,d))&&(r.precision=h),b7(r,d)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(h=tfe(s,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=h-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(h=Qhe(s))&&(r.precision=h-(r.type==="%")*2);break}}return qk(r)}function zp(e){var t=e.domain;return e.ticks=function(n){var r=t();return KE(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var s=t();return w7(s[0],s[s.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),s=0,h=r.length-1,d=r[s],o=r[h],_,w,A=10;for(o<d&&(w=d,d=o,o=w,w=s,s=h,h=w);A-- >0;){if(w=XE(d,o,n),w===_)return r[s]=d,r[h]=o,t(r);if(w>0)d=Math.floor(d/w)*w,o=Math.ceil(o/w)*w;else if(w<0)d=Math.ceil(d*w)/w,o=Math.floor(o*w)/w;else break;_=w}return e},e}function o1(){var e=Vk();return e.copy=function(){return C0(e,o1())},Mu.apply(e,arguments),zp(e)}function S7(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,r1),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return S7(e).unknown(t)},e=arguments.length?Array.from(e,r1):[0,1],zp(n)}function T7(e,t){e=e.slice();var n=0,r=e.length-1,s=e[n],h=e[r],d;return h<s&&(d=n,n=r,r=d,d=s,s=h,h=d),e[n]=t.floor(s),e[r]=t.ceil(h),e}function j4(e){return Math.log(e)}function M4(e){return Math.exp(e)}function nfe(e){return-Math.log(-e)}function rfe(e){return-Math.exp(-e)}function ife(e){return isFinite(e)?+("1e"+e):e<0?0:e}function afe(e){return e===10?ife:e===Math.E?Math.exp:t=>Math.pow(e,t)}function ofe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function k4(e){return(t,n)=>-e(-t,n)}function Gk(e){const t=e(j4,M4),n=t.domain;let r=10,s,h;function d(){return s=ofe(r),h=afe(r),n()[0]<0?(s=k4(s),h=k4(h),e(nfe,rfe)):e(j4,M4),t}return t.base=function(o){return arguments.length?(r=+o,d()):r},t.domain=function(o){return arguments.length?(n(o),d()):n()},t.ticks=o=>{const _=n();let w=_[0],A=_[_.length-1];const P=A<w;P&&([w,A]=[A,w]);let N=s(w),z=s(A),q,$;const O=o==null?10:+o;let X=[];if(!(r%1)&&z-N<O){if(N=Math.floor(N),z=Math.ceil(z),w>0){for(;N<=z;++N)for(q=1;q<r;++q)if($=N<0?q/h(-N):q*h(N),!($<w)){if($>A)break;X.push($)}}else for(;N<=z;++N)for(q=r-1;q>=1;--q)if($=N>0?q/h(-N):q*h(N),!($<w)){if($>A)break;X.push($)}X.length*2<O&&(X=KE(w,A,O))}else X=KE(N,z,Math.min(z-N,O)).map(h);return P?X.reverse():X},t.tickFormat=(o,_)=>{if(o==null&&(o=10),_==null&&(_=r===10?"s":","),typeof _!="function"&&(!(r%1)&&(_=zx(_)).precision==null&&(_.trim=!0),_=qk(_)),o===1/0)return _;const w=Math.max(1,r*o/t.ticks().length);return A=>{let P=A/h(Math.round(s(A)));return P*r<r-.5&&(P*=r),P<=w?_(A):""}},t.nice=()=>n(T7(n(),{floor:o=>h(Math.floor(s(o))),ceil:o=>h(Math.ceil(s(o)))})),t}function P7(){const e=Gk(Tw()).domain([1,10]);return e.copy=()=>C0(e,P7()).base(e.base()),Mu.apply(e,arguments),e}function I4(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function N4(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function Wk(e){var t=1,n=e(I4(t),N4(t));return n.constant=function(r){return arguments.length?e(I4(t=+r),N4(t)):t},zp(n)}function A7(){var e=Wk(Tw());return e.copy=function(){return C0(e,A7()).constant(e.constant())},Mu.apply(e,arguments)}function D4(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function sfe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function lfe(e){return e<0?-e*e:e*e}function Hk(e){var t=e(ll,ll),n=1;function r(){return n===1?e(ll,ll):n===.5?e(sfe,lfe):e(D4(n),D4(1/n))}return t.exponent=function(s){return arguments.length?(n=+s,r()):n},zp(t)}function Zk(){var e=Hk(Tw());return e.copy=function(){return C0(e,Zk()).exponent(e.exponent())},Mu.apply(e,arguments),e}function cfe(){return Zk.apply(null,arguments).exponent(.5)}function O4(e){return Math.sign(e)*e*e}function ufe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function C7(){var e=Vk(),t=[0,1],n=!1,r;function s(h){var d=ufe(e(h));return isNaN(d)?r:n?Math.round(d):d}return s.invert=function(h){return e.invert(O4(h))},s.domain=function(h){return arguments.length?(e.domain(h),s):e.domain()},s.range=function(h){return arguments.length?(e.range((t=Array.from(h,r1)).map(O4)),s):t.slice()},s.rangeRound=function(h){return s.range(h).round(!0)},s.round=function(h){return arguments.length?(n=!!h,s):n},s.clamp=function(h){return arguments.length?(e.clamp(h),s):e.clamp()},s.unknown=function(h){return arguments.length?(r=h,s):r},s.copy=function(){return C7(e.domain(),t).round(n).clamp(e.clamp()).unknown(r)},Mu.apply(s,arguments),zp(s)}function E7(){var e=[],t=[],n=[],r;function s(){var d=0,o=Math.max(1,t.length);for(n=new Array(o-1);++d<o;)n[d-1]=mhe(e,d/o);return h}function h(d){return d==null||isNaN(d=+d)?r:t[P0(n,d)]}return h.invertExtent=function(d){var o=t.indexOf(d);return o<0?[NaN,NaN]:[o>0?n[o-1]:e[0],o<n.length?n[o]:e[e.length-1]]},h.domain=function(d){if(!arguments.length)return e.slice();e=[];for(let o of d)o!=null&&!isNaN(o=+o)&&e.push(o);return e.sort(Cp),s()},h.range=function(d){return arguments.length?(t=Array.from(d),s()):t.slice()},h.unknown=function(d){return arguments.length?(r=d,h):r},h.quantiles=function(){return n.slice()},h.copy=function(){return E7().domain(e).range(t).unknown(r)},Mu.apply(h,arguments)}function j7(){var e=0,t=1,n=1,r=[.5],s=[0,1],h;function d(_){return _!=null&&_<=_?s[P0(r,_,0,n)]:h}function o(){var _=-1;for(r=new Array(n);++_<n;)r[_]=((_+1)*t-(_-n)*e)/(n+1);return d}return d.domain=function(_){return arguments.length?([e,t]=_,e=+e,t=+t,o()):[e,t]},d.range=function(_){return arguments.length?(n=(s=Array.from(_)).length-1,o()):s.slice()},d.invertExtent=function(_){var w=s.indexOf(_);return w<0?[NaN,NaN]:w<1?[e,r[0]]:w>=n?[r[n-1],t]:[r[w-1],r[w]]},d.unknown=function(_){return arguments.length&&(h=_),d},d.thresholds=function(){return r.slice()},d.copy=function(){return j7().domain([e,t]).range(s).unknown(h)},Mu.apply(zp(d),arguments)}function M7(){var e=[.5],t=[0,1],n,r=1;function s(h){return h!=null&&h<=h?t[P0(e,h,0,r)]:n}return s.domain=function(h){return arguments.length?(e=Array.from(h),r=Math.min(e.length,t.length-1),s):e.slice()},s.range=function(h){return arguments.length?(t=Array.from(h),r=Math.min(e.length,t.length-1),s):t.slice()},s.invertExtent=function(h){var d=t.indexOf(h);return[e[d-1],e[d]]},s.unknown=function(h){return arguments.length?(n=h,s):n},s.copy=function(){return M7().domain(e).range(t).unknown(n)},Mu.apply(s,arguments)}const LA=new Date,zA=new Date;function _o(e,t,n,r){function s(h){return e(h=arguments.length===0?new Date:new Date(+h)),h}return s.floor=h=>(e(h=new Date(+h)),h),s.ceil=h=>(e(h=new Date(h-1)),t(h,1),e(h),h),s.round=h=>{const d=s(h),o=s.ceil(h);return h-d<o-h?d:o},s.offset=(h,d)=>(t(h=new Date(+h),d==null?1:Math.floor(d)),h),s.range=(h,d,o)=>{const _=[];if(h=s.ceil(h),o=o==null?1:Math.floor(o),!(h<d)||!(o>0))return _;let w;do _.push(w=new Date(+h)),t(h,o),e(h);while(w<h&&h<d);return _},s.filter=h=>_o(d=>{if(d>=d)for(;e(d),!h(d);)d.setTime(d-1)},(d,o)=>{if(d>=d)if(o<0)for(;++o<=0;)for(;t(d,-1),!h(d););else for(;--o>=0;)for(;t(d,1),!h(d););}),n&&(s.count=(h,d)=>(LA.setTime(+h),zA.setTime(+d),e(LA),e(zA),Math.floor(n(LA,zA))),s.every=h=>(h=Math.floor(h),!isFinite(h)||!(h>0)?null:h>1?s.filter(r?d=>r(d)%h===0:d=>s.count(0,d)%h===0):s)),s}const s1=_o(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);s1.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?_o(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):s1);s1.range;const lf=1e3,Pu=lf*60,cf=Pu*60,_f=cf*24,Kk=_f*7,R4=_f*30,FA=_f*365,Im=_o(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*lf)},(e,t)=>(t-e)/lf,e=>e.getUTCSeconds());Im.range;const Xk=_o(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lf)},(e,t)=>{e.setTime(+e+t*Pu)},(e,t)=>(t-e)/Pu,e=>e.getMinutes());Xk.range;const Yk=_o(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*Pu)},(e,t)=>(t-e)/Pu,e=>e.getUTCMinutes());Yk.range;const Jk=_o(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*lf-e.getMinutes()*Pu)},(e,t)=>{e.setTime(+e+t*cf)},(e,t)=>(t-e)/cf,e=>e.getHours());Jk.range;const Qk=_o(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*cf)},(e,t)=>(t-e)/cf,e=>e.getUTCHours());Qk.range;const E0=_o(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*Pu)/_f,e=>e.getDate()-1);E0.range;const Pw=_o(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_f,e=>e.getUTCDate()-1);Pw.range;const k7=_o(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/_f,e=>Math.floor(e/_f));k7.range;function ig(e){return _o(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*Pu)/Kk)}const Aw=ig(0),l1=ig(1),dfe=ig(2),hfe=ig(3),by=ig(4),ffe=ig(5),pfe=ig(6);Aw.range;l1.range;dfe.range;hfe.range;by.range;ffe.range;pfe.range;function ag(e){return _o(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/Kk)}const Cw=ag(0),c1=ag(1),mfe=ag(2),gfe=ag(3),wy=ag(4),yfe=ag(5),vfe=ag(6);Cw.range;c1.range;mfe.range;gfe.range;wy.range;yfe.range;vfe.range;const eI=_o(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());eI.range;const tI=_o(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());tI.range;const bf=_o(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());bf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_o(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});bf.range;const wf=_o(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());wf.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:_o(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});wf.range;function I7(e,t,n,r,s,h){const d=[[Im,1,lf],[Im,5,5*lf],[Im,15,15*lf],[Im,30,30*lf],[h,1,Pu],[h,5,5*Pu],[h,15,15*Pu],[h,30,30*Pu],[s,1,cf],[s,3,3*cf],[s,6,6*cf],[s,12,12*cf],[r,1,_f],[r,2,2*_f],[n,1,Kk],[t,1,R4],[t,3,3*R4],[e,1,FA]];function o(w,A,P){const N=A<w;N&&([w,A]=[A,w]);const z=P&&typeof P.range=="function"?P:_(w,A,P),q=z?z.range(w,+A+1):[];return N?q.reverse():q}function _(w,A,P){const N=Math.abs(A-w)/P,z=Lk(([,,O])=>O).right(d,N);if(z===d.length)return e.every(YE(w/FA,A/FA,P));if(z===0)return s1.every(Math.max(YE(w,A,P),1));const[q,$]=d[N/d[z-1][2]<d[z][2]/N?z-1:z];return q.every($)}return[o,_]}const[xfe,_fe]=I7(wf,tI,Cw,k7,Qk,Yk),[bfe,wfe]=I7(bf,eI,Aw,E0,Jk,Xk);function BA(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function $A(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function Wv(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Sfe(e){var t=e.dateTime,n=e.date,r=e.time,s=e.periods,h=e.days,d=e.shortDays,o=e.months,_=e.shortMonths,w=Hv(s),A=Zv(s),P=Hv(h),N=Zv(h),z=Hv(d),q=Zv(d),$=Hv(o),O=Zv(o),X=Hv(_),K=Zv(_),te={a:et,A:Ce,b:We,B:Qe,c:null,d:V4,e:V4,f:Wfe,g:npe,G:ipe,H:Ufe,I:qfe,j:Gfe,L:N7,m:Hfe,M:Zfe,p:Re,q:nt,Q:G4,s:W4,S:Kfe,u:Xfe,U:Yfe,V:Jfe,w:Qfe,W:epe,x:null,X:null,y:tpe,Y:rpe,Z:ape,"%":q4},ne={a:pt,A:Ct,b:Mt,B:Nt,c:null,d:U4,e:U4,f:cpe,g:xpe,G:bpe,H:ope,I:spe,j:lpe,L:O7,m:upe,M:dpe,p:Tt,q:Ot,Q:G4,s:W4,S:hpe,u:fpe,U:ppe,V:mpe,w:gpe,W:ype,x:null,X:null,y:vpe,Y:_pe,Z:wpe,"%":q4},H={a:_e,A:fe,b:Ee,B:Be,c:De,d:B4,e:B4,f:Ffe,g:F4,G:z4,H:$4,I:$4,j:Ofe,L:zfe,m:Dfe,M:Rfe,p:Ae,q:Nfe,Q:$fe,s:Vfe,S:Lfe,u:Efe,U:jfe,V:Mfe,w:Cfe,W:kfe,x:Je,X:Ve,y:F4,Y:z4,Z:Ife,"%":Bfe};te.x=ae(n,te),te.X=ae(r,te),te.c=ae(t,te),ne.x=ae(n,ne),ne.X=ae(r,ne),ne.c=ae(t,ne);function ae(rt,zt){return function(Ut){var dt=[],Rn=-1,cn=0,Hn=rt.length,Gn,Mn,Nr;for(Ut instanceof Date||(Ut=new Date(+Ut));++Rn<Hn;)rt.charCodeAt(Rn)===37&&(dt.push(rt.slice(cn,Rn)),(Mn=L4[Gn=rt.charAt(++Rn)])!=null?Gn=rt.charAt(++Rn):Mn=Gn==="e"?" ":"0",(Nr=zt[Gn])&&(Gn=Nr(Ut,Mn)),dt.push(Gn),cn=Rn+1);return dt.push(rt.slice(cn,Rn)),dt.join("")}}function de(rt,zt){return function(Ut){var dt=Wv(1900,void 0,1),Rn=ye(dt,rt,Ut+="",0),cn,Hn;if(Rn!=Ut.length)return null;if("Q"in dt)return new Date(dt.Q);if("s"in dt)return new Date(dt.s*1e3+("L"in dt?dt.L:0));if(zt&&!("Z"in dt)&&(dt.Z=0),"p"in dt&&(dt.H=dt.H%12+dt.p*12),dt.m===void 0&&(dt.m="q"in dt?dt.q:0),"V"in dt){if(dt.V<1||dt.V>53)return null;"w"in dt||(dt.w=1),"Z"in dt?(cn=$A(Wv(dt.y,0,1)),Hn=cn.getUTCDay(),cn=Hn>4||Hn===0?c1.ceil(cn):c1(cn),cn=Pw.offset(cn,(dt.V-1)*7),dt.y=cn.getUTCFullYear(),dt.m=cn.getUTCMonth(),dt.d=cn.getUTCDate()+(dt.w+6)%7):(cn=BA(Wv(dt.y,0,1)),Hn=cn.getDay(),cn=Hn>4||Hn===0?l1.ceil(cn):l1(cn),cn=E0.offset(cn,(dt.V-1)*7),dt.y=cn.getFullYear(),dt.m=cn.getMonth(),dt.d=cn.getDate()+(dt.w+6)%7)}else("W"in dt||"U"in dt)&&("w"in dt||(dt.w="u"in dt?dt.u%7:"W"in dt?1:0),Hn="Z"in dt?$A(Wv(dt.y,0,1)).getUTCDay():BA(Wv(dt.y,0,1)).getDay(),dt.m=0,dt.d="W"in dt?(dt.w+6)%7+dt.W*7-(Hn+5)%7:dt.w+dt.U*7-(Hn+6)%7);return"Z"in dt?(dt.H+=dt.Z/100|0,dt.M+=dt.Z%100,$A(dt)):BA(dt)}}function ye(rt,zt,Ut,dt){for(var Rn=0,cn=zt.length,Hn=Ut.length,Gn,Mn;Rn<cn;){if(dt>=Hn)return-1;if(Gn=zt.charCodeAt(Rn++),Gn===37){if(Gn=zt.charAt(Rn++),Mn=H[Gn in L4?zt.charAt(Rn++):Gn],!Mn||(dt=Mn(rt,Ut,dt))<0)return-1}else if(Gn!=Ut.charCodeAt(dt++))return-1}return dt}function Ae(rt,zt,Ut){var dt=w.exec(zt.slice(Ut));return dt?(rt.p=A.get(dt[0].toLowerCase()),Ut+dt[0].length):-1}function _e(rt,zt,Ut){var dt=z.exec(zt.slice(Ut));return dt?(rt.w=q.get(dt[0].toLowerCase()),Ut+dt[0].length):-1}function fe(rt,zt,Ut){var dt=P.exec(zt.slice(Ut));return dt?(rt.w=N.get(dt[0].toLowerCase()),Ut+dt[0].length):-1}function Ee(rt,zt,Ut){var dt=X.exec(zt.slice(Ut));return dt?(rt.m=K.get(dt[0].toLowerCase()),Ut+dt[0].length):-1}function Be(rt,zt,Ut){var dt=$.exec(zt.slice(Ut));return dt?(rt.m=O.get(dt[0].toLowerCase()),Ut+dt[0].length):-1}function De(rt,zt,Ut){return ye(rt,t,zt,Ut)}function Je(rt,zt,Ut){return ye(rt,n,zt,Ut)}function Ve(rt,zt,Ut){return ye(rt,r,zt,Ut)}function et(rt){return d[rt.getDay()]}function Ce(rt){return h[rt.getDay()]}function We(rt){return _[rt.getMonth()]}function Qe(rt){return o[rt.getMonth()]}function Re(rt){return s[+(rt.getHours()>=12)]}function nt(rt){return 1+~~(rt.getMonth()/3)}function pt(rt){return d[rt.getUTCDay()]}function Ct(rt){return h[rt.getUTCDay()]}function Mt(rt){return _[rt.getUTCMonth()]}function Nt(rt){return o[rt.getUTCMonth()]}function Tt(rt){return s[+(rt.getUTCHours()>=12)]}function Ot(rt){return 1+~~(rt.getUTCMonth()/3)}return{format:function(rt){var zt=ae(rt+="",te);return zt.toString=function(){return rt},zt},parse:function(rt){var zt=de(rt+="",!1);return zt.toString=function(){return rt},zt},utcFormat:function(rt){var zt=ae(rt+="",ne);return zt.toString=function(){return rt},zt},utcParse:function(rt){var zt=de(rt+="",!0);return zt.toString=function(){return rt},zt}}}var L4={"-":"",_:" ",0:"0"},qo=/^\s*\d+/,Tfe=/^%/,Pfe=/[\\^$*+?|[\]().{}]/g;function Zr(e,t,n){var r=e<0?"-":"",s=(r?-e:e)+"",h=s.length;return r+(h<n?new Array(n-h+1).join(t)+s:s)}function Afe(e){return e.replace(Pfe,"\\$&")}function Hv(e){return new RegExp("^(?:"+e.map(Afe).join("|")+")","i")}function Zv(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Cfe(e,t,n){var r=qo.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Efe(e,t,n){var r=qo.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function jfe(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Mfe(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function kfe(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function z4(e,t,n){var r=qo.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function F4(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Ife(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Nfe(e,t,n){var r=qo.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Dfe(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function B4(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Ofe(e,t,n){var r=qo.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function $4(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Rfe(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function Lfe(e,t,n){var r=qo.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function zfe(e,t,n){var r=qo.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Ffe(e,t,n){var r=qo.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Bfe(e,t,n){var r=Tfe.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function $fe(e,t,n){var r=qo.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Vfe(e,t,n){var r=qo.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function V4(e,t){return Zr(e.getDate(),t,2)}function Ufe(e,t){return Zr(e.getHours(),t,2)}function qfe(e,t){return Zr(e.getHours()%12||12,t,2)}function Gfe(e,t){return Zr(1+E0.count(bf(e),e),t,3)}function N7(e,t){return Zr(e.getMilliseconds(),t,3)}function Wfe(e,t){return N7(e,t)+"000"}function Hfe(e,t){return Zr(e.getMonth()+1,t,2)}function Zfe(e,t){return Zr(e.getMinutes(),t,2)}function Kfe(e,t){return Zr(e.getSeconds(),t,2)}function Xfe(e){var t=e.getDay();return t===0?7:t}function Yfe(e,t){return Zr(Aw.count(bf(e)-1,e),t,2)}function D7(e){var t=e.getDay();return t>=4||t===0?by(e):by.ceil(e)}function Jfe(e,t){return e=D7(e),Zr(by.count(bf(e),e)+(bf(e).getDay()===4),t,2)}function Qfe(e){return e.getDay()}function epe(e,t){return Zr(l1.count(bf(e)-1,e),t,2)}function tpe(e,t){return Zr(e.getFullYear()%100,t,2)}function npe(e,t){return e=D7(e),Zr(e.getFullYear()%100,t,2)}function rpe(e,t){return Zr(e.getFullYear()%1e4,t,4)}function ipe(e,t){var n=e.getDay();return e=n>=4||n===0?by(e):by.ceil(e),Zr(e.getFullYear()%1e4,t,4)}function ape(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+Zr(t/60|0,"0",2)+Zr(t%60,"0",2)}function U4(e,t){return Zr(e.getUTCDate(),t,2)}function ope(e,t){return Zr(e.getUTCHours(),t,2)}function spe(e,t){return Zr(e.getUTCHours()%12||12,t,2)}function lpe(e,t){return Zr(1+Pw.count(wf(e),e),t,3)}function O7(e,t){return Zr(e.getUTCMilliseconds(),t,3)}function cpe(e,t){return O7(e,t)+"000"}function upe(e,t){return Zr(e.getUTCMonth()+1,t,2)}function dpe(e,t){return Zr(e.getUTCMinutes(),t,2)}function hpe(e,t){return Zr(e.getUTCSeconds(),t,2)}function fpe(e){var t=e.getUTCDay();return t===0?7:t}function ppe(e,t){return Zr(Cw.count(wf(e)-1,e),t,2)}function R7(e){var t=e.getUTCDay();return t>=4||t===0?wy(e):wy.ceil(e)}function mpe(e,t){return e=R7(e),Zr(wy.count(wf(e),e)+(wf(e).getUTCDay()===4),t,2)}function gpe(e){return e.getUTCDay()}function ype(e,t){return Zr(c1.count(wf(e)-1,e),t,2)}function vpe(e,t){return Zr(e.getUTCFullYear()%100,t,2)}function xpe(e,t){return e=R7(e),Zr(e.getUTCFullYear()%100,t,2)}function _pe(e,t){return Zr(e.getUTCFullYear()%1e4,t,4)}function bpe(e,t){var n=e.getUTCDay();return e=n>=4||n===0?wy(e):wy.ceil(e),Zr(e.getUTCFullYear()%1e4,t,4)}function wpe(){return"+0000"}function q4(){return"%"}function G4(e){return+e}function W4(e){return Math.floor(+e/1e3)}var Bg,L7,z7;Spe({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function Spe(e){return Bg=Sfe(e),L7=Bg.format,Bg.parse,z7=Bg.utcFormat,Bg.utcParse,Bg}function Tpe(e){return new Date(e)}function Ppe(e){return e instanceof Date?+e:+new Date(+e)}function nI(e,t,n,r,s,h,d,o,_,w){var A=Vk(),P=A.invert,N=A.domain,z=w(".%L"),q=w(":%S"),$=w("%I:%M"),O=w("%I %p"),X=w("%a %d"),K=w("%b %d"),te=w("%B"),ne=w("%Y");function H(ae){return(_(ae)<ae?z:o(ae)<ae?q:d(ae)<ae?$:h(ae)<ae?O:r(ae)<ae?s(ae)<ae?X:K:n(ae)<ae?te:ne)(ae)}return A.invert=function(ae){return new Date(P(ae))},A.domain=function(ae){return arguments.length?N(Array.from(ae,Ppe)):N().map(Tpe)},A.ticks=function(ae){var de=N();return e(de[0],de[de.length-1],ae??10)},A.tickFormat=function(ae,de){return de==null?H:w(de)},A.nice=function(ae){var de=N();return(!ae||typeof ae.range!="function")&&(ae=t(de[0],de[de.length-1],ae??10)),ae?N(T7(de,ae)):A},A.copy=function(){return C0(A,nI(e,t,n,r,s,h,d,o,_,w))},A}function Ape(){return Mu.apply(nI(bfe,wfe,bf,eI,Aw,E0,Jk,Xk,Im,L7).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function Cpe(){return Mu.apply(nI(xfe,_fe,wf,tI,Cw,Pw,Qk,Yk,Im,z7).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Ew(){var e=0,t=1,n,r,s,h,d=ll,o=!1,_;function w(P){return P==null||isNaN(P=+P)?_:d(s===0?.5:(P=(h(P)-n)*s,o?Math.max(0,Math.min(1,P)):P))}w.domain=function(P){return arguments.length?([e,t]=P,n=h(e=+e),r=h(t=+t),s=n===r?0:1/(r-n),w):[e,t]},w.clamp=function(P){return arguments.length?(o=!!P,w):o},w.interpolator=function(P){return arguments.length?(d=P,w):d};function A(P){return function(N){var z,q;return arguments.length?([z,q]=N,d=P(z,q),w):[d(0),d(1)]}}return w.range=A(iv),w.rangeRound=A($k),w.unknown=function(P){return arguments.length?(_=P,w):_},function(P){return h=P,n=P(e),r=P(t),s=n===r?0:1/(r-n),w}}function Fp(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function F7(){var e=zp(Ew()(ll));return e.copy=function(){return Fp(e,F7())},Af.apply(e,arguments)}function B7(){var e=Gk(Ew()).domain([1,10]);return e.copy=function(){return Fp(e,B7()).base(e.base())},Af.apply(e,arguments)}function $7(){var e=Wk(Ew());return e.copy=function(){return Fp(e,$7()).constant(e.constant())},Af.apply(e,arguments)}function rI(){var e=Hk(Ew());return e.copy=function(){return Fp(e,rI()).exponent(e.exponent())},Af.apply(e,arguments)}function Epe(){return rI.apply(null,arguments).exponent(.5)}function V7(){var e=[],t=ll;function n(r){if(r!=null&&!isNaN(r=+r))return t((P0(e,r,1)-1)/(e.length-1))}return n.domain=function(r){if(!arguments.length)return e.slice();e=[];for(let s of r)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Cp),n},n.interpolator=function(r){return arguments.length?(t=r,n):t},n.range=function(){return e.map((r,s)=>t(s/(e.length-1)))},n.quantiles=function(r){return Array.from({length:r+1},(s,h)=>phe(e,h/r))},n.copy=function(){return V7(t).domain(e)},Af.apply(n,arguments)}function jw(){var e=0,t=.5,n=1,r=1,s,h,d,o,_,w=ll,A,P=!1,N;function z($){return isNaN($=+$)?N:($=.5+(($=+A($))-h)*(r*$<r*h?o:_),w(P?Math.max(0,Math.min(1,$)):$))}z.domain=function($){return arguments.length?([e,t,n]=$,s=A(e=+e),h=A(t=+t),d=A(n=+n),o=s===h?0:.5/(h-s),_=h===d?0:.5/(d-h),r=h<s?-1:1,z):[e,t,n]},z.clamp=function($){return arguments.length?(P=!!$,z):P},z.interpolator=function($){return arguments.length?(w=$,z):w};function q($){return function(O){var X,K,te;return arguments.length?([X,K,te]=O,w=Bhe($,[X,K,te]),z):[w(0),w(.5),w(1)]}}return z.range=q(iv),z.rangeRound=q($k),z.unknown=function($){return arguments.length?(N=$,z):N},function($){return A=$,s=$(e),h=$(t),d=$(n),o=s===h?0:.5/(h-s),_=h===d?0:.5/(d-h),r=h<s?-1:1,z}}function U7(){var e=zp(jw()(ll));return e.copy=function(){return Fp(e,U7())},Af.apply(e,arguments)}function q7(){var e=Gk(jw()).domain([.1,1,10]);return e.copy=function(){return Fp(e,q7()).base(e.base())},Af.apply(e,arguments)}function G7(){var e=Wk(jw());return e.copy=function(){return Fp(e,G7()).constant(e.constant())},Af.apply(e,arguments)}function iI(){var e=Hk(jw());return e.copy=function(){return Fp(e,iI()).exponent(e.exponent())},Af.apply(e,arguments)}function jpe(){return iI.apply(null,arguments).exponent(.5)}const H4=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Dx,scaleDiverging:U7,scaleDivergingLog:q7,scaleDivergingPow:iI,scaleDivergingSqrt:jpe,scaleDivergingSymlog:G7,scaleIdentity:S7,scaleImplicit:JE,scaleLinear:o1,scaleLog:P7,scaleOrdinal:zk,scalePoint:mx,scalePow:Zk,scaleQuantile:E7,scaleQuantize:j7,scaleRadial:C7,scaleSequential:F7,scaleSequentialLog:B7,scaleSequentialPow:rI,scaleSequentialQuantile:V7,scaleSequentialSqrt:Epe,scaleSequentialSymlog:$7,scaleSqrt:cfe,scaleSymlog:A7,scaleThreshold:M7,scaleTime:Ape,scaleUtc:Cpe,tickFormat:w7},Symbol.toStringTag,{value:"Module"}));var VA,Z4;function Mw(){if(Z4)return VA;Z4=1;var e=ev();function t(n,r,s){for(var h=-1,d=n.length;++h<d;){var o=n[h],_=r(o);if(_!=null&&(w===void 0?_===_&&!e(_):s(_,w)))var w=_,A=o}return A}return VA=t,VA}var UA,K4;function W7(){if(K4)return UA;K4=1;function e(t,n){return t>n}return UA=e,UA}var qA,X4;function Mpe(){if(X4)return qA;X4=1;var e=Mw(),t=W7(),n=rv();function r(s){return s&&s.length?e(s,n,t):void 0}return qA=r,qA}var kpe=Mpe();const Tp=Kr(kpe);var GA,Y4;function H7(){if(Y4)return GA;Y4=1;function e(t,n){return t<n}return GA=e,GA}var WA,J4;function Ipe(){if(J4)return WA;J4=1;var e=Mw(),t=H7(),n=rv();function r(s){return s&&s.length?e(s,n,t):void 0}return WA=r,WA}var Npe=Ipe();const kw=Kr(Npe);var HA,Q4;function Dpe(){if(Q4)return HA;Q4=1;var e=_k(),t=Th(),n=n7(),r=Hl();function s(h,d){var o=r(h)?e:n;return o(h,t(d,3))}return HA=s,HA}var ZA,ez;function Ope(){if(ez)return ZA;ez=1;var e=e7(),t=Dpe();function n(r,s){return e(t(r,s),1)}return ZA=n,ZA}var Rpe=Ope();const Lpe=Kr(Rpe);var KA,tz;function zpe(){if(tz)return KA;tz=1;var e=Nk();function t(n,r){return e(n,r)}return KA=t,KA}var Fpe=zpe();const Jm=Kr(Fpe);var av=1e9,Bpe={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},oI,Ki=!0,ju="[DecimalError] ",Lm=ju+"Invalid argument: ",aI=ju+"Exponent out of range: ",ov=Math.floor,Tm=Math.pow,$pe=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Rc,Vo=1e7,Bi=7,Z7=9007199254740991,u1=ov(Z7/Bi),Sn={};Sn.absoluteValue=Sn.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};Sn.comparedTo=Sn.cmp=function(e){var t,n,r,s,h=this;if(e=new h.constructor(e),h.s!==e.s)return h.s||-e.s;if(h.e!==e.e)return h.e>e.e^h.s<0?1:-1;for(r=h.d.length,s=e.d.length,t=0,n=r<s?r:s;t<n;++t)if(h.d[t]!==e.d[t])return h.d[t]>e.d[t]^h.s<0?1:-1;return r===s?0:r>s^h.s<0?1:-1};Sn.decimalPlaces=Sn.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*Bi;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};Sn.dividedBy=Sn.div=function(e){return hf(this,new this.constructor(e))};Sn.dividedToIntegerBy=Sn.idiv=function(e){var t=this,n=t.constructor;return Ci(hf(t,new n(e),0,1),n.precision)};Sn.equals=Sn.eq=function(e){return!this.cmp(e)};Sn.exponent=function(){return Xa(this)};Sn.greaterThan=Sn.gt=function(e){return this.cmp(e)>0};Sn.greaterThanOrEqualTo=Sn.gte=function(e){return this.cmp(e)>=0};Sn.isInteger=Sn.isint=function(){return this.e>this.d.length-2};Sn.isNegative=Sn.isneg=function(){return this.s<0};Sn.isPositive=Sn.ispos=function(){return this.s>0};Sn.isZero=function(){return this.s===0};Sn.lessThan=Sn.lt=function(e){return this.cmp(e)<0};Sn.lessThanOrEqualTo=Sn.lte=function(e){return this.cmp(e)<1};Sn.logarithm=Sn.log=function(e){var t,n=this,r=n.constructor,s=r.precision,h=s+5;if(e===void 0)e=new r(10);else if(e=new r(e),e.s<1||e.eq(Rc))throw Error(ju+"NaN");if(n.s<1)throw Error(ju+(n.s?"NaN":"-Infinity"));return n.eq(Rc)?new r(0):(Ki=!1,t=hf(Fx(n,h),Fx(e,h),h),Ki=!0,Ci(t,s))};Sn.minus=Sn.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?Y7(t,e):K7(t,(e.s=-e.s,e))};Sn.modulo=Sn.mod=function(e){var t,n=this,r=n.constructor,s=r.precision;if(e=new r(e),!e.s)throw Error(ju+"NaN");return n.s?(Ki=!1,t=hf(n,e,0,1).times(e),Ki=!0,n.minus(t)):Ci(new r(n),s)};Sn.naturalExponential=Sn.exp=function(){return X7(this)};Sn.naturalLogarithm=Sn.ln=function(){return Fx(this)};Sn.negated=Sn.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};Sn.plus=Sn.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?K7(t,e):Y7(t,(e.s=-e.s,e))};Sn.precision=Sn.sd=function(e){var t,n,r,s=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(Lm+e);if(t=Xa(s)+1,r=s.d.length-1,n=r*Bi+1,r=s.d[r],r){for(;r%10==0;r/=10)n--;for(r=s.d[0];r>=10;r/=10)n++}return e&&t>n?t:n};Sn.squareRoot=Sn.sqrt=function(){var e,t,n,r,s,h,d,o=this,_=o.constructor;if(o.s<1){if(!o.s)return new _(0);throw Error(ju+"NaN")}for(e=Xa(o),Ki=!1,s=Math.sqrt(+o),s==0||s==1/0?(t=uh(o.d),(t.length+e)%2==0&&(t+="0"),s=Math.sqrt(t),e=ov((e+1)/2)-(e<0||e%2),s==1/0?t="5e"+e:(t=s.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),r=new _(t)):r=new _(s.toString()),n=_.precision,s=d=n+3;;)if(h=r,r=h.plus(hf(o,h,d+2)).times(.5),uh(h.d).slice(0,d)===(t=uh(r.d)).slice(0,d)){if(t=t.slice(d-3,d+1),s==d&&t=="4999"){if(Ci(h,n+1,0),h.times(h).eq(o)){r=h;break}}else if(t!="9999")break;d+=4}return Ki=!0,Ci(r,n)};Sn.times=Sn.mul=function(e){var t,n,r,s,h,d,o,_,w,A=this,P=A.constructor,N=A.d,z=(e=new P(e)).d;if(!A.s||!e.s)return new P(0);for(e.s*=A.s,n=A.e+e.e,_=N.length,w=z.length,_<w&&(h=N,N=z,z=h,d=_,_=w,w=d),h=[],d=_+w,r=d;r--;)h.push(0);for(r=w;--r>=0;){for(t=0,s=_+r;s>r;)o=h[s]+z[r]*N[s-r-1]+t,h[s--]=o%Vo|0,t=o/Vo|0;h[s]=(h[s]+t)%Vo|0}for(;!h[--d];)h.pop();return t?++n:h.shift(),e.d=h,e.e=n,Ki?Ci(e,P.precision):e};Sn.toDecimalPlaces=Sn.todp=function(e,t){var n=this,r=n.constructor;return n=new r(n),e===void 0?n:(bh(e,0,av),t===void 0?t=r.rounding:bh(t,0,8),Ci(n,e+Xa(n)+1,t))};Sn.toExponential=function(e,t){var n,r=this,s=r.constructor;return e===void 0?n=Qm(r,!0):(bh(e,0,av),t===void 0?t=s.rounding:bh(t,0,8),r=Ci(new s(r),e+1,t),n=Qm(r,!0,e+1)),n};Sn.toFixed=function(e,t){var n,r,s=this,h=s.constructor;return e===void 0?Qm(s):(bh(e,0,av),t===void 0?t=h.rounding:bh(t,0,8),r=Ci(new h(s),e+Xa(s)+1,t),n=Qm(r.abs(),!1,e+Xa(r)+1),s.isneg()&&!s.isZero()?"-"+n:n)};Sn.toInteger=Sn.toint=function(){var e=this,t=e.constructor;return Ci(new t(e),Xa(e)+1,t.rounding)};Sn.toNumber=function(){return+this};Sn.toPower=Sn.pow=function(e){var t,n,r,s,h,d,o=this,_=o.constructor,w=12,A=+(e=new _(e));if(!e.s)return new _(Rc);if(o=new _(o),!o.s){if(e.s<1)throw Error(ju+"Infinity");return o}if(o.eq(Rc))return o;if(r=_.precision,e.eq(Rc))return Ci(o,r);if(t=e.e,n=e.d.length-1,d=t>=n,h=o.s,d){if((n=A<0?-A:A)<=Z7){for(s=new _(Rc),t=Math.ceil(r/Bi+4),Ki=!1;n%2&&(s=s.times(o),rz(s.d,t)),n=ov(n/2),n!==0;)o=o.times(o),rz(o.d,t);return Ki=!0,e.s<0?new _(Rc).div(s):Ci(s,r)}}else if(h<0)throw Error(ju+"NaN");return h=h<0&&e.d[Math.max(t,n)]&1?-1:1,o.s=1,Ki=!1,s=e.times(Fx(o,r+w)),Ki=!0,s=X7(s),s.s=h,s};Sn.toPrecision=function(e,t){var n,r,s=this,h=s.constructor;return e===void 0?(n=Xa(s),r=Qm(s,n<=h.toExpNeg||n>=h.toExpPos)):(bh(e,1,av),t===void 0?t=h.rounding:bh(t,0,8),s=Ci(new h(s),e,t),n=Xa(s),r=Qm(s,e<=n||n<=h.toExpNeg,e)),r};Sn.toSignificantDigits=Sn.tosd=function(e,t){var n=this,r=n.constructor;return e===void 0?(e=r.precision,t=r.rounding):(bh(e,1,av),t===void 0?t=r.rounding:bh(t,0,8)),Ci(new r(n),e,t)};Sn.toString=Sn.valueOf=Sn.val=Sn.toJSON=Sn[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=Xa(e),n=e.constructor;return Qm(e,t<=n.toExpNeg||t>=n.toExpPos)};function K7(e,t){var n,r,s,h,d,o,_,w,A=e.constructor,P=A.precision;if(!e.s||!t.s)return t.s||(t=new A(e)),Ki?Ci(t,P):t;if(_=e.d,w=t.d,d=e.e,s=t.e,_=_.slice(),h=d-s,h){for(h<0?(r=_,h=-h,o=w.length):(r=w,s=d,o=_.length),d=Math.ceil(P/Bi),o=d>o?d+1:o+1,h>o&&(h=o,r.length=1),r.reverse();h--;)r.push(0);r.reverse()}for(o=_.length,h=w.length,o-h<0&&(h=o,r=w,w=_,_=r),n=0;h;)n=(_[--h]=_[h]+w[h]+n)/Vo|0,_[h]%=Vo;for(n&&(_.unshift(n),++s),o=_.length;_[--o]==0;)_.pop();return t.d=_,t.e=s,Ki?Ci(t,P):t}function bh(e,t,n){if(e!==~~e||e<t||e>n)throw Error(Lm+e)}function uh(e){var t,n,r,s=e.length-1,h="",d=e[0];if(s>0){for(h+=d,t=1;t<s;t++)r=e[t]+"",n=Bi-r.length,n&&(h+=yp(n)),h+=r;d=e[t],r=d+"",n=Bi-r.length,n&&(h+=yp(n))}else if(d===0)return"0";for(;d%10===0;)d/=10;return h+d}var hf=(function(){function e(r,s){var h,d=0,o=r.length;for(r=r.slice();o--;)h=r[o]*s+d,r[o]=h%Vo|0,d=h/Vo|0;return d&&r.unshift(d),r}function t(r,s,h,d){var o,_;if(h!=d)_=h>d?1:-1;else for(o=_=0;o<h;o++)if(r[o]!=s[o]){_=r[o]>s[o]?1:-1;break}return _}function n(r,s,h){for(var d=0;h--;)r[h]-=d,d=r[h]<s[h]?1:0,r[h]=d*Vo+r[h]-s[h];for(;!r[0]&&r.length>1;)r.shift()}return function(r,s,h,d){var o,_,w,A,P,N,z,q,$,O,X,K,te,ne,H,ae,de,ye,Ae=r.constructor,_e=r.s==s.s?1:-1,fe=r.d,Ee=s.d;if(!r.s)return new Ae(r);if(!s.s)throw Error(ju+"Division by zero");for(_=r.e-s.e,de=Ee.length,H=fe.length,z=new Ae(_e),q=z.d=[],w=0;Ee[w]==(fe[w]||0);)++w;if(Ee[w]>(fe[w]||0)&&--_,h==null?K=h=Ae.precision:d?K=h+(Xa(r)-Xa(s))+1:K=h,K<0)return new Ae(0);if(K=K/Bi+2|0,w=0,de==1)for(A=0,Ee=Ee[0],K++;(w<H||A)&&K--;w++)te=A*Vo+(fe[w]||0),q[w]=te/Ee|0,A=te%Ee|0;else{for(A=Vo/(Ee[0]+1)|0,A>1&&(Ee=e(Ee,A),fe=e(fe,A),de=Ee.length,H=fe.length),ne=de,$=fe.slice(0,de),O=$.length;O<de;)$[O++]=0;ye=Ee.slice(),ye.unshift(0),ae=Ee[0],Ee[1]>=Vo/2&&++ae;do A=0,o=t(Ee,$,de,O),o<0?(X=$[0],de!=O&&(X=X*Vo+($[1]||0)),A=X/ae|0,A>1?(A>=Vo&&(A=Vo-1),P=e(Ee,A),N=P.length,O=$.length,o=t(P,$,N,O),o==1&&(A--,n(P,de<N?ye:Ee,N))):(A==0&&(o=A=1),P=Ee.slice()),N=P.length,N<O&&P.unshift(0),n($,P,O),o==-1&&(O=$.length,o=t(Ee,$,de,O),o<1&&(A++,n($,de<O?ye:Ee,O))),O=$.length):o===0&&(A++,$=[0]),q[w++]=A,o&&$[0]?$[O++]=fe[ne]||0:($=[fe[ne]],O=1);while((ne++<H||$[0]!==void 0)&&K--)}return q[0]||q.shift(),z.e=_,Ci(z,d?h+Xa(z)+1:h)}})();function X7(e,t){var n,r,s,h,d,o,_=0,w=0,A=e.constructor,P=A.precision;if(Xa(e)>16)throw Error(aI+Xa(e));if(!e.s)return new A(Rc);for(Ki=!1,o=P,d=new A(.03125);e.abs().gte(.1);)e=e.times(d),w+=5;for(r=Math.log(Tm(2,w))/Math.LN10*2+5|0,o+=r,n=s=h=new A(Rc),A.precision=o;;){if(s=Ci(s.times(e),o),n=n.times(++_),d=h.plus(hf(s,n,o)),uh(d.d).slice(0,o)===uh(h.d).slice(0,o)){for(;w--;)h=Ci(h.times(h),o);return A.precision=P,t==null?(Ki=!0,Ci(h,P)):h}h=d}}function Xa(e){for(var t=e.e*Bi,n=e.d[0];n>=10;n/=10)t++;return t}function XA(e,t,n){if(t>e.LN10.sd())throw Ki=!0,n&&(e.precision=n),Error(ju+"LN10 precision limit exceeded");return Ci(new e(e.LN10),t)}function yp(e){for(var t="";e--;)t+="0";return t}function Fx(e,t){var n,r,s,h,d,o,_,w,A,P=1,N=10,z=e,q=z.d,$=z.constructor,O=$.precision;if(z.s<1)throw Error(ju+(z.s?"NaN":"-Infinity"));if(z.eq(Rc))return new $(0);if(t==null?(Ki=!1,w=O):w=t,z.eq(10))return t==null&&(Ki=!0),XA($,w);if(w+=N,$.precision=w,n=uh(q),r=n.charAt(0),h=Xa(z),Math.abs(h)<15e14){for(;r<7&&r!=1||r==1&&n.charAt(1)>3;)z=z.times(e),n=uh(z.d),r=n.charAt(0),P++;h=Xa(z),r>1?(z=new $("0."+n),h++):z=new $(r+"."+n.slice(1))}else return _=XA($,w+2,O).times(h+""),z=Fx(new $(r+"."+n.slice(1)),w-N).plus(_),$.precision=O,t==null?(Ki=!0,Ci(z,O)):z;for(o=d=z=hf(z.minus(Rc),z.plus(Rc),w),A=Ci(z.times(z),w),s=3;;){if(d=Ci(d.times(A),w),_=o.plus(hf(d,new $(s),w)),uh(_.d).slice(0,w)===uh(o.d).slice(0,w))return o=o.times(2),h!==0&&(o=o.plus(XA($,w+2,O).times(h+""))),o=hf(o,new $(P),w),$.precision=O,t==null?(Ki=!0,Ci(o,O)):o;o=_,s+=2}}function nz(e,t){var n,r,s;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),r=0;t.charCodeAt(r)===48;)++r;for(s=t.length;t.charCodeAt(s-1)===48;)--s;if(t=t.slice(r,s),t){if(s-=r,n=n-r-1,e.e=ov(n/Bi),e.d=[],r=(n+1)%Bi,n<0&&(r+=Bi),r<s){for(r&&e.d.push(+t.slice(0,r)),s-=Bi;r<s;)e.d.push(+t.slice(r,r+=Bi));t=t.slice(r),r=Bi-t.length}else r-=s;for(;r--;)t+="0";if(e.d.push(+t),Ki&&(e.e>u1||e.e<-u1))throw Error(aI+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ci(e,t,n){var r,s,h,d,o,_,w,A,P=e.d;for(d=1,h=P[0];h>=10;h/=10)d++;if(r=t-d,r<0)r+=Bi,s=t,w=P[A=0];else{if(A=Math.ceil((r+1)/Bi),h=P.length,A>=h)return e;for(w=h=P[A],d=1;h>=10;h/=10)d++;r%=Bi,s=r-Bi+d}if(n!==void 0&&(h=Tm(10,d-s-1),o=w/h%10|0,_=t<0||P[A+1]!==void 0||w%h,_=n<4?(o||_)&&(n==0||n==(e.s<0?3:2)):o>5||o==5&&(n==4||_||n==6&&(r>0?s>0?w/Tm(10,d-s):0:P[A-1])%10&1||n==(e.s<0?8:7))),t<1||!P[0])return _?(h=Xa(e),P.length=1,t=t-h-1,P[0]=Tm(10,(Bi-t%Bi)%Bi),e.e=ov(-t/Bi)||0):(P.length=1,P[0]=e.e=e.s=0),e;if(r==0?(P.length=A,h=1,A--):(P.length=A+1,h=Tm(10,Bi-r),P[A]=s>0?(w/Tm(10,d-s)%Tm(10,s)|0)*h:0),_)for(;;)if(A==0){(P[0]+=h)==Vo&&(P[0]=1,++e.e);break}else{if(P[A]+=h,P[A]!=Vo)break;P[A--]=0,h=1}for(r=P.length;P[--r]===0;)P.pop();if(Ki&&(e.e>u1||e.e<-u1))throw Error(aI+Xa(e));return e}function Y7(e,t){var n,r,s,h,d,o,_,w,A,P,N=e.constructor,z=N.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new N(e),Ki?Ci(t,z):t;if(_=e.d,P=t.d,r=t.e,w=e.e,_=_.slice(),d=w-r,d){for(A=d<0,A?(n=_,d=-d,o=P.length):(n=P,r=w,o=_.length),s=Math.max(Math.ceil(z/Bi),o)+2,d>s&&(d=s,n.length=1),n.reverse(),s=d;s--;)n.push(0);n.reverse()}else{for(s=_.length,o=P.length,A=s<o,A&&(o=s),s=0;s<o;s++)if(_[s]!=P[s]){A=_[s]<P[s];break}d=0}for(A&&(n=_,_=P,P=n,t.s=-t.s),o=_.length,s=P.length-o;s>0;--s)_[o++]=0;for(s=P.length;s>d;){if(_[--s]<P[s]){for(h=s;h&&_[--h]===0;)_[h]=Vo-1;--_[h],_[s]+=Vo}_[s]-=P[s]}for(;_[--o]===0;)_.pop();for(;_[0]===0;_.shift())--r;return _[0]?(t.d=_,t.e=r,Ki?Ci(t,z):t):new N(0)}function Qm(e,t,n){var r,s=Xa(e),h=uh(e.d),d=h.length;return t?(n&&(r=n-d)>0?h=h.charAt(0)+"."+h.slice(1)+yp(r):d>1&&(h=h.charAt(0)+"."+h.slice(1)),h=h+(s<0?"e":"e+")+s):s<0?(h="0."+yp(-s-1)+h,n&&(r=n-d)>0&&(h+=yp(r))):s>=d?(h+=yp(s+1-d),n&&(r=n-s-1)>0&&(h=h+"."+yp(r))):((r=s+1)<d&&(h=h.slice(0,r)+"."+h.slice(r)),n&&(r=n-d)>0&&(s+1===d&&(h+="."),h+=yp(r))),e.s<0?"-"+h:h}function rz(e,t){if(e.length>t)return e.length=t,!0}function J7(e){var t,n,r;function s(h){var d=this;if(!(d instanceof s))return new s(h);if(d.constructor=s,h instanceof s){d.s=h.s,d.e=h.e,d.d=(h=h.d)?h.slice():h;return}if(typeof h=="number"){if(h*0!==0)throw Error(Lm+h);if(h>0)d.s=1;else if(h<0)h=-h,d.s=-1;else{d.s=0,d.e=0,d.d=[0];return}if(h===~~h&&h<1e7){d.e=0,d.d=[h];return}return nz(d,h.toString())}else if(typeof h!="string")throw Error(Lm+h);if(h.charCodeAt(0)===45?(h=h.slice(1),d.s=-1):d.s=1,$pe.test(h))nz(d,h);else throw Error(Lm+h)}if(s.prototype=Sn,s.ROUND_UP=0,s.ROUND_DOWN=1,s.ROUND_CEIL=2,s.ROUND_FLOOR=3,s.ROUND_HALF_UP=4,s.ROUND_HALF_DOWN=5,s.ROUND_HALF_EVEN=6,s.ROUND_HALF_CEIL=7,s.ROUND_HALF_FLOOR=8,s.clone=J7,s.config=s.set=Vpe,e===void 0&&(e={}),e)for(r=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<r.length;)e.hasOwnProperty(n=r[t++])||(e[n]=this[n]);return s.config(e),s}function Vpe(e){if(!e||typeof e!="object")throw Error(ju+"Object expected");var t,n,r,s=["precision",1,av,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<s.length;t+=3)if((r=e[n=s[t]])!==void 0)if(ov(r)===r&&r>=s[t+1]&&r<=s[t+2])this[n]=r;else throw Error(Lm+n+": "+r);if((r=e[n="LN10"])!==void 0)if(r==Math.LN10)this[n]=new this(r);else throw Error(Lm+n+": "+r);return this}var oI=J7(Bpe);Rc=new oI(1);const vi=oI;function Upe(e){return Hpe(e)||Wpe(e)||Gpe(e)||qpe()}function qpe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gpe(e,t){if(e){if(typeof e=="string")return nj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return nj(e,t)}}function Wpe(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Hpe(e){if(Array.isArray(e))return nj(e)}function nj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Zpe=function(t){return t},Q7={},eq=function(t){return t===Q7},iz=function(t){return function n(){return arguments.length===0||arguments.length===1&&eq(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Kpe=function e(t,n){return t===1?n:iz(function(){for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];var d=s.filter(function(o){return o!==Q7}).length;return d>=t?n.apply(void 0,s):e(t-d,iz(function(){for(var o=arguments.length,_=new Array(o),w=0;w<o;w++)_[w]=arguments[w];var A=s.map(function(P){return eq(P)?_.shift():P});return n.apply(void 0,Upe(A).concat(_))}))})},Iw=function(t){return Kpe(t.length,t)},rj=function(t,n){for(var r=[],s=t;s<n;++s)r[s-t]=s;return r},Xpe=Iw(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),Ype=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];if(!n.length)return Zpe;var s=n.reverse(),h=s[0],d=s.slice(1);return function(){return d.reduce(function(o,_){return _(o)},h.apply(void 0,arguments))}},ij=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},tq=function(t){var n=null,r=null;return function(){for(var s=arguments.length,h=new Array(s),d=0;d<s;d++)h[d]=arguments[d];return n&&h.every(function(o,_){return o===n[_]})||(n=h,r=t.apply(void 0,h)),r}};function Jpe(e){var t;return e===0?t=1:t=Math.floor(new vi(e).abs().log(10).toNumber())+1,t}function Qpe(e,t,n){for(var r=new vi(e),s=0,h=[];r.lt(t)&&s<1e5;)h.push(r.toNumber()),r=r.add(n),s++;return h}var eme=Iw(function(e,t,n){var r=+e,s=+t;return r+n*(s-r)}),tme=Iw(function(e,t,n){var r=t-+e;return r=r||1/0,(n-e)/r}),nme=Iw(function(e,t,n){var r=t-+e;return r=r||1/0,Math.max(0,Math.min(1,(n-e)/r))});const Nw={rangeStep:Qpe,getDigitCount:Jpe,interpolateNumber:eme,uninterpolateNumber:tme,uninterpolateTruncation:nme};function aj(e){return ame(e)||ime(e)||nq(e)||rme()}function rme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ime(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function ame(e){if(Array.isArray(e))return oj(e)}function Bx(e,t){return lme(e)||sme(e,t)||nq(e,t)||ome()}function ome(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function nq(e,t){if(e){if(typeof e=="string")return oj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return oj(e,t)}}function oj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sme(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],r=!0,s=!1,h=void 0;try{for(var d=e[Symbol.iterator](),o;!(r=(o=d.next()).done)&&(n.push(o.value),!(t&&n.length===t));r=!0);}catch(_){s=!0,h=_}finally{try{!r&&d.return!=null&&d.return()}finally{if(s)throw h}}return n}}function lme(e){if(Array.isArray(e))return e}function rq(e){var t=Bx(e,2),n=t[0],r=t[1],s=n,h=r;return n>r&&(s=r,h=n),[s,h]}function iq(e,t,n){if(e.lte(0))return new vi(0);var r=Nw.getDigitCount(e.toNumber()),s=new vi(10).pow(r),h=e.div(s),d=r!==1?.05:.1,o=new vi(Math.ceil(h.div(d).toNumber())).add(n).mul(d),_=o.mul(s);return t?_:new vi(Math.ceil(_))}function cme(e,t,n){var r=1,s=new vi(e);if(!s.isint()&&n){var h=Math.abs(e);h<1?(r=new vi(10).pow(Nw.getDigitCount(e)-1),s=new vi(Math.floor(s.div(r).toNumber())).mul(r)):h>1&&(s=new vi(Math.floor(e)))}else e===0?s=new vi(Math.floor((t-1)/2)):n||(s=new vi(Math.floor(e)));var d=Math.floor((t-1)/2),o=Ype(Xpe(function(_){return s.add(new vi(_-d).mul(r)).toNumber()}),rj);return o(0,t)}function aq(e,t,n,r){var s=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new vi(0),tickMin:new vi(0),tickMax:new vi(0)};var h=iq(new vi(t).sub(e).div(n-1),r,s),d;e<=0&&t>=0?d=new vi(0):(d=new vi(e).add(t).div(2),d=d.sub(new vi(d).mod(h)));var o=Math.ceil(d.sub(e).div(h).toNumber()),_=Math.ceil(new vi(t).sub(d).div(h).toNumber()),w=o+_+1;return w>n?aq(e,t,n,r,s+1):(w<n&&(_=t>0?_+(n-w):_,o=t>0?o:o+(n-w)),{step:h,tickMin:d.sub(new vi(o).mul(h)),tickMax:d.add(new vi(_).mul(h))})}function ume(e){var t=Bx(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=Math.max(s,2),o=rq([n,r]),_=Bx(o,2),w=_[0],A=_[1];if(w===-1/0||A===1/0){var P=A===1/0?[w].concat(aj(rj(0,s-1).map(function(){return 1/0}))):[].concat(aj(rj(0,s-1).map(function(){return-1/0})),[A]);return n>r?ij(P):P}if(w===A)return cme(w,s,h);var N=aq(w,A,d,h),z=N.step,q=N.tickMin,$=N.tickMax,O=Nw.rangeStep(q,$.add(new vi(.1).mul(z)),z);return n>r?ij(O):O}function dme(e,t){var n=Bx(e,2),r=n[0],s=n[1],h=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,d=rq([r,s]),o=Bx(d,2),_=o[0],w=o[1];if(_===-1/0||w===1/0)return[r,s];if(_===w)return[_];var A=Math.max(t,2),P=iq(new vi(w).sub(_).div(A-1),h,0),N=[].concat(aj(Nw.rangeStep(new vi(_),new vi(w).sub(new vi(.99).mul(P)),P)),[w]);return r>s?ij(N):N}var hme=tq(ume),fme=tq(dme),pme="Invariant failed";function eg(e,t){throw new Error(pme)}var mme=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function Sy(e){"@babel/helpers - typeof";return Sy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sy(e)}function d1(){return d1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},d1.apply(this,arguments)}function gme(e,t){return _me(e)||xme(e,t)||vme(e,t)||yme()}function yme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vme(e,t){if(e){if(typeof e=="string")return az(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return az(e,t)}}function az(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xme(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function _me(e){if(Array.isArray(e))return e}function bme(e,t){if(e==null)return{};var n=wme(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wme(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Sme(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tme(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,lq(r.key),r)}}function Pme(e,t,n){return t&&Tme(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ame(e,t,n){return t=h1(t),Cme(e,oq()?Reflect.construct(t,n||[],h1(e).constructor):t.apply(e,n))}function Cme(e,t){if(t&&(Sy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eme(e)}function Eme(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(oq=function(){return!!e})()}function h1(e){return h1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},h1(e)}function jme(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&sj(e,t)}function sj(e,t){return sj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},sj(e,t)}function sq(e,t,n){return t=lq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function lq(e){var t=Mme(e,"string");return Sy(t)=="symbol"?t:t+""}function Mme(e,t){if(Sy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Sy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var j0=(function(e){function t(){return Sme(this,t),Ame(this,t,arguments)}return jme(t,e),Pme(t,[{key:"render",value:function(){var r=this.props,s=r.offset,h=r.layout,d=r.width,o=r.dataKey,_=r.data,w=r.dataPointFormatter,A=r.xAxis,P=r.yAxis,N=bme(r,mme),z=Dn(N,!1);this.props.direction==="x"&&A.type!=="number"&&eg();var q=_.map(function($){var O=w($,o),X=O.x,K=O.y,te=O.value,ne=O.errorVal;if(!ne)return null;var H=[],ae,de;if(Array.isArray(ne)){var ye=gme(ne,2);ae=ye[0],de=ye[1]}else ae=de=ne;if(h==="vertical"){var Ae=A.scale,_e=K+s,fe=_e+d,Ee=_e-d,Be=Ae(te-ae),De=Ae(te+de);H.push({x1:De,y1:fe,x2:De,y2:Ee}),H.push({x1:Be,y1:_e,x2:De,y2:_e}),H.push({x1:Be,y1:fe,x2:Be,y2:Ee})}else if(h==="horizontal"){var Je=P.scale,Ve=X+s,et=Ve-d,Ce=Ve+d,We=Je(te-ae),Qe=Je(te+de);H.push({x1:et,y1:Qe,x2:Ce,y2:Qe}),H.push({x1:Ve,y1:We,x2:Ve,y2:Qe}),H.push({x1:et,y1:We,x2:Ce,y2:We})}return je.createElement(Tr,d1({className:"recharts-errorBar",key:"bar-".concat(H.map(function(Re){return"".concat(Re.x1,"-").concat(Re.x2,"-").concat(Re.y1,"-").concat(Re.y2)}))},z),H.map(function(Re){return je.createElement("line",d1({},Re,{key:"line-".concat(Re.x1,"-").concat(Re.x2,"-").concat(Re.y1,"-").concat(Re.y2)}))}))});return je.createElement(Tr,{className:"recharts-errorBars"},q)}}])})(je.Component);sq(j0,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});sq(j0,"displayName","ErrorBar");function $x(e){"@babel/helpers - typeof";return $x=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},$x(e)}function oz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function vm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oz(Object(n),!0).forEach(function(r){kme(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function kme(e,t,n){return t=Ime(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ime(e){var t=Nme(e,"string");return $x(t)=="symbol"?t:t+""}function Nme(e,t){if($x(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if($x(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cq=function(t){var n=t.children,r=t.formattedGraphicalItems,s=t.legendWidth,h=t.legendContent,d=Nc(n,sy);if(!d)return null;var o=sy.defaultProps,_=o!==void 0?vm(vm({},o),d.props):{},w;return d.props&&d.props.payload?w=d.props&&d.props.payload:h==="children"?w=(r||[]).reduce(function(A,P){var N=P.item,z=P.props,q=z.sectors||z.data||[];return A.concat(q.map(function($){return{type:d.props.iconType||N.props.legendType,value:$.name,color:$.fill,payload:$}}))},[]):w=(r||[]).map(function(A){var P=A.item,N=P.type.defaultProps,z=N!==void 0?vm(vm({},N),P.props):{},q=z.dataKey,$=z.name,O=z.legendType,X=z.hide;return{inactive:X,dataKey:q,type:_.iconType||O||"square",color:sI(P),value:$||q,payload:z}}),vm(vm(vm({},_),sy.getWithHeight(d,s)),{},{payload:w,item:d})};function Vx(e){"@babel/helpers - typeof";return Vx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vx(e)}function sz(e){return Lme(e)||Rme(e)||Ome(e)||Dme()}function Dme(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ome(e,t){if(e){if(typeof e=="string")return lj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return lj(e,t)}}function Rme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lme(e){if(Array.isArray(e))return lj(e)}function lj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function lz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ba(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?lz(Object(n),!0).forEach(function(r){cy(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):lz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function cy(e,t,n){return t=zme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zme(e){var t=Fme(e,"string");return Vx(t)=="symbol"?t:t+""}function Fme(e,t){if(Vx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Vx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Na(e,t,n){return lr(e)||lr(t)?n:xo(t)?zc(e,t,n):Xn(t)?t(e):n}function gx(e,t,n,r){var s=Lpe(e,function(o){return Na(o,t)});if(n==="number"){var h=s.filter(function(o){return Qt(o)||parseFloat(o)});return h.length?[kw(h),Tp(h)]:[1/0,-1/0]}var d=r?s.filter(function(o){return!lr(o)}):s;return d.map(function(o){return xo(o)||o instanceof Date?o:""})}var Bme=function(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],s=arguments.length>2?arguments[2]:void 0,h=arguments.length>3?arguments[3]:void 0,d=-1,o=(n=r?.length)!==null&&n!==void 0?n:0;if(o<=1)return 0;if(h&&h.axisType==="angleAxis"&&Math.abs(Math.abs(h.range[1]-h.range[0])-360)<=1e-6)for(var _=h.range,w=0;w<o;w++){var A=w>0?s[w-1].coordinate:s[o-1].coordinate,P=s[w].coordinate,N=w>=o-1?s[0].coordinate:s[w+1].coordinate,z=void 0;if(ol(P-A)!==ol(N-P)){var q=[];if(ol(N-P)===ol(_[1]-_[0])){z=N;var $=P+_[1]-_[0];q[0]=Math.min($,($+A)/2),q[1]=Math.max($,($+A)/2)}else{z=A;var O=N+_[1]-_[0];q[0]=Math.min(P,(O+P)/2),q[1]=Math.max(P,(O+P)/2)}var X=[Math.min(P,(z+P)/2),Math.max(P,(z+P)/2)];if(t>X[0]&&t<=X[1]||t>=q[0]&&t<=q[1]){d=s[w].index;break}}else{var K=Math.min(A,N),te=Math.max(A,N);if(t>(K+P)/2&&t<=(te+P)/2){d=s[w].index;break}}}else for(var ne=0;ne<o;ne++)if(ne===0&&t<=(r[ne].coordinate+r[ne+1].coordinate)/2||ne>0&&ne<o-1&&t>(r[ne].coordinate+r[ne-1].coordinate)/2&&t<=(r[ne].coordinate+r[ne+1].coordinate)/2||ne===o-1&&t>(r[ne].coordinate+r[ne-1].coordinate)/2){d=r[ne].index;break}return d},sI=function(t){var n,r=t,s=r.type.displayName,h=(n=t.type)!==null&&n!==void 0&&n.defaultProps?ba(ba({},t.type.defaultProps),t.props):t.props,d=h.stroke,o=h.fill,_;switch(s){case"Line":_=d;break;case"Area":case"Radar":_=d&&d!=="none"?d:o;break;default:_=o;break}return _},$me=function(t){var n=t.barSize,r=t.totalSize,s=t.stackGroups,h=s===void 0?{}:s;if(!h)return{};for(var d={},o=Object.keys(h),_=0,w=o.length;_<w;_++)for(var A=h[o[_]].stackGroups,P=Object.keys(A),N=0,z=P.length;N<z;N++){var q=A[P[N]],$=q.items,O=q.cateAxisId,X=$.filter(function(de){return df(de.type).indexOf("Bar")>=0});if(X&&X.length){var K=X[0].type.defaultProps,te=K!==void 0?ba(ba({},K),X[0].props):X[0].props,ne=te.barSize,H=te[O];d[H]||(d[H]=[]);var ae=lr(ne)?n:ne;d[H].push({item:X[0],stackList:X.slice(1),barSize:lr(ae)?void 0:sl(ae,r,0)})}}return d},Vme=function(t){var n=t.barGap,r=t.barCategoryGap,s=t.bandSize,h=t.sizeList,d=h===void 0?[]:h,o=t.maxBarSize,_=d.length;if(_<1)return null;var w=sl(n,s,0,!0),A,P=[];if(d[0].barSize===+d[0].barSize){var N=!1,z=s/_,q=d.reduce(function(ne,H){return ne+H.barSize||0},0);q+=(_-1)*w,q>=s&&(q-=(_-1)*w,w=0),q>=s&&z>0&&(N=!0,z*=.9,q=_*z);var $=(s-q)/2>>0,O={offset:$-w,size:0};A=d.reduce(function(ne,H){var ae={item:H.item,position:{offset:O.offset+O.size+w,size:N?z:H.barSize}},de=[].concat(sz(ne),[ae]);return O=de[de.length-1].position,H.stackList&&H.stackList.length&&H.stackList.forEach(function(ye){de.push({item:ye,position:O})}),de},P)}else{var X=sl(r,s,0,!0);s-2*X-(_-1)*w<=0&&(w=0);var K=(s-2*X-(_-1)*w)/_;K>1&&(K>>=0);var te=o===+o?Math.min(K,o):K;A=d.reduce(function(ne,H,ae){var de=[].concat(sz(ne),[{item:H.item,position:{offset:X+(K+w)*ae+(K-te)/2,size:te}}]);return H.stackList&&H.stackList.length&&H.stackList.forEach(function(ye){de.push({item:ye,position:de[de.length-1].position})}),de},P)}return A},Ume=function(t,n,r,s){var h=r.children,d=r.width,o=r.margin,_=d-(o.left||0)-(o.right||0),w=cq({children:h,legendWidth:_});if(w){var A=s||{},P=A.width,N=A.height,z=w.align,q=w.verticalAlign,$=w.layout;if(($==="vertical"||$==="horizontal"&&q==="middle")&&z!=="center"&&Qt(t[z]))return ba(ba({},t),{},cy({},z,t[z]+(P||0)));if(($==="horizontal"||$==="vertical"&&z==="center")&&q!=="middle"&&Qt(t[q]))return ba(ba({},t),{},cy({},q,t[q]+(N||0)))}return t},qme=function(t,n,r){return lr(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||r==="x"?n==="xAxis":r==="y"?n==="yAxis":!0},uq=function(t,n,r,s,h){var d=n.props.children,o=Fc(d,j0).filter(function(w){return qme(s,h,w.props.direction)});if(o&&o.length){var _=o.map(function(w){return w.props.dataKey});return t.reduce(function(w,A){var P=Na(A,r);if(lr(P))return w;var N=Array.isArray(P)?[kw(P),Tp(P)]:[P,P],z=_.reduce(function(q,$){var O=Na(A,$,0),X=N[0]-Math.abs(Array.isArray(O)?O[0]:O),K=N[1]+Math.abs(Array.isArray(O)?O[1]:O);return[Math.min(X,q[0]),Math.max(K,q[1])]},[1/0,-1/0]);return[Math.min(z[0],w[0]),Math.max(z[1],w[1])]},[1/0,-1/0])}return null},Gme=function(t,n,r,s,h){var d=n.map(function(o){return uq(t,o,r,h,s)}).filter(function(o){return!lr(o)});return d&&d.length?d.reduce(function(o,_){return[Math.min(o[0],_[0]),Math.max(o[1],_[1])]},[1/0,-1/0]):null},dq=function(t,n,r,s,h){var d=n.map(function(_){var w=_.props.dataKey;return r==="number"&&w&&uq(t,_,w,s)||gx(t,w,r,h)});if(r==="number")return d.reduce(function(_,w){return[Math.min(_[0],w[0]),Math.max(_[1],w[1])]},[1/0,-1/0]);var o={};return d.reduce(function(_,w){for(var A=0,P=w.length;A<P;A++)o[w[A]]||(o[w[A]]=!0,_.push(w[A]));return _},[])},hq=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},fq=function(t,n,r,s){if(s)return t.map(function(_){return _.coordinate});var h,d,o=t.map(function(_){return _.coordinate===n&&(h=!0),_.coordinate===r&&(d=!0),_.coordinate});return h||o.push(n),d||o.push(r),o},uf=function(t,n,r){if(!t)return null;var s=t.scale,h=t.duplicateDomain,d=t.type,o=t.range,_=t.realScaleType==="scaleBand"?s.bandwidth()/2:2,w=(n||r)&&d==="category"&&s.bandwidth?s.bandwidth()/_:0;if(w=t.axisType==="angleAxis"&&o?.length>=2?ol(o[0]-o[1])*2*w:w,n&&(t.ticks||t.niceTicks)){var A=(t.ticks||t.niceTicks).map(function(P){var N=h?h.indexOf(P):P;return{coordinate:s(N)+w,value:P,offset:w}});return A.filter(function(P){return!nv(P.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(P,N){return{coordinate:s(P)+w,value:P,index:N,offset:w}}):s.ticks&&!r?s.ticks(t.tickCount).map(function(P){return{coordinate:s(P)+w,value:P,offset:w}}):s.domain().map(function(P,N){return{coordinate:s(P)+w,value:h?h[P]:P,index:N,offset:w}})},YA=new WeakMap,K_=function(t,n){if(typeof n!="function")return t;YA.has(t)||YA.set(t,new WeakMap);var r=YA.get(t);if(r.has(n))return r.get(n);var s=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return r.set(n,s),s},pq=function(t,n,r){var s=t.scale,h=t.type,d=t.layout,o=t.axisType;if(s==="auto")return d==="radial"&&o==="radiusAxis"?{scale:Dx(),realScaleType:"band"}:d==="radial"&&o==="angleAxis"?{scale:o1(),realScaleType:"linear"}:h==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!r)?{scale:mx(),realScaleType:"point"}:h==="category"?{scale:Dx(),realScaleType:"band"}:{scale:o1(),realScaleType:"linear"};if(Km(s)){var _="scale".concat(gw(s));return{scale:(H4[_]||mx)(),realScaleType:H4[_]?_:"point"}}return Xn(s)?{scale:s}:{scale:mx(),realScaleType:"point"}},cz=1e-4,mq=function(t){var n=t.domain();if(!(!n||n.length<=2)){var r=n.length,s=t.range(),h=Math.min(s[0],s[1])-cz,d=Math.max(s[0],s[1])+cz,o=t(n[0]),_=t(n[r-1]);(o<h||o>d||_<h||_>d)&&t.domain([n[0],n[r-1]])}},Wme=function(t,n){if(!t)return null;for(var r=0,s=t.length;r<s;r++)if(t[r].item===n)return t[r].position;return null},Hme=function(t,n){if(!n||n.length!==2||!Qt(n[0])||!Qt(n[1]))return t;var r=Math.min(n[0],n[1]),s=Math.max(n[0],n[1]),h=[t[0],t[1]];return(!Qt(t[0])||t[0]<r)&&(h[0]=r),(!Qt(t[1])||t[1]>s)&&(h[1]=s),h[0]>s&&(h[0]=s),h[1]<r&&(h[1]=r),h},Zme=function(t){var n=t.length;if(!(n<=0))for(var r=0,s=t[0].length;r<s;++r)for(var h=0,d=0,o=0;o<n;++o){var _=nv(t[o][r][1])?t[o][r][0]:t[o][r][1];_>=0?(t[o][r][0]=h,t[o][r][1]=h+_,h=t[o][r][1]):(t[o][r][0]=d,t[o][r][1]=d+_,d=t[o][r][1])}},Kme=function(t){var n=t.length;if(!(n<=0))for(var r=0,s=t[0].length;r<s;++r)for(var h=0,d=0;d<n;++d){var o=nv(t[d][r][1])?t[d][r][0]:t[d][r][1];o>=0?(t[d][r][0]=h,t[d][r][1]=h+o,h=t[d][r][1]):(t[d][r][0]=0,t[d][r][1]=0)}},Xme={sign:Zme,expand:Lle,none:my,silhouette:zle,wiggle:Fle,positive:Kme},Yme=function(t,n,r){var s=n.map(function(o){return o.props.dataKey}),h=Xme[r],d=Rle().keys(s).value(function(o,_){return+Na(o,_,0)}).order(zE).offset(h);return d(t)},Jme=function(t,n,r,s,h,d){if(!t)return null;var o=d?n.reverse():n,_={},w=o.reduce(function(P,N){var z,q=(z=N.type)!==null&&z!==void 0&&z.defaultProps?ba(ba({},N.type.defaultProps),N.props):N.props,$=q.stackId,O=q.hide;if(O)return P;var X=q[r],K=P[X]||{hasStack:!1,stackGroups:{}};if(xo($)){var te=K.stackGroups[$]||{numericAxisId:r,cateAxisId:s,items:[]};te.items.push(N),K.hasStack=!0,K.stackGroups[$]=te}else K.stackGroups[rg("_stackId_")]={numericAxisId:r,cateAxisId:s,items:[N]};return ba(ba({},P),{},cy({},X,K))},_),A={};return Object.keys(w).reduce(function(P,N){var z=w[N];if(z.hasStack){var q={};z.stackGroups=Object.keys(z.stackGroups).reduce(function($,O){var X=z.stackGroups[O];return ba(ba({},$),{},cy({},O,{numericAxisId:r,cateAxisId:s,items:X.items,stackedData:Yme(t,X.items,h)}))},q)}return ba(ba({},P),{},cy({},N,z))},A)},gq=function(t,n){var r=n.realScaleType,s=n.type,h=n.tickCount,d=n.originalDomain,o=n.allowDecimals,_=r||n.scale;if(_!=="auto"&&_!=="linear")return null;if(h&&s==="number"&&d&&(d[0]==="auto"||d[1]==="auto")){var w=t.domain();if(!w.length)return null;var A=hme(w,h,o);return t.domain([kw(A),Tp(A)]),{niceTicks:A}}if(h&&s==="number"){var P=t.domain(),N=fme(P,h,o);return{niceTicks:N}}return null};function f1(e){var t=e.axis,n=e.ticks,r=e.bandSize,s=e.entry,h=e.index,d=e.dataKey;if(t.type==="category"){if(!t.allowDuplicatedCategory&&t.dataKey&&!lr(s[t.dataKey])){var o=$b(n,"value",s[t.dataKey]);if(o)return o.coordinate+r/2}return n[h]?n[h].coordinate+r/2:null}var _=Na(s,lr(d)?t.dataKey:d);return lr(_)?null:t.scale(_)}var uz=function(t){var n=t.axis,r=t.ticks,s=t.offset,h=t.bandSize,d=t.entry,o=t.index;if(n.type==="category")return r[o]?r[o].coordinate+s:null;var _=Na(d,n.dataKey,n.domain[o]);return lr(_)?null:n.scale(_)-h/2+s},Qme=function(t){var n=t.numericAxis,r=n.scale.domain();if(n.type==="number"){var s=Math.min(r[0],r[1]),h=Math.max(r[0],r[1]);return s<=0&&h>=0?0:h<0?h:s}return r[0]},ege=function(t,n){var r,s=(r=t.type)!==null&&r!==void 0&&r.defaultProps?ba(ba({},t.type.defaultProps),t.props):t.props,h=s.stackId;if(xo(h)){var d=n[h];if(d){var o=d.items.indexOf(t);return o>=0?d.stackedData[o]:null}}return null},tge=function(t){return t.reduce(function(n,r){return[kw(r.concat([n[0]]).filter(Qt)),Tp(r.concat([n[1]]).filter(Qt))]},[1/0,-1/0])},yq=function(t,n,r){return Object.keys(t).reduce(function(s,h){var d=t[h],o=d.stackedData,_=o.reduce(function(w,A){var P=tge(A.slice(n,r+1));return[Math.min(w[0],P[0]),Math.max(w[1],P[1])]},[1/0,-1/0]);return[Math.min(_[0],s[0]),Math.max(_[1],s[1])]},[1/0,-1/0]).map(function(s){return s===1/0||s===-1/0?0:s})},dz=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,hz=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,cj=function(t,n,r){if(Xn(t))return t(n,r);if(!Array.isArray(t))return n;var s=[];if(Qt(t[0]))s[0]=r?t[0]:Math.min(t[0],n[0]);else if(dz.test(t[0])){var h=+dz.exec(t[0])[1];s[0]=n[0]-h}else Xn(t[0])?s[0]=t[0](n[0]):s[0]=n[0];if(Qt(t[1]))s[1]=r?t[1]:Math.max(t[1],n[1]);else if(hz.test(t[1])){var d=+hz.exec(t[1])[1];s[1]=n[1]+d}else Xn(t[1])?s[1]=t[1](n[1]):s[1]=n[1];return s},p1=function(t,n,r){if(t&&t.scale&&t.scale.bandwidth){var s=t.scale.bandwidth();if(!r||s>0)return s}if(t&&n&&n.length>=2){for(var h=Ok(n,function(P){return P.coordinate}),d=1/0,o=1,_=h.length;o<_;o++){var w=h[o],A=h[o-1];d=Math.min((w.coordinate||0)-(A.coordinate||0),d)}return d===1/0?0:d}return r?void 0:0},fz=function(t,n,r){return!t||!t.length||Jm(t,zc(r,"type.defaultProps.domain"))?n:t},vq=function(t,n){var r=t.type.defaultProps?ba(ba({},t.type.defaultProps),t.props):t.props,s=r.dataKey,h=r.name,d=r.unit,o=r.formatter,_=r.tooltipType,w=r.chartType,A=r.hide;return ba(ba({},Dn(t,!1)),{},{dataKey:s,unit:d,formatter:o,name:h||s,color:sI(t),value:Na(n,s),type:_,payload:n,chartType:w,hide:A})};function Ux(e){"@babel/helpers - typeof";return Ux=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ux(e)}function pz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function af(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pz(Object(n),!0).forEach(function(r){xq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function xq(e,t,n){return t=nge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nge(e){var t=rge(e,"string");return Ux(t)=="symbol"?t:t+""}function rge(e,t){if(Ux(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ux(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ige(e,t){return lge(e)||sge(e,t)||oge(e,t)||age()}function age(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function oge(e,t){if(e){if(typeof e=="string")return mz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mz(e,t)}}function mz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function sge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function lge(e){if(Array.isArray(e))return e}var m1=Math.PI/180,cge=function(t){return t*180/Math.PI},Ni=function(t,n,r,s){return{x:t+Math.cos(-m1*s)*r,y:n+Math.sin(-m1*s)*r}},_q=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(r.left||0)-(r.right||0)),Math.abs(n-(r.top||0)-(r.bottom||0)))/2},uge=function(t,n,r,s,h){var d=t.width,o=t.height,_=t.startAngle,w=t.endAngle,A=sl(t.cx,d,d/2),P=sl(t.cy,o,o/2),N=_q(d,o,r),z=sl(t.innerRadius,N,0),q=sl(t.outerRadius,N,N*.8),$=Object.keys(n);return $.reduce(function(O,X){var K=n[X],te=K.domain,ne=K.reversed,H;if(lr(K.range))s==="angleAxis"?H=[_,w]:s==="radiusAxis"&&(H=[z,q]),ne&&(H=[H[1],H[0]]);else{H=K.range;var ae=H,de=ige(ae,2);_=de[0],w=de[1]}var ye=pq(K,h),Ae=ye.realScaleType,_e=ye.scale;_e.domain(te).range(H),mq(_e);var fe=gq(_e,af(af({},K),{},{realScaleType:Ae})),Ee=af(af(af({},K),fe),{},{range:H,radius:q,realScaleType:Ae,scale:_e,cx:A,cy:P,innerRadius:z,outerRadius:q,startAngle:_,endAngle:w});return af(af({},O),{},xq({},X,Ee))},{})},dge=function(t,n){var r=t.x,s=t.y,h=n.x,d=n.y;return Math.sqrt(Math.pow(r-h,2)+Math.pow(s-d,2))},hge=function(t,n){var r=t.x,s=t.y,h=n.cx,d=n.cy,o=dge({x:r,y:s},{x:h,y:d});if(o<=0)return{radius:o};var _=(r-h)/o,w=Math.acos(_);return s>d&&(w=2*Math.PI-w),{radius:o,angle:cge(w),angleInRadian:w}},fge=function(t){var n=t.startAngle,r=t.endAngle,s=Math.floor(n/360),h=Math.floor(r/360),d=Math.min(s,h);return{startAngle:n-d*360,endAngle:r-d*360}},pge=function(t,n){var r=n.startAngle,s=n.endAngle,h=Math.floor(r/360),d=Math.floor(s/360),o=Math.min(h,d);return t+o*360},gz=function(t,n){var r=t.x,s=t.y,h=hge({x:r,y:s},n),d=h.radius,o=h.angle,_=n.innerRadius,w=n.outerRadius;if(d<_||d>w)return!1;if(d===0)return!0;var A=fge(n),P=A.startAngle,N=A.endAngle,z=o,q;if(P<=N){for(;z>N;)z-=360;for(;z<P;)z+=360;q=z>=P&&z<=N}else{for(;z>P;)z-=360;for(;z<N;)z+=360;q=z>=N&&z<=P}return q?af(af({},n),{},{radius:d,angle:pge(z,n)}):null},bq=function(t){return!W.isValidElement(t)&&!Xn(t)&&typeof t!="boolean"?t.className:""};function qx(e){"@babel/helpers - typeof";return qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qx(e)}var mge=["offset"];function gge(e){return _ge(e)||xge(e)||vge(e)||yge()}function yge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vge(e,t){if(e){if(typeof e=="string")return uj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return uj(e,t)}}function xge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function _ge(e){if(Array.isArray(e))return uj(e)}function uj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function bge(e,t){if(e==null)return{};var n=wge(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function wge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function go(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?yz(Object(n),!0).forEach(function(r){Sge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):yz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Sge(e,t,n){return t=Tge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Tge(e){var t=Pge(e,"string");return qx(t)=="symbol"?t:t+""}function Pge(e,t){if(qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Gx(){return Gx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gx.apply(this,arguments)}var Age=function(t){var n=t.value,r=t.formatter,s=lr(t.children)?n:t.children;return Xn(r)?r(s):s},Cge=function(t,n){var r=ol(n-t),s=Math.min(Math.abs(n-t),360);return r*s},Ege=function(t,n,r){var s=t.position,h=t.viewBox,d=t.offset,o=t.className,_=h,w=_.cx,A=_.cy,P=_.innerRadius,N=_.outerRadius,z=_.startAngle,q=_.endAngle,$=_.clockWise,O=(P+N)/2,X=Cge(z,q),K=X>=0?1:-1,te,ne;s==="insideStart"?(te=z+K*d,ne=$):s==="insideEnd"?(te=q-K*d,ne=!$):s==="end"&&(te=q+K*d,ne=$),ne=X<=0?ne:!ne;var H=Ni(w,A,O,te),ae=Ni(w,A,O,te+(ne?1:-1)*359),de="M".concat(H.x,",").concat(H.y,`
    A`).concat(O,",").concat(O,",0,1,").concat(ne?0:1,`,
    `).concat(ae.x,",").concat(ae.y),ye=lr(t.id)?rg("recharts-radial-line-"):t.id;return je.createElement("text",Gx({},r,{dominantBaseline:"central",className:dr("recharts-radial-bar-label",o)}),je.createElement("defs",null,je.createElement("path",{id:ye,d:de})),je.createElement("textPath",{xlinkHref:"#".concat(ye)},n))},jge=function(t){var n=t.viewBox,r=t.offset,s=t.position,h=n,d=h.cx,o=h.cy,_=h.innerRadius,w=h.outerRadius,A=h.startAngle,P=h.endAngle,N=(A+P)/2;if(s==="outside"){var z=Ni(d,o,w+r,N),q=z.x,$=z.y;return{x:q,y:$,textAnchor:q>=d?"start":"end",verticalAnchor:"middle"}}if(s==="center")return{x:d,y:o,textAnchor:"middle",verticalAnchor:"middle"};if(s==="centerTop")return{x:d,y:o,textAnchor:"middle",verticalAnchor:"start"};if(s==="centerBottom")return{x:d,y:o,textAnchor:"middle",verticalAnchor:"end"};var O=(_+w)/2,X=Ni(d,o,O,N),K=X.x,te=X.y;return{x:K,y:te,textAnchor:"middle",verticalAnchor:"middle"}},Mge=function(t){var n=t.viewBox,r=t.parentViewBox,s=t.offset,h=t.position,d=n,o=d.x,_=d.y,w=d.width,A=d.height,P=A>=0?1:-1,N=P*s,z=P>0?"end":"start",q=P>0?"start":"end",$=w>=0?1:-1,O=$*s,X=$>0?"end":"start",K=$>0?"start":"end";if(h==="top"){var te={x:o+w/2,y:_-P*s,textAnchor:"middle",verticalAnchor:z};return go(go({},te),r?{height:Math.max(_-r.y,0),width:w}:{})}if(h==="bottom"){var ne={x:o+w/2,y:_+A+N,textAnchor:"middle",verticalAnchor:q};return go(go({},ne),r?{height:Math.max(r.y+r.height-(_+A),0),width:w}:{})}if(h==="left"){var H={x:o-O,y:_+A/2,textAnchor:X,verticalAnchor:"middle"};return go(go({},H),r?{width:Math.max(H.x-r.x,0),height:A}:{})}if(h==="right"){var ae={x:o+w+O,y:_+A/2,textAnchor:K,verticalAnchor:"middle"};return go(go({},ae),r?{width:Math.max(r.x+r.width-ae.x,0),height:A}:{})}var de=r?{width:w,height:A}:{};return h==="insideLeft"?go({x:o+O,y:_+A/2,textAnchor:K,verticalAnchor:"middle"},de):h==="insideRight"?go({x:o+w-O,y:_+A/2,textAnchor:X,verticalAnchor:"middle"},de):h==="insideTop"?go({x:o+w/2,y:_+N,textAnchor:"middle",verticalAnchor:q},de):h==="insideBottom"?go({x:o+w/2,y:_+A-N,textAnchor:"middle",verticalAnchor:z},de):h==="insideTopLeft"?go({x:o+O,y:_+N,textAnchor:K,verticalAnchor:q},de):h==="insideTopRight"?go({x:o+w-O,y:_+N,textAnchor:X,verticalAnchor:q},de):h==="insideBottomLeft"?go({x:o+O,y:_+A-N,textAnchor:K,verticalAnchor:z},de):h==="insideBottomRight"?go({x:o+w-O,y:_+A-N,textAnchor:X,verticalAnchor:z},de):tv(h)&&(Qt(h.x)||Mm(h.x))&&(Qt(h.y)||Mm(h.y))?go({x:o+sl(h.x,w),y:_+sl(h.y,A),textAnchor:"end",verticalAnchor:"end"},de):go({x:o+w/2,y:_+A/2,textAnchor:"middle",verticalAnchor:"middle"},de)},kge=function(t){return"cx"in t&&Qt(t.cx)};function Uo(e){var t=e.offset,n=t===void 0?5:t,r=bge(e,mge),s=go({offset:n},r),h=s.viewBox,d=s.position,o=s.value,_=s.children,w=s.content,A=s.className,P=A===void 0?"":A,N=s.textBreakAll;if(!h||lr(o)&&lr(_)&&!W.isValidElement(w)&&!Xn(w))return null;if(W.isValidElement(w))return W.cloneElement(w,s);var z;if(Xn(w)){if(z=W.createElement(w,s),W.isValidElement(z))return z}else z=Age(s);var q=kge(h),$=Dn(s,!0);if(q&&(d==="insideStart"||d==="insideEnd"||d==="end"))return Ege(s,z,$);var O=q?jge(s):Mge(s);return je.createElement(Ym,Gx({className:dr("recharts-label",P)},$,O,{breakAll:N}),z)}Uo.displayName="Label";var wq=function(t){var n=t.cx,r=t.cy,s=t.angle,h=t.startAngle,d=t.endAngle,o=t.r,_=t.radius,w=t.innerRadius,A=t.outerRadius,P=t.x,N=t.y,z=t.top,q=t.left,$=t.width,O=t.height,X=t.clockWise,K=t.labelViewBox;if(K)return K;if(Qt($)&&Qt(O)){if(Qt(P)&&Qt(N))return{x:P,y:N,width:$,height:O};if(Qt(z)&&Qt(q))return{x:z,y:q,width:$,height:O}}return Qt(P)&&Qt(N)?{x:P,y:N,width:0,height:0}:Qt(n)&&Qt(r)?{cx:n,cy:r,startAngle:h||s||0,endAngle:d||s||0,innerRadius:w||0,outerRadius:A||_||o||0,clockWise:X}:t.viewBox?t.viewBox:{}},Ige=function(t,n){return t?t===!0?je.createElement(Uo,{key:"label-implicit",viewBox:n}):xo(t)?je.createElement(Uo,{key:"label-implicit",viewBox:n,value:t}):W.isValidElement(t)?t.type===Uo?W.cloneElement(t,{key:"label-implicit",viewBox:n}):je.createElement(Uo,{key:"label-implicit",content:t,viewBox:n}):Xn(t)?je.createElement(Uo,{key:"label-implicit",content:t,viewBox:n}):tv(t)?je.createElement(Uo,Gx({viewBox:n},t,{key:"label-implicit"})):null:null},Nge=function(t,n){var r=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&r&&!t.label)return null;var s=t.children,h=wq(t),d=Fc(s,Uo).map(function(_,w){return W.cloneElement(_,{viewBox:n||h,key:"label-".concat(w)})});if(!r)return d;var o=Ige(t.label,n||h);return[o].concat(gge(d))};Uo.parseViewBox=wq;Uo.renderCallByParent=Nge;var JA,vz;function Dge(){if(vz)return JA;vz=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return JA=e,JA}var Oge=Dge();const Rge=Kr(Oge);function Wx(e){"@babel/helpers - typeof";return Wx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wx(e)}var Lge=["valueAccessor"],zge=["data","dataKey","clockWise","id","textBreakAll"];function Fge(e){return Uge(e)||Vge(e)||$ge(e)||Bge()}function Bge(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function $ge(e,t){if(e){if(typeof e=="string")return dj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return dj(e,t)}}function Vge(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Uge(e){if(Array.isArray(e))return dj(e)}function dj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function g1(){return g1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g1.apply(this,arguments)}function xz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function _z(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?xz(Object(n),!0).forEach(function(r){qge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):xz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qge(e,t,n){return t=Gge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gge(e){var t=Wge(e,"string");return Wx(t)=="symbol"?t:t+""}function Wge(e,t){if(Wx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Wx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function bz(e,t){if(e==null)return{};var n=Hge(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Zge=function(t){return Array.isArray(t.value)?Rge(t.value):t.value};function gh(e){var t=e.valueAccessor,n=t===void 0?Zge:t,r=bz(e,Lge),s=r.data,h=r.dataKey,d=r.clockWise,o=r.id,_=r.textBreakAll,w=bz(r,zge);return!s||!s.length?null:je.createElement(Tr,{className:"recharts-label-list"},s.map(function(A,P){var N=lr(h)?n(A,P):Na(A&&A.payload,h),z=lr(o)?{}:{id:"".concat(o,"-").concat(P)};return je.createElement(Uo,g1({},Dn(A,!0),w,z,{parentViewBox:A.parentViewBox,value:N,textBreakAll:_,viewBox:Uo.parseViewBox(lr(d)?A:_z(_z({},A),{},{clockWise:d})),key:"label-".concat(P),index:P}))}))}gh.displayName="LabelList";function Kge(e,t){return e?e===!0?je.createElement(gh,{key:"labelList-implicit",data:t}):je.isValidElement(e)||Xn(e)?je.createElement(gh,{key:"labelList-implicit",data:t,content:e}):tv(e)?je.createElement(gh,g1({data:t},e,{key:"labelList-implicit"})):null:null}function Xge(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var r=e.children,s=Fc(r,gh).map(function(d,o){return W.cloneElement(d,{data:t,key:"labelList-".concat(o)})});if(!n)return s;var h=Kge(e.label,t);return[h].concat(Fge(s))}gh.renderCallByParent=Xge;function Hx(e){"@babel/helpers - typeof";return Hx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hx(e)}function hj(){return hj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},hj.apply(this,arguments)}function wz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Sz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?wz(Object(n),!0).forEach(function(r){Yge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):wz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Yge(e,t,n){return t=Jge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jge(e){var t=Qge(e,"string");return Hx(t)=="symbol"?t:t+""}function Qge(e,t){if(Hx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Hx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var eye=function(t,n){var r=ol(n-t),s=Math.min(Math.abs(n-t),359.999);return r*s},X_=function(t){var n=t.cx,r=t.cy,s=t.radius,h=t.angle,d=t.sign,o=t.isExternal,_=t.cornerRadius,w=t.cornerIsExternal,A=_*(o?1:-1)+s,P=Math.asin(_/A)/m1,N=w?h:h+d*P,z=Ni(n,r,A,N),q=Ni(n,r,s,N),$=w?h-d*P:h,O=Ni(n,r,A*Math.cos(P*m1),$);return{center:z,circleTangency:q,lineTangency:O,theta:P}},Sq=function(t){var n=t.cx,r=t.cy,s=t.innerRadius,h=t.outerRadius,d=t.startAngle,o=t.endAngle,_=eye(d,o),w=d+_,A=Ni(n,r,h,d),P=Ni(n,r,h,w),N="M ".concat(A.x,",").concat(A.y,`
    A `).concat(h,",").concat(h,`,0,
    `).concat(+(Math.abs(_)>180),",").concat(+(d>w),`,
    `).concat(P.x,",").concat(P.y,`
  `);if(s>0){var z=Ni(n,r,s,d),q=Ni(n,r,s,w);N+="L ".concat(q.x,",").concat(q.y,`
            A `).concat(s,",").concat(s,`,0,
            `).concat(+(Math.abs(_)>180),",").concat(+(d<=w),`,
            `).concat(z.x,",").concat(z.y," Z")}else N+="L ".concat(n,",").concat(r," Z");return N},tye=function(t){var n=t.cx,r=t.cy,s=t.innerRadius,h=t.outerRadius,d=t.cornerRadius,o=t.forceCornerRadius,_=t.cornerIsExternal,w=t.startAngle,A=t.endAngle,P=ol(A-w),N=X_({cx:n,cy:r,radius:h,angle:w,sign:P,cornerRadius:d,cornerIsExternal:_}),z=N.circleTangency,q=N.lineTangency,$=N.theta,O=X_({cx:n,cy:r,radius:h,angle:A,sign:-P,cornerRadius:d,cornerIsExternal:_}),X=O.circleTangency,K=O.lineTangency,te=O.theta,ne=_?Math.abs(w-A):Math.abs(w-A)-$-te;if(ne<0)return o?"M ".concat(q.x,",").concat(q.y,`
        a`).concat(d,",").concat(d,",0,0,1,").concat(d*2,`,0
        a`).concat(d,",").concat(d,",0,0,1,").concat(-d*2,`,0
      `):Sq({cx:n,cy:r,innerRadius:s,outerRadius:h,startAngle:w,endAngle:A});var H="M ".concat(q.x,",").concat(q.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(z.x,",").concat(z.y,`
    A`).concat(h,",").concat(h,",0,").concat(+(ne>180),",").concat(+(P<0),",").concat(X.x,",").concat(X.y,`
    A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(K.x,",").concat(K.y,`
  `);if(s>0){var ae=X_({cx:n,cy:r,radius:s,angle:w,sign:P,isExternal:!0,cornerRadius:d,cornerIsExternal:_}),de=ae.circleTangency,ye=ae.lineTangency,Ae=ae.theta,_e=X_({cx:n,cy:r,radius:s,angle:A,sign:-P,isExternal:!0,cornerRadius:d,cornerIsExternal:_}),fe=_e.circleTangency,Ee=_e.lineTangency,Be=_e.theta,De=_?Math.abs(w-A):Math.abs(w-A)-Ae-Be;if(De<0&&d===0)return"".concat(H,"L").concat(n,",").concat(r,"Z");H+="L".concat(Ee.x,",").concat(Ee.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(fe.x,",").concat(fe.y,`
      A`).concat(s,",").concat(s,",0,").concat(+(De>180),",").concat(+(P>0),",").concat(de.x,",").concat(de.y,`
      A`).concat(d,",").concat(d,",0,0,").concat(+(P<0),",").concat(ye.x,",").concat(ye.y,"Z")}else H+="L".concat(n,",").concat(r,"Z");return H},nye={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Tq=function(t){var n=Sz(Sz({},nye),t),r=n.cx,s=n.cy,h=n.innerRadius,d=n.outerRadius,o=n.cornerRadius,_=n.forceCornerRadius,w=n.cornerIsExternal,A=n.startAngle,P=n.endAngle,N=n.className;if(d<h||A===P)return null;var z=dr("recharts-sector",N),q=d-h,$=sl(o,q,0,!0),O;return $>0&&Math.abs(A-P)<360?O=tye({cx:r,cy:s,innerRadius:h,outerRadius:d,cornerRadius:Math.min($,q/2),forceCornerRadius:_,cornerIsExternal:w,startAngle:A,endAngle:P}):O=Sq({cx:r,cy:s,innerRadius:h,outerRadius:d,startAngle:A,endAngle:P}),je.createElement("path",hj({},Dn(n,!0),{className:z,d:O,role:"img"}))};function Zx(e){"@babel/helpers - typeof";return Zx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zx(e)}function fj(){return fj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fj.apply(this,arguments)}function Tz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Pz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tz(Object(n),!0).forEach(function(r){rye(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rye(e,t,n){return t=iye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iye(e){var t=aye(e,"string");return Zx(t)=="symbol"?t:t+""}function aye(e,t){if(Zx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Zx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Az={curveBasisClosed:Ple,curveBasisOpen:Ale,curveBasis:Tle,curveBumpX:ule,curveBumpY:dle,curveLinearClosed:Cle,curveLinear:vw,curveMonotoneX:Ele,curveMonotoneY:jle,curveNatural:Mle,curveStep:kle,curveStepAfter:Nle,curveStepBefore:Ile},Y_=function(t){return t.x===+t.x&&t.y===+t.y},Kv=function(t){return t.x},Xv=function(t){return t.y},oye=function(t,n){if(Xn(t))return t;var r="curve".concat(gw(t));return(r==="curveMonotone"||r==="curveBump")&&n?Az["".concat(r).concat(n==="vertical"?"Y":"X")]:Az[r]||vw},sye=function(t){var n=t.type,r=n===void 0?"linear":n,s=t.points,h=s===void 0?[]:s,d=t.baseLine,o=t.layout,_=t.connectNulls,w=_===void 0?!1:_,A=oye(r,o),P=w?h.filter(function($){return Y_($)}):h,N;if(Array.isArray(d)){var z=w?d.filter(function($){return Y_($)}):d,q=P.map(function($,O){return Pz(Pz({},$),{},{base:z[O]})});return o==="vertical"?N=$_().y(Xv).x1(Kv).x0(function($){return $.base.x}):N=$_().x(Kv).y1(Xv).y0(function($){return $.base.y}),N.defined(Y_).curve(A),N(q)}return o==="vertical"&&Qt(d)?N=$_().y(Xv).x1(Kv).x0(d):Qt(d)?N=$_().x(Kv).y1(Xv).y0(d):N=SU().x(Kv).y(Xv),N.defined(Y_).curve(A),N(P)},zm=function(t){var n=t.className,r=t.points,s=t.path,h=t.pathRef;if((!r||!r.length)&&!s)return null;var d=r&&r.length?sye(t):s;return W.createElement("path",fj({},Dn(t,!1),Vb(t),{className:dr("recharts-curve",n),d,ref:h}))},QA={exports:{}},eC,Cz;function lye(){if(Cz)return eC;Cz=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return eC=e,eC}var tC,Ez;function cye(){if(Ez)return tC;Ez=1;var e=lye();function t(){}function n(){}return n.resetWarningCache=t,tC=function(){function r(d,o,_,w,A,P){if(P!==e){var N=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw N.name="Invariant Violation",N}}r.isRequired=r;function s(){return r}var h={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return h.PropTypes=h,h},tC}var jz;function uye(){return jz||(jz=1,QA.exports=cye()()),QA.exports}var dye=uye();const hi=Kr(dye),{getOwnPropertyNames:hye,getOwnPropertySymbols:fye}=Object,{hasOwnProperty:pye}=Object.prototype;function nC(e,t){return function(r,s,h){return e(r,s,h)&&t(r,s,h)}}function J_(e){return function(n,r,s){if(!n||!r||typeof n!="object"||typeof r!="object")return e(n,r,s);const{cache:h}=s,d=h.get(n),o=h.get(r);if(d&&o)return d===r&&o===n;h.set(n,r),h.set(r,n);const _=e(n,r,s);return h.delete(n),h.delete(r),_}}function mye(e){return e?.[Symbol.toStringTag]}function Mz(e){return hye(e).concat(fye(e))}const gye=Object.hasOwn||((e,t)=>pye.call(e,t));function og(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const yye="__v",vye="__o",xye="_owner",{getOwnPropertyDescriptor:kz,keys:Iz}=Object;function _ye(e,t){return e.byteLength===t.byteLength&&y1(new Uint8Array(e),new Uint8Array(t))}function bye(e,t,n){let r=e.length;if(t.length!==r)return!1;for(;r-- >0;)if(!n.equals(e[r],t[r],r,r,e,t,n))return!1;return!0}function wye(e,t){return e.byteLength===t.byteLength&&y1(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function Sye(e,t){return og(e.getTime(),t.getTime())}function Tye(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Pye(e,t){return e===t}function Nz(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),h=e.entries();let d,o,_=0;for(;(d=h.next())&&!d.done;){const w=t.entries();let A=!1,P=0;for(;(o=w.next())&&!o.done;){if(s[P]){P++;continue}const N=d.value,z=o.value;if(n.equals(N[0],z[0],_,P,e,t,n)&&n.equals(N[1],z[1],N[0],z[0],e,t,n)){A=s[P]=!0;break}P++}if(!A)return!1;_++}return!0}const Aye=og;function Cye(e,t,n){const r=Iz(e);let s=r.length;if(Iz(t).length!==s)return!1;for(;s-- >0;)if(!Pq(e,t,n,r[s]))return!1;return!0}function Yv(e,t,n){const r=Mz(e);let s=r.length;if(Mz(t).length!==s)return!1;let h,d,o;for(;s-- >0;)if(h=r[s],!Pq(e,t,n,h)||(d=kz(e,h),o=kz(t,h),(d||o)&&(!d||!o||d.configurable!==o.configurable||d.enumerable!==o.enumerable||d.writable!==o.writable)))return!1;return!0}function Eye(e,t){return og(e.valueOf(),t.valueOf())}function jye(e,t){return e.source===t.source&&e.flags===t.flags}function Dz(e,t,n){const r=e.size;if(r!==t.size)return!1;if(!r)return!0;const s=new Array(r),h=e.values();let d,o;for(;(d=h.next())&&!d.done;){const _=t.values();let w=!1,A=0;for(;(o=_.next())&&!o.done;){if(!s[A]&&n.equals(d.value,o.value,d.value,o.value,e,t,n)){w=s[A]=!0;break}A++}if(!w)return!1}return!0}function y1(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Mye(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function Pq(e,t,n,r){return(r===xye||r===vye||r===yye)&&(e.$$typeof||t.$$typeof)?!0:gye(t,r)&&n.equals(e[r],t[r],r,r,e,t,n)}const kye="[object ArrayBuffer]",Iye="[object Arguments]",Nye="[object Boolean]",Dye="[object DataView]",Oye="[object Date]",Rye="[object Error]",Lye="[object Map]",zye="[object Number]",Fye="[object Object]",Bye="[object RegExp]",$ye="[object Set]",Vye="[object String]",Uye={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},qye="[object URL]",Gye=Object.prototype.toString;function Wye({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:r,areErrorsEqual:s,areFunctionsEqual:h,areMapsEqual:d,areNumbersEqual:o,areObjectsEqual:_,arePrimitiveWrappersEqual:w,areRegExpsEqual:A,areSetsEqual:P,areTypedArraysEqual:N,areUrlsEqual:z,unknownTagComparators:q}){return function(O,X,K){if(O===X)return!0;if(O==null||X==null)return!1;const te=typeof O;if(te!==typeof X)return!1;if(te!=="object")return te==="number"?o(O,X,K):te==="function"?h(O,X,K):!1;const ne=O.constructor;if(ne!==X.constructor)return!1;if(ne===Object)return _(O,X,K);if(Array.isArray(O))return t(O,X,K);if(ne===Date)return r(O,X,K);if(ne===RegExp)return A(O,X,K);if(ne===Map)return d(O,X,K);if(ne===Set)return P(O,X,K);const H=Gye.call(O);if(H===Oye)return r(O,X,K);if(H===Bye)return A(O,X,K);if(H===Lye)return d(O,X,K);if(H===$ye)return P(O,X,K);if(H===Fye)return typeof O.then!="function"&&typeof X.then!="function"&&_(O,X,K);if(H===qye)return z(O,X,K);if(H===Rye)return s(O,X,K);if(H===Iye)return _(O,X,K);if(Uye[H])return N(O,X,K);if(H===kye)return e(O,X,K);if(H===Dye)return n(O,X,K);if(H===Nye||H===zye||H===Vye)return w(O,X,K);if(q){let ae=q[H];if(!ae){const de=mye(O);de&&(ae=q[de])}if(ae)return ae(O,X,K)}return!1}}function Hye({circular:e,createCustomConfig:t,strict:n}){let r={areArrayBuffersEqual:_ye,areArraysEqual:n?Yv:bye,areDataViewsEqual:wye,areDatesEqual:Sye,areErrorsEqual:Tye,areFunctionsEqual:Pye,areMapsEqual:n?nC(Nz,Yv):Nz,areNumbersEqual:Aye,areObjectsEqual:n?Yv:Cye,arePrimitiveWrappersEqual:Eye,areRegExpsEqual:jye,areSetsEqual:n?nC(Dz,Yv):Dz,areTypedArraysEqual:n?nC(y1,Yv):y1,areUrlsEqual:Mye,unknownTagComparators:void 0};if(t&&(r=Object.assign({},r,t(r))),e){const s=J_(r.areArraysEqual),h=J_(r.areMapsEqual),d=J_(r.areObjectsEqual),o=J_(r.areSetsEqual);r=Object.assign({},r,{areArraysEqual:s,areMapsEqual:h,areObjectsEqual:d,areSetsEqual:o})}return r}function Zye(e){return function(t,n,r,s,h,d,o){return e(t,n,o)}}function Kye({circular:e,comparator:t,createState:n,equals:r,strict:s}){if(n)return function(o,_){const{cache:w=e?new WeakMap:void 0,meta:A}=n();return t(o,_,{cache:w,equals:r,meta:A,strict:s})};if(e)return function(o,_){return t(o,_,{cache:new WeakMap,equals:r,meta:void 0,strict:s})};const h={cache:void 0,equals:r,meta:void 0,strict:s};return function(o,_){return t(o,_,h)}}const Xye=Bp();Bp({strict:!0});Bp({circular:!0});Bp({circular:!0,strict:!0});Bp({createInternalComparator:()=>og});Bp({strict:!0,createInternalComparator:()=>og});Bp({circular:!0,createInternalComparator:()=>og});Bp({circular:!0,createInternalComparator:()=>og,strict:!0});function Bp(e={}){const{circular:t=!1,createInternalComparator:n,createState:r,strict:s=!1}=e,h=Hye(e),d=Wye(h),o=n?n(d):Zye(d);return Kye({circular:t,comparator:d,createState:r,equals:o,strict:s})}function Yye(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Oz(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,r=function s(h){n<0&&(n=h),h-n>t?(e(h),n=-1):Yye(s)};requestAnimationFrame(r)}function pj(e){"@babel/helpers - typeof";return pj=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pj(e)}function Jye(e){return nve(e)||tve(e)||eve(e)||Qye()}function Qye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function eve(e,t){if(e){if(typeof e=="string")return Rz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Rz(e,t)}}function Rz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function tve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function nve(e){if(Array.isArray(e))return e}function rve(){var e={},t=function(){return null},n=!1,r=function s(h){if(!n){if(Array.isArray(h)){if(!h.length)return;var d=h,o=Jye(d),_=o[0],w=o.slice(1);if(typeof _=="number"){Oz(s.bind(null,w),_);return}s(_),Oz(s.bind(null,w));return}pj(h)==="object"&&(e=h,t(e)),typeof h=="function"&&h()}};return{stop:function(){n=!0},start:function(h){n=!1,r(h)},subscribe:function(h){return t=h,function(){t=function(){return null}}}}}function Kx(e){"@babel/helpers - typeof";return Kx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kx(e)}function Lz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function zz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Lz(Object(n),!0).forEach(function(r){Aq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Lz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Aq(e,t,n){return t=ive(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ive(e){var t=ave(e,"string");return Kx(t)==="symbol"?t:String(t)}function ave(e,t){if(Kx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Kx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ove=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(r,s){return r.filter(function(h){return s.includes(h)})})},sve=function(t){return t},lve=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},yx=function(t,n){return Object.keys(n).reduce(function(r,s){return zz(zz({},r),{},Aq({},s,t(s,n[s])))},{})},Fz=function(t,n,r){return t.map(function(s){return"".concat(lve(s)," ").concat(n,"ms ").concat(r)}).join(",")};function cve(e,t){return hve(e)||dve(e,t)||Cq(e,t)||uve()}function uve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function hve(e){if(Array.isArray(e))return e}function fve(e){return gve(e)||mve(e)||Cq(e)||pve()}function pve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Cq(e,t){if(e){if(typeof e=="string")return mj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mj(e,t)}}function mve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function gve(e){if(Array.isArray(e))return mj(e)}function mj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var v1=1e-4,Eq=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},jq=function(t,n){return t.map(function(r,s){return r*Math.pow(n,s)}).reduce(function(r,s){return r+s})},Bz=function(t,n){return function(r){var s=Eq(t,n);return jq(s,r)}},yve=function(t,n){return function(r){var s=Eq(t,n),h=[].concat(fve(s.map(function(d,o){return d*o}).slice(1)),[0]);return jq(h,r)}},$z=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=n[0],h=n[1],d=n[2],o=n[3];if(n.length===1)switch(n[0]){case"linear":s=0,h=0,d=1,o=1;break;case"ease":s=.25,h=.1,d=.25,o=1;break;case"ease-in":s=.42,h=0,d=1,o=1;break;case"ease-out":s=.42,h=0,d=.58,o=1;break;case"ease-in-out":s=0,h=0,d=.58,o=1;break;default:{var _=n[0].split("(");if(_[0]==="cubic-bezier"&&_[1].split(")")[0].split(",").length===4){var w=_[1].split(")")[0].split(",").map(function(O){return parseFloat(O)}),A=cve(w,4);s=A[0],h=A[1],d=A[2],o=A[3]}}}var P=Bz(s,d),N=Bz(h,o),z=yve(s,d),q=function(X){return X>1?1:X<0?0:X},$=function(X){for(var K=X>1?1:X,te=K,ne=0;ne<8;++ne){var H=P(te)-K,ae=z(te);if(Math.abs(H-K)<v1||ae<v1)return N(te);te=q(te-H/ae)}return N(te)};return $.isStepper=!1,$},vve=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,r=n===void 0?100:n,s=t.damping,h=s===void 0?8:s,d=t.dt,o=d===void 0?17:d,_=function(A,P,N){var z=-(A-P)*r,q=N*h,$=N+(z-q)*o/1e3,O=N*o/1e3+A;return Math.abs(O-P)<v1&&Math.abs($)<v1?[P,0]:[O,$]};return _.isStepper=!0,_.dt=o,_},xve=function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];var s=n[0];if(typeof s=="string")switch(s){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return $z(s);case"spring":return vve();default:if(s.split("(")[0]==="cubic-bezier")return $z(s)}return typeof s=="function"?s:null};function Xx(e){"@babel/helpers - typeof";return Xx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xx(e)}function Vz(e){return wve(e)||bve(e)||Mq(e)||_ve()}function _ve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wve(e){if(Array.isArray(e))return yj(e)}function Uz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function is(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Uz(Object(n),!0).forEach(function(r){gj(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Uz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function gj(e,t,n){return t=Sve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sve(e){var t=Tve(e,"string");return Xx(t)==="symbol"?t:String(t)}function Tve(e,t){if(Xx(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Xx(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Pve(e,t){return Eve(e)||Cve(e,t)||Mq(e,t)||Ave()}function Ave(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mq(e,t){if(e){if(typeof e=="string")return yj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yj(e,t)}}function yj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Cve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function Eve(e){if(Array.isArray(e))return e}var x1=function(t,n,r){return t+(n-t)*r},vj=function(t){var n=t.from,r=t.to;return n!==r},jve=function e(t,n,r){var s=yx(function(h,d){if(vj(d)){var o=t(d.from,d.to,d.velocity),_=Pve(o,2),w=_[0],A=_[1];return is(is({},d),{},{from:w,velocity:A})}return d},n);return r<1?yx(function(h,d){return vj(d)?is(is({},d),{},{velocity:x1(d.velocity,s[h].velocity,r),from:x1(d.from,s[h].from,r)}):d},n):e(t,s,r-1)};const Mve=(function(e,t,n,r,s){var h=ove(e,t),d=h.reduce(function(O,X){return is(is({},O),{},gj({},X,[e[X],t[X]]))},{}),o=h.reduce(function(O,X){return is(is({},O),{},gj({},X,{from:e[X],velocity:0,to:t[X]}))},{}),_=-1,w,A,P=function(){return null},N=function(){return yx(function(X,K){return K.from},o)},z=function(){return!Object.values(o).filter(vj).length},q=function(X){w||(w=X);var K=X-w,te=K/n.dt;o=jve(n,o,te),s(is(is(is({},e),t),N())),w=X,z()||(_=requestAnimationFrame(P))},$=function(X){A||(A=X);var K=(X-A)/r,te=yx(function(H,ae){return x1.apply(void 0,Vz(ae).concat([n(K)]))},d);if(s(is(is(is({},e),t),te)),K<1)_=requestAnimationFrame(P);else{var ne=yx(function(H,ae){return x1.apply(void 0,Vz(ae).concat([n(1)]))},d);s(is(is(is({},e),t),ne))}};return P=n.isStepper?q:$,function(){return requestAnimationFrame(P),function(){cancelAnimationFrame(_)}}});function Ty(e){"@babel/helpers - typeof";return Ty=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ty(e)}var kve=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ive(e,t){if(e==null)return{};var n=Nve(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Nve(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,h;for(h=0;h<r.length;h++)s=r[h],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function rC(e){return Lve(e)||Rve(e)||Ove(e)||Dve()}function Dve(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ove(e,t){if(e){if(typeof e=="string")return xj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return xj(e,t)}}function Rve(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Lve(e){if(Array.isArray(e))return xj(e)}function xj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function qz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function dd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qz(Object(n),!0).forEach(function(r){ox(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ox(e,t,n){return t=kq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zve(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fve(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,kq(r.key),r)}}function Bve(e,t,n){return t&&Fve(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function kq(e){var t=$ve(e,"string");return Ty(t)==="symbol"?t:String(t)}function $ve(e,t){if(Ty(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ty(r)!=="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Vve(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&_j(e,t)}function _j(e,t){return _j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},_j(e,t)}function Uve(e){var t=qve();return function(){var r=_1(e),s;if(t){var h=_1(this).constructor;s=Reflect.construct(r,arguments,h)}else s=r.apply(this,arguments);return bj(this,s)}}function bj(e,t){if(t&&(Ty(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wj(e)}function wj(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qve(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function _1(e){return _1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},_1(e)}var Td=(function(e){Vve(n,e);var t=Uve(n);function n(r,s){var h;zve(this,n),h=t.call(this,r,s);var d=h.props,o=d.isActive,_=d.attributeName,w=d.from,A=d.to,P=d.steps,N=d.children,z=d.duration;if(h.handleStyleChange=h.handleStyleChange.bind(wj(h)),h.changeStyle=h.changeStyle.bind(wj(h)),!o||z<=0)return h.state={style:{}},typeof N=="function"&&(h.state={style:A}),bj(h);if(P&&P.length)h.state={style:P[0].style};else if(w){if(typeof N=="function")return h.state={style:w},bj(h);h.state={style:_?ox({},_,w):w}}else h.state={style:{}};return h}return Bve(n,[{key:"componentDidMount",value:function(){var s=this.props,h=s.isActive,d=s.canBegin;this.mounted=!0,!(!h||!d)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(s){var h=this.props,d=h.isActive,o=h.canBegin,_=h.attributeName,w=h.shouldReAnimate,A=h.to,P=h.from,N=this.state.style;if(o){if(!d){var z={style:_?ox({},_,A):A};this.state&&N&&(_&&N[_]!==A||!_&&N!==A)&&this.setState(z);return}if(!(Xye(s.to,A)&&s.canBegin&&s.isActive)){var q=!s.canBegin||!s.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var $=q||w?P:s.to;if(this.state&&N){var O={style:_?ox({},_,$):$};(_&&N[_]!==$||!_&&N!==$)&&this.setState(O)}this.runAnimation(dd(dd({},this.props),{},{from:$,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var s=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),s&&s()}},{key:"handleStyleChange",value:function(s){this.changeStyle(s)}},{key:"changeStyle",value:function(s){this.mounted&&this.setState({style:s})}},{key:"runJSAnimation",value:function(s){var h=this,d=s.from,o=s.to,_=s.duration,w=s.easing,A=s.begin,P=s.onAnimationEnd,N=s.onAnimationStart,z=Mve(d,o,xve(w),_,this.changeStyle),q=function(){h.stopJSAnimation=z()};this.manager.start([N,A,q,_,P])}},{key:"runStepAnimation",value:function(s){var h=this,d=s.steps,o=s.begin,_=s.onAnimationStart,w=d[0],A=w.style,P=w.duration,N=P===void 0?0:P,z=function($,O,X){if(X===0)return $;var K=O.duration,te=O.easing,ne=te===void 0?"ease":te,H=O.style,ae=O.properties,de=O.onAnimationEnd,ye=X>0?d[X-1]:O,Ae=ae||Object.keys(H);if(typeof ne=="function"||ne==="spring")return[].concat(rC($),[h.runJSAnimation.bind(h,{from:ye.style,to:H,duration:K,easing:ne}),K]);var _e=Fz(Ae,K,ne),fe=dd(dd(dd({},ye.style),H),{},{transition:_e});return[].concat(rC($),[fe,K,de]).filter(sve)};return this.manager.start([_].concat(rC(d.reduce(z,[A,Math.max(N,o)])),[s.onAnimationEnd]))}},{key:"runAnimation",value:function(s){this.manager||(this.manager=rve());var h=s.begin,d=s.duration,o=s.attributeName,_=s.to,w=s.easing,A=s.onAnimationStart,P=s.onAnimationEnd,N=s.steps,z=s.children,q=this.manager;if(this.unSubscribe=q.subscribe(this.handleStyleChange),typeof w=="function"||typeof z=="function"||w==="spring"){this.runJSAnimation(s);return}if(N.length>1){this.runStepAnimation(s);return}var $=o?ox({},o,_):_,O=Fz(Object.keys($),d,w);q.start([A,h,dd(dd({},$),{},{transition:O}),d,P])}},{key:"render",value:function(){var s=this.props,h=s.children;s.begin;var d=s.duration;s.attributeName,s.easing;var o=s.isActive;s.steps,s.from,s.to,s.canBegin,s.onAnimationEnd,s.shouldReAnimate,s.onAnimationReStart;var _=Ive(s,kve),w=W.Children.count(h),A=this.state.style;if(typeof h=="function")return h(A);if(!o||w===0||d<=0)return h;var P=function(z){var q=z.props,$=q.style,O=$===void 0?{}:$,X=q.className,K=W.cloneElement(z,dd(dd({},_),{},{style:dd(dd({},O),A),className:X}));return K};return w===1?P(W.Children.only(h)):je.createElement("div",null,W.Children.map(h,function(N){return P(N)}))}}]),n})(W.PureComponent);Td.displayName="Animate";Td.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};Td.propTypes={from:hi.oneOfType([hi.object,hi.string]),to:hi.oneOfType([hi.object,hi.string]),attributeName:hi.string,duration:hi.number,begin:hi.number,easing:hi.oneOfType([hi.string,hi.func]),steps:hi.arrayOf(hi.shape({duration:hi.number.isRequired,style:hi.object.isRequired,easing:hi.oneOfType([hi.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),hi.func]),properties:hi.arrayOf("string"),onAnimationEnd:hi.func})),children:hi.oneOfType([hi.node,hi.func]),isActive:hi.bool,canBegin:hi.bool,onAnimationEnd:hi.func,shouldReAnimate:hi.bool,onAnimationStart:hi.func,onAnimationReStart:hi.func};function Yx(e){"@babel/helpers - typeof";return Yx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Yx(e)}function b1(){return b1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b1.apply(this,arguments)}function Gve(e,t){return Kve(e)||Zve(e,t)||Hve(e,t)||Wve()}function Wve(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hve(e,t){if(e){if(typeof e=="string")return Gz(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Gz(e,t)}}function Gz(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Zve(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function Kve(e){if(Array.isArray(e))return e}function Wz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Hz(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Wz(Object(n),!0).forEach(function(r){Xve(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Xve(e,t,n){return t=Yve(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Yve(e){var t=Jve(e,"string");return Yx(t)=="symbol"?t:t+""}function Jve(e,t){if(Yx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Yx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zz=function(t,n,r,s,h){var d=Math.min(Math.abs(r)/2,Math.abs(s)/2),o=s>=0?1:-1,_=r>=0?1:-1,w=s>=0&&r>=0||s<0&&r<0?1:0,A;if(d>0&&h instanceof Array){for(var P=[0,0,0,0],N=0,z=4;N<z;N++)P[N]=h[N]>d?d:h[N];A="M".concat(t,",").concat(n+o*P[0]),P[0]>0&&(A+="A ".concat(P[0],",").concat(P[0],",0,0,").concat(w,",").concat(t+_*P[0],",").concat(n)),A+="L ".concat(t+r-_*P[1],",").concat(n),P[1]>0&&(A+="A ".concat(P[1],",").concat(P[1],",0,0,").concat(w,`,
        `).concat(t+r,",").concat(n+o*P[1])),A+="L ".concat(t+r,",").concat(n+s-o*P[2]),P[2]>0&&(A+="A ".concat(P[2],",").concat(P[2],",0,0,").concat(w,`,
        `).concat(t+r-_*P[2],",").concat(n+s)),A+="L ".concat(t+_*P[3],",").concat(n+s),P[3]>0&&(A+="A ".concat(P[3],",").concat(P[3],",0,0,").concat(w,`,
        `).concat(t,",").concat(n+s-o*P[3])),A+="Z"}else if(d>0&&h===+h&&h>0){var q=Math.min(d,h);A="M ".concat(t,",").concat(n+o*q,`
            A `).concat(q,",").concat(q,",0,0,").concat(w,",").concat(t+_*q,",").concat(n,`
            L `).concat(t+r-_*q,",").concat(n,`
            A `).concat(q,",").concat(q,",0,0,").concat(w,",").concat(t+r,",").concat(n+o*q,`
            L `).concat(t+r,",").concat(n+s-o*q,`
            A `).concat(q,",").concat(q,",0,0,").concat(w,",").concat(t+r-_*q,",").concat(n+s,`
            L `).concat(t+_*q,",").concat(n+s,`
            A `).concat(q,",").concat(q,",0,0,").concat(w,",").concat(t,",").concat(n+s-o*q," Z")}else A="M ".concat(t,",").concat(n," h ").concat(r," v ").concat(s," h ").concat(-r," Z");return A},Qve=function(t,n){if(!t||!n)return!1;var r=t.x,s=t.y,h=n.x,d=n.y,o=n.width,_=n.height;if(Math.abs(o)>0&&Math.abs(_)>0){var w=Math.min(h,h+o),A=Math.max(h,h+o),P=Math.min(d,d+_),N=Math.max(d,d+_);return r>=w&&r<=A&&s>=P&&s<=N}return!1},exe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},lI=function(t){var n=Hz(Hz({},exe),t),r=W.useRef(),s=W.useState(-1),h=Gve(s,2),d=h[0],o=h[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var ne=r.current.getTotalLength();ne&&o(ne)}catch{}},[]);var _=n.x,w=n.y,A=n.width,P=n.height,N=n.radius,z=n.className,q=n.animationEasing,$=n.animationDuration,O=n.animationBegin,X=n.isAnimationActive,K=n.isUpdateAnimationActive;if(_!==+_||w!==+w||A!==+A||P!==+P||A===0||P===0)return null;var te=dr("recharts-rectangle",z);return K?je.createElement(Td,{canBegin:d>0,from:{width:A,height:P,x:_,y:w},to:{width:A,height:P,x:_,y:w},duration:$,animationEasing:q,isActive:K},function(ne){var H=ne.width,ae=ne.height,de=ne.x,ye=ne.y;return je.createElement(Td,{canBegin:d>0,from:"0px ".concat(d===-1?1:d,"px"),to:"".concat(d,"px 0px"),attributeName:"strokeDasharray",begin:O,duration:$,isActive:X,easing:q},je.createElement("path",b1({},Dn(n,!0),{className:te,d:Zz(de,ye,H,ae,N),ref:r})))}):je.createElement("path",b1({},Dn(n,!0),{className:te,d:Zz(_,w,A,P,N)}))},txe=["points","className","baseLinePoints","connectNulls"];function Qg(){return Qg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Qg.apply(this,arguments)}function nxe(e,t){if(e==null)return{};var n=rxe(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function rxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Kz(e){return sxe(e)||oxe(e)||axe(e)||ixe()}function ixe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function axe(e,t){if(e){if(typeof e=="string")return Sj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Sj(e,t)}}function oxe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function sxe(e){if(Array.isArray(e))return Sj(e)}function Sj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Xz=function(t){return t&&t.x===+t.x&&t.y===+t.y},lxe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(r){Xz(r)?n[n.length-1].push(r):n[n.length-1].length>0&&n.push([])}),Xz(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},vx=function(t,n){var r=lxe(t);n&&(r=[r.reduce(function(h,d){return[].concat(Kz(h),Kz(d))},[])]);var s=r.map(function(h){return h.reduce(function(d,o,_){return"".concat(d).concat(_===0?"M":"L").concat(o.x,",").concat(o.y)},"")}).join("");return r.length===1?"".concat(s,"Z"):s},cxe=function(t,n,r){var s=vx(t,r);return"".concat(s.slice(-1)==="Z"?s.slice(0,-1):s,"L").concat(vx(n.reverse(),r).slice(1))},uxe=function(t){var n=t.points,r=t.className,s=t.baseLinePoints,h=t.connectNulls,d=nxe(t,txe);if(!n||!n.length)return null;var o=dr("recharts-polygon",r);if(s&&s.length){var _=d.stroke&&d.stroke!=="none",w=cxe(n,s,h);return je.createElement("g",{className:o},je.createElement("path",Qg({},Dn(d,!0),{fill:w.slice(-1)==="Z"?d.fill:"none",stroke:"none",d:w})),_?je.createElement("path",Qg({},Dn(d,!0),{fill:"none",d:vx(n,h)})):null,_?je.createElement("path",Qg({},Dn(d,!0),{fill:"none",d:vx(s,h)})):null)}var A=vx(n,h);return je.createElement("path",Qg({},Dn(d,!0),{fill:A.slice(-1)==="Z"?d.fill:"none",className:o,d:A}))};function Tj(){return Tj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Tj.apply(this,arguments)}var M0=function(t){var n=t.cx,r=t.cy,s=t.r,h=t.className,d=dr("recharts-dot",h);return n===+n&&r===+r&&s===+s?W.createElement("circle",Tj({},Dn(t,!1),Vb(t),{className:d,cx:n,cy:r,r:s})):null};function Jx(e){"@babel/helpers - typeof";return Jx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jx(e)}var dxe=["x","y","top","left","width","height","className"];function Pj(){return Pj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Pj.apply(this,arguments)}function Yz(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function hxe(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Yz(Object(n),!0).forEach(function(r){fxe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yz(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fxe(e,t,n){return t=pxe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pxe(e){var t=mxe(e,"string");return Jx(t)=="symbol"?t:t+""}function mxe(e,t){if(Jx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Jx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function gxe(e,t){if(e==null)return{};var n=yxe(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function yxe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var vxe=function(t,n,r,s,h,d){return"M".concat(t,",").concat(h,"v").concat(s,"M").concat(d,",").concat(n,"h").concat(r)},xxe=function(t){var n=t.x,r=n===void 0?0:n,s=t.y,h=s===void 0?0:s,d=t.top,o=d===void 0?0:d,_=t.left,w=_===void 0?0:_,A=t.width,P=A===void 0?0:A,N=t.height,z=N===void 0?0:N,q=t.className,$=gxe(t,dxe),O=hxe({x:r,y:h,top:o,left:w,width:P,height:z},$);return!Qt(r)||!Qt(h)||!Qt(P)||!Qt(z)||!Qt(o)||!Qt(w)?null:je.createElement("path",Pj({},Dn(O,!0),{className:dr("recharts-cross",q),d:vxe(r,h,P,z,o,w)}))},iC,Jz;function _xe(){if(Jz)return iC;Jz=1;var e=Mw(),t=W7(),n=Th();function r(s,h){return s&&s.length?e(s,n(h,2),t):void 0}return iC=r,iC}var bxe=_xe();const wxe=Kr(bxe);var aC,Qz;function Sxe(){if(Qz)return aC;Qz=1;var e=Mw(),t=Th(),n=H7();function r(s,h){return s&&s.length?e(s,t(h,2),n):void 0}return aC=r,aC}var Txe=Sxe();const Pxe=Kr(Txe);var Axe=["cx","cy","angle","ticks","axisLine"],Cxe=["ticks","tick","angle","tickFormatter","stroke"];function Py(e){"@babel/helpers - typeof";return Py=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Py(e)}function xx(){return xx=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},xx.apply(this,arguments)}function eF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function xm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eF(Object(n),!0).forEach(function(r){Dw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function tF(e,t){if(e==null)return{};var n=Exe(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Exe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function jxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function nF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Nq(r.key),r)}}function Mxe(e,t,n){return t&&nF(e.prototype,t),n&&nF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function kxe(e,t,n){return t=w1(t),Ixe(e,Iq()?Reflect.construct(t,n||[],w1(e).constructor):t.apply(e,n))}function Ixe(e,t){if(t&&(Py(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Nxe(e)}function Nxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Iq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Iq=function(){return!!e})()}function w1(e){return w1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w1(e)}function Dxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Aj(e,t)}function Aj(e,t){return Aj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Aj(e,t)}function Dw(e,t,n){return t=Nq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Nq(e){var t=Oxe(e,"string");return Py(t)=="symbol"?t:t+""}function Oxe(e,t){if(Py(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Py(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Ow=(function(e){function t(){return jxe(this,t),kxe(this,t,arguments)}return Dxe(t,e),Mxe(t,[{key:"getTickValueCoord",value:function(r){var s=r.coordinate,h=this.props,d=h.angle,o=h.cx,_=h.cy;return Ni(o,_,s,d)}},{key:"getTickTextAnchor",value:function(){var r=this.props.orientation,s;switch(r){case"left":s="end";break;case"right":s="start";break;default:s="middle";break}return s}},{key:"getViewBox",value:function(){var r=this.props,s=r.cx,h=r.cy,d=r.angle,o=r.ticks,_=wxe(o,function(A){return A.coordinate||0}),w=Pxe(o,function(A){return A.coordinate||0});return{cx:s,cy:h,startAngle:d,endAngle:d,innerRadius:w.coordinate||0,outerRadius:_.coordinate||0}}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,h=r.cy,d=r.angle,o=r.ticks,_=r.axisLine,w=tF(r,Axe),A=o.reduce(function(q,$){return[Math.min(q[0],$.coordinate),Math.max(q[1],$.coordinate)]},[1/0,-1/0]),P=Ni(s,h,A[0],d),N=Ni(s,h,A[1],d),z=xm(xm(xm({},Dn(w,!1)),{},{fill:"none"},Dn(_,!1)),{},{x1:P.x,y1:P.y,x2:N.x,y2:N.y});return je.createElement("line",xx({className:"recharts-polar-radius-axis-line"},z))}},{key:"renderTicks",value:function(){var r=this,s=this.props,h=s.ticks,d=s.tick,o=s.angle,_=s.tickFormatter,w=s.stroke,A=tF(s,Cxe),P=this.getTickTextAnchor(),N=Dn(A,!1),z=Dn(d,!1),q=h.map(function($,O){var X=r.getTickValueCoord($),K=xm(xm(xm(xm({textAnchor:P,transform:"rotate(".concat(90-o,", ").concat(X.x,", ").concat(X.y,")")},N),{},{stroke:"none",fill:w},z),{},{index:O},X),{},{payload:$});return je.createElement(Tr,xx({className:dr("recharts-polar-radius-axis-tick",bq(d)),key:"tick-".concat($.coordinate)},Xm(r.props,$,O)),t.renderTickItem(d,K,_?_($.value,O):$.value))});return je.createElement(Tr,{className:"recharts-polar-radius-axis-ticks"},q)}},{key:"render",value:function(){var r=this.props,s=r.ticks,h=r.axisLine,d=r.tick;return!s||!s.length?null:je.createElement(Tr,{className:dr("recharts-polar-radius-axis",this.props.className)},h&&this.renderAxisLine(),d&&this.renderTicks(),Uo.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(r,s,h){var d;return je.isValidElement(r)?d=je.cloneElement(r,s):Xn(r)?d=r(s):d=je.createElement(Ym,xx({},s,{className:"recharts-polar-radius-axis-tick-value"}),h),d}}])})(W.PureComponent);Dw(Ow,"displayName","PolarRadiusAxis");Dw(Ow,"axisType","radiusAxis");Dw(Ow,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function Ay(e){"@babel/helpers - typeof";return Ay=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ay(e)}function Am(){return Am=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Am.apply(this,arguments)}function rF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function _m(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rF(Object(n),!0).forEach(function(r){Rw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Rxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Oq(r.key),r)}}function Lxe(e,t,n){return t&&iF(e.prototype,t),n&&iF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zxe(e,t,n){return t=S1(t),Fxe(e,Dq()?Reflect.construct(t,n||[],S1(e).constructor):t.apply(e,n))}function Fxe(e,t){if(t&&(Ay(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Bxe(e)}function Bxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Dq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Dq=function(){return!!e})()}function S1(e){return S1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},S1(e)}function $xe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Cj(e,t)}function Cj(e,t){return Cj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Cj(e,t)}function Rw(e,t,n){return t=Oq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oq(e){var t=Vxe(e,"string");return Ay(t)=="symbol"?t:t+""}function Vxe(e,t){if(Ay(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ay(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Uxe=Math.PI/180,aF=1e-5,Lw=(function(e){function t(){return Rxe(this,t),zxe(this,t,arguments)}return $xe(t,e),Lxe(t,[{key:"getTickLineCoord",value:function(r){var s=this.props,h=s.cx,d=s.cy,o=s.radius,_=s.orientation,w=s.tickSize,A=w||8,P=Ni(h,d,o,r.coordinate),N=Ni(h,d,o+(_==="inner"?-1:1)*A,r.coordinate);return{x1:P.x,y1:P.y,x2:N.x,y2:N.y}}},{key:"getTickTextAnchor",value:function(r){var s=this.props.orientation,h=Math.cos(-r.coordinate*Uxe),d;return h>aF?d=s==="outer"?"start":"end":h<-aF?d=s==="outer"?"end":"start":d="middle",d}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.cx,h=r.cy,d=r.radius,o=r.axisLine,_=r.axisLineType,w=_m(_m({},Dn(this.props,!1)),{},{fill:"none"},Dn(o,!1));if(_==="circle")return je.createElement(M0,Am({className:"recharts-polar-angle-axis-line"},w,{cx:s,cy:h,r:d}));var A=this.props.ticks,P=A.map(function(N){return Ni(s,h,d,N.coordinate)});return je.createElement(uxe,Am({className:"recharts-polar-angle-axis-line"},w,{points:P}))}},{key:"renderTicks",value:function(){var r=this,s=this.props,h=s.ticks,d=s.tick,o=s.tickLine,_=s.tickFormatter,w=s.stroke,A=Dn(this.props,!1),P=Dn(d,!1),N=_m(_m({},A),{},{fill:"none"},Dn(o,!1)),z=h.map(function(q,$){var O=r.getTickLineCoord(q),X=r.getTickTextAnchor(q),K=_m(_m(_m({textAnchor:X},A),{},{stroke:"none",fill:w},P),{},{index:$,payload:q,x:O.x2,y:O.y2});return je.createElement(Tr,Am({className:dr("recharts-polar-angle-axis-tick",bq(d)),key:"tick-".concat(q.coordinate)},Xm(r.props,q,$)),o&&je.createElement("line",Am({className:"recharts-polar-angle-axis-tick-line"},N,O)),d&&t.renderTickItem(d,K,_?_(q.value,$):q.value))});return je.createElement(Tr,{className:"recharts-polar-angle-axis-ticks"},z)}},{key:"render",value:function(){var r=this.props,s=r.ticks,h=r.radius,d=r.axisLine;return h<=0||!s||!s.length?null:je.createElement(Tr,{className:dr("recharts-polar-angle-axis",this.props.className)},d&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(r,s,h){var d;return je.isValidElement(r)?d=je.cloneElement(r,s):Xn(r)?d=r(s):d=je.createElement(Ym,Am({},s,{className:"recharts-polar-angle-axis-tick-value"}),h),d}}])})(W.PureComponent);Rw(Lw,"displayName","PolarAngleAxis");Rw(Lw,"axisType","angleAxis");Rw(Lw,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var oC,oF;function qxe(){if(oF)return oC;oF=1;var e=WU(),t=e(Object.getPrototypeOf,Object);return oC=t,oC}var sC,sF;function Gxe(){if(sF)return sC;sF=1;var e=Tf(),t=qxe(),n=Pf(),r="[object Object]",s=Function.prototype,h=Object.prototype,d=s.toString,o=h.hasOwnProperty,_=d.call(Object);function w(A){if(!n(A)||e(A)!=r)return!1;var P=t(A);if(P===null)return!0;var N=o.call(P,"constructor")&&P.constructor;return typeof N=="function"&&N instanceof N&&d.call(N)==_}return sC=w,sC}var Wxe=Gxe();const Hxe=Kr(Wxe);var lC,lF;function Zxe(){if(lF)return lC;lF=1;var e=Tf(),t=Pf(),n="[object Boolean]";function r(s){return s===!0||s===!1||t(s)&&e(s)==n}return lC=r,lC}var Kxe=Zxe();const Xxe=Kr(Kxe);function Qx(e){"@babel/helpers - typeof";return Qx=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qx(e)}function T1(){return T1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},T1.apply(this,arguments)}function Yxe(e,t){return t0e(e)||e0e(e,t)||Qxe(e,t)||Jxe()}function Jxe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qxe(e,t){if(e){if(typeof e=="string")return cF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cF(e,t)}}function cF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function e0e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function t0e(e){if(Array.isArray(e))return e}function uF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function dF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?uF(Object(n),!0).forEach(function(r){n0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):uF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function n0e(e,t,n){return t=r0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r0e(e){var t=i0e(e,"string");return Qx(t)=="symbol"?t:t+""}function i0e(e,t){if(Qx(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Qx(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var hF=function(t,n,r,s,h){var d=r-s,o;return o="M ".concat(t,",").concat(n),o+="L ".concat(t+r,",").concat(n),o+="L ".concat(t+r-d/2,",").concat(n+h),o+="L ".concat(t+r-d/2-s,",").concat(n+h),o+="L ".concat(t,",").concat(n," Z"),o},a0e={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},o0e=function(t){var n=dF(dF({},a0e),t),r=W.useRef(),s=W.useState(-1),h=Yxe(s,2),d=h[0],o=h[1];W.useEffect(function(){if(r.current&&r.current.getTotalLength)try{var te=r.current.getTotalLength();te&&o(te)}catch{}},[]);var _=n.x,w=n.y,A=n.upperWidth,P=n.lowerWidth,N=n.height,z=n.className,q=n.animationEasing,$=n.animationDuration,O=n.animationBegin,X=n.isUpdateAnimationActive;if(_!==+_||w!==+w||A!==+A||P!==+P||N!==+N||A===0&&P===0||N===0)return null;var K=dr("recharts-trapezoid",z);return X?je.createElement(Td,{canBegin:d>0,from:{upperWidth:0,lowerWidth:0,height:N,x:_,y:w},to:{upperWidth:A,lowerWidth:P,height:N,x:_,y:w},duration:$,animationEasing:q,isActive:X},function(te){var ne=te.upperWidth,H=te.lowerWidth,ae=te.height,de=te.x,ye=te.y;return je.createElement(Td,{canBegin:d>0,from:"0px ".concat(d===-1?1:d,"px"),to:"".concat(d,"px 0px"),attributeName:"strokeDasharray",begin:O,duration:$,easing:q},je.createElement("path",T1({},Dn(n,!0),{className:K,d:hF(de,ye,ne,H,ae),ref:r})))}):je.createElement("g",null,je.createElement("path",T1({},Dn(n,!0),{className:K,d:hF(_,w,A,P,N)})))},s0e=["option","shapeType","propTransformer","activeClassName","isActive"];function e0(e){"@babel/helpers - typeof";return e0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},e0(e)}function l0e(e,t){if(e==null)return{};var n=c0e(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function c0e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function fF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function P1(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?fF(Object(n),!0).forEach(function(r){u0e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function u0e(e,t,n){return t=d0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d0e(e){var t=h0e(e,"string");return e0(t)=="symbol"?t:t+""}function h0e(e,t){if(e0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(e0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function f0e(e,t){return P1(P1({},t),e)}function p0e(e,t){return e==="symbols"}function pF(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return je.createElement(lI,n);case"trapezoid":return je.createElement(o0e,n);case"sector":return je.createElement(Tq,n);case"symbols":if(p0e(t))return je.createElement(Ck,n);break;default:return null}}function m0e(e){return W.isValidElement(e)?e.props:e}function Rq(e){var t=e.option,n=e.shapeType,r=e.propTransformer,s=r===void 0?f0e:r,h=e.activeClassName,d=h===void 0?"recharts-active-shape":h,o=e.isActive,_=l0e(e,s0e),w;if(W.isValidElement(t))w=W.cloneElement(t,P1(P1({},_),m0e(t)));else if(Xn(t))w=t(_);else if(Hxe(t)&&!Xxe(t)){var A=s(t,_);w=je.createElement(pF,{shapeType:n,elementProps:A})}else{var P=_;w=je.createElement(pF,{shapeType:n,elementProps:P})}return o?je.createElement(Tr,{className:d},w):w}function zw(e,t){return t!=null&&"trapezoids"in e.props}function Fw(e,t){return t!=null&&"sectors"in e.props}function t0(e,t){return t!=null&&"points"in e.props}function g0e(e,t){var n,r,s=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,h=e.y===(t==null||(r=t.labelViewBox)===null||r===void 0?void 0:r.y)||e.y===t.y;return s&&h}function y0e(e,t){var n=e.endAngle===t.endAngle,r=e.startAngle===t.startAngle;return n&&r}function v0e(e,t){var n=e.x===t.x,r=e.y===t.y,s=e.z===t.z;return n&&r&&s}function x0e(e,t){var n;return zw(e,t)?n=g0e:Fw(e,t)?n=y0e:t0(e,t)&&(n=v0e),n}function _0e(e,t){var n;return zw(e,t)?n="trapezoids":Fw(e,t)?n="sectors":t0(e,t)&&(n="points"),n}function b0e(e,t){if(zw(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(Fw(e,t)){var r;return(r=t.tooltipPayload)===null||r===void 0||(r=r[0])===null||r===void 0||(r=r.payload)===null||r===void 0?void 0:r.payload}return t0(e,t)?t.payload:{}}function w0e(e){var t=e.activeTooltipItem,n=e.graphicalItem,r=e.itemData,s=_0e(n,t),h=b0e(n,t),d=r.filter(function(_,w){var A=Jm(h,_),P=n.props[s].filter(function(q){var $=x0e(n,t);return $(q,t)}),N=n.props[s].indexOf(P[P.length-1]),z=w===N;return A&&z}),o=r.indexOf(d[d.length-1]);return o}var pb;function Cy(e){"@babel/helpers - typeof";return Cy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cy(e)}function ey(){return ey=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ey.apply(this,arguments)}function mF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Mi(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?mF(Object(n),!0).forEach(function(r){bu(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):mF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function S0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,zq(r.key),r)}}function T0e(e,t,n){return t&&gF(e.prototype,t),n&&gF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function P0e(e,t,n){return t=A1(t),A0e(e,Lq()?Reflect.construct(t,n||[],A1(e).constructor):t.apply(e,n))}function A0e(e,t){if(t&&(Cy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return C0e(e)}function C0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Lq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Lq=function(){return!!e})()}function A1(e){return A1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A1(e)}function E0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ej(e,t)}function Ej(e,t){return Ej=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Ej(e,t)}function bu(e,t,n){return t=zq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function zq(e){var t=j0e(e,"string");return Cy(t)=="symbol"?t:t+""}function j0e(e,t){if(Cy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Cy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Cf=(function(e){function t(n){var r;return S0e(this,t),r=P0e(this,t,[n]),bu(r,"pieRef",null),bu(r,"sectorRefs",[]),bu(r,"id",rg("recharts-pie-")),bu(r,"handleAnimationEnd",function(){var s=r.props.onAnimationEnd;r.setState({isAnimationFinished:!0}),Xn(s)&&s()}),bu(r,"handleAnimationStart",function(){var s=r.props.onAnimationStart;r.setState({isAnimationFinished:!1}),Xn(s)&&s()}),r.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},r}return E0e(t,e),T0e(t,[{key:"isActiveIndex",value:function(r){var s=this.props.activeIndex;return Array.isArray(s)?s.indexOf(r)!==-1:r===s}},{key:"hasActiveIndex",value:function(){var r=this.props.activeIndex;return Array.isArray(r)?r.length!==0:r||r===0}},{key:"renderLabels",value:function(r){var s=this.props.isAnimationActive;if(s&&!this.state.isAnimationFinished)return null;var h=this.props,d=h.label,o=h.labelLine,_=h.dataKey,w=h.valueKey,A=Dn(this.props,!1),P=Dn(d,!1),N=Dn(o,!1),z=d&&d.offsetRadius||20,q=r.map(function($,O){var X=($.startAngle+$.endAngle)/2,K=Ni($.cx,$.cy,$.outerRadius+z,X),te=Mi(Mi(Mi(Mi({},A),$),{},{stroke:"none"},P),{},{index:O,textAnchor:t.getTextAnchor(K.x,$.cx)},K),ne=Mi(Mi(Mi(Mi({},A),$),{},{fill:"none",stroke:$.fill},N),{},{index:O,points:[Ni($.cx,$.cy,$.outerRadius,X),K]}),H=_;return lr(_)&&lr(w)?H="value":lr(_)&&(H=w),je.createElement(Tr,{key:"label-".concat($.startAngle,"-").concat($.endAngle,"-").concat($.midAngle,"-").concat(O)},o&&t.renderLabelLineItem(o,ne,"line"),t.renderLabelItem(d,te,Na($,H)))});return je.createElement(Tr,{className:"recharts-pie-labels"},q)}},{key:"renderSectorsStatically",value:function(r){var s=this,h=this.props,d=h.activeShape,o=h.blendStroke,_=h.inactiveShape;return r.map(function(w,A){if(w?.startAngle===0&&w?.endAngle===0&&r.length!==1)return null;var P=s.isActiveIndex(A),N=_&&s.hasActiveIndex()?_:null,z=P?d:N,q=Mi(Mi({},w),{},{stroke:o?w.fill:w.stroke,tabIndex:-1});return je.createElement(Tr,ey({ref:function(O){O&&!s.sectorRefs.includes(O)&&s.sectorRefs.push(O)},tabIndex:-1,className:"recharts-pie-sector"},Xm(s.props,w,A),{key:"sector-".concat(w?.startAngle,"-").concat(w?.endAngle,"-").concat(w.midAngle,"-").concat(A)}),je.createElement(Rq,ey({option:z,isActive:P,shapeType:"sector"},q)))})}},{key:"renderSectorsWithAnimation",value:function(){var r=this,s=this.props,h=s.sectors,d=s.isAnimationActive,o=s.animationBegin,_=s.animationDuration,w=s.animationEasing,A=s.animationId,P=this.state,N=P.prevSectors,z=P.prevIsAnimationActive;return je.createElement(Td,{begin:o,duration:_,isActive:d,easing:w,from:{t:0},to:{t:1},key:"pie-".concat(A,"-").concat(z),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(q){var $=q.t,O=[],X=h&&h[0],K=X.startAngle;return h.forEach(function(te,ne){var H=N&&N[ne],ae=ne>0?zc(te,"paddingAngle",0):0;if(H){var de=vo(H.endAngle-H.startAngle,te.endAngle-te.startAngle),ye=Mi(Mi({},te),{},{startAngle:K+ae,endAngle:K+de($)+ae});O.push(ye),K=ye.endAngle}else{var Ae=te.endAngle,_e=te.startAngle,fe=vo(0,Ae-_e),Ee=fe($),Be=Mi(Mi({},te),{},{startAngle:K+ae,endAngle:K+Ee+ae});O.push(Be),K=Be.endAngle}}),je.createElement(Tr,null,r.renderSectorsStatically(O))})}},{key:"attachKeyboardHandlers",value:function(r){var s=this;r.onkeydown=function(h){if(!h.altKey)switch(h.key){case"ArrowLeft":{var d=++s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[d].focus(),s.setState({sectorToFocus:d});break}case"ArrowRight":{var o=--s.state.sectorToFocus<0?s.sectorRefs.length-1:s.state.sectorToFocus%s.sectorRefs.length;s.sectorRefs[o].focus(),s.setState({sectorToFocus:o});break}case"Escape":{s.sectorRefs[s.state.sectorToFocus].blur(),s.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var r=this.props,s=r.sectors,h=r.isAnimationActive,d=this.state.prevSectors;return h&&s&&s.length&&(!d||!Jm(d,s))?this.renderSectorsWithAnimation():this.renderSectorsStatically(s)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var r=this,s=this.props,h=s.hide,d=s.sectors,o=s.className,_=s.label,w=s.cx,A=s.cy,P=s.innerRadius,N=s.outerRadius,z=s.isAnimationActive,q=this.state.isAnimationFinished;if(h||!d||!d.length||!Qt(w)||!Qt(A)||!Qt(P)||!Qt(N))return null;var $=dr("recharts-pie",o);return je.createElement(Tr,{tabIndex:this.props.rootTabIndex,className:$,ref:function(X){r.pieRef=X}},this.renderSectors(),_&&this.renderLabels(d),Uo.renderCallByParent(this.props,null,!1),(!z||q)&&gh.renderCallByParent(this.props,d,!1))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return s.prevIsAnimationActive!==r.isAnimationActive?{prevIsAnimationActive:r.isAnimationActive,prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:[],isAnimationFinished:!0}:r.isAnimationActive&&r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curSectors:r.sectors,prevSectors:s.curSectors,isAnimationFinished:!0}:r.sectors!==s.curSectors?{curSectors:r.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(r,s){return r>s?"start":r<s?"end":"middle"}},{key:"renderLabelLineItem",value:function(r,s,h){if(je.isValidElement(r))return je.cloneElement(r,s);if(Xn(r))return r(s);var d=dr("recharts-pie-label-line",typeof r!="boolean"?r.className:"");return je.createElement(zm,ey({},s,{key:h,type:"linear",className:d}))}},{key:"renderLabelItem",value:function(r,s,h){if(je.isValidElement(r))return je.cloneElement(r,s);var d=h;if(Xn(r)&&(d=r(s),je.isValidElement(d)))return d;var o=dr("recharts-pie-label-text",typeof r!="boolean"&&!Xn(r)?r.className:"");return je.createElement(Ym,ey({},s,{alignmentBaseline:"middle",className:o}),d)}}])})(W.PureComponent);pb=Cf;bu(Cf,"displayName","Pie");bu(Cf,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!Lp.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});bu(Cf,"parseDeltaAngle",function(e,t){var n=ol(t-e),r=Math.min(Math.abs(t-e),360);return n*r});bu(Cf,"getRealPieData",function(e){var t=e.data,n=e.children,r=Dn(e,!1),s=Fc(n,Sw);return t&&t.length?t.map(function(h,d){return Mi(Mi(Mi({payload:h},r),h),s&&s[d]&&s[d].props)}):s&&s.length?s.map(function(h){return Mi(Mi({},r),h.props)}):[]});bu(Cf,"parseCoordinateOfPie",function(e,t){var n=t.top,r=t.left,s=t.width,h=t.height,d=_q(s,h),o=r+sl(e.cx,s,s/2),_=n+sl(e.cy,h,h/2),w=sl(e.innerRadius,d,0),A=sl(e.outerRadius,d,d*.8),P=e.maxRadius||Math.sqrt(s*s+h*h)/2;return{cx:o,cy:_,innerRadius:w,outerRadius:A,maxRadius:P}});bu(Cf,"getComposedData",function(e){var t=e.item,n=e.offset,r=t.type.defaultProps!==void 0?Mi(Mi({},t.type.defaultProps),t.props):t.props,s=pb.getRealPieData(r);if(!s||!s.length)return null;var h=r.cornerRadius,d=r.startAngle,o=r.endAngle,_=r.paddingAngle,w=r.dataKey,A=r.nameKey,P=r.valueKey,N=r.tooltipType,z=Math.abs(r.minAngle),q=pb.parseCoordinateOfPie(r,n),$=pb.parseDeltaAngle(d,o),O=Math.abs($),X=w;lr(w)&&lr(P)?(_d(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),X="value"):lr(w)&&(_d(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),X=P);var K=s.filter(function(ye){return Na(ye,X,0)!==0}).length,te=(O>=360?K:K-1)*_,ne=O-K*z-te,H=s.reduce(function(ye,Ae){var _e=Na(Ae,X,0);return ye+(Qt(_e)?_e:0)},0),ae;if(H>0){var de;ae=s.map(function(ye,Ae){var _e=Na(ye,X,0),fe=Na(ye,A,Ae),Ee=(Qt(_e)?_e:0)/H,Be;Ae?Be=de.endAngle+ol($)*_*(_e!==0?1:0):Be=d;var De=Be+ol($)*((_e!==0?z:0)+Ee*ne),Je=(Be+De)/2,Ve=(q.innerRadius+q.outerRadius)/2,et=[{name:fe,value:_e,payload:ye,dataKey:X,type:N}],Ce=Ni(q.cx,q.cy,Ve,Je);return de=Mi(Mi(Mi({percent:Ee,cornerRadius:h,name:fe,tooltipPayload:et,midAngle:Je,middleRadius:Ve,tooltipPosition:Ce},ye),q),{},{value:Na(ye,X),startAngle:Be,endAngle:De,payload:ye,paddingAngle:ol($)*_}),de})}return Mi(Mi({},q),{},{sectors:ae,data:s})});var cC,yF;function M0e(){if(yF)return cC;yF=1;var e=Math.ceil,t=Math.max;function n(r,s,h,d){for(var o=-1,_=t(e((s-r)/(h||1)),0),w=Array(_);_--;)w[d?_:++o]=r,r+=h;return w}return cC=n,cC}var uC,vF;function Fq(){if(vF)return uC;vF=1;var e=l7(),t=1/0,n=17976931348623157e292;function r(s){if(!s)return s===0?s:0;if(s=e(s),s===t||s===-t){var h=s<0?-1:1;return h*n}return s===s?s:0}return uC=r,uC}var dC,xF;function k0e(){if(xF)return dC;xF=1;var e=M0e(),t=ww(),n=Fq();function r(s){return function(h,d,o){return o&&typeof o!="number"&&t(h,d,o)&&(d=o=void 0),h=n(h),d===void 0?(d=h,h=0):d=n(d),o=o===void 0?h<d?1:-1:n(o),e(h,d,o,s)}}return dC=r,dC}var hC,_F;function I0e(){if(_F)return hC;_F=1;var e=k0e(),t=e();return hC=t,hC}var N0e=I0e();const C1=Kr(N0e);function n0(e){"@babel/helpers - typeof";return n0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n0(e)}function bF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function wF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?bF(Object(n),!0).forEach(function(r){Bq(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):bF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bq(e,t,n){return t=D0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D0e(e){var t=O0e(e,"string");return n0(t)=="symbol"?t:t+""}function O0e(e,t){if(n0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(n0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var R0e=["Webkit","Moz","O","ms"],L0e=function(t,n){var r=t.replace(/(\w)/,function(h){return h.toUpperCase()}),s=R0e.reduce(function(h,d){return wF(wF({},h),{},Bq({},d+r,n))},{});return s[t]=n,s};function Ey(e){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ey(e)}function E1(){return E1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E1.apply(this,arguments)}function SF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function fC(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SF(Object(n),!0).forEach(function(r){Ic(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function z0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function TF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Vq(r.key),r)}}function F0e(e,t,n){return t&&TF(e.prototype,t),n&&TF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function B0e(e,t,n){return t=j1(t),$0e(e,$q()?Reflect.construct(t,n||[],j1(e).constructor):t.apply(e,n))}function $0e(e,t){if(t&&(Ey(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return V0e(e)}function V0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function $q(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return($q=function(){return!!e})()}function j1(e){return j1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},j1(e)}function U0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&jj(e,t)}function jj(e,t){return jj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},jj(e,t)}function Ic(e,t,n){return t=Vq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Vq(e){var t=q0e(e,"string");return Ey(t)=="symbol"?t:t+""}function q0e(e,t){if(Ey(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ey(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var G0e=function(t){var n=t.data,r=t.startIndex,s=t.endIndex,h=t.x,d=t.width,o=t.travellerWidth;if(!n||!n.length)return{};var _=n.length,w=mx().domain(C1(0,_)).range([h,h+d-o]),A=w.domain().map(function(P){return w(P)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:w(r),endX:w(s),scale:w,scaleValues:A}},PF=function(t){return t.changedTouches&&!!t.changedTouches.length},jy=(function(e){function t(n){var r;return z0e(this,t),r=B0e(this,t,[n]),Ic(r,"handleDrag",function(s){r.leaveTimer&&(clearTimeout(r.leaveTimer),r.leaveTimer=null),r.state.isTravellerMoving?r.handleTravellerMove(s):r.state.isSlideMoving&&r.handleSlideDrag(s)}),Ic(r,"handleTouchMove",function(s){s.changedTouches!=null&&s.changedTouches.length>0&&r.handleDrag(s.changedTouches[0])}),Ic(r,"handleDragEnd",function(){r.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var s=r.props,h=s.endIndex,d=s.onDragEnd,o=s.startIndex;d?.({endIndex:h,startIndex:o})}),r.detachDragEndListener()}),Ic(r,"handleLeaveWrapper",function(){(r.state.isTravellerMoving||r.state.isSlideMoving)&&(r.leaveTimer=window.setTimeout(r.handleDragEnd,r.props.leaveTimeOut))}),Ic(r,"handleEnterSlideOrTraveller",function(){r.setState({isTextActive:!0})}),Ic(r,"handleLeaveSlideOrTraveller",function(){r.setState({isTextActive:!1})}),Ic(r,"handleSlideDragStart",function(s){var h=PF(s)?s.changedTouches[0]:s;r.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:h.pageX}),r.attachDragEndListener()}),r.travellerDragStartHandlers={startX:r.handleTravellerDragStart.bind(r,"startX"),endX:r.handleTravellerDragStart.bind(r,"endX")},r.state={},r}return U0e(t,e),F0e(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(r){var s=r.startX,h=r.endX,d=this.state.scaleValues,o=this.props,_=o.gap,w=o.data,A=w.length-1,P=Math.min(s,h),N=Math.max(s,h),z=t.getIndexInRange(d,P),q=t.getIndexInRange(d,N);return{startIndex:z-z%_,endIndex:q===A?A:q-q%_}}},{key:"getTextOfTick",value:function(r){var s=this.props,h=s.data,d=s.tickFormatter,o=s.dataKey,_=Na(h[r],o,r);return Xn(d)?d(_,r):_}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(r){var s=this.state,h=s.slideMoveStartX,d=s.startX,o=s.endX,_=this.props,w=_.x,A=_.width,P=_.travellerWidth,N=_.startIndex,z=_.endIndex,q=_.onChange,$=r.pageX-h;$>0?$=Math.min($,w+A-P-o,w+A-P-d):$<0&&($=Math.max($,w-d,w-o));var O=this.getIndex({startX:d+$,endX:o+$});(O.startIndex!==N||O.endIndex!==z)&&q&&q(O),this.setState({startX:d+$,endX:o+$,slideMoveStartX:r.pageX})}},{key:"handleTravellerDragStart",value:function(r,s){var h=PF(s)?s.changedTouches[0]:s;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:r,brushMoveStartX:h.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(r){var s=this.state,h=s.brushMoveStartX,d=s.movingTravellerId,o=s.endX,_=s.startX,w=this.state[d],A=this.props,P=A.x,N=A.width,z=A.travellerWidth,q=A.onChange,$=A.gap,O=A.data,X={startX:this.state.startX,endX:this.state.endX},K=r.pageX-h;K>0?K=Math.min(K,P+N-z-w):K<0&&(K=Math.max(K,P-w)),X[d]=w+K;var te=this.getIndex(X),ne=te.startIndex,H=te.endIndex,ae=function(){var ye=O.length-1;return d==="startX"&&(o>_?ne%$===0:H%$===0)||o<_&&H===ye||d==="endX"&&(o>_?H%$===0:ne%$===0)||o>_&&H===ye};this.setState(Ic(Ic({},d,w+K),"brushMoveStartX",r.pageX),function(){q&&ae()&&q(te)})}},{key:"handleTravellerMoveKeyboard",value:function(r,s){var h=this,d=this.state,o=d.scaleValues,_=d.startX,w=d.endX,A=this.state[s],P=o.indexOf(A);if(P!==-1){var N=P+r;if(!(N===-1||N>=o.length)){var z=o[N];s==="startX"&&z>=w||s==="endX"&&z<=_||this.setState(Ic({},s,z),function(){h.props.onChange(h.getIndex({startX:h.state.startX,endX:h.state.endX}))})}}}},{key:"renderBackground",value:function(){var r=this.props,s=r.x,h=r.y,d=r.width,o=r.height,_=r.fill,w=r.stroke;return je.createElement("rect",{stroke:w,fill:_,x:s,y:h,width:d,height:o})}},{key:"renderPanorama",value:function(){var r=this.props,s=r.x,h=r.y,d=r.width,o=r.height,_=r.data,w=r.children,A=r.padding,P=W.Children.only(w);return P?je.cloneElement(P,{x:s,y:h,width:d,height:o,margin:A,compact:!0,data:_}):null}},{key:"renderTravellerLayer",value:function(r,s){var h,d,o=this,_=this.props,w=_.y,A=_.travellerWidth,P=_.height,N=_.traveller,z=_.ariaLabel,q=_.data,$=_.startIndex,O=_.endIndex,X=Math.max(r,this.props.x),K=fC(fC({},Dn(this.props,!1)),{},{x:X,y:w,width:A,height:P}),te=z||"Min value: ".concat((h=q[$])===null||h===void 0?void 0:h.name,", Max value: ").concat((d=q[O])===null||d===void 0?void 0:d.name);return je.createElement(Tr,{tabIndex:0,role:"slider","aria-label":te,"aria-valuenow":r,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[s],onTouchStart:this.travellerDragStartHandlers[s],onKeyDown:function(H){["ArrowLeft","ArrowRight"].includes(H.key)&&(H.preventDefault(),H.stopPropagation(),o.handleTravellerMoveKeyboard(H.key==="ArrowRight"?1:-1,s))},onFocus:function(){o.setState({isTravellerFocused:!0})},onBlur:function(){o.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(N,K))}},{key:"renderSlide",value:function(r,s){var h=this.props,d=h.y,o=h.height,_=h.stroke,w=h.travellerWidth,A=Math.min(r,s)+w,P=Math.max(Math.abs(s-r)-w,0);return je.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:_,fillOpacity:.2,x:A,y:d,width:P,height:o})}},{key:"renderText",value:function(){var r=this.props,s=r.startIndex,h=r.endIndex,d=r.y,o=r.height,_=r.travellerWidth,w=r.stroke,A=this.state,P=A.startX,N=A.endX,z=5,q={pointerEvents:"none",fill:w};return je.createElement(Tr,{className:"recharts-brush-texts"},je.createElement(Ym,E1({textAnchor:"end",verticalAnchor:"middle",x:Math.min(P,N)-z,y:d+o/2},q),this.getTextOfTick(s)),je.createElement(Ym,E1({textAnchor:"start",verticalAnchor:"middle",x:Math.max(P,N)+_+z,y:d+o/2},q),this.getTextOfTick(h)))}},{key:"render",value:function(){var r=this.props,s=r.data,h=r.className,d=r.children,o=r.x,_=r.y,w=r.width,A=r.height,P=r.alwaysShowText,N=this.state,z=N.startX,q=N.endX,$=N.isTextActive,O=N.isSlideMoving,X=N.isTravellerMoving,K=N.isTravellerFocused;if(!s||!s.length||!Qt(o)||!Qt(_)||!Qt(w)||!Qt(A)||w<=0||A<=0)return null;var te=dr("recharts-brush",h),ne=je.Children.count(d)===1,H=L0e("userSelect","none");return je.createElement(Tr,{className:te,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:H},this.renderBackground(),ne&&this.renderPanorama(),this.renderSlide(z,q),this.renderTravellerLayer(z,"startX"),this.renderTravellerLayer(q,"endX"),($||O||X||K||P)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(r){var s=r.x,h=r.y,d=r.width,o=r.height,_=r.stroke,w=Math.floor(h+o/2)-1;return je.createElement(je.Fragment,null,je.createElement("rect",{x:s,y:h,width:d,height:o,fill:_,stroke:"none"}),je.createElement("line",{x1:s+1,y1:w,x2:s+d-1,y2:w,fill:"none",stroke:"#fff"}),je.createElement("line",{x1:s+1,y1:w+2,x2:s+d-1,y2:w+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(r,s){var h;return je.isValidElement(r)?h=je.cloneElement(r,s):Xn(r)?h=r(s):h=t.renderDefaultTraveller(s),h}},{key:"getDerivedStateFromProps",value:function(r,s){var h=r.data,d=r.width,o=r.x,_=r.travellerWidth,w=r.updateId,A=r.startIndex,P=r.endIndex;if(h!==s.prevData||w!==s.prevUpdateId)return fC({prevData:h,prevTravellerWidth:_,prevUpdateId:w,prevX:o,prevWidth:d},h&&h.length?G0e({data:h,width:d,x:o,travellerWidth:_,startIndex:A,endIndex:P}):{scale:null,scaleValues:null});if(s.scale&&(d!==s.prevWidth||o!==s.prevX||_!==s.prevTravellerWidth)){s.scale.range([o,o+d-_]);var N=s.scale.domain().map(function(z){return s.scale(z)});return{prevData:h,prevTravellerWidth:_,prevUpdateId:w,prevX:o,prevWidth:d,startX:s.scale(r.startIndex),endX:s.scale(r.endIndex),scaleValues:N}}return null}},{key:"getIndexInRange",value:function(r,s){for(var h=r.length,d=0,o=h-1;o-d>1;){var _=Math.floor((d+o)/2);r[_]>s?o=_:d=_}return s>=r[o]?o:d}}])})(W.PureComponent);Ic(jy,"displayName","Brush");Ic(jy,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var pC,AF;function W0e(){if(AF)return pC;AF=1;var e=Dk();function t(n,r){var s;return e(n,function(h,d,o){return s=r(h,d,o),!s}),!!s}return pC=t,pC}var mC,CF;function H0e(){if(CF)return mC;CF=1;var e=FU(),t=Th(),n=W0e(),r=Hl(),s=ww();function h(d,o,_){var w=r(d)?e:n;return _&&s(d,o,_)&&(o=void 0),w(d,t(o,3))}return mC=h,mC}var Z0e=H0e();const K0e=Kr(Z0e);var yh=function(t,n){var r=t.alwaysShow,s=t.ifOverflow;return r&&(s="extendDomain"),s===n},gC,EF;function X0e(){if(EF)return gC;EF=1;var e=r7();function t(n,r,s){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:s,writable:!0}):n[r]=s}return gC=t,gC}var yC,jF;function Y0e(){if(jF)return yC;jF=1;var e=X0e(),t=t7(),n=Th();function r(s,h){var d={};return h=n(h,3),t(s,function(o,_,w){e(d,_,h(o,_,w))}),d}return yC=r,yC}var J0e=Y0e();const Q0e=Kr(J0e);var vC,MF;function e_e(){if(MF)return vC;MF=1;function e(t,n){for(var r=-1,s=t==null?0:t.length;++r<s;)if(!n(t[r],r,t))return!1;return!0}return vC=e,vC}var xC,kF;function t_e(){if(kF)return xC;kF=1;var e=Dk();function t(n,r){var s=!0;return e(n,function(h,d,o){return s=!!r(h,d,o),s}),s}return xC=t,xC}var _C,IF;function n_e(){if(IF)return _C;IF=1;var e=e_e(),t=t_e(),n=Th(),r=Hl(),s=ww();function h(d,o,_){var w=r(d)?e:t;return _&&s(d,o,_)&&(o=void 0),w(d,n(o,3))}return _C=h,_C}var r_e=n_e();const Uq=Kr(r_e);var i_e=["x","y"];function r0(e){"@babel/helpers - typeof";return r0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r0(e)}function Mj(){return Mj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mj.apply(this,arguments)}function NF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Jv(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?NF(Object(n),!0).forEach(function(r){a_e(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):NF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function a_e(e,t,n){return t=o_e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o_e(e){var t=s_e(e,"string");return r0(t)=="symbol"?t:t+""}function s_e(e,t){if(r0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(r0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function l_e(e,t){if(e==null)return{};var n=c_e(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function c_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function u_e(e,t){var n=e.x,r=e.y,s=l_e(e,i_e),h="".concat(n),d=parseInt(h,10),o="".concat(r),_=parseInt(o,10),w="".concat(t.height||s.height),A=parseInt(w,10),P="".concat(t.width||s.width),N=parseInt(P,10);return Jv(Jv(Jv(Jv(Jv({},t),s),d?{x:d}:{}),_?{y:_}:{}),{},{height:A,width:N,name:t.name,radius:t.radius})}function DF(e){return je.createElement(Rq,Mj({shapeType:"rectangle",propTransformer:u_e,activeClassName:"recharts-active-bar"},e))}var d_e=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(r,s){if(typeof t=="number")return t;var h=Qt(r)||Ise(r);return h?t(r,s):(h||eg(),n)}},h_e=["value","background"],qq;function My(e){"@babel/helpers - typeof";return My=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},My(e)}function f_e(e,t){if(e==null)return{};var n=p_e(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function p_e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function M1(){return M1=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},M1.apply(this,arguments)}function OF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?OF(Object(n),!0).forEach(function(r){Pp(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):OF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function m_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function RF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Wq(r.key),r)}}function g_e(e,t,n){return t&&RF(e.prototype,t),n&&RF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function y_e(e,t,n){return t=k1(t),v_e(e,Gq()?Reflect.construct(t,n||[],k1(e).constructor):t.apply(e,n))}function v_e(e,t){if(t&&(My(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return x_e(e)}function x_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Gq(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Gq=function(){return!!e})()}function k1(e){return k1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k1(e)}function __e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kj(e,t)}function kj(e,t){return kj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},kj(e,t)}function Pp(e,t,n){return t=Wq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Wq(e){var t=b_e(e,"string");return My(t)=="symbol"?t:t+""}function b_e(e,t){if(My(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(My(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var k0=(function(e){function t(){var n;m_e(this,t);for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];return n=y_e(this,t,[].concat(s)),Pp(n,"state",{isAnimationFinished:!1}),Pp(n,"id",rg("recharts-bar-")),Pp(n,"handleAnimationEnd",function(){var d=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),d&&d()}),Pp(n,"handleAnimationStart",function(){var d=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),d&&d()}),n}return __e(t,e),g_e(t,[{key:"renderRectanglesStatically",value:function(r){var s=this,h=this.props,d=h.shape,o=h.dataKey,_=h.activeIndex,w=h.activeBar,A=Dn(this.props,!1);return r&&r.map(function(P,N){var z=N===_,q=z?w:d,$=Za(Za(Za({},A),P),{},{isActive:z,option:q,index:N,dataKey:o,onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd});return je.createElement(Tr,M1({className:"recharts-bar-rectangle"},Xm(s.props,P,N),{key:"rectangle-".concat(P?.x,"-").concat(P?.y,"-").concat(P?.value,"-").concat(N)}),je.createElement(DF,$))})}},{key:"renderRectanglesWithAnimation",value:function(){var r=this,s=this.props,h=s.data,d=s.layout,o=s.isAnimationActive,_=s.animationBegin,w=s.animationDuration,A=s.animationEasing,P=s.animationId,N=this.state.prevData;return je.createElement(Td,{begin:_,duration:w,isActive:o,easing:A,from:{t:0},to:{t:1},key:"bar-".concat(P),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(z){var q=z.t,$=h.map(function(O,X){var K=N&&N[X];if(K){var te=vo(K.x,O.x),ne=vo(K.y,O.y),H=vo(K.width,O.width),ae=vo(K.height,O.height);return Za(Za({},O),{},{x:te(q),y:ne(q),width:H(q),height:ae(q)})}if(d==="horizontal"){var de=vo(0,O.height),ye=de(q);return Za(Za({},O),{},{y:O.y+O.height-ye,height:ye})}var Ae=vo(0,O.width),_e=Ae(q);return Za(Za({},O),{},{width:_e})});return je.createElement(Tr,null,r.renderRectanglesStatically($))})}},{key:"renderRectangles",value:function(){var r=this.props,s=r.data,h=r.isAnimationActive,d=this.state.prevData;return h&&s&&s.length&&(!d||!Jm(d,s))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(s)}},{key:"renderBackground",value:function(){var r=this,s=this.props,h=s.data,d=s.dataKey,o=s.activeIndex,_=Dn(this.props.background,!1);return h.map(function(w,A){w.value;var P=w.background,N=f_e(w,h_e);if(!P)return null;var z=Za(Za(Za(Za(Za({},N),{},{fill:"#eee"},P),_),Xm(r.props,w,A)),{},{onAnimationStart:r.handleAnimationStart,onAnimationEnd:r.handleAnimationEnd,dataKey:d,index:A,className:"recharts-bar-background-rectangle"});return je.createElement(DF,M1({key:"background-bar-".concat(A),option:r.props.background,isActive:A===o},z))})}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var h=this.props,d=h.data,o=h.xAxis,_=h.yAxis,w=h.layout,A=h.children,P=Fc(A,j0);if(!P)return null;var N=w==="vertical"?d[0].height/2:d[0].width/2,z=function(O,X){var K=Array.isArray(O.value)?O.value[1]:O.value;return{x:O.x,y:O.y,value:K,errorVal:Na(O,X)}},q={clipPath:r?"url(#clipPath-".concat(s,")"):null};return je.createElement(Tr,q,P.map(function($){return je.cloneElement($,{key:"error-bar-".concat(s,"-").concat($.props.dataKey),data:d,xAxis:o,yAxis:_,layout:w,offset:N,dataPointFormatter:z})}))}},{key:"render",value:function(){var r=this.props,s=r.hide,h=r.data,d=r.className,o=r.xAxis,_=r.yAxis,w=r.left,A=r.top,P=r.width,N=r.height,z=r.isAnimationActive,q=r.background,$=r.id;if(s||!h||!h.length)return null;var O=this.state.isAnimationFinished,X=dr("recharts-bar",d),K=o&&o.allowDataOverflow,te=_&&_.allowDataOverflow,ne=K||te,H=lr($)?this.id:$;return je.createElement(Tr,{className:X},K||te?je.createElement("defs",null,je.createElement("clipPath",{id:"clipPath-".concat(H)},je.createElement("rect",{x:K?w:w-P/2,y:te?A:A-N/2,width:K?P:P*2,height:te?N:N*2}))):null,je.createElement(Tr,{className:"recharts-bar-rectangles",clipPath:ne?"url(#clipPath-".concat(H,")"):null},q?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(ne,H),(!z||O)&&gh.renderCallByParent(this.props,h))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curData:r.data,prevData:s.curData}:r.data!==s.curData?{curData:r.data}:null}}])})(W.PureComponent);qq=k0;Pp(k0,"displayName","Bar");Pp(k0,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!Lp.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});Pp(k0,"getComposedData",function(e){var t=e.props,n=e.item,r=e.barPosition,s=e.bandSize,h=e.xAxis,d=e.yAxis,o=e.xAxisTicks,_=e.yAxisTicks,w=e.stackedData,A=e.dataStartIndex,P=e.displayedData,N=e.offset,z=Wme(r,n);if(!z)return null;var q=t.layout,$=n.type.defaultProps,O=$!==void 0?Za(Za({},$),n.props):n.props,X=O.dataKey,K=O.children,te=O.minPointSize,ne=q==="horizontal"?d:h,H=w?ne.scale.domain():null,ae=Qme({numericAxis:ne}),de=Fc(K,Sw),ye=P.map(function(Ae,_e){var fe,Ee,Be,De,Je,Ve;w?fe=Hme(w[A+_e],H):(fe=Na(Ae,X),Array.isArray(fe)||(fe=[ae,fe]));var et=d_e(te,qq.defaultProps.minPointSize)(fe[1],_e);if(q==="horizontal"){var Ce,We=[d.scale(fe[0]),d.scale(fe[1])],Qe=We[0],Re=We[1];Ee=uz({axis:h,ticks:o,bandSize:s,offset:z.offset,entry:Ae,index:_e}),Be=(Ce=Re??Qe)!==null&&Ce!==void 0?Ce:void 0,De=z.size;var nt=Qe-Re;if(Je=Number.isNaN(nt)?0:nt,Ve={x:Ee,y:d.y,width:De,height:d.height},Math.abs(et)>0&&Math.abs(Je)<Math.abs(et)){var pt=ol(Je||et)*(Math.abs(et)-Math.abs(Je));Be-=pt,Je+=pt}}else{var Ct=[h.scale(fe[0]),h.scale(fe[1])],Mt=Ct[0],Nt=Ct[1];if(Ee=Mt,Be=uz({axis:d,ticks:_,bandSize:s,offset:z.offset,entry:Ae,index:_e}),De=Nt-Mt,Je=z.size,Ve={x:h.x,y:Be,width:h.width,height:Je},Math.abs(et)>0&&Math.abs(De)<Math.abs(et)){var Tt=ol(De||et)*(Math.abs(et)-Math.abs(De));De+=Tt}}return Za(Za(Za({},Ae),{},{x:Ee,y:Be,width:De,height:Je,value:w?fe:fe[1],payload:Ae,background:Ve},de&&de[_e]&&de[_e].props),{},{tooltipPayload:[vq(n,Ae)],tooltipPosition:{x:Ee+De/2,y:Be+Je/2}})});return Za({data:ye,layout:q},N)});function i0(e){"@babel/helpers - typeof";return i0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i0(e)}function w_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function LF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Hq(r.key),r)}}function S_e(e,t,n){return t&&LF(e.prototype,t),n&&LF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function pd(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?zF(Object(n),!0).forEach(function(r){Bw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Bw(e,t,n){return t=Hq(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Hq(e){var t=T_e(e,"string");return i0(t)=="symbol"?t:t+""}function T_e(e,t){if(i0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(i0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Zq=function(t,n,r,s,h){var d=t.width,o=t.height,_=t.layout,w=t.children,A=Object.keys(n),P={left:r.left,leftMirror:r.left,right:d-r.right,rightMirror:d-r.right,top:r.top,topMirror:r.top,bottom:o-r.bottom,bottomMirror:o-r.bottom},N=!!Nc(w,k0);return A.reduce(function(z,q){var $=n[q],O=$.orientation,X=$.domain,K=$.padding,te=K===void 0?{}:K,ne=$.mirror,H=$.reversed,ae="".concat(O).concat(ne?"Mirror":""),de,ye,Ae,_e,fe;if($.type==="number"&&($.padding==="gap"||$.padding==="no-gap")){var Ee=X[1]-X[0],Be=1/0,De=$.categoricalDomain.sort(Ose);if(De.forEach(function(Ct,Mt){Mt>0&&(Be=Math.min((Ct||0)-(De[Mt-1]||0),Be))}),Number.isFinite(Be)){var Je=Be/Ee,Ve=$.layout==="vertical"?r.height:r.width;if($.padding==="gap"&&(de=Je*Ve/2),$.padding==="no-gap"){var et=sl(t.barCategoryGap,Je*Ve),Ce=Je*Ve/2;de=Ce-et-(Ce-et)/Ve*et}}}s==="xAxis"?ye=[r.left+(te.left||0)+(de||0),r.left+r.width-(te.right||0)-(de||0)]:s==="yAxis"?ye=_==="horizontal"?[r.top+r.height-(te.bottom||0),r.top+(te.top||0)]:[r.top+(te.top||0)+(de||0),r.top+r.height-(te.bottom||0)-(de||0)]:ye=$.range,H&&(ye=[ye[1],ye[0]]);var We=pq($,h,N),Qe=We.scale,Re=We.realScaleType;Qe.domain(X).range(ye),mq(Qe);var nt=gq(Qe,pd(pd({},$),{},{realScaleType:Re}));s==="xAxis"?(fe=O==="top"&&!ne||O==="bottom"&&ne,Ae=r.left,_e=P[ae]-fe*$.height):s==="yAxis"&&(fe=O==="left"&&!ne||O==="right"&&ne,Ae=P[ae]-fe*$.width,_e=r.top);var pt=pd(pd(pd({},$),nt),{},{realScaleType:Re,x:Ae,y:_e,scale:Qe,width:s==="xAxis"?r.width:$.width,height:s==="yAxis"?r.height:$.height});return pt.bandSize=p1(pt,nt),!$.hide&&s==="xAxis"?P[ae]+=(fe?-1:1)*pt.height:$.hide||(P[ae]+=(fe?-1:1)*pt.width),pd(pd({},z),{},Bw({},q,pt))},{})},Kq=function(t,n){var r=t.x,s=t.y,h=n.x,d=n.y;return{x:Math.min(r,h),y:Math.min(s,d),width:Math.abs(h-r),height:Math.abs(d-s)}},P_e=function(t){var n=t.x1,r=t.y1,s=t.x2,h=t.y2;return Kq({x:n,y:r},{x:s,y:h})},Xq=(function(){function e(t){w_e(this,e),this.scale=t}return S_e(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.bandAware,h=r.position;if(n!==void 0){if(h)switch(h){case"start":return this.scale(n);case"middle":{var d=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+d}case"end":{var o=this.bandwidth?this.bandwidth():0;return this.scale(n)+o}default:return this.scale(n)}if(s){var _=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+_}return this.scale(n)}}},{key:"isInRange",value:function(n){var r=this.range(),s=r[0],h=r[r.length-1];return s<=h?n>=s&&n<=h:n>=h&&n<=s}}],[{key:"create",value:function(n){return new e(n)}}])})();Bw(Xq,"EPS",1e-4);var cI=function(t){var n=Object.keys(t).reduce(function(r,s){return pd(pd({},r),{},Bw({},s,Xq.create(t[s])))},{});return pd(pd({},n),{},{apply:function(s){var h=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},d=h.bandAware,o=h.position;return Q0e(s,function(_,w){return n[w].apply(_,{bandAware:d,position:o})})},isInRange:function(s){return Uq(s,function(h,d){return n[d].isInRange(h)})}})};function A_e(e){return(e%180+180)%180}var C_e=function(t){var n=t.width,r=t.height,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,h=A_e(s),d=h*Math.PI/180,o=Math.atan(r/n),_=d>o&&d<Math.PI-o?r/Math.sin(d):n/Math.cos(d);return Math.abs(_)},bC,FF;function E_e(){if(FF)return bC;FF=1;var e=Th(),t=T0(),n=_w();function r(s){return function(h,d,o){var _=Object(h);if(!t(h)){var w=e(d,3);h=n(h),d=function(P){return w(_[P],P,_)}}var A=s(h,d,o);return A>-1?_[w?h[A]:A]:void 0}}return bC=r,bC}var wC,BF;function j_e(){if(BF)return wC;BF=1;var e=Fq();function t(n){var r=e(n),s=r%1;return r===r?s?r-s:r:0}return wC=t,wC}var SC,$F;function M_e(){if($F)return SC;$F=1;var e=XU(),t=Th(),n=j_e(),r=Math.max;function s(h,d,o){var _=h==null?0:h.length;if(!_)return-1;var w=o==null?0:n(o);return w<0&&(w=r(_+w,0)),e(h,t(d,3),w)}return SC=s,SC}var TC,VF;function k_e(){if(VF)return TC;VF=1;var e=E_e(),t=M_e(),n=e(t);return TC=n,TC}var I_e=k_e();const N_e=Kr(I_e);var D_e=dU();const O_e=Kr(D_e);var R_e=O_e(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),uI=W.createContext(void 0),dI=W.createContext(void 0),Yq=W.createContext(void 0),Jq=W.createContext({}),Qq=W.createContext(void 0),e9=W.createContext(0),t9=W.createContext(0),UF=function(t){var n=t.state,r=n.xAxisMap,s=n.yAxisMap,h=n.offset,d=t.clipPathId,o=t.children,_=t.width,w=t.height,A=R_e(h);return je.createElement(uI.Provider,{value:r},je.createElement(dI.Provider,{value:s},je.createElement(Jq.Provider,{value:h},je.createElement(Yq.Provider,{value:A},je.createElement(Qq.Provider,{value:d},je.createElement(e9.Provider,{value:w},je.createElement(t9.Provider,{value:_},o)))))))},L_e=function(){return W.useContext(Qq)},n9=function(t){var n=W.useContext(uI);n==null&&eg();var r=n[t];return r==null&&eg(),r},z_e=function(){var t=W.useContext(uI);return xp(t)},F_e=function(){var t=W.useContext(dI),n=N_e(t,function(r){return Uq(r.domain,Number.isFinite)});return n||xp(t)},r9=function(t){var n=W.useContext(dI);n==null&&eg();var r=n[t];return r==null&&eg(),r},B_e=function(){var t=W.useContext(Yq);return t},$_e=function(){return W.useContext(Jq)},hI=function(){return W.useContext(t9)},fI=function(){return W.useContext(e9)};function ky(e){"@babel/helpers - typeof";return ky=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ky(e)}function V_e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function U_e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,a9(r.key),r)}}function q_e(e,t,n){return t&&U_e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function G_e(e,t,n){return t=I1(t),W_e(e,i9()?Reflect.construct(t,n||[],I1(e).constructor):t.apply(e,n))}function W_e(e,t){if(t&&(ky(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return H_e(e)}function H_e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i9=function(){return!!e})()}function I1(e){return I1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},I1(e)}function Z_e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ij(e,t)}function Ij(e,t){return Ij=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Ij(e,t)}function qF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function GF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qF(Object(n),!0).forEach(function(r){pI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function pI(e,t,n){return t=a9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a9(e){var t=K_e(e,"string");return ky(t)=="symbol"?t:t+""}function K_e(e,t){if(ky(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(ky(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function X_e(e,t){return ebe(e)||Q_e(e,t)||J_e(e,t)||Y_e()}function Y_e(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function J_e(e,t){if(e){if(typeof e=="string")return WF(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return WF(e,t)}}function WF(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Q_e(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function ebe(e){if(Array.isArray(e))return e}function Nj(){return Nj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nj.apply(this,arguments)}var tbe=function(t,n){var r;return je.isValidElement(t)?r=je.cloneElement(t,n):Xn(t)?r=t(n):r=je.createElement("line",Nj({},n,{className:"recharts-reference-line-line"})),r},nbe=function(t,n,r,s,h,d,o,_,w){var A=h.x,P=h.y,N=h.width,z=h.height;if(r){var q=w.y,$=t.y.apply(q,{position:d});if(yh(w,"discard")&&!t.y.isInRange($))return null;var O=[{x:A+N,y:$},{x:A,y:$}];return _==="left"?O.reverse():O}if(n){var X=w.x,K=t.x.apply(X,{position:d});if(yh(w,"discard")&&!t.x.isInRange(K))return null;var te=[{x:K,y:P+z},{x:K,y:P}];return o==="top"?te.reverse():te}if(s){var ne=w.segment,H=ne.map(function(ae){return t.apply(ae,{position:d})});return yh(w,"discard")&&K0e(H,function(ae){return!t.isInRange(ae)})?null:H}return null};function rbe(e){var t=e.x,n=e.y,r=e.segment,s=e.xAxisId,h=e.yAxisId,d=e.shape,o=e.className,_=e.alwaysShow,w=L_e(),A=n9(s),P=r9(h),N=B_e();if(!w||!N)return null;_d(_===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var z=cI({x:A.scale,y:P.scale}),q=xo(t),$=xo(n),O=r&&r.length===2,X=nbe(z,q,$,O,N,e.position,A.orientation,P.orientation,e);if(!X)return null;var K=X_e(X,2),te=K[0],ne=te.x,H=te.y,ae=K[1],de=ae.x,ye=ae.y,Ae=yh(e,"hidden")?"url(#".concat(w,")"):void 0,_e=GF(GF({clipPath:Ae},Dn(e,!0)),{},{x1:ne,y1:H,x2:de,y2:ye});return je.createElement(Tr,{className:dr("recharts-reference-line",o)},tbe(d,_e),Uo.renderCallByParent(e,P_e({x1:ne,y1:H,x2:de,y2:ye})))}var mI=(function(e){function t(){return V_e(this,t),G_e(this,t,arguments)}return Z_e(t,e),q_e(t,[{key:"render",value:function(){return je.createElement(rbe,this.props)}}])})(je.Component);pI(mI,"displayName","ReferenceLine");pI(mI,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function Dj(){return Dj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dj.apply(this,arguments)}function Iy(e){"@babel/helpers - typeof";return Iy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Iy(e)}function HF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function ZF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?HF(Object(n),!0).forEach(function(r){$w(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):HF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function ibe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function abe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,s9(r.key),r)}}function obe(e,t,n){return t&&abe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function sbe(e,t,n){return t=N1(t),lbe(e,o9()?Reflect.construct(t,n||[],N1(e).constructor):t.apply(e,n))}function lbe(e,t){if(t&&(Iy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return cbe(e)}function cbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function o9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(o9=function(){return!!e})()}function N1(e){return N1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},N1(e)}function ube(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Oj(e,t)}function Oj(e,t){return Oj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Oj(e,t)}function $w(e,t,n){return t=s9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s9(e){var t=dbe(e,"string");return Iy(t)=="symbol"?t:t+""}function dbe(e,t){if(Iy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Iy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var hbe=function(t){var n=t.x,r=t.y,s=t.xAxis,h=t.yAxis,d=cI({x:s.scale,y:h.scale}),o=d.apply({x:n,y:r},{bandAware:!0});return yh(t,"discard")&&!d.isInRange(o)?null:o},Vw=(function(e){function t(){return ibe(this,t),sbe(this,t,arguments)}return ube(t,e),obe(t,[{key:"render",value:function(){var r=this.props,s=r.x,h=r.y,d=r.r,o=r.alwaysShow,_=r.clipPathId,w=xo(s),A=xo(h);if(_d(o===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!w||!A)return null;var P=hbe(this.props);if(!P)return null;var N=P.x,z=P.y,q=this.props,$=q.shape,O=q.className,X=yh(this.props,"hidden")?"url(#".concat(_,")"):void 0,K=ZF(ZF({clipPath:X},Dn(this.props,!0)),{},{cx:N,cy:z});return je.createElement(Tr,{className:dr("recharts-reference-dot",O)},t.renderDot($,K),Uo.renderCallByParent(this.props,{x:N-d,y:z-d,width:2*d,height:2*d}))}}])})(je.Component);$w(Vw,"displayName","ReferenceDot");$w(Vw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});$w(Vw,"renderDot",function(e,t){var n;return je.isValidElement(e)?n=je.cloneElement(e,t):Xn(e)?n=e(t):n=je.createElement(M0,Dj({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Rj(){return Rj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Rj.apply(this,arguments)}function Ny(e){"@babel/helpers - typeof";return Ny=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ny(e)}function KF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function XF(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?KF(Object(n),!0).forEach(function(r){Uw(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):KF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function fbe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function pbe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,c9(r.key),r)}}function mbe(e,t,n){return t&&pbe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gbe(e,t,n){return t=D1(t),ybe(e,l9()?Reflect.construct(t,n||[],D1(e).constructor):t.apply(e,n))}function ybe(e,t){if(t&&(Ny(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return vbe(e)}function vbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function l9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(l9=function(){return!!e})()}function D1(e){return D1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},D1(e)}function xbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lj(e,t)}function Lj(e,t){return Lj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Lj(e,t)}function Uw(e,t,n){return t=c9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function c9(e){var t=_be(e,"string");return Ny(t)=="symbol"?t:t+""}function _be(e,t){if(Ny(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ny(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var bbe=function(t,n,r,s,h){var d=h.x1,o=h.x2,_=h.y1,w=h.y2,A=h.xAxis,P=h.yAxis;if(!A||!P)return null;var N=cI({x:A.scale,y:P.scale}),z={x:t?N.x.apply(d,{position:"start"}):N.x.rangeMin,y:r?N.y.apply(_,{position:"start"}):N.y.rangeMin},q={x:n?N.x.apply(o,{position:"end"}):N.x.rangeMax,y:s?N.y.apply(w,{position:"end"}):N.y.rangeMax};return yh(h,"discard")&&(!N.isInRange(z)||!N.isInRange(q))?null:Kq(z,q)},qw=(function(e){function t(){return fbe(this,t),gbe(this,t,arguments)}return xbe(t,e),mbe(t,[{key:"render",value:function(){var r=this.props,s=r.x1,h=r.x2,d=r.y1,o=r.y2,_=r.className,w=r.alwaysShow,A=r.clipPathId;_d(w===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var P=xo(s),N=xo(h),z=xo(d),q=xo(o),$=this.props.shape;if(!P&&!N&&!z&&!q&&!$)return null;var O=bbe(P,N,z,q,this.props);if(!O&&!$)return null;var X=yh(this.props,"hidden")?"url(#".concat(A,")"):void 0;return je.createElement(Tr,{className:dr("recharts-reference-area",_)},t.renderRect($,XF(XF({clipPath:X},Dn(this.props,!0)),O)),Uo.renderCallByParent(this.props,O))}}])})(je.Component);Uw(qw,"displayName","ReferenceArea");Uw(qw,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});Uw(qw,"renderRect",function(e,t){var n;return je.isValidElement(e)?n=je.cloneElement(e,t):Xn(e)?n=e(t):n=je.createElement(lI,Rj({},t,{className:"recharts-reference-area-rect"})),n});function u9(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var r=[],s=0;s<e.length;s+=t)r.push(e[s]);return r}function wbe(e,t,n){var r={width:e.width+t.width,height:e.height+t.height};return C_e(r,n)}function Sbe(e,t,n){var r=n==="width",s=e.x,h=e.y,d=e.width,o=e.height;return t===1?{start:r?s:h,end:r?s+d:h+o}:{start:r?s+d:h+o,end:r?s:h}}function O1(e,t,n,r,s){if(e*t<e*r||e*t>e*s)return!1;var h=n();return e*(t-e*h/2-r)>=0&&e*(t+e*h/2-s)<=0}function Tbe(e,t){return u9(e,t+1)}function Pbe(e,t,n,r,s){for(var h=(r||[]).slice(),d=t.start,o=t.end,_=0,w=1,A=d,P=function(){var q=r?.[_];if(q===void 0)return{v:u9(r,w)};var $=_,O,X=function(){return O===void 0&&(O=n(q,$)),O},K=q.coordinate,te=_===0||O1(e,K,X,A,o);te||(_=0,A=d,w+=1),te&&(A=K+e*(X()/2+s),_+=w)},N;w<=h.length;)if(N=P(),N)return N.v;return[]}function a0(e){"@babel/helpers - typeof";return a0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a0(e)}function YF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function As(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?YF(Object(n),!0).forEach(function(r){Abe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):YF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Abe(e,t,n){return t=Cbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Cbe(e){var t=Ebe(e,"string");return a0(t)=="symbol"?t:t+""}function Ebe(e,t){if(a0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(a0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function jbe(e,t,n,r,s){for(var h=(r||[]).slice(),d=h.length,o=t.start,_=t.end,w=function(N){var z=h[N],q,$=function(){return q===void 0&&(q=n(z,N)),q};if(N===d-1){var O=e*(z.coordinate+e*$()/2-_);h[N]=z=As(As({},z),{},{tickCoord:O>0?z.coordinate-O*e:z.coordinate})}else h[N]=z=As(As({},z),{},{tickCoord:z.coordinate});var X=O1(e,z.tickCoord,$,o,_);X&&(_=z.tickCoord-e*($()/2+s),h[N]=As(As({},z),{},{isShow:!0}))},A=d-1;A>=0;A--)w(A);return h}function Mbe(e,t,n,r,s,h){var d=(r||[]).slice(),o=d.length,_=t.start,w=t.end;if(h){var A=r[o-1],P=n(A,o-1),N=e*(A.coordinate+e*P/2-w);d[o-1]=A=As(As({},A),{},{tickCoord:N>0?A.coordinate-N*e:A.coordinate});var z=O1(e,A.tickCoord,function(){return P},_,w);z&&(w=A.tickCoord-e*(P/2+s),d[o-1]=As(As({},A),{},{isShow:!0}))}for(var q=h?o-1:o,$=function(K){var te=d[K],ne,H=function(){return ne===void 0&&(ne=n(te,K)),ne};if(K===0){var ae=e*(te.coordinate-e*H()/2-_);d[K]=te=As(As({},te),{},{tickCoord:ae<0?te.coordinate-ae*e:te.coordinate})}else d[K]=te=As(As({},te),{},{tickCoord:te.coordinate});var de=O1(e,te.tickCoord,H,_,w);de&&(_=te.tickCoord+e*(H()/2+s),d[K]=As(As({},te),{},{isShow:!0}))},O=0;O<q;O++)$(O);return d}function gI(e,t,n){var r=e.tick,s=e.ticks,h=e.viewBox,d=e.minTickGap,o=e.orientation,_=e.interval,w=e.tickFormatter,A=e.unit,P=e.angle;if(!s||!s.length||!r)return[];if(Qt(_)||Lp.isSsr)return Tbe(s,typeof _=="number"&&Qt(_)?_:0);var N=[],z=o==="top"||o==="bottom"?"width":"height",q=A&&z==="width"?px(A,{fontSize:t,letterSpacing:n}):{width:0,height:0},$=function(te,ne){var H=Xn(w)?w(te.value,ne):te.value;return z==="width"?wbe(px(H,{fontSize:t,letterSpacing:n}),q,P):px(H,{fontSize:t,letterSpacing:n})[z]},O=s.length>=2?ol(s[1].coordinate-s[0].coordinate):1,X=Sbe(h,O,z);return _==="equidistantPreserveStart"?Pbe(O,X,$,s,d):(_==="preserveStart"||_==="preserveStartEnd"?N=Mbe(O,X,$,s,d,_==="preserveStartEnd"):N=jbe(O,X,$,s,d),N.filter(function(K){return K.isShow}))}var kbe=["viewBox"],Ibe=["viewBox"],Nbe=["ticks"];function Dy(e){"@babel/helpers - typeof";return Dy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dy(e)}function ty(){return ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ty.apply(this,arguments)}function JF(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?JF(Object(n),!0).forEach(function(r){yI(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):JF(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function PC(e,t){if(e==null)return{};var n=Dbe(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Dbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Obe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function QF(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,h9(r.key),r)}}function Rbe(e,t,n){return t&&QF(e.prototype,t),n&&QF(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Lbe(e,t,n){return t=R1(t),zbe(e,d9()?Reflect.construct(t,n||[],R1(e).constructor):t.apply(e,n))}function zbe(e,t){if(t&&(Dy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Fbe(e)}function Fbe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d9=function(){return!!e})()}function R1(e){return R1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},R1(e)}function Bbe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&zj(e,t)}function zj(e,t){return zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},zj(e,t)}function yI(e,t,n){return t=h9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function h9(e){var t=$be(e,"string");return Dy(t)=="symbol"?t:t+""}function $be(e,t){if(Dy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Dy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var sv=(function(e){function t(n){var r;return Obe(this,t),r=Lbe(this,t,[n]),r.state={fontSize:"",letterSpacing:""},r}return Bbe(t,e),Rbe(t,[{key:"shouldComponentUpdate",value:function(r,s){var h=r.viewBox,d=PC(r,kbe),o=this.props,_=o.viewBox,w=PC(o,Ibe);return!oy(h,_)||!oy(d,w)||!oy(s,this.state)}},{key:"componentDidMount",value:function(){var r=this.layerReference;if(r){var s=r.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];s&&this.setState({fontSize:window.getComputedStyle(s).fontSize,letterSpacing:window.getComputedStyle(s).letterSpacing})}}},{key:"getTickLineCoord",value:function(r){var s=this.props,h=s.x,d=s.y,o=s.width,_=s.height,w=s.orientation,A=s.tickSize,P=s.mirror,N=s.tickMargin,z,q,$,O,X,K,te=P?-1:1,ne=r.tickSize||A,H=Qt(r.tickCoord)?r.tickCoord:r.coordinate;switch(w){case"top":z=q=r.coordinate,O=d+ +!P*_,$=O-te*ne,K=$-te*N,X=H;break;case"left":$=O=r.coordinate,q=h+ +!P*o,z=q-te*ne,X=z-te*N,K=H;break;case"right":$=O=r.coordinate,q=h+ +P*o,z=q+te*ne,X=z+te*N,K=H;break;default:z=q=r.coordinate,O=d+ +P*_,$=O+te*ne,K=$+te*N,X=H;break}return{line:{x1:z,y1:$,x2:q,y2:O},tick:{x:X,y:K}}}},{key:"getTickTextAnchor",value:function(){var r=this.props,s=r.orientation,h=r.mirror,d;switch(s){case"left":d=h?"start":"end";break;case"right":d=h?"end":"start";break;default:d="middle";break}return d}},{key:"getTickVerticalAnchor",value:function(){var r=this.props,s=r.orientation,h=r.mirror,d="end";switch(s){case"left":case"right":d="middle";break;case"top":d=h?"start":"end";break;default:d=h?"end":"start";break}return d}},{key:"renderAxisLine",value:function(){var r=this.props,s=r.x,h=r.y,d=r.width,o=r.height,_=r.orientation,w=r.mirror,A=r.axisLine,P=mo(mo(mo({},Dn(this.props,!1)),Dn(A,!1)),{},{fill:"none"});if(_==="top"||_==="bottom"){var N=+(_==="top"&&!w||_==="bottom"&&w);P=mo(mo({},P),{},{x1:s,y1:h+N*o,x2:s+d,y2:h+N*o})}else{var z=+(_==="left"&&!w||_==="right"&&w);P=mo(mo({},P),{},{x1:s+z*d,y1:h,x2:s+z*d,y2:h+o})}return je.createElement("line",ty({},P,{className:dr("recharts-cartesian-axis-line",zc(A,"className"))}))}},{key:"renderTicks",value:function(r,s,h){var d=this,o=this.props,_=o.tickLine,w=o.stroke,A=o.tick,P=o.tickFormatter,N=o.unit,z=gI(mo(mo({},this.props),{},{ticks:r}),s,h),q=this.getTickTextAnchor(),$=this.getTickVerticalAnchor(),O=Dn(this.props,!1),X=Dn(A,!1),K=mo(mo({},O),{},{fill:"none"},Dn(_,!1)),te=z.map(function(ne,H){var ae=d.getTickLineCoord(ne),de=ae.line,ye=ae.tick,Ae=mo(mo(mo(mo({textAnchor:q,verticalAnchor:$},O),{},{stroke:"none",fill:w},X),ye),{},{index:H,payload:ne,visibleTicksCount:z.length,tickFormatter:P});return je.createElement(Tr,ty({className:"recharts-cartesian-axis-tick",key:"tick-".concat(ne.value,"-").concat(ne.coordinate,"-").concat(ne.tickCoord)},Xm(d.props,ne,H)),_&&je.createElement("line",ty({},K,de,{className:dr("recharts-cartesian-axis-tick-line",zc(_,"className"))})),A&&t.renderTickItem(A,Ae,"".concat(Xn(P)?P(ne.value,H):ne.value).concat(N||"")))});return je.createElement("g",{className:"recharts-cartesian-axis-ticks"},te)}},{key:"render",value:function(){var r=this,s=this.props,h=s.axisLine,d=s.width,o=s.height,_=s.ticksGenerator,w=s.className,A=s.hide;if(A)return null;var P=this.props,N=P.ticks,z=PC(P,Nbe),q=N;return Xn(_)&&(q=N&&N.length>0?_(this.props):_(z)),d<=0||o<=0||!q||!q.length?null:je.createElement(Tr,{className:dr("recharts-cartesian-axis",w),ref:function(O){r.layerReference=O}},h&&this.renderAxisLine(),this.renderTicks(q,this.state.fontSize,this.state.letterSpacing),Uo.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(r,s,h){var d,o=dr(s.className,"recharts-cartesian-axis-tick-value");return je.isValidElement(r)?d=je.cloneElement(r,mo(mo({},s),{},{className:o})):Xn(r)?d=r(mo(mo({},s),{},{className:o})):d=je.createElement(Ym,ty({},s,{className:"recharts-cartesian-axis-tick-value"}),h),d}}])})(W.Component);yI(sv,"displayName","CartesianAxis");yI(sv,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Vbe=["x1","y1","x2","y2","key"],Ube=["offset"];function tg(e){"@babel/helpers - typeof";return tg=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tg(e)}function eB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Cs(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?eB(Object(n),!0).forEach(function(r){qbe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):eB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function qbe(e,t,n){return t=Gbe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Gbe(e){var t=Wbe(e,"string");return tg(t)=="symbol"?t:t+""}function Wbe(e,t){if(tg(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(tg(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nm(){return Nm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Nm.apply(this,arguments)}function tB(e,t){if(e==null)return{};var n=Hbe(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Hbe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}var Zbe=function(t){var n=t.fill;if(!n||n==="none")return null;var r=t.fillOpacity,s=t.x,h=t.y,d=t.width,o=t.height,_=t.ry;return je.createElement("rect",{x:s,y:h,ry:_,width:d,height:o,stroke:"none",fill:n,fillOpacity:r,className:"recharts-cartesian-grid-bg"})};function f9(e,t){var n;if(je.isValidElement(e))n=je.cloneElement(e,t);else if(Xn(e))n=e(t);else{var r=t.x1,s=t.y1,h=t.x2,d=t.y2,o=t.key,_=tB(t,Vbe),w=Dn(_,!1);w.offset;var A=tB(w,Ube);n=je.createElement("line",Nm({},A,{x1:r,y1:s,x2:h,y2:d,fill:"none",key:o}))}return n}function Kbe(e){var t=e.x,n=e.width,r=e.horizontal,s=r===void 0?!0:r,h=e.horizontalPoints;if(!s||!h||!h.length)return null;var d=h.map(function(o,_){var w=Cs(Cs({},e),{},{x1:t,y1:o,x2:t+n,y2:o,key:"line-".concat(_),index:_});return f9(s,w)});return je.createElement("g",{className:"recharts-cartesian-grid-horizontal"},d)}function Xbe(e){var t=e.y,n=e.height,r=e.vertical,s=r===void 0?!0:r,h=e.verticalPoints;if(!s||!h||!h.length)return null;var d=h.map(function(o,_){var w=Cs(Cs({},e),{},{x1:o,y1:t,x2:o,y2:t+n,key:"line-".concat(_),index:_});return f9(s,w)});return je.createElement("g",{className:"recharts-cartesian-grid-vertical"},d)}function Ybe(e){var t=e.horizontalFill,n=e.fillOpacity,r=e.x,s=e.y,h=e.width,d=e.height,o=e.horizontalPoints,_=e.horizontal,w=_===void 0?!0:_;if(!w||!t||!t.length)return null;var A=o.map(function(N){return Math.round(N+s-s)}).sort(function(N,z){return N-z});s!==A[0]&&A.unshift(0);var P=A.map(function(N,z){var q=!A[z+1],$=q?s+d-N:A[z+1]-N;if($<=0)return null;var O=z%t.length;return je.createElement("rect",{key:"react-".concat(z),y:N,x:r,height:$,width:h,stroke:"none",fill:t[O],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return je.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},P)}function Jbe(e){var t=e.vertical,n=t===void 0?!0:t,r=e.verticalFill,s=e.fillOpacity,h=e.x,d=e.y,o=e.width,_=e.height,w=e.verticalPoints;if(!n||!r||!r.length)return null;var A=w.map(function(N){return Math.round(N+h-h)}).sort(function(N,z){return N-z});h!==A[0]&&A.unshift(0);var P=A.map(function(N,z){var q=!A[z+1],$=q?h+o-N:A[z+1]-N;if($<=0)return null;var O=z%r.length;return je.createElement("rect",{key:"react-".concat(z),x:N,y:d,width:$,height:_,stroke:"none",fill:r[O],fillOpacity:s,className:"recharts-cartesian-grid-bg"})});return je.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},P)}var Qbe=function(t,n){var r=t.xAxis,s=t.width,h=t.height,d=t.offset;return fq(gI(Cs(Cs(Cs({},sv.defaultProps),r),{},{ticks:uf(r,!0),viewBox:{x:0,y:0,width:s,height:h}})),d.left,d.left+d.width,n)},e1e=function(t,n){var r=t.yAxis,s=t.width,h=t.height,d=t.offset;return fq(gI(Cs(Cs(Cs({},sv.defaultProps),r),{},{ticks:uf(r,!0),viewBox:{x:0,y:0,width:s,height:h}})),d.top,d.top+d.height,n)},$g={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function mb(e){var t,n,r,s,h,d,o=hI(),_=fI(),w=$_e(),A=Cs(Cs({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:$g.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:$g.fill,horizontal:(r=e.horizontal)!==null&&r!==void 0?r:$g.horizontal,horizontalFill:(s=e.horizontalFill)!==null&&s!==void 0?s:$g.horizontalFill,vertical:(h=e.vertical)!==null&&h!==void 0?h:$g.vertical,verticalFill:(d=e.verticalFill)!==null&&d!==void 0?d:$g.verticalFill,x:Qt(e.x)?e.x:w.left,y:Qt(e.y)?e.y:w.top,width:Qt(e.width)?e.width:w.width,height:Qt(e.height)?e.height:w.height}),P=A.x,N=A.y,z=A.width,q=A.height,$=A.syncWithTicks,O=A.horizontalValues,X=A.verticalValues,K=z_e(),te=F_e();if(!Qt(z)||z<=0||!Qt(q)||q<=0||!Qt(P)||P!==+P||!Qt(N)||N!==+N)return null;var ne=A.verticalCoordinatesGenerator||Qbe,H=A.horizontalCoordinatesGenerator||e1e,ae=A.horizontalPoints,de=A.verticalPoints;if((!ae||!ae.length)&&Xn(H)){var ye=O&&O.length,Ae=H({yAxis:te?Cs(Cs({},te),{},{ticks:ye?O:te.ticks}):void 0,width:o,height:_,offset:w},ye?!0:$);_d(Array.isArray(Ae),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(tg(Ae),"]")),Array.isArray(Ae)&&(ae=Ae)}if((!de||!de.length)&&Xn(ne)){var _e=X&&X.length,fe=ne({xAxis:K?Cs(Cs({},K),{},{ticks:_e?X:K.ticks}):void 0,width:o,height:_,offset:w},_e?!0:$);_d(Array.isArray(fe),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(tg(fe),"]")),Array.isArray(fe)&&(de=fe)}return je.createElement("g",{className:"recharts-cartesian-grid"},je.createElement(Zbe,{fill:A.fill,fillOpacity:A.fillOpacity,x:A.x,y:A.y,width:A.width,height:A.height,ry:A.ry}),je.createElement(Kbe,Nm({},A,{offset:w,horizontalPoints:ae,xAxis:K,yAxis:te})),je.createElement(Xbe,Nm({},A,{offset:w,verticalPoints:de,xAxis:K,yAxis:te})),je.createElement(Ybe,Nm({},A,{horizontalPoints:ae})),je.createElement(Jbe,Nm({},A,{verticalPoints:de})))}mb.displayName="CartesianGrid";var t1e=["type","layout","connectNulls","ref"],n1e=["key"];function Oy(e){"@babel/helpers - typeof";return Oy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Oy(e)}function nB(e,t){if(e==null)return{};var n=r1e(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function r1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function _x(){return _x=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_x.apply(this,arguments)}function rB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Mc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?rB(Object(n),!0).forEach(function(r){md(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Vg(e){return s1e(e)||o1e(e)||a1e(e)||i1e()}function i1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a1e(e,t){if(e){if(typeof e=="string")return Fj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Fj(e,t)}}function o1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function s1e(e){if(Array.isArray(e))return Fj(e)}function Fj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m9(r.key),r)}}function c1e(e,t,n){return t&&iB(e.prototype,t),n&&iB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function u1e(e,t,n){return t=L1(t),d1e(e,p9()?Reflect.construct(t,n||[],L1(e).constructor):t.apply(e,n))}function d1e(e,t){if(t&&(Oy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return h1e(e)}function h1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p9=function(){return!!e})()}function L1(e){return L1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L1(e)}function f1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bj(e,t)}function Bj(e,t){return Bj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Bj(e,t)}function md(e,t,n){return t=m9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m9(e){var t=p1e(e,"string");return Oy(t)=="symbol"?t:t+""}function p1e(e,t){if(Oy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Oy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Ry=(function(e){function t(){var n;l1e(this,t);for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];return n=u1e(this,t,[].concat(s)),md(n,"state",{isAnimationFinished:!0,totalLength:0}),md(n,"generateSimpleStrokeDasharray",function(d,o){return"".concat(o,"px ").concat(d-o,"px")}),md(n,"getStrokeDasharray",function(d,o,_){var w=_.reduce(function(X,K){return X+K});if(!w)return n.generateSimpleStrokeDasharray(o,d);for(var A=Math.floor(d/w),P=d%w,N=o-d,z=[],q=0,$=0;q<_.length;$+=_[q],++q)if($+_[q]>P){z=[].concat(Vg(_.slice(0,q)),[P-$]);break}var O=z.length%2===0?[0,N]:[N];return[].concat(Vg(t.repeat(_,A)),Vg(z),O).map(function(X){return"".concat(X,"px")}).join(", ")}),md(n,"id",rg("recharts-line-")),md(n,"pathRef",function(d){n.mainCurve=d}),md(n,"handleAnimationEnd",function(){n.setState({isAnimationFinished:!0}),n.props.onAnimationEnd&&n.props.onAnimationEnd()}),md(n,"handleAnimationStart",function(){n.setState({isAnimationFinished:!1}),n.props.onAnimationStart&&n.props.onAnimationStart()}),n}return f1e(t,e),c1e(t,[{key:"componentDidMount",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();this.setState({totalLength:r})}}},{key:"componentDidUpdate",value:function(){if(this.props.isAnimationActive){var r=this.getTotalLength();r!==this.state.totalLength&&this.setState({totalLength:r})}}},{key:"getTotalLength",value:function(){var r=this.mainCurve;try{return r&&r.getTotalLength&&r.getTotalLength()||0}catch{return 0}}},{key:"renderErrorBar",value:function(r,s){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var h=this.props,d=h.points,o=h.xAxis,_=h.yAxis,w=h.layout,A=h.children,P=Fc(A,j0);if(!P)return null;var N=function($,O){return{x:$.x,y:$.y,value:$.value,errorVal:Na($.payload,O)}},z={clipPath:r?"url(#clipPath-".concat(s,")"):null};return je.createElement(Tr,z,P.map(function(q){return je.cloneElement(q,{key:"bar-".concat(q.props.dataKey),data:d,xAxis:o,yAxis:_,layout:w,dataPointFormatter:N})}))}},{key:"renderDots",value:function(r,s,h){var d=this.props.isAnimationActive;if(d&&!this.state.isAnimationFinished)return null;var o=this.props,_=o.dot,w=o.points,A=o.dataKey,P=Dn(this.props,!1),N=Dn(_,!0),z=w.map(function($,O){var X=Mc(Mc(Mc({key:"dot-".concat(O),r:3},P),N),{},{index:O,cx:$.x,cy:$.y,value:$.value,dataKey:A,payload:$.payload,points:w});return t.renderDotItem(_,X)}),q={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(h,")"):null};return je.createElement(Tr,_x({className:"recharts-line-dots",key:"dots"},q),z)}},{key:"renderCurveStatically",value:function(r,s,h,d){var o=this.props,_=o.type,w=o.layout,A=o.connectNulls;o.ref;var P=nB(o,t1e),N=Mc(Mc(Mc({},Dn(P,!0)),{},{fill:"none",className:"recharts-line-curve",clipPath:s?"url(#clipPath-".concat(h,")"):null,points:r},d),{},{type:_,layout:w,connectNulls:A});return je.createElement(zm,_x({},N,{pathRef:this.pathRef}))}},{key:"renderCurveWithAnimation",value:function(r,s){var h=this,d=this.props,o=d.points,_=d.strokeDasharray,w=d.isAnimationActive,A=d.animationBegin,P=d.animationDuration,N=d.animationEasing,z=d.animationId,q=d.animateNewValues,$=d.width,O=d.height,X=this.state,K=X.prevPoints,te=X.totalLength;return je.createElement(Td,{begin:A,duration:P,isActive:w,easing:N,from:{t:0},to:{t:1},key:"line-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(ne){var H=ne.t;if(K){var ae=K.length/o.length,de=o.map(function(Ee,Be){var De=Math.floor(Be*ae);if(K[De]){var Je=K[De],Ve=vo(Je.x,Ee.x),et=vo(Je.y,Ee.y);return Mc(Mc({},Ee),{},{x:Ve(H),y:et(H)})}if(q){var Ce=vo($*2,Ee.x),We=vo(O/2,Ee.y);return Mc(Mc({},Ee),{},{x:Ce(H),y:We(H)})}return Mc(Mc({},Ee),{},{x:Ee.x,y:Ee.y})});return h.renderCurveStatically(de,r,s)}var ye=vo(0,te),Ae=ye(H),_e;if(_){var fe="".concat(_).split(/[,\s]+/gim).map(function(Ee){return parseFloat(Ee)});_e=h.getStrokeDasharray(Ae,te,fe)}else _e=h.generateSimpleStrokeDasharray(te,Ae);return h.renderCurveStatically(o,r,s,{strokeDasharray:_e})})}},{key:"renderCurve",value:function(r,s){var h=this.props,d=h.points,o=h.isAnimationActive,_=this.state,w=_.prevPoints,A=_.totalLength;return o&&d&&d.length&&(!w&&A>0||!Jm(w,d))?this.renderCurveWithAnimation(r,s):this.renderCurveStatically(d,r,s)}},{key:"render",value:function(){var r,s=this.props,h=s.hide,d=s.dot,o=s.points,_=s.className,w=s.xAxis,A=s.yAxis,P=s.top,N=s.left,z=s.width,q=s.height,$=s.isAnimationActive,O=s.id;if(h||!o||!o.length)return null;var X=this.state.isAnimationFinished,K=o.length===1,te=dr("recharts-line",_),ne=w&&w.allowDataOverflow,H=A&&A.allowDataOverflow,ae=ne||H,de=lr(O)?this.id:O,ye=(r=Dn(d,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},Ae=ye.r,_e=Ae===void 0?3:Ae,fe=ye.strokeWidth,Ee=fe===void 0?2:fe,Be=gU(d)?d:{},De=Be.clipDot,Je=De===void 0?!0:De,Ve=_e*2+Ee;return je.createElement(Tr,{className:te},ne||H?je.createElement("defs",null,je.createElement("clipPath",{id:"clipPath-".concat(de)},je.createElement("rect",{x:ne?N:N-z/2,y:H?P:P-q/2,width:ne?z:z*2,height:H?q:q*2})),!Je&&je.createElement("clipPath",{id:"clipPath-dots-".concat(de)},je.createElement("rect",{x:N-Ve/2,y:P-Ve/2,width:z+Ve,height:q+Ve}))):null,!K&&this.renderCurve(ae,de),this.renderErrorBar(ae,de),(K||d)&&this.renderDots(ae,Je,de),(!$||X)&&gh.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,prevPoints:s.curPoints}:r.points!==s.curPoints?{curPoints:r.points}:null}},{key:"repeat",value:function(r,s){for(var h=r.length%2!==0?[].concat(Vg(r),[0]):r,d=[],o=0;o<s;++o)d=[].concat(Vg(d),Vg(h));return d}},{key:"renderDotItem",value:function(r,s){var h;if(je.isValidElement(r))h=je.cloneElement(r,s);else if(Xn(r))h=r(s);else{var d=s.key,o=nB(s,n1e),_=dr("recharts-line-dot",typeof r!="boolean"?r.className:"");h=je.createElement(M0,_x({key:d},o,{className:_}))}return h}}])})(W.PureComponent);md(Ry,"displayName","Line");md(Ry,"defaultProps",{xAxisId:0,yAxisId:0,connectNulls:!1,activeDot:!0,dot:!0,legendType:"line",stroke:"#3182bd",strokeWidth:1,fill:"#fff",points:[],isAnimationActive:!Lp.isSsr,animateNewValues:!0,animationBegin:0,animationDuration:1500,animationEasing:"ease",hide:!1,label:!1});md(Ry,"getComposedData",function(e){var t=e.props,n=e.xAxis,r=e.yAxis,s=e.xAxisTicks,h=e.yAxisTicks,d=e.dataKey,o=e.bandSize,_=e.displayedData,w=e.offset,A=t.layout,P=_.map(function(N,z){var q=Na(N,d);return A==="horizontal"?{x:f1({axis:n,ticks:s,bandSize:o,entry:N,index:z}),y:lr(q)?null:r.scale(q),value:q,payload:N}:{x:lr(q)?null:n.scale(q),y:f1({axis:r,ticks:h,bandSize:o,entry:N,index:z}),value:q,payload:N}});return Mc({points:P,layout:A},w)});var m1e=["layout","type","stroke","connectNulls","isRange","ref"],g1e=["key"],g9;function Ly(e){"@babel/helpers - typeof";return Ly=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ly(e)}function y9(e,t){if(e==null)return{};var n=y1e(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function y1e(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Dm(){return Dm=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Dm.apply(this,arguments)}function aB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function gp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?aB(Object(n),!0).forEach(function(r){dh(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):aB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function v1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function oB(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,x9(r.key),r)}}function x1e(e,t,n){return t&&oB(e.prototype,t),n&&oB(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _1e(e,t,n){return t=z1(t),b1e(e,v9()?Reflect.construct(t,n||[],z1(e).constructor):t.apply(e,n))}function b1e(e,t){if(t&&(Ly(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return w1e(e)}function w1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function v9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(v9=function(){return!!e})()}function z1(e){return z1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},z1(e)}function S1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$j(e,t)}function $j(e,t){return $j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},$j(e,t)}function dh(e,t,n){return t=x9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function x9(e){var t=T1e(e,"string");return Ly(t)=="symbol"?t:t+""}function T1e(e,t){if(Ly(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Ly(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var $p=(function(e){function t(){var n;v1e(this,t);for(var r=arguments.length,s=new Array(r),h=0;h<r;h++)s[h]=arguments[h];return n=_1e(this,t,[].concat(s)),dh(n,"state",{isAnimationFinished:!0}),dh(n,"id",rg("recharts-area-")),dh(n,"handleAnimationEnd",function(){var d=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),Xn(d)&&d()}),dh(n,"handleAnimationStart",function(){var d=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),Xn(d)&&d()}),n}return S1e(t,e),x1e(t,[{key:"renderDots",value:function(r,s,h){var d=this.props.isAnimationActive,o=this.state.isAnimationFinished;if(d&&!o)return null;var _=this.props,w=_.dot,A=_.points,P=_.dataKey,N=Dn(this.props,!1),z=Dn(w,!0),q=A.map(function(O,X){var K=gp(gp(gp({key:"dot-".concat(X),r:3},N),z),{},{index:X,cx:O.x,cy:O.y,dataKey:P,value:O.value,payload:O.payload,points:A});return t.renderDotItem(w,K)}),$={clipPath:r?"url(#clipPath-".concat(s?"":"dots-").concat(h,")"):null};return je.createElement(Tr,Dm({className:"recharts-area-dots"},$),q)}},{key:"renderHorizontalRect",value:function(r){var s=this.props,h=s.baseLine,d=s.points,o=s.strokeWidth,_=d[0].x,w=d[d.length-1].x,A=r*Math.abs(_-w),P=Tp(d.map(function(N){return N.y||0}));return Qt(h)&&typeof h=="number"?P=Math.max(h,P):h&&Array.isArray(h)&&h.length&&(P=Math.max(Tp(h.map(function(N){return N.y||0})),P)),Qt(P)?je.createElement("rect",{x:_<w?_:_-A,y:0,width:A,height:Math.floor(P+(o?parseInt("".concat(o),10):1))}):null}},{key:"renderVerticalRect",value:function(r){var s=this.props,h=s.baseLine,d=s.points,o=s.strokeWidth,_=d[0].y,w=d[d.length-1].y,A=r*Math.abs(_-w),P=Tp(d.map(function(N){return N.x||0}));return Qt(h)&&typeof h=="number"?P=Math.max(h,P):h&&Array.isArray(h)&&h.length&&(P=Math.max(Tp(h.map(function(N){return N.x||0})),P)),Qt(P)?je.createElement("rect",{x:0,y:_<w?_:_-A,width:P+(o?parseInt("".concat(o),10):1),height:Math.floor(A)}):null}},{key:"renderClipRect",value:function(r){var s=this.props.layout;return s==="vertical"?this.renderVerticalRect(r):this.renderHorizontalRect(r)}},{key:"renderAreaStatically",value:function(r,s,h,d){var o=this.props,_=o.layout,w=o.type,A=o.stroke,P=o.connectNulls,N=o.isRange;o.ref;var z=y9(o,m1e);return je.createElement(Tr,{clipPath:h?"url(#clipPath-".concat(d,")"):null},je.createElement(zm,Dm({},Dn(z,!0),{points:r,connectNulls:P,type:w,baseLine:s,layout:_,stroke:"none",className:"recharts-area-area"})),A!=="none"&&je.createElement(zm,Dm({},Dn(this.props,!1),{className:"recharts-area-curve",layout:_,type:w,connectNulls:P,fill:"none",points:r})),A!=="none"&&N&&je.createElement(zm,Dm({},Dn(this.props,!1),{className:"recharts-area-curve",layout:_,type:w,connectNulls:P,fill:"none",points:s})))}},{key:"renderAreaWithAnimation",value:function(r,s){var h=this,d=this.props,o=d.points,_=d.baseLine,w=d.isAnimationActive,A=d.animationBegin,P=d.animationDuration,N=d.animationEasing,z=d.animationId,q=this.state,$=q.prevPoints,O=q.prevBaseLine;return je.createElement(Td,{begin:A,duration:P,isActive:w,easing:N,from:{t:0},to:{t:1},key:"area-".concat(z),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(X){var K=X.t;if($){var te=$.length/o.length,ne=o.map(function(ye,Ae){var _e=Math.floor(Ae*te);if($[_e]){var fe=$[_e],Ee=vo(fe.x,ye.x),Be=vo(fe.y,ye.y);return gp(gp({},ye),{},{x:Ee(K),y:Be(K)})}return ye}),H;if(Qt(_)&&typeof _=="number"){var ae=vo(O,_);H=ae(K)}else if(lr(_)||nv(_)){var de=vo(O,0);H=de(K)}else H=_.map(function(ye,Ae){var _e=Math.floor(Ae*te);if(O[_e]){var fe=O[_e],Ee=vo(fe.x,ye.x),Be=vo(fe.y,ye.y);return gp(gp({},ye),{},{x:Ee(K),y:Be(K)})}return ye});return h.renderAreaStatically(ne,H,r,s)}return je.createElement(Tr,null,je.createElement("defs",null,je.createElement("clipPath",{id:"animationClipPath-".concat(s)},h.renderClipRect(K))),je.createElement(Tr,{clipPath:"url(#animationClipPath-".concat(s,")")},h.renderAreaStatically(o,_,r,s)))})}},{key:"renderArea",value:function(r,s){var h=this.props,d=h.points,o=h.baseLine,_=h.isAnimationActive,w=this.state,A=w.prevPoints,P=w.prevBaseLine,N=w.totalLength;return _&&d&&d.length&&(!A&&N>0||!Jm(A,d)||!Jm(P,o))?this.renderAreaWithAnimation(r,s):this.renderAreaStatically(d,o,r,s)}},{key:"render",value:function(){var r,s=this.props,h=s.hide,d=s.dot,o=s.points,_=s.className,w=s.top,A=s.left,P=s.xAxis,N=s.yAxis,z=s.width,q=s.height,$=s.isAnimationActive,O=s.id;if(h||!o||!o.length)return null;var X=this.state.isAnimationFinished,K=o.length===1,te=dr("recharts-area",_),ne=P&&P.allowDataOverflow,H=N&&N.allowDataOverflow,ae=ne||H,de=lr(O)?this.id:O,ye=(r=Dn(d,!1))!==null&&r!==void 0?r:{r:3,strokeWidth:2},Ae=ye.r,_e=Ae===void 0?3:Ae,fe=ye.strokeWidth,Ee=fe===void 0?2:fe,Be=gU(d)?d:{},De=Be.clipDot,Je=De===void 0?!0:De,Ve=_e*2+Ee;return je.createElement(Tr,{className:te},ne||H?je.createElement("defs",null,je.createElement("clipPath",{id:"clipPath-".concat(de)},je.createElement("rect",{x:ne?A:A-z/2,y:H?w:w-q/2,width:ne?z:z*2,height:H?q:q*2})),!Je&&je.createElement("clipPath",{id:"clipPath-dots-".concat(de)},je.createElement("rect",{x:A-Ve/2,y:w-Ve/2,width:z+Ve,height:q+Ve}))):null,K?null:this.renderArea(ae,de),(d||K)&&this.renderDots(ae,Je,de),(!$||X)&&gh.renderCallByParent(this.props,o))}}],[{key:"getDerivedStateFromProps",value:function(r,s){return r.animationId!==s.prevAnimationId?{prevAnimationId:r.animationId,curPoints:r.points,curBaseLine:r.baseLine,prevPoints:s.curPoints,prevBaseLine:s.curBaseLine}:r.points!==s.curPoints||r.baseLine!==s.curBaseLine?{curPoints:r.points,curBaseLine:r.baseLine}:null}}])})(W.PureComponent);g9=$p;dh($p,"displayName","Area");dh($p,"defaultProps",{stroke:"#3182bd",fill:"#3182bd",fillOpacity:.6,xAxisId:0,yAxisId:0,legendType:"line",connectNulls:!1,points:[],dot:!1,activeDot:!0,hide:!1,isAnimationActive:!Lp.isSsr,animationBegin:0,animationDuration:1500,animationEasing:"ease"});dh($p,"getBaseValue",function(e,t,n,r){var s=e.layout,h=e.baseValue,d=t.props.baseValue,o=d??h;if(Qt(o)&&typeof o=="number")return o;var _=s==="horizontal"?r:n,w=_.scale.domain();if(_.type==="number"){var A=Math.max(w[0],w[1]),P=Math.min(w[0],w[1]);return o==="dataMin"?P:o==="dataMax"||A<0?A:Math.max(Math.min(w[0],w[1]),0)}return o==="dataMin"?w[0]:o==="dataMax"?w[1]:w[0]});dh($p,"getComposedData",function(e){var t=e.props,n=e.item,r=e.xAxis,s=e.yAxis,h=e.xAxisTicks,d=e.yAxisTicks,o=e.bandSize,_=e.dataKey,w=e.stackedData,A=e.dataStartIndex,P=e.displayedData,N=e.offset,z=t.layout,q=w&&w.length,$=g9.getBaseValue(t,n,r,s),O=z==="horizontal",X=!1,K=P.map(function(ne,H){var ae;q?ae=w[A+H]:(ae=Na(ne,_),Array.isArray(ae)?X=!0:ae=[$,ae]);var de=ae[1]==null||q&&Na(ne,_)==null;return O?{x:f1({axis:r,ticks:h,bandSize:o,entry:ne,index:H}),y:de?null:s.scale(ae[1]),value:ae,payload:ne}:{x:de?null:r.scale(ae[1]),y:f1({axis:s,ticks:d,bandSize:o,entry:ne,index:H}),value:ae,payload:ne}}),te;return q||X?te=K.map(function(ne){var H=Array.isArray(ne.value)?ne.value[0]:null;return O?{x:ne.x,y:H!=null&&ne.y!=null?s.scale(H):null}:{x:H!=null?r.scale(H):null,y:ne.y}}):te=O?s.scale($):r.scale($),gp({points:K,baseLine:te,layout:z,isRange:X},N)});dh($p,"renderDotItem",function(e,t){var n;if(je.isValidElement(e))n=je.cloneElement(e,t);else if(Xn(e))n=e(t);else{var r=dr("recharts-area-dot",typeof e!="boolean"?e.className:""),s=t.key,h=y9(t,g1e);n=je.createElement(M0,Dm({},h,{key:s,className:r}))}return n});function zy(e){"@babel/helpers - typeof";return zy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zy(e)}function P1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function A1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,w9(r.key),r)}}function C1e(e,t,n){return t&&A1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function E1e(e,t,n){return t=F1(t),j1e(e,_9()?Reflect.construct(t,n||[],F1(e).constructor):t.apply(e,n))}function j1e(e,t){if(t&&(zy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return M1e(e)}function M1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(_9=function(){return!!e})()}function F1(e){return F1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},F1(e)}function k1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vj(e,t)}function Vj(e,t){return Vj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Vj(e,t)}function b9(e,t,n){return t=w9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function w9(e){var t=I1e(e,"string");return zy(t)=="symbol"?t:t+""}function I1e(e,t){if(zy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(zy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Uj(){return Uj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uj.apply(this,arguments)}function N1e(e){var t=e.xAxisId,n=hI(),r=fI(),s=n9(t);return s==null?null:W.createElement(sv,Uj({},s,{className:dr("recharts-".concat(s.axisType," ").concat(s.axisType),s.className),viewBox:{x:0,y:0,width:n,height:r},ticksGenerator:function(d){return uf(d,!0)}}))}var Fm=(function(e){function t(){return P1e(this,t),E1e(this,t,arguments)}return k1e(t,e),C1e(t,[{key:"render",value:function(){return W.createElement(N1e,this.props)}}])})(W.Component);b9(Fm,"displayName","XAxis");b9(Fm,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function Fy(e){"@babel/helpers - typeof";return Fy=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fy(e)}function D1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,P9(r.key),r)}}function R1e(e,t,n){return t&&O1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function L1e(e,t,n){return t=B1(t),z1e(e,S9()?Reflect.construct(t,n||[],B1(e).constructor):t.apply(e,n))}function z1e(e,t){if(t&&(Fy(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return F1e(e)}function F1e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function S9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(S9=function(){return!!e})()}function B1(e){return B1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},B1(e)}function B1e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&qj(e,t)}function qj(e,t){return qj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},qj(e,t)}function T9(e,t,n){return t=P9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P9(e){var t=$1e(e,"string");return Fy(t)=="symbol"?t:t+""}function $1e(e,t){if(Fy(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(Fy(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gj(){return Gj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Gj.apply(this,arguments)}var V1e=function(t){var n=t.yAxisId,r=hI(),s=fI(),h=r9(n);return h==null?null:W.createElement(sv,Gj({},h,{className:dr("recharts-".concat(h.axisType," ").concat(h.axisType),h.className),viewBox:{x:0,y:0,width:r,height:s},ticksGenerator:function(o){return uf(o,!0)}}))},Bm=(function(e){function t(){return D1e(this,t),L1e(this,t,arguments)}return B1e(t,e),R1e(t,[{key:"render",value:function(){return W.createElement(V1e,this.props)}}])})(W.Component);T9(Bm,"displayName","YAxis");T9(Bm,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function sB(e){return W1e(e)||G1e(e)||q1e(e)||U1e()}function U1e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function q1e(e,t){if(e){if(typeof e=="string")return Wj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Wj(e,t)}}function G1e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function W1e(e){if(Array.isArray(e))return Wj(e)}function Wj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Hj=function(t,n,r,s,h){var d=Fc(t,mI),o=Fc(t,Vw),_=[].concat(sB(d),sB(o)),w=Fc(t,qw),A="".concat(s,"Id"),P=s[0],N=n;if(_.length&&(N=_.reduce(function($,O){if(O.props[A]===r&&yh(O.props,"extendDomain")&&Qt(O.props[P])){var X=O.props[P];return[Math.min($[0],X),Math.max($[1],X)]}return $},N)),w.length){var z="".concat(P,"1"),q="".concat(P,"2");N=w.reduce(function($,O){if(O.props[A]===r&&yh(O.props,"extendDomain")&&Qt(O.props[z])&&Qt(O.props[q])){var X=O.props[z],K=O.props[q];return[Math.min($[0],X,K),Math.max($[1],X,K)]}return $},N)}return h&&h.length&&(N=h.reduce(function($,O){return Qt(O)?[Math.min($[0],O),Math.max($[1],O)]:$},N)),N},AC={exports:{}},lB;function H1e(){return lB||(lB=1,(function(e){var t=Object.prototype.hasOwnProperty,n="~";function r(){}Object.create&&(r.prototype=Object.create(null),new r().__proto__||(n=!1));function s(_,w,A){this.fn=_,this.context=w,this.once=A||!1}function h(_,w,A,P,N){if(typeof A!="function")throw new TypeError("The listener must be a function");var z=new s(A,P||_,N),q=n?n+w:w;return _._events[q]?_._events[q].fn?_._events[q]=[_._events[q],z]:_._events[q].push(z):(_._events[q]=z,_._eventsCount++),_}function d(_,w){--_._eventsCount===0?_._events=new r:delete _._events[w]}function o(){this._events=new r,this._eventsCount=0}o.prototype.eventNames=function(){var w=[],A,P;if(this._eventsCount===0)return w;for(P in A=this._events)t.call(A,P)&&w.push(n?P.slice(1):P);return Object.getOwnPropertySymbols?w.concat(Object.getOwnPropertySymbols(A)):w},o.prototype.listeners=function(w){var A=n?n+w:w,P=this._events[A];if(!P)return[];if(P.fn)return[P.fn];for(var N=0,z=P.length,q=new Array(z);N<z;N++)q[N]=P[N].fn;return q},o.prototype.listenerCount=function(w){var A=n?n+w:w,P=this._events[A];return P?P.fn?1:P.length:0},o.prototype.emit=function(w,A,P,N,z,q){var $=n?n+w:w;if(!this._events[$])return!1;var O=this._events[$],X=arguments.length,K,te;if(O.fn){switch(O.once&&this.removeListener(w,O.fn,void 0,!0),X){case 1:return O.fn.call(O.context),!0;case 2:return O.fn.call(O.context,A),!0;case 3:return O.fn.call(O.context,A,P),!0;case 4:return O.fn.call(O.context,A,P,N),!0;case 5:return O.fn.call(O.context,A,P,N,z),!0;case 6:return O.fn.call(O.context,A,P,N,z,q),!0}for(te=1,K=new Array(X-1);te<X;te++)K[te-1]=arguments[te];O.fn.apply(O.context,K)}else{var ne=O.length,H;for(te=0;te<ne;te++)switch(O[te].once&&this.removeListener(w,O[te].fn,void 0,!0),X){case 1:O[te].fn.call(O[te].context);break;case 2:O[te].fn.call(O[te].context,A);break;case 3:O[te].fn.call(O[te].context,A,P);break;case 4:O[te].fn.call(O[te].context,A,P,N);break;default:if(!K)for(H=1,K=new Array(X-1);H<X;H++)K[H-1]=arguments[H];O[te].fn.apply(O[te].context,K)}}return!0},o.prototype.on=function(w,A,P){return h(this,w,A,P,!1)},o.prototype.once=function(w,A,P){return h(this,w,A,P,!0)},o.prototype.removeListener=function(w,A,P,N){var z=n?n+w:w;if(!this._events[z])return this;if(!A)return d(this,z),this;var q=this._events[z];if(q.fn)q.fn===A&&(!N||q.once)&&(!P||q.context===P)&&d(this,z);else{for(var $=0,O=[],X=q.length;$<X;$++)(q[$].fn!==A||N&&!q[$].once||P&&q[$].context!==P)&&O.push(q[$]);O.length?this._events[z]=O.length===1?O[0]:O:d(this,z)}return this},o.prototype.removeAllListeners=function(w){var A;return w?(A=n?n+w:w,this._events[A]&&d(this,A)):(this._events=new r,this._eventsCount=0),this},o.prototype.off=o.prototype.removeListener,o.prototype.addListener=o.prototype.on,o.prefixed=n,o.EventEmitter=o,e.exports=o})(AC)),AC.exports}var Z1e=H1e();const K1e=Kr(Z1e);var CC=new K1e,EC="recharts.syncMouseEvents";function o0(e){"@babel/helpers - typeof";return o0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o0(e)}function X1e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Y1e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,A9(r.key),r)}}function J1e(e,t,n){return t&&Y1e(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function jC(e,t,n){return t=A9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A9(e){var t=Q1e(e,"string");return o0(t)=="symbol"?t:t+""}function Q1e(e,t){if(o0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(o0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var ewe=(function(){function e(){X1e(this,e),jC(this,"activeIndex",0),jC(this,"coordinateList",[]),jC(this,"layout","horizontal")}return J1e(e,[{key:"setDetails",value:function(n){var r,s=n.coordinateList,h=s===void 0?null:s,d=n.container,o=d===void 0?null:d,_=n.layout,w=_===void 0?null:_,A=n.offset,P=A===void 0?null:A,N=n.mouseHandlerCallback,z=N===void 0?null:N;this.coordinateList=(r=h??this.coordinateList)!==null&&r!==void 0?r:[],this.container=o??this.container,this.layout=w??this.layout,this.offset=P??this.offset,this.mouseHandlerCallback=z??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,r;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var s=this.container.getBoundingClientRect(),h=s.x,d=s.y,o=s.height,_=this.coordinateList[this.activeIndex].coordinate,w=((n=window)===null||n===void 0?void 0:n.scrollX)||0,A=((r=window)===null||r===void 0?void 0:r.scrollY)||0,P=h+_+w,N=d+this.offset.top+o/2+A;this.mouseHandlerCallback({pageX:P,pageY:N})}}}])})();function twe(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var r=e?.[0],s=e?.[1];if(r&&s&&Qt(r)&&Qt(s))return!0}return!1}function nwe(e,t,n,r){var s=r/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-s:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-s,width:e==="horizontal"?r:n.width-1,height:e==="horizontal"?n.height-1:r}}function C9(e){var t=e.cx,n=e.cy,r=e.radius,s=e.startAngle,h=e.endAngle,d=Ni(t,n,r,s),o=Ni(t,n,r,h);return{points:[d,o],cx:t,cy:n,radius:r,startAngle:s,endAngle:h}}function rwe(e,t,n){var r,s,h,d;if(e==="horizontal")r=t.x,h=r,s=n.top,d=n.top+n.height;else if(e==="vertical")s=t.y,d=s,r=n.left,h=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var o=t.cx,_=t.cy,w=t.innerRadius,A=t.outerRadius,P=t.angle,N=Ni(o,_,w,P),z=Ni(o,_,A,P);r=N.x,s=N.y,h=z.x,d=z.y}else return C9(t);return[{x:r,y:s},{x:h,y:d}]}function s0(e){"@babel/helpers - typeof";return s0=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s0(e)}function cB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Q_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cB(Object(n),!0).forEach(function(r){iwe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function iwe(e,t,n){return t=awe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function awe(e){var t=owe(e,"string");return s0(t)=="symbol"?t:t+""}function owe(e,t){if(s0(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(s0(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function swe(e){var t,n,r=e.element,s=e.tooltipEventType,h=e.isActive,d=e.activeCoordinate,o=e.activePayload,_=e.offset,w=e.activeTooltipIndex,A=e.tooltipAxisBandSize,P=e.layout,N=e.chartName,z=(t=r.props.cursor)!==null&&t!==void 0?t:(n=r.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!r||!z||!h||!d||N!=="ScatterChart"&&s!=="axis")return null;var q,$=zm;if(N==="ScatterChart")q=d,$=xxe;else if(N==="BarChart")q=nwe(P,d,_,A),$=lI;else if(P==="radial"){var O=C9(d),X=O.cx,K=O.cy,te=O.radius,ne=O.startAngle,H=O.endAngle;q={cx:X,cy:K,startAngle:ne,endAngle:H,innerRadius:te,outerRadius:te},$=Tq}else q={points:rwe(P,d,_)},$=zm;var ae=Q_(Q_(Q_(Q_({stroke:"#ccc",pointerEvents:"none"},_),q),Dn(z,!1)),{},{payload:o,payloadIndex:w,className:dr("recharts-tooltip-cursor",z.className)});return W.isValidElement(z)?W.cloneElement(z,ae):W.createElement($,ae)}var lwe=["item"],cwe=["children","className","width","height","style","compact","title","desc"];function By(e){"@babel/helpers - typeof";return By=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},By(e)}function ny(){return ny=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ny.apply(this,arguments)}function uB(e,t){return hwe(e)||dwe(e,t)||j9(e,t)||uwe()}function uwe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function dwe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r,s,h,d,o=[],_=!0,w=!1;try{if(h=(n=n.call(e)).next,t!==0)for(;!(_=(r=h.call(n)).done)&&(o.push(r.value),o.length!==t);_=!0);}catch(A){w=!0,s=A}finally{try{if(!_&&n.return!=null&&(d=n.return(),Object(d)!==d))return}finally{if(w)throw s}}return o}}function hwe(e){if(Array.isArray(e))return e}function dB(e,t){if(e==null)return{};var n=fwe(e,t),r,s;if(Object.getOwnPropertySymbols){var h=Object.getOwnPropertySymbols(e);for(s=0;s<h.length;s++)r=h[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function fwe(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function pwe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mwe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,M9(r.key),r)}}function gwe(e,t,n){return t&&mwe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function ywe(e,t,n){return t=$1(t),vwe(e,E9()?Reflect.construct(t,n||[],$1(e).constructor):t.apply(e,n))}function vwe(e,t){if(t&&(By(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return xwe(e)}function xwe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E9(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E9=function(){return!!e})()}function $1(e){return $1=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$1(e)}function _we(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zj(e,t)}function Zj(e,t){return Zj=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(r,s){return r.__proto__=s,r},Zj(e,t)}function $y(e){return Swe(e)||wwe(e)||j9(e)||bwe()}function bwe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function j9(e,t){if(e){if(typeof e=="string")return Kj(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kj(e,t)}}function wwe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Swe(e){if(Array.isArray(e))return Kj(e)}function Kj(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function hB(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?hB(Object(n),!0).forEach(function(r){Kn(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):hB(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Kn(e,t,n){return t=M9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M9(e){var t=Twe(e,"string");return By(t)=="symbol"?t:t+""}function Twe(e,t){if(By(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(By(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Pwe={xAxis:["bottom","top"],yAxis:["left","right"]},Awe={width:"100%",height:"100%"},k9={x:0,y:0};function eb(e){return e}var Cwe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},Ewe=function(t,n,r,s){var h=n.find(function(A){return A&&A.index===r});if(h){if(t==="horizontal")return{x:h.coordinate,y:s.y};if(t==="vertical")return{x:s.x,y:h.coordinate};if(t==="centric"){var d=h.coordinate,o=s.radius;return Lt(Lt(Lt({},s),Ni(s.cx,s.cy,o,d)),{},{angle:d,radius:o})}var _=h.coordinate,w=s.angle;return Lt(Lt(Lt({},s),Ni(s.cx,s.cy,_,w)),{},{angle:w,radius:_})}return k9},Gw=function(t,n){var r=n.graphicalItems,s=n.dataStartIndex,h=n.dataEndIndex,d=(r??[]).reduce(function(o,_){var w=_.props.data;return w&&w.length?[].concat($y(o),$y(w)):o},[]);return d.length>0?d:t&&t.length&&Qt(s)&&Qt(h)?t.slice(s,h+1):[]};function I9(e){return e==="number"?[0,"auto"]:void 0}var Xj=function(t,n,r,s){var h=t.graphicalItems,d=t.tooltipAxis,o=Gw(n,t);return r<0||!h||!h.length||r>=o.length?null:h.reduce(function(_,w){var A,P=(A=w.props.data)!==null&&A!==void 0?A:n;P&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=r&&(P=P.slice(t.dataStartIndex,t.dataEndIndex+1));var N;if(d.dataKey&&!d.allowDuplicatedCategory){var z=P===void 0?o:P;N=$b(z,d.dataKey,s)}else N=P&&P[r]||o[r];return N?[].concat($y(_),[vq(w,N)]):_},[])},fB=function(t,n,r,s){var h=s||{x:t.chartX,y:t.chartY},d=Cwe(h,r),o=t.orderedTooltipTicks,_=t.tooltipAxis,w=t.tooltipTicks,A=Bme(d,o,w,_);if(A>=0&&w){var P=w[A]&&w[A].value,N=Xj(t,n,A,P),z=Ewe(r,o,A,h);return{activeTooltipIndex:A,activeLabel:P,activePayload:N,activeCoordinate:z}}return null},jwe=function(t,n){var r=n.axes,s=n.graphicalItems,h=n.axisType,d=n.axisIdKey,o=n.stackGroups,_=n.dataStartIndex,w=n.dataEndIndex,A=t.layout,P=t.children,N=t.stackOffset,z=hq(A,h);return r.reduce(function(q,$){var O,X=$.type.defaultProps!==void 0?Lt(Lt({},$.type.defaultProps),$.props):$.props,K=X.type,te=X.dataKey,ne=X.allowDataOverflow,H=X.allowDuplicatedCategory,ae=X.scale,de=X.ticks,ye=X.includeHidden,Ae=X[d];if(q[Ae])return q;var _e=Gw(t.data,{graphicalItems:s.filter(function(nt){var pt,Ct=d in nt.props?nt.props[d]:(pt=nt.type.defaultProps)===null||pt===void 0?void 0:pt[d];return Ct===Ae}),dataStartIndex:_,dataEndIndex:w}),fe=_e.length,Ee,Be,De;twe(X.domain,ne,K)&&(Ee=cj(X.domain,null,ne),z&&(K==="number"||ae!=="auto")&&(De=gx(_e,te,"category")));var Je=I9(K);if(!Ee||Ee.length===0){var Ve,et=(Ve=X.domain)!==null&&Ve!==void 0?Ve:Je;if(te){if(Ee=gx(_e,te,K),K==="category"&&z){var Ce=Dse(Ee);H&&Ce?(Be=Ee,Ee=C1(0,fe)):H||(Ee=fz(et,Ee,$).reduce(function(nt,pt){return nt.indexOf(pt)>=0?nt:[].concat($y(nt),[pt])},[]))}else if(K==="category")H?Ee=Ee.filter(function(nt){return nt!==""&&!lr(nt)}):Ee=fz(et,Ee,$).reduce(function(nt,pt){return nt.indexOf(pt)>=0||pt===""||lr(pt)?nt:[].concat($y(nt),[pt])},[]);else if(K==="number"){var We=Gme(_e,s.filter(function(nt){var pt,Ct,Mt=d in nt.props?nt.props[d]:(pt=nt.type.defaultProps)===null||pt===void 0?void 0:pt[d],Nt="hide"in nt.props?nt.props.hide:(Ct=nt.type.defaultProps)===null||Ct===void 0?void 0:Ct.hide;return Mt===Ae&&(ye||!Nt)}),te,h,A);We&&(Ee=We)}z&&(K==="number"||ae!=="auto")&&(De=gx(_e,te,"category"))}else z?Ee=C1(0,fe):o&&o[Ae]&&o[Ae].hasStack&&K==="number"?Ee=N==="expand"?[0,1]:yq(o[Ae].stackGroups,_,w):Ee=dq(_e,s.filter(function(nt){var pt=d in nt.props?nt.props[d]:nt.type.defaultProps[d],Ct="hide"in nt.props?nt.props.hide:nt.type.defaultProps.hide;return pt===Ae&&(ye||!Ct)}),K,A,!0);if(K==="number")Ee=Hj(P,Ee,Ae,h,de),et&&(Ee=cj(et,Ee,ne));else if(K==="category"&&et){var Qe=et,Re=Ee.every(function(nt){return Qe.indexOf(nt)>=0});Re&&(Ee=Qe)}}return Lt(Lt({},q),{},Kn({},Ae,Lt(Lt({},X),{},{axisType:h,domain:Ee,categoricalDomain:De,duplicateDomain:Be,originalDomain:(O=X.domain)!==null&&O!==void 0?O:Je,isCategorical:z,layout:A})))},{})},Mwe=function(t,n){var r=n.graphicalItems,s=n.Axis,h=n.axisType,d=n.axisIdKey,o=n.stackGroups,_=n.dataStartIndex,w=n.dataEndIndex,A=t.layout,P=t.children,N=Gw(t.data,{graphicalItems:r,dataStartIndex:_,dataEndIndex:w}),z=N.length,q=hq(A,h),$=-1;return r.reduce(function(O,X){var K=X.type.defaultProps!==void 0?Lt(Lt({},X.type.defaultProps),X.props):X.props,te=K[d],ne=I9("number");if(!O[te]){$++;var H;return q?H=C1(0,z):o&&o[te]&&o[te].hasStack?(H=yq(o[te].stackGroups,_,w),H=Hj(P,H,te,h)):(H=cj(ne,dq(N,r.filter(function(ae){var de,ye,Ae=d in ae.props?ae.props[d]:(de=ae.type.defaultProps)===null||de===void 0?void 0:de[d],_e="hide"in ae.props?ae.props.hide:(ye=ae.type.defaultProps)===null||ye===void 0?void 0:ye.hide;return Ae===te&&!_e}),"number",A),s.defaultProps.allowDataOverflow),H=Hj(P,H,te,h)),Lt(Lt({},O),{},Kn({},te,Lt(Lt({axisType:h},s.defaultProps),{},{hide:!0,orientation:zc(Pwe,"".concat(h,".").concat($%2),null),domain:H,originalDomain:ne,isCategorical:q,layout:A})))}return O},{})},kwe=function(t,n){var r=n.axisType,s=r===void 0?"xAxis":r,h=n.AxisComp,d=n.graphicalItems,o=n.stackGroups,_=n.dataStartIndex,w=n.dataEndIndex,A=t.children,P="".concat(s,"Id"),N=Fc(A,h),z={};return N&&N.length?z=jwe(t,{axes:N,graphicalItems:d,axisType:s,axisIdKey:P,stackGroups:o,dataStartIndex:_,dataEndIndex:w}):d&&d.length&&(z=Mwe(t,{Axis:h,graphicalItems:d,axisType:s,axisIdKey:P,stackGroups:o,dataStartIndex:_,dataEndIndex:w})),z},Iwe=function(t){var n=xp(t),r=uf(n,!1,!0);return{tooltipTicks:r,orderedTooltipTicks:Ok(r,function(s){return s.coordinate}),tooltipAxis:n,tooltipAxisBandSize:p1(n,r)}},pB=function(t){var n=t.children,r=t.defaultShowTooltip,s=Nc(n,jy),h=0,d=0;return t.data&&t.data.length!==0&&(d=t.data.length-1),s&&s.props&&(s.props.startIndex>=0&&(h=s.props.startIndex),s.props.endIndex>=0&&(d=s.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:h,dataEndIndex:d,activeTooltipIndex:-1,isTooltipActive:!!r}},Nwe=function(t){return!t||!t.length?!1:t.some(function(n){var r=df(n&&n.type);return r&&r.indexOf("Bar")>=0})},mB=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},Dwe=function(t,n){var r=t.props,s=t.graphicalItems,h=t.xAxisMap,d=h===void 0?{}:h,o=t.yAxisMap,_=o===void 0?{}:o,w=r.width,A=r.height,P=r.children,N=r.margin||{},z=Nc(P,jy),q=Nc(P,sy),$=Object.keys(_).reduce(function(H,ae){var de=_[ae],ye=de.orientation;return!de.mirror&&!de.hide?Lt(Lt({},H),{},Kn({},ye,H[ye]+de.width)):H},{left:N.left||0,right:N.right||0}),O=Object.keys(d).reduce(function(H,ae){var de=d[ae],ye=de.orientation;return!de.mirror&&!de.hide?Lt(Lt({},H),{},Kn({},ye,zc(H,"".concat(ye))+de.height)):H},{top:N.top||0,bottom:N.bottom||0}),X=Lt(Lt({},O),$),K=X.bottom;z&&(X.bottom+=z.props.height||jy.defaultProps.height),q&&n&&(X=Ume(X,s,r,n));var te=w-X.left-X.right,ne=A-X.top-X.bottom;return Lt(Lt({brushBottom:K},X),{},{width:Math.max(te,0),height:Math.max(ne,0)})},Owe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},vI=function(t){var n=t.chartName,r=t.GraphicalChild,s=t.defaultTooltipEventType,h=s===void 0?"axis":s,d=t.validateTooltipEventTypes,o=d===void 0?["axis"]:d,_=t.axisComponents,w=t.legendContent,A=t.formatAxisMap,P=t.defaultProps,N=function(X,K){var te=K.graphicalItems,ne=K.stackGroups,H=K.offset,ae=K.updateId,de=K.dataStartIndex,ye=K.dataEndIndex,Ae=X.barSize,_e=X.layout,fe=X.barGap,Ee=X.barCategoryGap,Be=X.maxBarSize,De=mB(_e),Je=De.numericAxisName,Ve=De.cateAxisName,et=Nwe(te),Ce=[];return te.forEach(function(We,Qe){var Re=Gw(X.data,{graphicalItems:[We],dataStartIndex:de,dataEndIndex:ye}),nt=We.type.defaultProps!==void 0?Lt(Lt({},We.type.defaultProps),We.props):We.props,pt=nt.dataKey,Ct=nt.maxBarSize,Mt=nt["".concat(Je,"Id")],Nt=nt["".concat(Ve,"Id")],Tt={},Ot=_.reduce(function(Br,hr){var ri=K["".concat(hr.axisType,"Map")],wa=nt["".concat(hr.axisType,"Id")];ri&&ri[wa]||hr.axisType==="zAxis"||eg();var _i=ri[wa];return Lt(Lt({},Br),{},Kn(Kn({},hr.axisType,_i),"".concat(hr.axisType,"Ticks"),uf(_i)))},Tt),rt=Ot[Ve],zt=Ot["".concat(Ve,"Ticks")],Ut=ne&&ne[Mt]&&ne[Mt].hasStack&&ege(We,ne[Mt].stackGroups),dt=df(We.type).indexOf("Bar")>=0,Rn=p1(rt,zt),cn=[],Hn=et&&$me({barSize:Ae,stackGroups:ne,totalSize:Owe(Ot,Ve)});if(dt){var Gn,Mn,Nr=lr(Ct)?Be:Ct,Fr=(Gn=(Mn=p1(rt,zt,!0))!==null&&Mn!==void 0?Mn:Nr)!==null&&Gn!==void 0?Gn:0;cn=Vme({barGap:fe,barCategoryGap:Ee,bandSize:Fr!==Rn?Fr:Rn,sizeList:Hn[Nt],maxBarSize:Nr}),Fr!==Rn&&(cn=cn.map(function(Br){return Lt(Lt({},Br),{},{position:Lt(Lt({},Br.position),{},{offset:Br.position.offset-Fr/2})})}))}var xi=We&&We.type&&We.type.getComposedData;xi&&Ce.push({props:Lt(Lt({},xi(Lt(Lt({},Ot),{},{displayedData:Re,props:X,dataKey:pt,item:We,bandSize:Rn,barPosition:cn,offset:H,stackedData:Ut,layout:_e,dataStartIndex:de,dataEndIndex:ye}))),{},Kn(Kn(Kn({key:We.key||"item-".concat(Qe)},Je,Ot[Je]),Ve,Ot[Ve]),"animationId",ae)),childIndex:Wse(We,X.children),item:We})}),Ce},z=function(X,K){var te=X.props,ne=X.dataStartIndex,H=X.dataEndIndex,ae=X.updateId;if(!E5({props:te}))return null;var de=te.children,ye=te.layout,Ae=te.stackOffset,_e=te.data,fe=te.reverseStackOrder,Ee=mB(ye),Be=Ee.numericAxisName,De=Ee.cateAxisName,Je=Fc(de,r),Ve=Jme(_e,Je,"".concat(Be,"Id"),"".concat(De,"Id"),Ae,fe),et=_.reduce(function(nt,pt){var Ct="".concat(pt.axisType,"Map");return Lt(Lt({},nt),{},Kn({},Ct,kwe(te,Lt(Lt({},pt),{},{graphicalItems:Je,stackGroups:pt.axisType===Be&&Ve,dataStartIndex:ne,dataEndIndex:H}))))},{}),Ce=Dwe(Lt(Lt({},et),{},{props:te,graphicalItems:Je}),K?.legendBBox);Object.keys(et).forEach(function(nt){et[nt]=A(te,et[nt],Ce,nt.replace("Map",""),n)});var We=et["".concat(De,"Map")],Qe=Iwe(We),Re=N(te,Lt(Lt({},et),{},{dataStartIndex:ne,dataEndIndex:H,updateId:ae,graphicalItems:Je,stackGroups:Ve,offset:Ce}));return Lt(Lt({formattedGraphicalItems:Re,graphicalItems:Je,offset:Ce,stackGroups:Ve},Qe),et)},q=(function(O){function X(K){var te,ne,H;return pwe(this,X),H=ywe(this,X,[K]),Kn(H,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Kn(H,"accessibilityManager",new ewe),Kn(H,"handleLegendBBoxUpdate",function(ae){if(ae){var de=H.state,ye=de.dataStartIndex,Ae=de.dataEndIndex,_e=de.updateId;H.setState(Lt({legendBBox:ae},z({props:H.props,dataStartIndex:ye,dataEndIndex:Ae,updateId:_e},Lt(Lt({},H.state),{},{legendBBox:ae}))))}}),Kn(H,"handleReceiveSyncEvent",function(ae,de,ye){if(H.props.syncId===ae){if(ye===H.eventEmitterSymbol&&typeof H.props.syncMethod!="function")return;H.applySyncEvent(de)}}),Kn(H,"handleBrushChange",function(ae){var de=ae.startIndex,ye=ae.endIndex;if(de!==H.state.dataStartIndex||ye!==H.state.dataEndIndex){var Ae=H.state.updateId;H.setState(function(){return Lt({dataStartIndex:de,dataEndIndex:ye},z({props:H.props,dataStartIndex:de,dataEndIndex:ye,updateId:Ae},H.state))}),H.triggerSyncEvent({dataStartIndex:de,dataEndIndex:ye})}}),Kn(H,"handleMouseEnter",function(ae){var de=H.getMouseInfo(ae);if(de){var ye=Lt(Lt({},de),{},{isTooltipActive:!0});H.setState(ye),H.triggerSyncEvent(ye);var Ae=H.props.onMouseEnter;Xn(Ae)&&Ae(ye,ae)}}),Kn(H,"triggeredAfterMouseMove",function(ae){var de=H.getMouseInfo(ae),ye=de?Lt(Lt({},de),{},{isTooltipActive:!0}):{isTooltipActive:!1};H.setState(ye),H.triggerSyncEvent(ye);var Ae=H.props.onMouseMove;Xn(Ae)&&Ae(ye,ae)}),Kn(H,"handleItemMouseEnter",function(ae){H.setState(function(){return{isTooltipActive:!0,activeItem:ae,activePayload:ae.tooltipPayload,activeCoordinate:ae.tooltipPosition||{x:ae.cx,y:ae.cy}}})}),Kn(H,"handleItemMouseLeave",function(){H.setState(function(){return{isTooltipActive:!1}})}),Kn(H,"handleMouseMove",function(ae){ae.persist(),H.throttleTriggeredAfterMouseMove(ae)}),Kn(H,"handleMouseLeave",function(ae){H.throttleTriggeredAfterMouseMove.cancel();var de={isTooltipActive:!1};H.setState(de),H.triggerSyncEvent(de);var ye=H.props.onMouseLeave;Xn(ye)&&ye(de,ae)}),Kn(H,"handleOuterEvent",function(ae){var de=Gse(ae),ye=zc(H.props,"".concat(de));if(de&&Xn(ye)){var Ae,_e;/.*touch.*/i.test(de)?_e=H.getMouseInfo(ae.changedTouches[0]):_e=H.getMouseInfo(ae),ye((Ae=_e)!==null&&Ae!==void 0?Ae:{},ae)}}),Kn(H,"handleClick",function(ae){var de=H.getMouseInfo(ae);if(de){var ye=Lt(Lt({},de),{},{isTooltipActive:!0});H.setState(ye),H.triggerSyncEvent(ye);var Ae=H.props.onClick;Xn(Ae)&&Ae(ye,ae)}}),Kn(H,"handleMouseDown",function(ae){var de=H.props.onMouseDown;if(Xn(de)){var ye=H.getMouseInfo(ae);de(ye,ae)}}),Kn(H,"handleMouseUp",function(ae){var de=H.props.onMouseUp;if(Xn(de)){var ye=H.getMouseInfo(ae);de(ye,ae)}}),Kn(H,"handleTouchMove",function(ae){ae.changedTouches!=null&&ae.changedTouches.length>0&&H.throttleTriggeredAfterMouseMove(ae.changedTouches[0])}),Kn(H,"handleTouchStart",function(ae){ae.changedTouches!=null&&ae.changedTouches.length>0&&H.handleMouseDown(ae.changedTouches[0])}),Kn(H,"handleTouchEnd",function(ae){ae.changedTouches!=null&&ae.changedTouches.length>0&&H.handleMouseUp(ae.changedTouches[0])}),Kn(H,"handleDoubleClick",function(ae){var de=H.props.onDoubleClick;if(Xn(de)){var ye=H.getMouseInfo(ae);de(ye,ae)}}),Kn(H,"handleContextMenu",function(ae){var de=H.props.onContextMenu;if(Xn(de)){var ye=H.getMouseInfo(ae);de(ye,ae)}}),Kn(H,"triggerSyncEvent",function(ae){H.props.syncId!==void 0&&CC.emit(EC,H.props.syncId,ae,H.eventEmitterSymbol)}),Kn(H,"applySyncEvent",function(ae){var de=H.props,ye=de.layout,Ae=de.syncMethod,_e=H.state.updateId,fe=ae.dataStartIndex,Ee=ae.dataEndIndex;if(ae.dataStartIndex!==void 0||ae.dataEndIndex!==void 0)H.setState(Lt({dataStartIndex:fe,dataEndIndex:Ee},z({props:H.props,dataStartIndex:fe,dataEndIndex:Ee,updateId:_e},H.state)));else if(ae.activeTooltipIndex!==void 0){var Be=ae.chartX,De=ae.chartY,Je=ae.activeTooltipIndex,Ve=H.state,et=Ve.offset,Ce=Ve.tooltipTicks;if(!et)return;if(typeof Ae=="function")Je=Ae(Ce,ae);else if(Ae==="value"){Je=-1;for(var We=0;We<Ce.length;We++)if(Ce[We].value===ae.activeLabel){Je=We;break}}var Qe=Lt(Lt({},et),{},{x:et.left,y:et.top}),Re=Math.min(Be,Qe.x+Qe.width),nt=Math.min(De,Qe.y+Qe.height),pt=Ce[Je]&&Ce[Je].value,Ct=Xj(H.state,H.props.data,Je),Mt=Ce[Je]?{x:ye==="horizontal"?Ce[Je].coordinate:Re,y:ye==="horizontal"?nt:Ce[Je].coordinate}:k9;H.setState(Lt(Lt({},ae),{},{activeLabel:pt,activeCoordinate:Mt,activePayload:Ct,activeTooltipIndex:Je}))}else H.setState(ae)}),Kn(H,"renderCursor",function(ae){var de,ye=H.state,Ae=ye.isTooltipActive,_e=ye.activeCoordinate,fe=ye.activePayload,Ee=ye.offset,Be=ye.activeTooltipIndex,De=ye.tooltipAxisBandSize,Je=H.getTooltipEventType(),Ve=(de=ae.props.active)!==null&&de!==void 0?de:Ae,et=H.props.layout,Ce=ae.key||"_recharts-cursor";return je.createElement(swe,{key:Ce,activeCoordinate:_e,activePayload:fe,activeTooltipIndex:Be,chartName:n,element:ae,isActive:Ve,layout:et,offset:Ee,tooltipAxisBandSize:De,tooltipEventType:Je})}),Kn(H,"renderPolarAxis",function(ae,de,ye){var Ae=zc(ae,"type.axisType"),_e=zc(H.state,"".concat(Ae,"Map")),fe=ae.type.defaultProps,Ee=fe!==void 0?Lt(Lt({},fe),ae.props):ae.props,Be=_e&&_e[Ee["".concat(Ae,"Id")]];return W.cloneElement(ae,Lt(Lt({},Be),{},{className:dr(Ae,Be.className),key:ae.key||"".concat(de,"-").concat(ye),ticks:uf(Be,!0)}))}),Kn(H,"renderPolarGrid",function(ae){var de=ae.props,ye=de.radialLines,Ae=de.polarAngles,_e=de.polarRadius,fe=H.state,Ee=fe.radiusAxisMap,Be=fe.angleAxisMap,De=xp(Ee),Je=xp(Be),Ve=Je.cx,et=Je.cy,Ce=Je.innerRadius,We=Je.outerRadius;return W.cloneElement(ae,{polarAngles:Array.isArray(Ae)?Ae:uf(Je,!0).map(function(Qe){return Qe.coordinate}),polarRadius:Array.isArray(_e)?_e:uf(De,!0).map(function(Qe){return Qe.coordinate}),cx:Ve,cy:et,innerRadius:Ce,outerRadius:We,key:ae.key||"polar-grid",radialLines:ye})}),Kn(H,"renderLegend",function(){var ae=H.state.formattedGraphicalItems,de=H.props,ye=de.children,Ae=de.width,_e=de.height,fe=H.props.margin||{},Ee=Ae-(fe.left||0)-(fe.right||0),Be=cq({children:ye,formattedGraphicalItems:ae,legendWidth:Ee,legendContent:w});if(!Be)return null;var De=Be.item,Je=dB(Be,lwe);return W.cloneElement(De,Lt(Lt({},Je),{},{chartWidth:Ae,chartHeight:_e,margin:fe,onBBoxUpdate:H.handleLegendBBoxUpdate}))}),Kn(H,"renderTooltip",function(){var ae,de=H.props,ye=de.children,Ae=de.accessibilityLayer,_e=Nc(ye,Dc);if(!_e)return null;var fe=H.state,Ee=fe.isTooltipActive,Be=fe.activeCoordinate,De=fe.activePayload,Je=fe.activeLabel,Ve=fe.offset,et=(ae=_e.props.active)!==null&&ae!==void 0?ae:Ee;return W.cloneElement(_e,{viewBox:Lt(Lt({},Ve),{},{x:Ve.left,y:Ve.top}),active:et,label:Je,payload:et?De:[],coordinate:Be,accessibilityLayer:Ae})}),Kn(H,"renderBrush",function(ae){var de=H.props,ye=de.margin,Ae=de.data,_e=H.state,fe=_e.offset,Ee=_e.dataStartIndex,Be=_e.dataEndIndex,De=_e.updateId;return W.cloneElement(ae,{key:ae.key||"_recharts-brush",onChange:K_(H.handleBrushChange,ae.props.onChange),data:Ae,x:Qt(ae.props.x)?ae.props.x:fe.left,y:Qt(ae.props.y)?ae.props.y:fe.top+fe.height+fe.brushBottom-(ye.bottom||0),width:Qt(ae.props.width)?ae.props.width:fe.width,startIndex:Ee,endIndex:Be,updateId:"brush-".concat(De)})}),Kn(H,"renderReferenceElement",function(ae,de,ye){if(!ae)return null;var Ae=H,_e=Ae.clipPathId,fe=H.state,Ee=fe.xAxisMap,Be=fe.yAxisMap,De=fe.offset,Je=ae.type.defaultProps||{},Ve=ae.props,et=Ve.xAxisId,Ce=et===void 0?Je.xAxisId:et,We=Ve.yAxisId,Qe=We===void 0?Je.yAxisId:We;return W.cloneElement(ae,{key:ae.key||"".concat(de,"-").concat(ye),xAxis:Ee[Ce],yAxis:Be[Qe],viewBox:{x:De.left,y:De.top,width:De.width,height:De.height},clipPathId:_e})}),Kn(H,"renderActivePoints",function(ae){var de=ae.item,ye=ae.activePoint,Ae=ae.basePoint,_e=ae.childIndex,fe=ae.isRange,Ee=[],Be=de.props.key,De=de.item.type.defaultProps!==void 0?Lt(Lt({},de.item.type.defaultProps),de.item.props):de.item.props,Je=De.activeDot,Ve=De.dataKey,et=Lt(Lt({index:_e,dataKey:Ve,cx:ye.x,cy:ye.y,r:4,fill:sI(de.item),strokeWidth:2,stroke:"#fff",payload:ye.payload,value:ye.value},Dn(Je,!1)),Vb(Je));return Ee.push(X.renderActiveDot(Je,et,"".concat(Be,"-activePoint-").concat(_e))),Ae?Ee.push(X.renderActiveDot(Je,Lt(Lt({},et),{},{cx:Ae.x,cy:Ae.y}),"".concat(Be,"-basePoint-").concat(_e))):fe&&Ee.push(null),Ee}),Kn(H,"renderGraphicChild",function(ae,de,ye){var Ae=H.filterFormatItem(ae,de,ye);if(!Ae)return null;var _e=H.getTooltipEventType(),fe=H.state,Ee=fe.isTooltipActive,Be=fe.tooltipAxis,De=fe.activeTooltipIndex,Je=fe.activeLabel,Ve=H.props.children,et=Nc(Ve,Dc),Ce=Ae.props,We=Ce.points,Qe=Ce.isRange,Re=Ce.baseLine,nt=Ae.item.type.defaultProps!==void 0?Lt(Lt({},Ae.item.type.defaultProps),Ae.item.props):Ae.item.props,pt=nt.activeDot,Ct=nt.hide,Mt=nt.activeBar,Nt=nt.activeShape,Tt=!!(!Ct&&Ee&&et&&(pt||Mt||Nt)),Ot={};_e!=="axis"&&et&&et.props.trigger==="click"?Ot={onClick:K_(H.handleItemMouseEnter,ae.props.onClick)}:_e!=="axis"&&(Ot={onMouseLeave:K_(H.handleItemMouseLeave,ae.props.onMouseLeave),onMouseEnter:K_(H.handleItemMouseEnter,ae.props.onMouseEnter)});var rt=W.cloneElement(ae,Lt(Lt({},Ae.props),Ot));function zt(hr){return typeof Be.dataKey=="function"?Be.dataKey(hr.payload):null}if(Tt)if(De>=0){var Ut,dt;if(Be.dataKey&&!Be.allowDuplicatedCategory){var Rn=typeof Be.dataKey=="function"?zt:"payload.".concat(Be.dataKey.toString());Ut=$b(We,Rn,Je),dt=Qe&&Re&&$b(Re,Rn,Je)}else Ut=We?.[De],dt=Qe&&Re&&Re[De];if(Nt||Mt){var cn=ae.props.activeIndex!==void 0?ae.props.activeIndex:De;return[W.cloneElement(ae,Lt(Lt(Lt({},Ae.props),Ot),{},{activeIndex:cn})),null,null]}if(!lr(Ut))return[rt].concat($y(H.renderActivePoints({item:Ae,activePoint:Ut,basePoint:dt,childIndex:De,isRange:Qe})))}else{var Hn,Gn=(Hn=H.getItemByXY(H.state.activeCoordinate))!==null&&Hn!==void 0?Hn:{graphicalItem:rt},Mn=Gn.graphicalItem,Nr=Mn.item,Fr=Nr===void 0?ae:Nr,xi=Mn.childIndex,Br=Lt(Lt(Lt({},Ae.props),Ot),{},{activeIndex:xi});return[W.cloneElement(Fr,Br),null,null]}return Qe?[rt,null,null]:[rt,null]}),Kn(H,"renderCustomized",function(ae,de,ye){return W.cloneElement(ae,Lt(Lt({key:"recharts-customized-".concat(ye)},H.props),H.state))}),Kn(H,"renderMap",{CartesianGrid:{handler:eb,once:!0},ReferenceArea:{handler:H.renderReferenceElement},ReferenceLine:{handler:eb},ReferenceDot:{handler:H.renderReferenceElement},XAxis:{handler:eb},YAxis:{handler:eb},Brush:{handler:H.renderBrush,once:!0},Bar:{handler:H.renderGraphicChild},Line:{handler:H.renderGraphicChild},Area:{handler:H.renderGraphicChild},Radar:{handler:H.renderGraphicChild},RadialBar:{handler:H.renderGraphicChild},Scatter:{handler:H.renderGraphicChild},Pie:{handler:H.renderGraphicChild},Funnel:{handler:H.renderGraphicChild},Tooltip:{handler:H.renderCursor,once:!0},PolarGrid:{handler:H.renderPolarGrid,once:!0},PolarAngleAxis:{handler:H.renderPolarAxis},PolarRadiusAxis:{handler:H.renderPolarAxis},Customized:{handler:H.renderCustomized}}),H.clipPathId="".concat((te=K.id)!==null&&te!==void 0?te:rg("recharts"),"-clip"),H.throttleTriggeredAfterMouseMove=c7(H.triggeredAfterMouseMove,(ne=K.throttleDelay)!==null&&ne!==void 0?ne:1e3/60),H.state={},H}return _we(X,O),gwe(X,[{key:"componentDidMount",value:function(){var te,ne;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(te=this.props.margin.left)!==null&&te!==void 0?te:0,top:(ne=this.props.margin.top)!==null&&ne!==void 0?ne:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var te=this.props,ne=te.children,H=te.data,ae=te.height,de=te.layout,ye=Nc(ne,Dc);if(ye){var Ae=ye.props.defaultIndex;if(!(typeof Ae!="number"||Ae<0||Ae>this.state.tooltipTicks.length-1)){var _e=this.state.tooltipTicks[Ae]&&this.state.tooltipTicks[Ae].value,fe=Xj(this.state,H,Ae,_e),Ee=this.state.tooltipTicks[Ae].coordinate,Be=(this.state.offset.top+ae)/2,De=de==="horizontal",Je=De?{x:Ee,y:Be}:{y:Ee,x:Be},Ve=this.state.formattedGraphicalItems.find(function(Ce){var We=Ce.item;return We.type.name==="Scatter"});Ve&&(Je=Lt(Lt({},Je),Ve.props.points[Ae].tooltipPosition),fe=Ve.props.points[Ae].tooltipPayload);var et={activeTooltipIndex:Ae,isTooltipActive:!0,activeLabel:_e,activePayload:fe,activeCoordinate:Je};this.setState(et),this.renderCursor(ye),this.accessibilityManager.setIndex(Ae)}}}},{key:"getSnapshotBeforeUpdate",value:function(te,ne){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==ne.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==te.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==te.margin){var H,ae;this.accessibilityManager.setDetails({offset:{left:(H=this.props.margin.left)!==null&&H!==void 0?H:0,top:(ae=this.props.margin.top)!==null&&ae!==void 0?ae:0}})}return null}},{key:"componentDidUpdate",value:function(te){kE([Nc(te.children,Dc)],[Nc(this.props.children,Dc)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var te=Nc(this.props.children,Dc);if(te&&typeof te.props.shared=="boolean"){var ne=te.props.shared?"axis":"item";return o.indexOf(ne)>=0?ne:h}return h}},{key:"getMouseInfo",value:function(te){if(!this.container)return null;var ne=this.container,H=ne.getBoundingClientRect(),ae=Ide(H),de={chartX:Math.round(te.pageX-ae.left),chartY:Math.round(te.pageY-ae.top)},ye=H.width/ne.offsetWidth||1,Ae=this.inRange(de.chartX,de.chartY,ye);if(!Ae)return null;var _e=this.state,fe=_e.xAxisMap,Ee=_e.yAxisMap,Be=this.getTooltipEventType(),De=fB(this.state,this.props.data,this.props.layout,Ae);if(Be!=="axis"&&fe&&Ee){var Je=xp(fe).scale,Ve=xp(Ee).scale,et=Je&&Je.invert?Je.invert(de.chartX):null,Ce=Ve&&Ve.invert?Ve.invert(de.chartY):null;return Lt(Lt({},de),{},{xValue:et,yValue:Ce},De)}return De?Lt(Lt({},de),De):null}},{key:"inRange",value:function(te,ne){var H=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,ae=this.props.layout,de=te/H,ye=ne/H;if(ae==="horizontal"||ae==="vertical"){var Ae=this.state.offset,_e=de>=Ae.left&&de<=Ae.left+Ae.width&&ye>=Ae.top&&ye<=Ae.top+Ae.height;return _e?{x:de,y:ye}:null}var fe=this.state,Ee=fe.angleAxisMap,Be=fe.radiusAxisMap;if(Ee&&Be){var De=xp(Ee);return gz({x:de,y:ye},De)}return null}},{key:"parseEventsOfWrapper",value:function(){var te=this.props.children,ne=this.getTooltipEventType(),H=Nc(te,Dc),ae={};H&&ne==="axis"&&(H.props.trigger==="click"?ae={onClick:this.handleClick}:ae={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var de=Vb(this.props,this.handleOuterEvent);return Lt(Lt({},de),ae)}},{key:"addListener",value:function(){CC.on(EC,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){CC.removeListener(EC,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(te,ne,H){for(var ae=this.state.formattedGraphicalItems,de=0,ye=ae.length;de<ye;de++){var Ae=ae[de];if(Ae.item===te||Ae.props.key===te.key||ne===df(Ae.item.type)&&H===Ae.childIndex)return Ae}return null}},{key:"renderClipPath",value:function(){var te=this.clipPathId,ne=this.state.offset,H=ne.left,ae=ne.top,de=ne.height,ye=ne.width;return je.createElement("defs",null,je.createElement("clipPath",{id:te},je.createElement("rect",{x:H,y:ae,height:de,width:ye})))}},{key:"getXScales",value:function(){var te=this.state.xAxisMap;return te?Object.entries(te).reduce(function(ne,H){var ae=uB(H,2),de=ae[0],ye=ae[1];return Lt(Lt({},ne),{},Kn({},de,ye.scale))},{}):null}},{key:"getYScales",value:function(){var te=this.state.yAxisMap;return te?Object.entries(te).reduce(function(ne,H){var ae=uB(H,2),de=ae[0],ye=ae[1];return Lt(Lt({},ne),{},Kn({},de,ye.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(te){var ne;return(ne=this.state.xAxisMap)===null||ne===void 0||(ne=ne[te])===null||ne===void 0?void 0:ne.scale}},{key:"getYScaleByAxisId",value:function(te){var ne;return(ne=this.state.yAxisMap)===null||ne===void 0||(ne=ne[te])===null||ne===void 0?void 0:ne.scale}},{key:"getItemByXY",value:function(te){var ne=this.state,H=ne.formattedGraphicalItems,ae=ne.activeItem;if(H&&H.length)for(var de=0,ye=H.length;de<ye;de++){var Ae=H[de],_e=Ae.props,fe=Ae.item,Ee=fe.type.defaultProps!==void 0?Lt(Lt({},fe.type.defaultProps),fe.props):fe.props,Be=df(fe.type);if(Be==="Bar"){var De=(_e.data||[]).find(function(Ce){return Qve(te,Ce)});if(De)return{graphicalItem:Ae,payload:De}}else if(Be==="RadialBar"){var Je=(_e.data||[]).find(function(Ce){return gz(te,Ce)});if(Je)return{graphicalItem:Ae,payload:Je}}else if(zw(Ae,ae)||Fw(Ae,ae)||t0(Ae,ae)){var Ve=w0e({graphicalItem:Ae,activeTooltipItem:ae,itemData:Ee.data}),et=Ee.activeIndex===void 0?Ve:Ee.activeIndex;return{graphicalItem:Lt(Lt({},Ae),{},{childIndex:et}),payload:t0(Ae,ae)?Ee.data[Ve]:Ae.props.data[Ve]}}}return null}},{key:"render",value:function(){var te=this;if(!E5(this))return null;var ne=this.props,H=ne.children,ae=ne.className,de=ne.width,ye=ne.height,Ae=ne.style,_e=ne.compact,fe=ne.title,Ee=ne.desc,Be=dB(ne,cwe),De=Dn(Be,!1);if(_e)return je.createElement(UF,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},je.createElement(NE,ny({},De,{width:de,height:ye,title:fe,desc:Ee}),this.renderClipPath(),M5(H,this.renderMap)));if(this.props.accessibilityLayer){var Je,Ve;De.tabIndex=(Je=this.props.tabIndex)!==null&&Je!==void 0?Je:0,De.role=(Ve=this.props.role)!==null&&Ve!==void 0?Ve:"application",De.onKeyDown=function(Ce){te.accessibilityManager.keyboardEvent(Ce)},De.onFocus=function(){te.accessibilityManager.focus()}}var et=this.parseEventsOfWrapper();return je.createElement(UF,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},je.createElement("div",ny({className:dr("recharts-wrapper",ae),style:Lt({position:"relative",cursor:"default",width:de,height:ye},Ae)},et,{ref:function(We){te.container=We}}),je.createElement(NE,ny({},De,{width:de,height:ye,title:fe,desc:Ee,style:Awe}),this.renderClipPath(),M5(H,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])})(W.Component);Kn(q,"displayName",n),Kn(q,"defaultProps",Lt({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},P)),Kn(q,"getDerivedStateFromProps",function(O,X){var K=O.dataKey,te=O.data,ne=O.children,H=O.width,ae=O.height,de=O.layout,ye=O.stackOffset,Ae=O.margin,_e=X.dataStartIndex,fe=X.dataEndIndex;if(X.updateId===void 0){var Ee=pB(O);return Lt(Lt(Lt({},Ee),{},{updateId:0},z(Lt(Lt({props:O},Ee),{},{updateId:0}),X)),{},{prevDataKey:K,prevData:te,prevWidth:H,prevHeight:ae,prevLayout:de,prevStackOffset:ye,prevMargin:Ae,prevChildren:ne})}if(K!==X.prevDataKey||te!==X.prevData||H!==X.prevWidth||ae!==X.prevHeight||de!==X.prevLayout||ye!==X.prevStackOffset||!oy(Ae,X.prevMargin)){var Be=pB(O),De={chartX:X.chartX,chartY:X.chartY,isTooltipActive:X.isTooltipActive},Je=Lt(Lt({},fB(X,te,de)),{},{updateId:X.updateId+1}),Ve=Lt(Lt(Lt({},Be),De),Je);return Lt(Lt(Lt({},Ve),z(Lt({props:O},Ve),X)),{},{prevDataKey:K,prevData:te,prevWidth:H,prevHeight:ae,prevLayout:de,prevStackOffset:ye,prevMargin:Ae,prevChildren:ne})}if(!kE(ne,X.prevChildren)){var et,Ce,We,Qe,Re=Nc(ne,jy),nt=Re&&(et=(Ce=Re.props)===null||Ce===void 0?void 0:Ce.startIndex)!==null&&et!==void 0?et:_e,pt=Re&&(We=(Qe=Re.props)===null||Qe===void 0?void 0:Qe.endIndex)!==null&&We!==void 0?We:fe,Ct=nt!==_e||pt!==fe,Mt=!lr(te),Nt=Mt&&!Ct?X.updateId:X.updateId+1;return Lt(Lt({updateId:Nt},z(Lt(Lt({props:O},X),{},{updateId:Nt,dataStartIndex:nt,dataEndIndex:pt}),X)),{},{prevChildren:ne,dataStartIndex:nt,dataEndIndex:pt})}return null}),Kn(q,"renderActiveDot",function(O,X,K){var te;return W.isValidElement(O)?te=W.cloneElement(O,X):Xn(O)?te=O(X):te=je.createElement(M0,X),je.createElement(Tr,{className:"recharts-active-dot",key:K},te)});var $=W.forwardRef(function(X,K){return je.createElement(q,ny({},X,{ref:K}))});return $.displayName=q.displayName,$},gB=vI({chartName:"LineChart",GraphicalChild:Ry,axisComponents:[{axisType:"xAxis",AxisComp:Fm},{axisType:"yAxis",AxisComp:Bm}],formatAxisMap:Zq}),Rwe=vI({chartName:"PieChart",GraphicalChild:Cf,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:Lw},{axisType:"radiusAxis",AxisComp:Ow}],formatAxisMap:uge,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}}),Lwe=vI({chartName:"AreaChart",GraphicalChild:$p,axisComponents:[{axisType:"xAxis",AxisComp:Fm},{axisType:"yAxis",AxisComp:Bm}],formatAxisMap:Zq});function zwe({waypoints:e,width:t=800,height:n=400}){const r=W.useRef(null);W.useEffect(()=>{s()},[e]);const s=()=>{const A=r.current;if(!A)return;const P=A.getContext("2d");if(!P||(P.clearRect(0,0,t,n),h(P),e.length===0))return;const N=d(e);o(P,N),N.forEach((z,q)=>{const $=e[q];w(P,z,$)})},h=A=>{const P=A.createLinearGradient(0,0,0,n);P.addColorStop(0,"#0a0f1a"),P.addColorStop(1,"#0f1419"),A.fillStyle=P,A.fillRect(0,0,t,n),A.strokeStyle="rgba(255, 255, 255, 0.05)",A.lineWidth=1;const N=40;for(let z=0;z<=t;z+=N)A.beginPath(),A.moveTo(z,0),A.lineTo(z,n),A.stroke();for(let z=0;z<=n;z+=N)A.beginPath(),A.moveTo(0,z),A.lineTo(t,z),A.stroke();A.fillStyle="rgba(15, 76, 117, 0.2)",A.fillRect(50,50,200,100),A.fillRect(400,180,180,120),A.fillStyle="rgba(33, 166, 141, 0.15)",A.fillRect(250,220,150,100),A.fillRect(600,80,120,140),A.fillStyle="rgba(15, 76, 117, 0.3)",A.beginPath(),A.arc(150,300,60,0,2*Math.PI),A.fill(),A.beginPath(),A.arc(650,280,50,0,2*Math.PI),A.fill()},d=A=>{if(A.length===0)return[];const P=A.map(ne=>ne.lat),N=A.map(ne=>ne.lng),z=Math.min(...P),q=Math.max(...P),$=Math.min(...N),O=Math.max(...N),X=80,K=t-X*2,te=n-X*2;return A.map(ne=>{const H=X+(ne.lng-$)/(O-$)*K,ae=X+(q-ne.lat)/(q-z)*te;return{x:H,y:ae}})},o=(A,P)=>{if(!(P.length<2)){A.beginPath(),A.moveTo(P[0].x,P[0].y);for(let N=1;N<P.length;N++)A.lineTo(P[N].x,P[N].y);A.strokeStyle="#21A68D",A.lineWidth=3,A.setLineDash([10,10]),A.stroke(),A.setLineDash([]),A.beginPath(),A.moveTo(P[0].x,P[0].y);for(let N=1;N<P.length;N++)A.lineTo(P[N].x,P[N].y);A.strokeStyle="rgba(33, 166, 141, 0.3)",A.lineWidth=6,A.stroke();for(let N=0;N<P.length-1;N++){const z=P[N],q=P[N+1];_(A,z.x,z.y,q.x,q.y)}}},_=(A,P,N,z,q)=>{const $=(P+z)/2,O=(N+q)/2,X=Math.atan2(q-N,z-P),K=6;A.save(),A.translate($,O),A.rotate(X),A.beginPath(),A.moveTo(0,0),A.lineTo(-8,-K),A.lineTo(-8,K),A.closePath(),A.fillStyle="#21A68D",A.fill(),A.restore()},w=(A,P,N)=>{const z=N.type==="start",q=N.type==="end",$=z?"#22c55e":q?"#ef4444":"#21A68D",O=z||q?10:8;(z||q)&&(A.beginPath(),A.arc(P.x,P.y,30,0,2*Math.PI),A.strokeStyle=$,A.lineWidth=1,A.globalAlpha=.3,A.stroke(),A.fillStyle=$,A.globalAlpha=.05,A.fill(),A.globalAlpha=1),A.beginPath(),A.arc(P.x,P.y,O,0,2*Math.PI),A.fillStyle=$,A.fill(),A.strokeStyle="#ffffff",A.lineWidth=2,A.stroke(),z&&(A.fillStyle="#ffffff",A.font="bold 10px sans-serif",A.textAlign="center",A.textBaseline="middle",A.fillText("",P.x,P.y)),A.fillStyle=$,A.font="bold 11px sans-serif",A.textAlign="center",A.textBaseline="bottom",A.fillText(N.label,P.x,P.y-O-8),A.fillStyle="#94a3b8",A.font="9px sans-serif",A.textAlign="center",A.textBaseline="top",A.fillText(N.time,P.x,P.y+O+4)};return f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"relative rounded-lg border border-border overflow-hidden",children:[f.jsx("canvas",{ref:r,width:t,height:n,className:"w-full h-auto bg-[#0a0f1a]"}),f.jsx("div",{className:"absolute bottom-4 left-4 bg-background/90 backdrop-blur-sm border border-border rounded px-3 py-2 text-xs z-10",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500 border-2 border-white"}),f.jsx("span",{className:"text-muted-foreground",children:"Start"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-[#21A68D] border-2 border-white"}),f.jsx("span",{className:"text-muted-foreground",children:"Waypoint"})]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500 border-2 border-white"}),f.jsx("span",{className:"text-muted-foreground",children:"End"})]})]})}),f.jsxs("div",{className:"absolute top-4 right-4 bg-background/90 backdrop-blur-sm border border-border rounded px-3 py-2 text-xs z-10",children:[f.jsx("div",{className:"text-muted-foreground",children:"Total Waypoints"}),f.jsx("div",{className:"text-lg mt-1",style:{color:"#21A68D"},children:e.length})]})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-2",children:e.map(A=>{const P=A.type==="start"?"#22c55e":A.type==="end"?"#ef4444":"#21A68D";return f.jsx(nn,{className:"p-2 bg-muted/30 border-border",children:f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-full flex items-center justify-center text-white text-xs font-bold flex-shrink-0",style:{backgroundColor:P},children:A.type==="start"?"":A.id}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("p",{className:"text-xs font-semibold truncate",children:A.label}),f.jsx("p",{className:"text-xs text-muted-foreground",children:A.time}),A.altitude!==void 0&&f.jsxs("p",{className:"text-xs",style:{color:"#21A68D"},children:["Alt: ",A.altitude,"m"]})]})]})},A.id)})})]})}function Fwe(e){const t=Bwe(e),n=W.forwardRef((r,s)=>{const{children:h,...d}=r,o=W.Children.toArray(h),_=o.find(Vwe);if(_){const w=_.props.children,A=o.map(P=>P===_?W.Children.count(w)>1?W.Children.only(null):W.isValidElement(w)?w.props.children:null:P);return f.jsx(t,{...d,ref:s,children:W.isValidElement(w)?W.cloneElement(w,void 0,A):null})}return f.jsx(t,{...d,ref:s,children:h})});return n.displayName=`${e}.Slot`,n}function Bwe(e){const t=W.forwardRef((n,r)=>{const{children:s,...h}=n;if(W.isValidElement(s)){const d=qwe(s),o=Uwe(h,s.props);return s.type!==W.Fragment&&(o.ref=r?Sf(r,d):d),W.cloneElement(s,o)}return W.Children.count(s)>1?W.Children.only(null):null});return t.displayName=`${e}.SlotClone`,t}var $we=Symbol("radix.slottable");function Vwe(e){return W.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===$we}function Uwe(e,t){const n={...t};for(const r in t){const s=e[r],h=t[r];/^on[A-Z]/.test(r)?s&&h?n[r]=(...o)=>{const _=h(...o);return s(...o),_}:s&&(n[r]=s):r==="style"?n[r]={...s,...h}:r==="className"&&(n[r]=[s,h].filter(Boolean).join(" "))}return{...e,...n}}function qwe(e){let t=Object.getOwnPropertyDescriptor(e.props,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning;return n?e.ref:(t=Object.getOwnPropertyDescriptor(e,"ref")?.get,n=t&&"isReactWarning"in t&&t.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Yj=["Enter"," "],Gwe=["ArrowDown","PageUp","Home"],N9=["ArrowUp","PageDown","End"],Wwe=[...Gwe,...N9],Hwe={ltr:[...Yj,"ArrowRight"],rtl:[...Yj,"ArrowLeft"]},Zwe={ltr:["ArrowLeft"],rtl:["ArrowRight"]},I0="Menu",[l0,Kwe,Xwe]=Y1(I0),[sg,D9]=Wl(I0,[Xwe,Ky,Wy]),Ww=Ky(),O9=Wy(),[Ywe,lg]=sg(I0),[Jwe,N0]=sg(I0),R9=e=>{const{__scopeMenu:t,open:n=!1,children:r,dir:s,onOpenChange:h,modal:d=!0}=e,o=Ww(t),[_,w]=W.useState(null),A=W.useRef(!1),P=vh(h),N=Gy(s);return W.useEffect(()=>{const z=()=>{A.current=!0,document.addEventListener("pointerdown",q,{capture:!0,once:!0}),document.addEventListener("pointermove",q,{capture:!0,once:!0})},q=()=>A.current=!1;return document.addEventListener("keydown",z,{capture:!0}),()=>{document.removeEventListener("keydown",z,{capture:!0}),document.removeEventListener("pointerdown",q,{capture:!0}),document.removeEventListener("pointermove",q,{capture:!0})}},[]),f.jsx(jM,{...o,children:f.jsx(Ywe,{scope:t,open:n,onOpenChange:P,content:_,onContentChange:w,children:f.jsx(Jwe,{scope:t,onClose:W.useCallback(()=>P(!1),[P]),isUsingKeyboardRef:A,dir:N,modal:d,children:r})})})};R9.displayName=I0;var Qwe="MenuAnchor",xI=W.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Ww(n);return f.jsx(MM,{...s,...r,ref:t})});xI.displayName=Qwe;var _I="MenuPortal",[e2e,L9]=sg(_I,{forceMount:void 0}),z9=e=>{const{__scopeMenu:t,forceMount:n,children:r,container:s}=e,h=lg(_I,t);return f.jsx(e2e,{scope:t,forceMount:n,children:f.jsx(Bc,{present:n||h.open,children:f.jsx(p0,{asChild:!0,container:s,children:r})})})};z9.displayName=_I;var Eu="MenuContent",[t2e,bI]=sg(Eu),F9=W.forwardRef((e,t)=>{const n=L9(Eu,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,h=lg(Eu,e.__scopeMenu),d=N0(Eu,e.__scopeMenu);return f.jsx(l0.Provider,{scope:e.__scopeMenu,children:f.jsx(Bc,{present:r||h.open,children:f.jsx(l0.Slot,{scope:e.__scopeMenu,children:d.modal?f.jsx(n2e,{...s,ref:t}):f.jsx(r2e,{...s,ref:t})})})})}),n2e=W.forwardRef((e,t)=>{const n=lg(Eu,e.__scopeMenu),r=W.useRef(null),s=gr(t,r);return W.useEffect(()=>{const h=r.current;if(h)return hM(h)},[]),f.jsx(wI,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:n.open,disableOutsideScroll:!0,onFocusOutside:dn(e.onFocusOutside,h=>h.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>n.onOpenChange(!1)})}),r2e=W.forwardRef((e,t)=>{const n=lg(Eu,e.__scopeMenu);return f.jsx(wI,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>n.onOpenChange(!1)})}),i2e=Fwe("MenuContent.ScrollLock"),wI=W.forwardRef((e,t)=>{const{__scopeMenu:n,loop:r=!1,trapFocus:s,onOpenAutoFocus:h,onCloseAutoFocus:d,disableOutsidePointerEvents:o,onEntryFocus:_,onEscapeKeyDown:w,onPointerDownOutside:A,onFocusOutside:P,onInteractOutside:N,onDismiss:z,disableOutsideScroll:q,...$}=e,O=lg(Eu,n),X=N0(Eu,n),K=Ww(n),te=O9(n),ne=Kwe(n),[H,ae]=W.useState(null),de=W.useRef(null),ye=gr(t,de,O.onContentChange),Ae=W.useRef(0),_e=W.useRef(""),fe=W.useRef(0),Ee=W.useRef(null),Be=W.useRef("right"),De=W.useRef(0),Je=q?Z1:W.Fragment,Ve=q?{as:i2e,allowPinchZoom:!0}:void 0,et=We=>{const Qe=_e.current+We,Re=ne().filter(Tt=>!Tt.disabled),nt=document.activeElement,pt=Re.find(Tt=>Tt.ref.current===nt)?.textValue,Ct=Re.map(Tt=>Tt.textValue),Mt=g2e(Ct,Qe,pt),Nt=Re.find(Tt=>Tt.textValue===Mt)?.ref.current;(function Tt(Ot){_e.current=Ot,window.clearTimeout(Ae.current),Ot!==""&&(Ae.current=window.setTimeout(()=>Tt(""),1e3))})(Qe),Nt&&setTimeout(()=>Nt.focus())};W.useEffect(()=>()=>window.clearTimeout(Ae.current),[]),dM();const Ce=W.useCallback(We=>Be.current===Ee.current?.side&&v2e(We,Ee.current?.area),[]);return f.jsx(t2e,{scope:n,searchRef:_e,onItemEnter:W.useCallback(We=>{Ce(We)&&We.preventDefault()},[Ce]),onItemLeave:W.useCallback(We=>{Ce(We)||(de.current?.focus(),ae(null))},[Ce]),onTriggerLeave:W.useCallback(We=>{Ce(We)&&We.preventDefault()},[Ce]),pointerGraceTimerRef:fe,onPointerGraceIntentChange:W.useCallback(We=>{Ee.current=We},[]),children:f.jsx(Je,{...Ve,children:f.jsx(W1,{asChild:!0,trapped:s,onMountAutoFocus:dn(h,We=>{We.preventDefault(),de.current?.focus({preventScroll:!0})}),onUnmountAutoFocus:d,children:f.jsx(f0,{asChild:!0,disableOutsidePointerEvents:o,onEscapeKeyDown:w,onPointerDownOutside:A,onFocusOutside:P,onInteractOutside:N,onDismiss:z,children:f.jsx(vM,{asChild:!0,...te,dir:X.dir,orientation:"vertical",loop:r,currentTabStopId:H,onCurrentTabStopIdChange:ae,onEntryFocus:dn(_,We=>{X.isUsingKeyboardRef.current||We.preventDefault()}),preventScrollOnEntryFocus:!0,children:f.jsx(kM,{role:"menu","aria-orientation":"vertical","data-state":tG(O.open),"data-radix-menu-content":"",dir:X.dir,...K,...$,ref:ye,style:{outline:"none",...$.style},onKeyDown:dn($.onKeyDown,We=>{const Re=We.target.closest("[data-radix-menu-content]")===We.currentTarget,nt=We.ctrlKey||We.altKey||We.metaKey,pt=We.key.length===1;Re&&(We.key==="Tab"&&We.preventDefault(),!nt&&pt&&et(We.key));const Ct=de.current;if(We.target!==Ct||!Wwe.includes(We.key))return;We.preventDefault();const Nt=ne().filter(Tt=>!Tt.disabled).map(Tt=>Tt.ref.current);N9.includes(We.key)&&Nt.reverse(),p2e(Nt)}),onBlur:dn(e.onBlur,We=>{We.currentTarget.contains(We.target)||(window.clearTimeout(Ae.current),_e.current="")}),onPointerMove:dn(e.onPointerMove,c0(We=>{const Qe=We.target,Re=De.current!==We.clientX;if(We.currentTarget.contains(Qe)&&Re){const nt=We.clientX>De.current?"right":"left";Be.current=nt,De.current=We.clientX}}))})})})})})})});F9.displayName=Eu;var a2e="MenuGroup",SI=W.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.jsx(qn.div,{role:"group",...r,ref:t})});SI.displayName=a2e;var o2e="MenuLabel",B9=W.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.jsx(qn.div,{...r,ref:t})});B9.displayName=o2e;var V1="MenuItem",yB="menu.itemSelect",Hw=W.forwardRef((e,t)=>{const{disabled:n=!1,onSelect:r,...s}=e,h=W.useRef(null),d=N0(V1,e.__scopeMenu),o=bI(V1,e.__scopeMenu),_=gr(t,h),w=W.useRef(!1),A=()=>{const P=h.current;if(!n&&P){const N=new CustomEvent(yB,{bubbles:!0,cancelable:!0});P.addEventListener(yB,z=>r?.(z),{once:!0}),JB(P,N),N.defaultPrevented?w.current=!1:d.onClose()}};return f.jsx($9,{...s,ref:_,disabled:n,onClick:dn(e.onClick,A),onPointerDown:P=>{e.onPointerDown?.(P),w.current=!0},onPointerUp:dn(e.onPointerUp,P=>{w.current||P.currentTarget?.click()}),onKeyDown:dn(e.onKeyDown,P=>{const N=o.searchRef.current!=="";n||N&&P.key===" "||Yj.includes(P.key)&&(P.currentTarget.click(),P.preventDefault())})})});Hw.displayName=V1;var $9=W.forwardRef((e,t)=>{const{__scopeMenu:n,disabled:r=!1,textValue:s,...h}=e,d=bI(V1,n),o=O9(n),_=W.useRef(null),w=gr(t,_),[A,P]=W.useState(!1),[N,z]=W.useState("");return W.useEffect(()=>{const q=_.current;q&&z((q.textContent??"").trim())},[h.children]),f.jsx(l0.ItemSlot,{scope:n,disabled:r,textValue:s??N,children:f.jsx(xM,{asChild:!0,...o,focusable:!r,children:f.jsx(qn.div,{role:"menuitem","data-highlighted":A?"":void 0,"aria-disabled":r||void 0,"data-disabled":r?"":void 0,...h,ref:w,onPointerMove:dn(e.onPointerMove,c0(q=>{r?d.onItemLeave(q):(d.onItemEnter(q),q.defaultPrevented||q.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:dn(e.onPointerLeave,c0(q=>d.onItemLeave(q))),onFocus:dn(e.onFocus,()=>P(!0)),onBlur:dn(e.onBlur,()=>P(!1))})})})}),s2e="MenuCheckboxItem",V9=W.forwardRef((e,t)=>{const{checked:n=!1,onCheckedChange:r,...s}=e;return f.jsx(H9,{scope:e.__scopeMenu,checked:n,children:f.jsx(Hw,{role:"menuitemcheckbox","aria-checked":U1(n)?"mixed":n,...s,ref:t,"data-state":PI(n),onSelect:dn(s.onSelect,()=>r?.(U1(n)?!0:!n),{checkForDefaultPrevented:!1})})})});V9.displayName=s2e;var U9="MenuRadioGroup",[l2e,c2e]=sg(U9,{value:void 0,onValueChange:()=>{}}),q9=W.forwardRef((e,t)=>{const{value:n,onValueChange:r,...s}=e,h=vh(r);return f.jsx(l2e,{scope:e.__scopeMenu,value:n,onValueChange:h,children:f.jsx(SI,{...s,ref:t})})});q9.displayName=U9;var G9="MenuRadioItem",W9=W.forwardRef((e,t)=>{const{value:n,...r}=e,s=c2e(G9,e.__scopeMenu),h=n===s.value;return f.jsx(H9,{scope:e.__scopeMenu,checked:h,children:f.jsx(Hw,{role:"menuitemradio","aria-checked":h,...r,ref:t,"data-state":PI(h),onSelect:dn(r.onSelect,()=>s.onValueChange?.(n),{checkForDefaultPrevented:!1})})})});W9.displayName=G9;var TI="MenuItemIndicator",[H9,u2e]=sg(TI,{checked:!1}),Z9=W.forwardRef((e,t)=>{const{__scopeMenu:n,forceMount:r,...s}=e,h=u2e(TI,n);return f.jsx(Bc,{present:r||U1(h.checked)||h.checked===!0,children:f.jsx(qn.span,{...s,ref:t,"data-state":PI(h.checked)})})});Z9.displayName=TI;var d2e="MenuSeparator",K9=W.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e;return f.jsx(qn.div,{role:"separator","aria-orientation":"horizontal",...r,ref:t})});K9.displayName=d2e;var h2e="MenuArrow",X9=W.forwardRef((e,t)=>{const{__scopeMenu:n,...r}=e,s=Ww(n);return f.jsx(IM,{...s,...r,ref:t})});X9.displayName=h2e;var f2e="MenuSub",[zTe,Y9]=sg(f2e),sx="MenuSubTrigger",J9=W.forwardRef((e,t)=>{const n=lg(sx,e.__scopeMenu),r=N0(sx,e.__scopeMenu),s=Y9(sx,e.__scopeMenu),h=bI(sx,e.__scopeMenu),d=W.useRef(null),{pointerGraceTimerRef:o,onPointerGraceIntentChange:_}=h,w={__scopeMenu:e.__scopeMenu},A=W.useCallback(()=>{d.current&&window.clearTimeout(d.current),d.current=null},[]);return W.useEffect(()=>A,[A]),W.useEffect(()=>{const P=o.current;return()=>{window.clearTimeout(P),_(null)}},[o,_]),f.jsx(xI,{asChild:!0,...w,children:f.jsx($9,{id:s.triggerId,"aria-haspopup":"menu","aria-expanded":n.open,"aria-controls":s.contentId,"data-state":tG(n.open),...e,ref:Sf(t,s.onTriggerChange),onClick:P=>{e.onClick?.(P),!(e.disabled||P.defaultPrevented)&&(P.currentTarget.focus(),n.open||n.onOpenChange(!0))},onPointerMove:dn(e.onPointerMove,c0(P=>{h.onItemEnter(P),!P.defaultPrevented&&!e.disabled&&!n.open&&!d.current&&(h.onPointerGraceIntentChange(null),d.current=window.setTimeout(()=>{n.onOpenChange(!0),A()},100))})),onPointerLeave:dn(e.onPointerLeave,c0(P=>{A();const N=n.content?.getBoundingClientRect();if(N){const z=n.content?.dataset.side,q=z==="right",$=q?-5:5,O=N[q?"left":"right"],X=N[q?"right":"left"];h.onPointerGraceIntentChange({area:[{x:P.clientX+$,y:P.clientY},{x:O,y:N.top},{x:X,y:N.top},{x:X,y:N.bottom},{x:O,y:N.bottom}],side:z}),window.clearTimeout(o.current),o.current=window.setTimeout(()=>h.onPointerGraceIntentChange(null),300)}else{if(h.onTriggerLeave(P),P.defaultPrevented)return;h.onPointerGraceIntentChange(null)}})),onKeyDown:dn(e.onKeyDown,P=>{const N=h.searchRef.current!=="";e.disabled||N&&P.key===" "||Hwe[r.dir].includes(P.key)&&(n.onOpenChange(!0),n.content?.focus(),P.preventDefault())})})})});J9.displayName=sx;var Q9="MenuSubContent",eG=W.forwardRef((e,t)=>{const n=L9(Eu,e.__scopeMenu),{forceMount:r=n.forceMount,...s}=e,h=lg(Eu,e.__scopeMenu),d=N0(Eu,e.__scopeMenu),o=Y9(Q9,e.__scopeMenu),_=W.useRef(null),w=gr(t,_);return f.jsx(l0.Provider,{scope:e.__scopeMenu,children:f.jsx(Bc,{present:r||h.open,children:f.jsx(l0.Slot,{scope:e.__scopeMenu,children:f.jsx(wI,{id:o.contentId,"aria-labelledby":o.triggerId,...s,ref:w,align:"start",side:d.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:A=>{d.isUsingKeyboardRef.current&&_.current?.focus(),A.preventDefault()},onCloseAutoFocus:A=>A.preventDefault(),onFocusOutside:dn(e.onFocusOutside,A=>{A.target!==o.trigger&&h.onOpenChange(!1)}),onEscapeKeyDown:dn(e.onEscapeKeyDown,A=>{d.onClose(),A.preventDefault()}),onKeyDown:dn(e.onKeyDown,A=>{const P=A.currentTarget.contains(A.target),N=Zwe[d.dir].includes(A.key);P&&N&&(h.onOpenChange(!1),o.trigger?.focus(),A.preventDefault())})})})})})});eG.displayName=Q9;function tG(e){return e?"open":"closed"}function U1(e){return e==="indeterminate"}function PI(e){return U1(e)?"indeterminate":e?"checked":"unchecked"}function p2e(e){const t=document.activeElement;for(const n of e)if(n===t||(n.focus(),document.activeElement!==t))return}function m2e(e,t){return e.map((n,r)=>e[(t+r)%e.length])}function g2e(e,t,n){const s=t.length>1&&Array.from(t).every(w=>w===t[0])?t[0]:t,h=n?e.indexOf(n):-1;let d=m2e(e,Math.max(h,0));s.length===1&&(d=d.filter(w=>w!==n));const _=d.find(w=>w.toLowerCase().startsWith(s.toLowerCase()));return _!==n?_:void 0}function y2e(e,t){const{x:n,y:r}=e;let s=!1;for(let h=0,d=t.length-1;h<t.length;d=h++){const o=t[h],_=t[d],w=o.x,A=o.y,P=_.x,N=_.y;A>r!=N>r&&n<(P-w)*(r-A)/(N-A)+w&&(s=!s)}return s}function v2e(e,t){if(!t)return!1;const n={x:e.clientX,y:e.clientY};return y2e(n,t)}function c0(e){return t=>t.pointerType==="mouse"?e(t):void 0}var x2e=R9,_2e=xI,b2e=z9,w2e=F9,S2e=SI,T2e=B9,P2e=Hw,A2e=V9,C2e=q9,E2e=W9,j2e=Z9,M2e=K9,k2e=X9,I2e=J9,N2e=eG,Zw="DropdownMenu",[D2e]=Wl(Zw,[D9]),cl=D9(),[O2e,nG]=D2e(Zw),rG=e=>{const{__scopeDropdownMenu:t,children:n,dir:r,open:s,defaultOpen:h,onOpenChange:d,modal:o=!0}=e,_=cl(t),w=W.useRef(null),[A,P]=bd({prop:s,defaultProp:h??!1,onChange:d,caller:Zw});return f.jsx(O2e,{scope:t,triggerId:vd(),triggerRef:w,contentId:vd(),open:A,onOpenChange:P,onOpenToggle:W.useCallback(()=>P(N=>!N),[P]),modal:o,children:f.jsx(x2e,{..._,open:A,onOpenChange:P,dir:r,modal:o,children:n})})};rG.displayName=Zw;var iG="DropdownMenuTrigger",aG=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,disabled:r=!1,...s}=e,h=nG(iG,n),d=cl(n);return f.jsx(_2e,{asChild:!0,...d,children:f.jsx(qn.button,{type:"button",id:h.triggerId,"aria-haspopup":"menu","aria-expanded":h.open,"aria-controls":h.open?h.contentId:void 0,"data-state":h.open?"open":"closed","data-disabled":r?"":void 0,disabled:r,...s,ref:Sf(t,h.triggerRef),onPointerDown:dn(e.onPointerDown,o=>{!r&&o.button===0&&o.ctrlKey===!1&&(h.onOpenToggle(),h.open||o.preventDefault())}),onKeyDown:dn(e.onKeyDown,o=>{r||(["Enter"," "].includes(o.key)&&h.onOpenToggle(),o.key==="ArrowDown"&&h.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(o.key)&&o.preventDefault())})})})});aG.displayName=iG;var R2e="DropdownMenuPortal",oG=e=>{const{__scopeDropdownMenu:t,...n}=e,r=cl(t);return f.jsx(b2e,{...r,...n})};oG.displayName=R2e;var sG="DropdownMenuContent",lG=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=nG(sG,n),h=cl(n),d=W.useRef(!1);return f.jsx(w2e,{id:s.contentId,"aria-labelledby":s.triggerId,...h,...r,ref:t,onCloseAutoFocus:dn(e.onCloseAutoFocus,o=>{d.current||s.triggerRef.current?.focus(),d.current=!1,o.preventDefault()}),onInteractOutside:dn(e.onInteractOutside,o=>{const _=o.detail.originalEvent,w=_.button===0&&_.ctrlKey===!0,A=_.button===2||w;(!s.modal||A)&&(d.current=!0)}),style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});lG.displayName=sG;var L2e="DropdownMenuGroup",z2e=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(S2e,{...s,...r,ref:t})});z2e.displayName=L2e;var F2e="DropdownMenuLabel",cG=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(T2e,{...s,...r,ref:t})});cG.displayName=F2e;var B2e="DropdownMenuItem",$2e=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(P2e,{...s,...r,ref:t})});$2e.displayName=B2e;var V2e="DropdownMenuCheckboxItem",uG=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(A2e,{...s,...r,ref:t})});uG.displayName=V2e;var U2e="DropdownMenuRadioGroup",q2e=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(C2e,{...s,...r,ref:t})});q2e.displayName=U2e;var G2e="DropdownMenuRadioItem",W2e=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(E2e,{...s,...r,ref:t})});W2e.displayName=G2e;var H2e="DropdownMenuItemIndicator",dG=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(j2e,{...s,...r,ref:t})});dG.displayName=H2e;var Z2e="DropdownMenuSeparator",hG=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(M2e,{...s,...r,ref:t})});hG.displayName=Z2e;var K2e="DropdownMenuArrow",X2e=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(k2e,{...s,...r,ref:t})});X2e.displayName=K2e;var Y2e="DropdownMenuSubTrigger",J2e=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(I2e,{...s,...r,ref:t})});J2e.displayName=Y2e;var Q2e="DropdownMenuSubContent",eSe=W.forwardRef((e,t)=>{const{__scopeDropdownMenu:n,...r}=e,s=cl(n);return f.jsx(N2e,{...s,...r,ref:t,style:{...e.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});eSe.displayName=Q2e;var tSe=rG,nSe=aG,rSe=oG,iSe=lG,aSe=cG,oSe=uG,sSe=dG,lSe=hG;function cSe({...e}){return f.jsx(tSe,{"data-slot":"dropdown-menu",...e})}function uSe({...e}){return f.jsx(nSe,{"data-slot":"dropdown-menu-trigger",...e})}function dSe({className:e,sideOffset:t=4,...n}){return f.jsx(rSe,{children:f.jsx(iSe,{"data-slot":"dropdown-menu-content",sideOffset:t,className:or("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-[10000] max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] origin-(--radix-dropdown-menu-content-transform-origin) overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",e),...n})})}function MC({className:e,children:t,checked:n,...r}){return f.jsxs(oSe,{"data-slot":"dropdown-menu-checkbox-item",className:or("focus:bg-accent focus:text-accent-foreground relative flex cursor-default items-center gap-2 rounded-sm py-1.5 pr-2 pl-8 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",e),checked:n,...r,children:[f.jsx("span",{className:"pointer-events-none absolute left-2 flex size-3.5 items-center justify-center",children:f.jsx(sSe,{children:f.jsx(d0,{className:"size-4"})})}),t]})}function hSe({className:e,inset:t,...n}){return f.jsx(aSe,{"data-slot":"dropdown-menu-label","data-inset":t,className:or("px-2 py-1.5 text-sm font-medium data-[inset]:pl-8",e),...n})}function fSe({className:e,...t}){return f.jsx(lSe,{"data-slot":"dropdown-menu-separator",className:or("bg-border -mx-1 my-1 h-px",e),...t})}const pSe=[{time:"0:00",speed:0},{time:"0:10",speed:8.5},{time:"0:20",speed:12.3},{time:"0:30",speed:11.8},{time:"0:40",speed:13.1},{time:"0:50",speed:9.7}],mSe=[{time:"0:00",altitude:0},{time:"0:10",altitude:45},{time:"0:20",altitude:98},{time:"0:30",altitude:128},{time:"0:40",altitude:115},{time:"0:50",altitude:67}],kC=[{name:"Structure Inspection",value:35,color:"#0F4C75"},{name:"Crop Health",value:25,color:"#22c55e"},{name:"Surveillance",value:20,color:"#8b5cf6"},{name:"Inventory",value:15,color:"#f59e0b"},{name:"Search & Rescue",value:5,color:"#ef4444"}],gSe=e=>[{id:1,lat:-6.1068,lng:106.883,time:"0:00",label:"Start",type:"start",altitude:0},{id:2,lat:-6.105,lng:106.886,time:"0:08",label:"WP1",type:"waypoint",altitude:45},{id:3,lat:-6.103,lng:106.89,time:"0:15",label:"WP2",type:"waypoint",altitude:98},{id:4,lat:-6.101,lng:106.892,time:"0:23",label:"WP3",type:"waypoint",altitude:128},{id:5,lat:-6.099,lng:106.895,time:"0:32",label:"WP4",type:"waypoint",altitude:115},{id:6,lat:-6.097,lng:106.898,time:"0:40",label:"WP5",type:"waypoint",altitude:87},{id:7,lat:-6.095,lng:106.9,time:"0:47",label:"End",type:"end",altitude:0}];function ySe(){const[e,t]=W.useState(null),[n,r]=W.useState(!1),[s,h]=W.useState(!1),[d,o]=W.useState(!1),[_,w]=W.useState(""),[A,P]=W.useState(null),[N,z]=W.useState(!0),[q,$]=W.useState(!0),[O,X]=W.useState(!1),[K,te]=W.useState(0),[ne,H]=W.useState(null),[ae,de]=W.useState(null),[ye,Ae]=W.useState(!1),[_e,fe]=W.useState(0),[Ee,Be]=W.useState([{id:1,name:"Frame Extraction",status:"pending"},{id:2,name:"Vessel Detection",status:"pending"},{id:3,name:"Trajectory Mapping",status:"pending"},{id:4,name:"Report Generation",status:"pending"}]),[De,Je]=W.useState(null),[Ve,et]=W.useState("All"),[Ce,We]=W.useState([{id:"VID-001",name:"port_surveillance_morning.mp4",type:"UAV",duration:"23:45",date:"2025-01-20",time:"14:23",size:"2.4 GB",status:"processed",missionId:"MSN-2025-001",missionName:"Port Surveillance - Morning Patrol",hasLog:!0},{id:"VID-002",name:"underwater_inspection.mp4",type:"AUV",duration:"18:30",date:"2025-01-19",time:"10:15",size:"1.8 GB",status:"processed",missionId:"MSN-2025-002",missionName:"Underwater Hull Inspection",hasLog:!1}]),Qe=rt=>{rt.target.files&&rt.target.files[0]&&H(rt.target.files[0])},Re=rt=>{rt.target.files&&rt.target.files[0]&&de(rt.target.files[0])},nt=rt=>{switch(rt){case"success":return"#22c55e";case"partial":return"#D4E268";case"failed":return"#ef4444";default:return"#6b7280"}},pt=rt=>{switch(rt){case"success":return Ul;case"partial":return sf;case"failed":return CB;default:return sf}},Ct=()=>{if(!e||!ne){alert("Please upload a video file to begin analysis.");return}Ae(!0),fe(0),Be(Ut=>Ut.map(dt=>({...dt,status:"pending"})));let rt=0;const zt=setInterval(()=>{rt+=2,fe(rt),rt===10&&Be(Ut=>Ut.map(dt=>dt.id===1?{...dt,status:"processing"}:dt)),rt===30&&Be(Ut=>Ut.map(dt=>dt.id===1?{...dt,status:"completed"}:dt.id===2?{...dt,status:"processing"}:dt)),rt===60&&Be(Ut=>Ut.map(dt=>dt.id===2?{...dt,status:"completed"}:dt.id===3?{...dt,status:"processing"}:dt)),rt===85&&Be(Ut=>Ut.map(dt=>dt.id===3?{...dt,status:"completed"}:dt.id===4?{...dt,status:"processing"}:dt)),rt>=100&&(clearInterval(zt),Be(Ut=>Ut.map(dt=>({...dt,status:"completed"}))),Ae(!1),P(e),alert(`Analysis for ${e.name} Complete! Mission report available.`),setTimeout(()=>{h(!1),H(null),de(null)},1500))},150)},Mt=()=>{A&&alert(`Generating PDF Report for ${A.name}...`)},Nt=()=>{r(!1),setTimeout(()=>{h(!0)},100)},Tt=rt=>{r(!1),setTimeout(()=>{t(rt),o(!0)},100)},Ot=rt=>{t(rt),r(!0)};return f.jsxs("div",{className:"p-4 md:p-8 space-y-6 bg-[#0a0e1a] min-h-full pb-20",children:[f.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-6 mb-2",children:[f.jsxs("div",{children:[f.jsxs("h1",{className:"text-3xl font-extrabold tracking-tight text-white mb-2",children:["Mission Intelligence & ",f.jsx("span",{className:"text-[#21A68D]",children:"History"})]}),f.jsx("p",{className:"text-muted-foreground/80 font-medium",children:"Operational archive and spatial intelligence analytics"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(Nn,{variant:"outline",className:"bg-[#21A68D]/10 text-[#21A68D] border-[#21A68D]/30 py-1.5 px-3",children:[f.jsx(_u,{className:"w-4 h-4 mr-2"}),"LIVE FLEET SYNC: ACTIVE"]}),f.jsxs(en,{variant:"outline",className:"border-border/30 bg-white/5 hover:bg-white/10 text-white",children:[f.jsx(vp,{className:"w-4 h-4 mr-2"}),"Export Archive"]})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[f.jsxs(nn,{className:"group relative overflow-hidden bg-[#0f172a]/60 backdrop-blur-xl border border-white/10 p-0 hover:border-[#21A68D]/50 transition-all duration-500 shadow-2xl",children:[f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("div",{className:"p-3 bg-gradient-to-br from-[#21A68D]/20 to-[#21A68D]/5 rounded-2xl border border-[#21A68D]/20 group-hover:scale-110 transition-transform duration-500",children:f.jsx(q1,{className:"w-6 h-6 text-[#21A68D]"})}),f.jsx(Nn,{className:"bg-[#21A68D]/10 text-[#21A68D] border-[#21A68D]/20 text-[10px] px-2 py-0.5 uppercase tracking-widest font-bold",children:"Multi-Domain"})]}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsx("p",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:"Fleet Operations"}),f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter",children:xu.totalMissions}),f.jsx("span",{className:"text-[10px] text-[#21A68D] font-bold bg-[#21A68D]/10 px-1.5 py-0.5 rounded",children:"+12.4%"})]})]}),f.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3",children:[f.jsxs("div",{className:"p-3 bg-white/[0.03] rounded-xl border border-white/[0.05] group-hover:bg-white/[0.05] transition-colors",children:[f.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"UAV"}),f.jsx("p",{className:"text-xl font-bold text-white tracking-tight",children:xu.uavMissions})]}),f.jsxs("div",{className:"p-3 bg-white/[0.03] rounded-xl border border-white/[0.05] group-hover:bg-white/[0.05] transition-colors",children:[f.jsx("p",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-wider mb-1",children:"AUV"}),f.jsx("p",{className:"text-xl font-bold text-white tracking-tight",children:xu.auvMissions})]})]})]}),f.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-[#21A68D] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),f.jsxs(nn,{className:"group relative overflow-hidden bg-[#0f172a]/60 backdrop-blur-xl border border-white/10 p-0 hover:border-blue-500/50 transition-all duration-500 shadow-2xl",children:[f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("div",{className:"p-3 bg-gradient-to-br from-blue-500/20 to-blue-500/5 rounded-2xl border border-blue-500/20 group-hover:scale-110 transition-transform duration-500",children:f.jsx(Ul,{className:"w-6 h-6 text-blue-400"})}),f.jsx(Nn,{className:"bg-blue-500/10 text-blue-400 border-blue-500/20 text-[10px] px-2 py-0.5 uppercase tracking-widest font-bold",children:"Efficiency"})]}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsx("p",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:"Operational success"}),f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsxs("h3",{className:"text-3xl font-black text-white tracking-tighter",children:[xu.successRate,"%"]}),f.jsx("span",{className:"text-[10px] text-blue-400 font-bold bg-blue-500/10 px-1.5 py-0.5 rounded",children:"High"})]})]}),f.jsxs("div",{className:"mt-5",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("p",{className:"text-[11px] text-muted-foreground uppercase font-bold tracking-wider",children:"Historical Trend"}),f.jsx("span",{className:"text-[10px] text-blue-400 font-bold uppercase",children:"Stable Performance"})]}),f.jsxs("p",{className:"text-xs text-muted-foreground italic leading-relaxed",children:["Analysis of ",rl.filter(rt=>rt.status==="completed").length," finalized operations shows strong mission coherence and outcome stability."]})]})]}),f.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-blue-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),f.jsxs(nn,{className:"group relative overflow-hidden bg-[#0f172a]/60 backdrop-blur-xl border border-white/10 p-0 hover:border-[#D4E268]/50 transition-all duration-500 shadow-2xl",children:[f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("div",{className:"p-3 bg-gradient-to-br from-[#D4E268]/20 to-[#D4E268]/5 rounded-2xl border border-[#D4E268]/20 group-hover:scale-110 transition-transform duration-500",children:f.jsx(lx,{className:"w-6 h-6 text-[#D4E268]"})}),f.jsx(Nn,{className:"bg-[#D4E268]/10 text-[#D4E268] border-[#D4E268]/20 text-[10px] px-2 py-0.5 uppercase tracking-widest font-bold",children:"Intelligence"})]}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsx("p",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:"AI detections"}),f.jsxs("div",{className:"flex items-baseline gap-2",children:[f.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter",children:xu.totalDetections}),f.jsx("span",{className:"text-[10px] text-[#D4E268] font-bold bg-[#D4E268]/10 px-1.5 py-0.5 rounded",children:" 8.2%"})]})]}),f.jsxs("div",{className:"mt-5 space-y-3",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[f.jsx("span",{className:"text-[11px] text-muted-foreground uppercase font-bold tracking-wider",children:"Avg Prediction Confidence"}),f.jsx("span",{className:"text-[11px] text-[#D4E268] font-black uppercase",children:"94.2%"})]}),f.jsx("div",{className:"w-full h-1.5 bg-white/5 rounded-full overflow-hidden border border-white/5",children:f.jsx("div",{className:"h-full bg-gradient-to-r from-[#D4E268]/40 to-[#D4E268] transition-all duration-1000",style:{width:"94.2%"}})})]}),f.jsx("p",{className:"text-[10px] text-muted-foreground/60 uppercase tracking-tighter font-bold",children:"Across all active mission profiles"})]})]}),f.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-[#D4E268] to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]}),f.jsxs(nn,{className:"group relative overflow-hidden bg-[#0f172a]/60 backdrop-blur-xl border border-white/10 p-0 hover:border-purple-500/50 transition-all duration-500 shadow-2xl",children:[f.jsxs("div",{className:"p-5",children:[f.jsxs("div",{className:"flex justify-between items-start mb-4",children:[f.jsx("div",{className:"p-3 bg-gradient-to-br from-purple-500/20 to-purple-500/5 rounded-2xl border border-purple-500/20 group-hover:scale-110 transition-transform duration-500",children:f.jsx(xb,{className:"w-6 h-6 text-purple-400"})}),f.jsx(Nn,{className:"bg-purple-500/10 text-purple-400 border-purple-500/20 text-[10px] px-2 py-0.5 uppercase tracking-widest font-bold",children:"Spatial"})]}),f.jsxs("div",{className:"space-y-0.5",children:[f.jsx("p",{className:"text-[10px] font-bold text-muted-foreground/60 uppercase tracking-[0.2em]",children:"Territorial coverage"}),f.jsxs("div",{className:"flex items-baseline gap-1",children:[f.jsx("h3",{className:"text-3xl font-black text-white tracking-tighter",children:xu.totalArea.toFixed(1)}),f.jsx("span",{className:"text-[10px] text-muted-foreground font-black uppercase tracking-tighter ml-1",children:"KM"})]})]}),f.jsxs("div",{className:"mt-5 flex items-center gap-3 bg-white/5 p-2.5 rounded-xl border border-white/5",children:[f.jsx("div",{className:"w-10 h-10 rounded-lg bg-purple-500/20 flex items-center justify-center flex-shrink-0",children:f.jsx(zC,{className:"w-5 h-5 text-purple-400"})}),f.jsxs("p",{className:"text-[11px] text-muted-foreground leading-[1.3] font-medium italic",children:["Equivalent to tracking across ",Math.floor(xu.totalArea/.5)," identified high-priority maritime zones"]})]})]}),f.jsx("div",{className:"absolute bottom-0 left-0 w-full h-[2px] bg-gradient-to-r from-transparent via-purple-500 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-500"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6 my-2",children:[f.jsxs(nn,{className:"relative overflow-hidden bg-[#0f172a]/60 backdrop-blur-xl border border-white/10 p-0 shadow-2xl",children:[f.jsxs("div",{className:"p-5 border-b border-white/5 bg-white/[0.02] flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 bg-blue-500/10 rounded-lg",children:f.jsx(Au,{className:"w-5 h-5 text-blue-400"})}),f.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Operation Type Profiling"})]}),f.jsx(Nn,{variant:"outline",className:"border-white/10 text-muted-foreground/70 text-[9px] uppercase font-bold tracking-tighter",children:"Contextual Data"})]}),f.jsx("div",{className:"p-5",children:f.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-between gap-6 mt-1",children:[f.jsx("div",{className:"w-full h-[230px]",children:f.jsx(q_,{width:"100%",height:"100%",children:f.jsxs(Rwe,{children:[f.jsx(Cf,{data:kC,cx:"50%",cy:"50%",innerRadius:65,outerRadius:90,paddingAngle:5,dataKey:"value",stroke:"rgba(255,255,255,0.05)",strokeWidth:2,children:kC.map((rt,zt)=>f.jsx(Sw,{fill:rt.color,fillOpacity:.9},`cell-${zt}`))}),f.jsx(Dc,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px",fontSize:"11px"},itemStyle:{color:"#fff",fontWeight:"bold"}}),f.jsx("text",{x:"50%",y:"48%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-white text-[10px] font-bold opacity-40 uppercase tracking-widest",children:"Operational"}),f.jsx("text",{x:"50%",y:"55%",textAnchor:"middle",dominantBaseline:"middle",className:"fill-[#21A68D] text-lg font-black",children:"74%"})]})})}),f.jsx("div",{className:"w-full md:w-auto flex flex-col gap-2 min-w-[190px]",children:kC.map((rt,zt)=>f.jsxs("div",{className:"flex items-center justify-between gap-3 p-1.5 px-2.5 rounded-xl bg-white/5 border border-white/5 hover:bg-white/10 transition-colors",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-2 h-2 rounded-full",style:{backgroundColor:rt.color}}),f.jsx("span",{className:"text-[10px] font-bold text-white/80 uppercase tracking-tighter",children:rt.name})]}),f.jsxs("span",{className:"text-[10px] font-black text-white",children:[rt.value,"%"]})]},zt))})]})})]}),f.jsxs(nn,{className:"relative overflow-hidden bg-[#0f172a]/60 backdrop-blur-xl border border-white/10 p-0 shadow-2xl",children:[f.jsxs("div",{className:"p-5 border-b border-white/5 bg-white/[0.02] flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"p-2 bg-[#21A68D]/10 rounded-lg",children:f.jsx(sf,{className:"w-5 h-5 text-[#21A68D]"})}),f.jsx("h3",{className:"text-sm font-black text-white uppercase tracking-widest",children:"Flight Persistence Metrics"})]}),f.jsx(Nn,{variant:"outline",className:"border-white/10 text-[#21A68D] text-[9px] uppercase font-bold tracking-tighter",children:"Historical Cycle"})]}),f.jsxs("div",{className:"p-5",children:[f.jsx("div",{className:"h-[230px] w-full mt-1",children:f.jsx(q_,{width:"100%",height:"100%",children:f.jsxs(Lwe,{data:rl.slice(-6),margin:{top:10,right:10,left:0,bottom:0},children:[f.jsxs("defs",{children:[f.jsxs("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[f.jsx("stop",{offset:"5%",stopColor:"#21A68D",stopOpacity:.4}),f.jsx("stop",{offset:"95%",stopColor:"#21A68D",stopOpacity:0})]}),f.jsxs("linearGradient",{id:"lineColor",x1:"0",y1:"0",x2:"1",y2:"0",children:[f.jsx("stop",{offset:"0%",stopColor:"#21A68D"}),f.jsx("stop",{offset:"100%",stopColor:"#6EE7B7"})]})]}),f.jsx(mb,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.03)",vertical:!1}),f.jsx(Fm,{dataKey:"id",tick:{fill:"#64748b",fontSize:9,fontWeight:"bold"},axisLine:!1,tickLine:!1,tickFormatter:rt=>`${rt.split("-").pop()}`}),f.jsx(Bm,{hide:!0}),f.jsx(Dc,{contentStyle:{backgroundColor:"#0f172a",border:"1px solid rgba(255,255,255,0.1)",borderRadius:"12px"},labelStyle:{color:"#21A68D",fontWeight:"bold",fontSize:"10px"},itemStyle:{color:"#fff",fontSize:"11px"}}),f.jsx($p,{type:"monotone",dataKey:"totalDuration",stroke:"url(#lineColor)",strokeWidth:3,fillOpacity:1,fill:"url(#areaGradient)",animationDuration:2e3})]})})}),f.jsx("div",{className:"mt-4 flex items-center justify-center gap-6",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 rounded bg-[#21A68D]"}),f.jsx("span",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest",children:"Active Operations (Minutes)"})]})})]})]})]}),f.jsxs("div",{className:"mt-6 pb-10",children:[f.jsxs(nn,{className:"bg-[#0f172a]/60 backdrop-blur-lg border border-border/40 overflow-hidden shadow-2xl",children:[f.jsxs("div",{className:"p-5 border-b border-border/30 bg-white/5 flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsxs("h2",{className:"text-lg font-bold text-white uppercase tracking-wider flex items-center gap-2",children:[f.jsx(zC,{className:"w-5 h-5 text-[#21A68D]"}),"Recent Operations Archive"]}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1 tracking-tight",children:"Accessing full telemetry and AI report logs"})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(en,{variant:"ghost",size:"sm",className:"text-xs text-muted-foreground hover:text-white",children:"Sort by Date"}),f.jsx(en,{variant:"ghost",size:"sm",className:"text-xs text-muted-foreground hover:text-white",children:"Filter AI Impact"})]})]}),f.jsx("div",{className:"overflow-x-auto",children:f.jsxs("table",{className:"w-full text-left",children:[f.jsx("thead",{className:"bg-[#0a0e1a]/80 text-[10px] font-bold text-muted-foreground uppercase tracking-widest border-b border-border/20",children:f.jsxs("tr",{children:[f.jsx("th",{className:"px-5 py-3",children:"Status & Mission ID"}),f.jsx("th",{className:"px-5 py-3",children:"Operation Detail"}),f.jsx("th",{className:"px-5 py-3",children:"Assets"}),f.jsx("th",{className:"px-5 py-3 text-center",children:"AI Impact"}),f.jsx("th",{className:"px-5 py-3 text-right",children:"Actions"})]})}),f.jsx("tbody",{className:"divide-y divide-border/20",children:rl.map(rt=>{const zt=pt(rt.status),Ut=nt(rt.status);return f.jsxs("tr",{className:"hover:bg-[#21A68D]/5 group transition-all duration-200",children:[f.jsx("td",{className:"px-5 py-3.5",children:f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded-full flex items-center justify-center border-2",style:{borderColor:`${Ut}30`,backgroundColor:`${Ut}10`},children:f.jsx(zt,{className:"w-5 h-5",style:{color:Ut}})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground font-bold tracking-tighter mb-0.5",children:rt.id}),f.jsx("p",{className:"text-xs font-bold text-white group-hover:text-[#21A68D] transition-colors",children:rt.name})]})]})}),f.jsx("td",{className:"px-5 py-3.5",children:f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-white/90",children:[f.jsx(sf,{className:"w-3 h-3 text-muted-foreground"}),f.jsxs("span",{children:[rt.totalDuration,"m Duration"]})]}),f.jsxs("div",{className:"flex items-center gap-1.5 text-[11px] text-muted-foreground",children:[f.jsx(yb,{className:"w-3 h-3"}),f.jsxs("span",{children:[new Date(rt.startDate).toLocaleDateString()," Operation"]})]})]})}),f.jsx("td",{className:"px-5 py-3.5",children:f.jsxs("div",{className:"flex flex-col",children:[f.jsx("span",{className:"text-xs font-medium text-white/80",children:rt.flights[0]?.drone||"N/A"}),f.jsxs("span",{className:"text-[10px] text-muted-foreground mt-0.5 uppercase tracking-tighter",children:[rt.droneType," Fleet"]})]})}),f.jsx("td",{className:"px-5 py-3.5 text-center",children:f.jsxs("div",{className:"inline-flex flex-col items-center p-2 rounded-lg bg-white/5 border border-white/5 min-w-[3.5rem]",children:[f.jsx("span",{className:"text-xs font-black text-[#D4E268]",children:rt.totalDetections}),f.jsx("span",{className:"text-[9px] text-muted-foreground font-bold uppercase tracking-tighter",children:"Hits"})]})}),f.jsx("td",{className:"px-5 py-3.5 text-right",children:f.jsxs("div",{className:"flex items-center justify-end gap-3",children:[f.jsx(en,{size:"sm",variant:"outline",className:"h-8 border-border/40 text-xs font-semibold hover:bg-[#21A68D] hover:text-white",onClick:()=>Ot(rt),children:"Telemetry Report"}),f.jsxs(cSe,{children:[f.jsx(uSe,{asChild:!0,children:f.jsx(en,{size:"icon",variant:"ghost",className:"h-8 w-8 text-muted-foreground hover:text-white",children:f.jsx(vp,{className:"w-4 h-4"})})}),f.jsxs(dSe,{align:"end",className:"bg-[#0f172a] border-border/50",children:[f.jsx(hSe,{children:"Export Mission"}),f.jsx(fSe,{}),f.jsx(MC,{children:"PDF Full Report"}),f.jsx(MC,{children:"JSON Telemetry"}),f.jsx(MC,{children:"KMZ Spatial Data"})]})]})]})})]},rt.id)})})]})})]}),f.jsx(ff,{open:n,onOpenChange:r,children:f.jsx(pf,{className:"max-w-[95vw] sm:max-w-4xl max-h-[90vh] overflow-y-auto",children:e&&f.jsxs(f.Fragment,{children:[f.jsxs(Ep,{children:[f.jsxs(mf,{className:"flex items-center gap-3",children:[e.name,f.jsx(Nn,{variant:"outline",style:{borderColor:nt(e.status),color:nt(e.status)},children:e.status})]}),f.jsxs(gf,{children:["Mission ID: ",e.id," - ",new Date(e.startDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})]})]}),f.jsxs("div",{className:"space-y-6 mt-4",children:[f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",style:{color:"#21A68D"},children:"Mission Details"}),f.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Mission ID"}),f.jsx("p",{className:"mt-1",children:e.id})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Date"}),f.jsx("p",{className:"mt-1",children:new Date(e.startDate).toLocaleDateString("en-US",{month:"long",day:"numeric",year:"numeric"})})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Drone"}),f.jsx("p",{className:"mt-1",children:e.flights[0]?.drone||"N/A"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"AI Model"}),f.jsx("p",{className:"mt-1",children:e.flights[0]?.aiModel||"N/A"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Duration"}),f.jsxs("p",{className:"mt-1",children:[e.totalDuration," minutes"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Total Distance"}),f.jsxs("p",{className:"mt-1",children:[e.flights.reduce((rt,zt)=>rt+zt.distance,0).toFixed(1)," km"]})]})]})]}),f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",style:{color:"#0F4C75"},children:"Performance Metrics"}),f.jsxs("div",{className:"grid grid-cols-3 gap-4 text-center",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-muted-foreground",children:"Total Duration"}),f.jsxs("p",{className:"text-lg mt-1",children:[e.totalDuration," min"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-muted-foreground",children:"Distance"}),f.jsxs("p",{className:"text-lg mt-1",children:[e.flights.reduce((rt,zt)=>rt+zt.distance,0).toFixed(1)," km"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-xs text-muted-foreground",children:"Detections"}),f.jsx("p",{className:"text-lg mt-1",style:{color:"#21A68D"},children:e.totalDetections})]})]})]}),f.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[f.jsxs(en,{variant:"outline",className:"border-[#21A68D] text-[#21A68D] hover:bg-[#21A68D] hover:text-white",onClick:Nt,children:[f.jsx(lx,{className:"w-4 h-4 mr-2"}),"Analyze Mission"]}),f.jsxs(en,{variant:"outline",className:"border-[#0F4C75] text-[#0F4C75] hover:bg-[#0F4C75] hover:text-white",onClick:()=>Tt(e),children:[f.jsx(K2,{className:"w-4 h-4 mr-2"}),"Replay Mission"]}),f.jsxs(en,{className:"bg-[#21A68D] hover:bg-[#1a8a72]",onClick:Mt,disabled:!A||A.id!==e.id,children:[f.jsx(vp,{className:"w-4 h-4 mr-2"}),"Generate Report"]})]})]})]})})}),f.jsx(Fb,{open:s,onOpenChange:h,children:f.jsxs(Bb,{side:"right",className:"w-full sm:max-w-7xl overflow-y-auto",children:[f.jsxs(AE,{children:[f.jsx(CE,{children:"Analyze Mission & Add AOI Information"}),f.jsx(EE,{children:e&&`Mission ID: ${e.id} - ${e.name}`})]}),f.jsxs("div",{className:"mt-6 space-y-6",children:[e&&f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",style:{color:"#21A68D"},children:"Mission Summary"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Drone"}),f.jsx("p",{className:"mt-1",children:e.flights[0]?.drone||"N/A"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Duration"}),f.jsxs("p",{className:"mt-1",children:[e.totalDuration," min"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Distance"}),f.jsxs("p",{className:"mt-1",children:[e.flights.reduce((rt,zt)=>rt+(zt.distance||0),0).toFixed(1)," km"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Detections"}),f.jsx("p",{className:"mt-1",children:e.totalDetections})]})]})]}),e&&f.jsxs("div",{children:[f.jsx("div",{className:"flex items-center justify-between mb-3",children:f.jsx("h3",{className:"text-sm",style:{color:"#21A68D"},children:"Draw & Edit AOI Zones"})}),f.jsx("div",{className:"rounded-lg overflow-hidden border-2 border-[#21A68D] bg-black",style:{height:"500px"},children:f.jsx(c$,{center:[-6.1064,106.8818],zoom:13,className:"w-full h-full",onAreaDrawn:(rt,zt)=>{console.log("AOI Area drawn:",rt,zt)}},K)}),f.jsxs("div",{className:"flex gap-2 mt-3",children:[f.jsxs(en,{size:"sm",variant:"outline",className:"border-[#21A68D] text-[#21A68D] hover:bg-[#21A68D] hover:text-white",onClick:()=>{window.leafletDrawMap&&window.leafletDrawMap.startPolygon()},children:[f.jsx(NB,{className:"w-4 h-4 mr-2"}),"Draw Polygon"]}),f.jsxs(en,{size:"sm",variant:"outline",className:"border-[#21A68D] text-[#21A68D] hover:bg-[#21A68D] hover:text-white",onClick:()=>{window.leafletDrawMap&&window.leafletDrawMap.finishPolygon()},children:[f.jsx(Ul,{className:"w-4 h-4 mr-2"}),"Finish Drawing"]}),f.jsxs(en,{size:"sm",variant:"outline",className:"border-[#21A68D] text-[#21A68D] hover:bg-[#21A68D] hover:text-white",onClick:()=>{window.leafletDrawMap&&window.leafletDrawMap.drawRectangle()},children:[f.jsx(vb,{className:"w-4 h-4 mr-2"}),"Add Rectangle"]}),f.jsxs(en,{size:"sm",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>{window.leafletDrawMap&&window.leafletDrawMap.clear()},children:[f.jsx(_p,{className:"w-4 h-4 mr-2"}),"Clear All"]})]}),f.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:'Click "Draw Polygon" to start, click on map to add points, then "Finish Drawing". Or click "Add Rectangle" for quick area marking.'})]}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-12 gap-8",children:[f.jsx("div",{className:"lg:col-span-4 space-y-6",children:f.jsxs("div",{className:"p-6 rounded-2xl bg-muted/20 border border-white/5 space-y-6",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-lg bg-[#21A68D]/10",children:f.jsx(dy,{className:"w-5 h-5 text-[#21A68D]"})}),f.jsx("h3",{className:"text-lg font-bold text-white",children:"Upload Video"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Step 1: Select Drone Type"}),f.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[f.jsxs(en,{variant:"outline",className:`h-12 gap-2 border-2 transition-all ${De==="UAV"?"border-[#21A68D] bg-[#21A68D]/10 text-white":"border-white/5 hover:border-[#21A68D]/50"}`,onClick:()=>Je("UAV"),children:[f.jsx(uy,{className:"w-4 h-4"}),"UAV"]}),f.jsxs(en,{variant:"outline",className:`h-12 gap-2 border-2 transition-all ${De==="AUV"?"border-[#21A68D] bg-[#21A68D]/10 text-white":"border-white/5 hover:border-[#21A68D]/50"}`,onClick:()=>Je("AUV"),children:[f.jsx($C,{className:"w-4 h-4"}),"AUV"]})]})]}),De&&f.jsxs("div",{className:"space-y-4 animate-in fade-in slide-in-from-top-4",children:[f.jsx("p",{className:"text-xs font-bold text-muted-foreground uppercase tracking-wider",children:"Step 2: Choose Files"}),f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f.jsxs("div",{className:`p-8 rounded-xl border-2 border-dashed transition-all text-center cursor-pointer ${ne?"border-[#21A68D] bg-[#21A68D]/5":"border-white/5 hover:border-[#21A68D]/50 hover:bg-[#21A68D]/5"}`,onClick:()=>document.getElementById("analyze-video-upload")?.click(),children:[f.jsx("input",{id:"analyze-video-upload",type:"file",accept:"video/*",className:"hidden",onChange:Qe}),f.jsx(MB,{className:`w-10 h-10 mx-auto mb-3 ${ne?"text-[#21A68D]":"text-muted-foreground"}`}),f.jsx("p",{className:"text-sm font-medium text-white",children:ne?ne.name:"Drop Flight Video here"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"MP4, MOV up to 2GB"})]}),f.jsxs("div",{className:`p-4 rounded-xl border-2 border-dashed transition-all flex items-center gap-4 cursor-pointer ${ae?"border-[#21A68D] bg-[#21A68D]/5":"border-white/5 hover:border-[#21A68D]/50 hover:bg-[#21A68D]/5"}`,onClick:()=>document.getElementById("analyze-telemetry-upload")?.click(),children:[f.jsx("input",{id:"analyze-telemetry-upload",type:"file",accept:".csv,.json,.log",className:"hidden",onChange:Re}),f.jsx("div",{className:`p-2 rounded-lg ${ae?"bg-[#21A68D]/20":"bg-white/5"}`,children:f.jsx(RC,{className:`w-5 h-5 ${ae?"text-[#21A68D]":"text-muted-foreground"}`})}),f.jsxs("div",{className:"text-left flex-1",children:[f.jsx("p",{className:"text-xs font-medium text-white",children:ae?ae.name:"Upload Flight Logs (Optional)"}),f.jsx("p",{className:"text-[10px] text-muted-foreground",children:ae?`${(ae.size/1024).toFixed(1)} KB`:"CSV, JSON supported"})]})]})]})]}),ye&&f.jsxs("div",{className:"space-y-4 pt-4 border-t border-white/5 animate-in fade-in slide-in-from-top-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx("span",{className:"text-xs font-bold text-white uppercase tracking-wider",children:"AI Pipeline"}),f.jsxs("span",{className:"text-xs text-[#21A68D] font-mono",children:[_e,"%"]})]}),f.jsx("div",{className:"h-2 w-full bg-white/5 rounded-full overflow-hidden",children:f.jsx("div",{className:"h-full bg-[#21A68D] transition-all duration-300",style:{width:`${_e}%`}})}),f.jsx("div",{className:"space-y-2",children:Ee.map(rt=>f.jsxs("div",{className:`p-2 rounded border text-[10px] flex items-center justify-between ${rt.status==="completed"?"bg-[#21A68D]/10 border-[#21A68D]/30 text-[#21A68D]":rt.status==="processing"?"bg-blue-500/10 border-blue-500/30 text-blue-400":"bg-white/2 border-white/5 text-muted-foreground opacity-50"}`,children:[f.jsx("span",{children:rt.name}),f.jsx("span",{className:"text-[8px] uppercase font-bold",children:rt.status})]},rt.id))})]}),f.jsxs("div",{className:"flex gap-3",children:[f.jsx(en,{variant:"ghost",className:"flex-1 text-muted-foreground hover:text-white",onClick:()=>h(!1),children:"Cancel"}),f.jsx(en,{className:"flex-1 bg-[#21A68D] hover:bg-[#1a8a72]",onClick:Ct,disabled:ye||!ne,children:ye?f.jsxs(f.Fragment,{children:[f.jsx(jB,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing..."]}):f.jsxs(f.Fragment,{children:[f.jsx(lx,{className:"w-4 h-4 mr-2"}),"Start AI Analysis"]})})]})]})}),f.jsx("div",{className:"lg:col-span-8 space-y-6",children:f.jsxs("div",{className:"p-6 rounded-2xl bg-muted/20 border border-white/5 min-h-[600px] flex flex-col",children:[f.jsxs("div",{className:"flex items-center justify-between mb-8",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"p-2 rounded-lg bg-[#21A68D]/10",children:f.jsx(qZ,{className:"w-5 h-5 text-[#21A68D]"})}),f.jsxs("h3",{className:"text-lg font-bold text-white",children:["Uploaded Videos (",Ce.length,")"]})]}),f.jsx("div",{className:"flex bg-black/40 p-1 rounded-lg border border-white/5",children:["All","UAV","AUV"].map(rt=>f.jsx("button",{onClick:()=>et(rt),className:`px-4 py-1.5 rounded-md text-xs font-medium transition-all ${Ve===rt?"bg-[#21A68D] text-white shadow-lg":"text-muted-foreground hover:text-white"}`,children:rt},rt))})]}),f.jsx("div",{className:"flex-1 space-y-4",children:Ce.filter(rt=>Ve==="All"||rt.type===Ve).map(rt=>f.jsx("div",{className:"p-4 rounded-xl bg-black/40 border border-white/5 hover:border-[#21A68D]/30 transition-all group",children:f.jsxs("div",{className:"flex gap-6",children:[f.jsxs("div",{className:"relative w-48 aspect-video rounded-lg bg-white/5 border border-white/10 overflow-hidden flex-shrink-0",children:[f.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/20 group-hover:bg-black/0 transition-all",children:f.jsx("div",{className:"w-10 h-10 rounded-full bg-white/10 backdrop-blur-md flex items-center justify-center border border-white/20 group-hover:scale-110 transition-all",children:f.jsx(K2,{className:"w-4 h-4 text-white fill-white"})})}),f.jsx("div",{className:"absolute top-2 right-2 px-1.5 py-0.5 rounded bg-black/60 text-[10px] font-mono text-white",children:rt.duration})]}),f.jsxs("div",{className:"flex-1 space-y-3",children:[f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{children:[f.jsx("h4",{className:"text-sm font-bold text-white mb-2 group-hover:text-[#21A68D] transition-all",children:rt.name}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsxs(Nn,{variant:"outline",className:`text-[10px] h-5 bg-white/5 ${rt.type==="UAV"?"text-blue-400 border-blue-400/30":"text-purple-400 border-purple-400/30"}`,children:[rt.type==="UAV"?f.jsx(uy,{className:"w-3 h-3 mr-1"}):f.jsx($C,{className:"w-3 h-3 mr-1"}),rt.type]}),rt.hasLog&&f.jsxs(Nn,{variant:"outline",className:"text-[10px] h-5 bg-[#21A68D]/10 text-[#21A68D] border-[#21A68D]/30",children:[f.jsx(RC,{className:"w-3 h-3 mr-1"}),"Flight Log"]}),f.jsxs(Nn,{variant:"outline",className:"text-[10px] h-5 bg-green-500/10 text-green-400 border-green-500/30",children:[f.jsx(Ul,{className:"w-3 h-3 mr-1"}),rt.status]})]})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsx(en,{size:"icon",variant:"ghost",className:"w-8 h-8 rounded-lg hover:bg-[#21A68D]/10 hover:text-[#21A68D]",children:f.jsx(wu,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"ghost",className:"w-8 h-8 rounded-lg hover:bg-[#21A68D]/10 hover:text-[#21A68D]",children:f.jsx(vp,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"ghost",className:"w-8 h-8 rounded-lg hover:bg-red-500/10 hover:text-red-500",children:f.jsx(_p,{className:"w-4 h-4"})})]})]}),f.jsxs("div",{className:"flex items-center gap-4 text-[10px] text-muted-foreground pb-3 border-b border-white/5",children:[f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(hH,{className:"w-3 h-3"}),rt.date]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(sf,{className:"w-3 h-3"}),rt.time]}),f.jsxs("div",{className:"flex items-center gap-1.5",children:[f.jsx(dy,{className:"w-3 h-3"}),rt.size]})]}),f.jsxs("div",{className:"flex items-center gap-2 pt-1 text-[10px]",children:[f.jsx("span",{className:"text-muted-foreground",children:"Linked to:"}),f.jsxs("span",{className:"px-2 py-0.5 rounded bg-[#21A68D]/10 text-[#21A68D] font-medium flex items-center gap-1.5",children:[f.jsx(qH,{className:"w-3 h-3"}),rt.missionName]})]})]})]})},rt.id))})]})})]})]})]})}),f.jsx(Fb,{open:d,onOpenChange:o,children:f.jsxs(Bb,{side:"right",className:"w-full sm:max-w-4xl overflow-y-auto",children:[f.jsxs(AE,{children:[f.jsx(CE,{children:"Replay Mission"}),f.jsx(EE,{children:e&&`${e.name} - ${e.id}`})]}),f.jsx("div",{className:"mt-6 space-y-6",children:e&&f.jsxs(f.Fragment,{children:[f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsxs("h3",{className:"text-sm mb-3 flex items-center gap-2",style:{color:"#21A68D"},children:[f.jsx(K2,{className:"w-4 h-4"}),"Mission Recording Replay"]}),f.jsx("div",{className:"relative rounded-lg overflow-hidden bg-black aspect-video",children:f.jsx("iframe",{src:`https://www.youtube.com/embed/${e.flights[0]?.videoId||"JxrGGacMlys"}?autoplay=1&mute=0&controls=1&showinfo=1&rel=0&modestbranding=1`,className:"w-full h-full",allow:"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture",allowFullScreen:!0,title:"Mission Replay Video",style:{border:"none"}})}),f.jsxs("div",{className:"mt-3 grid grid-cols-3 gap-2 text-xs",children:[f.jsxs("div",{className:"p-2 rounded bg-background border border-border text-center",children:[f.jsx("p",{className:"text-muted-foreground",children:"Duration"}),f.jsxs("p",{className:"mt-1",children:[e.totalDuration," min"]})]}),f.jsxs("div",{className:"p-2 rounded bg-background border border-border text-center",children:[f.jsx("p",{className:"text-muted-foreground",children:"Distance"}),f.jsxs("p",{className:"mt-1",children:[e.flights.reduce((rt,zt)=>rt+(zt.distance||0),0).toFixed(1)," km"]})]}),f.jsxs("div",{className:"p-2 rounded bg-background border border-border text-center",children:[f.jsx("p",{className:"text-muted-foreground",children:"Detections"}),f.jsx("p",{className:"mt-1",children:e.totalDetections})]})]})]}),f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsxs("h3",{className:"text-sm mb-3 flex items-center gap-2",style:{color:"#21A68D"},children:[f.jsx(yb,{className:"w-4 h-4"}),"Flight Path"]}),f.jsx(zwe,{waypoints:gSe(e.id)})]}),f.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",children:"Speed Profile"}),f.jsx(q_,{width:"100%",height:200,children:f.jsxs(gB,{data:pSe,children:[f.jsx(mb,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),f.jsx(Fm,{dataKey:"time",tick:{fill:"#94a3b8",fontSize:10}}),f.jsx(Bm,{tick:{fill:"#94a3b8",fontSize:10}}),f.jsx(Dc,{}),f.jsx(Ry,{type:"monotone",dataKey:"speed",stroke:"#21A68D",strokeWidth:2})]})})]}),f.jsxs(nn,{className:"p-4 bg-muted/30",children:[f.jsx("h3",{className:"text-sm mb-3",children:"Altitude Profile"}),f.jsx(q_,{width:"100%",height:200,children:f.jsxs(gB,{data:mSe,children:[f.jsx(mb,{strokeDasharray:"3 3",stroke:"rgba(255,255,255,0.1)"}),f.jsx(Fm,{dataKey:"time",tick:{fill:"#94a3b8",fontSize:10}}),f.jsx(Bm,{tick:{fill:"#94a3b8",fontSize:10}}),f.jsx(Dc,{}),f.jsx(Ry,{type:"monotone",dataKey:"altitude",stroke:"#0F4C75",strokeWidth:2})]})})]})]}),f.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[f.jsx(en,{variant:"outline",className:"flex-1",onClick:()=>o(!1),children:"Close Replay"}),f.jsxs(en,{variant:"outline",className:"flex-1",children:[f.jsx(vp,{className:"w-4 h-4 mr-2"}),"Download Recording"]})]})]})})]})})]})]})}var Kw="Switch",[vSe]=Wl(Kw),[xSe,_Se]=vSe(Kw),fG=W.forwardRef((e,t)=>{const{__scopeSwitch:n,name:r,checked:s,defaultChecked:h,required:d,disabled:o,value:_="on",onCheckedChange:w,form:A,...P}=e,[N,z]=W.useState(null),q=gr(t,te=>z(te)),$=W.useRef(!1),O=N?A||!!N.closest("form"):!0,[X,K]=bd({prop:s,defaultProp:h??!1,onChange:w,caller:Kw});return f.jsxs(xSe,{scope:n,checked:X,disabled:o,children:[f.jsx(qn.button,{type:"button",role:"switch","aria-checked":X,"aria-required":d,"data-state":yG(X),"data-disabled":o?"":void 0,disabled:o,value:_,...P,ref:q,onClick:dn(e.onClick,te=>{K(ne=>!ne),O&&($.current=te.isPropagationStopped(),$.current||te.stopPropagation())})}),O&&f.jsx(gG,{control:N,bubbles:!$.current,name:r,value:_,checked:X,required:d,disabled:o,form:A,style:{transform:"translateX(-100%)"}})]})});fG.displayName=Kw;var pG="SwitchThumb",mG=W.forwardRef((e,t)=>{const{__scopeSwitch:n,...r}=e,s=_Se(pG,n);return f.jsx(qn.span,{"data-state":yG(s.checked),"data-disabled":s.disabled?"":void 0,...r,ref:t})});mG.displayName=pG;var bSe="SwitchBubbleInput",gG=W.forwardRef(({__scopeSwitch:e,control:t,checked:n,bubbles:r=!0,...s},h)=>{const d=W.useRef(null),o=gr(d,h),_=m0(n),w=g0(t);return W.useEffect(()=>{const A=d.current;if(!A)return;const P=window.HTMLInputElement.prototype,z=Object.getOwnPropertyDescriptor(P,"checked").set;if(_!==n&&z){const q=new Event("click",{bubbles:r});z.call(A,n),A.dispatchEvent(q)}},[_,n,r]),f.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...s,tabIndex:-1,ref:o,style:{...s.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});gG.displayName=bSe;function yG(e){return e?"checked":"unchecked"}var wSe=fG,SSe=mG;function tb({className:e,...t}){return f.jsx(wSe,{"data-slot":"switch",className:or("peer data-[state=checked]:bg-primary data-[state=unchecked]:bg-switch-background focus-visible:border-ring focus-visible:ring-ring/50 dark:data-[state=unchecked]:bg-input/80 inline-flex h-[1.15rem] w-8 shrink-0 items-center rounded-full border border-transparent transition-all outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50",e),...t,children:f.jsx(SSe,{"data-slot":"switch-thumb",className:or("bg-card dark:data-[state=unchecked]:bg-card-foreground dark:data-[state=checked]:bg-primary-foreground pointer-events-none block size-4 rounded-full ring-0 transition-transform data-[state=checked]:translate-x-[calc(100%-2px)] data-[state=unchecked]:translate-x-0")})})}var vG=["PageUp","PageDown"],xG=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],_G={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},lv="Slider",[Jj,TSe,PSe]=Y1(lv),[bG]=Wl(lv,[PSe]),[ASe,Xw]=bG(lv),wG=W.forwardRef((e,t)=>{const{name:n,min:r=0,max:s=100,step:h=1,orientation:d="horizontal",disabled:o=!1,minStepsBetweenThumbs:_=0,defaultValue:w=[r],value:A,onValueChange:P=()=>{},onValueCommit:N=()=>{},inverted:z=!1,form:q,...$}=e,O=W.useRef(new Set),X=W.useRef(0),te=d==="horizontal"?CSe:ESe,[ne=[],H]=bd({prop:A,defaultProp:w,onChange:fe=>{[...O.current][X.current]?.focus(),P(fe)}}),ae=W.useRef(ne);function de(fe){const Ee=NSe(ne,fe);_e(fe,Ee)}function ye(fe){_e(fe,X.current)}function Ae(){const fe=ae.current[X.current];ne[X.current]!==fe&&N(ne)}function _e(fe,Ee,{commit:Be}={commit:!1}){const De=LSe(h),Je=zSe(Math.round((fe-r)/h)*h+r,De),Ve=Tb(Je,[r,s]);H((et=[])=>{const Ce=kSe(et,Ve,Ee);if(RSe(Ce,_*h)){X.current=Ce.indexOf(Ve);const We=String(Ce)!==String(et);return We&&Be&&N(Ce),We?Ce:et}else return et})}return f.jsx(ASe,{scope:e.__scopeSlider,name:n,disabled:o,min:r,max:s,valueIndexToChangeRef:X,thumbs:O.current,values:ne,orientation:d,form:q,children:f.jsx(Jj.Provider,{scope:e.__scopeSlider,children:f.jsx(Jj.Slot,{scope:e.__scopeSlider,children:f.jsx(te,{"aria-disabled":o,"data-disabled":o?"":void 0,...$,ref:t,onPointerDown:dn($.onPointerDown,()=>{o||(ae.current=ne)}),min:r,max:s,inverted:z,onSlideStart:o?void 0:de,onSlideMove:o?void 0:ye,onSlideEnd:o?void 0:Ae,onHomeKeyDown:()=>!o&&_e(r,0,{commit:!0}),onEndKeyDown:()=>!o&&_e(s,ne.length-1,{commit:!0}),onStepKeyDown:({event:fe,direction:Ee})=>{if(!o){const Je=vG.includes(fe.key)||fe.shiftKey&&xG.includes(fe.key)?10:1,Ve=X.current,et=ne[Ve],Ce=h*Je*Ee;_e(et+Ce,Ve,{commit:!0})}}})})})})});wG.displayName=lv;var[SG,TG]=bG(lv,{startEdge:"left",endEdge:"right",size:"width",direction:1}),CSe=W.forwardRef((e,t)=>{const{min:n,max:r,dir:s,inverted:h,onSlideStart:d,onSlideMove:o,onSlideEnd:_,onStepKeyDown:w,...A}=e,[P,N]=W.useState(null),z=gr(t,te=>N(te)),q=W.useRef(void 0),$=Gy(s),O=$==="ltr",X=O&&!h||!O&&h;function K(te){const ne=q.current||P.getBoundingClientRect(),H=[0,ne.width],de=AI(H,X?[n,r]:[r,n]);return q.current=ne,de(te-ne.left)}return f.jsx(SG,{scope:e.__scopeSlider,startEdge:X?"left":"right",endEdge:X?"right":"left",direction:X?1:-1,size:"width",children:f.jsx(PG,{dir:$,"data-orientation":"horizontal",...A,ref:z,style:{...A.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:te=>{const ne=K(te.clientX);d?.(ne)},onSlideMove:te=>{const ne=K(te.clientX);o?.(ne)},onSlideEnd:()=>{q.current=void 0,_?.()},onStepKeyDown:te=>{const H=_G[X?"from-left":"from-right"].includes(te.key);w?.({event:te,direction:H?-1:1})}})})}),ESe=W.forwardRef((e,t)=>{const{min:n,max:r,inverted:s,onSlideStart:h,onSlideMove:d,onSlideEnd:o,onStepKeyDown:_,...w}=e,A=W.useRef(null),P=gr(t,A),N=W.useRef(void 0),z=!s;function q($){const O=N.current||A.current.getBoundingClientRect(),X=[0,O.height],te=AI(X,z?[r,n]:[n,r]);return N.current=O,te($-O.top)}return f.jsx(SG,{scope:e.__scopeSlider,startEdge:z?"bottom":"top",endEdge:z?"top":"bottom",size:"height",direction:z?1:-1,children:f.jsx(PG,{"data-orientation":"vertical",...w,ref:P,style:{...w.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:$=>{const O=q($.clientY);h?.(O)},onSlideMove:$=>{const O=q($.clientY);d?.(O)},onSlideEnd:()=>{N.current=void 0,o?.()},onStepKeyDown:$=>{const X=_G[z?"from-bottom":"from-top"].includes($.key);_?.({event:$,direction:X?-1:1})}})})}),PG=W.forwardRef((e,t)=>{const{__scopeSlider:n,onSlideStart:r,onSlideMove:s,onSlideEnd:h,onHomeKeyDown:d,onEndKeyDown:o,onStepKeyDown:_,...w}=e,A=Xw(lv,n);return f.jsx(qn.span,{...w,ref:t,onKeyDown:dn(e.onKeyDown,P=>{P.key==="Home"?(d(P),P.preventDefault()):P.key==="End"?(o(P),P.preventDefault()):vG.concat(xG).includes(P.key)&&(_(P),P.preventDefault())}),onPointerDown:dn(e.onPointerDown,P=>{const N=P.target;N.setPointerCapture(P.pointerId),P.preventDefault(),A.thumbs.has(N)?N.focus():r(P)}),onPointerMove:dn(e.onPointerMove,P=>{P.target.hasPointerCapture(P.pointerId)&&s(P)}),onPointerUp:dn(e.onPointerUp,P=>{const N=P.target;N.hasPointerCapture(P.pointerId)&&(N.releasePointerCapture(P.pointerId),h(P))})})}),AG="SliderTrack",CG=W.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Xw(AG,n);return f.jsx(qn.span,{"data-disabled":s.disabled?"":void 0,"data-orientation":s.orientation,...r,ref:t})});CG.displayName=AG;var Qj="SliderRange",EG=W.forwardRef((e,t)=>{const{__scopeSlider:n,...r}=e,s=Xw(Qj,n),h=TG(Qj,n),d=W.useRef(null),o=gr(t,d),_=s.values.length,w=s.values.map(N=>kG(N,s.min,s.max)),A=_>1?Math.min(...w):0,P=100-Math.max(...w);return f.jsx(qn.span,{"data-orientation":s.orientation,"data-disabled":s.disabled?"":void 0,...r,ref:o,style:{...e.style,[h.startEdge]:A+"%",[h.endEdge]:P+"%"}})});EG.displayName=Qj;var eM="SliderThumb",jG=W.forwardRef((e,t)=>{const n=TSe(e.__scopeSlider),[r,s]=W.useState(null),h=gr(t,o=>s(o)),d=W.useMemo(()=>r?n().findIndex(o=>o.ref.current===r):-1,[n,r]);return f.jsx(jSe,{...e,ref:h,index:d})}),jSe=W.forwardRef((e,t)=>{const{__scopeSlider:n,index:r,name:s,...h}=e,d=Xw(eM,n),o=TG(eM,n),[_,w]=W.useState(null),A=gr(t,K=>w(K)),P=_?d.form||!!_.closest("form"):!0,N=g0(_),z=d.values[r],q=z===void 0?0:kG(z,d.min,d.max),$=ISe(r,d.values.length),O=N?.[o.size],X=O?DSe(O,q,o.direction):0;return W.useEffect(()=>{if(_)return d.thumbs.add(_),()=>{d.thumbs.delete(_)}},[_,d.thumbs]),f.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[o.startEdge]:`calc(${q}% + ${X}px)`},children:[f.jsx(Jj.ItemSlot,{scope:e.__scopeSlider,children:f.jsx(qn.span,{role:"slider","aria-label":e["aria-label"]||$,"aria-valuemin":d.min,"aria-valuenow":z,"aria-valuemax":d.max,"aria-orientation":d.orientation,"data-orientation":d.orientation,"data-disabled":d.disabled?"":void 0,tabIndex:d.disabled?void 0:0,...h,ref:A,style:z===void 0?{display:"none"}:e.style,onFocus:dn(e.onFocus,()=>{d.valueIndexToChangeRef.current=r})})}),P&&f.jsx(MG,{name:s??(d.name?d.name+(d.values.length>1?"[]":""):void 0),form:d.form,value:z},r)]})});jG.displayName=eM;var MSe="RadioBubbleInput",MG=W.forwardRef(({__scopeSlider:e,value:t,...n},r)=>{const s=W.useRef(null),h=gr(s,r),d=m0(t);return W.useEffect(()=>{const o=s.current;if(!o)return;const _=window.HTMLInputElement.prototype,A=Object.getOwnPropertyDescriptor(_,"value").set;if(d!==t&&A){const P=new Event("input",{bubbles:!0});A.call(o,t),o.dispatchEvent(P)}},[d,t]),f.jsx(qn.input,{style:{display:"none"},...n,ref:h,defaultValue:t})});MG.displayName=MSe;function kSe(e=[],t,n){const r=[...e];return r[n]=t,r.sort((s,h)=>s-h)}function kG(e,t,n){const h=100/(n-t)*(e-t);return Tb(h,[0,100])}function ISe(e,t){return t>2?`Value ${e+1} of ${t}`:t===2?["Minimum","Maximum"][e]:void 0}function NSe(e,t){if(e.length===1)return 0;const n=e.map(s=>Math.abs(s-t)),r=Math.min(...n);return n.indexOf(r)}function DSe(e,t,n){const r=e/2,h=AI([0,50],[0,r]);return(r-h(t)*n)*n}function OSe(e){return e.slice(0,-1).map((t,n)=>e[n+1]-t)}function RSe(e,t){if(t>0){const n=OSe(e);return Math.min(...n)>=t}return!0}function AI(e,t){return n=>{if(e[0]===e[1]||t[0]===t[1])return t[0];const r=(t[1]-t[0])/(e[1]-e[0]);return t[0]+r*(n-e[0])}}function LSe(e){return(String(e).split(".")[1]||"").length}function zSe(e,t){const n=Math.pow(10,t);return Math.round(e*n)/n}var FSe=wG,BSe=CG,$Se=EG,VSe=jG;function Qv({className:e,defaultValue:t,value:n,min:r=0,max:s=100,...h}){const d=W.useMemo(()=>Array.isArray(n)?n:Array.isArray(t)?t:[r,s],[n,t,r,s]);return f.jsxs(FSe,{"data-slot":"slider",defaultValue:t,value:n,min:r,max:s,className:or("relative flex w-full touch-none items-center select-none data-[disabled]:opacity-50 data-[orientation=vertical]:h-full data-[orientation=vertical]:min-h-44 data-[orientation=vertical]:w-auto data-[orientation=vertical]:flex-col",e),...h,children:[f.jsx(BSe,{"data-slot":"slider-track",className:or("bg-muted relative grow overflow-hidden rounded-full data-[orientation=horizontal]:h-4 data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-1.5"),children:f.jsx($Se,{"data-slot":"slider-range",className:or("bg-primary absolute data-[orientation=horizontal]:h-full data-[orientation=vertical]:w-full")})}),Array.from({length:d.length},(o,_)=>f.jsx(VSe,{"data-slot":"slider-thumb",className:"border-primary bg-background ring-ring/50 block size-4 shrink-0 rounded-full border shadow-sm transition-[color,box-shadow] hover:ring-4 focus-visible:ring-4 focus-visible:outline-hidden disabled:pointer-events-none disabled:opacity-50"},_))]})}var USe=(e,t,n,r,s,h,d,o)=>{let _=document.documentElement,w=["light","dark"];function A(z){(Array.isArray(e)?e:[e]).forEach(q=>{let $=q==="class",O=$&&h?s.map(X=>h[X]||X):s;$?(_.classList.remove(...O),_.classList.add(h&&h[z]?h[z]:z)):_.setAttribute(q,z)}),P(z)}function P(z){o&&w.includes(z)&&(_.style.colorScheme=z)}function N(){return window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}if(r)A(r);else try{let z=localStorage.getItem(t)||n,q=d&&z==="system"?N():z;A(q)}catch{}},qSe=W.createContext(void 0),GSe={setTheme:e=>{},themes:[]},WSe=()=>{var e;return(e=W.useContext(qSe))!=null?e:GSe};W.memo(({forcedTheme:e,storageKey:t,attribute:n,enableSystem:r,enableColorScheme:s,defaultTheme:h,value:d,themes:o,nonce:_,scriptProps:w})=>{let A=JSON.stringify([n,t,h,e,o,d,r,s]).slice(1,-1);return W.createElement("script",{...w,suppressHydrationWarning:!0,nonce:typeof window>"u"?_:"",dangerouslySetInnerHTML:{__html:`(${USe.toString()})(${A})`}})});const HSe=({...e})=>{const{theme:t="system"}=WSe();return f.jsx(Mte,{theme:t,className:"toaster group",style:{"--normal-bg":"var(--popover)","--normal-text":"var(--popover-foreground)","--normal-border":"var(--border)"},...e})},ZSe=[{id:1,name:"John Commander",email:"john@droneops.io",role:"Admin",status:"active",lastActive:"2025-01-20"},{id:2,name:"Sarah Pilot",email:"sarah@droneops.io",role:"Operator",status:"active",lastActive:"2025-01-20"},{id:3,name:"Mike Analyst",email:"mike@droneops.io",role:"Analyst",status:"active",lastActive:"2025-01-19"},{id:4,name:"Emily Tech",email:"emily@droneops.io",role:"Technician",status:"inactive",lastActive:"2025-01-15"}],KSe=[{id:"UAV-001",name:"Pyrhos X V1",type:"UAV",maxAltitude:150,maxSpeed:20,batteryCapacity:22e3,flightTime:45},{id:"UAV-002",name:"AR-2 Aerial",type:"UAV",maxAltitude:120,maxSpeed:18,batteryCapacity:16e3,flightTime:38},{id:"AUV-001",name:"AquaScan Alpha",type:"AUV",maxDepth:500,maxSpeed:3,batteryCapacity:18e3,operationTime:120},{id:"AUV-002",name:"DeepSeeker Pro",type:"AUV",maxDepth:1e3,maxSpeed:2.5,batteryCapacity:24e3,operationTime:180}],XSe=[{id:1,name:"Structure Inspection",version:"v2.4",confidence:94,status:"active",lastUpdated:"2025-01-15"},{id:2,name:"Vehicle Counting",version:"v3.1",confidence:92,status:"active",lastUpdated:"2025-01-18"},{id:3,name:"People Detection",version:"v2.8",confidence:89,status:"active",lastUpdated:"2025-01-10"},{id:4,name:"Seabed Mapping",version:"v1.6",confidence:91,status:"active",lastUpdated:"2025-01-12"},{id:5,name:"Crowd Estimation",version:"v2.2",confidence:88,status:"inactive",lastUpdated:"2025-01-05"}];function YSe(){const[e,t]=W.useState(ZSe),[n,r]=W.useState(KSe),[s,h]=W.useState(XSe),[d,o]=W.useState(!1),[_,w]=W.useState(!1),[A,P]=W.useState(null),{colors:N,updateColor:z,resetColors:q}=TB(),$=H=>{pp.success("Settings saved successfully!",{description:H})},O=H=>{confirm("Are you sure you want to delete this user?")&&(t(e.filter(ae=>ae.id!==H)),pp.success("User deleted successfully"))},X=H=>{h(s.map(ae=>ae.id===H?{...ae,status:ae.status==="active"?"inactive":"active"}:ae)),pp.success("AI Model status updated")},K=()=>{const H=GY(),ae=new Blob([JSON.stringify(H,null,2)],{type:"application/json"}),de=URL.createObjectURL(ae),ye=document.createElement("a");ye.href=de,ye.download=`mariview-backup-${new Date().toISOString().split("T")[0]}.json`,document.body.appendChild(ye),ye.click(),document.body.removeChild(ye),URL.revokeObjectURL(de),pp.success("Data exported successfully!")},te=H=>{const ae=H.target.files?.[0];if(!ae)return;const de=new FileReader;de.onload=ye=>{try{const Ae=JSON.parse(ye.target?.result);WY(Ae),pp.success("Data imported successfully! Refreshing page..."),setTimeout(()=>window.location.reload(),1500)}catch{pp.error("Failed to import data. Invalid file format.")}},de.readAsText(ae)},ne=()=>{confirm("Are you sure you want to clear ALL data? This action cannot be undone!")&&(NY(),pp.success("All data cleared! Refreshing page..."),setTimeout(()=>window.location.reload(),1500))};return f.jsxs("div",{className:"p-4 md:p-6",children:[f.jsx(HSe,{}),f.jsxs("div",{className:"mb-6",children:[f.jsx("h1",{className:"text-2xl md:text-3xl",children:"Settings"}),f.jsx("p",{className:"text-muted-foreground text-sm md:text-base",children:"System configuration and management"})]}),f.jsxs(oU,{defaultValue:"users",className:"space-y-6",children:[f.jsxs(sU,{className:"grid w-full grid-cols-4 bg-muted",children:[f.jsxs(wp,{value:"users",className:"text-xs sm:text-sm",children:[f.jsx($Z,{className:"w-4 h-4 mr-2"}),"Users"]}),f.jsxs(wp,{value:"drone",className:"text-xs sm:text-sm",children:[f.jsx(sM,{className:"w-4 h-4 mr-2"}),"Drones"]}),f.jsxs(wp,{value:"ai",className:"text-xs sm:text-sm",children:[f.jsx(DC,{className:"w-4 h-4 mr-2"}),"AI Models"]}),f.jsxs(wp,{value:"data",className:"text-xs sm:text-sm",children:[f.jsx(lD,{className:"w-4 h-4 mr-2"}),"Data"]})]}),f.jsx(Sp,{value:"users",className:"space-y-4",children:f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("div",{className:"flex items-center justify-between mb-6",children:[f.jsxs("div",{children:[f.jsx("h2",{children:"User Management"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage system users and permissions"})]}),f.jsxs(ff,{open:d,onOpenChange:o,children:[f.jsx(gM,{asChild:!0,children:f.jsxs(en,{className:"bg-[#21A68D] hover:bg-[#1a8a72]",children:[f.jsx(FZ,{className:"w-4 h-4 mr-2"}),"Add User"]})}),f.jsxs(pf,{children:[f.jsxs(Ep,{children:[f.jsx(mf,{children:"Add New User"}),f.jsx(gf,{children:"Create a new user account with role and permissions"})]}),f.jsxs("div",{className:"space-y-4 mt-4",children:[f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Full Name"}),f.jsx(xa,{placeholder:"Enter full name",className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Email"}),f.jsx(xa,{type:"email",placeholder:"user@droneops.io",className:"bg-input"})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Role"}),f.jsxs(Gm,{children:[f.jsx(Hm,{className:"bg-input",children:f.jsx(Wm,{placeholder:"Select role"})}),f.jsxs(Zm,{children:[f.jsx(Ir,{value:"admin",children:"Admin"}),f.jsx(Ir,{value:"operator",children:"Operator"}),f.jsx(Ir,{value:"analyst",children:"Analyst"}),f.jsx(Ir,{value:"technician",children:"Technician"})]})]})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(mr,{children:"Password"}),f.jsx(xa,{type:"password",placeholder:"Enter password",className:"bg-input"})]}),f.jsxs("div",{className:"flex gap-3 pt-4",children:[f.jsx(en,{variant:"outline",className:"flex-1",onClick:()=>o(!1),children:"Cancel"}),f.jsx(en,{className:"flex-1 bg-[#21A68D] hover:bg-[#1a8a72]",onClick:()=>{$("New user added successfully"),o(!1)},children:"Create User"})]})]})]})]})]}),f.jsx("div",{className:"space-y-3",children:e.map(H=>f.jsx(nn,{className:"p-4 bg-muted/30 border-border",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-[#21A68D] flex items-center justify-center",children:f.jsx("span",{className:"text-white font-semibold",children:H.name.split(" ").map(ae=>ae[0]).join("")})}),f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("p",{className:"font-semibold",children:H.name}),f.jsx(Nn,{variant:"outline",style:{borderColor:H.status==="active"?"#22c55e":"#6b7280",color:H.status==="active"?"#22c55e":"#6b7280"},children:H.status})]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:H.email})]}),f.jsxs("div",{className:"hidden md:block text-sm text-center",children:[f.jsx("p",{className:"text-muted-foreground",children:"Role"}),f.jsx("p",{className:"mt-1",children:H.role})]}),f.jsxs("div",{className:"hidden lg:block text-sm text-center",children:[f.jsx("p",{className:"text-muted-foreground",children:"Last Active"}),f.jsx("p",{className:"mt-1",children:H.lastActive})]})]}),f.jsxs("div",{className:"flex gap-2 ml-4",children:[f.jsx(en,{size:"icon",variant:"outline",children:f.jsx(Cm,{className:"w-4 h-4"})}),f.jsx(en,{size:"icon",variant:"outline",className:"border-red-500 text-red-500 hover:bg-red-500 hover:text-white",onClick:()=>O(H.id),children:f.jsx(_p,{className:"w-4 h-4"})})]})]})},H.id))})]})}),f.jsxs(Sp,{value:"drone",className:"space-y-4",children:[f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{children:"Drone Parameter Configuration"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Configure operational parameters for UAV and AUV"})]}),f.jsx("div",{className:"space-y-4",children:n.map(H=>f.jsx(nn,{className:"p-4 bg-muted/30 border-border",children:f.jsxs("div",{className:"flex items-start justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[f.jsx(Nn,{variant:"outline",style:{borderColor:H.type==="UAV"?"#21A68D":"#0F4C75",color:H.type==="UAV"?"#21A68D":"#0F4C75"},children:H.type}),f.jsx("h3",{className:"text-lg",children:H.name}),f.jsxs("span",{className:"text-sm text-muted-foreground",children:["ID: ",H.id]})]}),f.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 text-sm",children:H.type==="UAV"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Max Altitude"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.maxAltitude,"m"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Max Speed"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.maxSpeed," m/s"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Battery"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.batteryCapacity," mAh"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Flight Time"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.flightTime," min"]})]})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Max Depth"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.maxDepth,"m"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Max Speed"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.maxSpeed," m/s"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Battery"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.batteryCapacity," mAh"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Operation Time"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.operationTime," min"]})]})]})})]}),f.jsxs(en,{variant:"outline",className:"ml-4",onClick:()=>{P(H),w(!0)},children:[f.jsx(Cm,{className:"w-4 h-4 mr-2"}),"Edit"]})]})},H.id))})]}),f.jsx(ff,{open:_,onOpenChange:w,children:f.jsxs(pf,{className:"sm:max-w-2xl",children:[f.jsxs(Ep,{children:[f.jsx(mf,{children:"Edit Drone Parameters"}),f.jsx(gf,{children:A&&`Configure operational parameters for ${A.name}`})]}),A&&f.jsxs("div",{className:"space-y-6 mt-4",children:[A.type==="UAV"?f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Max Altitude (meters)"}),f.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.maxAltitude,"m"]})]}),f.jsx(Qv,{defaultValue:[A.maxAltitude],max:200,step:10,className:"[&_[role=slider]]:bg-[#21A68D]"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Max Speed (m/s)"}),f.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.maxSpeed," m/s"]})]}),f.jsx(Qv,{defaultValue:[A.maxSpeed],max:30,step:1,className:"[&_[role=slider]]:bg-[#21A68D]"})]}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Battery Capacity (mAh)"}),f.jsx(xa,{type:"number",defaultValue:A.batteryCapacity,className:"w-32 bg-input"})]})}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Max Flight Time (min)"}),f.jsx(xa,{type:"number",defaultValue:A.flightTime,className:"w-32 bg-input"})]})})]}):f.jsxs(f.Fragment,{children:[f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Max Depth (meters)"}),f.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.maxDepth,"m"]})]}),f.jsx(Qv,{defaultValue:[A.maxDepth],max:1500,step:50,className:"[&_[role=slider]]:bg-[#0F4C75]"})]}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Max Speed (m/s)"}),f.jsxs("span",{className:"text-sm text-muted-foreground",children:[A.maxSpeed," m/s"]})]}),f.jsx(Qv,{defaultValue:[A.maxSpeed],max:5,step:.5,className:"[&_[role=slider]]:bg-[#0F4C75]"})]}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Battery Capacity (mAh)"}),f.jsx(xa,{type:"number",defaultValue:A.batteryCapacity,className:"w-32 bg-input"})]})}),f.jsx("div",{className:"space-y-3",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsx(mr,{children:"Max Operation Time (min)"}),f.jsx(xa,{type:"number",defaultValue:A.operationTime,className:"w-32 bg-input"})]})})]}),f.jsxs("div",{className:"flex gap-3 pt-4 border-t border-border",children:[f.jsx(en,{variant:"outline",className:"flex-1",onClick:()=>w(!1),children:"Cancel"}),f.jsxs(en,{className:"flex-1 bg-[#21A68D] hover:bg-[#1a8a72]",onClick:()=>{$("Drone parameters updated successfully"),w(!1)},children:[f.jsx(cD,{className:"w-4 h-4 mr-2"}),"Save Changes"]})]})]})]})})]}),f.jsx(Sp,{value:"ai",className:"space-y-4",children:f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{children:"AI Parameter Configuration"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Manage AI models and detection parameters"})]}),f.jsx("div",{className:"space-y-3",children:s.map(H=>f.jsx(nn,{className:"p-4 bg-muted/30 border-border",children:f.jsx("div",{className:"flex items-center justify-between",children:f.jsxs("div",{className:"flex-1",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[f.jsx("h3",{className:"text-lg",children:H.name}),f.jsx(Nn,{variant:"outline",className:"text-xs",children:H.version}),f.jsx(Nn,{variant:"outline",style:{borderColor:H.status==="active"?"#22c55e":"#6b7280",color:H.status==="active"?"#22c55e":"#6b7280"},children:H.status})]}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Confidence Threshold"}),f.jsxs("p",{className:"mt-1 text-lg",children:[H.confidence,"%"]})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Last Updated"}),f.jsx("p",{className:"mt-1",children:H.lastUpdated})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Status"}),f.jsx("div",{className:"mt-1",children:f.jsx(tb,{checked:H.status==="active",onCheckedChange:()=>X(H.id)})})]})]}),f.jsxs("div",{className:"mt-4 space-y-2",children:[f.jsxs("div",{className:"flex items-center justify-between text-sm",children:[f.jsx(mr,{children:"Confidence Threshold"}),f.jsxs("span",{className:"text-muted-foreground",children:[H.confidence,"%"]})]}),f.jsx(Qv,{defaultValue:[H.confidence],max:100,step:1,className:"[&_[role=slider]]:bg-[#21A68D]"}),f.jsx("p",{className:"text-xs text-muted-foreground",children:"Minimum confidence level for AI detections"})]})]})})},H.id))}),f.jsxs(nn,{className:"p-4 bg-muted/30 border-border mt-6",children:[f.jsx("h3",{className:"mb-4",children:"Global AI Settings"}),f.jsxs("div",{className:"space-y-4",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(mr,{children:"Enable Real-time Processing"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Process detections during live missions"})]}),f.jsx(tb,{defaultChecked:!0})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(mr,{children:"Auto-save Detection Results"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Automatically save AI detection data"})]}),f.jsx(tb,{defaultChecked:!0})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{children:[f.jsx(mr,{children:"Send Detection Alerts"}),f.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:"Notify when critical detections occur"})]}),f.jsx(tb,{})]})]})]}),f.jsx("div",{className:"flex justify-end pt-4",children:f.jsxs(en,{className:"bg-[#21A68D] hover:bg-[#1a8a72]",onClick:()=>$("AI parameters saved successfully"),children:[f.jsx(cD,{className:"w-4 h-4 mr-2"}),"Save AI Settings"]})})]})}),f.jsx(Sp,{value:"data",className:"space-y-4",children:f.jsxs(nn,{className:"p-6 bg-card border-border",children:[f.jsxs("div",{className:"mb-6",children:[f.jsx("h2",{children:"Data Management"}),f.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Export, import, and manage application data"})]}),f.jsx(nn,{className:"p-4 bg-muted/30 border-border mb-6",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(lD,{className:"w-5 h-5 text-[#21A68D] mt-0.5"}),f.jsxs("div",{className:"flex-1",children:[f.jsx("h3",{className:"text-base mb-2",children:"Local Storage"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Data disimpan di browser localStorage. Data akan tetap ada setelah refresh, tetapi terbatas pada device ini saja."})]})]})}),f.jsx(nn,{className:"p-4 bg-muted/30 border-border mb-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("h3",{className:"text-base mb-1 flex items-center gap-2",children:[f.jsx(vp,{className:"w-4 h-4 text-[#21A68D]"}),"Export Data"]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Download backup semua data (missions, drones, assets, flights, settings)"})]}),f.jsxs(en,{onClick:K,className:"bg-[#21A68D] hover:bg-[#1a8a72]",children:[f.jsx(vp,{className:"w-4 h-4 mr-2"}),"Export"]})]})}),f.jsx(nn,{className:"p-4 bg-muted/30 border-border mb-4",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("h3",{className:"text-base mb-1 flex items-center gap-2",children:[f.jsx(dy,{className:"w-4 h-4 text-[#0F4C75]"}),"Import Data"]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"Restore data dari file backup. Akan menimpa semua data yang ada."})]}),f.jsxs("div",{children:[f.jsx("input",{type:"file",accept:".json",onChange:te,className:"hidden",id:"import-file"}),f.jsxs(en,{onClick:()=>document.getElementById("import-file")?.click(),variant:"outline",className:"border-[#0F4C75] text-[#0F4C75] hover:bg-[#0F4C75] hover:text-white",children:[f.jsx(dy,{className:"w-4 h-4 mr-2"}),"Import"]})]})]})}),f.jsx(nn,{className:"p-4 bg-muted/30 border-border border-red-900/20",children:f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex-1",children:[f.jsxs("h3",{className:"text-base mb-1 flex items-center gap-2 text-red-500",children:[f.jsx(dD,{className:"w-4 h-4"}),"Clear All Data"]}),f.jsxs("p",{className:"text-sm text-muted-foreground",children:["Hapus semua data dan reset ke default. ",f.jsx("strong",{children:"Tindakan ini tidak dapat dibatalkan!"})]})]}),f.jsxs(en,{onClick:ne,variant:"destructive",children:[f.jsx(dD,{className:"w-4 h-4 mr-2"}),"Clear All"]})]})}),f.jsxs(nn,{className:"p-4 bg-muted/30 border-border mt-6",children:[f.jsx("h3",{className:"mb-4",children:"Data Summary"}),f.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4 text-sm",children:[f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Storage Keys"}),f.jsx("p",{className:"mt-1 text-lg",children:"5"})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Last Updated"}),f.jsx("p",{className:"mt-1",children:new Date().toLocaleDateString()})]}),f.jsxs("div",{children:[f.jsx("p",{className:"text-muted-foreground",children:"Storage Type"}),f.jsx("p",{className:"mt-1",children:"LocalStorage"})]})]})]})]})})]})]})}function JSe({className:e,...t}){return f.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:f.jsx("table",{"data-slot":"table",className:or("w-full caption-bottom text-sm",e),...t})})}function QSe({className:e,...t}){return f.jsx("thead",{"data-slot":"table-header",className:or("[&_tr]:border-b",e),...t})}function eTe({className:e,...t}){return f.jsx("tbody",{"data-slot":"table-body",className:or("[&_tr:last-child]:border-0",e),...t})}function IC({className:e,...t}){return f.jsx("tr",{"data-slot":"table-row",className:or("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",e),...t})}function Ug({className:e,...t}){return f.jsx("th",{"data-slot":"table-head",className:or("text-foreground h-10 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}function bm({className:e,...t}){return f.jsx("td",{"data-slot":"table-cell",className:or("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",e),...t})}const tTe=[{id:"LOG-001",timestamp:"2026-02-11 13:45:22",user:"Commander",action:"Mission Started",details:'Initiated mission "Port Surveillance - Kupang"',category:"Mission",status:"success"},{id:"LOG-002",timestamp:"2026-02-11 13:40:15",user:"System",action:"Drone Diagnostics",details:"Pre-flight check completed for Pyrhos X V1",category:"System",status:"success"},{id:"LOG-003",timestamp:"2026-02-11 13:35:00",user:"Operator 01",action:"Settings Update",details:"Updated map layer preferences",category:"Settings",status:"info"},{id:"LOG-004",timestamp:"2026-02-11 13:20:45",user:"System",action:"Connection Warning",details:"High latency detected on link 2",category:"Network",status:"warning"},{id:"LOG-005",timestamp:"2026-02-11 13:15:10",user:"Commander",action:"User Login",details:"Successful login from IP 192.168.1.5",category:"Security",status:"success"},{id:"LOG-006",timestamp:"2026-02-11 12:55:33",user:"Operator 02",action:"Manual Override",details:"Took manual control of UAV-002",category:"Mission",status:"warning"},{id:"LOG-007",timestamp:"2026-02-11 12:40:00",user:"System",action:"Data Sync",details:"Telemetry data synced to cloud storage",category:"System",status:"success"},{id:"LOG-008",timestamp:"2026-02-11 12:10:15",user:"System",action:"AI Detection",details:"Vessel hull number identified with 92% confidence",category:"AI Analysis",status:"info"},{id:"LOG-009",timestamp:"2026-02-11 11:50:50",user:"Admin",action:"Firmware Update",details:"Failed to update firmware for Ground Station 1",category:"Maintenance",status:"error"},{id:"LOG-010",timestamp:"2026-02-11 11:30:22",user:"Commander",action:"Geofence Created",details:"New restricted zone added: Sector 4",category:"Mission",status:"success"}],nTe=e=>{switch(e){case"success":return"text-green-500 bg-green-500/10 border-green-500/20";case"warning":return"text-yellow-500 bg-yellow-500/10 border-yellow-500/20";case"error":return"text-red-500 bg-red-500/10 border-red-500/20";case"info":return"text-blue-500 bg-blue-500/10 border-blue-500/20";default:return"text-gray-500 bg-gray-500/10 border-gray-500/20"}},rTe=e=>{switch(e){case"Mission":return f.jsx(_u,{className:"w-4 h-4"});case"System":return f.jsx(sM,{className:"w-4 h-4"});case"Security":return f.jsx(AZ,{className:"w-4 h-4"});case"AI Analysis":return f.jsx(LC,{className:"w-4 h-4"});case"Network":return f.jsx(_u,{className:"w-4 h-4"});default:return f.jsx(LC,{className:"w-4 h-4"})}};function iTe(){const[e,t]=W.useState(""),[n,r]=W.useState("all"),[s,h]=W.useState("all"),d=tTe.filter(o=>{const _=o.action.toLowerCase().includes(e.toLowerCase())||o.details.toLowerCase().includes(e.toLowerCase())||o.user.toLowerCase().includes(e.toLowerCase()),w=n==="all"||o.category===n,A=s==="all"||o.status===s;return _&&w&&A});return f.jsxs("div",{className:"p-6 space-y-6 bg-background min-h-screen",children:[f.jsxs("div",{className:"flex flex-col md:flex-row md:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsx("h1",{className:"text-2xl font-bold bg-clip-text text-transparent bg-gradient-to-r from-[#21A68D] to-[#2DD4BF]",children:"Activity Log"}),f.jsx("p",{className:"text-muted-foreground mt-1",children:"System events, user actions, and audit trails"})]}),f.jsx("div",{className:"flex items-center gap-2",children:f.jsxs(en,{variant:"outline",className:"border-[#21A68D]/30 hover:bg-[#21A68D]/10",children:[f.jsx(vp,{className:"w-4 h-4 mr-2"}),"Export CSV"]})})]}),f.jsx(nn,{className:"border-[#21A68D]/20 bg-card/50 backdrop-blur-sm",children:f.jsx(hh,{className:"p-4",children:f.jsxs("div",{className:"flex flex-col md:flex-row gap-4",children:[f.jsxs("div",{className:"relative flex-1",children:[f.jsx(BC,{className:"absolute left-2.5 top-2.5 h-4 w-4 text-muted-foreground"}),f.jsx(xa,{placeholder:"Search logs...",className:"pl-9 bg-background/50 border-input",value:e,onChange:o=>t(o.target.value)})]}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Gm,{value:n,onValueChange:r,children:[f.jsx(Hm,{className:"w-[180px] bg-background/50",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(YH,{className:"w-4 h-4 text-muted-foreground"}),f.jsx(Wm,{placeholder:"Category"})]})}),f.jsxs(Zm,{children:[f.jsx(Ir,{value:"all",children:"All Categories"}),f.jsx(Ir,{value:"Mission",children:"Mission"}),f.jsx(Ir,{value:"System",children:"System"}),f.jsx(Ir,{value:"Security",children:"Security"}),f.jsx(Ir,{value:"Settings",children:"Settings"}),f.jsx(Ir,{value:"AI Analysis",children:"AI Analysis"}),f.jsx(Ir,{value:"Maintenance",children:"Maintenance"})]})]}),f.jsxs(Gm,{value:s,onValueChange:h,children:[f.jsx(Hm,{className:"w-[150px] bg-background/50",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(_b,{className:"w-4 h-4 text-muted-foreground"}),f.jsx(Wm,{placeholder:"Status"})]})}),f.jsxs(Zm,{children:[f.jsx(Ir,{value:"all",children:"All Status"}),f.jsx(Ir,{value:"success",children:"Success"}),f.jsx(Ir,{value:"warning",children:"Warning"}),f.jsx(Ir,{value:"error",children:"Error"}),f.jsx(Ir,{value:"info",children:"Info"})]})]})]})]})})}),f.jsx(nn,{className:"border-[#21A68D]/20 bg-card/50 backdrop-blur-sm overflow-hidden",children:f.jsx("div",{className:"overflow-x-auto",children:f.jsxs(JSe,{children:[f.jsx(QSe,{className:"bg-[#21A68D]/10",children:f.jsxs(IC,{className:"hover:bg-transparent border-[#21A68D]/20",children:[f.jsx(Ug,{className:"w-[180px] font-semibold text-[#21A68D]",children:"Timestamp"}),f.jsx(Ug,{className:"font-semibold text-[#21A68D]",children:"Action"}),f.jsx(Ug,{className:"font-semibold text-[#21A68D]",children:"User"}),f.jsx(Ug,{className:"font-semibold text-[#21A68D]",children:"Category"}),f.jsx(Ug,{className:"font-semibold text-[#21A68D]",children:"Details"}),f.jsx(Ug,{className:"text-right font-semibold text-[#21A68D]",children:"Status"})]})}),f.jsx(eTe,{children:d.length>0?d.map(o=>f.jsxs(IC,{className:"hover:bg-[#21A68D]/5 border-border/50",children:[f.jsx(bm,{className:"font-mono text-xs text-muted-foreground",children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(sf,{className:"w-3 h-3"}),o.timestamp]})}),f.jsx(bm,{className:"font-medium",children:o.action}),f.jsx(bm,{children:f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-6 h-6 rounded-full bg-secondary flex items-center justify-center text-[10px] font-bold",children:o.user.charAt(0)}),f.jsx("span",{className:"text-sm",children:o.user})]})}),f.jsx(bm,{children:f.jsxs(Nn,{variant:"outline",className:"gap-1 font-normal bg-background/50",children:[rTe(o.category),o.category]})}),f.jsx(bm,{className:"text-muted-foreground text-sm max-w-md truncate",children:o.details}),f.jsx(bm,{className:"text-right",children:f.jsx(Nn,{variant:"outline",className:`capitalize ${nTe(o.status)}`,children:o.status})})]},o.id)):f.jsx(IC,{children:f.jsx(bm,{colSpan:6,className:"h-24 text-center",children:f.jsxs("div",{className:"flex flex-col items-center justify-center text-muted-foreground gap-2",children:[f.jsx(BC,{className:"w-8 h-8 opacity-20"}),f.jsx("p",{children:"No logs found matching your criteria"})]})})})})]})})})]})}const vB=[{id:1,location:"Kupang",region:"NTT Region",temp:"32C",wind:"21.6 kn N",windStatus:"Angin Sangat Kencang",windLevel:"critical",waves:"3m",wavesStatus:"Berbahaya",wavesLevel:"critical",visibility:"6.6 km",humidity:"86%",weatherType:"Badai",icon:MH,alert:"Peringatan badai - Hindari operasi laut",updateTime:"14.53.27"},{id:2,location:"Flores Timur",region:"NTT Region",temp:"28.2C",wind:"21.3 kn NE",windStatus:"Angin Sangat Kencang",windLevel:"critical",waves:"1.3m",wavesStatus:"Sedikit Bergelombang",wavesLevel:"info",visibility:"11.6 km",humidity:"67%",weatherType:"Hujan",icon:ex,alert:"Angin kencang - Waspada",updateTime:"14.53.27"},{id:3,location:"Sumba Timur",region:"NTT Region",temp:"29.6C",wind:"22.9 kn SE",windStatus:"Angin Sangat Kencang",windLevel:"critical",waves:"1.6m",wavesStatus:"Bergelombang",wavesLevel:"warning",visibility:"6.3 km",humidity:"73%",weatherType:"Hujan",icon:ex,alert:"Angin kencang - Waspada",updateTime:"14.53.27"},{id:4,location:"Atapupu",region:"NTT Region",temp:"29.1C",wind:"14.1 kn S",windStatus:"Angin Sedang",windLevel:"info",waves:"2.2m",wavesStatus:"Berbahaya",wavesLevel:"critical",visibility:"11.9 km",humidity:"83%",weatherType:"Hujan",icon:ex,updateTime:"14.53.27"},{id:5,location:"Maumere",region:"NTT Region",temp:"29.5C",wind:"11.1 kn SE",windStatus:"Angin Sedang",windLevel:"info",waves:"2.8m",wavesStatus:"Berbahaya",wavesLevel:"critical",visibility:"9.6 km",humidity:"67%",weatherType:"Hujan",icon:ex,updateTime:"14.53.27"}];function aTe(){const t=vB.reduce((r,s)=>{const h=d=>{let o=0;return d.weatherType==="Badai"&&(o-=100),d.windLevel==="critical"&&(o-=50),d.wavesLevel==="critical"&&(o-=30),parseFloat(d.visibility)<7&&(o-=20),o};return h(s)>h(r)?s:r});return f.jsxs("div",{className:"p-4 md:p-8 space-y-8 bg-[#0a0e1a] min-h-full",children:[f.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(ex,{className:"w-8 h-8 text-[#2DD4BF]"}),f.jsx("h1",{className:"text-3xl font-extrabold tracking-tight text-white",children:"Weather Information"})]}),f.jsx("p",{className:"text-white/90 md:text-lg font-medium",children:"Real-time maritime weather conditions for PSDKP Kupang waters"})]}),f.jsxs("div",{className:"flex flex-col items-end gap-2",children:[f.jsxs("div",{className:"flex items-center gap-4 text-xs md:text-sm text-muted-foreground",children:[f.jsx("span",{children:"Source: BMKG / OpenWeather Simulation"}),f.jsx("span",{children:"Updated: 14.53.27"})]}),f.jsxs(en,{variant:"outline",size:"sm",className:"bg-card/30 border-border hover:bg-[#21A68D]/10",children:[f.jsx(_Z,{className:"w-4 h-4 mr-2"}),"Refresh Data"]})]})]}),f.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 xl:grid-cols-5 gap-4",children:vB.map(n=>f.jsx(nn,{className:`bg-[#0f172a]/80 backdrop-blur-md border border-border/50 overflow-hidden flex flex-col h-full hover:border-[#21A68D]/40 transition-all duration-300 ${n.location==="Kupang"?"ring-1 ring-red-500/20":""}`,children:f.jsxs(hh,{className:"p-5 flex-1 flex flex-col",children:[f.jsxs("div",{className:"flex justify-between items-start mb-6",children:[f.jsxs("div",{children:[f.jsx("h3",{className:"text-xl font-bold text-white",children:n.location}),f.jsxs("div",{className:"flex items-center gap-1 text-[10px] text-muted-foreground uppercase tracking-widest mt-0.5",children:[f.jsx(q1,{className:"w-2.5 h-2.5"}),n.region]}),f.jsx(Nn,{variant:"secondary",className:`mt-2 ${n.weatherType==="Badai"?"bg-red-500/20 text-red-500 border-red-500/30":"bg-blue-500/20 text-blue-400 border-blue-500/30"}`,children:n.weatherType})]}),f.jsx(n.icon,{className:`w-10 h-10 ${n.weatherType==="Badai"?"text-purple-500":"text-blue-400"}`})]}),f.jsxs("div",{className:"space-y-4 flex-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(IZ,{className:"w-4 h-4"}),f.jsx("span",{className:"text-xs font-semibold uppercase",children:"Suhu"})]}),f.jsx("span",{className:"text-lg font-bold text-[#2DD4BF]",children:n.temp})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(lM,{className:"w-4 h-4"}),f.jsx("span",{className:"text-xs font-semibold uppercase",children:"Angin"})]}),f.jsx("span",{className:"font-bold text-white",children:n.wind})]}),f.jsx("p",{className:`text-[10px] font-bold text-right ${n.windLevel==="critical"?"text-red-500":"text-blue-400"}`,children:n.windStatus})]}),f.jsxs("div",{className:"space-y-1",children:[f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx($C,{className:"w-4 h-4"}),f.jsx("span",{className:"text-xs font-semibold uppercase",children:"Gelombang"})]}),f.jsx("span",{className:"font-bold text-white",children:n.waves})]}),f.jsx("p",{className:`text-[10px] font-bold text-right ${n.wavesLevel==="critical"?"text-red-500":n.wavesLevel==="warning"?"text-yellow-500":"text-cyan-400"}`,children:n.wavesStatus})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(wu,{className:"w-4 h-4"}),f.jsx("span",{className:"text-xs font-semibold uppercase text-nowrap",children:"Jarak Pandang"})]}),f.jsx("span",{className:`font-bold ${parseFloat(n.visibility)<7?"text-yellow-500":"text-white"}`,children:n.visibility})]}),f.jsxs("div",{className:"flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2 text-muted-foreground",children:[f.jsx(BH,{className:"w-4 h-4"}),f.jsx("span",{className:"text-xs font-semibold uppercase",children:"Kelembaban"})]}),f.jsx("span",{className:"font-bold text-white",children:n.humidity})]})]}),n.alert&&f.jsx("div",{className:"mt-6 mb-2 p-2 rounded bg-red-500/10 border border-red-500/20",children:f.jsxs("div",{className:"flex items-start gap-2",children:[f.jsx(_b,{className:"w-3.5 h-3.5 text-red-500 mt-0.5"}),f.jsx("p",{className:"text-[10px] font-bold text-red-500",children:n.alert})]})}),f.jsxs("div",{className:"mt-auto pt-4 border-t border-border/30 text-[9px] text-muted-foreground text-right italic",children:["Update: ",n.updateTime]})]})},n.id))}),f.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6 pt-4",children:[f.jsx(nn,{className:"lg:col-span-2 bg-[#1e293b]/40 border-[#21A68D]/30 backdrop-blur-sm",children:f.jsxs(hh,{className:"p-6",children:[f.jsxs("div",{className:"flex items-center gap-3 mb-6",children:[f.jsx("div",{className:"w-12 h-12 rounded-full bg-[#21A68D]/20 flex items-center justify-center",children:f.jsx(nb,{className:"w-6 h-6 text-[#21A68D]"})}),f.jsxs("div",{children:[f.jsx("h2",{className:"text-xl font-bold text-white",children:"Flight Operational Recommendation"}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"AI-driven safety analysis for regional drone operations"})]})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-sm font-bold text-[#21A68D] uppercase tracking-wider",children:"Best Recommended Area"}),f.jsxs("div",{className:"p-4 rounded-xl bg-[#21A68D]/10 border border-[#21A68D]/20",children:[f.jsxs("div",{className:"flex items-center justify-between mb-2",children:[f.jsx("span",{className:"text-2xl font-bold text-white",children:t.location}),f.jsx(Nn,{className:"bg-[#21A68D] hover:bg-[#21A68D] text-white border-none px-3 py-1",children:"SUITABLE"})]}),f.jsx("p",{className:"text-sm text-muted-foreground",children:"This area has the most stable conditions for drone deployment relative to other locations in NTT region."})]}),f.jsxs("div",{className:"space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(nb,{className:"w-4 h-4 text-[#21A68D]"}),f.jsxs("span",{className:"text-white",children:["Moderate Wind Speed (",t.wind,")"]})]}),f.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[f.jsx(nb,{className:"w-4 h-4 text-[#21A68D]"}),f.jsxs("span",{className:"text-white",children:["Fair Visibility (",t.visibility,")"]})]})]})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx("h3",{className:"text-sm font-bold text-red-500 uppercase tracking-wider",children:"High Risk Zones"}),f.jsxs("div",{className:"space-y-3",children:[f.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-red-500/5 border border-red-500/10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(CB,{className:"w-5 h-5 text-red-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-white",children:"Kupang"}),f.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Storm & 3m Dangerous Waves"})]})]}),f.jsx(Nn,{variant:"outline",className:"border-red-500 text-red-500 text-[10px]",children:"NO FLY"})]}),f.jsxs("div",{className:"flex items-center justify-between p-3 rounded-lg bg-orange-500/5 border border-orange-500/10",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(of,{className:"w-5 h-5 text-orange-500"}),f.jsxs("div",{children:[f.jsx("p",{className:"text-sm font-bold text-white",children:"Maumere"}),f.jsx("p",{className:"text-[10px] text-muted-foreground",children:"Dangerous 2.8m Swell"})]})]}),f.jsx(Nn,{variant:"outline",className:"border-orange-500 text-orange-500 text-[10px]",children:"CAUTION"})]})]})]})]})]})}),f.jsx(nn,{className:"bg-[#1e293b]/40 border-border/50 backdrop-blur-sm",children:f.jsxs(hh,{className:"p-6",children:[f.jsxs("h3",{className:"flex items-center gap-2 text-sm font-bold text-white uppercase tracking-wider mb-6",children:[f.jsx(oM,{className:"w-4 h-4 text-primary"}),"Pilot General Advice"]}),f.jsxs("ul",{className:"space-y-4",children:[f.jsxs("li",{className:"flex gap-3",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.jsx("strong",{className:"text-white",children:"Monitor Battery:"})," Cold rain in Atapupu/Maumere may reduce battery efficiency by up to 15%."]})]}),f.jsxs("li",{className:"flex gap-3",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.jsx("strong",{className:"text-white",children:"Signal Stability:"})," High moisture and lightning near Kupang will cause signal degradation. Avoid long-range BVLOS."]})]}),f.jsxs("li",{className:"flex gap-3",children:[f.jsx("div",{className:"w-1.5 h-1.5 rounded-full bg-primary mt-2 flex-shrink-0"}),f.jsxs("p",{className:"text-sm text-muted-foreground",children:[f.jsx("strong",{className:"text-white",children:"Landing Risk:"})," 3m waves in Kupang make water recovery impossible. Ensure payload is waterproofed."]})]})]})]})})]})]})}const oTe=()=>zn.GridLayer.extend({createTile:function(e){const t=document.createElement("canvas"),n=t.getContext("2d"),r=this.getTileSize();if(t.width=r.x,t.height=r.y,n){n.strokeStyle="#21A68D",n.lineWidth=.5,n.globalAlpha=.15;for(let s=0;s<=r.x;s+=r.x/8)n.beginPath(),n.moveTo(s,0),n.lineTo(s,r.y),n.stroke();for(let s=0;s<=r.y;s+=r.y/8)n.beginPath(),n.moveTo(0,s),n.lineTo(r.x,s),n.stroke();n.strokeStyle="#21A68D",n.lineWidth=1,n.globalAlpha=.25,n.strokeRect(0,0,r.x,r.y)}return t}});function IG({center:e=[-6.5625,106.8942],zoom:t=13,height:n="100%",drones:r=[],aisMarkers:s=[],adsbMarkers:h=[],encMarkers:d=[],anomalies:o=[],geofences:_=[],showENC:w=!1,showAIS:A=!1,showADSB:P=!1,showWeather:N=!1,weatherMarkers:z=[],className:q="",onDroneClick:$,mapView:O="indonesia",onMapViewChange:X}){const K=W.useRef(null),te=W.useRef(null),ne=W.useRef([]),H=W.useRef([]),ae=W.useRef(null),de=W.useRef(null),ye=W.useRef(!1),Ae=W.useRef(O);return W.useEffect(()=>{if(te.current){if(!K.current){K.current=zn.map(te.current,{zoomControl:!1,attributionControl:!0}).setView(e,t),K.current.on("movestart",Ee=>{}),K.current.on("dragstart zoomstart",()=>{ye.current=!0}),zn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',maxZoom:20,className:"map-tiles"}).addTo(K.current);const _e=oTe();new _e({opacity:.3,zIndex:400}).addTo(K.current),zn.control.zoom({position:"bottomright"}).addTo(K.current)}return()=>{K.current&&(K.current.remove(),K.current=null)}}},[]),W.useEffect(()=>{if(K.current){if(O!==Ae.current){ye.current=!1,Ae.current=O,K.current.setView(e,t,{animate:!0,duration:1.5});return}ye.current||K.current.setView(e,t,{animate:!0,duration:1})}},[e,t,O]),W.useEffect(()=>{K.current&&(w?ae.current||(ae.current=zn.tileLayer("https://tiles.openseamap.org/seamark/{z}/{x}/{y}.png",{opacity:.8,zIndex:500}).addTo(K.current)):ae.current&&(K.current.removeLayer(ae.current),ae.current=null))},[w]),W.useEffect(()=>{if(K.current)if(N){if(!de.current&&(de.current=zn.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{opacity:.15,className:"weather-overlay-layer",zIndex:450}).addTo(K.current),!document.getElementById("weather-filter-style"))){const _e=document.createElement("style");_e.id="weather-filter-style",_e.innerHTML=`
            .weather-overlay-layer {
              filter: hue-rotate(180deg) saturate(2) brightness(0.8) !important;
            }
          `,document.head.appendChild(_e)}}else de.current&&(K.current.removeLayer(de.current),de.current=null)},[N]),W.useEffect(()=>{K.current&&(ne.current.forEach(_e=>_e.remove()),ne.current=[],H.current.forEach(_e=>_e.remove()),H.current=[],r.forEach(_e=>{const fe=zn.divIcon({className:"custom-drone-marker",html:`
            <div class="drone-marker-container" style="position: relative; width: 48px; height: 48px; display: flex; align-items: center; justify-content: center;">
              <div class="drone-pulse" style="position: absolute; width: 44px; height: 44px; border-radius: 50%; background: rgba(33, 166, 141, 0.15); animation: pulse-ring 2s infinite;"></div>
              <svg width="40" height="40" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="position: relative; z-index: 10;">
                <!-- Arms -->
                <path d="M6 6l12 12M18 6L6 18" stroke="#1e293b" stroke-width="3.5" stroke-linecap="round"/>
                <!-- Rotors/Motors -->
                <circle cx="5" cy="5" r="3.2" fill="#1e293b" stroke="white" stroke-width="1.2"/>
                <circle cx="19" cy="5" r="3.2" fill="#1e293b" stroke="white" stroke-width="1.2"/>
                <circle cx="5" cy="19" r="3.2" fill="#1e293b" stroke="white" stroke-width="1.2"/>
                <circle cx="19" cy="19" r="3.2" fill="#1e293b" stroke="white" stroke-width="1.2"/>
                <!-- Body -->
                <rect x="9" y="9" width="6" height="6" rx="1.5" fill="#1e293b" stroke="white" stroke-width="1.5"/>
                <!-- Camera/Sensor -->
                <circle cx="12" cy="12" r="1.2" fill="#22c55e"/>
                <!-- Heading Indicator -->
                <path d="M12 7l1.5 2h-3L12 7z" fill="#21A68D"/>
              </svg>
            </div>
        `,iconSize:[44,44],iconAnchor:[22,22]}),Ee=zn.marker(_e.position,{icon:fe}).addTo(K.current).bindPopup(`<b>${_e.name}</b>`);ne.current.push(Ee)}),A&&s.forEach(_e=>{let fe="#9ca3af";const Ee=_e.type.toLowerCase();Ee.includes("cargo")||Ee.includes("container")||Ee.includes("bulk")?fe="#22c55e":Ee.includes("tanker")?fe="#ef4444":Ee.includes("passenger")||Ee.includes("ferry")?fe="#3b82f6":Ee.includes("fishing")?fe="#f97316":Ee.includes("tug")||Ee.includes("pilot")?fe="#06b6d4":Ee.includes("yacht")||Ee.includes("sailing")?fe="#d946ef":(Ee.includes("military")||Ee.includes("law"))&&(fe="#111827");const Be=_e.heading||_e.course||0,De=zn.divIcon({className:"custom-ais-marker",html:`
            <div style="position: relative; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="transform: rotate(${Be}deg); filter: drop-shadow(0 1px 2px rgba(0,0,0,0.3));">
                <path d="M12 2L4 22L12 18L20 22L12 2Z" fill="${fe}" stroke="white" stroke-width="1.5" stroke-linejoin="round"/>
              </svg>
            </div>
          `,iconSize:[24,24],iconAnchor:[12,12]}),Je=zn.marker(_e.position,{icon:De}).addTo(K.current).bindPopup(`
          <div style="font-family: inherit; padding: 4px;">
            <div style="font-weight: 600; color: ${fe}; margin-bottom: 4px; display: flex; align-items: center; gap: 4px;">
              <span style="display:inline-block; width:8px; height:8px; background:${fe}; border-radius:50%;"></span>
              ${_e.name}
            </div>
            <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 12px; font-size: 11px; color: #4b5563;">
              <span>Type:</span> <span style="font-weight: 500;">${_e.type}</span>
              <span>Speed:</span> <span style="font-weight: 500;">${_e.speed} kn</span>
              <span>Heading:</span> <span style="font-weight: 500;">${Be}</span>
              <span>Status:</span> <span style="font-weight: 500;">${_e.status||"N/A"}</span>
            </div>
          </div>
        `);ne.current.push(Je)}),P&&h.forEach(_e=>{const fe="#facc15",Ee=_e.heading||0,Be=zn.divIcon({className:"custom-adsb-marker",html:`
            <div style="position: relative; width: 32px; height: 32px; display: flex; align-items: center; justify-content: center;">
              <svg width="28" height="28" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" style="transform: rotate(${Ee}deg); filter: drop-shadow(0 1px 2px rgba(0,0,0,0.4));">
                <path d="M21 16v-2l-8-5V3.5c0-.83-.67-1.5-1.5-1.5S10 2.67 10 3.5V9l-8 5v2l8-2.5V19l-2 1.5V22l3.5-1 3.5 1v-1.5L13 19v-5.5l8 2.5z" fill="${fe}" stroke="#1e293b" stroke-width="1" stroke-linejoin="round"/>
              </svg>
            </div>
          `,iconSize:[32,32],iconAnchor:[16,16]}),De=zn.marker(_e.position,{icon:Be}).addTo(K.current).bindPopup(`
          <div style="font-family: inherit; padding: 4px;">
            <div style="font-weight: 600; color: #b45309; margin-bottom: 4px; display: flex; align-items: center; gap: 4px;">
              <span style="font-size: 14px;"></span>
              ${_e.callsign||_e.name}
            </div>
            <div style="display: grid; grid-template-columns: auto 1fr; gap: 4px 12px; font-size: 11px; color: #4b5563;">
              <span>Flight:</span> <span style="font-weight: 500;">${_e.name}</span>
              <span>Altitude:</span> <span style="font-weight: 500;">${_e.altitude.toLocaleString()} ft</span>
              <span>Speed:</span> <span style="font-weight: 500;">${_e.speed} kn</span>
              <span>Heading:</span> <span style="font-weight: 500;">${Ee}</span>
            </div>
          </div>
        `);ne.current.push(De)}),w&&d.forEach(_e=>{const Ee={red:"#ef4444",green:"#22c55e",yellow:"#fde047",white:"#ffffff",blue:"#3b82f6",magenta:"#d946ef"}[_e.color]||_e.color;let Be="",De="";_e.type==="depth"?Be=`<text x="12" y="16" text-anchor="middle" fill="#64748b" font-size="12" font-weight="600" style="font-family: monospace;">${_e.name}</text>`:_e.type==="rock"?(Be=`
            <path d="M12 4v16M4 12h16M6.5 6.5l11 11M17.5 6.5l-11 11" stroke="#1e293b" stroke-width="1.5"/>
            <circle cx="12" cy="12" r="2" fill="#1e293b"/>
          `,De='<div style="position: absolute; top: 12px; left: 16px; font-size: 9px; color: #1e293b; font-weight: 500; white-space: nowrap;">rock</div>'):_e.type==="buoy"?(Be=`
            <path d="M12 4L17 18H7L12 4Z" fill="${Ee}" fill-opacity="0.4" stroke="${Ee}" stroke-width="2"/>
            <path d="M12 4v14" stroke="${Ee}" stroke-width="1" stroke-dasharray="2,1"/>
            <circle cx="12" cy="18" r="2" fill="${Ee}"/>
          `,_e.lightCharacter&&(Be+='<path d="M12 4c4 0 7 3 7 7" stroke="#d946ef" stroke-width="2" fill="none" opacity="0.6"/>')):_e.type==="beacon"?Be=`
            <rect x="10" y="6" width="4" height="14" fill="#1e293b" fill-opacity="0.3" stroke="#1e293b" stroke-width="1.5"/>
            <path d="M8 20h8" stroke="#1e293b" stroke-width="2"/>
            <rect x="9" y="4" width="6" height="2" fill="#1e293b"/>
          `:_e.type==="special"?Be=`
            <circle cx="12" cy="12" r="8" stroke="#d946ef" stroke-width="2" fill="none" stroke-dasharray="3,2"/>
            <path d="M8 8l8 8M16 8l-8 8" stroke="#d946ef" stroke-width="2"/>
          `:Be=`<circle cx="12" cy="12" r="5" fill="${Ee}" stroke="white" stroke-width="1.5"/>`;const Je=zn.divIcon({className:"custom-enc-marker",html:`
            <div style="position: relative; width: 24px; height: 24px; display: flex; align-items: center; justify-content: center;">
              <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                ${Be}
              </svg>
              ${De}
              ${_e.lightCharacter?`<div style="position: absolute; top: -14px; left: 14px; font-size: 8px; color: #d946ef; font-weight: bold; white-space: nowrap;">${_e.lightCharacter}</div>`:""}
              ${_e.type==="buoy"||_e.type==="beacon"?`<div style="position: absolute; bottom: -12px; left: 50%; transform: translateX(-50%); font-size: 8px; color: #64748b; white-space: nowrap;">${_e.name}</div>`:""}
            </div>
          `,iconSize:[24,24],iconAnchor:[12,12]}),Ve=zn.marker(_e.position,{icon:Je}).addTo(K.current).bindPopup(`
          <div style="font-family: inherit; p: 4px;">
            <div style="font-weight: 600; color: #334155; margin-bottom: 2px;">${_e.name}</div>
            <div style="font-size: 11px; color: #64748b;">${_e.type.toUpperCase()} - ${_e.description}</div>
            ${_e.lightCharacter?`<div style="font-size: 10px; color: #d946ef; font-weight: 600;">Light: ${_e.lightCharacter}</div>`:""}
          </div>
        `);ne.current.push(Ve)}),o.forEach(_e=>{const fe=zn.divIcon({className:"custom-anomaly-marker",html:'<div style="width:24px; height:24px; background:#ef4444; border:2px solid white; border-radius:50%; display:flex; align-items:center; justify-content:center; color:white; font-weight:bold; font-size:14px;">!</div>',iconSize:[24,24],iconAnchor:[12,12]}),Ee=zn.marker(_e.position,{icon:fe}).addTo(K.current).bindPopup("<b>Anomaly</b>");ne.current.push(Ee)}),_.forEach(_e=>{const fe=zn.rectangle(_e.bounds,{color:_e.color,weight:2,fillOpacity:.05,dashArray:_e.dashed?"8, 8":void 0}).addTo(K.current);H.current.push(fe)}),N&&z&&z.forEach(_e=>{let fe="";_e.type==="rain"?fe=`
            <path d="M18 13.5v.5M15 15.5v.5M12 17.5v.5M9 15.5v.5M6 13.5v.5" stroke="#3b82f6" stroke-width="2" stroke-linecap="round"/>
            <path d="M20 16.5A5.5 5.5 0 0 0 16.22 7a7 7 0 1 0-11.72 6.5" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          `:_e.type==="wind"?fe=`
            <path d="M17.7 7.7A2.5 2.5 0 1 1 15.8 12H3M21 15.3A2.5 2.5 0 1 1 18.8 19H5M12 5h1M8 5h1" stroke="#21A68D" stroke-width="2" stroke-linecap="round"/>
          `:_e.type==="cloud"?fe=`
            <path d="M20 16.2A4.5 4.5 0 0 0 17.5 8a7 7 0 1 0-11.23 7.6" stroke="#64748b" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          `:_e.type==="wave"?fe=`
            <path d="M2 13.5c4-5 6-5 10 0s6 5 10 0M2 17.5c4-5 6-5 10 0s6 5 10 0" stroke="#0ea5e9" stroke-width="2" stroke-linecap="round"/>
          `:_e.type==="storm"&&(fe=`
            <path d="M11 13l-4 7h6l-4 7M20 16.5A5.5 5.5 0 0 0 16.22 7a7 7 0 1 0-11.72 6.5" stroke="#fde047" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          `);const Ee=zn.divIcon({className:"custom-weather-marker",html:`
            <div style="position: relative; width: 40px; height: 40px; display: flex; flex-direction: column; align-items: center; justify-content: center;">
              <div style="background: white; border-radius: 50%; padding: 4px; box-shadow: 0 4px 6px -1px rgb(0 0 0 / 0.1); border: 1px solid #e2e8f0;">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                  ${fe}
                </svg>
              </div>
              <div style="position: absolute; bottom: -18px; background: rgba(15, 76, 117, 0.9); color: white; padding: 1px 6px; border-radius: 10px; font-size: 10px; font-weight: bold; white-space: nowrap; border: 1px solid rgba(33, 166, 141, 0.5);">
                ${_e.temp}C | ${_e.value}${_e.unit}
              </div>
            </div>
          `,iconSize:[40,40],iconAnchor:[20,20]}),Be=zn.marker(_e.position,{icon:Ee}).addTo(K.current).bindPopup(`
          <div style="font-family: inherit; p: 4px;">
            <div style="font-weight: 600; color: #1e293b; margin-bottom: 2px;">Weather: ${_e.description}</div>
            <div style="display: grid; grid-template-cols: 1fr 1fr; gap: 8px; font-size: 11px;">
              <div><span style="color: #64748b;">Temp:</span> ${_e.temp}C</div>
              <div><span style="color: #64748b;">Intensity:</span> ${_e.value} ${_e.unit}</div>
            </div>
          </div>
        `);ne.current.push(Be)}))},[r,s,h,d,o,_,A,P,w,N,z]),f.jsxs(f.Fragment,{children:[f.jsx("div",{ref:te,className:q,style:{height:n,width:"100%"}}),f.jsx("style",{children:`
        .leaflet-container { background: #1a1f2e !important; }
        .map-tiles { filter: brightness(0.6) contrast(1.2) saturate(0.8); }
        .leaflet-popup-content-wrapper { background: white; color: #1a1f2e; border-radius: 8px; border: 1px solid rgba(0,0,0,0.1); }
        .leaflet-popup-tip { background: white; }
        
        @keyframes pulse-ring {
          0% { transform: scale(0.6); opacity: 0.8; }
          100% { transform: scale(1.2); opacity: 0; }
        }
      `})]})}const sTe=()=>{const e=[{id:"adsb-focus",name:"MAS794",callsign:"MAS794",position:[3.5952,98.6722],altitude:34e3,speed:450,heading:145},{id:"f2",name:"GA234",callsign:"GA234",position:[-6.1256,106.6558],altitude:28e3,speed:420,heading:270},{id:"f3",name:"QZ551",callsign:"QZ551",position:[-7.3796,112.7871],altitude:32e3,speed:440,heading:45},{id:"f4",name:"ID6541",callsign:"ID6541",position:[-8.7481,115.1673],altitude:31e3,speed:430,heading:180},{id:"f5",name:"SJ210",callsign:"SJ210",position:[-5.0616,119.5539],altitude:35e3,speed:460,heading:90}],t=[{lat:[0,5],lng:[95,105]},{lat:[-8,-6],lng:[105,115]},{lat:[-3,3],lng:[110,118]},{lat:[-5,1],lng:[119,125]},{lat:[-9,-7],lng:[115,130]},{lat:[-5,2],lng:[130,140]}];for(let n=0;n<80;n++){const r=t[Math.floor(Math.random()*t.length)],s=r.lat[0]+Math.random()*(r.lat[1]-r.lat[0]),h=r.lng[0]+Math.random()*(r.lng[1]-r.lng[0]);e.push({id:`mock-${n}`,name:`FL${100+n}`,callsign:`FL${100+n}`,position:[s,h],altitude:2e4+Math.random()*2e4,speed:350+Math.random()*200,heading:Math.random()*360})}return e};function lTe(){const[e]=W.useState(sTe()),t=W.useMemo(()=>({count:e.length,avgAlt:Math.round(e.reduce((n,r)=>n+r.altitude,0)/e.length),coverage:"Full Regional SE-Asia"}),[e]);return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0e1a]",children:[f.jsxs("div",{className:"p-4 md:p-6 border-b border-border/20 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(yd,{className:"w-5 h-5 text-[#21A68D]"}),f.jsx("h1",{className:"text-xl font-bold text-white tracking-tight uppercase",children:"ADS-B Regional Real-time Stream"})]}),f.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:"Active Multi-Lateration (MLAT) monitoring across Indonesian Archipelago"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(Nn,{variant:"outline",className:"bg-[#21A68D]/10 text-[#21A68D] border-[#21A68D]/30 py-1",children:[f.jsx(_u,{className:"w-3 h-3 mr-1.5 animate-pulse"}),"RECEIVING DATA: 10.4 kb/s"]}),f.jsxs("div",{className:"text-[10px] text-muted-foreground text-right border-l border-border/30 pl-3",children:["Source: Ground Station ID-KPG-01",f.jsx("br",{}),"Lat: -10.17 | Lng: 123.58"]})]})]}),f.jsxs("div",{className:"flex-1 grid grid-cols-1 xl:grid-cols-4 gap-0 overflow-hidden",children:[f.jsxs("div",{className:"xl:col-span-3 relative bg-black",children:[f.jsx(IG,{center:[-2.5489,118.0149],zoom:5,adsbMarkers:e,showADSB:!0,className:"w-full h-full",mapView:"indonesia"}),f.jsx("div",{className:"absolute top-4 left-4 z-[500] pointer-events-none",children:f.jsxs("div",{className:"bg-black/80 backdrop-blur-md p-3 rounded-lg border border-border/30 shadow-2xl space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-[#facc15] rounded-sm"}),f.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-tighter",children:"Civilian Aircraft"})]}),f.jsxs("div",{className:"flex items-center gap-2 opacity-50",children:[f.jsx("div",{className:"w-3 h-3 bg-red-500 rounded-sm"}),f.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-tighter",children:"Restricted / MIL"})]})]})})]}),f.jsxs("div",{className:"hidden xl:flex flex-col border-l border-border/20 bg-[#0f172a]/40 backdrop-blur-xl",children:[f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("h2",{className:"text-xs font-bold text-[#21A68D] uppercase tracking-[0.2em] mb-4",children:"Regional Statistics"}),f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f.jsx(nn,{className:"bg-white/5 border-none shadow-none",children:f.jsxs(hh,{className:"p-4 flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-blue-500/10 flex items-center justify-center",children:f.jsx(uy,{className:"w-5 h-5 text-blue-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:"Total Flights"}),f.jsx("p",{className:"text-2xl font-bold text-white",children:t.count})]})]})}),f.jsx(nn,{className:"bg-white/5 border-none shadow-none",children:f.jsxs(hh,{className:"p-4 flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-orange-500/10 flex items-center justify-center",children:f.jsx(DB,{className:"w-5 h-5 text-orange-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:"Avg Altitude"}),f.jsxs("p",{className:"text-2xl font-bold text-white",children:[t.avgAlt.toLocaleString(),f.jsx("span",{className:"text-xs ml-1",children:"FT"})]})]})]})}),f.jsx(nn,{className:"bg-white/5 border-none shadow-none",children:f.jsxs(hh,{className:"p-4 flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-[#21A68D]/10 flex items-center justify-center",children:f.jsx(q1,{className:"w-5 h-5 text-[#21A68D]"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:"Coverage"}),f.jsx("p",{className:"text-sm font-bold text-white uppercase",children:t.coverage})]})]})})]}),f.jsxs("div",{className:"mt-8",children:[f.jsxs("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-4 flex items-center gap-2",children:[f.jsx(oM,{className:"w-3 h-3"}),"Information"]}),f.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Displaying real-time ADS-B data received through the MARIVIEW Ground Station Network. Data latency is approximately 800ms."})]})]}),f.jsxs("div",{className:"mt-auto p-4 border-t border-border/10 bg-black/20 text-[9px] text-muted-foreground flex justify-between",children:[f.jsx("span",{children:" MARIVIEW DATA GRP"}),f.jsx("span",{className:"text-[#21A68D]",children:"SYSTEM SECURE"})]})]})]})]})}const cTe=()=>{const e=[{id:"ais-1",name:"EVER GIVEN",type:"Cargo",position:[1.29027,103.851959],speed:12.5,heading:45,status:"Under Way"},{id:"ais-2",name:"TITANIC II",type:"Passenger",position:[-6.1751,106.865],speed:18.2,heading:270,status:"Under Way"},{id:"ais-3",name:"PACIFIC TANKER",type:"Tanker",position:[-7.2575,112.7521],speed:10.1,heading:180,status:"At Anchor"}],t=[{lat:[1,6],lng:[100,105]},{lat:[-6,-3],lng:[106,118]},{lat:[-10,-8],lng:[115,125]},{lat:[0,5],lng:[115,125]},{lat:[-5,2],lng:[130,140]},{lat:[-2,2],lng:[105,115]}],n=["Cargo","Tanker","Fishing","Tug","Passenger"];for(let r=0;r<120;r++){const s=t[Math.floor(Math.random()*t.length)],h=s.lat[0]+Math.random()*(s.lat[1]-s.lat[0]),d=s.lng[0]+Math.random()*(s.lng[1]-s.lng[0]);e.push({id:`ship-${r}`,name:`VESSEL ${1e3+r}`,type:n[Math.floor(Math.random()*n.length)],position:[h,d],speed:Math.random()*25,heading:Math.random()*360,status:Math.random()>.8?"At Anchor":"Under Way"})}return e};function uTe(){const[e]=W.useState(cTe()),t=W.useMemo(()=>({count:e.length,cargoCount:e.filter(n=>n.type==="Cargo").length,tankerCount:e.filter(n=>n.type==="Tanker").length,avgSpeed:(e.reduce((n,r)=>n+r.speed,0)/e.length).toFixed(1)}),[e]);return f.jsxs("div",{className:"flex flex-col h-full bg-[#0a0e1a]",children:[f.jsxs("div",{className:"p-4 md:p-6 border-b border-border/20 flex flex-col md:flex-row md:items-center justify-between gap-4",children:[f.jsxs("div",{children:[f.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[f.jsx(Au,{className:"w-5 h-5 text-[#2DD4BF]"}),f.jsx("h1",{className:"text-xl font-bold text-white tracking-tight uppercase",children:"AIS Maritime Real-time Stream"})]}),f.jsx("p",{className:"text-muted-foreground text-xs font-medium",children:"Live Vessel Traffic Monitoring System (VTMS) - Indonesian Archipelago"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsxs(Nn,{variant:"outline",className:"bg-[#2DD4BF]/10 text-[#2DD4BF] border-[#2DD4BF]/30 py-1",children:[f.jsx(_u,{className:"w-3 h-3 mr-1.5 animate-pulse"}),"LIVE FEED: 24.8 kb/s"]}),f.jsxs("div",{className:"text-[10px] text-muted-foreground text-right border-l border-border/30 pl-3",children:["Source: SAT-AIS HUB-04",f.jsx("br",{}),"Global Satellite Network"]})]})]}),f.jsxs("div",{className:"flex-1 grid grid-cols-1 xl:grid-cols-4 gap-0 overflow-hidden",children:[f.jsxs("div",{className:"xl:col-span-3 relative bg-black",children:[f.jsx(IG,{center:[-2.5489,118.0149],zoom:5,aisMarkers:e,showAIS:!0,className:"w-full h-full",mapView:"indonesia"}),f.jsx("div",{className:"absolute top-4 left-4 z-[500] pointer-events-none",children:f.jsxs("div",{className:"bg-black/80 backdrop-blur-md p-3 rounded-lg border border-border/30 shadow-2xl space-y-2",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-[#22c55e] rounded-sm"}),f.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-tighter",children:"Cargo / General"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-[#ef4444] rounded-sm"}),f.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-tighter",children:"Tankers"})]}),f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx("div",{className:"w-3 h-3 bg-[#3b82f6] rounded-sm"}),f.jsx("span",{className:"text-[10px] font-bold text-white uppercase tracking-tighter",children:"Passenger / Ferry"})]})]})})]}),f.jsxs("div",{className:"hidden xl:flex flex-col border-l border-border/20 bg-[#0f172a]/40 backdrop-blur-xl",children:[f.jsxs("div",{className:"p-6 space-y-6",children:[f.jsx("h2",{className:"text-xs font-bold text-[#2DD4BF] uppercase tracking-[0.2em] mb-4",children:"Traffic Summary"}),f.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[f.jsx(nn,{className:"bg-white/5 border-none shadow-none",children:f.jsxs(hh,{className:"p-4 flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-[#2DD4BF]/10 flex items-center justify-center",children:f.jsx(Au,{className:"w-5 h-5 text-[#2DD4BF]"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:"Active Vessels"}),f.jsx("p",{className:"text-2xl font-bold text-white",children:t.count})]})]})}),f.jsx(nn,{className:"bg-white/5 border-none shadow-none",children:f.jsxs(hh,{className:"p-4 flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-cyan-500/10 flex items-center justify-center",children:f.jsx(EB,{className:"w-5 h-5 text-cyan-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:"Avg Speed"}),f.jsxs("p",{className:"text-2xl font-bold text-white",children:[t.avgSpeed,f.jsx("span",{className:"text-xs ml-1",children:"KN"})]})]})]})}),f.jsx(nn,{className:"bg-white/5 border-none shadow-none",children:f.jsxs(hh,{className:"p-4 flex items-center gap-4",children:[f.jsx("div",{className:"w-10 h-10 rounded bg-blue-500/10 flex items-center justify-center",children:f.jsx(NC,{className:"w-5 h-5 text-blue-400"})}),f.jsxs("div",{children:[f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-bold tracking-wider",children:"Ports Active"}),f.jsx("p",{className:"text-2xl font-bold text-white",children:"42"})]})]})})]}),f.jsxs("div",{className:"bg-[#2DD4BF]/5 border border-[#2DD4BF]/20 rounded-lg p-4 mt-6",children:[f.jsx("h4",{className:"text-[10px] font-bold text-[#2DD4BF] uppercase mb-2",children:"Security Notice"}),f.jsx("p",{className:"text-[10px] text-muted-foreground leading-relaxed",children:"Anomaly detection is currently active in Malacca Strait. 3 unidentified signals filtered."})]}),f.jsxs("div",{className:"mt-8",children:[f.jsxs("h3",{className:"text-[10px] font-bold text-muted-foreground uppercase tracking-widest mb-4 flex items-center gap-2",children:[f.jsx(oM,{className:"w-3 h-3"}),"Technical Info"]}),f.jsx("p",{className:"text-xs text-muted-foreground leading-relaxed",children:"Live AIS Class A & B transponders monitored via orbital satellite arrays and terrestrial base stations (AIS-RX)."})]})]}),f.jsxs("div",{className:"mt-auto p-4 border-t border-border/10 bg-black/20 text-[9px] text-muted-foreground flex justify-between",children:[f.jsx("span",{children:" MARIVIEW MARINE DATA"}),f.jsx("span",{className:"text-[#2DD4BF]",children:"AIS-ENCRYPTED"})]})]})]})]})}var dTe=Symbol("radix.slottable");function hTe(e){const t=({children:n})=>f.jsx(f.Fragment,{children:n});return t.displayName=`${e}.Slottable`,t.__radixId=dTe,t}var[Yw]=Wl("Tooltip",[Ky]),Jw=Ky(),NG="TooltipProvider",fTe=700,tM="tooltip.open",[pTe,CI]=Yw(NG),DG=e=>{const{__scopeTooltip:t,delayDuration:n=fTe,skipDelayDuration:r=300,disableHoverableContent:s=!1,children:h}=e,d=W.useRef(!0),o=W.useRef(!1),_=W.useRef(0);return W.useEffect(()=>{const w=_.current;return()=>window.clearTimeout(w)},[]),f.jsx(pTe,{scope:t,isOpenDelayedRef:d,delayDuration:n,onOpen:W.useCallback(()=>{window.clearTimeout(_.current),d.current=!1},[]),onClose:W.useCallback(()=>{window.clearTimeout(_.current),_.current=window.setTimeout(()=>d.current=!0,r)},[r]),isPointerInTransitRef:o,onPointerInTransitChange:W.useCallback(w=>{o.current=w},[]),disableHoverableContent:s,children:h})};DG.displayName=NG;var u0="Tooltip",[mTe,D0]=Yw(u0),OG=e=>{const{__scopeTooltip:t,children:n,open:r,defaultOpen:s,onOpenChange:h,disableHoverableContent:d,delayDuration:o}=e,_=CI(u0,e.__scopeTooltip),w=Jw(t),[A,P]=W.useState(null),N=vd(),z=W.useRef(0),q=d??_.disableHoverableContent,$=o??_.delayDuration,O=W.useRef(!1),[X,K]=bd({prop:r,defaultProp:s??!1,onChange:de=>{de?(_.onOpen(),document.dispatchEvent(new CustomEvent(tM))):_.onClose(),h?.(de)},caller:u0}),te=W.useMemo(()=>X?O.current?"delayed-open":"instant-open":"closed",[X]),ne=W.useCallback(()=>{window.clearTimeout(z.current),z.current=0,O.current=!1,K(!0)},[K]),H=W.useCallback(()=>{window.clearTimeout(z.current),z.current=0,K(!1)},[K]),ae=W.useCallback(()=>{window.clearTimeout(z.current),z.current=window.setTimeout(()=>{O.current=!0,K(!0),z.current=0},$)},[$,K]);return W.useEffect(()=>()=>{z.current&&(window.clearTimeout(z.current),z.current=0)},[]),f.jsx(jM,{...w,children:f.jsx(mTe,{scope:t,contentId:N,open:X,stateAttribute:te,trigger:A,onTriggerChange:P,onTriggerEnter:W.useCallback(()=>{_.isOpenDelayedRef.current?ae():ne()},[_.isOpenDelayedRef,ae,ne]),onTriggerLeave:W.useCallback(()=>{q?H():(window.clearTimeout(z.current),z.current=0)},[H,q]),onOpen:ne,onClose:H,disableHoverableContent:q,children:n})})};OG.displayName=u0;var nM="TooltipTrigger",RG=W.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=D0(nM,n),h=CI(nM,n),d=Jw(n),o=W.useRef(null),_=gr(t,o,s.onTriggerChange),w=W.useRef(!1),A=W.useRef(!1),P=W.useCallback(()=>w.current=!1,[]);return W.useEffect(()=>()=>document.removeEventListener("pointerup",P),[P]),f.jsx(MM,{asChild:!0,...d,children:f.jsx(qn.button,{"aria-describedby":s.open?s.contentId:void 0,"data-state":s.stateAttribute,...r,ref:_,onPointerMove:dn(e.onPointerMove,N=>{N.pointerType!=="touch"&&!A.current&&!h.isPointerInTransitRef.current&&(s.onTriggerEnter(),A.current=!0)}),onPointerLeave:dn(e.onPointerLeave,()=>{s.onTriggerLeave(),A.current=!1}),onPointerDown:dn(e.onPointerDown,()=>{s.open&&s.onClose(),w.current=!0,document.addEventListener("pointerup",P,{once:!0})}),onFocus:dn(e.onFocus,()=>{w.current||s.onOpen()}),onBlur:dn(e.onBlur,s.onClose),onClick:dn(e.onClick,s.onClose)})})});RG.displayName=nM;var EI="TooltipPortal",[gTe,yTe]=Yw(EI,{forceMount:void 0}),LG=e=>{const{__scopeTooltip:t,forceMount:n,children:r,container:s}=e,h=D0(EI,t);return f.jsx(gTe,{scope:t,forceMount:n,children:f.jsx(Bc,{present:n||h.open,children:f.jsx(p0,{asChild:!0,container:s,children:r})})})};LG.displayName=EI;var Vy="TooltipContent",zG=W.forwardRef((e,t)=>{const n=yTe(Vy,e.__scopeTooltip),{forceMount:r=n.forceMount,side:s="top",...h}=e,d=D0(Vy,e.__scopeTooltip);return f.jsx(Bc,{present:r||d.open,children:d.disableHoverableContent?f.jsx(FG,{side:s,...h,ref:t}):f.jsx(vTe,{side:s,...h,ref:t})})}),vTe=W.forwardRef((e,t)=>{const n=D0(Vy,e.__scopeTooltip),r=CI(Vy,e.__scopeTooltip),s=W.useRef(null),h=gr(t,s),[d,o]=W.useState(null),{trigger:_,onClose:w}=n,A=s.current,{onPointerInTransitChange:P}=r,N=W.useCallback(()=>{o(null),P(!1)},[P]),z=W.useCallback((q,$)=>{const O=q.currentTarget,X={x:q.clientX,y:q.clientY},K=wTe(X,O.getBoundingClientRect()),te=STe(X,K),ne=TTe($.getBoundingClientRect()),H=ATe([...te,...ne]);o(H),P(!0)},[P]);return W.useEffect(()=>()=>N(),[N]),W.useEffect(()=>{if(_&&A){const q=O=>z(O,A),$=O=>z(O,_);return _.addEventListener("pointerleave",q),A.addEventListener("pointerleave",$),()=>{_.removeEventListener("pointerleave",q),A.removeEventListener("pointerleave",$)}}},[_,A,z,N]),W.useEffect(()=>{if(d){const q=$=>{const O=$.target,X={x:$.clientX,y:$.clientY},K=_?.contains(O)||A?.contains(O),te=!PTe(X,d);K?N():te&&(N(),w())};return document.addEventListener("pointermove",q),()=>document.removeEventListener("pointermove",q)}},[_,A,d,w,N]),f.jsx(FG,{...e,ref:h})}),[xTe,_Te]=Yw(u0,{isInside:!1}),bTe=hTe("TooltipContent"),FG=W.forwardRef((e,t)=>{const{__scopeTooltip:n,children:r,"aria-label":s,onEscapeKeyDown:h,onPointerDownOutside:d,...o}=e,_=D0(Vy,n),w=Jw(n),{onClose:A}=_;return W.useEffect(()=>(document.addEventListener(tM,A),()=>document.removeEventListener(tM,A)),[A]),W.useEffect(()=>{if(_.trigger){const P=N=>{N.target?.contains(_.trigger)&&A()};return window.addEventListener("scroll",P,{capture:!0}),()=>window.removeEventListener("scroll",P,{capture:!0})}},[_.trigger,A]),f.jsx(f0,{asChild:!0,disableOutsidePointerEvents:!1,onEscapeKeyDown:h,onPointerDownOutside:d,onFocusOutside:P=>P.preventDefault(),onDismiss:A,children:f.jsxs(kM,{"data-state":_.stateAttribute,...w,...o,ref:t,style:{...o.style,"--radix-tooltip-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-tooltip-content-available-width":"var(--radix-popper-available-width)","--radix-tooltip-content-available-height":"var(--radix-popper-available-height)","--radix-tooltip-trigger-width":"var(--radix-popper-anchor-width)","--radix-tooltip-trigger-height":"var(--radix-popper-anchor-height)"},children:[f.jsx(bTe,{children:r}),f.jsx(xTe,{scope:n,isInside:!0,children:f.jsx(cee,{id:_.contentId,role:"tooltip",children:s||r})})]})})});zG.displayName=Vy;var BG="TooltipArrow",$G=W.forwardRef((e,t)=>{const{__scopeTooltip:n,...r}=e,s=Jw(n);return _Te(BG,n).isInside?null:f.jsx(IM,{...s,...r,ref:t})});$G.displayName=BG;function wTe(e,t){const n=Math.abs(t.top-e.y),r=Math.abs(t.bottom-e.y),s=Math.abs(t.right-e.x),h=Math.abs(t.left-e.x);switch(Math.min(n,r,s,h)){case h:return"left";case s:return"right";case n:return"top";case r:return"bottom";default:throw new Error("unreachable")}}function STe(e,t,n=5){const r=[];switch(t){case"top":r.push({x:e.x-n,y:e.y+n},{x:e.x+n,y:e.y+n});break;case"bottom":r.push({x:e.x-n,y:e.y-n},{x:e.x+n,y:e.y-n});break;case"left":r.push({x:e.x+n,y:e.y-n},{x:e.x+n,y:e.y+n});break;case"right":r.push({x:e.x-n,y:e.y-n},{x:e.x-n,y:e.y+n});break}return r}function TTe(e){const{top:t,right:n,bottom:r,left:s}=e;return[{x:s,y:t},{x:n,y:t},{x:n,y:r},{x:s,y:r}]}function PTe(e,t){const{x:n,y:r}=e;let s=!1;for(let h=0,d=t.length-1;h<t.length;d=h++){const o=t[h],_=t[d],w=o.x,A=o.y,P=_.x,N=_.y;A>r!=N>r&&n<(P-w)*(r-A)/(N-A)+w&&(s=!s)}return s}function ATe(e){const t=e.slice();return t.sort((n,r)=>n.x<r.x?-1:n.x>r.x?1:n.y<r.y?-1:n.y>r.y?1:0),CTe(t)}function CTe(e){if(e.length<=1)return e.slice();const t=[];for(let r=0;r<e.length;r++){const s=e[r];for(;t.length>=2;){const h=t[t.length-1],d=t[t.length-2];if((h.x-d.x)*(s.y-d.y)>=(h.y-d.y)*(s.x-d.x))t.pop();else break}t.push(s)}t.pop();const n=[];for(let r=e.length-1;r>=0;r--){const s=e[r];for(;n.length>=2;){const h=n[n.length-1],d=n[n.length-2];if((h.x-d.x)*(s.y-d.y)>=(h.y-d.y)*(s.x-d.x))n.pop();else break}n.push(s)}return n.pop(),t.length===1&&n.length===1&&t[0].x===n[0].x&&t[0].y===n[0].y?t:t.concat(n)}var ETe=DG,jTe=OG,MTe=RG,kTe=LG,ITe=zG,NTe=$G;function VG({delayDuration:e=0,...t}){return f.jsx(ETe,{"data-slot":"tooltip-provider",delayDuration:e,...t})}function xB({...e}){return f.jsx(VG,{children:f.jsx(jTe,{"data-slot":"tooltip",...e})})}function _B({...e}){return f.jsx(MTe,{"data-slot":"tooltip-trigger",...e})}function bB({className:e,sideOffset:t=0,children:n,...r}){return f.jsx(kTe,{children:f.jsxs(ITe,{"data-slot":"tooltip-content",sideOffset:t,className:or("bg-primary text-primary-foreground animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 w-fit origin-(--radix-tooltip-content-transform-origin) rounded-md px-3 py-1.5 text-xs text-balance",e),...r,children:[n,f.jsx(NTe,{className:"bg-primary fill-primary z-50 size-2.5 translate-y-[calc(-50%_-_2px)] rotate-45 rounded-[2px]"})]})})}function DTe(){const[e,t]=W.useState("dashboard"),[n,r]=W.useState(!1),[s,h]=W.useState(!1),{colors:d}=TB(),o=[{title:"MAIN",items:[{id:"dashboard",label:"Dashboard",icon:aM},{id:"new-flight",label:"Mission",icon:TH},{id:"assets",label:"Asset Management",icon:FC},{id:"history",label:"Mission History",icon:IB},{id:"settings",label:"Settings",icon:sM},{id:"activity-log",label:"Activity Log",icon:LC}]},{title:"DATA",items:[{id:"weather",label:"Weather Info",icon:NH},{id:"adsb",label:"ADS-B Stream",icon:yd},{id:"ais",label:"AIS Stream",icon:Au}]}],_=()=>{switch(e){case"dashboard":return f.jsx(RD,{});case"new-flight":return f.jsx(Ioe,{onMissionLaunch:()=>t("live-ops")});case"live-ops":return f.jsx(KV,{onEndFlightComplete:()=>{console.log(" onEndFlightComplete called in App.tsx!"),console.log("Current section:",e),console.log("Setting section to: history"),t("history"),console.log("Section should now be: history")}});case"assets":return f.jsx(Goe,{});case"history":return f.jsx(ySe,{});case"settings":return f.jsx(YSe,{});case"activity-log":return f.jsx(iTe,{});case"weather":return f.jsx(aTe,{});case"adsb":return f.jsx(lTe,{});case"ais":return f.jsx(uTe,{});default:return f.jsx(RD,{})}},w=A=>{t(A),h(!1)};return f.jsx(VG,{delayDuration:300,children:f.jsxs("div",{className:"dark min-h-screen flex bg-background",children:[f.jsxs("div",{className:"lg:hidden fixed top-0 left-0 right-0 h-16 bg-sidebar border-b border-sidebar-border flex items-center justify-between px-4 z-50",children:[f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx(H2,{size:"sm"}),f.jsx("span",{className:"text-sm text-muted-foreground uppercase tracking-widest font-black",children:"Operator 01"})]}),f.jsxs("div",{className:"flex items-center gap-3",children:[f.jsx("div",{className:"relative",children:f.jsx("div",{className:"w-8 h-8 rounded-full bg-[#21A68D] flex items-center justify-center border border-white/10",children:f.jsx("span",{className:"text-white font-black text-[10px]",children:"O1"})})}),f.jsxs(Fb,{open:s,onOpenChange:h,children:[f.jsx(Foe,{asChild:!0,children:f.jsx("button",{className:"p-2 rounded-lg hover:bg-sidebar-accent text-sidebar-foreground",children:f.jsx(uZ,{className:"w-6 h-6"})})}),f.jsx(Bb,{side:"left",className:"w-72 p-0 bg-sidebar border-sidebar-border",children:f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"p-6 border-b border-sidebar-border",children:[f.jsx(H2,{size:"md"}),f.jsx("p",{className:"text-[10px] text-muted-foreground mt-2 uppercase font-black tracking-widest text-center",children:"Command Center"})]}),f.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:f.jsx("div",{className:"space-y-6",children:o.map((A,P)=>f.jsxs("div",{children:[A.title&&f.jsx("h3",{className:"text-[10px] font-black text-muted-foreground mb-3 px-4 tracking-[0.2em]",children:A.title}),f.jsx("ul",{className:"space-y-1",children:A.items.map(N=>{const z=N.icon,q=e===N.id;return f.jsx("li",{children:f.jsxs("button",{onClick:()=>w(N.id),className:`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all ${q?"bg-[#21A68D] text-white shadow-lg shadow-[#21A68D]/20":"text-sidebar-foreground hover:bg-sidebar-accent"}`,children:[f.jsx(z,{className:"w-5 h-5 flex-shrink-0"}),f.jsx("span",{className:"font-bold text-sm tracking-tight",children:N.label})]})},N.id)})})]},P))})})]})})]})]})]}),f.jsxs("div",{className:`hidden lg:flex bg-sidebar border-r border-sidebar-border flex-col transition-all duration-300 ease-in-out ${n?"w-20":"w-64"}`,children:[f.jsxs("div",{className:"p-6 border-b border-sidebar-border flex items-center justify-between",children:[f.jsx("div",{className:`overflow-hidden transition-all duration-300 ${n?"w-0 opacity-0":"w-auto opacity-100"}`,children:f.jsx(H2,{size:"md"})}),f.jsx("button",{onClick:()=>r(!n),className:`p-2 rounded-lg hover:bg-sidebar-accent text-sidebar-foreground transition-all ${n?"mx-auto":""}`,children:n?f.jsx(Wg,{className:"w-5 h-5"}):f.jsx(AB,{className:"w-5 h-5"})})]}),f.jsx("nav",{className:"flex-1 p-4 overflow-y-auto",children:f.jsx("div",{className:"space-y-6",children:o.map((A,P)=>f.jsxs("div",{children:[!n&&f.jsx("h3",{className:"text-[10px] font-black text-muted-foreground mb-3 px-4 tracking-[0.2em] uppercase opacity-50",children:A.title}),f.jsx("ul",{className:"space-y-1",children:A.items.map(N=>{const z=N.icon,q=e===N.id,$=f.jsxs("button",{onClick:()=>w(N.id),className:`flex items-center rounded-xl transition-all duration-300 ${q?"bg-[#21A68D] text-white shadow-lg shadow-[#21A68D]/20":"text-sidebar-foreground hover:bg-sidebar-accent"} ${n?"w-12 h-12 justify-center mx-auto p-0":"w-full gap-3 px-4 py-3"}`,children:[f.jsx(z,{className:`${n?"w-6 h-6":"w-5 h-5"} flex-shrink-0 transition-all duration-300`}),!n&&f.jsx("span",{className:"font-bold text-sm tracking-tight truncate",children:N.label})]});return f.jsx("li",{children:n?f.jsxs(xB,{children:[f.jsx(_B,{asChild:!0,children:$}),f.jsx(bB,{side:"right",className:"bg-[#21A68D] text-white border-none font-bold",children:N.label})]}):$},N.id)})})]},P))})}),f.jsx("div",{className:"p-4 border-t border-sidebar-border bg-white/[0.02] flex flex-col items-center justify-center",children:n?f.jsxs(xB,{children:[f.jsx(_B,{asChild:!0,children:f.jsx("div",{className:"w-12 h-12 rounded-full bg-[#21A68D] flex items-center justify-center border border-white/10 shadow-lg shadow-[#21A68D]/20 cursor-pointer hover:scale-110 transition-transform duration-300",children:f.jsx("span",{className:"text-white font-black text-sm",children:"O1"})})}),f.jsxs(bB,{side:"right",children:[f.jsx("p",{className:"font-bold",children:"Operator 01"}),f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-black",children:"Jakarta  Online"})]})]}):f.jsxs("div",{className:"w-full flex items-center gap-3",children:[f.jsx("div",{className:"w-10 h-10 rounded-full bg-[#21A68D] flex items-center justify-center border border-white/10 shadow-lg shadow-[#21A68D]/20 flex-shrink-0",children:f.jsx("span",{className:"text-white font-black text-xs",children:"O1"})}),f.jsxs("div",{className:"overflow-hidden",children:[f.jsx("p",{className:"text-sm font-black text-white leading-none truncate",children:"Operator 01"}),f.jsx("p",{className:"text-[10px] text-muted-foreground uppercase font-black tracking-widest mt-1 truncate",children:"Jakarta  Online"})]})]})})]}),f.jsx("div",{className:"flex-1 flex flex-col min-w-0 h-screen",children:f.jsx("main",{className:"flex-1 overflow-auto bg-[#0a0e1a] lg:pt-0 pt-16",children:_()})})]})})}function OTe(){return f.jsxs(eH,{children:[f.jsx(DTe,{}),f.jsx(JZ,{})]})}QW.createRoot(document.getElementById("root")).render(f.jsx(OTe,{}));
